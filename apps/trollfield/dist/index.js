(function(){const T=document.createElement("link").relList;if(T&&T.supports&&T.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))d(k);new MutationObserver(k=>{for(const K of k)if(K.type==="childList")for(const S of K.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&d(S)}).observe(document,{childList:!0,subtree:!0});function W(k){const K={};return k.integrity&&(K.integrity=k.integrity),k.referrerpolicy&&(K.referrerPolicy=k.referrerpolicy),k.crossorigin==="use-credentials"?K.credentials="include":k.crossorigin==="anonymous"?K.credentials="omit":K.credentials="same-origin",K}function d(k){if(k.ep)return;k.ep=!0;const K=W(k);fetch(k.href,K)}})();function j1(u,T){const W=Object.create(null),d=u.split(",");for(let k=0;k<d.length;k++)W[d[k]]=!0;return T?k=>!!W[k.toLowerCase()]:k=>!!W[k]}const ho={},um=[],Rc=()=>{},a_=()=>!1,l_=/^on[^a-z]/,zA=u=>l_.test(u),W1=u=>u.startsWith("onUpdate:"),pa=Object.assign,K1=(u,T)=>{const W=u.indexOf(T);W>-1&&u.splice(W,1)},c_=Object.prototype.hasOwnProperty,Ms=(u,T)=>c_.call(u,T),Nr=Array.isArray,hm=u=>VA(u)==="[object Map]",J2=u=>VA(u)==="[object Set]",ss=u=>typeof u=="function",na=u=>typeof u=="string",X1=u=>typeof u=="symbol",fo=u=>u!==null&&typeof u=="object",Z2=u=>fo(u)&&ss(u.then)&&ss(u.catch),$2=Object.prototype.toString,VA=u=>$2.call(u),u_=u=>VA(u).slice(8,-1),ex=u=>VA(u)==="[object Object]",Y1=u=>na(u)&&u!=="NaN"&&u[0]!=="-"&&""+parseInt(u,10)===u,LA=j1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),QA=u=>{const T=Object.create(null);return W=>T[W]||(T[W]=u(W))},h_=/-(\w)/g,hu=QA(u=>u.replace(h_,(T,W)=>W?W.toUpperCase():"")),d_=/\B([A-Z])/g,ym=QA(u=>u.replace(d_,"-$1").toLowerCase()),jA=QA(u=>u.charAt(0).toUpperCase()+u.slice(1)),m1=QA(u=>u?`on${jA(u)}`:""),e0=(u,T)=>!Object.is(u,T),g1=(u,T)=>{for(let W=0;W<u.length;W++)u[W](T)},FA=(u,T,W)=>{Object.defineProperty(u,T,{configurable:!0,enumerable:!1,value:W})},f_=u=>{const T=parseFloat(u);return isNaN(T)?u:T};let i2;const M1=()=>i2||(i2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function q1(u){if(Nr(u)){const T={};for(let W=0;W<u.length;W++){const d=u[W],k=na(d)?A_(d):q1(d);if(k)for(const K in k)T[K]=k[K]}return T}else{if(na(u))return u;if(fo(u))return u}}const p_=/;(?![^(]*\))/g,m_=/:([^]+)/,g_=/\/\*[^]*?\*\//g;function A_(u){const T={};return u.replace(g_,"").split(p_).forEach(W=>{if(W){const d=W.split(m_);d.length>1&&(T[d[0].trim()]=d[1].trim())}}),T}function nd(u){let T="";if(na(u))T=u;else if(Nr(u))for(let W=0;W<u.length;W++){const d=nd(u[W]);d&&(T+=d+" ")}else if(fo(u))for(const W in u)u[W]&&(T+=W+" ");return T.trim()}const v_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",y_=j1(v_);function tx(u){return!!u||u===""}const T1=u=>na(u)?u:u==null?"":Nr(u)||fo(u)&&(u.toString===$2||!ss(u.toString))?JSON.stringify(u,nx,2):String(u),nx=(u,T)=>T&&T.__v_isRef?nx(u,T.value):hm(T)?{[`Map(${T.size})`]:[...T.entries()].reduce((W,[d,k])=>(W[`${d} =>`]=k,W),{})}:J2(T)?{[`Set(${T.size})`]:[...T.values()]}:fo(T)&&!Nr(T)&&!ex(T)?String(T):T;let Ll;class ix{constructor(T=!1){this.detached=T,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ll,!T&&Ll&&(this.index=(Ll.scopes||(Ll.scopes=[])).push(this)-1)}get active(){return this._active}run(T){if(this._active){const W=Ll;try{return Ll=this,T()}finally{Ll=W}}}on(){Ll=this}off(){Ll=this.parent}stop(T){if(this._active){let W,d;for(W=0,d=this.effects.length;W<d;W++)this.effects[W].stop();for(W=0,d=this.cleanups.length;W<d;W++)this.cleanups[W]();if(this.scopes)for(W=0,d=this.scopes.length;W<d;W++)this.scopes[W].stop(!0);if(!this.detached&&this.parent&&!T){const k=this.parent.scopes.pop();k&&k!==this&&(this.parent.scopes[this.index]=k,k.index=this.index)}this.parent=void 0,this._active=!1}}}function rx(u){return new ix(u)}function x_(u,T=Ll){T&&T.active&&T.effects.push(u)}function sx(){return Ll}function E_(u){Ll&&Ll.cleanups.push(u)}const J1=u=>{const T=new Set(u);return T.w=0,T.n=0,T},ox=u=>(u.w&td)>0,ax=u=>(u.n&td)>0,b_=({deps:u})=>{if(u.length)for(let T=0;T<u.length;T++)u[T].w|=td},__=u=>{const{deps:T}=u;if(T.length){let W=0;for(let d=0;d<T.length;d++){const k=T[d];ox(k)&&!ax(k)?k.delete(u):T[W++]=k,k.w&=~td,k.n&=~td}T.length=W}},NA=new WeakMap;let Wg=0,td=1;const S1=30;let Sc;const Sf=Symbol(""),I1=Symbol("");class Z1{constructor(T,W=null,d){this.fn=T,this.scheduler=W,this.active=!0,this.deps=[],this.parent=void 0,x_(this,d)}run(){if(!this.active)return this.fn();let T=Sc,W=Zh;for(;T;){if(T===this)return;T=T.parent}try{return this.parent=Sc,Sc=this,Zh=!0,td=1<<++Wg,Wg<=S1?b_(this):r2(this),this.fn()}finally{Wg<=S1&&__(this),td=1<<--Wg,Sc=this.parent,Zh=W,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Sc===this?this.deferStop=!0:this.active&&(r2(this),this.onStop&&this.onStop(),this.active=!1)}}function r2(u){const{deps:T}=u;if(T.length){for(let W=0;W<T.length;W++)T[W].delete(u);T.length=0}}let Zh=!0;const lx=[];function xm(){lx.push(Zh),Zh=!1}function Em(){const u=lx.pop();Zh=u===void 0?!0:u}function il(u,T,W){if(Zh&&Sc){let d=NA.get(u);d||NA.set(u,d=new Map);let k=d.get(W);k||d.set(W,k=J1()),cx(k)}}function cx(u,T){let W=!1;Wg<=S1?ax(u)||(u.n|=td,W=!ox(u)):W=!u.has(Sc),W&&(u.add(Sc),Sc.deps.push(u))}function nh(u,T,W,d,k,K){const S=NA.get(u);if(!S)return;let I=[];if(T==="clear")I=[...S.values()];else if(W==="length"&&Nr(u)){const h=Number(d);S.forEach((g,C)=>{(C==="length"||C>=h)&&I.push(g)})}else switch(W!==void 0&&I.push(S.get(W)),T){case"add":Nr(u)?Y1(W)&&I.push(S.get("length")):(I.push(S.get(Sf)),hm(u)&&I.push(S.get(I1)));break;case"delete":Nr(u)||(I.push(S.get(Sf)),hm(u)&&I.push(S.get(I1)));break;case"set":hm(u)&&I.push(S.get(Sf));break}if(I.length===1)I[0]&&R1(I[0]);else{const h=[];for(const g of I)g&&h.push(...g);R1(J1(h))}}function R1(u,T){const W=Nr(u)?u:[...u];for(const d of W)d.computed&&s2(d);for(const d of W)d.computed||s2(d)}function s2(u,T){(u!==Sc||u.allowRecurse)&&(u.scheduler?u.scheduler():u.run())}function w_(u,T){var W;return(W=NA.get(u))==null?void 0:W.get(T)}const C_=j1("__proto__,__v_isRef,__isVue"),ux=new Set(Object.getOwnPropertyNames(Symbol).filter(u=>u!=="arguments"&&u!=="caller").map(u=>Symbol[u]).filter(X1)),M_=$1(),T_=$1(!1,!0),S_=$1(!0),o2=I_();function I_(){const u={};return["includes","indexOf","lastIndexOf"].forEach(T=>{u[T]=function(...W){const d=Ts(this);for(let K=0,S=this.length;K<S;K++)il(d,"get",K+"");const k=d[T](...W);return k===-1||k===!1?d[T](...W.map(Ts)):k}}),["push","pop","shift","unshift","splice"].forEach(T=>{u[T]=function(...W){xm();const d=Ts(this)[T].apply(this,W);return Em(),d}}),u}function R_(u){const T=Ts(this);return il(T,"has",u),T.hasOwnProperty(u)}function $1(u=!1,T=!1){return function(d,k,K){if(k==="__v_isReactive")return!u;if(k==="__v_isReadonly")return u;if(k==="__v_isShallow")return T;if(k==="__v_raw"&&K===(u?T?W_:mx:T?px:fx).get(d))return d;const S=Nr(d);if(!u){if(S&&Ms(o2,k))return Reflect.get(o2,k,K);if(k==="hasOwnProperty")return R_}const I=Reflect.get(d,k,K);return(X1(k)?ux.has(k):C_(k))||(u||il(d,"get",k),T)?I:Oo(I)?S&&Y1(k)?I:I.value:fo(I)?u?Ax(I):l0(I):I}}const B_=hx(),L_=hx(!0);function hx(u=!1){return function(W,d,k,K){let S=W[d];if(pm(S)&&Oo(S)&&!Oo(k))return!1;if(!u&&(!kA(k)&&!pm(k)&&(S=Ts(S),k=Ts(k)),!Nr(W)&&Oo(S)&&!Oo(k)))return S.value=k,!0;const I=Nr(W)&&Y1(d)?Number(d)<W.length:Ms(W,d),h=Reflect.set(W,d,k,K);return W===Ts(K)&&(I?e0(k,S)&&nh(W,"set",d,k):nh(W,"add",d,k)),h}}function D_(u,T){const W=Ms(u,T);u[T];const d=Reflect.deleteProperty(u,T);return d&&W&&nh(u,"delete",T,void 0),d}function P_(u,T){const W=Reflect.has(u,T);return(!X1(T)||!ux.has(T))&&il(u,"has",T),W}function O_(u){return il(u,"iterate",Nr(u)?"length":Sf),Reflect.ownKeys(u)}const dx={get:M_,set:B_,deleteProperty:D_,has:P_,ownKeys:O_},F_={get:S_,set(u,T){return!0},deleteProperty(u,T){return!0}},N_=pa({},dx,{get:T_,set:L_}),ey=u=>u,WA=u=>Reflect.getPrototypeOf(u);function CA(u,T,W=!1,d=!1){u=u.__v_raw;const k=Ts(u),K=Ts(T);W||(T!==K&&il(k,"get",T),il(k,"get",K));const{has:S}=WA(k),I=d?ey:W?iy:t0;if(S.call(k,T))return I(u.get(T));if(S.call(k,K))return I(u.get(K));u!==k&&u.get(T)}function MA(u,T=!1){const W=this.__v_raw,d=Ts(W),k=Ts(u);return T||(u!==k&&il(d,"has",u),il(d,"has",k)),u===k?W.has(u):W.has(u)||W.has(k)}function TA(u,T=!1){return u=u.__v_raw,!T&&il(Ts(u),"iterate",Sf),Reflect.get(u,"size",u)}function a2(u){u=Ts(u);const T=Ts(this);return WA(T).has.call(T,u)||(T.add(u),nh(T,"add",u,u)),this}function l2(u,T){T=Ts(T);const W=Ts(this),{has:d,get:k}=WA(W);let K=d.call(W,u);K||(u=Ts(u),K=d.call(W,u));const S=k.call(W,u);return W.set(u,T),K?e0(T,S)&&nh(W,"set",u,T):nh(W,"add",u,T),this}function c2(u){const T=Ts(this),{has:W,get:d}=WA(T);let k=W.call(T,u);k||(u=Ts(u),k=W.call(T,u)),d&&d.call(T,u);const K=T.delete(u);return k&&nh(T,"delete",u,void 0),K}function u2(){const u=Ts(this),T=u.size!==0,W=u.clear();return T&&nh(u,"clear",void 0,void 0),W}function SA(u,T){return function(d,k){const K=this,S=K.__v_raw,I=Ts(S),h=T?ey:u?iy:t0;return!u&&il(I,"iterate",Sf),S.forEach((g,C)=>d.call(k,h(g),h(C),K))}}function IA(u,T,W){return function(...d){const k=this.__v_raw,K=Ts(k),S=hm(K),I=u==="entries"||u===Symbol.iterator&&S,h=u==="keys"&&S,g=k[u](...d),C=W?ey:T?iy:t0;return!T&&il(K,"iterate",h?I1:Sf),{next(){const{value:v,done:y}=g.next();return y?{value:v,done:y}:{value:I?[C(v[0]),C(v[1])]:C(v),done:y}},[Symbol.iterator](){return this}}}}function Kh(u){return function(...T){return u==="delete"?!1:this}}function k_(){const u={get(K){return CA(this,K)},get size(){return TA(this)},has:MA,add:a2,set:l2,delete:c2,clear:u2,forEach:SA(!1,!1)},T={get(K){return CA(this,K,!1,!0)},get size(){return TA(this)},has:MA,add:a2,set:l2,delete:c2,clear:u2,forEach:SA(!1,!0)},W={get(K){return CA(this,K,!0)},get size(){return TA(this,!0)},has(K){return MA.call(this,K,!0)},add:Kh("add"),set:Kh("set"),delete:Kh("delete"),clear:Kh("clear"),forEach:SA(!0,!1)},d={get(K){return CA(this,K,!0,!0)},get size(){return TA(this,!0)},has(K){return MA.call(this,K,!0)},add:Kh("add"),set:Kh("set"),delete:Kh("delete"),clear:Kh("clear"),forEach:SA(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(K=>{u[K]=IA(K,!1,!1),W[K]=IA(K,!0,!1),T[K]=IA(K,!1,!0),d[K]=IA(K,!0,!0)}),[u,W,T,d]}const[U_,G_,H_,z_]=k_();function ty(u,T){const W=T?u?z_:H_:u?G_:U_;return(d,k,K)=>k==="__v_isReactive"?!u:k==="__v_isReadonly"?u:k==="__v_raw"?d:Reflect.get(Ms(W,k)&&k in d?W:d,k,K)}const V_={get:ty(!1,!1)},Q_={get:ty(!1,!0)},j_={get:ty(!0,!1)},fx=new WeakMap,px=new WeakMap,mx=new WeakMap,W_=new WeakMap;function K_(u){switch(u){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function X_(u){return u.__v_skip||!Object.isExtensible(u)?0:K_(u_(u))}function l0(u){return pm(u)?u:ny(u,!1,dx,V_,fx)}function gx(u){return ny(u,!1,N_,Q_,px)}function Ax(u){return ny(u,!0,F_,j_,mx)}function ny(u,T,W,d,k){if(!fo(u)||u.__v_raw&&!(T&&u.__v_isReactive))return u;const K=k.get(u);if(K)return K;const S=X_(u);if(S===0)return u;const I=new Proxy(u,S===2?d:W);return k.set(u,I),I}function $h(u){return pm(u)?$h(u.__v_raw):!!(u&&u.__v_isReactive)}function pm(u){return!!(u&&u.__v_isReadonly)}function kA(u){return!!(u&&u.__v_isShallow)}function vx(u){return $h(u)||pm(u)}function Ts(u){const T=u&&u.__v_raw;return T?Ts(T):u}function KA(u){return FA(u,"__v_skip",!0),u}const t0=u=>fo(u)?l0(u):u,iy=u=>fo(u)?Ax(u):u;function yx(u){Zh&&Sc&&(u=Ts(u),cx(u.dep||(u.dep=J1())))}function xx(u,T){u=Ts(u);const W=u.dep;W&&R1(W)}function Oo(u){return!!(u&&u.__v_isRef===!0)}function ry(u){return Ex(u,!1)}function Y_(u){return Ex(u,!0)}function Ex(u,T){return Oo(u)?u:new q_(u,T)}class q_{constructor(T,W){this.__v_isShallow=W,this.dep=void 0,this.__v_isRef=!0,this._rawValue=W?T:Ts(T),this._value=W?T:t0(T)}get value(){return yx(this),this._value}set value(T){const W=this.__v_isShallow||kA(T)||pm(T);T=W?T:Ts(T),e0(T,this._rawValue)&&(this._rawValue=T,this._value=W?T:t0(T),xx(this))}}function dm(u){return Oo(u)?u.value:u}const J_={get:(u,T,W)=>dm(Reflect.get(u,T,W)),set:(u,T,W,d)=>{const k=u[T];return Oo(k)&&!Oo(W)?(k.value=W,!0):Reflect.set(u,T,W,d)}};function bx(u){return $h(u)?u:new Proxy(u,J_)}function Z_(u){const T=Nr(u)?new Array(u.length):{};for(const W in u)T[W]=ew(u,W);return T}class $_{constructor(T,W,d){this._object=T,this._key=W,this._defaultValue=d,this.__v_isRef=!0}get value(){const T=this._object[this._key];return T===void 0?this._defaultValue:T}set value(T){this._object[this._key]=T}get dep(){return w_(Ts(this._object),this._key)}}function ew(u,T,W){const d=u[T];return Oo(d)?d:new $_(u,T,W)}class tw{constructor(T,W,d,k){this._setter=W,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Z1(T,()=>{this._dirty||(this._dirty=!0,xx(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!k,this.__v_isReadonly=d}get value(){const T=Ts(this);return yx(T),(T._dirty||!T._cacheable)&&(T._dirty=!1,T._value=T.effect.run()),T._value}set value(T){this._setter(T)}}function nw(u,T,W=!1){let d,k;const K=ss(u);return K?(d=u,k=Rc):(d=u.get,k=u.set),new tw(d,k,K||!k,W)}function ed(u,T,W,d){let k;try{k=d?u(...d):u()}catch(K){XA(K,T,W)}return k}function Bc(u,T,W,d){if(ss(u)){const K=ed(u,T,W,d);return K&&Z2(K)&&K.catch(S=>{XA(S,T,W)}),K}const k=[];for(let K=0;K<u.length;K++)k.push(Bc(u[K],T,W,d));return k}function XA(u,T,W,d=!0){const k=T?T.vnode:null;if(T){let K=T.parent;const S=T.proxy,I=W;for(;K;){const g=K.ec;if(g){for(let C=0;C<g.length;C++)if(g[C](u,S,I)===!1)return}K=K.parent}const h=T.appContext.config.errorHandler;if(h){ed(h,null,10,[u,S,I]);return}}iw(u,W,k,d)}function iw(u,T,W,d=!0){console.error(u)}let n0=!1,B1=!1;const Sa=[];let cu=0;const fm=[];let th=null,Mf=0;const _x=Promise.resolve();let sy=null;function oy(u){const T=sy||_x;return u?T.then(this?u.bind(this):u):T}function rw(u){let T=cu+1,W=Sa.length;for(;T<W;){const d=T+W>>>1;i0(Sa[d])<u?T=d+1:W=d}return T}function ay(u){(!Sa.length||!Sa.includes(u,n0&&u.allowRecurse?cu+1:cu))&&(u.id==null?Sa.push(u):Sa.splice(rw(u.id),0,u),wx())}function wx(){!n0&&!B1&&(B1=!0,sy=_x.then(Mx))}function sw(u){const T=Sa.indexOf(u);T>cu&&Sa.splice(T,1)}function ow(u){Nr(u)?fm.push(...u):(!th||!th.includes(u,u.allowRecurse?Mf+1:Mf))&&fm.push(u),wx()}function h2(u,T=n0?cu+1:0){for(;T<Sa.length;T++){const W=Sa[T];W&&W.pre&&(Sa.splice(T,1),T--,W())}}function Cx(u){if(fm.length){const T=[...new Set(fm)];if(fm.length=0,th){th.push(...T);return}for(th=T,th.sort((W,d)=>i0(W)-i0(d)),Mf=0;Mf<th.length;Mf++)th[Mf]();th=null,Mf=0}}const i0=u=>u.id==null?1/0:u.id,aw=(u,T)=>{const W=i0(u)-i0(T);if(W===0){if(u.pre&&!T.pre)return-1;if(T.pre&&!u.pre)return 1}return W};function Mx(u){B1=!1,n0=!0,Sa.sort(aw);const T=Rc;try{for(cu=0;cu<Sa.length;cu++){const W=Sa[cu];W&&W.active!==!1&&ed(W,null,14)}}finally{cu=0,Sa.length=0,Cx(),n0=!1,sy=null,(Sa.length||fm.length)&&Mx()}}function lw(u,T,...W){if(u.isUnmounted)return;const d=u.vnode.props||ho;let k=W;const K=T.startsWith("update:"),S=K&&T.slice(7);if(S&&S in d){const C=`${S==="modelValue"?"model":S}Modifiers`,{number:v,trim:y}=d[C]||ho;y&&(k=W.map(E=>na(E)?E.trim():E)),v&&(k=W.map(f_))}let I,h=d[I=m1(T)]||d[I=m1(hu(T))];!h&&K&&(h=d[I=m1(ym(T))]),h&&Bc(h,u,6,k);const g=d[I+"Once"];if(g){if(!u.emitted)u.emitted={};else if(u.emitted[I])return;u.emitted[I]=!0,Bc(g,u,6,k)}}function Tx(u,T,W=!1){const d=T.emitsCache,k=d.get(u);if(k!==void 0)return k;const K=u.emits;let S={},I=!1;if(!ss(u)){const h=g=>{const C=Tx(g,T,!0);C&&(I=!0,pa(S,C))};!W&&T.mixins.length&&T.mixins.forEach(h),u.extends&&h(u.extends),u.mixins&&u.mixins.forEach(h)}return!K&&!I?(fo(u)&&d.set(u,null),null):(Nr(K)?K.forEach(h=>S[h]=null):pa(S,K),fo(u)&&d.set(u,S),S)}function YA(u,T){return!u||!zA(T)?!1:(T=T.slice(2).replace(/Once$/,""),Ms(u,T[0].toLowerCase()+T.slice(1))||Ms(u,ym(T))||Ms(u,T))}let ec=null,Sx=null;function UA(u){const T=ec;return ec=u,Sx=u&&u.type.__scopeId||null,T}function Dl(u,T=ec,W){if(!T||u._n)return u;const d=(...k)=>{d._d&&b2(-1);const K=UA(T);let S;try{S=u(...k)}finally{UA(K),d._d&&b2(1)}return S};return d._n=!0,d._c=!0,d._d=!0,d}function A1(u){const{type:T,vnode:W,proxy:d,withProxy:k,props:K,propsOptions:[S],slots:I,attrs:h,emit:g,render:C,renderCache:v,data:y,setupState:E,ctx:_,inheritAttrs:m}=u;let w,b;const O=UA(u);try{if(W.shapeFlag&4){const L=k||d;w=lu(C.call(L,L,v,K,E,y,_)),b=h}else{const L=T;w=lu(L.length>1?L(K,{attrs:h,slots:I,emit:g}):L(K,null)),b=T.props?h:cw(h)}}catch(L){qg.length=0,XA(L,u,1),w=ys(Bf)}let R=w;if(b&&m!==!1){const L=Object.keys(b),{shapeFlag:P}=R;L.length&&P&7&&(S&&L.some(W1)&&(b=uw(b,S)),R=mm(R,b))}return W.dirs&&(R=mm(R),R.dirs=R.dirs?R.dirs.concat(W.dirs):W.dirs),W.transition&&(R.transition=W.transition),w=R,UA(O),w}const cw=u=>{let T;for(const W in u)(W==="class"||W==="style"||zA(W))&&((T||(T={}))[W]=u[W]);return T},uw=(u,T)=>{const W={};for(const d in u)(!W1(d)||!(d.slice(9)in T))&&(W[d]=u[d]);return W};function hw(u,T,W){const{props:d,children:k,component:K}=u,{props:S,children:I,patchFlag:h}=T,g=K.emitsOptions;if(T.dirs||T.transition)return!0;if(W&&h>=0){if(h&1024)return!0;if(h&16)return d?d2(d,S,g):!!S;if(h&8){const C=T.dynamicProps;for(let v=0;v<C.length;v++){const y=C[v];if(S[y]!==d[y]&&!YA(g,y))return!0}}}else return(k||I)&&(!I||!I.$stable)?!0:d===S?!1:d?S?d2(d,S,g):!0:!!S;return!1}function d2(u,T,W){const d=Object.keys(T);if(d.length!==Object.keys(u).length)return!0;for(let k=0;k<d.length;k++){const K=d[k];if(T[K]!==u[K]&&!YA(W,K))return!0}return!1}function dw({vnode:u,parent:T},W){for(;T&&T.subTree===u;)(u=T.vnode).el=W,T=T.parent}const fw=u=>u.__isSuspense;function pw(u,T){T&&T.pendingBranch?Nr(u)?T.effects.push(...u):T.effects.push(u):ow(u)}const RA={};function Xg(u,T,W){return Ix(u,T,W)}function Ix(u,T,{immediate:W,deep:d,flush:k,onTrack:K,onTrigger:S}=ho){var I;const h=sx()===((I=fa)==null?void 0:I.scope)?fa:null;let g,C=!1,v=!1;if(Oo(u)?(g=()=>u.value,C=kA(u)):$h(u)?(g=()=>u,d=!0):Nr(u)?(v=!0,C=u.some(L=>$h(L)||kA(L)),g=()=>u.map(L=>{if(Oo(L))return L.value;if($h(L))return cm(L);if(ss(L))return ed(L,h,2)})):ss(u)?T?g=()=>ed(u,h,2):g=()=>{if(!(h&&h.isUnmounted))return y&&y(),Bc(u,h,3,[E])}:g=Rc,T&&d){const L=g;g=()=>cm(L())}let y,E=L=>{y=O.onStop=()=>{ed(L,h,4)}},_;if(o0)if(E=Rc,T?W&&Bc(T,h,3,[g(),v?[]:void 0,E]):g(),k==="sync"){const L=cC();_=L.__watcherHandles||(L.__watcherHandles=[])}else return Rc;let m=v?new Array(u.length).fill(RA):RA;const w=()=>{if(!!O.active)if(T){const L=O.run();(d||C||(v?L.some((P,Y)=>e0(P,m[Y])):e0(L,m)))&&(y&&y(),Bc(T,h,3,[L,m===RA?void 0:v&&m[0]===RA?[]:m,E]),m=L)}else O.run()};w.allowRecurse=!!T;let b;k==="sync"?b=w:k==="post"?b=()=>tl(w,h&&h.suspense):(w.pre=!0,h&&(w.id=h.uid),b=()=>ay(w));const O=new Z1(g,b);T?W?w():m=O.run():k==="post"?tl(O.run.bind(O),h&&h.suspense):O.run();const R=()=>{O.stop(),h&&h.scope&&K1(h.scope.effects,O)};return _&&_.push(R),R}function mw(u,T,W){const d=this.proxy,k=na(u)?u.includes(".")?Rx(d,u):()=>d[u]:u.bind(d,d);let K;ss(T)?K=T:(K=T.handler,W=T);const S=fa;gm(this);const I=Ix(k,K.bind(d),W);return S?gm(S):Rf(),I}function Rx(u,T){const W=T.split(".");return()=>{let d=u;for(let k=0;k<W.length&&d;k++)d=d[W[k]];return d}}function cm(u,T){if(!fo(u)||u.__v_skip||(T=T||new Set,T.has(u)))return u;if(T.add(u),Oo(u))cm(u.value,T);else if(Nr(u))for(let W=0;W<u.length;W++)cm(u[W],T);else if(J2(u)||hm(u))u.forEach(W=>{cm(W,T)});else if(ex(u))for(const W in u)cm(u[W],T);return u}function wf(u,T,W,d){const k=u.dirs,K=T&&T.dirs;for(let S=0;S<k.length;S++){const I=k[S];K&&(I.oldValue=K[S].value);let h=I.dir[d];h&&(xm(),Bc(h,W,8,[u.el,I,u,T]),Em())}}function Bx(u,T){return ss(u)?(()=>pa({name:u.name},T,{setup:u}))():u}const DA=u=>!!u.type.__asyncLoader,Lx=u=>u.type.__isKeepAlive;function gw(u,T){Dx(u,"a",T)}function Aw(u,T){Dx(u,"da",T)}function Dx(u,T,W=fa){const d=u.__wdc||(u.__wdc=()=>{let k=W;for(;k;){if(k.isDeactivated)return;k=k.parent}return u()});if(qA(T,d,W),W){let k=W.parent;for(;k&&k.parent;)Lx(k.parent.vnode)&&vw(d,T,W,k),k=k.parent}}function vw(u,T,W,d){const k=qA(T,u,d,!0);Px(()=>{K1(d[T],k)},W)}function qA(u,T,W=fa,d=!1){if(W){const k=W[u]||(W[u]=[]),K=T.__weh||(T.__weh=(...S)=>{if(W.isUnmounted)return;xm(),gm(W);const I=Bc(T,W,u,S);return Rf(),Em(),I});return d?k.unshift(K):k.push(K),K}}const ih=u=>(T,W=fa)=>(!o0||u==="sp")&&qA(u,(...d)=>T(...d),W),yw=ih("bm"),xw=ih("m"),Ew=ih("bu"),bw=ih("u"),_w=ih("bum"),Px=ih("um"),ww=ih("sp"),Cw=ih("rtg"),Mw=ih("rtc");function Tw(u,T=fa){qA("ec",u,T)}const Ox="components";function bo(u,T){return Iw(Ox,u,!0,T)||u}const Sw=Symbol.for("v-ndc");function Iw(u,T,W=!0,d=!1){const k=ec||fa;if(k){const K=k.type;if(u===Ox){const I=oC(K,!1);if(I&&(I===T||I===hu(T)||I===jA(hu(T))))return K}const S=f2(k[u]||K[u],T)||f2(k.appContext[u],T);return!S&&d?K:S}}function f2(u,T){return u&&(u[T]||u[hu(T)]||u[jA(hu(T))])}function L1(u,T,W,d){let k;const K=W&&W[d];if(Nr(u)||na(u)){k=new Array(u.length);for(let S=0,I=u.length;S<I;S++)k[S]=T(u[S],S,void 0,K&&K[S])}else if(typeof u=="number"){k=new Array(u);for(let S=0;S<u;S++)k[S]=T(S+1,S,void 0,K&&K[S])}else if(fo(u))if(u[Symbol.iterator])k=Array.from(u,(S,I)=>T(S,I,void 0,K&&K[I]));else{const S=Object.keys(u);k=new Array(S.length);for(let I=0,h=S.length;I<h;I++){const g=S[I];k[I]=T(u[g],g,I,K&&K[I])}}else k=[];return W&&(W[d]=k),k}const D1=u=>u?Wx(u)?dy(u)||u.proxy:D1(u.parent):null,Yg=pa(Object.create(null),{$:u=>u,$el:u=>u.vnode.el,$data:u=>u.data,$props:u=>u.props,$attrs:u=>u.attrs,$slots:u=>u.slots,$refs:u=>u.refs,$parent:u=>D1(u.parent),$root:u=>D1(u.root),$emit:u=>u.emit,$options:u=>ly(u),$forceUpdate:u=>u.f||(u.f=()=>ay(u.update)),$nextTick:u=>u.n||(u.n=oy.bind(u.proxy)),$watch:u=>mw.bind(u)}),v1=(u,T)=>u!==ho&&!u.__isScriptSetup&&Ms(u,T),Rw={get({_:u},T){const{ctx:W,setupState:d,data:k,props:K,accessCache:S,type:I,appContext:h}=u;let g;if(T[0]!=="$"){const E=S[T];if(E!==void 0)switch(E){case 1:return d[T];case 2:return k[T];case 4:return W[T];case 3:return K[T]}else{if(v1(d,T))return S[T]=1,d[T];if(k!==ho&&Ms(k,T))return S[T]=2,k[T];if((g=u.propsOptions[0])&&Ms(g,T))return S[T]=3,K[T];if(W!==ho&&Ms(W,T))return S[T]=4,W[T];P1&&(S[T]=0)}}const C=Yg[T];let v,y;if(C)return T==="$attrs"&&il(u,"get",T),C(u);if((v=I.__cssModules)&&(v=v[T]))return v;if(W!==ho&&Ms(W,T))return S[T]=4,W[T];if(y=h.config.globalProperties,Ms(y,T))return y[T]},set({_:u},T,W){const{data:d,setupState:k,ctx:K}=u;return v1(k,T)?(k[T]=W,!0):d!==ho&&Ms(d,T)?(d[T]=W,!0):Ms(u.props,T)||T[0]==="$"&&T.slice(1)in u?!1:(K[T]=W,!0)},has({_:{data:u,setupState:T,accessCache:W,ctx:d,appContext:k,propsOptions:K}},S){let I;return!!W[S]||u!==ho&&Ms(u,S)||v1(T,S)||(I=K[0])&&Ms(I,S)||Ms(d,S)||Ms(Yg,S)||Ms(k.config.globalProperties,S)},defineProperty(u,T,W){return W.get!=null?u._.accessCache[T]=0:Ms(W,"value")&&this.set(u,T,W.value,null),Reflect.defineProperty(u,T,W)}};function p2(u){return Nr(u)?u.reduce((T,W)=>(T[W]=null,T),{}):u}let P1=!0;function Bw(u){const T=ly(u),W=u.proxy,d=u.ctx;P1=!1,T.beforeCreate&&m2(T.beforeCreate,u,"bc");const{data:k,computed:K,methods:S,watch:I,provide:h,inject:g,created:C,beforeMount:v,mounted:y,beforeUpdate:E,updated:_,activated:m,deactivated:w,beforeDestroy:b,beforeUnmount:O,destroyed:R,unmounted:L,render:P,renderTracked:Y,renderTriggered:J,errorCaptured:j,serverPrefetch:U,expose:te,inheritAttrs:ue,components:xe,directives:Ee,filters:V}=T;if(g&&Lw(g,d,null),S)for(const F in S){const z=S[F];ss(z)&&(d[F]=z.bind(W))}if(k){const F=k.call(W,W);fo(F)&&(u.data=l0(F))}if(P1=!0,K)for(const F in K){const z=K[F],X=ss(z)?z.bind(W,W):ss(z.get)?z.get.bind(W,W):Rc,fe=!ss(z)&&ss(z.set)?z.set.bind(W):Rc,Ae=$l({get:X,set:fe});Object.defineProperty(d,F,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:Se=>Ae.value=Se})}if(I)for(const F in I)Fx(I[F],d,W,F);if(h){const F=ss(h)?h.call(W):h;Reflect.ownKeys(F).forEach(z=>{PA(z,F[z])})}C&&m2(C,u,"c");function Q(F,z){Nr(z)?z.forEach(X=>F(X.bind(W))):z&&F(z.bind(W))}if(Q(yw,v),Q(xw,y),Q(Ew,E),Q(bw,_),Q(gw,m),Q(Aw,w),Q(Tw,j),Q(Mw,Y),Q(Cw,J),Q(_w,O),Q(Px,L),Q(ww,U),Nr(te))if(te.length){const F=u.exposed||(u.exposed={});te.forEach(z=>{Object.defineProperty(F,z,{get:()=>W[z],set:X=>W[z]=X})})}else u.exposed||(u.exposed={});P&&u.render===Rc&&(u.render=P),ue!=null&&(u.inheritAttrs=ue),xe&&(u.components=xe),Ee&&(u.directives=Ee)}function Lw(u,T,W=Rc){Nr(u)&&(u=O1(u));for(const d in u){const k=u[d];let K;fo(k)?"default"in k?K=uu(k.from||d,k.default,!0):K=uu(k.from||d):K=uu(k),Oo(K)?Object.defineProperty(T,d,{enumerable:!0,configurable:!0,get:()=>K.value,set:S=>K.value=S}):T[d]=K}}function m2(u,T,W){Bc(Nr(u)?u.map(d=>d.bind(T.proxy)):u.bind(T.proxy),T,W)}function Fx(u,T,W,d){const k=d.includes(".")?Rx(W,d):()=>W[d];if(na(u)){const K=T[u];ss(K)&&Xg(k,K)}else if(ss(u))Xg(k,u.bind(W));else if(fo(u))if(Nr(u))u.forEach(K=>Fx(K,T,W,d));else{const K=ss(u.handler)?u.handler.bind(W):T[u.handler];ss(K)&&Xg(k,K,u)}}function ly(u){const T=u.type,{mixins:W,extends:d}=T,{mixins:k,optionsCache:K,config:{optionMergeStrategies:S}}=u.appContext,I=K.get(T);let h;return I?h=I:!k.length&&!W&&!d?h=T:(h={},k.length&&k.forEach(g=>GA(h,g,S,!0)),GA(h,T,S)),fo(T)&&K.set(T,h),h}function GA(u,T,W,d=!1){const{mixins:k,extends:K}=T;K&&GA(u,K,W,!0),k&&k.forEach(S=>GA(u,S,W,!0));for(const S in T)if(!(d&&S==="expose")){const I=Dw[S]||W&&W[S];u[S]=I?I(u[S],T[S]):T[S]}return u}const Dw={data:g2,props:A2,emits:A2,methods:Kg,computed:Kg,beforeCreate:za,created:za,beforeMount:za,mounted:za,beforeUpdate:za,updated:za,beforeDestroy:za,beforeUnmount:za,destroyed:za,unmounted:za,activated:za,deactivated:za,errorCaptured:za,serverPrefetch:za,components:Kg,directives:Kg,watch:Ow,provide:g2,inject:Pw};function g2(u,T){return T?u?function(){return pa(ss(u)?u.call(this,this):u,ss(T)?T.call(this,this):T)}:T:u}function Pw(u,T){return Kg(O1(u),O1(T))}function O1(u){if(Nr(u)){const T={};for(let W=0;W<u.length;W++)T[u[W]]=u[W];return T}return u}function za(u,T){return u?[...new Set([].concat(u,T))]:T}function Kg(u,T){return u?pa(Object.create(null),u,T):T}function A2(u,T){return u?Nr(u)&&Nr(T)?[...new Set([...u,...T])]:pa(Object.create(null),p2(u),p2(T!=null?T:{})):T}function Ow(u,T){if(!u)return T;if(!T)return u;const W=pa(Object.create(null),u);for(const d in T)W[d]=za(u[d],T[d]);return W}function Nx(){return{app:null,config:{isNativeTag:a_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Fw=0;function Nw(u,T){return function(d,k=null){ss(d)||(d=pa({},d)),k!=null&&!fo(k)&&(k=null);const K=Nx(),S=new Set;let I=!1;const h=K.app={_uid:Fw++,_component:d,_props:k,_container:null,_context:K,_instance:null,version:uC,get config(){return K.config},set config(g){},use(g,...C){return S.has(g)||(g&&ss(g.install)?(S.add(g),g.install(h,...C)):ss(g)&&(S.add(g),g(h,...C))),h},mixin(g){return K.mixins.includes(g)||K.mixins.push(g),h},component(g,C){return C?(K.components[g]=C,h):K.components[g]},directive(g,C){return C?(K.directives[g]=C,h):K.directives[g]},mount(g,C,v){if(!I){const y=ys(d,k);return y.appContext=K,C&&T?T(y,g):u(y,g,v),I=!0,h._container=g,g.__vue_app__=h,dy(y.component)||y.component.proxy}},unmount(){I&&(u(null,h._container),delete h._container.__vue_app__)},provide(g,C){return K.provides[g]=C,h},runWithContext(g){r0=h;try{return g()}finally{r0=null}}};return h}}let r0=null;function PA(u,T){if(fa){let W=fa.provides;const d=fa.parent&&fa.parent.provides;d===W&&(W=fa.provides=Object.create(d)),W[u]=T}}function uu(u,T,W=!1){const d=fa||ec;if(d||r0){const k=d?d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides:r0._context.provides;if(k&&u in k)return k[u];if(arguments.length>1)return W&&ss(T)?T.call(d&&d.proxy):T}}function kw(){return!!(fa||ec||r0)}function Uw(u,T,W,d=!1){const k={},K={};FA(K,ZA,1),u.propsDefaults=Object.create(null),kx(u,T,k,K);for(const S in u.propsOptions[0])S in k||(k[S]=void 0);W?u.props=d?k:gx(k):u.type.props?u.props=k:u.props=K,u.attrs=K}function Gw(u,T,W,d){const{props:k,attrs:K,vnode:{patchFlag:S}}=u,I=Ts(k),[h]=u.propsOptions;let g=!1;if((d||S>0)&&!(S&16)){if(S&8){const C=u.vnode.dynamicProps;for(let v=0;v<C.length;v++){let y=C[v];if(YA(u.emitsOptions,y))continue;const E=T[y];if(h)if(Ms(K,y))E!==K[y]&&(K[y]=E,g=!0);else{const _=hu(y);k[_]=F1(h,I,_,E,u,!1)}else E!==K[y]&&(K[y]=E,g=!0)}}}else{kx(u,T,k,K)&&(g=!0);let C;for(const v in I)(!T||!Ms(T,v)&&((C=ym(v))===v||!Ms(T,C)))&&(h?W&&(W[v]!==void 0||W[C]!==void 0)&&(k[v]=F1(h,I,v,void 0,u,!0)):delete k[v]);if(K!==I)for(const v in K)(!T||!Ms(T,v)&&!0)&&(delete K[v],g=!0)}g&&nh(u,"set","$attrs")}function kx(u,T,W,d){const[k,K]=u.propsOptions;let S=!1,I;if(T)for(let h in T){if(LA(h))continue;const g=T[h];let C;k&&Ms(k,C=hu(h))?!K||!K.includes(C)?W[C]=g:(I||(I={}))[C]=g:YA(u.emitsOptions,h)||(!(h in d)||g!==d[h])&&(d[h]=g,S=!0)}if(K){const h=Ts(W),g=I||ho;for(let C=0;C<K.length;C++){const v=K[C];W[v]=F1(k,h,v,g[v],u,!Ms(g,v))}}return S}function F1(u,T,W,d,k,K){const S=u[W];if(S!=null){const I=Ms(S,"default");if(I&&d===void 0){const h=S.default;if(S.type!==Function&&!S.skipFactory&&ss(h)){const{propsDefaults:g}=k;W in g?d=g[W]:(gm(k),d=g[W]=h.call(null,T),Rf())}else d=h}S[0]&&(K&&!I?d=!1:S[1]&&(d===""||d===ym(W))&&(d=!0))}return d}function Ux(u,T,W=!1){const d=T.propsCache,k=d.get(u);if(k)return k;const K=u.props,S={},I=[];let h=!1;if(!ss(u)){const C=v=>{h=!0;const[y,E]=Ux(v,T,!0);pa(S,y),E&&I.push(...E)};!W&&T.mixins.length&&T.mixins.forEach(C),u.extends&&C(u.extends),u.mixins&&u.mixins.forEach(C)}if(!K&&!h)return fo(u)&&d.set(u,um),um;if(Nr(K))for(let C=0;C<K.length;C++){const v=hu(K[C]);v2(v)&&(S[v]=ho)}else if(K)for(const C in K){const v=hu(C);if(v2(v)){const y=K[C],E=S[v]=Nr(y)||ss(y)?{type:y}:pa({},y);if(E){const _=E2(Boolean,E.type),m=E2(String,E.type);E[0]=_>-1,E[1]=m<0||_<m,(_>-1||Ms(E,"default"))&&I.push(v)}}}const g=[S,I];return fo(u)&&d.set(u,g),g}function v2(u){return u[0]!=="$"}function y2(u){const T=u&&u.toString().match(/^\s*(function|class) (\w+)/);return T?T[2]:u===null?"null":""}function x2(u,T){return y2(u)===y2(T)}function E2(u,T){return Nr(T)?T.findIndex(W=>x2(W,u)):ss(T)&&x2(T,u)?0:-1}const Gx=u=>u[0]==="_"||u==="$stable",cy=u=>Nr(u)?u.map(lu):[lu(u)],Hw=(u,T,W)=>{if(T._n)return T;const d=Dl((...k)=>cy(T(...k)),W);return d._c=!1,d},Hx=(u,T,W)=>{const d=u._ctx;for(const k in u){if(Gx(k))continue;const K=u[k];if(ss(K))T[k]=Hw(k,K,d);else if(K!=null){const S=cy(K);T[k]=()=>S}}},zx=(u,T)=>{const W=cy(T);u.slots.default=()=>W},zw=(u,T)=>{if(u.vnode.shapeFlag&32){const W=T._;W?(u.slots=Ts(T),FA(T,"_",W)):Hx(T,u.slots={})}else u.slots={},T&&zx(u,T);FA(u.slots,ZA,1)},Vw=(u,T,W)=>{const{vnode:d,slots:k}=u;let K=!0,S=ho;if(d.shapeFlag&32){const I=T._;I?W&&I===1?K=!1:(pa(k,T),!W&&I===1&&delete k._):(K=!T.$stable,Hx(T,k)),S=T}else T&&(zx(u,T),S={default:1});if(K)for(const I in k)!Gx(I)&&!(I in S)&&delete k[I]};function N1(u,T,W,d,k=!1){if(Nr(u)){u.forEach((y,E)=>N1(y,T&&(Nr(T)?T[E]:T),W,d,k));return}if(DA(d)&&!k)return;const K=d.shapeFlag&4?dy(d.component)||d.component.proxy:d.el,S=k?null:K,{i:I,r:h}=u,g=T&&T.r,C=I.refs===ho?I.refs={}:I.refs,v=I.setupState;if(g!=null&&g!==h&&(na(g)?(C[g]=null,Ms(v,g)&&(v[g]=null)):Oo(g)&&(g.value=null)),ss(h))ed(h,I,12,[S,C]);else{const y=na(h),E=Oo(h);if(y||E){const _=()=>{if(u.f){const m=y?Ms(v,h)?v[h]:C[h]:h.value;k?Nr(m)&&K1(m,K):Nr(m)?m.includes(K)||m.push(K):y?(C[h]=[K],Ms(v,h)&&(v[h]=C[h])):(h.value=[K],u.k&&(C[u.k]=h.value))}else y?(C[h]=S,Ms(v,h)&&(v[h]=S)):E&&(h.value=S,u.k&&(C[u.k]=S))};S?(_.id=-1,tl(_,W)):_()}}}const tl=pw;function Qw(u){return jw(u)}function jw(u,T){const W=M1();W.__VUE__=!0;const{insert:d,remove:k,patchProp:K,createElement:S,createText:I,createComment:h,setText:g,setElementText:C,parentNode:v,nextSibling:y,setScopeId:E=Rc,insertStaticContent:_}=u,m=(je,rt,At,Bt=null,Pt=null,qt=null,un=!1,dn=null,bn=!!rt.dynamicChildren)=>{if(je===rt)return;je&&!Qg(je,rt)&&(Bt=at(je),Se(je,Pt,qt,!0),je=null),rt.patchFlag===-2&&(bn=!1,rt.dynamicChildren=null);const{type:tn,ref:ri,shapeFlag:ni}=rt;switch(tn){case JA:w(je,rt,At,Bt);break;case Bf:b(je,rt,At,Bt);break;case y1:je==null&&O(rt,At,Bt,un);break;case Va:xe(je,rt,At,Bt,Pt,qt,un,dn,bn);break;default:ni&1?P(je,rt,At,Bt,Pt,qt,un,dn,bn):ni&6?Ee(je,rt,At,Bt,Pt,qt,un,dn,bn):(ni&64||ni&128)&&tn.process(je,rt,At,Bt,Pt,qt,un,dn,bn,wt)}ri!=null&&Pt&&N1(ri,je&&je.ref,qt,rt||je,!rt)},w=(je,rt,At,Bt)=>{if(je==null)d(rt.el=I(rt.children),At,Bt);else{const Pt=rt.el=je.el;rt.children!==je.children&&g(Pt,rt.children)}},b=(je,rt,At,Bt)=>{je==null?d(rt.el=h(rt.children||""),At,Bt):rt.el=je.el},O=(je,rt,At,Bt)=>{[je.el,je.anchor]=_(je.children,rt,At,Bt,je.el,je.anchor)},R=({el:je,anchor:rt},At,Bt)=>{let Pt;for(;je&&je!==rt;)Pt=y(je),d(je,At,Bt),je=Pt;d(rt,At,Bt)},L=({el:je,anchor:rt})=>{let At;for(;je&&je!==rt;)At=y(je),k(je),je=At;k(rt)},P=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{un=un||rt.type==="svg",je==null?Y(rt,At,Bt,Pt,qt,un,dn,bn):U(je,rt,Pt,qt,un,dn,bn)},Y=(je,rt,At,Bt,Pt,qt,un,dn)=>{let bn,tn;const{type:ri,props:ni,shapeFlag:zt,transition:Ue,dirs:Pe}=je;if(bn=je.el=S(je.type,qt,ni&&ni.is,ni),zt&8?C(bn,je.children):zt&16&&j(je.children,bn,null,Bt,Pt,qt&&ri!=="foreignObject",un,dn),Pe&&wf(je,null,Bt,"created"),J(bn,je,je.scopeId,un,Bt),ni){for(const ze in ni)ze!=="value"&&!LA(ze)&&K(bn,ze,null,ni[ze],qt,je.children,Bt,Pt,xt);"value"in ni&&K(bn,"value",null,ni.value),(tn=ni.onVnodeBeforeMount)&&au(tn,Bt,je)}Pe&&wf(je,null,Bt,"beforeMount");const Ye=(!Pt||Pt&&!Pt.pendingBranch)&&Ue&&!Ue.persisted;Ye&&Ue.beforeEnter(bn),d(bn,rt,At),((tn=ni&&ni.onVnodeMounted)||Ye||Pe)&&tl(()=>{tn&&au(tn,Bt,je),Ye&&Ue.enter(bn),Pe&&wf(je,null,Bt,"mounted")},Pt)},J=(je,rt,At,Bt,Pt)=>{if(At&&E(je,At),Bt)for(let qt=0;qt<Bt.length;qt++)E(je,Bt[qt]);if(Pt){let qt=Pt.subTree;if(rt===qt){const un=Pt.vnode;J(je,un,un.scopeId,un.slotScopeIds,Pt.parent)}}},j=(je,rt,At,Bt,Pt,qt,un,dn,bn=0)=>{for(let tn=bn;tn<je.length;tn++){const ri=je[tn]=dn?qh(je[tn]):lu(je[tn]);m(null,ri,rt,At,Bt,Pt,qt,un,dn)}},U=(je,rt,At,Bt,Pt,qt,un)=>{const dn=rt.el=je.el;let{patchFlag:bn,dynamicChildren:tn,dirs:ri}=rt;bn|=je.patchFlag&16;const ni=je.props||ho,zt=rt.props||ho;let Ue;At&&Cf(At,!1),(Ue=zt.onVnodeBeforeUpdate)&&au(Ue,At,rt,je),ri&&wf(rt,je,At,"beforeUpdate"),At&&Cf(At,!0);const Pe=Pt&&rt.type!=="foreignObject";if(tn?te(je.dynamicChildren,tn,dn,At,Bt,Pe,qt):un||z(je,rt,dn,null,At,Bt,Pe,qt,!1),bn>0){if(bn&16)ue(dn,rt,ni,zt,At,Bt,Pt);else if(bn&2&&ni.class!==zt.class&&K(dn,"class",null,zt.class,Pt),bn&4&&K(dn,"style",ni.style,zt.style,Pt),bn&8){const Ye=rt.dynamicProps;for(let ze=0;ze<Ye.length;ze++){const He=Ye[ze],et=ni[He],Me=zt[He];(Me!==et||He==="value")&&K(dn,He,et,Me,Pt,je.children,At,Bt,xt)}}bn&1&&je.children!==rt.children&&C(dn,rt.children)}else!un&&tn==null&&ue(dn,rt,ni,zt,At,Bt,Pt);((Ue=zt.onVnodeUpdated)||ri)&&tl(()=>{Ue&&au(Ue,At,rt,je),ri&&wf(rt,je,At,"updated")},Bt)},te=(je,rt,At,Bt,Pt,qt,un)=>{for(let dn=0;dn<rt.length;dn++){const bn=je[dn],tn=rt[dn],ri=bn.el&&(bn.type===Va||!Qg(bn,tn)||bn.shapeFlag&70)?v(bn.el):At;m(bn,tn,ri,null,Bt,Pt,qt,un,!0)}},ue=(je,rt,At,Bt,Pt,qt,un)=>{if(At!==Bt){if(At!==ho)for(const dn in At)!LA(dn)&&!(dn in Bt)&&K(je,dn,At[dn],null,un,rt.children,Pt,qt,xt);for(const dn in Bt){if(LA(dn))continue;const bn=Bt[dn],tn=At[dn];bn!==tn&&dn!=="value"&&K(je,dn,tn,bn,un,rt.children,Pt,qt,xt)}"value"in Bt&&K(je,"value",At.value,Bt.value)}},xe=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{const tn=rt.el=je?je.el:I(""),ri=rt.anchor=je?je.anchor:I("");let{patchFlag:ni,dynamicChildren:zt,slotScopeIds:Ue}=rt;Ue&&(dn=dn?dn.concat(Ue):Ue),je==null?(d(tn,At,Bt),d(ri,At,Bt),j(rt.children,At,ri,Pt,qt,un,dn,bn)):ni>0&&ni&64&&zt&&je.dynamicChildren?(te(je.dynamicChildren,zt,At,Pt,qt,un,dn),(rt.key!=null||Pt&&rt===Pt.subTree)&&Vx(je,rt,!0)):z(je,rt,At,ri,Pt,qt,un,dn,bn)},Ee=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{rt.slotScopeIds=dn,je==null?rt.shapeFlag&512?Pt.ctx.activate(rt,At,Bt,un,bn):V(rt,At,Bt,Pt,qt,un,bn):q(je,rt,bn)},V=(je,rt,At,Bt,Pt,qt,un)=>{const dn=je.component=tC(je,Bt,Pt);if(Lx(je)&&(dn.ctx.renderer=wt),nC(dn),dn.asyncDep){if(Pt&&Pt.registerDep(dn,Q),!je.el){const bn=dn.subTree=ys(Bf);b(null,bn,rt,At)}return}Q(dn,je,rt,At,Pt,qt,un)},q=(je,rt,At)=>{const Bt=rt.component=je.component;if(hw(je,rt,At))if(Bt.asyncDep&&!Bt.asyncResolved){F(Bt,rt,At);return}else Bt.next=rt,sw(Bt.update),Bt.update();else rt.el=je.el,Bt.vnode=rt},Q=(je,rt,At,Bt,Pt,qt,un)=>{const dn=()=>{if(je.isMounted){let{next:ri,bu:ni,u:zt,parent:Ue,vnode:Pe}=je,Ye=ri,ze;Cf(je,!1),ri?(ri.el=Pe.el,F(je,ri,un)):ri=Pe,ni&&g1(ni),(ze=ri.props&&ri.props.onVnodeBeforeUpdate)&&au(ze,Ue,ri,Pe),Cf(je,!0);const He=A1(je),et=je.subTree;je.subTree=He,m(et,He,v(et.el),at(et),je,Pt,qt),ri.el=He.el,Ye===null&&dw(je,He.el),zt&&tl(zt,Pt),(ze=ri.props&&ri.props.onVnodeUpdated)&&tl(()=>au(ze,Ue,ri,Pe),Pt)}else{let ri;const{el:ni,props:zt}=rt,{bm:Ue,m:Pe,parent:Ye}=je,ze=DA(rt);if(Cf(je,!1),Ue&&g1(Ue),!ze&&(ri=zt&&zt.onVnodeBeforeMount)&&au(ri,Ye,rt),Cf(je,!0),ni&&Mn){const He=()=>{je.subTree=A1(je),Mn(ni,je.subTree,je,Pt,null)};ze?rt.type.__asyncLoader().then(()=>!je.isUnmounted&&He()):He()}else{const He=je.subTree=A1(je);m(null,He,At,Bt,je,Pt,qt),rt.el=He.el}if(Pe&&tl(Pe,Pt),!ze&&(ri=zt&&zt.onVnodeMounted)){const He=rt;tl(()=>au(ri,Ye,He),Pt)}(rt.shapeFlag&256||Ye&&DA(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&je.a&&tl(je.a,Pt),je.isMounted=!0,rt=At=Bt=null}},bn=je.effect=new Z1(dn,()=>ay(tn),je.scope),tn=je.update=()=>bn.run();tn.id=je.uid,Cf(je,!0),tn()},F=(je,rt,At)=>{rt.component=je;const Bt=je.vnode.props;je.vnode=rt,je.next=null,Gw(je,rt.props,Bt,At),Vw(je,rt.children,At),xm(),h2(),Em()},z=(je,rt,At,Bt,Pt,qt,un,dn,bn=!1)=>{const tn=je&&je.children,ri=je?je.shapeFlag:0,ni=rt.children,{patchFlag:zt,shapeFlag:Ue}=rt;if(zt>0){if(zt&128){fe(tn,ni,At,Bt,Pt,qt,un,dn,bn);return}else if(zt&256){X(tn,ni,At,Bt,Pt,qt,un,dn,bn);return}}Ue&8?(ri&16&&xt(tn,Pt,qt),ni!==tn&&C(At,ni)):ri&16?Ue&16?fe(tn,ni,At,Bt,Pt,qt,un,dn,bn):xt(tn,Pt,qt,!0):(ri&8&&C(At,""),Ue&16&&j(ni,At,Bt,Pt,qt,un,dn,bn))},X=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{je=je||um,rt=rt||um;const tn=je.length,ri=rt.length,ni=Math.min(tn,ri);let zt;for(zt=0;zt<ni;zt++){const Ue=rt[zt]=bn?qh(rt[zt]):lu(rt[zt]);m(je[zt],Ue,At,null,Pt,qt,un,dn,bn)}tn>ri?xt(je,Pt,qt,!0,!1,ni):j(rt,At,Bt,Pt,qt,un,dn,bn,ni)},fe=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{let tn=0;const ri=rt.length;let ni=je.length-1,zt=ri-1;for(;tn<=ni&&tn<=zt;){const Ue=je[tn],Pe=rt[tn]=bn?qh(rt[tn]):lu(rt[tn]);if(Qg(Ue,Pe))m(Ue,Pe,At,null,Pt,qt,un,dn,bn);else break;tn++}for(;tn<=ni&&tn<=zt;){const Ue=je[ni],Pe=rt[zt]=bn?qh(rt[zt]):lu(rt[zt]);if(Qg(Ue,Pe))m(Ue,Pe,At,null,Pt,qt,un,dn,bn);else break;ni--,zt--}if(tn>ni){if(tn<=zt){const Ue=zt+1,Pe=Ue<ri?rt[Ue].el:Bt;for(;tn<=zt;)m(null,rt[tn]=bn?qh(rt[tn]):lu(rt[tn]),At,Pe,Pt,qt,un,dn,bn),tn++}}else if(tn>zt)for(;tn<=ni;)Se(je[tn],Pt,qt,!0),tn++;else{const Ue=tn,Pe=tn,Ye=new Map;for(tn=Pe;tn<=zt;tn++){const ae=rt[tn]=bn?qh(rt[tn]):lu(rt[tn]);ae.key!=null&&Ye.set(ae.key,tn)}let ze,He=0;const et=zt-Pe+1;let Me=!1,Te=0;const Oe=new Array(et);for(tn=0;tn<et;tn++)Oe[tn]=0;for(tn=Ue;tn<=ni;tn++){const ae=je[tn];if(He>=et){Se(ae,Pt,qt,!0);continue}let ee;if(ae.key!=null)ee=Ye.get(ae.key);else for(ze=Pe;ze<=zt;ze++)if(Oe[ze-Pe]===0&&Qg(ae,rt[ze])){ee=ze;break}ee===void 0?Se(ae,Pt,qt,!0):(Oe[ee-Pe]=tn+1,ee>=Te?Te=ee:Me=!0,m(ae,rt[ee],At,null,Pt,qt,un,dn,bn),He++)}const Ze=Me?Ww(Oe):um;for(ze=Ze.length-1,tn=et-1;tn>=0;tn--){const ae=Pe+tn,ee=rt[ae],se=ae+1<ri?rt[ae+1].el:Bt;Oe[tn]===0?m(null,ee,At,se,Pt,qt,un,dn,bn):Me&&(ze<0||tn!==Ze[ze]?Ae(ee,At,se,2):ze--)}}},Ae=(je,rt,At,Bt,Pt=null)=>{const{el:qt,type:un,transition:dn,children:bn,shapeFlag:tn}=je;if(tn&6){Ae(je.component.subTree,rt,At,Bt);return}if(tn&128){je.suspense.move(rt,At,Bt);return}if(tn&64){un.move(je,rt,At,wt);return}if(un===Va){d(qt,rt,At);for(let ni=0;ni<bn.length;ni++)Ae(bn[ni],rt,At,Bt);d(je.anchor,rt,At);return}if(un===y1){R(je,rt,At);return}if(Bt!==2&&tn&1&&dn)if(Bt===0)dn.beforeEnter(qt),d(qt,rt,At),tl(()=>dn.enter(qt),Pt);else{const{leave:ni,delayLeave:zt,afterLeave:Ue}=dn,Pe=()=>d(qt,rt,At),Ye=()=>{ni(qt,()=>{Pe(),Ue&&Ue()})};zt?zt(qt,Pe,Ye):Ye()}else d(qt,rt,At)},Se=(je,rt,At,Bt=!1,Pt=!1)=>{const{type:qt,props:un,ref:dn,children:bn,dynamicChildren:tn,shapeFlag:ri,patchFlag:ni,dirs:zt}=je;if(dn!=null&&N1(dn,null,At,je,!0),ri&256){rt.ctx.deactivate(je);return}const Ue=ri&1&&zt,Pe=!DA(je);let Ye;if(Pe&&(Ye=un&&un.onVnodeBeforeUnmount)&&au(Ye,rt,je),ri&6)ht(je.component,At,Bt);else{if(ri&128){je.suspense.unmount(At,Bt);return}Ue&&wf(je,null,rt,"beforeUnmount"),ri&64?je.type.remove(je,rt,At,Pt,wt,Bt):tn&&(qt!==Va||ni>0&&ni&64)?xt(tn,rt,At,!1,!0):(qt===Va&&ni&384||!Pt&&ri&16)&&xt(bn,rt,At),Bt&&Be(je)}(Pe&&(Ye=un&&un.onVnodeUnmounted)||Ue)&&tl(()=>{Ye&&au(Ye,rt,je),Ue&&wf(je,null,rt,"unmounted")},At)},Be=je=>{const{type:rt,el:At,anchor:Bt,transition:Pt}=je;if(rt===Va){Ge(At,Bt);return}if(rt===y1){L(je);return}const qt=()=>{k(At),Pt&&!Pt.persisted&&Pt.afterLeave&&Pt.afterLeave()};if(je.shapeFlag&1&&Pt&&!Pt.persisted){const{leave:un,delayLeave:dn}=Pt,bn=()=>un(At,qt);dn?dn(je.el,qt,bn):bn()}else qt()},Ge=(je,rt)=>{let At;for(;je!==rt;)At=y(je),k(je),je=At;k(rt)},ht=(je,rt,At)=>{const{bum:Bt,scope:Pt,update:qt,subTree:un,um:dn}=je;Bt&&g1(Bt),Pt.stop(),qt&&(qt.active=!1,Se(un,je,rt,At)),dn&&tl(dn,rt),tl(()=>{je.isUnmounted=!0},rt),rt&&rt.pendingBranch&&!rt.isUnmounted&&je.asyncDep&&!je.asyncResolved&&je.suspenseId===rt.pendingId&&(rt.deps--,rt.deps===0&&rt.resolve())},xt=(je,rt,At,Bt=!1,Pt=!1,qt=0)=>{for(let un=qt;un<je.length;un++)Se(je[un],rt,At,Bt,Pt)},at=je=>je.shapeFlag&6?at(je.component.subTree):je.shapeFlag&128?je.suspense.next():y(je.anchor||je.el),Gt=(je,rt,At)=>{je==null?rt._vnode&&Se(rt._vnode,null,null,!0):m(rt._vnode||null,je,rt,null,null,null,At),h2(),Cx(),rt._vnode=je},wt={p:m,um:Se,m:Ae,r:Be,mt:V,mc:j,pc:z,pbc:te,n:at,o:u};let Yt,Mn;return T&&([Yt,Mn]=T(wt)),{render:Gt,hydrate:Yt,createApp:Nw(Gt,Yt)}}function Cf({effect:u,update:T},W){u.allowRecurse=T.allowRecurse=W}function Vx(u,T,W=!1){const d=u.children,k=T.children;if(Nr(d)&&Nr(k))for(let K=0;K<d.length;K++){const S=d[K];let I=k[K];I.shapeFlag&1&&!I.dynamicChildren&&((I.patchFlag<=0||I.patchFlag===32)&&(I=k[K]=qh(k[K]),I.el=S.el),W||Vx(S,I)),I.type===JA&&(I.el=S.el)}}function Ww(u){const T=u.slice(),W=[0];let d,k,K,S,I;const h=u.length;for(d=0;d<h;d++){const g=u[d];if(g!==0){if(k=W[W.length-1],u[k]<g){T[d]=k,W.push(d);continue}for(K=0,S=W.length-1;K<S;)I=K+S>>1,u[W[I]]<g?K=I+1:S=I;g<u[W[K]]&&(K>0&&(T[d]=W[K-1]),W[K]=d)}}for(K=W.length,S=W[K-1];K-- >0;)W[K]=S,S=T[S];return W}const Kw=u=>u.__isTeleport,Va=Symbol.for("v-fgt"),JA=Symbol.for("v-txt"),Bf=Symbol.for("v-cmt"),y1=Symbol.for("v-stc"),qg=[];let Ic=null;function Hr(u=!1){qg.push(Ic=u?null:[])}function Xw(){qg.pop(),Ic=qg[qg.length-1]||null}let s0=1;function b2(u){s0+=u}function Qx(u){return u.dynamicChildren=s0>0?Ic||um:null,Xw(),s0>0&&Ic&&Ic.push(u),u}function Ps(u,T,W,d,k,K){return Qx(mr(u,T,W,d,k,K,!0))}function nl(u,T,W,d,k){return Qx(ys(u,T,W,d,k,!0))}function k1(u){return u?u.__v_isVNode===!0:!1}function Qg(u,T){return u.type===T.type&&u.key===T.key}const ZA="__vInternal",jx=({key:u})=>u!=null?u:null,OA=({ref:u,ref_key:T,ref_for:W})=>(typeof u=="number"&&(u=""+u),u!=null?na(u)||Oo(u)||ss(u)?{i:ec,r:u,k:T,f:!!W}:u:null);function mr(u,T=null,W=null,d=0,k=null,K=u===Va?0:1,S=!1,I=!1){const h={__v_isVNode:!0,__v_skip:!0,type:u,props:T,key:T&&jx(T),ref:T&&OA(T),scopeId:Sx,slotScopeIds:null,children:W,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:K,patchFlag:d,dynamicProps:k,dynamicChildren:null,appContext:null,ctx:ec};return I?(uy(h,W),K&128&&u.normalize(h)):W&&(h.shapeFlag|=na(W)?8:16),s0>0&&!S&&Ic&&(h.patchFlag>0||K&6)&&h.patchFlag!==32&&Ic.push(h),h}const ys=Yw;function Yw(u,T=null,W=null,d=0,k=null,K=!1){if((!u||u===Sw)&&(u=Bf),k1(u)){const I=mm(u,T,!0);return W&&uy(I,W),s0>0&&!K&&Ic&&(I.shapeFlag&6?Ic[Ic.indexOf(u)]=I:Ic.push(I)),I.patchFlag|=-2,I}if(aC(u)&&(u=u.__vccOpts),T){T=qw(T);let{class:I,style:h}=T;I&&!na(I)&&(T.class=nd(I)),fo(h)&&(vx(h)&&!Nr(h)&&(h=pa({},h)),T.style=q1(h))}const S=na(u)?1:fw(u)?128:Kw(u)?64:fo(u)?4:ss(u)?2:0;return mr(u,T,W,d,k,S,K,!0)}function qw(u){return u?vx(u)||ZA in u?pa({},u):u:null}function mm(u,T,W=!1){const{props:d,ref:k,patchFlag:K,children:S}=u,I=T?Zw(d||{},T):d;return{__v_isVNode:!0,__v_skip:!0,type:u.type,props:I,key:I&&jx(I),ref:T&&T.ref?W&&k?Nr(k)?k.concat(OA(T)):[k,OA(T)]:OA(T):k,scopeId:u.scopeId,slotScopeIds:u.slotScopeIds,children:S,target:u.target,targetAnchor:u.targetAnchor,staticCount:u.staticCount,shapeFlag:u.shapeFlag,patchFlag:T&&u.type!==Va?K===-1?16:K|16:K,dynamicProps:u.dynamicProps,dynamicChildren:u.dynamicChildren,appContext:u.appContext,dirs:u.dirs,transition:u.transition,component:u.component,suspense:u.suspense,ssContent:u.ssContent&&mm(u.ssContent),ssFallback:u.ssFallback&&mm(u.ssFallback),el:u.el,anchor:u.anchor,ctx:u.ctx,ce:u.ce}}function Jw(u=" ",T=0){return ys(JA,null,u,T)}function If(u="",T=!1){return T?(Hr(),nl(Bf,null,u)):ys(Bf,null,u)}function lu(u){return u==null||typeof u=="boolean"?ys(Bf):Nr(u)?ys(Va,null,u.slice()):typeof u=="object"?qh(u):ys(JA,null,String(u))}function qh(u){return u.el===null&&u.patchFlag!==-1||u.memo?u:mm(u)}function uy(u,T){let W=0;const{shapeFlag:d}=u;if(T==null)T=null;else if(Nr(T))W=16;else if(typeof T=="object")if(d&65){const k=T.default;k&&(k._c&&(k._d=!1),uy(u,k()),k._c&&(k._d=!0));return}else{W=32;const k=T._;!k&&!(ZA in T)?T._ctx=ec:k===3&&ec&&(ec.slots._===1?T._=1:(T._=2,u.patchFlag|=1024))}else ss(T)?(T={default:T,_ctx:ec},W=32):(T=String(T),d&64?(W=16,T=[Jw(T)]):W=8);u.children=T,u.shapeFlag|=W}function Zw(...u){const T={};for(let W=0;W<u.length;W++){const d=u[W];for(const k in d)if(k==="class")T.class!==d.class&&(T.class=nd([T.class,d.class]));else if(k==="style")T.style=q1([T.style,d.style]);else if(zA(k)){const K=T[k],S=d[k];S&&K!==S&&!(Nr(K)&&K.includes(S))&&(T[k]=K?[].concat(K,S):S)}else k!==""&&(T[k]=d[k])}return T}function au(u,T,W,d=null){Bc(u,T,7,[W,d])}const $w=Nx();let eC=0;function tC(u,T,W){const d=u.type,k=(T?T.appContext:u.appContext)||$w,K={uid:eC++,vnode:u,type:d,parent:T,appContext:k,root:null,next:null,subTree:null,effect:null,update:null,scope:new ix(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:T?T.provides:Object.create(k.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ux(d,k),emitsOptions:Tx(d,k),emit:null,emitted:null,propsDefaults:ho,inheritAttrs:d.inheritAttrs,ctx:ho,data:ho,props:ho,attrs:ho,slots:ho,refs:ho,setupState:ho,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:W,suspenseId:W?W.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return K.ctx={_:K},K.root=T?T.root:K,K.emit=lw.bind(null,K),u.ce&&u.ce(K),K}let fa=null,hy,om,_2="__VUE_INSTANCE_SETTERS__";(om=M1()[_2])||(om=M1()[_2]=[]),om.push(u=>fa=u),hy=u=>{om.length>1?om.forEach(T=>T(u)):om[0](u)};const gm=u=>{hy(u),u.scope.on()},Rf=()=>{fa&&fa.scope.off(),hy(null)};function Wx(u){return u.vnode.shapeFlag&4}let o0=!1;function nC(u,T=!1){o0=T;const{props:W,children:d}=u.vnode,k=Wx(u);Uw(u,W,k,T),zw(u,d);const K=k?iC(u,T):void 0;return o0=!1,K}function iC(u,T){const W=u.type;u.accessCache=Object.create(null),u.proxy=KA(new Proxy(u.ctx,Rw));const{setup:d}=W;if(d){const k=u.setupContext=d.length>1?sC(u):null;gm(u),xm();const K=ed(d,u,0,[u.props,k]);if(Em(),Rf(),Z2(K)){if(K.then(Rf,Rf),T)return K.then(S=>{w2(u,S,T)}).catch(S=>{XA(S,u,0)});u.asyncDep=K}else w2(u,K,T)}else Kx(u,T)}function w2(u,T,W){ss(T)?u.type.__ssrInlineRender?u.ssrRender=T:u.render=T:fo(T)&&(u.setupState=bx(T)),Kx(u,W)}let C2;function Kx(u,T,W){const d=u.type;if(!u.render){if(!T&&C2&&!d.render){const k=d.template||ly(u).template;if(k){const{isCustomElement:K,compilerOptions:S}=u.appContext.config,{delimiters:I,compilerOptions:h}=d,g=pa(pa({isCustomElement:K,delimiters:I},S),h);d.render=C2(k,g)}}u.render=d.render||Rc}gm(u),xm(),Bw(u),Em(),Rf()}function rC(u){return u.attrsProxy||(u.attrsProxy=new Proxy(u.attrs,{get(T,W){return il(u,"get","$attrs"),T[W]}}))}function sC(u){const T=W=>{u.exposed=W||{}};return{get attrs(){return rC(u)},slots:u.slots,emit:u.emit,expose:T}}function dy(u){if(u.exposed)return u.exposeProxy||(u.exposeProxy=new Proxy(bx(KA(u.exposed)),{get(T,W){if(W in T)return T[W];if(W in Yg)return Yg[W](u)},has(T,W){return W in T||W in Yg}}))}function oC(u,T=!0){return ss(u)?u.displayName||u.name:u.name||T&&u.__name}function aC(u){return ss(u)&&"__vccOpts"in u}const $l=(u,T)=>nw(u,T,o0);function Xx(u,T,W){const d=arguments.length;return d===2?fo(T)&&!Nr(T)?k1(T)?ys(u,null,[T]):ys(u,T):ys(u,null,T):(d>3?W=Array.prototype.slice.call(arguments,2):d===3&&k1(W)&&(W=[W]),ys(u,T,W))}const lC=Symbol.for("v-scx"),cC=()=>uu(lC),uC="3.3.4",hC="http://www.w3.org/2000/svg",Tf=typeof document<"u"?document:null,M2=Tf&&Tf.createElement("template"),dC={insert:(u,T,W)=>{T.insertBefore(u,W||null)},remove:u=>{const T=u.parentNode;T&&T.removeChild(u)},createElement:(u,T,W,d)=>{const k=T?Tf.createElementNS(hC,u):Tf.createElement(u,W?{is:W}:void 0);return u==="select"&&d&&d.multiple!=null&&k.setAttribute("multiple",d.multiple),k},createText:u=>Tf.createTextNode(u),createComment:u=>Tf.createComment(u),setText:(u,T)=>{u.nodeValue=T},setElementText:(u,T)=>{u.textContent=T},parentNode:u=>u.parentNode,nextSibling:u=>u.nextSibling,querySelector:u=>Tf.querySelector(u),setScopeId(u,T){u.setAttribute(T,"")},insertStaticContent(u,T,W,d,k,K){const S=W?W.previousSibling:T.lastChild;if(k&&(k===K||k.nextSibling))for(;T.insertBefore(k.cloneNode(!0),W),!(k===K||!(k=k.nextSibling)););else{M2.innerHTML=d?`<svg>${u}</svg>`:u;const I=M2.content;if(d){const h=I.firstChild;for(;h.firstChild;)I.appendChild(h.firstChild);I.removeChild(h)}T.insertBefore(I,W)}return[S?S.nextSibling:T.firstChild,W?W.previousSibling:T.lastChild]}};function fC(u,T,W){const d=u._vtc;d&&(T=(T?[T,...d]:[...d]).join(" ")),T==null?u.removeAttribute("class"):W?u.setAttribute("class",T):u.className=T}function pC(u,T,W){const d=u.style,k=na(W);if(W&&!k){if(T&&!na(T))for(const K in T)W[K]==null&&U1(d,K,"");for(const K in W)U1(d,K,W[K])}else{const K=d.display;k?T!==W&&(d.cssText=W):T&&u.removeAttribute("style"),"_vod"in u&&(d.display=K)}}const T2=/\s*!important$/;function U1(u,T,W){if(Nr(W))W.forEach(d=>U1(u,T,d));else if(W==null&&(W=""),T.startsWith("--"))u.setProperty(T,W);else{const d=mC(u,T);T2.test(W)?u.setProperty(ym(d),W.replace(T2,""),"important"):u[d]=W}}const S2=["Webkit","Moz","ms"],x1={};function mC(u,T){const W=x1[T];if(W)return W;let d=hu(T);if(d!=="filter"&&d in u)return x1[T]=d;d=jA(d);for(let k=0;k<S2.length;k++){const K=S2[k]+d;if(K in u)return x1[T]=K}return T}const I2="http://www.w3.org/1999/xlink";function gC(u,T,W,d,k){if(d&&T.startsWith("xlink:"))W==null?u.removeAttributeNS(I2,T.slice(6,T.length)):u.setAttributeNS(I2,T,W);else{const K=y_(T);W==null||K&&!tx(W)?u.removeAttribute(T):u.setAttribute(T,K?"":W)}}function AC(u,T,W,d,k,K,S){if(T==="innerHTML"||T==="textContent"){d&&S(d,k,K),u[T]=W==null?"":W;return}const I=u.tagName;if(T==="value"&&I!=="PROGRESS"&&!I.includes("-")){u._value=W;const g=I==="OPTION"?u.getAttribute("value"):u.value,C=W==null?"":W;g!==C&&(u.value=C),W==null&&u.removeAttribute(T);return}let h=!1;if(W===""||W==null){const g=typeof u[T];g==="boolean"?W=tx(W):W==null&&g==="string"?(W="",h=!0):g==="number"&&(W=0,h=!0)}try{u[T]=W}catch{}h&&u.removeAttribute(T)}function vC(u,T,W,d){u.addEventListener(T,W,d)}function yC(u,T,W,d){u.removeEventListener(T,W,d)}function xC(u,T,W,d,k=null){const K=u._vei||(u._vei={}),S=K[T];if(d&&S)S.value=d;else{const[I,h]=EC(T);if(d){const g=K[T]=wC(d,k);vC(u,I,g,h)}else S&&(yC(u,I,S,h),K[T]=void 0)}}const R2=/(?:Once|Passive|Capture)$/;function EC(u){let T;if(R2.test(u)){T={};let d;for(;d=u.match(R2);)u=u.slice(0,u.length-d[0].length),T[d[0].toLowerCase()]=!0}return[u[2]===":"?u.slice(3):ym(u.slice(2)),T]}let E1=0;const bC=Promise.resolve(),_C=()=>E1||(bC.then(()=>E1=0),E1=Date.now());function wC(u,T){const W=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=W.attached)return;Bc(CC(d,W.value),T,5,[d])};return W.value=u,W.attached=_C(),W}function CC(u,T){if(Nr(T)){const W=u.stopImmediatePropagation;return u.stopImmediatePropagation=()=>{W.call(u),u._stopped=!0},T.map(d=>k=>!k._stopped&&d&&d(k))}else return T}const B2=/^on[a-z]/,MC=(u,T,W,d,k=!1,K,S,I,h)=>{T==="class"?fC(u,d,k):T==="style"?pC(u,W,d):zA(T)?W1(T)||xC(u,T,W,d,S):(T[0]==="."?(T=T.slice(1),!0):T[0]==="^"?(T=T.slice(1),!1):TC(u,T,d,k))?AC(u,T,d,K,S,I,h):(T==="true-value"?u._trueValue=d:T==="false-value"&&(u._falseValue=d),gC(u,T,d,k))};function TC(u,T,W,d){return d?!!(T==="innerHTML"||T==="textContent"||T in u&&B2.test(T)&&ss(W)):T==="spellcheck"||T==="draggable"||T==="translate"||T==="form"||T==="list"&&u.tagName==="INPUT"||T==="type"&&u.tagName==="TEXTAREA"||B2.test(T)&&na(W)?!1:T in u}const SC=pa({patchProp:MC},dC);let L2;function IC(){return L2||(L2=Qw(SC))}const RC=(...u)=>{const T=IC().createApp(...u),{mount:W}=T;return T.mount=d=>{const k=BC(d);if(!k)return;const K=T._component;!ss(K)&&!K.render&&!K.template&&(K.template=k.innerHTML),k.innerHTML="";const S=W(k,!1,k instanceof SVGElement);return k instanceof Element&&(k.removeAttribute("v-cloak"),k.setAttribute("data-v-app","")),S},T};function BC(u){return na(u)?document.querySelector(u):u}var LC=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Yx;const $A=u=>Yx=u,qx=Symbol();function G1(u){return u&&typeof u=="object"&&Object.prototype.toString.call(u)==="[object Object]"&&typeof u.toJSON!="function"}var Jg;(function(u){u.direct="direct",u.patchObject="patch object",u.patchFunction="patch function"})(Jg||(Jg={}));function DC(){const u=rx(!0),T=u.run(()=>ry({}));let W=[],d=[];const k=KA({install(K){$A(k),k._a=K,K.provide(qx,k),K.config.globalProperties.$pinia=k,d.forEach(S=>W.push(S)),d=[]},use(K){return!this._a&&!LC?d.push(K):W.push(K),this},_p:W,_a:null,_e:u,_s:new Map,state:T});return k}const Jx=()=>{};function D2(u,T,W,d=Jx){u.push(T);const k=()=>{const K=u.indexOf(T);K>-1&&(u.splice(K,1),d())};return!W&&sx()&&E_(k),k}function am(u,...T){u.slice().forEach(W=>{W(...T)})}const PC=u=>u();function H1(u,T){u instanceof Map&&T instanceof Map&&T.forEach((W,d)=>u.set(d,W)),u instanceof Set&&T instanceof Set&&T.forEach(u.add,u);for(const W in T){if(!T.hasOwnProperty(W))continue;const d=T[W],k=u[W];G1(k)&&G1(d)&&u.hasOwnProperty(W)&&!Oo(d)&&!$h(d)?u[W]=H1(k,d):u[W]=d}return u}const OC=Symbol();function FC(u){return!G1(u)||!u.hasOwnProperty(OC)}const{assign:Yh}=Object;function NC(u){return!!(Oo(u)&&u.effect)}function kC(u,T,W,d){const{state:k,actions:K,getters:S}=T,I=W.state.value[u];let h;function g(){I||(W.state.value[u]=k?k():{});const C=Z_(W.state.value[u]);return Yh(C,K,Object.keys(S||{}).reduce((v,y)=>(v[y]=KA($l(()=>{$A(W);const E=W._s.get(u);return S[y].call(E,E)})),v),{}))}return h=Zx(u,g,T,W,d,!0),h}function Zx(u,T,W={},d,k,K){let S;const I=Yh({actions:{}},W),h={deep:!0};let g,C,v=[],y=[],E;const _=d.state.value[u];!K&&!_&&(d.state.value[u]={}),ry({});let m;function w(j){let U;g=C=!1,typeof j=="function"?(j(d.state.value[u]),U={type:Jg.patchFunction,storeId:u,events:E}):(H1(d.state.value[u],j),U={type:Jg.patchObject,payload:j,storeId:u,events:E});const te=m=Symbol();oy().then(()=>{m===te&&(g=!0)}),C=!0,am(v,U,d.state.value[u])}const b=K?function(){const{state:U}=W,te=U?U():{};this.$patch(ue=>{Yh(ue,te)})}:Jx;function O(){S.stop(),v=[],y=[],d._s.delete(u)}function R(j,U){return function(){$A(d);const te=Array.from(arguments),ue=[],xe=[];function Ee(Q){ue.push(Q)}function V(Q){xe.push(Q)}am(y,{args:te,name:j,store:P,after:Ee,onError:V});let q;try{q=U.apply(this&&this.$id===u?this:P,te)}catch(Q){throw am(xe,Q),Q}return q instanceof Promise?q.then(Q=>(am(ue,Q),Q)).catch(Q=>(am(xe,Q),Promise.reject(Q))):(am(ue,q),q)}}const L={_p:d,$id:u,$onAction:D2.bind(null,y),$patch:w,$reset:b,$subscribe(j,U={}){const te=D2(v,j,U.detached,()=>ue()),ue=S.run(()=>Xg(()=>d.state.value[u],xe=>{(U.flush==="sync"?C:g)&&j({storeId:u,type:Jg.direct,events:E},xe)},Yh({},h,U)));return te},$dispose:O},P=l0(L);d._s.set(u,P);const Y=d._a&&d._a.runWithContext||PC,J=d._e.run(()=>(S=rx(),Y(()=>S.run(T))));for(const j in J){const U=J[j];if(Oo(U)&&!NC(U)||$h(U))K||(_&&FC(U)&&(Oo(U)?U.value=_[j]:H1(U,_[j])),d.state.value[u][j]=U);else if(typeof U=="function"){const te=R(j,U);J[j]=te,I.actions[j]=U}}return Yh(P,J),Yh(Ts(P),J),Object.defineProperty(P,"$state",{get:()=>d.state.value[u],set:j=>{w(U=>{Yh(U,j)})}}),d._p.forEach(j=>{Yh(P,S.run(()=>j({store:P,app:d._a,pinia:d,options:I})))}),_&&K&&W.hydrate&&W.hydrate(P.$state,_),g=!0,C=!0,P}function UC(u,T,W){let d,k;const K=typeof T=="function";typeof u=="string"?(d=u,k=K?W:T):(k=u,d=u.id);function S(I,h){const g=kw();return I=I||(g?uu(qx,null):null),I&&$A(I),I=Yx,I._s.has(d)||(K?Zx(d,T,k,I):kC(d,k,I)),I._s.get(d)}return S.$id=d,S}const rl=(u,T)=>{const W=u.__vccOpts||u;for(const[d,k]of T)W[d]=k;return W},GC={name:"Loader"},HC={class:"lds-spinner"},zC=mr("div",null,null,-1),VC=mr("div",null,null,-1),QC=mr("div",null,null,-1),jC=mr("div",null,[mr("span",{class:"a11y-hidden"},"Loading")],-1),WC=mr("div",null,null,-1),KC=mr("div",null,null,-1),XC=mr("div",null,null,-1),YC=mr("div",null,null,-1),qC=mr("div",null,null,-1),JC=mr("div",null,null,-1),ZC=mr("div",null,null,-1),$C=mr("div",null,null,-1),e3=[zC,VC,QC,jC,WC,KC,XC,YC,qC,JC,ZC,$C];function t3(u,T,W,d,k,K){return Hr(),Ps("div",HC,e3)}const $x=rl(GC,[["render",t3]]);var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n3(u){var T=u.default;if(typeof T=="function"){var W=function(){return T.apply(this,arguments)};W.prototype=T.prototype}else W={};return Object.defineProperty(W,"__esModule",{value:!0}),Object.keys(u).forEach(function(d){var k=Object.getOwnPropertyDescriptor(u,d);Object.defineProperty(W,d,k.get?k:{enumerable:!0,get:function(){return u[d]}})}),W}var eE={exports:{}};(function(u){(function(T,W,d){function k(h){var g=this,C=I();g.next=function(){var v=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=v-(g.c=v|0)},g.c=1,g.s0=C(" "),g.s1=C(" "),g.s2=C(" "),g.s0-=C(h),g.s0<0&&(g.s0+=1),g.s1-=C(h),g.s1<0&&(g.s1+=1),g.s2-=C(h),g.s2<0&&(g.s2+=1),C=null}function K(h,g){return g.c=h.c,g.s0=h.s0,g.s1=h.s1,g.s2=h.s2,g}function S(h,g){var C=new k(h),v=g&&g.state,y=C.next;return y.int32=function(){return C.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,v&&(typeof v=="object"&&K(v,C),y.state=function(){return K(C,{})}),y}function I(){var h=4022871197,g=function(C){C=String(C);for(var v=0;v<C.length;v++){h+=C.charCodeAt(v);var y=.02519603282416938*h;h=y>>>0,y-=h,y*=h,h=y>>>0,y-=h,h+=y*4294967296}return(h>>>0)*23283064365386963e-26};return g}W&&W.exports?W.exports=S:d&&d.amd?d(function(){return S}):this.alea=S})(Lf,u,!1)})(eE);var tE={exports:{}};(function(u){(function(T,W,d){function k(I){var h=this,g="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var v=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^v^v>>>8},I===(I|0)?h.x=I:g+=I;for(var C=0;C<g.length+64;C++)h.x^=g.charCodeAt(C)|0,h.next()}function K(I,h){return h.x=I.x,h.y=I.y,h.z=I.z,h.w=I.w,h}function S(I,h){var g=new k(I),C=h&&h.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,_=(y+E)/(1<<21);while(_===0);return _},v.int32=g.next,v.quick=v,C&&(typeof C=="object"&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=S:d&&d.amd?d(function(){return S}):this.xor128=S})(Lf,u,!1)})(tE);var nE={exports:{}};(function(u){(function(T,W,d){function k(I){var h=this,g="";h.next=function(){var v=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(v^v<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,I===(I|0)?h.x=I:g+=I;for(var C=0;C<g.length+64;C++)h.x^=g.charCodeAt(C)|0,C==g.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function K(I,h){return h.x=I.x,h.y=I.y,h.z=I.z,h.w=I.w,h.v=I.v,h.d=I.d,h}function S(I,h){var g=new k(I),C=h&&h.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,_=(y+E)/(1<<21);while(_===0);return _},v.int32=g.next,v.quick=v,C&&(typeof C=="object"&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=S:d&&d.amd?d(function(){return S}):this.xorwow=S})(Lf,u,!1)})(nE);var iE={exports:{}};(function(u){(function(T,W,d){function k(I){var h=this;h.next=function(){var C=h.x,v=h.i,y,E;return y=C[v],y^=y>>>7,E=y^y<<24,y=C[v+1&7],E^=y^y>>>10,y=C[v+3&7],E^=y^y>>>3,y=C[v+4&7],E^=y^y<<7,y=C[v+7&7],y=y^y<<13,E^=y^y<<9,C[v]=E,h.i=v+1&7,E};function g(C,v){var y,E=[];if(v===(v|0))E[0]=v;else for(v=""+v,y=0;y<v.length;++y)E[y&7]=E[y&7]<<15^v.charCodeAt(y)+E[y+1&7]<<13;for(;E.length<8;)E.push(0);for(y=0;y<8&&E[y]===0;++y);for(y==8?E[7]=-1:E[y],C.x=E,C.i=0,y=256;y>0;--y)C.next()}g(h,I)}function K(I,h){return h.x=I.x.slice(),h.i=I.i,h}function S(I,h){I==null&&(I=+new Date);var g=new k(I),C=h&&h.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,_=(y+E)/(1<<21);while(_===0);return _},v.int32=g.next,v.quick=v,C&&(C.x&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=S:d&&d.amd?d(function(){return S}):this.xorshift7=S})(Lf,u,!1)})(iE);var rE={exports:{}};(function(u){(function(T,W,d){function k(I){var h=this;h.next=function(){var C=h.w,v=h.X,y=h.i,E,_;return h.w=C=C+1640531527|0,_=v[y+34&127],E=v[y=y+1&127],_^=_<<13,E^=E<<17,_^=_>>>15,E^=E>>>12,_=v[y]=_^E,h.i=y,_+(C^C>>>16)|0};function g(C,v){var y,E,_,m,w,b=[],O=128;for(v===(v|0)?(E=v,v=null):(v=v+"\0",E=0,O=Math.max(O,v.length)),_=0,m=-32;m<O;++m)v&&(E^=v.charCodeAt((m+32)%v.length)),m===0&&(w=E),E^=E<<10,E^=E>>>15,E^=E<<4,E^=E>>>13,m>=0&&(w=w+1640531527|0,y=b[m&127]^=E+w,_=y==0?_+1:0);for(_>=128&&(b[(v&&v.length||0)&127]=-1),_=127,m=4*128;m>0;--m)E=b[_+34&127],y=b[_=_+1&127],E^=E<<13,y^=y<<17,E^=E>>>15,y^=y>>>12,b[_]=E^y;C.w=w,C.X=b,C.i=_}g(h,I)}function K(I,h){return h.i=I.i,h.w=I.w,h.X=I.X.slice(),h}function S(I,h){I==null&&(I=+new Date);var g=new k(I),C=h&&h.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,_=(y+E)/(1<<21);while(_===0);return _},v.int32=g.next,v.quick=v,C&&(C.X&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=S:d&&d.amd?d(function(){return S}):this.xor4096=S})(Lf,u,!1)})(rE);var sE={exports:{}};(function(u){(function(T,W,d){function k(I){var h=this,g="";h.next=function(){var v=h.b,y=h.c,E=h.d,_=h.a;return v=v<<25^v>>>7^y,y=y-E|0,E=E<<24^E>>>8^_,_=_-v|0,h.b=v=v<<20^v>>>12^y,h.c=y=y-E|0,h.d=E<<16^y>>>16^_,h.a=_-v|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,I===Math.floor(I)?(h.a=I/4294967296|0,h.b=I|0):g+=I;for(var C=0;C<g.length+20;C++)h.b^=g.charCodeAt(C)|0,h.next()}function K(I,h){return h.a=I.a,h.b=I.b,h.c=I.c,h.d=I.d,h}function S(I,h){var g=new k(I),C=h&&h.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,_=(y+E)/(1<<21);while(_===0);return _},v.int32=g.next,v.quick=v,C&&(typeof C=="object"&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=S:d&&d.amd?d(function(){return S}):this.tychei=S})(Lf,u,!1)})(sE);var oE={exports:{}};const i3={},r3=Object.freeze(Object.defineProperty({__proto__:null,default:i3},Symbol.toStringTag,{value:"Module"})),s3=n3(r3);(function(u){(function(T,W,d){var k=256,K=6,S=52,I="random",h=d.pow(k,K),g=d.pow(2,S),C=g*2,v=k-1,y;function E(L,P,Y){var J=[];P=P==!0?{entropy:!0}:P||{};var j=b(w(P.entropy?[L,R(W)]:L==null?O():L,3),J),U=new _(J),te=function(){for(var ue=U.g(K),xe=h,Ee=0;ue<g;)ue=(ue+Ee)*k,xe*=k,Ee=U.g(1);for(;ue>=C;)ue/=2,xe/=2,Ee>>>=1;return(ue+Ee)/xe};return te.int32=function(){return U.g(4)|0},te.quick=function(){return U.g(4)/4294967296},te.double=te,b(R(U.S),W),(P.pass||Y||function(ue,xe,Ee,V){return V&&(V.S&&m(V,U),ue.state=function(){return m(U,{})}),Ee?(d[I]=ue,xe):ue})(te,j,"global"in P?P.global:this==d,P.state)}function _(L){var P,Y=L.length,J=this,j=0,U=J.i=J.j=0,te=J.S=[];for(Y||(L=[Y++]);j<k;)te[j]=j++;for(j=0;j<k;j++)te[j]=te[U=v&U+L[j%Y]+(P=te[j])],te[U]=P;(J.g=function(ue){for(var xe,Ee=0,V=J.i,q=J.j,Q=J.S;ue--;)xe=Q[V=v&V+1],Ee=Ee*k+Q[v&(Q[V]=Q[q=v&q+xe])+(Q[q]=xe)];return J.i=V,J.j=q,Ee})(k)}function m(L,P){return P.i=L.i,P.j=L.j,P.S=L.S.slice(),P}function w(L,P){var Y=[],J=typeof L,j;if(P&&J=="object")for(j in L)try{Y.push(w(L[j],P-1))}catch{}return Y.length?Y:J=="string"?L:L+"\0"}function b(L,P){for(var Y=L+"",J,j=0;j<Y.length;)P[v&j]=v&(J^=P[v&j]*19)+Y.charCodeAt(j++);return R(P)}function O(){try{var L;return y&&(L=y.randomBytes)?L=L(k):(L=new Uint8Array(k),(T.crypto||T.msCrypto).getRandomValues(L)),R(L)}catch{var P=T.navigator,Y=P&&P.plugins;return[+new Date,T,Y,T.screen,R(W)]}}function R(L){return String.fromCharCode.apply(0,L)}if(b(d.random(),W),u.exports){u.exports=E;try{y=s3}catch{}}else d["seed"+I]=E})(typeof self<"u"?self:Lf,[],Math)})(oE);var o3=eE.exports,a3=tE.exports,l3=nE.exports,c3=iE.exports,u3=rE.exports,h3=sE.exports,Df=oE.exports;Df.alea=o3;Df.xor128=a3;Df.xorwow=l3;Df.xorshift7=c3;Df.xor4096=u3;Df.tychei=h3;var d3=Df;const{alea:f3}=d3,p3=u=>u*u*u*(u*(u*6-15)+10),b1=(u,T,W)=>u+(T-u)*p3(W),m3=(u,T)=>u[0]*T[0]+u[1]*T[1];class g3{constructor(T,W,d=Math.floor(Math.random()*4294967296)){this.random=f3(d.toString()),this.vectors=this._createVectorField(T,W)}_dotProdGrid(T,W,d,k){const K=this.vectors[k][d],S=[T-d,W-k];return m3(K,S)}_createRandomVector(){const T=this.random()*Math.PI*2;return[Math.cos(T),Math.sin(T)]}_createVectorField(T,W){return Array(W+1).fill([]).map(()=>Array(T+1).fill(0).map(()=>this._createRandomVector()))}perlin(T,W){const[d,k]=[Math.floor(T),Math.floor(W)],[K,S]=[d+1,k+1],I=[this._dotProdGrid(T,W,d,k),this._dotProdGrid(T,W,K,k),this._dotProdGrid(T,W,d,S),this._dotProdGrid(T,W,K,S)];return b1(b1(I[0],I[1],T-d),b1(I[2],I[3],T-d),W-k)}}const aE=[[-.7207726424842171,14.026011008285593],[1.1126140076335815,11.651417697596393],[1.8933574234672257,15.497854749410564],[4.883194137582727,15.251123270010218],[-1.6117004208986856,10.395188859171263],[6.177984802760356,17.95732302859585],[-2.651124595282667,16.322473796646698],[5.21071061428027,12.269054699790601],[2.444299490016263,8.96318151451812],[5.036570344476825,20.731700983096893],[-4.094938367125177,18.95218895084838],[-2.60396371383991,7.564038287851979],[6.194194418119995,9.434842356372236],[8.494613492498573,16.051219276466433],[6.9095679367240095,6.521383805288977],[1.0512651883203006,6.306217940379682],[1.9971383795363593,18.49605913089583],[6.990366435457474,23.008251187873583],[-2.8725723571191253,21.691864358188077],[3.577107821022963,23.352763581096745],[1.1247888217958284,21.6247208946941],[4.481815877800962,4.75899340007367],[-4.187376825822792,11.933334189469178],[8.19373926809643,11.950401203792474],[3.05581535367072,2.119576323296993],[-3.3059870801509703,24.660391211335828],[8.6653781045894,20.519408905150158],[10.592455642929288,18.19576079200683],[-5.80489530930755,23.000434084704665],[13.134217051772175,16.60219593906953],[9.132100954796698,8.827631370180164],[11.164640754340667,11.533574670289802],[4.91218100451502,-.23709645211445363],[13.820308672953459,12.929077413408166],[3.36036752811264,-2.804561142125987],[16.11822351412735,16.911558885497527],[11.775707227913507,7.409412109015825],[9.564260403228452,24.549377348404327],[4.810172014404678,-5.430978274176329],[15.335201090132017,10.339656442539393],[-8.60923717866486,24.06611071472412],[.42348348882084963,-2.192423788460001],[-6.930123682768279,10.71787556050819],[-7.094937559682972,18.949987893682007],[7.814694267388184,-.9956587493883475],[-5.598897544234703,7.738312071183948],[-1.0961849993818795,4.211353340617222],[7.7535020243077994,-4.85062626650879],[12.543148430914613,24.194094195823034],[13.287999883376372,19.598251819840762],[8.775833600398876,4.172543139643842],[10.771640847112643,-.4892331135286483],[10.63422282413206,-4.0131015364500655],[11.152722901572297,-6.967954776408785],[15.523707308810309,21.59865485619609],[-11.544736928698534,24.684852355113954],[-8.092763207987595,13.483426018264815],[14.072341259792609,5.479263896153711],[18.479155110086772,21.083554580589315],[-12.948314311991952,22.033443195986067],[-11.075734368565598,13.164234766567695],[-10.75053875489167,19.991438641482674],[1.8512245117187334,-5.925578796162185],[8.376552672342896,-8.105003085998323],[-9.331198394864217,16.215875155560134],[3.8907908440640995,-8.28662850899558],[13.214239888985581,1.2525217258909116],[13.617869532098098,-4.325915094409886],[16.592403865377975,7.615791324382123],[-9.781340838762763,9.784837121127055],[16.43216099198078,3.6269003164060933],[19.151124522271637,24.007329043349394],[-13.181344315031454,15.301150009001077],[-15.416753901028036,23.738378970518184],[-12.8851676227988,10.771338759952464],[14.672265733249056,-1.3693403294925979],[-15.629261144930517,20.68714305153211],[-18.182364709061346,22.5758830098846],[.9281345461814148,-8.780032319259796],[-15.500066428281652,9.300861205861814],[-17.682700027346215,18.500047087431902],[17.58102602511707,-2.103583861607081],[-1.2354272341591077,-10.858252813492737],[-1.0828978186860532,-6.550819669922085],[-1.631260755326558,-.006554146614181633],[19.107973271514695,16.663775939751865],[17.931792715899157,11.84222488656983],[-20.67785969325086,18.670395482604945],[-3.841070110270717,3.0007312988466133],[-9.863578745315223,6.785964511841037],[-3.9665290690607335,-5.723371295784688],[-17.675192393719158,11.366975199444845],[-12.853423153168947,6.539326281175409],[-6.832788755943316,3.2234857491612274],[21.275279520041593,14.58946072139755],[7.981449670057145,-11.078871546032298],[4.556954050038765,-11.21173134188977],[22.116661379671825,23.553907443289283],[11.475123173374186,-9.950580811422583],[-15.695550684523116,13.664456289453156],[-18.328571900774186,8.30108283438149],[18.951823768592384,1.9986191698721214],[-15.00300404697764,4.446648097370577],[-20.621022629137887,24.323151606537103],[19.567625220912944,7.23100841731798],[20.770665305932795,10.872275188103067],[-4.202060505024566,-10.412061110080204],[-18.61383048361553,15.648206265540232],[-4.611555936560727,-.3498333809300114],[23.628322334565716,12.728496048703185],[7.089880302922161,-13.943326828208402],[-7.576144091126274,.10975020647244449],[4.434955834932509,-15.340243457528105],[21.960244217375404,5.4212088876001125],[-21.283420488553123,14.279524708151015],[14.037143937221671,-7.792645802856548],[23.569361953871372,20.929091060812148],[-13.74294908170627,18.35437070941753],[17.531488465219105,-5.103174838750366],[24.48527262349704,3.8012608797063727],[22.742809904758964,8.611601465222904],[-23.29032235715487,22.953904016797203],[-7.173450726581134,-10.825389249986102],[1.4286568979602765,41.21999117647679],[32.82677308526462,8.14858290026775],[49.10993742480764,25.824832904998292],[.8991852666087361,38.248850332243194],[17.185055953524614,22.119269545888713],[15.19742940060218,27.120477687576194],[27.166709824402368,11.975333871138586],[10.548753418945275,26.497823975996365],[45.50602675971476,23.563027496384237],[1.9746435862130238,35.448245147145876],[23.493304663550482,11.154036755980265],[1.0062829699319316,32.60883011639821],[28.040173602975248,7.0037101337251695],[.4143296292320311,45.24797099404356],[4.21942311147696,31.5725946105122],[37.95413114176188,12.439335774307715],[7.121122840659738,28.592625942160428],[40.89351787080449,11.839331060052704],[3.160795232640335,28.76558427669618],[25.48065636364034,8.906719862404724],[42.00100124477654,16.743080721211786],[48.46493512281253,41.640169950238615],[45.5314852319357,19.901229669174246],[14.238140465850837,24.277984989315794],[18.073973612562956,18.78532877288672],[14.001652761040246,21.28732058730184],[46.04656505383195,16.94577830312618],[35.71983844430752,7.3547486428146955],[20.935321951625024,9.586642598312661],[31.01071661276084,5.760709601979669],[15.306898913992207,15.80291111120073],[5.3570807218381145,26.16607377848799],[38.5389582793732,6.328803539244664],[46.16794481502467,13.948234816607116],[39.26856083763546,9.3175232481141],[11.078159612910143,20.614128331823206],[23.216591651927168,6.938469120965712],[15.879182395376427,11.892558550281537],[49.1184153790938,13.405350436134006],[18.244811380648216,8.259558250028006],[49.001954125609366,16.430341173673245],[39.19304942358222,3.400977592391368],[47.19963474435405,11.099210614755474],[35.31138063466284,4.382685013324181],[20.389721216498877,5.934076995697135],[13.168184079761497,18.40542364998303],[37.54411429061378,.894782682321039],[29.807087565615323,3.0127508837912695],[18.28861749491513,3.792730888420923],[49.9592710631856,22.94757164283948],[40.97536268134073,.9878138078093301],[9.478766495532144,23.69512385223625],[12.86402262024899,14.061545149242283],[11.020595181343054,11.694738169894629],[44.28083015998867,10.405971984637613],[15.657059276409479,5.2331826726245545],[4.633305599397822,23.25469101901843],[33.445809013866416,2.0332930648236593],[13.739095764346517,7.540002120781512],[41.458110553747744,7.020576622714949],[8.21590829271431,12.759506434238604],[2.442198334457662,25.456524155318974],[21.753067034658326,3.261758118746406],[49.51783028717048,19.980227705701214],[44.31748358708691,6.1128399559371625],[25.47455271535703,4.963219304857698],[10.457382102759766,17.120296169347913],[.3443918500106582,23.311947751034864],[47.57268694121007,8.122495637062622],[.30986144915055247,27.83168034043898],[7.323580259831975,21.60821889765672],[5.0188039343082185,19.687800690779564],[17.86598856511309,.8226492754522758],[12.817415922805619,4.265491800324163],[7.527389993654994,17.76461460039256],[9.514912598082992,9.099951096073857],[5.485345474057386,14.002095140677069],[20.885660861433262,.3898934752349619],[2.154467755223595,20.579752625127465],[6.611798988064756,8.343689654952504],[27.03311420712615,1.8703534895398786],[23.871742638826614,.6785379255876686],[9.028479429066227,6.139649967458667],[10.754277403410207,2.087543350569906],[49.208761171847755,5.607886102394589],[43.75372011905979,2.119507206337036],[46.44945146845799,4.002220863632211],[3.6411292986537824,11.635902693224882],[12.95014042594881,.043482298094298155],[48.28739725472809,1.6311545873058795],[7.097174476198292,3.843988585845985],[1.2840010083841258,9.780115468565086],[3.1439626251099755,15.87770873485231],[.2267391394562952,18.281087276723756],[4.362800260907164,6.358241412050264],[.8159012768356784,6.816860055792786],[5.092427858675777,1.6121751976945258],[.6434734964317567,12.710938647542653],[2.1922209653256717,.8448421697564678],[1.3104447462519646,3.7123272524510824]],A3=50,v3=50,lE=(u,T)=>u.tags.includes(T),cE=u=>u._embedded["wp:featuredmedia"]&&u._embedded["wp:featuredmedia"].length>=1,uE=u=>u._embedded["wp:featuredmedia"][0].media_details.sizes.full.source_url,P2=u=>{const T=u.id;let W="";return window.wpData.youtube_urls[T]&&(W=window.wpData.youtube_urls[T]),W},hE=(u,T)=>u.tags.includes(T),y3=u=>{let T="";return u.meta.video_link&&(T=u.meta.video_link),T};window.points=aE;const x3=()=>{for(var u="0123456789ABCDEF",T="#",W=0;W<6;W++)T+=u[Math.floor(Math.random()*16)];return T},E3=(u,T)=>{const W=new g3(2938,345,1984);return u.map((d,k)=>{let K=T+k;return d.position=aE[K],d}).map((d,k)=>{let K=W.perlin(Math.abs(d.position[0]),Math.abs(d.position[1]));return d.height=.7,K&&(d.height=Math.abs(K)*4+.85),d}).map(d=>(d.rot=Math.ceil((Math.random()*2-1)*35),d)).map(d=>(d.position[0]=d.position[0]-A3/2,d.position[1]=d.position[1]-v3/2,d)).filter(d=>!isNaN(d.position[0])&&!isNaN(d.position[1]))},id=UC("posts",{state:()=>({posts:[],tags:[],currentFilter:null,page:{isFinal:!1,current:null},about:null}),getters:{allPosts(u){return u.posts},getPostBySlug(u){return T=>u.posts.find(W=>W.slug===T)},getPostsByCurrentFilter(u){return u.currentFilter==null?u.posts:u.posts.filter(T=>T.tags.includes(u.currentFilter))},allTags(u){return u.tags},pageState(u){return u.page},aboutPage(u){return u.about}},actions:{addPosts(u){let T=E3(u,this.posts.length),W=this.posts.concat(T);this.posts=W},addTags(u){let T=this.tags.concat(u);this.tags=T},selectFilter(u){this.currentFilter=u},setPageFinalFlag(u){this.page.isFinal=u},setPageCurrent(u){this.page.current=u},setAboutPage(u){this.about=u},async fetchAbout(u){return fetch(u).then(T=>T.json()).then(T=>(this.about=T,T)).catch(T=>{console.log("Error",T)})}}}),b3={name:"a-post",props:["post"],data(){return{videoWidth:null,videoHeight:null}},mounted(){this.isVideo&&window.setTimeout(()=>{let u=document.querySelector(`#${this.post.slug}`),T=u.videoHeight/u.videoWidth;this.videoWidth=2.2,this.videoHeight=this.videoWidth*T},100)},computed:{textAttr(){return`side: double; wrapCount: 13; baseline: bottom; color: ${x3()}`},isYouTube(){const u=parseInt(window.wpData.youtube_tag_id,10);return lE(this.post,u)},hasImage(){return cE(this.post)},imgUrl(){return uE(this.post)},width(){return this.post._embedded["wp:featuredmedia"][0].media_details.sizes.full.width},height(){return this.post._embedded["wp:featuredmedia"][0].media_details.sizes.full.height},isVideo(){const u=parseInt(window.wpData.video_tag_id,10);return hE(this.post,u)},posX(){return this.post.position[0]},posZ(){return this.post.position[1]}}};function _3(u,T,W,d,k,K){const S=bo("a-image"),I=bo("a-video"),h=bo("a-entity"),g=bo("a-text");return Hr(),nl(h,{"post-url":W.post.slug,"cursor-listener":"",position:`${K.posX} ${W.post.height} ${K.posZ}`,rotation:`0 ${W.post.rot} 0`},{default:Dl(()=>[K.isYouTube?(Hr(),nl(S,{key:0,"post-url":W.post.slug,src:`#${W.post.slug}`,width:"2.2",height:"1.5"},null,8,["post-url","src"])):K.isVideo?(Hr(),nl(I,{key:1,"post-url":W.post.slug,src:`#${W.post.slug}`,width:k.videoWidth,height:k.videoHeight,autoplay:"",loop:"true"},null,8,["post-url","src","width","height"])):K.hasImage?(Hr(),nl(S,{key:2,"post-url":W.post.slug,src:`#${W.post.slug}`,width:"1.5",height:`${K.height/K.width*1.5}`},null,8,["post-url","src","height"])):(Hr(),nl(g,{key:3,value:W.post.title.rendered,text:K.textAttr,position:"-0.65 0 0.1"},{default:Dl(()=>[ys(h,{"post-url":W.post.slug,position:"2.1 0.5 0",geometry:"primitive: plane; width: 4.3; height: 2.5;",material:"visible: false"},null,8,["post-url"])]),_:1},8,["value","text"]))]),_:1},8,["post-url","position","rotation"])}const w3=rl(b3,[["render",_3]]),C3={name:"AAsset",props:["post"],setup(){return{store:id()}},computed:{isYouTube(){const u=parseInt(window.wpData.youtube_tag_id,10);return lE(this.post,u)},youTubeThumbnail(){return console.log(P2(this.post),this.post.title.rendered),P2(this.post)},hasImage(){return cE(this.post)},imgUrl(){return uE(this.post)},isVideo(){const u=parseInt(window.wpData.video_tag_id,10);return hE(this.post,u)},videoUrl(){return y3(this.post)}}},M3=["id","src"],T3=["id","src"],S3=["id","src"];function I3(u,T,W,d,k,K){return Hr(),Ps("template",null,[K.isYouTube?(Hr(),Ps("img",{key:0,id:W.post.slug,src:K.youTubeThumbnail,crossorigin:"anonymous"},null,8,M3)):K.isVideo?(Hr(),Ps("video",{key:1,id:W.post.slug,src:K.videoUrl,"webkit-playsinline":"",playsinline:"",crossorigin:"anonymous"},null,8,T3)):K.hasImage?(Hr(),Ps("img",{key:2,id:W.post.slug,src:W.post._embedded["wp:featuredmedia"][0].media_details.sizes.full.source_url,crossorigin:"anonymous"},null,8,S3)):If("",!0)])}const R3=rl(C3,[["render",I3]]),B3={name:"MagicWindowButton",data(){return{isMagicWindow:!1}},methods:{toggleMagicWindow(){this.isMagicWindow=!this.isMagicWindow,this.$emit("magicWindowChanged",this.isMagicWindow)}}},L3=mr("span",{class:"a11y-hidden"},"Toggle mobile window tracking",-1),D3=mr("svg",{fill:"black",viewBox:"0 0 512 512"},[mr("path",{d:"M464 6.1c9.5-8.5 24-8.1 33 .9l8 8c9 9 9.4 23.5 .9 33l-85.8 95.9c-2.6 2.9-4.1 6.7-4.1 10.7V176c0 8.8-7.2 16-16 16H384.2c-4.6 0-8.9 1.9-11.9 5.3L100.7 500.9C94.3 508 85.3 512 75.8 512c-8.8 0-17.3-3.5-23.5-9.8L9.7 459.7C3.5 453.4 0 445 0 436.2c0-9.5 4-18.5 11.1-24.8l111.6-99.8c3.4-3 5.3-7.4 5.3-11.9V272c0-8.8 7.2-16 16-16h34.6c3.9 0 7.7-1.5 10.7-4.1L464 6.1zM432 288c3.6 0 6.7 2.4 7.7 5.8l14.8 51.7 51.7 14.8c3.4 1 5.8 4.1 5.8 7.7s-2.4 6.7-5.8 7.7l-51.7 14.8-14.8 51.7c-1 3.4-4.1 5.8-7.7 5.8s-6.7-2.4-7.7-5.8l-14.8-51.7-51.7-14.8c-3.4-1-5.8-4.1-5.8-7.7s2.4-6.7 5.8-7.7l51.7-14.8 14.8-51.7c1-3.4 4.1-5.8 7.7-5.8zM87.7 69.8l14.8 51.7 51.7 14.8c3.4 1 5.8 4.1 5.8 7.7s-2.4 6.7-5.8 7.7l-51.7 14.8L87.7 218.2c-1 3.4-4.1 5.8-7.7 5.8s-6.7-2.4-7.7-5.8L57.5 166.5 5.8 151.7c-3.4-1-5.8-4.1-5.8-7.7s2.4-6.7 5.8-7.7l51.7-14.8L72.3 69.8c1-3.4 4.1-5.8 7.7-5.8s6.7 2.4 7.7 5.8zM208 0c3.7 0 6.9 2.5 7.8 6.1l6.8 27.3 27.3 6.8c3.6 .9 6.1 4.1 6.1 7.8s-2.5 6.9-6.1 7.8l-27.3 6.8-6.8 27.3c-.9 3.6-4.1 6.1-7.8 6.1s-6.9-2.5-7.8-6.1l-6.8-27.3-27.3-6.8c-3.6-.9-6.1-4.1-6.1-7.8s2.5-6.9 6.1-7.8l27.3-6.8 6.8-27.3c.9-3.6 4.1-6.1 7.8-6.1z"})],-1),P3=[L3,D3];function O3(u,T,W,d,k,K){return Hr(),Ps("button",{class:nd(["magic-window ui-button",{"is-active":k.isMagicWindow}]),onClick:T[0]||(T[0]=(...S)=>K.toggleMagicWindow&&K.toggleMagicWindow(...S))},P3,2)}const F3=rl(B3,[["render",O3]]),N3={name:"DaytimeButton",data(){return{isDay:!0}},methods:{toggleDaytime(){this.isDay=!this.isDay,this.$emit("daytimeChanged",this.isDay)}}},k3=mr("span",{class:"a11y-hidden"},"Toggle daytime lighting",-1),U3={key:0,viewBox:"0 -17 512 512"},G3=mr("path",{d:"M375.7 19.7c-1.5-8-6.9-14.7-14.4-17.8s-16.1-2.2-22.8 2.4L256 61.1 173.5 4.2c-6.7-4.6-15.3-5.5-22.8-2.4s-12.9 9.8-14.4 17.8l-18.1 98.5L19.7 136.3c-8 1.5-14.7 6.9-17.8 14.4s-2.2 16.1 2.4 22.8L61.1 256 4.2 338.5c-4.6 6.7-5.5 15.3-2.4 22.8s9.8 13 17.8 14.4l98.5 18.1 18.1 98.5c1.5 8 6.9 14.7 14.4 17.8s16.1 2.2 22.8-2.4L256 450.9l82.5 56.9c6.7 4.6 15.3 5.5 22.8 2.4s12.9-9.8 14.4-17.8l18.1-98.5 98.5-18.1c8-1.5 14.7-6.9 17.8-14.4s2.2-16.1-2.4-22.8L450.9 256l56.9-82.5c4.6-6.7 5.5-15.3 2.4-22.8s-9.8-12.9-17.8-14.4l-98.5-18.1L375.7 19.7zM269.6 110l65.6-45.2 14.4 78.3c1.8 9.8 9.5 17.5 19.3 19.3l78.3 14.4L402 242.4c-5.7 8.2-5.7 19 0 27.2l45.2 65.6-78.3 14.4c-9.8 1.8-17.5 9.5-19.3 19.3l-14.4 78.3L269.6 402c-8.2-5.7-19-5.7-27.2 0l-65.6 45.2-14.4-78.3c-1.8-9.8-9.5-17.5-19.3-19.3L64.8 335.2 110 269.6c5.7-8.2 5.7-19 0-27.2L64.8 176.8l78.3-14.4c9.8-1.8 17.5-9.5 19.3-19.3l14.4-78.3L242.4 110c8.2 5.7 19 5.7 27.2 0zM256 368a112 112 0 1 0 0-224 112 112 0 1 0 0 224zM192 256a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"},null,-1),H3=[G3],z3={key:1,viewBox:"3 25 384 512"},V3=mr("path",{d:"M144.7 98.7c-21 34.1-33.1 74.3-33.1 117.3c0 98 62.8 181.4 150.4 211.7c-12.4 2.8-25.3 4.3-38.6 4.3C126.6 432 48 353.3 48 256c0-68.9 39.4-128.4 96.8-157.3zm62.1-66C91.1 41.2 0 137.9 0 256C0 379.7 100 480 223.5 480c47.8 0 92-15 128.4-40.6c1.9-1.3 3.7-2.7 5.5-4c4.8-3.6 9.4-7.4 13.9-11.4c2.7-2.4 5.3-4.8 7.9-7.3c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-3.7 .6-7.4 1.2-11.1 1.6c-5 .5-10.1 .9-15.3 1c-1.2 0-2.5 0-3.7 0c-.1 0-.2 0-.3 0c-96.8-.2-175.2-78.9-175.2-176c0-54.8 24.9-103.7 64.1-136c1-.9 2.1-1.7 3.2-2.6c4-3.2 8.2-6.2 12.5-9c3.1-2 6.3-4 9.6-5.8c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-3.6-.3-7.1-.5-10.7-.6c-2.7-.1-5.5-.1-8.2-.1c-3.3 0-6.5 .1-9.8 .2c-2.3 .1-4.6 .2-6.9 .4z"},null,-1),Q3=[V3];function j3(u,T,W,d,k,K){return Hr(),Ps("button",{class:"daytime-button ui-button",onClick:T[0]||(T[0]=(...S)=>K.toggleDaytime&&K.toggleDaytime(...S))},[k3,k.isDay?(Hr(),Ps("svg",U3,H3)):(Hr(),Ps("svg",z3,Q3))])}const W3=rl(N3,[["render",j3]]),K3={name:"RagnarokButton",data(){return{isRagnarok:!1}},methods:{toggleR(){this.isRagnarok=!this.isRagnarok,this.$emit("rChanged",this.isRagnarok)}}},X3=mr("span",{class:"a11y-hidden"},"Toggle Ragnarok",-1),Y3=mr("svg",{viewBox:"0 0 640 512"},[mr("path",{d:"M320 96C178.6 96 64 210.6 64 352v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352C0 175.3 143.3 32 320 32s320 143.3 320 320v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352C576 210.6 461.4 96 320 96zm0 192c-35.3 0-64 28.7-64 64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352c0-70.7 57.3-128 128-128s128 57.3 128 128v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352c0-35.3-28.7-64-64-64zM160 352v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352c0-123.7 100.3-224 224-224s224 100.3 224 224v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352c0-88.4-71.6-160-160-160s-160 71.6-160 160z"})],-1),q3=[X3,Y3];function J3(u,T,W,d,k,K){return Hr(),Ps("button",{class:nd(["ragnarok-button ui-button",{"is-active":k.isRagnarok}]),onClick:T[0]||(T[0]=(...S)=>K.toggleR&&K.toggleR(...S))},q3,2)}const Z3=rl(K3,[["render",J3]]),$3={name:"AboutButton",data(){return{isOpen:!1,isDone:!1}},setup(){return{store:id()}},created(){this.isDone=!1,fetch(`${window.wpData.rest_url}/wp/v2/pages/${window.wpData.about_page_id}`).then(u=>u.json()).then(u=>{this.store.setAboutPage(u),this.isDone=!0}).catch(u=>{console.log("Error",u)})},methods:{url(){window.vueRouter.push(`/page/${window.wpData.about_page_id}`)}},watch:{$route(u,T){u.path!=`/page/${window.wpData.about_page_id}`&&(this.isOpen=!1),u.path==`/page/${window.wpData.about_page_id}`&&(this.isOpen=!0)}}},eM=mr("span",{class:"a11y-hidden"},"Open about page",-1),tM=mr("svg",{viewBox:"0 0 512 512"},[mr("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1),nM=[eM,tM];function iM(u,T,W,d,k,K){return k.isDone?(Hr(),Ps("button",{key:0,class:nd(["about-button ui-button",{"is-active":k.isOpen}]),onClick:T[0]||(T[0]=(...S)=>K.url&&K.url(...S))},nM,2)):If("",!0)}const rM=rl($3,[["render",iM]]),sM={name:"TheField",components:{APost:w3,AAsset:R3,MagicWindowButton:F3,DaytimeButton:W3,RagnarokButton:Z3,AboutButton:rM},created(){},data(){return{isMagicWindow:!1,isDay:!0,isRagnarok:!1,isPointOn:!0}},setup(){return{store:id()}},methods:{toggleMW(u){this.isMagicWindow=u},toggleDT(u){this.isDay=u},toggleR(u){this.isRagnarok=u},whichPath(u){return window.location.hostname==="localhost"?`/${u}`:`/wp-content/themes/trolllike/apps/trollfield/dist/${u}`}},computed:{isFinal(){return this.store.pageState.isFinal},magicWindow(){return`magicWindowTrackingEnabled: ${this.isMagicWindow}`},environment(){let u,T,W;return this.isRagnarok?(u="#a51d2d",T="#c01c28",W=.8):this.isDay?(u="#1c71d8",T="#99c1f1",W=.4,this.isPointOn=!0):(u="#192636",T="#05111f",W=.7,this.isPointOn=!1),`preset: checkerboard; active: true; seed: 8; skyType: gradient; skyColor:  ${u}; horizonColor: ${T}; fog: ${W}; lightPosition: [object Object]; ground: noise; groundYScale: 1.18; groundTexture: squares; groundColor: #252525; groundColor2: #111111; dressing: trees; dressingAmount: 20; dressingColor: #888b1d; dressingScale: 1; dressingVariance: [object Object]; gridColor: #333333; grid: 1x1; gridColor: #ffffff`}}},oM=["src"],aM=["src"],lM=["src"],cM={key:1},uM={class:"ui ui-bottom"},hM={class:"ui ui-top"};function dM(u,T,W,d,k,K){const S=bo("AAsset"),I=bo("a-assets"),h=bo("a-entity"),g=bo("a-light"),C=bo("a-image"),v=bo("APost"),y=bo("a-scene"),E=bo("MagicWindowButton"),_=bo("DaytimeButton"),m=bo("RagnarokButton"),w=bo("AboutButton");return Hr(),Ps(Va,null,[K.isFinal?(Hr(),nl(y,{key:0,"vr-mode-ui":"enabled: true","loading-screen":"dotsColor: black; backgroundColor: white"},{default:Dl(()=>[ys(I,null,{default:Dl(()=>[mr("img",{src:K.whichPath("sun.png"),id:"sun"},null,8,oM),mr("img",{src:K.whichPath("moon.png"),id:"moon"},null,8,aM),mr("img",{src:K.whichPath("blacksun.png"),id:"blacksun"},null,8,lM),(Hr(!0),Ps(Va,null,L1(d.store.allPosts,(b,O)=>(Hr(),nl(S,{key:b.id,post:b},null,8,["post"]))),128))]),_:1}),ys(h,{environment:K.environment},null,8,["environment"]),k.isRagnarok?(Hr(),nl(C,{key:0,src:"#blacksun",position:"-25 32 -21",rotation:"60 67 29",scale:"12 12 12"},{default:Dl(()=>[ys(g,{color:"#000000",distance:"100",intensity:"1.4",type:"directional"})]),_:1})):(Hr(),Ps(Va,{key:1},[k.isDay?(Hr(),nl(C,{key:0,src:"#sun",position:"14 40 -6",rotation:"69 -37 -92",scale:"7 7 7"},{default:Dl(()=>[ys(g,{color:"#ffffff",distance:"100",intensity:"1.4",type:"directional"})]),_:1})):If("",!0),k.isDay?If("",!0):(Hr(),nl(C,{key:1,src:"#moon",position:"12 35 6",rotation:"67 -146 156",scale:"5 5 5"},{default:Dl(()=>[ys(g,{color:"#ffffff",distance:"100",intensity:"0.8",type:"directional"})]),_:1}))],64)),ys(h,{id:"rig","movement-controls":"controls: keyboard, nipple","nipple-controls":"moveJoystickPosition: false",position:"0 0 0"},{default:Dl(()=>[ys(h,{camera:"",id:"camera","look-controls":K.magicWindow,position:"0 1.6 0"},{default:Dl(()=>[ys(h,{cursor:"rayOrigin:mouse",position:"0 0 -1",material:"color: black; shader: flat"})]),_:1},8,["look-controls"])]),_:1}),ys(g,{type:"ambient",color:"#ccc",visible:"false"}),ys(g,{color:"#ddf",distance:"100",visible:k.isPointOn,intensity:"0.4",type:"point"},null,8,["visible"]),ys(h,{position:"0 0 0",id:"all-posts"},{default:Dl(()=>[(Hr(!0),Ps(Va,null,L1(d.store.getPostsByCurrentFilter,(b,O)=>(Hr(),nl(v,{key:b.id,post:b},null,8,["post"]))),128))]),_:1})]),_:1})):(Hr(),Ps("div",cM," Loading ")),mr("div",uM,[ys(E,{onMagicWindowChanged:K.toggleMW},null,8,["onMagicWindowChanged"]),k.isRagnarok?If("",!0):(Hr(),nl(_,{key:0,onDaytimeChanged:K.toggleDT},null,8,["onDaytimeChanged"])),ys(m,{onRChanged:K.toggleR},null,8,["onRChanged"])]),mr("div",hM,[ys(w)])],64)}const fM=rl(sM,[["render",dM]]),pM={name:"TrollfieldApp",components:{TheField:fM,LoadSpinner:$x},setup(){return{store:id()}},data(){return{isLoading:!1}},async created(){this.isLoading=!0,this.store.setPageCurrent(1),this.fetchData(1),this.fetchTags()},methods:{fetchData(u){fetch(`${window.wpData.rest_url}/wp/v2/posts?per_page=30&page=${u}&_embed=true`).then(T=>(parseInt(T.headers.get("x-wp-totalpages"),10)>u&&(this.fetchData(u+1),this.store.setPageCurrent(u+1)),T.json())).then(T=>{this.store.pageState.current==u&&(this.isLoading=!1,this.store.setPageFinalFlag(!0)),this.store.addPosts(T)}).catch(T=>{console.log("Error here?",T)})},fetchTags(){fetch(`${window.wpData.rest_url}/trolllike-theme/v1/tags`).then(u=>u.json()).then(u=>{let T=u,W=[],d=[];T.forEach(k=>{d.includes(k.term_id)||(W.push(k),d.push(k.term_id))}),this.store.addTags(Array.from(W))}).catch(u=>{console.log("Error",u)})}},computed:{}},mM={key:0,style:{"text-align":"center"}},gM={key:1};function AM(u,T,W,d,k,K){const S=bo("LoadSpinner"),I=bo("TheField"),h=bo("router-view");return k.isLoading?(Hr(),Ps("div",mM,[ys(S)])):(Hr(),Ps("div",gM,[ys(I),ys(h)]))}const vM=rl(pM,[["render",AM]]);/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const lm=typeof window<"u";function yM(u){return u.__esModule||u[Symbol.toStringTag]==="Module"}const Vs=Object.assign;function _1(u,T){const W={};for(const d in T){const k=T[d];W[d]=Lc(k)?k.map(u):u(k)}return W}const Zg=()=>{},Lc=Array.isArray,xM=/\/$/,EM=u=>u.replace(xM,"");function w1(u,T,W="/"){let d,k={},K="",S="";const I=T.indexOf("#");let h=T.indexOf("?");return I<h&&I>=0&&(h=-1),h>-1&&(d=T.slice(0,h),K=T.slice(h+1,I>-1?I:T.length),k=u(K)),I>-1&&(d=d||T.slice(0,I),S=T.slice(I,T.length)),d=CM(d!=null?d:T,W),{fullPath:d+(K&&"?")+K+S,path:d,query:k,hash:S}}function bM(u,T){const W=T.query?u(T.query):"";return T.path+(W&&"?")+W+(T.hash||"")}function O2(u,T){return!T||!u.toLowerCase().startsWith(T.toLowerCase())?u:u.slice(T.length)||"/"}function _M(u,T,W){const d=T.matched.length-1,k=W.matched.length-1;return d>-1&&d===k&&Am(T.matched[d],W.matched[k])&&dE(T.params,W.params)&&u(T.query)===u(W.query)&&T.hash===W.hash}function Am(u,T){return(u.aliasOf||u)===(T.aliasOf||T)}function dE(u,T){if(Object.keys(u).length!==Object.keys(T).length)return!1;for(const W in u)if(!wM(u[W],T[W]))return!1;return!0}function wM(u,T){return Lc(u)?F2(u,T):Lc(T)?F2(T,u):u===T}function F2(u,T){return Lc(T)?u.length===T.length&&u.every((W,d)=>W===T[d]):u.length===1&&u[0]===T}function CM(u,T){if(u.startsWith("/"))return u;if(!u)return T;const W=T.split("/"),d=u.split("/"),k=d[d.length-1];(k===".."||k===".")&&d.push("");let K=W.length-1,S,I;for(S=0;S<d.length;S++)if(I=d[S],I!==".")if(I==="..")K>1&&K--;else break;return W.slice(0,K).join("/")+"/"+d.slice(S-(S===d.length?1:0)).join("/")}var a0;(function(u){u.pop="pop",u.push="push"})(a0||(a0={}));var $g;(function(u){u.back="back",u.forward="forward",u.unknown=""})($g||($g={}));function MM(u){if(!u)if(lm){const T=document.querySelector("base");u=T&&T.getAttribute("href")||"/",u=u.replace(/^\w+:\/\/[^\/]+/,"")}else u="/";return u[0]!=="/"&&u[0]!=="#"&&(u="/"+u),EM(u)}const TM=/^[^#]+#/;function SM(u,T){return u.replace(TM,"#")+T}function IM(u,T){const W=document.documentElement.getBoundingClientRect(),d=u.getBoundingClientRect();return{behavior:T.behavior,left:d.left-W.left-(T.left||0),top:d.top-W.top-(T.top||0)}}const ev=()=>({left:window.pageXOffset,top:window.pageYOffset});function RM(u){let T;if("el"in u){const W=u.el,d=typeof W=="string"&&W.startsWith("#"),k=typeof W=="string"?d?document.getElementById(W.slice(1)):document.querySelector(W):W;if(!k)return;T=IM(k,u)}else T=u;"scrollBehavior"in document.documentElement.style?window.scrollTo(T):window.scrollTo(T.left!=null?T.left:window.pageXOffset,T.top!=null?T.top:window.pageYOffset)}function N2(u,T){return(history.state?history.state.position-T:-1)+u}const z1=new Map;function BM(u,T){z1.set(u,T)}function LM(u){const T=z1.get(u);return z1.delete(u),T}let DM=()=>location.protocol+"//"+location.host;function fE(u,T){const{pathname:W,search:d,hash:k}=T,K=u.indexOf("#");if(K>-1){let I=k.includes(u.slice(K))?u.slice(K).length:1,h=k.slice(I);return h[0]!=="/"&&(h="/"+h),O2(h,"")}return O2(W,u)+d+k}function PM(u,T,W,d){let k=[],K=[],S=null;const I=({state:y})=>{const E=fE(u,location),_=W.value,m=T.value;let w=0;if(y){if(W.value=E,T.value=y,S&&S===_){S=null;return}w=m?y.position-m.position:0}else d(E);k.forEach(b=>{b(W.value,_,{delta:w,type:a0.pop,direction:w?w>0?$g.forward:$g.back:$g.unknown})})};function h(){S=W.value}function g(y){k.push(y);const E=()=>{const _=k.indexOf(y);_>-1&&k.splice(_,1)};return K.push(E),E}function C(){const{history:y}=window;!y.state||y.replaceState(Vs({},y.state,{scroll:ev()}),"")}function v(){for(const y of K)y();K=[],window.removeEventListener("popstate",I),window.removeEventListener("beforeunload",C)}return window.addEventListener("popstate",I),window.addEventListener("beforeunload",C,{passive:!0}),{pauseListeners:h,listen:g,destroy:v}}function k2(u,T,W,d=!1,k=!1){return{back:u,current:T,forward:W,replaced:d,position:window.history.length,scroll:k?ev():null}}function OM(u){const{history:T,location:W}=window,d={value:fE(u,W)},k={value:T.state};k.value||K(d.value,{back:null,current:d.value,forward:null,position:T.length-1,replaced:!0,scroll:null},!0);function K(h,g,C){const v=u.indexOf("#"),y=v>-1?(W.host&&document.querySelector("base")?u:u.slice(v))+h:DM()+u+h;try{T[C?"replaceState":"pushState"](g,"",y),k.value=g}catch(E){console.error(E),W[C?"replace":"assign"](y)}}function S(h,g){const C=Vs({},T.state,k2(k.value.back,h,k.value.forward,!0),g,{position:k.value.position});K(h,C,!0),d.value=h}function I(h,g){const C=Vs({},k.value,T.state,{forward:h,scroll:ev()});K(C.current,C,!0);const v=Vs({},k2(d.value,h,null),{position:C.position+1},g);K(h,v,!1),d.value=h}return{location:d,state:k,push:I,replace:S}}function FM(u){u=MM(u);const T=OM(u),W=PM(u,T.state,T.location,T.replace);function d(K,S=!0){S||W.pauseListeners(),history.go(K)}const k=Vs({location:"",base:u,go:d,createHref:SM.bind(null,u)},T,W);return Object.defineProperty(k,"location",{enumerable:!0,get:()=>T.location.value}),Object.defineProperty(k,"state",{enumerable:!0,get:()=>T.state.value}),k}function NM(u){return u=location.host?u||location.pathname+location.search:"",u.includes("#")||(u+="#"),FM(u)}function kM(u){return typeof u=="string"||u&&typeof u=="object"}function pE(u){return typeof u=="string"||typeof u=="symbol"}const Xh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},mE=Symbol("");var U2;(function(u){u[u.aborted=4]="aborted",u[u.cancelled=8]="cancelled",u[u.duplicated=16]="duplicated"})(U2||(U2={}));function vm(u,T){return Vs(new Error,{type:u,[mE]:!0},T)}function eh(u,T){return u instanceof Error&&mE in u&&(T==null||!!(u.type&T))}const G2="[^/]+?",UM={sensitive:!1,strict:!1,start:!0,end:!0},GM=/[.+*?^${}()[\]/\\]/g;function HM(u,T){const W=Vs({},UM,T),d=[];let k=W.start?"^":"";const K=[];for(const g of u){const C=g.length?[]:[90];W.strict&&!g.length&&(k+="/");for(let v=0;v<g.length;v++){const y=g[v];let E=40+(W.sensitive?.25:0);if(y.type===0)v||(k+="/"),k+=y.value.replace(GM,"\\$&"),E+=40;else if(y.type===1){const{value:_,repeatable:m,optional:w,regexp:b}=y;K.push({name:_,repeatable:m,optional:w});const O=b||G2;if(O!==G2){E+=10;try{new RegExp(`(${O})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${_}" (${O}): `+L.message)}}let R=m?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;v||(R=w&&g.length<2?`(?:/${R})`:"/"+R),w&&(R+="?"),k+=R,E+=20,w&&(E+=-8),m&&(E+=-20),O===".*"&&(E+=-50)}C.push(E)}d.push(C)}if(W.strict&&W.end){const g=d.length-1;d[g][d[g].length-1]+=.7000000000000001}W.strict||(k+="/?"),W.end?k+="$":W.strict&&(k+="(?:/|$)");const S=new RegExp(k,W.sensitive?"":"i");function I(g){const C=g.match(S),v={};if(!C)return null;for(let y=1;y<C.length;y++){const E=C[y]||"",_=K[y-1];v[_.name]=E&&_.repeatable?E.split("/"):E}return v}function h(g){let C="",v=!1;for(const y of u){(!v||!C.endsWith("/"))&&(C+="/"),v=!1;for(const E of y)if(E.type===0)C+=E.value;else if(E.type===1){const{value:_,repeatable:m,optional:w}=E,b=_ in g?g[_]:"";if(Lc(b)&&!m)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const O=Lc(b)?b.join("/"):b;if(!O)if(w)y.length<2&&(C.endsWith("/")?C=C.slice(0,-1):v=!0);else throw new Error(`Missing required param "${_}"`);C+=O}}return C||"/"}return{re:S,score:d,keys:K,parse:I,stringify:h}}function zM(u,T){let W=0;for(;W<u.length&&W<T.length;){const d=T[W]-u[W];if(d)return d;W++}return u.length<T.length?u.length===1&&u[0]===40+40?-1:1:u.length>T.length?T.length===1&&T[0]===40+40?1:-1:0}function VM(u,T){let W=0;const d=u.score,k=T.score;for(;W<d.length&&W<k.length;){const K=zM(d[W],k[W]);if(K)return K;W++}if(Math.abs(k.length-d.length)===1){if(H2(d))return 1;if(H2(k))return-1}return k.length-d.length}function H2(u){const T=u[u.length-1];return u.length>0&&T[T.length-1]<0}const QM={type:0,value:""},jM=/[a-zA-Z0-9_]/;function WM(u){if(!u)return[[]];if(u==="/")return[[QM]];if(!u.startsWith("/"))throw new Error(`Invalid path "${u}"`);function T(E){throw new Error(`ERR (${W})/"${g}": ${E}`)}let W=0,d=W;const k=[];let K;function S(){K&&k.push(K),K=[]}let I=0,h,g="",C="";function v(){!g||(W===0?K.push({type:0,value:g}):W===1||W===2||W===3?(K.length>1&&(h==="*"||h==="+")&&T(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),K.push({type:1,value:g,regexp:C,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):T("Invalid state to consume buffer"),g="")}function y(){g+=h}for(;I<u.length;){if(h=u[I++],h==="\\"&&W!==2){d=W,W=4;continue}switch(W){case 0:h==="/"?(g&&v(),S()):h===":"?(v(),W=1):y();break;case 4:y(),W=d;break;case 1:h==="("?W=2:jM.test(h)?y():(v(),W=0,h!=="*"&&h!=="?"&&h!=="+"&&I--);break;case 2:h===")"?C[C.length-1]=="\\"?C=C.slice(0,-1)+h:W=3:C+=h;break;case 3:v(),W=0,h!=="*"&&h!=="?"&&h!=="+"&&I--,C="";break;default:T("Unknown state");break}}return W===2&&T(`Unfinished custom RegExp for param "${g}"`),v(),S(),k}function KM(u,T,W){const d=HM(WM(u.path),W),k=Vs(d,{record:u,parent:T,children:[],alias:[]});return T&&!k.record.aliasOf==!T.record.aliasOf&&T.children.push(k),k}function XM(u,T){const W=[],d=new Map;T=Q2({strict:!1,end:!0,sensitive:!1},T);function k(C){return d.get(C)}function K(C,v,y){const E=!y,_=YM(C);_.aliasOf=y&&y.record;const m=Q2(T,C),w=[_];if("alias"in C){const R=typeof C.alias=="string"?[C.alias]:C.alias;for(const L of R)w.push(Vs({},_,{components:y?y.record.components:_.components,path:L,aliasOf:y?y.record:_}))}let b,O;for(const R of w){const{path:L}=R;if(v&&L[0]!=="/"){const P=v.record.path,Y=P[P.length-1]==="/"?"":"/";R.path=v.record.path+(L&&Y+L)}if(b=KM(R,v,m),y?y.alias.push(b):(O=O||b,O!==b&&O.alias.push(b),E&&C.name&&!V2(b)&&S(C.name)),_.children){const P=_.children;for(let Y=0;Y<P.length;Y++)K(P[Y],b,y&&y.children[Y])}y=y||b,(b.record.components&&Object.keys(b.record.components).length||b.record.name||b.record.redirect)&&h(b)}return O?()=>{S(O)}:Zg}function S(C){if(pE(C)){const v=d.get(C);v&&(d.delete(C),W.splice(W.indexOf(v),1),v.children.forEach(S),v.alias.forEach(S))}else{const v=W.indexOf(C);v>-1&&(W.splice(v,1),C.record.name&&d.delete(C.record.name),C.children.forEach(S),C.alias.forEach(S))}}function I(){return W}function h(C){let v=0;for(;v<W.length&&VM(C,W[v])>=0&&(C.record.path!==W[v].record.path||!gE(C,W[v]));)v++;W.splice(v,0,C),C.record.name&&!V2(C)&&d.set(C.record.name,C)}function g(C,v){let y,E={},_,m;if("name"in C&&C.name){if(y=d.get(C.name),!y)throw vm(1,{location:C});m=y.record.name,E=Vs(z2(v.params,y.keys.filter(O=>!O.optional).map(O=>O.name)),C.params&&z2(C.params,y.keys.map(O=>O.name))),_=y.stringify(E)}else if("path"in C)_=C.path,y=W.find(O=>O.re.test(_)),y&&(E=y.parse(_),m=y.record.name);else{if(y=v.name?d.get(v.name):W.find(O=>O.re.test(v.path)),!y)throw vm(1,{location:C,currentLocation:v});m=y.record.name,E=Vs({},v.params,C.params),_=y.stringify(E)}const w=[];let b=y;for(;b;)w.unshift(b.record),b=b.parent;return{name:m,path:_,params:E,matched:w,meta:JM(w)}}return u.forEach(C=>K(C)),{addRoute:K,resolve:g,removeRoute:S,getRoutes:I,getRecordMatcher:k}}function z2(u,T){const W={};for(const d of T)d in u&&(W[d]=u[d]);return W}function YM(u){return{path:u.path,redirect:u.redirect,name:u.name,meta:u.meta||{},aliasOf:void 0,beforeEnter:u.beforeEnter,props:qM(u),children:u.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in u?u.components||null:u.component&&{default:u.component}}}function qM(u){const T={},W=u.props||!1;if("component"in u)T.default=W;else for(const d in u.components)T[d]=typeof W=="object"?W[d]:W;return T}function V2(u){for(;u;){if(u.record.aliasOf)return!0;u=u.parent}return!1}function JM(u){return u.reduce((T,W)=>Vs(T,W.meta),{})}function Q2(u,T){const W={};for(const d in u)W[d]=d in T?T[d]:u[d];return W}function gE(u,T){return T.children.some(W=>W===u||gE(u,W))}const AE=/#/g,ZM=/&/g,$M=/\//g,eT=/=/g,tT=/\?/g,vE=/\+/g,nT=/%5B/g,iT=/%5D/g,yE=/%5E/g,rT=/%60/g,xE=/%7B/g,sT=/%7C/g,EE=/%7D/g,oT=/%20/g;function fy(u){return encodeURI(""+u).replace(sT,"|").replace(nT,"[").replace(iT,"]")}function aT(u){return fy(u).replace(xE,"{").replace(EE,"}").replace(yE,"^")}function V1(u){return fy(u).replace(vE,"%2B").replace(oT,"+").replace(AE,"%23").replace(ZM,"%26").replace(rT,"`").replace(xE,"{").replace(EE,"}").replace(yE,"^")}function lT(u){return V1(u).replace(eT,"%3D")}function cT(u){return fy(u).replace(AE,"%23").replace(tT,"%3F")}function uT(u){return u==null?"":cT(u).replace($M,"%2F")}function HA(u){try{return decodeURIComponent(""+u)}catch{}return""+u}function hT(u){const T={};if(u===""||u==="?")return T;const d=(u[0]==="?"?u.slice(1):u).split("&");for(let k=0;k<d.length;++k){const K=d[k].replace(vE," "),S=K.indexOf("="),I=HA(S<0?K:K.slice(0,S)),h=S<0?null:HA(K.slice(S+1));if(I in T){let g=T[I];Lc(g)||(g=T[I]=[g]),g.push(h)}else T[I]=h}return T}function j2(u){let T="";for(let W in u){const d=u[W];if(W=lT(W),d==null){d!==void 0&&(T+=(T.length?"&":"")+W);continue}(Lc(d)?d.map(K=>K&&V1(K)):[d&&V1(d)]).forEach(K=>{K!==void 0&&(T+=(T.length?"&":"")+W,K!=null&&(T+="="+K))})}return T}function dT(u){const T={};for(const W in u){const d=u[W];d!==void 0&&(T[W]=Lc(d)?d.map(k=>k==null?null:""+k):d==null?d:""+d)}return T}const fT=Symbol(""),W2=Symbol(""),py=Symbol(""),bE=Symbol(""),Q1=Symbol("");function jg(){let u=[];function T(d){return u.push(d),()=>{const k=u.indexOf(d);k>-1&&u.splice(k,1)}}function W(){u=[]}return{add:T,list:()=>u.slice(),reset:W}}function Jh(u,T,W,d,k){const K=d&&(d.enterCallbacks[k]=d.enterCallbacks[k]||[]);return()=>new Promise((S,I)=>{const h=v=>{v===!1?I(vm(4,{from:W,to:T})):v instanceof Error?I(v):kM(v)?I(vm(2,{from:T,to:v})):(K&&d.enterCallbacks[k]===K&&typeof v=="function"&&K.push(v),S())},g=u.call(d&&d.instances[k],T,W,h);let C=Promise.resolve(g);u.length<3&&(C=C.then(h)),C.catch(v=>I(v))})}function C1(u,T,W,d){const k=[];for(const K of u)for(const S in K.components){let I=K.components[S];if(!(T!=="beforeRouteEnter"&&!K.instances[S]))if(pT(I)){const g=(I.__vccOpts||I)[T];g&&k.push(Jh(g,W,d,K,S))}else{let h=I();k.push(()=>h.then(g=>{if(!g)return Promise.reject(new Error(`Couldn't resolve component "${S}" at "${K.path}"`));const C=yM(g)?g.default:g;K.components[S]=C;const y=(C.__vccOpts||C)[T];return y&&Jh(y,W,d,K,S)()}))}}return k}function pT(u){return typeof u=="object"||"displayName"in u||"props"in u||"__vccOpts"in u}function K2(u){const T=uu(py),W=uu(bE),d=$l(()=>T.resolve(dm(u.to))),k=$l(()=>{const{matched:h}=d.value,{length:g}=h,C=h[g-1],v=W.matched;if(!C||!v.length)return-1;const y=v.findIndex(Am.bind(null,C));if(y>-1)return y;const E=X2(h[g-2]);return g>1&&X2(C)===E&&v[v.length-1].path!==E?v.findIndex(Am.bind(null,h[g-2])):y}),K=$l(()=>k.value>-1&&vT(W.params,d.value.params)),S=$l(()=>k.value>-1&&k.value===W.matched.length-1&&dE(W.params,d.value.params));function I(h={}){return AT(h)?T[dm(u.replace)?"replace":"push"](dm(u.to)).catch(Zg):Promise.resolve()}return{route:d,href:$l(()=>d.value.href),isActive:K,isExactActive:S,navigate:I}}const mT=Bx({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:K2,setup(u,{slots:T}){const W=l0(K2(u)),{options:d}=uu(py),k=$l(()=>({[Y2(u.activeClass,d.linkActiveClass,"router-link-active")]:W.isActive,[Y2(u.exactActiveClass,d.linkExactActiveClass,"router-link-exact-active")]:W.isExactActive}));return()=>{const K=T.default&&T.default(W);return u.custom?K:Xx("a",{"aria-current":W.isExactActive?u.ariaCurrentValue:null,href:W.href,onClick:W.navigate,class:k.value},K)}}}),gT=mT;function AT(u){if(!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)&&!u.defaultPrevented&&!(u.button!==void 0&&u.button!==0)){if(u.currentTarget&&u.currentTarget.getAttribute){const T=u.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(T))return}return u.preventDefault&&u.preventDefault(),!0}}function vT(u,T){for(const W in T){const d=T[W],k=u[W];if(typeof d=="string"){if(d!==k)return!1}else if(!Lc(k)||k.length!==d.length||d.some((K,S)=>K!==k[S]))return!1}return!0}function X2(u){return u?u.aliasOf?u.aliasOf.path:u.path:""}const Y2=(u,T,W)=>u!=null?u:T!=null?T:W,yT=Bx({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(u,{attrs:T,slots:W}){const d=uu(Q1),k=$l(()=>u.route||d.value),K=uu(W2,0),S=$l(()=>{let g=dm(K);const{matched:C}=k.value;let v;for(;(v=C[g])&&!v.components;)g++;return g}),I=$l(()=>k.value.matched[S.value]);PA(W2,$l(()=>S.value+1)),PA(fT,I),PA(Q1,k);const h=ry();return Xg(()=>[h.value,I.value,u.name],([g,C,v],[y,E,_])=>{C&&(C.instances[v]=g,E&&E!==C&&g&&g===y&&(C.leaveGuards.size||(C.leaveGuards=E.leaveGuards),C.updateGuards.size||(C.updateGuards=E.updateGuards))),g&&C&&(!E||!Am(C,E)||!y)&&(C.enterCallbacks[v]||[]).forEach(m=>m(g))},{flush:"post"}),()=>{const g=k.value,C=u.name,v=I.value,y=v&&v.components[C];if(!y)return q2(W.default,{Component:y,route:g});const E=v.props[C],_=E?E===!0?g.params:typeof E=="function"?E(g):E:null,w=Xx(y,Vs({},_,T,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(v.instances[C]=null)},ref:h}));return q2(W.default,{Component:w,route:g})||w}}});function q2(u,T){if(!u)return null;const W=u(T);return W.length===1?W[0]:W}const xT=yT;function ET(u){const T=XM(u.routes,u),W=u.parseQuery||hT,d=u.stringifyQuery||j2,k=u.history,K=jg(),S=jg(),I=jg(),h=Y_(Xh);let g=Xh;lm&&u.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const C=_1.bind(null,at=>""+at),v=_1.bind(null,uT),y=_1.bind(null,HA);function E(at,Gt){let wt,Yt;return pE(at)?(wt=T.getRecordMatcher(at),Yt=Gt):Yt=at,T.addRoute(Yt,wt)}function _(at){const Gt=T.getRecordMatcher(at);Gt&&T.removeRoute(Gt)}function m(){return T.getRoutes().map(at=>at.record)}function w(at){return!!T.getRecordMatcher(at)}function b(at,Gt){if(Gt=Vs({},Gt||h.value),typeof at=="string"){const At=w1(W,at,Gt.path),Bt=T.resolve({path:At.path},Gt),Pt=k.createHref(At.fullPath);return Vs(At,Bt,{params:y(Bt.params),hash:HA(At.hash),redirectedFrom:void 0,href:Pt})}let wt;if("path"in at)wt=Vs({},at,{path:w1(W,at.path,Gt.path).path});else{const At=Vs({},at.params);for(const Bt in At)At[Bt]==null&&delete At[Bt];wt=Vs({},at,{params:v(At)}),Gt.params=v(Gt.params)}const Yt=T.resolve(wt,Gt),Mn=at.hash||"";Yt.params=C(y(Yt.params));const je=bM(d,Vs({},at,{hash:aT(Mn),path:Yt.path})),rt=k.createHref(je);return Vs({fullPath:je,hash:Mn,query:d===j2?dT(at.query):at.query||{}},Yt,{redirectedFrom:void 0,href:rt})}function O(at){return typeof at=="string"?w1(W,at,h.value.path):Vs({},at)}function R(at,Gt){if(g!==at)return vm(8,{from:Gt,to:at})}function L(at){return J(at)}function P(at){return L(Vs(O(at),{replace:!0}))}function Y(at){const Gt=at.matched[at.matched.length-1];if(Gt&&Gt.redirect){const{redirect:wt}=Gt;let Yt=typeof wt=="function"?wt(at):wt;return typeof Yt=="string"&&(Yt=Yt.includes("?")||Yt.includes("#")?Yt=O(Yt):{path:Yt},Yt.params={}),Vs({query:at.query,hash:at.hash,params:"path"in Yt?{}:at.params},Yt)}}function J(at,Gt){const wt=g=b(at),Yt=h.value,Mn=at.state,je=at.force,rt=at.replace===!0,At=Y(wt);if(At)return J(Vs(O(At),{state:typeof At=="object"?Vs({},Mn,At.state):Mn,force:je,replace:rt}),Gt||wt);const Bt=wt;Bt.redirectedFrom=Gt;let Pt;return!je&&_M(d,Yt,wt)&&(Pt=vm(16,{to:Bt,from:Yt}),Ae(Yt,Yt,!0,!1)),(Pt?Promise.resolve(Pt):te(Bt,Yt)).catch(qt=>eh(qt)?eh(qt,2)?qt:fe(qt):z(qt,Bt,Yt)).then(qt=>{if(qt){if(eh(qt,2))return J(Vs({replace:rt},O(qt.to),{state:typeof qt.to=="object"?Vs({},Mn,qt.to.state):Mn,force:je}),Gt||Bt)}else qt=xe(Bt,Yt,!0,rt,Mn);return ue(Bt,Yt,qt),qt})}function j(at,Gt){const wt=R(at,Gt);return wt?Promise.reject(wt):Promise.resolve()}function U(at){const Gt=Ge.values().next().value;return Gt&&typeof Gt.runWithContext=="function"?Gt.runWithContext(at):at()}function te(at,Gt){let wt;const[Yt,Mn,je]=bT(at,Gt);wt=C1(Yt.reverse(),"beforeRouteLeave",at,Gt);for(const At of Yt)At.leaveGuards.forEach(Bt=>{wt.push(Jh(Bt,at,Gt))});const rt=j.bind(null,at,Gt);return wt.push(rt),xt(wt).then(()=>{wt=[];for(const At of K.list())wt.push(Jh(At,at,Gt));return wt.push(rt),xt(wt)}).then(()=>{wt=C1(Mn,"beforeRouteUpdate",at,Gt);for(const At of Mn)At.updateGuards.forEach(Bt=>{wt.push(Jh(Bt,at,Gt))});return wt.push(rt),xt(wt)}).then(()=>{wt=[];for(const At of je)if(At.beforeEnter)if(Lc(At.beforeEnter))for(const Bt of At.beforeEnter)wt.push(Jh(Bt,at,Gt));else wt.push(Jh(At.beforeEnter,at,Gt));return wt.push(rt),xt(wt)}).then(()=>(at.matched.forEach(At=>At.enterCallbacks={}),wt=C1(je,"beforeRouteEnter",at,Gt),wt.push(rt),xt(wt))).then(()=>{wt=[];for(const At of S.list())wt.push(Jh(At,at,Gt));return wt.push(rt),xt(wt)}).catch(At=>eh(At,8)?At:Promise.reject(At))}function ue(at,Gt,wt){I.list().forEach(Yt=>U(()=>Yt(at,Gt,wt)))}function xe(at,Gt,wt,Yt,Mn){const je=R(at,Gt);if(je)return je;const rt=Gt===Xh,At=lm?history.state:{};wt&&(Yt||rt?k.replace(at.fullPath,Vs({scroll:rt&&At&&At.scroll},Mn)):k.push(at.fullPath,Mn)),h.value=at,Ae(at,Gt,wt,rt),fe()}let Ee;function V(){Ee||(Ee=k.listen((at,Gt,wt)=>{if(!ht.listening)return;const Yt=b(at),Mn=Y(Yt);if(Mn){J(Vs(Mn,{replace:!0}),Yt).catch(Zg);return}g=Yt;const je=h.value;lm&&BM(N2(je.fullPath,wt.delta),ev()),te(Yt,je).catch(rt=>eh(rt,12)?rt:eh(rt,2)?(J(rt.to,Yt).then(At=>{eh(At,20)&&!wt.delta&&wt.type===a0.pop&&k.go(-1,!1)}).catch(Zg),Promise.reject()):(wt.delta&&k.go(-wt.delta,!1),z(rt,Yt,je))).then(rt=>{rt=rt||xe(Yt,je,!1),rt&&(wt.delta&&!eh(rt,8)?k.go(-wt.delta,!1):wt.type===a0.pop&&eh(rt,20)&&k.go(-1,!1)),ue(Yt,je,rt)}).catch(Zg)}))}let q=jg(),Q=jg(),F;function z(at,Gt,wt){fe(at);const Yt=Q.list();return Yt.length?Yt.forEach(Mn=>Mn(at,Gt,wt)):console.error(at),Promise.reject(at)}function X(){return F&&h.value!==Xh?Promise.resolve():new Promise((at,Gt)=>{q.add([at,Gt])})}function fe(at){return F||(F=!at,V(),q.list().forEach(([Gt,wt])=>at?wt(at):Gt()),q.reset()),at}function Ae(at,Gt,wt,Yt){const{scrollBehavior:Mn}=u;if(!lm||!Mn)return Promise.resolve();const je=!wt&&LM(N2(at.fullPath,0))||(Yt||!wt)&&history.state&&history.state.scroll||null;return oy().then(()=>Mn(at,Gt,je)).then(rt=>rt&&RM(rt)).catch(rt=>z(rt,at,Gt))}const Se=at=>k.go(at);let Be;const Ge=new Set,ht={currentRoute:h,listening:!0,addRoute:E,removeRoute:_,hasRoute:w,getRoutes:m,resolve:b,options:u,push:L,replace:P,go:Se,back:()=>Se(-1),forward:()=>Se(1),beforeEach:K.add,beforeResolve:S.add,afterEach:I.add,onError:Q.add,isReady:X,install(at){const Gt=this;at.component("RouterLink",gT),at.component("RouterView",xT),at.config.globalProperties.$router=Gt,Object.defineProperty(at.config.globalProperties,"$route",{enumerable:!0,get:()=>dm(h)}),lm&&!Be&&h.value===Xh&&(Be=!0,L(k.location).catch(Mn=>{}));const wt={};for(const Mn in Xh)Object.defineProperty(wt,Mn,{get:()=>h.value[Mn],enumerable:!0});at.provide(py,Gt),at.provide(bE,gx(wt)),at.provide(Q1,h);const Yt=at.unmount;Ge.add(at),at.unmount=function(){Ge.delete(at),Ge.size<1&&(g=Xh,Ee&&Ee(),Ee=null,h.value=Xh,Be=!1,F=!1),Yt()}}};function xt(at){return at.reduce((Gt,wt)=>Gt.then(()=>U(wt)),Promise.resolve())}return ht}function bT(u,T){const W=[],d=[],k=[],K=Math.max(T.matched.length,u.matched.length);for(let S=0;S<K;S++){const I=T.matched[S];I&&(u.matched.find(g=>Am(g,I))?d.push(I):W.push(I));const h=u.matched[S];h&&(T.matched.find(g=>Am(g,h))||k.push(h))}return[W,d,k]}const _T={name:"FilterTag",props:["tag"],setup(){return{store:id()}},methods:{selectFilter(){if(this.amICurrentFilter())this.store.selectFilter(null);else{let u=this.tag.term_id;this.store.selectFilter(u)}},amICurrentFilter(){return this.store.currentFilter==this.tag.term_id}}};function wT(u,T,W,d,k,K){return Hr(),Ps("li",null,[mr("button",{class:nd(["filter-tag",{"is-current":K.amICurrentFilter()}]),onClick:T[0]||(T[0]=(...S)=>K.selectFilter&&K.selectFilter(...S))},T1(W.tag.name),3)])}const CT=rl(_T,[["render",wT]]),MT={name:"TheFilter",components:{FilterTag:CT},data(){return{isOpen:!1}},setup(){return{store:id()}},methods:{toggleFilter(){this.isOpen=!this.isOpen}}},TT=mr("span",{class:"a11y-hidden"},"Filter",-1),ST=mr("svg",{class:"filter-icon",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512"},[mr("path",{d:"M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"})],-1),IT=[TT,ST],RT={key:0,class:"filter-inner"},BT={class:"filter-menu"};function LT(u,T,W,d,k,K){const S=bo("FilterTag");return Hr(),Ps("div",{class:nd(["filter",{"is-open":k.isOpen}])},[mr("button",{type:"button",class:"filter-toggle",onClick:T[0]||(T[0]=(...I)=>K.toggleFilter&&K.toggleFilter(...I))},IT),k.isOpen?(Hr(),Ps("div",RT,[mr("menu",BT,[(Hr(!0),Ps(Va,null,L1(d.store.allTags,I=>(Hr(),nl(S,{key:I.term_id,tag:I},null,8,["tag"]))),128))])])):If("",!0)],2)}const DT=rl(MT,[["render",LT]]),PT={name:"TrollfieldHomeView",components:{TheFilter:DT}};function OT(u,T,W,d,k,K){const S=bo("TheFilter");return Hr(),Ps("div",null,[ys(S)])}const FT=rl(PT,[["render",OT]]),NT={name:"TrollfieldSingleView",components:{},setup(){return{store:id()}},created(){},computed:{item(){return this.store.getPostBySlug(this.$route.params.slug)},isExternal(){const u=parseInt(window.wpData.link_tag_id,10);return this.item.tags.includes(u)},isText(){const u=parseInt(window.wpData.text_tag_id,10);return this.item.tags.includes(u)},isDocument(){const u=parseInt(window.wpData.document_tag_id,10);return console.log("is docuemnt",this.item.tags),this.item.tags.includes(u)}},methods:{showPDF(){let u=document.querySelector(".wp-block-file__embed");u&&u.hidden&&(u.hidden=!1)}}},kT={key:0,class:"single-view"},UT=mr("span",{class:"a11y-hidden"},"Close",-1),GT=mr("svg",{viewBox:"0 0 384 512"},[mr("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1),HT={key:0,class:"single-content-wrapper"},zT=["innerHTML"],VT=["href"],QT={key:1,class:"single-content-wrapper"},jT=["innerHTML"],WT=["href"],KT={key:2,class:"single-content-wrapper"},XT=["innerHTML"],YT=["innerHTML"],qT=["innerHTML"],JT=["innerHTML"];function ZT(u,T,W,d,k,K){const S=bo("router-link");return K.item&&K.item.title?(Hr(),Ps("div",kT,[ys(S,{to:"/",class:"close-btn"},{default:Dl(()=>[UT,GT]),_:1}),K.isExternal?(Hr(),Ps("div",HT,[mr("h3",{innerHTML:K.item.title.rendered,class:"a11y-hidden"},null,8,zT),mr("a",{href:K.item.meta.external_link,class:"external-link",target:"_blank",referrerpolicy:"no-referrer"},T1(K.item.title.rendered),9,VT)])):K.isDocument?(Hr(),Ps("div",QT,[mr("h3",{innerHTML:K.item.title.rendered,class:"a11y-hidden"},null,8,jT),mr("a",{href:K.item.meta.external_link,class:"external-link",target:"_blank",referrerpolicy:"no-referrer"},T1(K.item.title.rendered),9,WT)])):K.isText?(Hr(),Ps("div",KT,[mr("h1",{innerHTML:K.item.title.rendered},null,8,XT),mr("div",{innerHTML:K.item.content.rendered},null,8,YT)])):(Hr(),Ps(Va,{key:3},[mr("h3",{innerHTML:K.item.title.rendered,class:"a11y-hidden"},null,8,qT),mr("div",{innerHTML:K.item.content.rendered,class:"single-content-wrapper"},null,8,JT)],64))])):If("",!0)}const $T=rl(NT,[["render",ZT]]),eS={name:"TrollfieldSinglePageView",components:{LoadSpinner:$x},data(){return{page:null,isLoading:!1}},setup(){return{store:id()}},async created(){this.isLoading=!0,this.store.aboutPage?(this.page=this.store.aboutPage,this.isLoading=!1):(this.page=await this.store.fetchAbout(`${window.wpData.rest_url}/wp/v2/pages/${window.wpData.about_page_id}`),this.isLoading=!1)},computed:{}},tS={class:"single-view"},nS=mr("span",{class:"a11y-hidden"},"Close",-1),iS=mr("svg",{viewBox:"0 0 384 512"},[mr("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1),rS={key:0,class:"single-content-wrapper",style:{"text-align":"center"}},sS={key:1,class:"single-content-wrapper"},oS=["innerHTML"],aS=["innerHTML"];function lS(u,T,W,d,k,K){const S=bo("router-link"),I=bo("LoadSpinner");return Hr(),Ps("div",tS,[ys(S,{to:"/",class:"close-btn"},{default:Dl(()=>[nS,iS]),_:1}),k.isLoading?(Hr(),Ps("div",rS,[ys(I)])):(Hr(),Ps("div",sS,[mr("h1",{innerHTML:k.page.title.rendered},null,8,oS),mr("div",{innerHTML:k.page.content.rendered},null,8,aS)]))])}const cS=rl(eS,[["render",lS]]),uS=[{path:"/",component:FT},{path:"/page/:id",component:cS},{path:"/:slug",component:$T}],_E=ET({history:NM(),routes:uS});window.vueRouter=_E;var hS={exports:{}};(function(u,T){(function(d,k){u.exports=k()})(self,()=>(()=>{var W={"./node_modules/@ungap/custom-elements/index.js":()=>{/*! (c) Andrea Giammarchi @webreflection ISC */(function(){var S=function(vn,Ft){var yn=function(bi){for(var Pi=0,Zi=bi.length;Pi<Zi;Pi++)Gn(bi[Pi])},Gn=function(bi){var Pi=bi.target,Zi=bi.attributeName,Dr=bi.oldValue;Pi.attributeChangedCallback(Zi,Dr,Pi.getAttribute(Zi))};return function(Dn,bi){var Pi=Dn.constructor.observedAttributes;return Pi&&vn(bi).then(function(){new Ft(yn).observe(Dn,{attributes:!0,attributeOldValue:!0,attributeFilter:Pi});for(var Zi=0,Dr=Pi.length;Zi<Dr;Zi++)Dn.hasAttribute(Pi[Zi])&&Gn({target:Dn,attributeName:Pi[Zi],oldValue:null})}),Dn}};function I(vn,Ft){if(!!vn){if(typeof vn=="string")return h(vn,Ft);var yn=Object.prototype.toString.call(vn).slice(8,-1);if(yn==="Object"&&vn.constructor&&(yn=vn.constructor.name),yn==="Map"||yn==="Set")return Array.from(vn);if(yn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yn))return h(vn,Ft)}}function h(vn,Ft){(Ft==null||Ft>vn.length)&&(Ft=vn.length);for(var yn=0,Gn=new Array(Ft);yn<Ft;yn++)Gn[yn]=vn[yn];return Gn}function g(vn,Ft){var yn=typeof Symbol<"u"&&vn[Symbol.iterator]||vn["@@iterator"];if(!yn){if(Array.isArray(vn)||(yn=I(vn))||Ft&&vn&&typeof vn.length=="number"){yn&&(vn=yn);var Gn=0,Dn=function(){};return{s:Dn,n:function(){return Gn>=vn.length?{done:!0}:{done:!1,value:vn[Gn++]}},e:function(Dr){throw Dr},f:Dn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bi=!0,Pi=!1,Zi;return{s:function(){yn=yn.call(vn)},n:function(){var Dr=yn.next();return bi=Dr.done,Dr},e:function(Dr){Pi=!0,Zi=Dr},f:function(){try{!bi&&yn.return!=null&&yn.return()}finally{if(Pi)throw Zi}}}}/*! (c) Andrea Giammarchi - ISC */var C=!0,v=!1,y="querySelectorAll",E=function(Ft){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,Gn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MutationObserver,Dn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["*"],bi=function Dr(Ki,zr,Pr,ar,Qr,xs){var Qe=g(Ki),ut;try{for(Qe.s();!(ut=Qe.n()).done;){var _t=ut.value;(xs||y in _t)&&(Qr?Pr.has(_t)||(Pr.add(_t),ar.delete(_t),Ft(_t,Qr)):ar.has(_t)||(ar.add(_t),Pr.delete(_t),Ft(_t,Qr)),xs||Dr(_t[y](zr),zr,Pr,ar,Qr,C))}}catch(nn){Qe.e(nn)}finally{Qe.f()}},Pi=new Gn(function(Dr){if(Dn.length){var Ki=Dn.join(","),zr=new Set,Pr=new Set,ar=g(Dr),Qr;try{for(ar.s();!(Qr=ar.n()).done;){var xs=Qr.value,Qe=xs.addedNodes,ut=xs.removedNodes;bi(ut,Ki,zr,Pr,v,v),bi(Qe,Ki,zr,Pr,C,v)}}catch(_t){ar.e(_t)}finally{ar.f()}}}),Zi=Pi.observe;return(Pi.observe=function(Dr){return Zi.call(Pi,Dr,{subtree:C,childList:C})})(yn),Pi},_="querySelectorAll",m=self,w=m.document,b=m.Element,O=m.MutationObserver,R=m.Set,L=m.WeakMap,P=function(Ft){return _ in Ft},Y=[].filter,J=function(vn){var Ft=new L,yn=function(ar){for(var Qr=0,xs=ar.length;Qr<xs;Qr++)Ft.delete(ar[Qr])},Gn=function(){for(var ar=Ki.takeRecords(),Qr=0,xs=ar.length;Qr<xs;Qr++)Pi(Y.call(ar[Qr].removedNodes,P),!1),Pi(Y.call(ar[Qr].addedNodes,P),!0)},Dn=function(ar){return ar.matches||ar.webkitMatchesSelector||ar.msMatchesSelector},bi=function(ar,Qr){var xs;if(Qr)for(var Qe,ut=Dn(ar),_t=0,nn=Zi.length;_t<nn;_t++)ut.call(ar,Qe=Zi[_t])&&(Ft.has(ar)||Ft.set(ar,new R),xs=Ft.get(ar),xs.has(Qe)||(xs.add(Qe),vn.handle(ar,Qr,Qe)));else Ft.has(ar)&&(xs=Ft.get(ar),Ft.delete(ar),xs.forEach(function(Wt){vn.handle(ar,Qr,Wt)}))},Pi=function(ar){for(var Qr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,xs=0,Qe=ar.length;xs<Qe;xs++)bi(ar[xs],Qr)},Zi=vn.query,Dr=vn.root||w,Ki=E(bi,Dr,O,Zi),zr=b.prototype.attachShadow;return zr&&(b.prototype.attachShadow=function(Pr){var ar=zr.call(this,Pr);return Ki.observe(ar),ar}),Zi.length&&Pi(Dr[_](Zi)),{drop:yn,flush:Gn,observer:Ki,parse:Pi}},j=self,U=j.document,te=j.Map,ue=j.MutationObserver,xe=j.Object,Ee=j.Set,V=j.WeakMap,q=j.Element,Q=j.HTMLElement,F=j.Node,z=j.Error,X=j.TypeError,fe=j.Reflect,Ae=xe.defineProperty,Se=xe.keys,Be=xe.getOwnPropertyNames,Ge=xe.setPrototypeOf,ht=!self.customElements,xt=function(Ft){for(var yn=Se(Ft),Gn=[],Dn=yn.length,bi=0;bi<Dn;bi++)Gn[bi]=Ft[yn[bi]],delete Ft[yn[bi]];return function(){for(var Pi=0;Pi<Dn;Pi++)Ft[yn[Pi]]=Gn[Pi]}};if(ht){var at=function(){var Ft=this.constructor;if(!wt.has(Ft))throw new X("Illegal constructor");var yn=wt.get(Ft);if(qt)return dn(qt,yn);var Gn=Gt.call(U,yn);return dn(Ge(Gn,Ft.prototype),yn)},Gt=U.createElement,wt=new te,Yt=new te,Mn=new te,je=new te,rt=[],At=function(Ft,yn,Gn){var Dn=Mn.get(Gn);if(yn&&!Dn.isPrototypeOf(Ft)){var bi=xt(Ft);qt=Ge(Ft,Dn);try{new Dn.constructor}finally{qt=null,bi()}}var Pi="".concat(yn?"":"dis","connectedCallback");Pi in Dn&&Ft[Pi]()},Bt=J({query:rt,handle:At}),Pt=Bt.parse,qt=null,un=function(Ft){if(!Yt.has(Ft)){var yn,Gn=new Promise(function(Dn){yn=Dn});Yt.set(Ft,{$:Gn,_:yn})}return Yt.get(Ft).$},dn=S(un,ue);Ae(self,"customElements",{configurable:!0,value:{define:function(Ft,yn){if(je.has(Ft))throw new z('the name "'.concat(Ft,'" has already been used with this registry'));wt.set(yn,Ft),Mn.set(Ft,yn.prototype),je.set(Ft,yn),rt.push(Ft),un(Ft).then(function(){Pt(U.querySelectorAll(Ft))}),Yt.get(Ft)._(yn)},get:function(Ft){return je.get(Ft)},whenDefined:un}}),Ae(at.prototype=Q.prototype,"constructor",{value:at}),Ae(self,"HTMLElement",{configurable:!0,value:at}),Ae(U,"createElement",{configurable:!0,value:function(Ft,yn){var Gn=yn&&yn.is,Dn=Gn?je.get(Gn):je.get(Ft);return Dn?new Dn:Gt.call(U,Ft)}}),"isConnected"in F.prototype||Ae(F.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(ht=!self.customElements.get("extends-li"),ht)try{var bn=function vn(){return self.Reflect.construct(HTMLLIElement,[],vn)};bn.prototype=HTMLLIElement.prototype;var tn="extends-li";self.customElements.define("extends-li",bn,{extends:"li"}),ht=U.createElement("li",{is:tn}).outerHTML.indexOf(tn)<0;var ri=self.customElements,ni=ri.get,zt=ri.whenDefined;Ae(self.customElements,"whenDefined",{configurable:!0,value:function(Ft){var yn=this;return zt.call(this,Ft).then(function(Gn){return Gn||ni.call(yn,Ft)})}})}catch{}if(ht){var Ue=function(Ft){var yn=Oe.get(Ft);Xt(yn.querySelectorAll(this),Ft.isConnected)},Pe=self.customElements,Ye=U.createElement,ze=Pe.define,He=Pe.get,et=Pe.upgrade,Me=fe||{construct:function(Ft){return Ft.call(this)}},Te=Me.construct,Oe=new V,Ze=new Ee,ae=new te,ee=new te,se=new te,Ie=new te,We=[],Ke=[],$e=function(Ft){return Ie.get(Ft)||He.call(Pe,Ft)},Vt=function(Ft,yn,Gn){var Dn=se.get(Gn);if(yn&&!Dn.isPrototypeOf(Ft)){var bi=xt(Ft);Nn=Ge(Ft,Dn);try{new Dn.constructor}finally{Nn=null,bi()}}var Pi="".concat(yn?"":"dis","connectedCallback");Pi in Dn&&Ft[Pi]()},$t=J({query:Ke,handle:Vt}),Xt=$t.parse,jt=J({query:We,handle:function(Ft,yn){Oe.has(Ft)&&(yn?Ze.add(Ft):Ze.delete(Ft),Ke.length&&Ue.call(Ke,Ft))}}),on=jt.parse,In=q.prototype.attachShadow;In&&(q.prototype.attachShadow=function(vn){var Ft=In.call(this,vn);return Oe.set(this,Ft),Ft});var di=function(Ft){if(!ee.has(Ft)){var yn,Gn=new Promise(function(Dn){yn=Dn});ee.set(Ft,{$:Gn,_:yn})}return ee.get(Ft).$},fi=S(di,ue),Nn=null;Be(self).filter(function(vn){return/^HTML.*Element$/.test(vn)}).forEach(function(vn){var Ft=self[vn];function yn(){var Gn=this.constructor;if(!ae.has(Gn))throw new X("Illegal constructor");var Dn=ae.get(Gn),bi=Dn.is,Pi=Dn.tag;if(bi){if(Nn)return fi(Nn,bi);var Zi=Ye.call(U,Pi);return Zi.setAttribute("is",bi),fi(Ge(Zi,Gn.prototype),bi)}else return Te.call(this,Ft,[],Gn)}Ae(yn.prototype=Ft.prototype,"constructor",{value:yn}),Ae(self,vn,{value:yn})}),Ae(U,"createElement",{configurable:!0,value:function(Ft,yn){var Gn=yn&&yn.is;if(Gn){var Dn=Ie.get(Gn);if(Dn&&ae.get(Dn).tag===Ft)return new Dn}var bi=Ye.call(U,Ft);return Gn&&bi.setAttribute("is",Gn),bi}}),Ae(Pe,"get",{configurable:!0,value:$e}),Ae(Pe,"whenDefined",{configurable:!0,value:di}),Ae(Pe,"upgrade",{configurable:!0,value:function(Ft){var yn=Ft.getAttribute("is");if(yn){var Gn=Ie.get(yn);if(Gn){fi(Ge(Ft,Gn.prototype),yn);return}}et.call(Pe,Ft)}}),Ae(Pe,"define",{configurable:!0,value:function(Ft,yn,Gn){if($e(Ft))throw new z("'".concat(Ft,"' has already been defined as a custom element"));var Dn,bi=Gn&&Gn.extends;ae.set(yn,bi?{is:Ft,tag:bi}:{is:"",tag:Ft}),bi?(Dn="".concat(bi,'[is="').concat(Ft,'"]'),se.set(Dn,yn.prototype),Ie.set(Ft,yn),Ke.push(Dn)):(ze.apply(Pe,arguments),We.push(Dn=Ft)),di(Ft).then(function(){bi?(Xt(U.querySelectorAll(Dn)),Ze.forEach(Ue,[Dn])):on(U.querySelectorAll(Dn))}),ee.get(Ft)._(yn)}})}})()},"./node_modules/an-array/index.js":S=>{var I=Object.prototype.toString;S.exports=h;function h(g){return g.BYTES_PER_ELEMENT&&I.call(g.buffer)==="[object ArrayBuffer]"||Array.isArray(g)}},"./node_modules/as-number/index.js":S=>{S.exports=function(h,g){return typeof h=="number"?h:typeof g=="number"?g:0}},"./node_modules/base64-js/index.js":(S,I)=>{I.byteLength=m,I.toByteArray=b,I.fromByteArray=L;for(var h=[],g=[],C=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,E=v.length;y<E;++y)h[y]=v[y],g[v.charCodeAt(y)]=y;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63;function _(P){var Y=P.length;if(Y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var J=P.indexOf("=");J===-1&&(J=Y);var j=J===Y?0:4-J%4;return[J,j]}function m(P){var Y=_(P),J=Y[0],j=Y[1];return(J+j)*3/4-j}function w(P,Y,J){return(Y+J)*3/4-J}function b(P){var Y,J=_(P),j=J[0],U=J[1],te=new C(w(P,j,U)),ue=0,xe=U>0?j-4:j,Ee;for(Ee=0;Ee<xe;Ee+=4)Y=g[P.charCodeAt(Ee)]<<18|g[P.charCodeAt(Ee+1)]<<12|g[P.charCodeAt(Ee+2)]<<6|g[P.charCodeAt(Ee+3)],te[ue++]=Y>>16&255,te[ue++]=Y>>8&255,te[ue++]=Y&255;return U===2&&(Y=g[P.charCodeAt(Ee)]<<2|g[P.charCodeAt(Ee+1)]>>4,te[ue++]=Y&255),U===1&&(Y=g[P.charCodeAt(Ee)]<<10|g[P.charCodeAt(Ee+1)]<<4|g[P.charCodeAt(Ee+2)]>>2,te[ue++]=Y>>8&255,te[ue++]=Y&255),te}function O(P){return h[P>>18&63]+h[P>>12&63]+h[P>>6&63]+h[P&63]}function R(P,Y,J){for(var j,U=[],te=Y;te<J;te+=3)j=(P[te]<<16&16711680)+(P[te+1]<<8&65280)+(P[te+2]&255),U.push(O(j));return U.join("")}function L(P){for(var Y,J=P.length,j=J%3,U=[],te=16383,ue=0,xe=J-j;ue<xe;ue+=te)U.push(R(P,ue,ue+te>xe?xe:ue+te));return j===1?(Y=P[J-1],U.push(h[Y>>2]+h[Y<<4&63]+"==")):j===2&&(Y=(P[J-2]<<8)+P[J-1],U.push(h[Y>>10]+h[Y>>4&63]+h[Y<<2&63]+"=")),U.join("")}},"./node_modules/buffer-equal/index.js":(S,I,h)=>{var g=h("./node_modules/buffer/index.js").Buffer;S.exports=function(C,v){if(!!g.isBuffer(C)&&!!g.isBuffer(v)){if(typeof C.equals=="function")return C.equals(v);if(C.length!==v.length)return!1;for(var y=0;y<C.length;y++)if(C[y]!==v[y])return!1;return!0}}},"./node_modules/buffer/index.js":(S,I,h)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const g=h("./node_modules/base64-js/index.js"),C=h("./node_modules/ieee754/index.js"),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;I.Buffer=m,I.SlowBuffer=te,I.INSPECT_MAX_BYTES=50;const y=2147483647;I.kMaxLength=y,m.TYPED_ARRAY_SUPPORT=E(),!m.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{const ae=new Uint8Array(1),ee={foo:function(){return 42}};return Object.setPrototypeOf(ee,Uint8Array.prototype),Object.setPrototypeOf(ae,ee),ae.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(!!m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(!!m.isBuffer(this))return this.byteOffset}});function _(ae){if(ae>y)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const ee=new Uint8Array(ae);return Object.setPrototypeOf(ee,m.prototype),ee}function m(ae,ee,se){if(typeof ae=="number"){if(typeof ee=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(ae)}return w(ae,ee,se)}m.poolSize=8192;function w(ae,ee,se){if(typeof ae=="string")return L(ae,ee);if(ArrayBuffer.isView(ae))return Y(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(et(ae,ArrayBuffer)||ae&&et(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(et(ae,SharedArrayBuffer)||ae&&et(ae.buffer,SharedArrayBuffer)))return J(ae,ee,se);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ie=ae.valueOf&&ae.valueOf();if(Ie!=null&&Ie!==ae)return m.from(Ie,ee,se);const We=j(ae);if(We)return We;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return m.from(ae[Symbol.toPrimitive]("string"),ee,se);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}m.from=function(ae,ee,se){return w(ae,ee,se)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array);function b(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function O(ae,ee,se){return b(ae),ae<=0?_(ae):ee!==void 0?typeof se=="string"?_(ae).fill(ee,se):_(ae).fill(ee):_(ae)}m.alloc=function(ae,ee,se){return O(ae,ee,se)};function R(ae){return b(ae),_(ae<0?0:U(ae)|0)}m.allocUnsafe=function(ae){return R(ae)},m.allocUnsafeSlow=function(ae){return R(ae)};function L(ae,ee){if((typeof ee!="string"||ee==="")&&(ee="utf8"),!m.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);const se=ue(ae,ee)|0;let Ie=_(se);const We=Ie.write(ae,ee);return We!==se&&(Ie=Ie.slice(0,We)),Ie}function P(ae){const ee=ae.length<0?0:U(ae.length)|0,se=_(ee);for(let Ie=0;Ie<ee;Ie+=1)se[Ie]=ae[Ie]&255;return se}function Y(ae){if(et(ae,Uint8Array)){const ee=new Uint8Array(ae);return J(ee.buffer,ee.byteOffset,ee.byteLength)}return P(ae)}function J(ae,ee,se){if(ee<0||ae.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<ee+(se||0))throw new RangeError('"length" is outside of buffer bounds');let Ie;return ee===void 0&&se===void 0?Ie=new Uint8Array(ae):se===void 0?Ie=new Uint8Array(ae,ee):Ie=new Uint8Array(ae,ee,se),Object.setPrototypeOf(Ie,m.prototype),Ie}function j(ae){if(m.isBuffer(ae)){const ee=U(ae.length)|0,se=_(ee);return se.length===0||ae.copy(se,0,0,ee),se}if(ae.length!==void 0)return typeof ae.length!="number"||Me(ae.length)?_(0):P(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return P(ae.data)}function U(ae){if(ae>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return ae|0}function te(ae){return+ae!=ae&&(ae=0),m.alloc(+ae)}m.isBuffer=function(ee){return ee!=null&&ee._isBuffer===!0&&ee!==m.prototype},m.compare=function(ee,se){if(et(ee,Uint8Array)&&(ee=m.from(ee,ee.offset,ee.byteLength)),et(se,Uint8Array)&&(se=m.from(se,se.offset,se.byteLength)),!m.isBuffer(ee)||!m.isBuffer(se))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ee===se)return 0;let Ie=ee.length,We=se.length;for(let Ke=0,$e=Math.min(Ie,We);Ke<$e;++Ke)if(ee[Ke]!==se[Ke]){Ie=ee[Ke],We=se[Ke];break}return Ie<We?-1:We<Ie?1:0},m.isEncoding=function(ee){switch(String(ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(ee,se){if(!Array.isArray(ee))throw new TypeError('"list" argument must be an Array of Buffers');if(ee.length===0)return m.alloc(0);let Ie;if(se===void 0)for(se=0,Ie=0;Ie<ee.length;++Ie)se+=ee[Ie].length;const We=m.allocUnsafe(se);let Ke=0;for(Ie=0;Ie<ee.length;++Ie){let $e=ee[Ie];if(et($e,Uint8Array))Ke+$e.length>We.length?(m.isBuffer($e)||($e=m.from($e)),$e.copy(We,Ke)):Uint8Array.prototype.set.call(We,$e,Ke);else if(m.isBuffer($e))$e.copy(We,Ke);else throw new TypeError('"list" argument must be an Array of Buffers');Ke+=$e.length}return We};function ue(ae,ee){if(m.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||et(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const se=ae.length,Ie=arguments.length>2&&arguments[2]===!0;if(!Ie&&se===0)return 0;let We=!1;for(;;)switch(ee){case"ascii":case"latin1":case"binary":return se;case"utf8":case"utf-8":return Ue(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se*2;case"hex":return se>>>1;case"base64":return ze(ae).length;default:if(We)return Ie?-1:Ue(ae).length;ee=(""+ee).toLowerCase(),We=!0}}m.byteLength=ue;function xe(ae,ee,se){let Ie=!1;if((ee===void 0||ee<0)&&(ee=0),ee>this.length||((se===void 0||se>this.length)&&(se=this.length),se<=0)||(se>>>=0,ee>>>=0,se<=ee))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return at(this,ee,se);case"utf8":case"utf-8":return Se(this,ee,se);case"ascii":return ht(this,ee,se);case"latin1":case"binary":return xt(this,ee,se);case"base64":return Ae(this,ee,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,ee,se);default:if(Ie)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Ie=!0}}m.prototype._isBuffer=!0;function Ee(ae,ee,se){const Ie=ae[ee];ae[ee]=ae[se],ae[se]=Ie}m.prototype.swap16=function(){const ee=this.length;if(ee%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let se=0;se<ee;se+=2)Ee(this,se,se+1);return this},m.prototype.swap32=function(){const ee=this.length;if(ee%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let se=0;se<ee;se+=4)Ee(this,se,se+3),Ee(this,se+1,se+2);return this},m.prototype.swap64=function(){const ee=this.length;if(ee%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let se=0;se<ee;se+=8)Ee(this,se,se+7),Ee(this,se+1,se+6),Ee(this,se+2,se+5),Ee(this,se+3,se+4);return this},m.prototype.toString=function(){const ee=this.length;return ee===0?"":arguments.length===0?Se(this,0,ee):xe.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(ee){if(!m.isBuffer(ee))throw new TypeError("Argument must be a Buffer");return this===ee?!0:m.compare(this,ee)===0},m.prototype.inspect=function(){let ee="";const se=I.INSPECT_MAX_BYTES;return ee=this.toString("hex",0,se).replace(/(.{2})/g,"$1 ").trim(),this.length>se&&(ee+=" ... "),"<Buffer "+ee+">"},v&&(m.prototype[v]=m.prototype.inspect),m.prototype.compare=function(ee,se,Ie,We,Ke){if(et(ee,Uint8Array)&&(ee=m.from(ee,ee.offset,ee.byteLength)),!m.isBuffer(ee))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ee);if(se===void 0&&(se=0),Ie===void 0&&(Ie=ee?ee.length:0),We===void 0&&(We=0),Ke===void 0&&(Ke=this.length),se<0||Ie>ee.length||We<0||Ke>this.length)throw new RangeError("out of range index");if(We>=Ke&&se>=Ie)return 0;if(We>=Ke)return-1;if(se>=Ie)return 1;if(se>>>=0,Ie>>>=0,We>>>=0,Ke>>>=0,this===ee)return 0;let $e=Ke-We,Vt=Ie-se;const $t=Math.min($e,Vt),Xt=this.slice(We,Ke),jt=ee.slice(se,Ie);for(let on=0;on<$t;++on)if(Xt[on]!==jt[on]){$e=Xt[on],Vt=jt[on];break}return $e<Vt?-1:Vt<$e?1:0};function V(ae,ee,se,Ie,We){if(ae.length===0)return-1;if(typeof se=="string"?(Ie=se,se=0):se>2147483647?se=2147483647:se<-2147483648&&(se=-2147483648),se=+se,Me(se)&&(se=We?0:ae.length-1),se<0&&(se=ae.length+se),se>=ae.length){if(We)return-1;se=ae.length-1}else if(se<0)if(We)se=0;else return-1;if(typeof ee=="string"&&(ee=m.from(ee,Ie)),m.isBuffer(ee))return ee.length===0?-1:q(ae,ee,se,Ie,We);if(typeof ee=="number")return ee=ee&255,typeof Uint8Array.prototype.indexOf=="function"?We?Uint8Array.prototype.indexOf.call(ae,ee,se):Uint8Array.prototype.lastIndexOf.call(ae,ee,se):q(ae,[ee],se,Ie,We);throw new TypeError("val must be string, number or Buffer")}function q(ae,ee,se,Ie,We){let Ke=1,$e=ae.length,Vt=ee.length;if(Ie!==void 0&&(Ie=String(Ie).toLowerCase(),Ie==="ucs2"||Ie==="ucs-2"||Ie==="utf16le"||Ie==="utf-16le")){if(ae.length<2||ee.length<2)return-1;Ke=2,$e/=2,Vt/=2,se/=2}function $t(jt,on){return Ke===1?jt[on]:jt.readUInt16BE(on*Ke)}let Xt;if(We){let jt=-1;for(Xt=se;Xt<$e;Xt++)if($t(ae,Xt)===$t(ee,jt===-1?0:Xt-jt)){if(jt===-1&&(jt=Xt),Xt-jt+1===Vt)return jt*Ke}else jt!==-1&&(Xt-=Xt-jt),jt=-1}else for(se+Vt>$e&&(se=$e-Vt),Xt=se;Xt>=0;Xt--){let jt=!0;for(let on=0;on<Vt;on++)if($t(ae,Xt+on)!==$t(ee,on)){jt=!1;break}if(jt)return Xt}return-1}m.prototype.includes=function(ee,se,Ie){return this.indexOf(ee,se,Ie)!==-1},m.prototype.indexOf=function(ee,se,Ie){return V(this,ee,se,Ie,!0)},m.prototype.lastIndexOf=function(ee,se,Ie){return V(this,ee,se,Ie,!1)};function Q(ae,ee,se,Ie){se=Number(se)||0;const We=ae.length-se;Ie?(Ie=Number(Ie),Ie>We&&(Ie=We)):Ie=We;const Ke=ee.length;Ie>Ke/2&&(Ie=Ke/2);let $e;for($e=0;$e<Ie;++$e){const Vt=parseInt(ee.substr($e*2,2),16);if(Me(Vt))return $e;ae[se+$e]=Vt}return $e}function F(ae,ee,se,Ie){return He(Ue(ee,ae.length-se),ae,se,Ie)}function z(ae,ee,se,Ie){return He(Pe(ee),ae,se,Ie)}function X(ae,ee,se,Ie){return He(ze(ee),ae,se,Ie)}function fe(ae,ee,se,Ie){return He(Ye(ee,ae.length-se),ae,se,Ie)}m.prototype.write=function(ee,se,Ie,We){if(se===void 0)We="utf8",Ie=this.length,se=0;else if(Ie===void 0&&typeof se=="string")We=se,Ie=this.length,se=0;else if(isFinite(se))se=se>>>0,isFinite(Ie)?(Ie=Ie>>>0,We===void 0&&(We="utf8")):(We=Ie,Ie=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ke=this.length-se;if((Ie===void 0||Ie>Ke)&&(Ie=Ke),ee.length>0&&(Ie<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let $e=!1;for(;;)switch(We){case"hex":return Q(this,ee,se,Ie);case"utf8":case"utf-8":return F(this,ee,se,Ie);case"ascii":case"latin1":case"binary":return z(this,ee,se,Ie);case"base64":return X(this,ee,se,Ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,ee,se,Ie);default:if($e)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),$e=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ae(ae,ee,se){return ee===0&&se===ae.length?g.fromByteArray(ae):g.fromByteArray(ae.slice(ee,se))}function Se(ae,ee,se){se=Math.min(ae.length,se);const Ie=[];let We=ee;for(;We<se;){const Ke=ae[We];let $e=null,Vt=Ke>239?4:Ke>223?3:Ke>191?2:1;if(We+Vt<=se){let $t,Xt,jt,on;switch(Vt){case 1:Ke<128&&($e=Ke);break;case 2:$t=ae[We+1],($t&192)===128&&(on=(Ke&31)<<6|$t&63,on>127&&($e=on));break;case 3:$t=ae[We+1],Xt=ae[We+2],($t&192)===128&&(Xt&192)===128&&(on=(Ke&15)<<12|($t&63)<<6|Xt&63,on>2047&&(on<55296||on>57343)&&($e=on));break;case 4:$t=ae[We+1],Xt=ae[We+2],jt=ae[We+3],($t&192)===128&&(Xt&192)===128&&(jt&192)===128&&(on=(Ke&15)<<18|($t&63)<<12|(Xt&63)<<6|jt&63,on>65535&&on<1114112&&($e=on))}}$e===null?($e=65533,Vt=1):$e>65535&&($e-=65536,Ie.push($e>>>10&1023|55296),$e=56320|$e&1023),Ie.push($e),We+=Vt}return Ge(Ie)}const Be=4096;function Ge(ae){const ee=ae.length;if(ee<=Be)return String.fromCharCode.apply(String,ae);let se="",Ie=0;for(;Ie<ee;)se+=String.fromCharCode.apply(String,ae.slice(Ie,Ie+=Be));return se}function ht(ae,ee,se){let Ie="";se=Math.min(ae.length,se);for(let We=ee;We<se;++We)Ie+=String.fromCharCode(ae[We]&127);return Ie}function xt(ae,ee,se){let Ie="";se=Math.min(ae.length,se);for(let We=ee;We<se;++We)Ie+=String.fromCharCode(ae[We]);return Ie}function at(ae,ee,se){const Ie=ae.length;(!ee||ee<0)&&(ee=0),(!se||se<0||se>Ie)&&(se=Ie);let We="";for(let Ke=ee;Ke<se;++Ke)We+=Te[ae[Ke]];return We}function Gt(ae,ee,se){const Ie=ae.slice(ee,se);let We="";for(let Ke=0;Ke<Ie.length-1;Ke+=2)We+=String.fromCharCode(Ie[Ke]+Ie[Ke+1]*256);return We}m.prototype.slice=function(ee,se){const Ie=this.length;ee=~~ee,se=se===void 0?Ie:~~se,ee<0?(ee+=Ie,ee<0&&(ee=0)):ee>Ie&&(ee=Ie),se<0?(se+=Ie,se<0&&(se=0)):se>Ie&&(se=Ie),se<ee&&(se=ee);const We=this.subarray(ee,se);return Object.setPrototypeOf(We,m.prototype),We};function wt(ae,ee,se){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+ee>se)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(ee,se,Ie){ee=ee>>>0,se=se>>>0,Ie||wt(ee,se,this.length);let We=this[ee],Ke=1,$e=0;for(;++$e<se&&(Ke*=256);)We+=this[ee+$e]*Ke;return We},m.prototype.readUintBE=m.prototype.readUIntBE=function(ee,se,Ie){ee=ee>>>0,se=se>>>0,Ie||wt(ee,se,this.length);let We=this[ee+--se],Ke=1;for(;se>0&&(Ke*=256);)We+=this[ee+--se]*Ke;return We},m.prototype.readUint8=m.prototype.readUInt8=function(ee,se){return ee=ee>>>0,se||wt(ee,1,this.length),this[ee]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(ee,se){return ee=ee>>>0,se||wt(ee,2,this.length),this[ee]|this[ee+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(ee,se){return ee=ee>>>0,se||wt(ee,2,this.length),this[ee]<<8|this[ee+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),(this[ee]|this[ee+1]<<8|this[ee+2]<<16)+this[ee+3]*16777216},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),this[ee]*16777216+(this[ee+1]<<16|this[ee+2]<<8|this[ee+3])},m.prototype.readBigUInt64LE=Oe(function(ee){ee=ee>>>0,tn(ee,"offset");const se=this[ee],Ie=this[ee+7];(se===void 0||Ie===void 0)&&ri(ee,this.length-8);const We=se+this[++ee]*2**8+this[++ee]*2**16+this[++ee]*2**24,Ke=this[++ee]+this[++ee]*2**8+this[++ee]*2**16+Ie*2**24;return BigInt(We)+(BigInt(Ke)<<BigInt(32))}),m.prototype.readBigUInt64BE=Oe(function(ee){ee=ee>>>0,tn(ee,"offset");const se=this[ee],Ie=this[ee+7];(se===void 0||Ie===void 0)&&ri(ee,this.length-8);const We=se*2**24+this[++ee]*2**16+this[++ee]*2**8+this[++ee],Ke=this[++ee]*2**24+this[++ee]*2**16+this[++ee]*2**8+Ie;return(BigInt(We)<<BigInt(32))+BigInt(Ke)}),m.prototype.readIntLE=function(ee,se,Ie){ee=ee>>>0,se=se>>>0,Ie||wt(ee,se,this.length);let We=this[ee],Ke=1,$e=0;for(;++$e<se&&(Ke*=256);)We+=this[ee+$e]*Ke;return Ke*=128,We>=Ke&&(We-=Math.pow(2,8*se)),We},m.prototype.readIntBE=function(ee,se,Ie){ee=ee>>>0,se=se>>>0,Ie||wt(ee,se,this.length);let We=se,Ke=1,$e=this[ee+--We];for(;We>0&&(Ke*=256);)$e+=this[ee+--We]*Ke;return Ke*=128,$e>=Ke&&($e-=Math.pow(2,8*se)),$e},m.prototype.readInt8=function(ee,se){return ee=ee>>>0,se||wt(ee,1,this.length),this[ee]&128?(255-this[ee]+1)*-1:this[ee]},m.prototype.readInt16LE=function(ee,se){ee=ee>>>0,se||wt(ee,2,this.length);const Ie=this[ee]|this[ee+1]<<8;return Ie&32768?Ie|4294901760:Ie},m.prototype.readInt16BE=function(ee,se){ee=ee>>>0,se||wt(ee,2,this.length);const Ie=this[ee+1]|this[ee]<<8;return Ie&32768?Ie|4294901760:Ie},m.prototype.readInt32LE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),this[ee]|this[ee+1]<<8|this[ee+2]<<16|this[ee+3]<<24},m.prototype.readInt32BE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),this[ee]<<24|this[ee+1]<<16|this[ee+2]<<8|this[ee+3]},m.prototype.readBigInt64LE=Oe(function(ee){ee=ee>>>0,tn(ee,"offset");const se=this[ee],Ie=this[ee+7];(se===void 0||Ie===void 0)&&ri(ee,this.length-8);const We=this[ee+4]+this[ee+5]*2**8+this[ee+6]*2**16+(Ie<<24);return(BigInt(We)<<BigInt(32))+BigInt(se+this[++ee]*256+this[++ee]*65536+this[++ee]*16777216)}),m.prototype.readBigInt64BE=Oe(function(ee){ee=ee>>>0,tn(ee,"offset");const se=this[ee],Ie=this[ee+7];(se===void 0||Ie===void 0)&&ri(ee,this.length-8);const We=(se<<24)+this[++ee]*2**16+this[++ee]*2**8+this[++ee];return(BigInt(We)<<BigInt(32))+BigInt(this[++ee]*16777216+this[++ee]*65536+this[++ee]*256+Ie)}),m.prototype.readFloatLE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),C.read(this,ee,!0,23,4)},m.prototype.readFloatBE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),C.read(this,ee,!1,23,4)},m.prototype.readDoubleLE=function(ee,se){return ee=ee>>>0,se||wt(ee,8,this.length),C.read(this,ee,!0,52,8)},m.prototype.readDoubleBE=function(ee,se){return ee=ee>>>0,se||wt(ee,8,this.length),C.read(this,ee,!1,52,8)};function Yt(ae,ee,se,Ie,We,Ke){if(!m.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>We||ee<Ke)throw new RangeError('"value" argument is out of bounds');if(se+Ie>ae.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(ee,se,Ie,We){if(ee=+ee,se=se>>>0,Ie=Ie>>>0,!We){const Vt=Math.pow(2,8*Ie)-1;Yt(this,ee,se,Ie,Vt,0)}let Ke=1,$e=0;for(this[se]=ee&255;++$e<Ie&&(Ke*=256);)this[se+$e]=ee/Ke&255;return se+Ie},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(ee,se,Ie,We){if(ee=+ee,se=se>>>0,Ie=Ie>>>0,!We){const Vt=Math.pow(2,8*Ie)-1;Yt(this,ee,se,Ie,Vt,0)}let Ke=Ie-1,$e=1;for(this[se+Ke]=ee&255;--Ke>=0&&($e*=256);)this[se+Ke]=ee/$e&255;return se+Ie},m.prototype.writeUint8=m.prototype.writeUInt8=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,1,255,0),this[se]=ee&255,se+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,2,65535,0),this[se]=ee&255,this[se+1]=ee>>>8,se+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,2,65535,0),this[se]=ee>>>8,this[se+1]=ee&255,se+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,4,4294967295,0),this[se+3]=ee>>>24,this[se+2]=ee>>>16,this[se+1]=ee>>>8,this[se]=ee&255,se+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,4,4294967295,0),this[se]=ee>>>24,this[se+1]=ee>>>16,this[se+2]=ee>>>8,this[se+3]=ee&255,se+4};function Mn(ae,ee,se,Ie,We){bn(ee,Ie,We,ae,se,7);let Ke=Number(ee&BigInt(4294967295));ae[se++]=Ke,Ke=Ke>>8,ae[se++]=Ke,Ke=Ke>>8,ae[se++]=Ke,Ke=Ke>>8,ae[se++]=Ke;let $e=Number(ee>>BigInt(32)&BigInt(4294967295));return ae[se++]=$e,$e=$e>>8,ae[se++]=$e,$e=$e>>8,ae[se++]=$e,$e=$e>>8,ae[se++]=$e,se}function je(ae,ee,se,Ie,We){bn(ee,Ie,We,ae,se,7);let Ke=Number(ee&BigInt(4294967295));ae[se+7]=Ke,Ke=Ke>>8,ae[se+6]=Ke,Ke=Ke>>8,ae[se+5]=Ke,Ke=Ke>>8,ae[se+4]=Ke;let $e=Number(ee>>BigInt(32)&BigInt(4294967295));return ae[se+3]=$e,$e=$e>>8,ae[se+2]=$e,$e=$e>>8,ae[se+1]=$e,$e=$e>>8,ae[se]=$e,se+8}m.prototype.writeBigUInt64LE=Oe(function(ee,se=0){return Mn(this,ee,se,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeBigUInt64BE=Oe(function(ee,se=0){return je(this,ee,se,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeIntLE=function(ee,se,Ie,We){if(ee=+ee,se=se>>>0,!We){const $t=Math.pow(2,8*Ie-1);Yt(this,ee,se,Ie,$t-1,-$t)}let Ke=0,$e=1,Vt=0;for(this[se]=ee&255;++Ke<Ie&&($e*=256);)ee<0&&Vt===0&&this[se+Ke-1]!==0&&(Vt=1),this[se+Ke]=(ee/$e>>0)-Vt&255;return se+Ie},m.prototype.writeIntBE=function(ee,se,Ie,We){if(ee=+ee,se=se>>>0,!We){const $t=Math.pow(2,8*Ie-1);Yt(this,ee,se,Ie,$t-1,-$t)}let Ke=Ie-1,$e=1,Vt=0;for(this[se+Ke]=ee&255;--Ke>=0&&($e*=256);)ee<0&&Vt===0&&this[se+Ke+1]!==0&&(Vt=1),this[se+Ke]=(ee/$e>>0)-Vt&255;return se+Ie},m.prototype.writeInt8=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,1,127,-128),ee<0&&(ee=255+ee+1),this[se]=ee&255,se+1},m.prototype.writeInt16LE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,2,32767,-32768),this[se]=ee&255,this[se+1]=ee>>>8,se+2},m.prototype.writeInt16BE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,2,32767,-32768),this[se]=ee>>>8,this[se+1]=ee&255,se+2},m.prototype.writeInt32LE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,4,2147483647,-2147483648),this[se]=ee&255,this[se+1]=ee>>>8,this[se+2]=ee>>>16,this[se+3]=ee>>>24,se+4},m.prototype.writeInt32BE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,4,2147483647,-2147483648),ee<0&&(ee=4294967295+ee+1),this[se]=ee>>>24,this[se+1]=ee>>>16,this[se+2]=ee>>>8,this[se+3]=ee&255,se+4},m.prototype.writeBigInt64LE=Oe(function(ee,se=0){return Mn(this,ee,se,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeBigInt64BE=Oe(function(ee,se=0){return je(this,ee,se,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function rt(ae,ee,se,Ie,We,Ke){if(se+Ie>ae.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("Index out of range")}function At(ae,ee,se,Ie,We){return ee=+ee,se=se>>>0,We||rt(ae,ee,se,4),C.write(ae,ee,se,Ie,23,4),se+4}m.prototype.writeFloatLE=function(ee,se,Ie){return At(this,ee,se,!0,Ie)},m.prototype.writeFloatBE=function(ee,se,Ie){return At(this,ee,se,!1,Ie)};function Bt(ae,ee,se,Ie,We){return ee=+ee,se=se>>>0,We||rt(ae,ee,se,8),C.write(ae,ee,se,Ie,52,8),se+8}m.prototype.writeDoubleLE=function(ee,se,Ie){return Bt(this,ee,se,!0,Ie)},m.prototype.writeDoubleBE=function(ee,se,Ie){return Bt(this,ee,se,!1,Ie)},m.prototype.copy=function(ee,se,Ie,We){if(!m.isBuffer(ee))throw new TypeError("argument should be a Buffer");if(Ie||(Ie=0),!We&&We!==0&&(We=this.length),se>=ee.length&&(se=ee.length),se||(se=0),We>0&&We<Ie&&(We=Ie),We===Ie||ee.length===0||this.length===0)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(Ie<0||Ie>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),ee.length-se<We-Ie&&(We=ee.length-se+Ie);const Ke=We-Ie;return this===ee&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(se,Ie,We):Uint8Array.prototype.set.call(ee,this.subarray(Ie,We),se),Ke},m.prototype.fill=function(ee,se,Ie,We){if(typeof ee=="string"){if(typeof se=="string"?(We=se,se=0,Ie=this.length):typeof Ie=="string"&&(We=Ie,Ie=this.length),We!==void 0&&typeof We!="string")throw new TypeError("encoding must be a string");if(typeof We=="string"&&!m.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(ee.length===1){const $e=ee.charCodeAt(0);(We==="utf8"&&$e<128||We==="latin1")&&(ee=$e)}}else typeof ee=="number"?ee=ee&255:typeof ee=="boolean"&&(ee=Number(ee));if(se<0||this.length<se||this.length<Ie)throw new RangeError("Out of range index");if(Ie<=se)return this;se=se>>>0,Ie=Ie===void 0?this.length:Ie>>>0,ee||(ee=0);let Ke;if(typeof ee=="number")for(Ke=se;Ke<Ie;++Ke)this[Ke]=ee;else{const $e=m.isBuffer(ee)?ee:m.from(ee,We),Vt=$e.length;if(Vt===0)throw new TypeError('The value "'+ee+'" is invalid for argument "value"');for(Ke=0;Ke<Ie-se;++Ke)this[Ke+se]=$e[Ke%Vt]}return this};const Pt={};function qt(ae,ee,se){Pt[ae]=class extends se{constructor(){super(),Object.defineProperty(this,"message",{value:ee.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}qt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),qt("ERR_INVALID_ARG_TYPE",function(ae,ee){return`The "${ae}" argument must be of type number. Received type ${typeof ee}`},TypeError),qt("ERR_OUT_OF_RANGE",function(ae,ee,se){let Ie=`The value of "${ae}" is out of range.`,We=se;return Number.isInteger(se)&&Math.abs(se)>4294967296?We=un(String(se)):typeof se=="bigint"&&(We=String(se),(se>BigInt(2)**BigInt(32)||se<-(BigInt(2)**BigInt(32)))&&(We=un(We)),We+="n"),Ie+=` It must be ${ee}. Received ${We}`,Ie},RangeError);function un(ae){let ee="",se=ae.length;const Ie=ae[0]==="-"?1:0;for(;se>=Ie+4;se-=3)ee=`_${ae.slice(se-3,se)}${ee}`;return`${ae.slice(0,se)}${ee}`}function dn(ae,ee,se){tn(ee,"offset"),(ae[ee]===void 0||ae[ee+se]===void 0)&&ri(ee,ae.length-(se+1))}function bn(ae,ee,se,Ie,We,Ke){if(ae>se||ae<ee){const $e=typeof ee=="bigint"?"n":"";let Vt;throw Ke>3?ee===0||ee===BigInt(0)?Vt=`>= 0${$e} and < 2${$e} ** ${(Ke+1)*8}${$e}`:Vt=`>= -(2${$e} ** ${(Ke+1)*8-1}${$e}) and < 2 ** ${(Ke+1)*8-1}${$e}`:Vt=`>= ${ee}${$e} and <= ${se}${$e}`,new Pt.ERR_OUT_OF_RANGE("value",Vt,ae)}dn(Ie,We,Ke)}function tn(ae,ee){if(typeof ae!="number")throw new Pt.ERR_INVALID_ARG_TYPE(ee,"number",ae)}function ri(ae,ee,se){throw Math.floor(ae)!==ae?(tn(ae,se),new Pt.ERR_OUT_OF_RANGE(se||"offset","an integer",ae)):ee<0?new Pt.ERR_BUFFER_OUT_OF_BOUNDS:new Pt.ERR_OUT_OF_RANGE(se||"offset",`>= ${se?1:0} and <= ${ee}`,ae)}const ni=/[^+/0-9A-Za-z-_]/g;function zt(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(ni,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function Ue(ae,ee){ee=ee||1/0;let se;const Ie=ae.length;let We=null;const Ke=[];for(let $e=0;$e<Ie;++$e){if(se=ae.charCodeAt($e),se>55295&&se<57344){if(!We){if(se>56319){(ee-=3)>-1&&Ke.push(239,191,189);continue}else if($e+1===Ie){(ee-=3)>-1&&Ke.push(239,191,189);continue}We=se;continue}if(se<56320){(ee-=3)>-1&&Ke.push(239,191,189),We=se;continue}se=(We-55296<<10|se-56320)+65536}else We&&(ee-=3)>-1&&Ke.push(239,191,189);if(We=null,se<128){if((ee-=1)<0)break;Ke.push(se)}else if(se<2048){if((ee-=2)<0)break;Ke.push(se>>6|192,se&63|128)}else if(se<65536){if((ee-=3)<0)break;Ke.push(se>>12|224,se>>6&63|128,se&63|128)}else if(se<1114112){if((ee-=4)<0)break;Ke.push(se>>18|240,se>>12&63|128,se>>6&63|128,se&63|128)}else throw new Error("Invalid code point")}return Ke}function Pe(ae){const ee=[];for(let se=0;se<ae.length;++se)ee.push(ae.charCodeAt(se)&255);return ee}function Ye(ae,ee){let se,Ie,We;const Ke=[];for(let $e=0;$e<ae.length&&!((ee-=2)<0);++$e)se=ae.charCodeAt($e),Ie=se>>8,We=se%256,Ke.push(We),Ke.push(Ie);return Ke}function ze(ae){return g.toByteArray(zt(ae))}function He(ae,ee,se,Ie){let We;for(We=0;We<Ie&&!(We+se>=ee.length||We>=ae.length);++We)ee[We+se]=ae[We];return We}function et(ae,ee){return ae instanceof ee||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===ee.name}function Me(ae){return ae!==ae}const Te=function(){const ae="0123456789abcdef",ee=new Array(256);for(let se=0;se<16;++se){const Ie=se*16;for(let We=0;We<16;++We)ee[Ie+We]=ae[se]+ae[We]}return ee}();function Oe(ae){return typeof BigInt>"u"?Ze:ae}function Ze(){throw new Error("BigInt not supported")}},"./node_modules/css-loader/dist/runtime/api.js":S=>{S.exports=function(I){var h=[];return h.toString=function(){return this.map(function(C){var v="",y=typeof C[5]<"u";return C[4]&&(v+="@supports (".concat(C[4],") {")),C[2]&&(v+="@media ".concat(C[2]," {")),y&&(v+="@layer".concat(C[5].length>0?" ".concat(C[5]):""," {")),v+=I(C),y&&(v+="}"),C[2]&&(v+="}"),C[4]&&(v+="}"),v}).join("")},h.i=function(C,v,y,E,_){typeof C=="string"&&(C=[[null,C,void 0]]);var m={};if(y)for(var w=0;w<this.length;w++){var b=this[w][0];b!=null&&(m[b]=!0)}for(var O=0;O<C.length;O++){var R=[].concat(C[O]);y&&m[R[0]]||(typeof _<"u"&&(typeof R[5]>"u"||(R[1]="@layer".concat(R[5].length>0?" ".concat(R[5]):""," {").concat(R[1],"}")),R[5]=_),v&&(R[2]&&(R[1]="@media ".concat(R[2]," {").concat(R[1],"}")),R[2]=v),E&&(R[4]?(R[1]="@supports (".concat(R[4],") {").concat(R[1],"}"),R[4]=E):R[4]="".concat(E)),h.push(R))}},h}},"./node_modules/css-loader/dist/runtime/getUrl.js":S=>{S.exports=function(I,h){return h||(h={}),I&&(I=String(I.__esModule?I.default:I),/^['"].*['"]$/.test(I)&&(I=I.slice(1,-1)),h.hash&&(I+=h.hash),/["'() \t\n]|(%20)/.test(I)||h.needQuotes?'"'.concat(I.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):I)}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":S=>{S.exports=function(I){var h=I[1],g=I[3];if(!g)return h;if(typeof btoa=="function"){var C=btoa(unescape(encodeURIComponent(JSON.stringify(g)))),v="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(C),y="/*# ".concat(v," */");return[h].concat([y]).join(`
`)}return[h].join(`
`)}},"./node_modules/custom-event-polyfill/polyfill.js":()=>{(function(){if(!(typeof window>"u"))try{var S=new window.CustomEvent("test",{cancelable:!0});if(S.preventDefault(),S.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch{var I=function(g,C){var v,y;return C=C||{},C.bubbles=!!C.bubbles,C.cancelable=!!C.cancelable,v=document.createEvent("CustomEvent"),v.initCustomEvent(g,C.bubbles,C.cancelable,C.detail),y=v.preventDefault,v.preventDefault=function(){y.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch{this.defaultPrevented=!0}},v};I.prototype=window.Event.prototype,window.CustomEvent=I}})()},"./node_modules/debug/browser.js":(S,I,h)=>{I=S.exports=h("./node_modules/debug/debug.js"),I.log=v,I.formatArgs=C,I.save=y,I.load=E,I.useColors=g,I.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:_(),I.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function g(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}I.formatters.j=function(m){return JSON.stringify(m)};function C(){var m=arguments,w=this.useColors;if(m[0]=(w?"%c":"")+this.namespace+(w?" %c":" ")+m[0]+(w?"%c ":" "),!w)return m;var b="color: "+this.color;m=[m[0],b,"color: inherit"].concat(Array.prototype.slice.call(m,1));var O=0,R=0;return m[0].replace(/%[a-z%]/g,function(L){L!=="%%"&&(O++,L==="%c"&&(R=O))}),m.splice(R,0,b),m}function v(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function y(m){try{m==null?I.storage.removeItem("debug"):I.storage.debug=m}catch{}}function E(){var m;try{m=I.storage.debug}catch{}return m}I.enable(E());function _(){try{return window.localStorage}catch{}}},"./node_modules/debug/debug.js":(S,I)=>{I=S.exports=C,I.coerce=_,I.disable=y,I.enable=v,I.enabled=E,I.names=[],I.skips=[],I.formatters={};var h=0;function g(){return I.colors[h++%I.colors.length]}function C(m){function w(){}w.enabled=!1;function b(){var R=b;R.useColors==null&&(R.useColors=I.useColors()),R.color==null&&R.useColors&&(R.color=g());var L=Array.prototype.slice.call(arguments);L[0]=I.coerce(L[0]),typeof L[0]!="string"&&(L=["%o"].concat(L));var P=0;L[0]=L[0].replace(/%([a-z%])/g,function(J,j){if(J==="%%")return J;P++;var U=I.formatters[j];if(typeof U=="function"){var te=L[P];J=U.call(R,te),L.splice(P,1),P--}return J}),typeof I.formatArgs=="function"&&(L=I.formatArgs.apply(R,L));var Y=b.log||I.log||console.log.bind(console);Y.apply(R,L)}b.enabled=!0;var O=I.enabled(m)?b:w;return O.namespace=m,O}function v(m){I.save(m);for(var w=(m||"").split(/[\s,]+/),b=w.length,O=0;O<b;O++)!w[O]||(m=w[O].replace(/\*/g,".*?"),m[0]==="-"?I.skips.push(new RegExp("^"+m.substr(1)+"$")):I.names.push(new RegExp("^"+m+"$")))}function y(){I.enable("")}function E(m){var w,b;for(w=0,b=I.skips.length;w<b;w++)if(I.skips[w].test(m))return!1;for(w=0,b=I.names.length;w<b;w++)if(I.names[w].test(m))return!0;return!1}function _(m){return m instanceof Error?m.stack||m.message:m}},"./node_modules/deep-assign/index.js":(S,I,h)=>{var g=h("./node_modules/is-obj/index.js"),C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function y(m){if(m==null)throw new TypeError("Sources cannot be null or undefined");return Object(m)}function E(m,w,b){var O=w[b];if(O!=null){if(C.call(m,b)&&(m[b]===void 0||m[b]===null))throw new TypeError("Cannot convert undefined or null to object ("+b+")");!C.call(m,b)||!g(O)?m[b]=O:m[b]=_(Object(m[b]),w[b])}}function _(m,w){if(m===w)return m;w=Object(w);for(var b in w)C.call(w,b)&&E(m,w,b);if(Object.getOwnPropertySymbols)for(var O=Object.getOwnPropertySymbols(w),R=0;R<O.length;R++)v.call(w,O[R])&&E(m,w,O[R]);return m}S.exports=function(w){w=y(w);for(var b=1;b<arguments.length;b++)_(w,arguments[b]);return w}},"./node_modules/dtype/index.js":S=>{S.exports=function(I){switch(I){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},"./node_modules/flatten-vertex-data/index.js":(S,I,h)=>{var g=h("./node_modules/dtype/index.js");S.exports=C;function C(v,y,E){if(!v)throw new TypeError("must specify data as first parameter");if(E=+(E||0)|0,Array.isArray(v)&&v[0]&&typeof v[0][0]=="number"){var _=v[0].length,m=v.length*_,w,b,O,R;(!y||typeof y=="string")&&(y=new(g(y||"float32"))(m+E));var L=y.length-E;if(m!==L)throw new Error("source length "+m+" ("+_+"x"+v.length+") does not match destination length "+L);for(w=0,O=E;w<v.length;w++)for(b=0;b<_;b++)y[O++]=v[w][b]===null?NaN:v[w][b]}else if(!y||typeof y=="string"){var P=g(y||"float32");if(Array.isArray(v)||y==="array")for(y=new P(v.length+E),w=0,O=E,R=y.length;O<R;O++,w++)y[O]=v[w]===null?NaN:v[w];else E===0?y=new P(v):(y=new P(v.length+E),y.set(v,E))}else y.set(v,E);return y}},"./node_modules/global/window.js":(S,I,h)=>{var g;typeof window<"u"?g=window:typeof h.g<"u"?g=h.g:typeof self<"u"?g=self:g={},S.exports=g},"./node_modules/ieee754/index.js":(S,I)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */I.read=function(h,g,C,v,y){var E,_,m=y*8-v-1,w=(1<<m)-1,b=w>>1,O=-7,R=C?y-1:0,L=C?-1:1,P=h[g+R];for(R+=L,E=P&(1<<-O)-1,P>>=-O,O+=m;O>0;E=E*256+h[g+R],R+=L,O-=8);for(_=E&(1<<-O)-1,E>>=-O,O+=v;O>0;_=_*256+h[g+R],R+=L,O-=8);if(E===0)E=1-b;else{if(E===w)return _?NaN:(P?-1:1)*(1/0);_=_+Math.pow(2,v),E=E-b}return(P?-1:1)*_*Math.pow(2,E-v)},I.write=function(h,g,C,v,y,E){var _,m,w,b=E*8-y-1,O=(1<<b)-1,R=O>>1,L=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=v?0:E-1,Y=v?1:-1,J=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(m=isNaN(g)?1:0,_=O):(_=Math.floor(Math.log(g)/Math.LN2),g*(w=Math.pow(2,-_))<1&&(_--,w*=2),_+R>=1?g+=L/w:g+=L*Math.pow(2,1-R),g*w>=2&&(_++,w/=2),_+R>=O?(m=0,_=O):_+R>=1?(m=(g*w-1)*Math.pow(2,y),_=_+R):(m=g*Math.pow(2,R-1)*Math.pow(2,y),_=0));y>=8;h[C+P]=m&255,P+=Y,m/=256,y-=8);for(_=_<<y|m,b+=y;b>0;h[C+P]=_&255,P+=Y,_/=256,b-=8);h[C+P-Y]|=J*128}},"./node_modules/inherits/inherits_browser.js":S=>{typeof Object.create=="function"?S.exports=function(h,g){g&&(h.super_=g,h.prototype=Object.create(g.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}))}:S.exports=function(h,g){if(g){h.super_=g;var C=function(){};C.prototype=g.prototype,h.prototype=new C,h.prototype.constructor=h}}},"./node_modules/is-buffer/index.js":S=>{/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */S.exports=function(g){return g!=null&&(I(g)||h(g)||!!g._isBuffer)};function I(g){return!!g.constructor&&typeof g.constructor.isBuffer=="function"&&g.constructor.isBuffer(g)}function h(g){return typeof g.readFloatLE=="function"&&typeof g.slice=="function"&&I(g.slice(0,0))}},"./node_modules/is-function/index.js":S=>{S.exports=h;var I=Object.prototype.toString;function h(g){if(!g)return!1;var C=I.call(g);return C==="[object Function]"||typeof g=="function"&&C!=="[object RegExp]"||typeof window<"u"&&(g===window.setTimeout||g===window.alert||g===window.confirm||g===window.prompt)}},"./node_modules/is-obj/index.js":S=>{S.exports=function(I){var h=typeof I;return I!==null&&(h==="object"||h==="function")}},"./node_modules/layout-bmfont-text/index.js":(S,I,h)=>{var g=h("./node_modules/word-wrapper/index.js"),C=h("./node_modules/xtend/immutable.js"),v=h("./node_modules/as-number/index.js"),y=["x","e","a","o","n","s","r","c","u","m","v","w","z"],E=["m","w"],_=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],m="	".charCodeAt(0),w=" ".charCodeAt(0),b=0,O=1,R=2;S.exports=function(q){return new L(q)};function L(V){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(V)}L.prototype.update=function(V){if(V=C({measure:this._measure},V),this._opt=V,this._opt.tabSize=v(this._opt.tabSize,4),!V.font)throw new Error("must provide a valid bitmap font");var q=this.glyphs,Q=V.text||"",F=V.font;this._setupSpaceGlyphs(F);var z=g.lines(Q,V),X=V.width||0;q.length=0;var fe=z.reduce(function(Yt,Mn){return Math.max(Yt,Mn.width,X)},0),Ae=0,Se=0,Be=v(V.lineHeight,F.common.lineHeight),Ge=F.common.base,ht=Be-Ge,xt=V.letterSpacing||0,at=Be*z.length-ht,Gt=xe(this._opt.align);Se-=at,this._width=fe,this._height=at,this._descender=Be-Ge,this._baseline=Ge,this._xHeight=j(F),this._capHeight=te(F),this._lineHeight=Be,this._ascender=Be-ht-this._xHeight;var wt=this;z.forEach(function(Yt,Mn){for(var je=Yt.start,rt=Yt.end,At=Yt.width,Bt,Pt=je;Pt<rt;Pt++){var qt=Q.charCodeAt(Pt),un=wt.getGlyph(F,qt);if(un){Bt&&(Ae+=ue(F,Bt.id,un.id));var dn=Ae;Gt===O?dn+=(fe-At)/2:Gt===R&&(dn+=fe-At),q.push({position:[dn,Se],data:un,index:Pt,line:Mn}),Ae+=un.xadvance+xt,Bt=un}}Se+=Be,Ae=0}),this._linesTotal=z.length},L.prototype._setupSpaceGlyphs=function(V){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!(!V.chars||V.chars.length===0)){var q=J(V,w)||U(V)||V.chars[0],Q=this._opt.tabSize*q.xadvance;this._fallbackSpaceGlyph=q,this._fallbackTabGlyph=C(q,{x:0,y:0,xadvance:Q,id:m,xoffset:0,yoffset:0,width:0,height:0})}},L.prototype.getGlyph=function(V,q){var Q=J(V,q);return Q||(q===m?this._fallbackTabGlyph:q===w?this._fallbackSpaceGlyph:null)},L.prototype.computeMetrics=function(V,q,Q,F){var z=this._opt.letterSpacing||0,X=this._opt.font,fe=0,Ae=0,Se=0,Be,Ge;if(!X.chars||X.chars.length===0)return{start:q,end:q,width:0};Q=Math.min(V.length,Q);for(var ht=q;ht<Q;ht++){var xt=V.charCodeAt(ht),Be=this.getGlyph(X,xt);if(Be){Be.xoffset;var at=Ge?ue(X,Ge.id,Be.id):0;fe+=at;var Gt=fe+Be.xadvance+z,wt=fe+Be.width;if(wt>=F||Gt>=F)break;fe=Gt,Ae=wt,Ge=Be}Se++}return Ge&&(Ae+=Ge.xoffset),{start:q,end:q+Se,width:Ae}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(P);function P(V){Object.defineProperty(L.prototype,V,{get:Y(V),configurable:!0})}function Y(V){return new Function(["return function "+V+"() {","  return this._"+V,"}"].join(`
`))()}function J(V,q){if(!V.chars||V.chars.length===0)return null;var Q=Ee(V.chars,q);return Q>=0?V.chars[Q]:null}function j(V){for(var q=0;q<y.length;q++){var Q=y[q].charCodeAt(0),F=Ee(V.chars,Q);if(F>=0)return V.chars[F].height}return 0}function U(V){for(var q=0;q<E.length;q++){var Q=E[q].charCodeAt(0),F=Ee(V.chars,Q);if(F>=0)return V.chars[F]}return 0}function te(V){for(var q=0;q<_.length;q++){var Q=_[q].charCodeAt(0),F=Ee(V.chars,Q);if(F>=0)return V.chars[F].height}return 0}function ue(V,q,Q){if(!V.kernings||V.kernings.length===0)return 0;for(var F=V.kernings,z=0;z<F.length;z++){var X=F[z];if(X.first===q&&X.second===Q)return X.amount}return 0}function xe(V){return V==="center"?O:V==="right"?R:b}function Ee(V,q,Q){Q=Q||0;for(var F=Q;F<V.length;F++)if(V[F].id===q)return F;return-1}},"./node_modules/load-bmfont/browser.js":(S,I,h)=>{var g=h("./node_modules/buffer/index.js").Buffer,C=h("./node_modules/xhr/index.js"),v=function(){},y=h("./node_modules/parse-bmfont-ascii/index.js"),E=h("./node_modules/parse-bmfont-xml/lib/browser.js"),_=h("./node_modules/parse-bmfont-binary/index.js"),m=h("./node_modules/load-bmfont/lib/is-binary.js"),w=h("./node_modules/xtend/immutable.js"),b=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();S.exports=function(L,P){P=typeof P=="function"?P:v,typeof L=="string"?L={uri:L}:L||(L={});var Y=L.binary;Y&&(L=R(L)),C(L,function(J,j,U){if(J)return P(J);if(!/^2/.test(j.statusCode))return P(new Error("http status code: "+j.statusCode));if(!U)return P(new Error("no body result"));var te=!1;if(O(U)){var ue=new Uint8Array(U);U=g.from(ue,"binary")}m(U)&&(te=!0,typeof U=="string"&&(U=g.from(U,"binary"))),te||(g.isBuffer(U)&&(U=U.toString(L.encoding)),U=U.trim());var xe;try{var Ee=j.headers["content-type"];te?xe=_(U):/json/.test(Ee)||U.charAt(0)==="{"?xe=JSON.parse(U):/xml/.test(Ee)||U.charAt(0)==="<"?xe=E(U):xe=y(U)}catch(V){P(new Error("error parsing font "+V.message)),P=v}P(null,xe)})};function O(L){var P=Object.prototype.toString;return P.call(L)==="[object ArrayBuffer]"}function R(L){if(b)return w(L,{responseType:"arraybuffer"});if(typeof self.XMLHttpRequest>"u")throw new Error("your browser does not support XHR loading");var P=new self.XMLHttpRequest;return P.overrideMimeType("text/plain; charset=x-user-defined"),w({xhr:P},L)}},"./node_modules/load-bmfont/lib/is-binary.js":(S,I,h)=>{var g=h("./node_modules/buffer/index.js").Buffer,C=h("./node_modules/buffer-equal/index.js"),v=g.from([66,77,70,3]);S.exports=function(y){return typeof y=="string"?y.substring(0,3)==="BMF":y.length>4&&C(y.slice(0,4),v)}},"./node_modules/object-assign/index.js":S=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var I=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function C(y){if(y==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(y)}function v(){try{if(!Object.assign)return!1;var y=new String("abc");if(y[5]="de",Object.getOwnPropertyNames(y)[0]==="5")return!1;for(var E={},_=0;_<10;_++)E["_"+String.fromCharCode(_)]=_;var m=Object.getOwnPropertyNames(E).map(function(b){return E[b]});if(m.join("")!=="0123456789")return!1;var w={};return"abcdefghijklmnopqrst".split("").forEach(function(b){w[b]=b}),Object.keys(Object.assign({},w)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}S.exports=v()?Object.assign:function(y,E){for(var _,m=C(y),w,b=1;b<arguments.length;b++){_=Object(arguments[b]);for(var O in _)h.call(_,O)&&(m[O]=_[O]);if(I){w=I(_);for(var R=0;R<w.length;R++)g.call(_,w[R])&&(m[w[R]]=_[w[R]])}}return m}},"./node_modules/parse-bmfont-ascii/index.js":S=>{S.exports=function(v){if(!v)throw new Error("no data provided");v=v.toString().trim();var y={pages:[],chars:[],kernings:[]},E=v.split(/\r\n?|\n/g);if(E.length===0)throw new Error("no data in BMFont file");for(var _=0;_<E.length;_++){var m=I(E[_],_);if(!!m)if(m.key==="page"){if(typeof m.data.id!="number")throw new Error("malformed file at line "+_+" -- needs page id=N");if(typeof m.data.file!="string")throw new Error("malformed file at line "+_+' -- needs page file="path"');y.pages[m.data.id]=m.data.file}else m.key==="chars"||m.key==="kernings"||(m.key==="char"?y.chars.push(m.data):m.key==="kerning"?y.kernings.push(m.data):y[m.key]=m.data)}return y};function I(C,v){if(C=C.replace(/\t+/g," ").trim(),!C)return null;var y=C.indexOf(" ");if(y===-1)throw new Error("no named row at line "+v);var E=C.substring(0,y);C=C.substring(y+1),C=C.replace(/letter=[\'\"]\S+[\'\"]/gi,""),C=C.split("="),C=C.map(function(O){return O.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var _=[],m=0;m<C.length;m++){var w=C[m];m===0?_.push({key:w[0],data:""}):m===C.length-1?_[_.length-1].data=h(w[0]):(_[_.length-1].data=h(w[0]),_.push({key:w[1],data:""}))}var b={key:E,data:{}};return _.forEach(function(O){b.data[O.key]=O.data}),b}function h(C){return!C||C.length===0?"":C.indexOf('"')===0||C.indexOf("'")===0?C.substring(1,C.length-1):C.indexOf(",")!==-1?g(C):parseInt(C,10)}function g(C){return C.split(",").map(function(v){return parseInt(v,10)})}},"./node_modules/parse-bmfont-binary/index.js":S=>{var I=[66,77,70];S.exports=function(b){if(b.length<6)throw new Error("invalid buffer length for BMFont");var O=I.every(function(J,j){return b.readUInt8(j)===J});if(!O)throw new Error("BMFont missing BMF byte header");var R=3,L=b.readUInt8(R++);if(L>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var P={kernings:[],chars:[]},Y=0;Y<5;Y++)R+=h(P,b,R);return P};function h(w,b,O){if(O>b.length-1)return 0;var R=b.readUInt8(O++),L=b.readInt32LE(O);switch(O+=4,R){case 1:w.info=g(b,O);break;case 2:w.common=C(b,O);break;case 3:w.pages=v(b,O,L);break;case 4:w.chars=y(b,O,L);break;case 5:w.kernings=E(b,O,L);break}return 5+L}function g(w,b){var O={};O.size=w.readInt16LE(b);var R=w.readUInt8(b+2);return O.smooth=R>>7&1,O.unicode=R>>6&1,O.italic=R>>5&1,O.bold=R>>4&1,R>>3&1&&(O.fixedHeight=1),O.charset=w.readUInt8(b+3)||"",O.stretchH=w.readUInt16LE(b+4),O.aa=w.readUInt8(b+6),O.padding=[w.readInt8(b+7),w.readInt8(b+8),w.readInt8(b+9),w.readInt8(b+10)],O.spacing=[w.readInt8(b+11),w.readInt8(b+12)],O.outline=w.readUInt8(b+13),O.face=m(w,b+14),O}function C(w,b){var O={};return O.lineHeight=w.readUInt16LE(b),O.base=w.readUInt16LE(b+2),O.scaleW=w.readUInt16LE(b+4),O.scaleH=w.readUInt16LE(b+6),O.pages=w.readUInt16LE(b+8),w.readUInt8(b+10),O.packed=0,O.alphaChnl=w.readUInt8(b+11),O.redChnl=w.readUInt8(b+12),O.greenChnl=w.readUInt8(b+13),O.blueChnl=w.readUInt8(b+14),O}function v(w,b,O){for(var R=[],L=_(w,b),P=L.length+1,Y=O/P,J=0;J<Y;J++)R[J]=w.slice(b,b+L.length).toString("utf8"),b+=P;return R}function y(w,b,O){for(var R=[],L=O/20,P=0;P<L;P++){var Y={},J=P*20;Y.id=w.readUInt32LE(b+0+J),Y.x=w.readUInt16LE(b+4+J),Y.y=w.readUInt16LE(b+6+J),Y.width=w.readUInt16LE(b+8+J),Y.height=w.readUInt16LE(b+10+J),Y.xoffset=w.readInt16LE(b+12+J),Y.yoffset=w.readInt16LE(b+14+J),Y.xadvance=w.readInt16LE(b+16+J),Y.page=w.readUInt8(b+18+J),Y.chnl=w.readUInt8(b+19+J),R[P]=Y}return R}function E(w,b,O){for(var R=[],L=O/10,P=0;P<L;P++){var Y={},J=P*10;Y.first=w.readUInt32LE(b+0+J),Y.second=w.readUInt32LE(b+4+J),Y.amount=w.readInt16LE(b+8+J),R[P]=Y}return R}function _(w,b){for(var O=b;O<w.length&&w[O]!==0;O++);return w.slice(b,O)}function m(w,b){return _(w,b).toString("utf8")}},"./node_modules/parse-bmfont-xml/lib/browser.js":(S,I,h)=>{var g=h("./node_modules/parse-bmfont-xml/lib/parse-attribs.js"),C=h("./node_modules/xml-parse-from-string/index.js"),v={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};S.exports=function(w){w=w.toString();var b=C(w),O={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(U){var te=b.getElementsByTagName(U)[0];te&&(O[U]=g(y(te)))});var R=b.getElementsByTagName("pages")[0];if(!R)throw new Error("malformed file -- no <pages> element");for(var L=R.getElementsByTagName("page"),P=0;P<L.length;P++){var Y=L[P],J=parseInt(Y.getAttribute("id"),10),j=Y.getAttribute("file");if(isNaN(J))throw new Error('malformed file -- page "id" attribute is NaN');if(!j)throw new Error('malformed file -- needs page "file" attribute');O.pages[parseInt(J,10)]=j}return["chars","kernings"].forEach(function(U){var te=b.getElementsByTagName(U)[0];if(!!te)for(var ue=U.substring(0,U.length-1),xe=te.getElementsByTagName(ue),Ee=0;Ee<xe.length;Ee++){var V=xe[Ee];O[U].push(g(y(V)))}}),O};function y(m){var w=E(m);return w.reduce(function(b,O){var R=_(O.nodeName);return b[R]=O.nodeValue,b},{})}function E(m){for(var w=[],b=0;b<m.attributes.length;b++)w.push(m.attributes[b]);return w}function _(m){return v[m.toLowerCase()]||m}},"./node_modules/parse-bmfont-xml/lib/parse-attribs.js":S=>{var I="chasrset";S.exports=function(C){I in C&&(C.charset=C[I],delete C[I]);for(var v in C)v==="face"||v==="charset"||(v==="padding"||v==="spacing"?C[v]=h(C[v]):C[v]=parseInt(C[v],10));return C};function h(g){return g.split(",").map(function(C){return parseInt(C,10)})}},"./node_modules/parse-headers/parse-headers.js":S=>{var I=function(g){return g.replace(/^\s+|\s+$/g,"")},h=function(g){return Object.prototype.toString.call(g)==="[object Array]"};S.exports=function(g){if(!g)return{};for(var C={},v=I(g).split(`
`),y=0;y<v.length;y++){var E=v[y],_=E.indexOf(":"),m=I(E.slice(0,_)).toLowerCase(),w=I(E.slice(_+1));typeof C[m]>"u"?C[m]=w:h(C[m])?C[m].push(w):C[m]=[C[m],w]}return C}},"./node_modules/present/lib/present-browser.js":(S,I,h)=>{var g=h.g.performance||{},C=function(){for(var v=["now","webkitNow","msNow","mozNow","oNow"];v.length;){var y=v.shift();if(y in g)return g[y].bind(g)}var E=Date.now||function(){return new Date().getTime()},_=(g.timing||{}).navigationStart||E();return function(){return E()-_}}();C.performanceNow=g.now,C.noConflict=function(){g.now=C.performanceNow},C.conflict=function(){g.now=C},C.conflict(),S.exports=C},"./node_modules/process/browser.js":S=>{var I=S.exports={},h,g;function C(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?h=setTimeout:h=C}catch{h=C}try{typeof clearTimeout=="function"?g=clearTimeout:g=v}catch{g=v}})();function y(Y){if(h===setTimeout)return setTimeout(Y,0);if((h===C||!h)&&setTimeout)return h=setTimeout,setTimeout(Y,0);try{return h(Y,0)}catch{try{return h.call(null,Y,0)}catch{return h.call(this,Y,0)}}}function E(Y){if(g===clearTimeout)return clearTimeout(Y);if((g===v||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(Y);try{return g(Y)}catch{try{return g.call(null,Y)}catch{return g.call(this,Y)}}}var _=[],m=!1,w,b=-1;function O(){!m||!w||(m=!1,w.length?_=w.concat(_):b=-1,_.length&&R())}function R(){if(!m){var Y=y(O);m=!0;for(var J=_.length;J;){for(w=_,_=[];++b<J;)w&&w[b].run();b=-1,J=_.length}w=null,m=!1,E(Y)}}I.nextTick=function(Y){var J=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)J[j-1]=arguments[j];_.push(new L(Y,J)),_.length===1&&!m&&y(R)};function L(Y,J){this.fun=Y,this.array=J}L.prototype.run=function(){this.fun.apply(null,this.array)},I.title="browser",I.browser=!0,I.env={},I.argv=[],I.version="",I.versions={};function P(){}I.on=P,I.addListener=P,I.once=P,I.off=P,I.removeListener=P,I.removeAllListeners=P,I.emit=P,I.prependListener=P,I.prependOnceListener=P,I.listeners=function(Y){return[]},I.binding=function(Y){throw new Error("process.binding is not supported")},I.cwd=function(){return"/"},I.chdir=function(Y){throw new Error("process.chdir is not supported")},I.umask=function(){return 0}},"./node_modules/promise-polyfill/Promise.js":function(S){(function(I){var h=setTimeout,g=typeof setImmediate=="function"&&setImmediate||function(R){h(R,1)};function C(R,L){return function(){R.apply(L,arguments)}}var v=Array.isArray||function(R){return Object.prototype.toString.call(R)==="[object Array]"};function y(R){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof R!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],O(R,C(_,this),C(m,this))}function E(R){var L=this;if(this._state===null){this._deferreds.push(R);return}g(function(){var P=L._state?R.onFulfilled:R.onRejected;if(P===null){(L._state?R.resolve:R.reject)(L._value);return}var Y;try{Y=P(L._value)}catch(J){R.reject(J);return}R.resolve(Y)})}function _(R){try{if(R===this)throw new TypeError("A promise cannot be resolved with itself.");if(R&&(typeof R=="object"||typeof R=="function")){var L=R.then;if(typeof L=="function"){O(C(L,R),C(_,this),C(m,this));return}}this._state=!0,this._value=R,w.call(this)}catch(P){m.call(this,P)}}function m(R){this._state=!1,this._value=R,w.call(this)}function w(){for(var R=0,L=this._deferreds.length;R<L;R++)E.call(this,this._deferreds[R]);this._deferreds=null}function b(R,L,P,Y){this.onFulfilled=typeof R=="function"?R:null,this.onRejected=typeof L=="function"?L:null,this.resolve=P,this.reject=Y}function O(R,L,P){var Y=!1;try{R(function(J){Y||(Y=!0,L(J))},function(J){Y||(Y=!0,P(J))})}catch(J){if(Y)return;Y=!0,P(J)}}y.prototype.catch=function(R){return this.then(null,R)},y.prototype.then=function(R,L){var P=this;return new y(function(Y,J){E.call(P,new b(R,L,Y,J))})},y.all=function(){var R=Array.prototype.slice.call(arguments.length===1&&v(arguments[0])?arguments[0]:arguments);return new y(function(L,P){if(R.length===0)return L([]);var Y=R.length;function J(U,te){try{if(te&&(typeof te=="object"||typeof te=="function")){var ue=te.then;if(typeof ue=="function"){ue.call(te,function(xe){J(U,xe)},P);return}}R[U]=te,--Y===0&&L(R)}catch(xe){P(xe)}}for(var j=0;j<R.length;j++)J(j,R[j])})},y.resolve=function(R){return R&&typeof R=="object"&&R.constructor===y?R:new y(function(L){L(R)})},y.reject=function(R){return new y(function(L,P){P(R)})},y.race=function(R){return new y(function(L,P){for(var Y=0,J=R.length;Y<J;Y++)R[Y].then(L,P)})},y._setImmediateFn=function(L){g=L},S.exports?S.exports=y:I.Promise||(I.Promise=y)})(this)},"./node_modules/quad-indices/index.js":(S,I,h)=>{var g=h("./node_modules/dtype/index.js"),C=h("./node_modules/an-array/index.js"),v=h("./node_modules/is-buffer/index.js"),y=[0,2,3],E=[2,1,3];S.exports=function(m,w){(!m||!(C(m)||v(m)))&&(w=m||{},m=null),typeof w=="number"?w={count:w}:w=w||{};for(var b=typeof w.type=="string"?w.type:"uint16",O=typeof w.count=="number"?w.count:1,R=w.start||0,L=w.clockwise!==!1?y:E,P=L[0],Y=L[1],J=L[2],j=O*6,U=m||new(g(b))(j),te=0,ue=0;te<j;te+=6,ue+=4){var xe=te+R;U[xe+0]=ue+0,U[xe+1]=ue+1,U[xe+2]=ue+2,U[xe+3]=ue+P,U[xe+4]=ue+Y,U[xe+5]=ue+J}return U}},"./node_modules/super-animejs/lib/anime.es.js":(S,I,h)=>{h.r(I),h.d(I,{default:()=>xs});var g={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},C={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},v=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],y={CSS:{},springs:{}};function E(Qe,ut,_t){return Math.min(Math.max(Qe,ut),_t)}function _(Qe,ut){return Qe.indexOf(ut)>-1}function m(Qe,ut){return Qe.apply(null,ut)}var w=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,b=/^rgb/,O=/^hsl/,R={arr:function(Qe){return Array.isArray(Qe)},obj:function(Qe){return _(Object.prototype.toString.call(Qe),"Object")},pth:function(Qe){return R.obj(Qe)&&Qe.hasOwnProperty("totalLength")},svg:function(Qe){return Qe instanceof SVGElement},inp:function(Qe){return Qe instanceof HTMLInputElement},dom:function(Qe){return Qe.nodeType||R.svg(Qe)},str:function(Qe){return typeof Qe=="string"},fnc:function(Qe){return typeof Qe=="function"},und:function(Qe){return typeof Qe>"u"},hex:function(Qe){return w.test(Qe)},rgb:function(Qe){return b.test(Qe)},hsl:function(Qe){return O.test(Qe)},col:function(Qe){return R.hex(Qe)||R.rgb(Qe)||R.hsl(Qe)},key:function(Qe){return!g.hasOwnProperty(Qe)&&!C.hasOwnProperty(Qe)&&Qe!=="targets"&&Qe!=="keyframes"}},L=/\(([^)]+)\)/;function P(Qe){var ut=L.exec(Qe);return ut?ut[1].split(",").map(function(_t){return parseFloat(_t)}):[]}function Y(Qe,ut){var _t=P(Qe),nn=E(R.und(_t[0])?1:_t[0],.1,100),Wt=E(R.und(_t[1])?100:_t[1],.1,100),mn=E(R.und(_t[2])?10:_t[2],.1,100),Un=E(R.und(_t[3])?0:_t[3],.1,100),Xn=Math.sqrt(Wt/nn),ei=mn/(2*Math.sqrt(Wt*nn)),pn=ei<1?Xn*Math.sqrt(1-ei*ei):0,Oi=1,Mi=ei<1?(ei*Xn+-Un)/pn:-Un+Xn;function Ti(zi){var er=ut?ut*zi/1e3:zi;return ei<1?er=Math.exp(-er*ei*Xn)*(Oi*Math.cos(pn*er)+Mi*Math.sin(pn*er)):er=(Oi+Mi*er)*Math.exp(-er*Xn),zi===0||zi===1?zi:1-er}function Xr(){var zi=y.springs[Qe];if(zi)return zi;for(var er=1/6,kr=0,Os=0;;)if(kr+=er,Ti(kr)===1){if(Os++,Os>=16)break}else Os=0;var ro=kr*er*1e3;return y.springs[Qe]=ro,ro}return ut?Ti:Xr}function J(Qe,ut){Qe===void 0&&(Qe=1),ut===void 0&&(ut=.5);var _t=E(Qe,1,10),nn=E(ut,.1,2);return function(Wt){return Wt===0||Wt===1?Wt:-_t*Math.pow(2,10*(Wt-1))*Math.sin((Wt-1-nn/(Math.PI*2)*Math.asin(1/_t))*(Math.PI*2)/nn)}}function j(Qe){return Qe===void 0&&(Qe=10),function(ut){return Math.round(ut*Qe)*(1/Qe)}}var U=function(){var Qe=11,ut=1/(Qe-1);function _t(Oi,Mi){return 1-3*Mi+3*Oi}function nn(Oi,Mi){return 3*Mi-6*Oi}function Wt(Oi){return 3*Oi}function mn(Oi,Mi,Ti){return((_t(Mi,Ti)*Oi+nn(Mi,Ti))*Oi+Wt(Mi))*Oi}function Un(Oi,Mi,Ti){return 3*_t(Mi,Ti)*Oi*Oi+2*nn(Mi,Ti)*Oi+Wt(Mi)}function Xn(Oi,Mi,Ti,Xr,zi){var er,kr,Os=0;do kr=Mi+(Ti-Mi)/2,er=mn(kr,Xr,zi)-Oi,er>0?Ti=kr:Mi=kr;while(Math.abs(er)>1e-7&&++Os<10);return kr}function ei(Oi,Mi,Ti,Xr){for(var zi=0;zi<4;++zi){var er=Un(Mi,Ti,Xr);if(er===0)return Mi;var kr=mn(Mi,Ti,Xr)-Oi;Mi-=kr/er}return Mi}function pn(Oi,Mi,Ti,Xr){if(!(0<=Oi&&Oi<=1&&0<=Ti&&Ti<=1))return;var zi=new Float32Array(Qe);if(Oi!==Mi||Ti!==Xr)for(var er=0;er<Qe;++er)zi[er]=mn(er*ut,Oi,Ti);function kr(Os){for(var ro=0,pi=1,Rr=Qe-1;pi!==Rr&&zi[pi]<=Os;++pi)ro+=ut;--pi;var to=(Os-zi[pi])/(zi[pi+1]-zi[pi]),as=ro+to*ut,ce=Un(as,Oi,Ti);return ce>=.001?ei(Os,as,Oi,Ti):ce===0?as:Xn(Os,ro,ro+ut,Oi,Ti)}return function(Os){return Oi===Mi&&Ti===Xr||Os===0||Os===1?Os:mn(kr(Os),Mi,Xr)}}return pn}(),te=function(){var Qe=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],ut={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],J],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(Un,Xn){return function(ei){return 1-J(Un,Xn)(1-ei)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(Un,Xn){return function(ei){return ei<.5?J(Un,Xn)(ei*2)/2:1-J(Un,Xn)(ei*-2+2)/2}}]},_t={linear:[.25,.25,.75,.75]};for(var nn in ut)for(var Wt=0,mn=ut[nn].length;Wt<mn;Wt++)_t["ease"+nn+Qe[Wt]]=ut[nn][Wt];return _t}();function ue(Qe,ut){if(R.fnc(Qe))return Qe;var _t=Qe.split("(")[0],nn=te[_t],Wt=P(Qe);switch(_t){case"spring":return Y(Qe,ut);case"cubicBezier":return m(U,Wt);case"steps":return m(j,Wt);default:return R.fnc(nn)?m(nn,Wt):m(U,nn)}}function xe(Qe){try{var ut=document.querySelectorAll(Qe);return ut}catch{return}}var Ee=[];function V(Qe,ut){for(var _t=Ee,nn=Qe.length,Wt=arguments.length>=2?arguments[1]:void 0,mn=0;mn<nn;mn++)if(mn in Qe){var Un=Qe[mn];ut.call(Wt,Un,mn,Qe)&&_t.push(Un)}return Ee=Qe,Ee.length=0,_t}function q(Qe,ut){ut||(ut=[]);for(var _t=0,nn=Qe.length;_t<nn;_t++){var Wt=Qe[_t];Array.isArray(Wt)?q(Wt,ut):ut.push(Wt)}return ut}function Q(Qe){return R.arr(Qe)?Qe:(R.str(Qe)&&(Qe=xe(Qe)||Qe),Qe instanceof NodeList||Qe instanceof HTMLCollection?[].slice.call(Qe):[Qe])}function F(Qe,ut){return Qe.some(function(_t){return _t===ut})}function z(Qe){var ut={};for(var _t in Qe)ut[_t]=Qe[_t];return ut}function X(Qe,ut){var _t=z(Qe);for(var nn in Qe)_t[nn]=ut.hasOwnProperty(nn)?ut[nn]:Qe[nn];return _t}function fe(Qe,ut){var _t=z(Qe);for(var nn in ut)_t[nn]=R.und(Qe[nn])?ut[nn]:Qe[nn];return _t}var Ae=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function Se(Qe){var ut=Ae.exec(Qe);return ut?"rgba("+ut[1]+",1)":Qe}var Be=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ge=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function ht(Qe){var ut=Qe.replace(Be,function(Un,Xn,ei,pn){return Xn+Xn+ei+ei+pn+pn}),_t=Ge.exec(ut),nn=parseInt(_t[1],16),Wt=parseInt(_t[2],16),mn=parseInt(_t[3],16);return"rgba("+nn+","+Wt+","+mn+",1)"}var xt=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,at=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function Gt(Qe){var ut=xt.exec(Qe)||at.exec(Qe),_t=parseInt(ut[1],10)/360,nn=parseInt(ut[2],10)/100,Wt=parseInt(ut[3],10)/100,mn=ut[4]||1;function Un(Ti,Xr,zi){return zi<0&&(zi+=1),zi>1&&(zi-=1),zi<.16666666666666666?Ti+(Xr-Ti)*6*zi:zi<.5?Xr:zi<.6666666666666666?Ti+(Xr-Ti)*(.6666666666666666-zi)*6:Ti}var Xn,ei,pn;if(nn==0)Xn=ei=pn=Wt;else{var Oi=Wt<.5?Wt*(1+nn):Wt+nn-Wt*nn,Mi=2*Wt-Oi;Xn=Un(Mi,Oi,_t+.3333333333333333),ei=Un(Mi,Oi,_t),pn=Un(Mi,Oi,_t-.3333333333333333)}return"rgba("+Xn*255+","+ei*255+","+pn*255+","+mn+")"}function wt(Qe){if(R.rgb(Qe))return Se(Qe);if(R.hex(Qe))return ht(Qe);if(R.hsl(Qe))return Gt(Qe)}var Yt=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function Mn(Qe){var ut=Yt.exec(Qe);if(ut)return ut[2]}function je(Qe){if(_(Qe,"translate")||Qe==="perspective")return"px";if(_(Qe,"rotate")||_(Qe,"skew"))return"deg"}function rt(Qe,ut){return R.fnc(Qe)?Qe(ut.target,ut.id,ut.total):Qe}function At(Qe,ut){return Qe.getAttribute(ut)}function Bt(Qe,ut,_t){var nn=Mn(ut);if(F([_t,"deg","rad","turn"],nn))return ut;var Wt=y.CSS[ut+_t];if(!R.und(Wt))return Wt;var mn=100,Un=document.createElement(Qe.tagName),Xn=Qe.parentNode&&Qe.parentNode!==document?Qe.parentNode:document.body;Xn.appendChild(Un),Un.style.position="absolute",Un.style.width=mn+_t;var ei=mn/Un.offsetWidth;Xn.removeChild(Un);var pn=ei*parseFloat(ut);return y.CSS[ut+_t]=pn,pn}function Pt(Qe,ut,_t){if(ut in Qe.style){var nn=ut.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Wt=Qe.style[ut]||getComputedStyle(Qe).getPropertyValue(nn)||"0";return _t?Bt(Qe,Wt,_t):Wt}}function qt(Qe,ut){if(R.dom(Qe)&&!R.inp(Qe)&&(At(Qe,ut)||R.svg(Qe)&&Qe[ut]))return"attribute";if(R.dom(Qe)&&F(v,ut))return"transform";if(R.dom(Qe)&&ut!=="transform"&&Pt(Qe,ut))return"css";if(Qe[ut]!=null)return"object"}var un=/(\w+)\(([^)]*)\)/g;function dn(Qe){if(!!R.dom(Qe)){for(var ut=Qe.style.transform||"",_t=new Map,nn;nn=un.exec(ut);)_t.set(nn[1],nn[2]);return _t}}function bn(Qe,ut,_t,nn){var Wt=_(ut,"scale")?1:0+je(ut),mn=dn(Qe).get(ut)||Wt;return _t&&(_t.transforms.list.set(ut,mn),_t.transforms.last=ut),nn?Bt(Qe,mn,nn):mn}function tn(Qe,ut,_t,nn){switch(qt(Qe,ut)){case"transform":return bn(Qe,ut,nn,_t);case"css":return Pt(Qe,ut,_t);case"attribute":return At(Qe,ut);default:return Qe[ut]||0}}var ri=/^(\*=|\+=|-=)/;function ni(Qe,ut){var _t=ri.exec(Qe);if(!_t)return Qe;var nn=Mn(Qe)||0,Wt=parseFloat(ut),mn=parseFloat(Qe.replace(_t[0],""));switch(_t[0][0]){case"+":return Wt+mn+nn;case"-":return Wt-mn+nn;case"*":return Wt*mn+nn}}var zt=/\s/g;function Ue(Qe,ut){if(R.col(Qe))return wt(Qe);var _t=Mn(Qe),nn=_t?Qe.substr(0,Qe.length-_t.length):Qe;return ut&&!zt.test(Qe)?nn+ut:nn}function Pe(Qe,ut){return Math.sqrt(Math.pow(ut.x-Qe.x,2)+Math.pow(ut.y-Qe.y,2))}function Ye(Qe){return Math.PI*2*At(Qe,"r")}function ze(Qe){return At(Qe,"width")*2+At(Qe,"height")*2}function He(Qe){return Pe({x:At(Qe,"x1"),y:At(Qe,"y1")},{x:At(Qe,"x2"),y:At(Qe,"y2")})}function et(Qe){for(var ut=Qe.points,_t=0,nn,Wt=0;Wt<ut.numberOfItems;Wt++){var mn=ut.getItem(Wt);Wt>0&&(_t+=Pe(nn,mn)),nn=mn}return _t}function Me(Qe){var ut=Qe.points;return et(Qe)+Pe(ut.getItem(ut.numberOfItems-1),ut.getItem(0))}function Te(Qe){if(Qe.getTotalLength)return Qe.getTotalLength();switch(Qe.tagName.toLowerCase()){case"circle":return Ye(Qe);case"rect":return ze(Qe);case"line":return He(Qe);case"polyline":return et(Qe);case"polygon":return Me(Qe)}}function Oe(Qe){var ut=Te(Qe);return Qe.setAttribute("stroke-dasharray",ut),ut}function Ze(Qe){for(var ut=Qe.parentNode;R.svg(ut)&&(ut=ut.parentNode,!!R.svg(ut.parentNode)););return ut}function ae(Qe,ut){var _t=ut||{},nn=_t.el||Ze(Qe),Wt=nn.getBoundingClientRect(),mn=At(nn,"viewBox"),Un=Wt.width,Xn=Wt.height,ei=_t.viewBox||(mn?mn.split(" "):[0,0,Un,Xn]);return{el:nn,viewBox:ei,x:ei[0]/1,y:ei[1]/1,w:Un/ei[2],h:Xn/ei[3]}}function ee(Qe,ut){var _t=R.str(Qe)?xe(Qe)[0]:Qe,nn=ut||100;return function(Wt){return{property:Wt,el:_t,svg:ae(_t),totalLength:Te(_t)*(nn/100)}}}function se(Qe,ut){function _t(Xn){Xn===void 0&&(Xn=0);var ei=ut+Xn>=1?ut+Xn:0;return Qe.el.getPointAtLength(ei)}var nn=ae(Qe.el,Qe.svg),Wt=_t(),mn=_t(-1),Un=_t(1);switch(Qe.property){case"x":return(Wt.x-nn.x)*nn.w;case"y":return(Wt.y-nn.y)*nn.h;case"angle":return Math.atan2(Un.y-mn.y,Un.x-mn.x)*180/Math.PI}}var Ie=/-?\d*\.?\d+/g;function We(Qe,ut){var _t=Ue(R.pth(Qe)?Qe.totalLength:Qe,ut)+"";return{original:_t,numbers:_t.match(Ie)?_t.match(Ie).map(Number):[0],strings:R.str(Qe)||ut?_t.split(Ie):[]}}function Ke(Qe){var ut=Qe?q(R.arr(Qe)?Qe.map(Q):Q(Qe)):[];return V(ut,function(_t,nn,Wt){return Wt.indexOf(_t)===nn})}function $e(Qe){var ut=Ke(Qe);return ut.map(function(_t,nn){return{target:_t,id:nn,total:ut.length,transforms:{list:dn(_t)}}})}var Vt=/^spring/;function $t(Qe,ut){var _t=z(ut);if(Vt.test(_t.easing)&&(_t.duration=Y(_t.easing)),R.arr(Qe)){var nn=Qe.length,Wt=nn===2&&!R.obj(Qe[0]);Wt?Qe={value:Qe}:R.fnc(ut.duration)||(_t.duration=ut.duration/nn)}var mn=R.arr(Qe)?Qe:[Qe];return mn.map(function(Un,Xn){var ei=R.obj(Un)&&!R.pth(Un)?Un:{value:Un};return R.und(ei.delay)&&(ei.delay=Xn?0:ut.delay),R.und(ei.endDelay)&&(ei.endDelay=Xn===mn.length-1?ut.endDelay:0),ei}).map(function(Un){return fe(Un,_t)})}function Xt(Qe){for(var ut=V(q(Qe.map(function(mn){return Object.keys(mn)})),function(mn){return R.key(mn)}).reduce(function(mn,Un){return mn.indexOf(Un)<0&&mn.push(Un),mn},[]),_t={},nn=function(mn){var Un=ut[mn];_t[Un]=Qe.map(function(Xn){var ei={};for(var pn in Xn)R.key(pn)?pn==Un&&(ei.value=Xn[pn]):ei[pn]=Xn[pn];return ei})},Wt=0;Wt<ut.length;Wt++)nn(Wt);return _t}function jt(Qe,ut){var _t=[],nn=ut.keyframes;nn&&(ut=fe(Xt(nn),ut));for(var Wt in ut)R.key(Wt)&&_t.push({name:Wt,tweens:$t(ut[Wt],Qe)});return _t}function on(Qe,ut){var _t={};for(var nn in Qe){var Wt=rt(Qe[nn],ut);R.arr(Wt)&&(Wt=Wt.map(function(mn){return rt(mn,ut)}),Wt.length===1&&(Wt=Wt[0])),_t[nn]=Wt}return _t.duration=parseFloat(_t.duration),_t.delay=parseFloat(_t.delay),_t}function In(Qe,ut){var _t;return Qe.tweens.map(function(nn){var Wt=on(nn,ut),mn=Wt.value,Un=R.arr(mn)?mn[1]:mn,Xn=Mn(Un),ei=tn(ut.target,Qe.name,Xn,ut),pn=_t?_t.to.original:ei,Oi=R.arr(mn)?mn[0]:pn,Mi=Mn(Oi)||Mn(ei),Ti=Xn||Mi;return R.und(Un)&&(Un=pn),Wt.from=We(Oi,Ti),Wt.to=We(ni(Un,Oi),Ti),Wt.start=_t?_t.end:0,Wt.end=Wt.start+Wt.delay+Wt.duration+Wt.endDelay,Wt.easing=ue(Wt.easing,Wt.duration),Wt.isPath=R.pth(mn),Wt.isColor=R.col(Wt.from.original),Wt.isColor&&(Wt.round=1),_t=Wt,Wt})}var di={css:function(Qe,ut,_t){return Qe.style[ut]=_t},attribute:function(Qe,ut,_t){return Qe.setAttribute(ut,_t)},object:function(Qe,ut,_t){return Qe[ut]=_t},transform:function(Qe,ut,_t,nn,Wt){if(nn.list.set(ut,_t),ut===nn.last||Wt){var mn="";nn.list.forEach(function(Un,Xn){mn+=Xn+"("+Un+") "}),Qe.style.transform=mn}}};function fi(Qe,ut){for(var _t=$e(Qe),nn=0,Wt=_t.length;nn<Wt;nn++){var mn=_t[nn];for(var Un in ut){var Xn=rt(ut[Un],mn),ei=mn.target,pn=Mn(Xn),Oi=tn(ei,Un,pn,mn),Mi=pn||Mn(Oi),Ti=ni(Ue(Xn,Mi),Oi),Xr=qt(ei,Un);di[Xr](ei,Un,Ti,mn.transforms,!0)}}}function Nn(Qe,ut){var _t=qt(Qe.target,ut.name);if(_t){var nn=In(ut,Qe),Wt=nn[nn.length-1];return{type:_t,property:ut.name,animatable:Qe,tweens:nn,duration:Wt.end,delay:nn[0].delay,endDelay:Wt.endDelay}}}function vn(Qe,ut){return V(q(Qe.map(function(_t){return ut.map(function(nn){return Nn(_t,nn)})})),function(_t){return!R.und(_t)})}function Ft(Qe,ut){var _t=Qe.length,nn=function(mn){return mn.timelineOffset?mn.timelineOffset:0},Wt={};return Wt.duration=_t?Math.max.apply(Math,Qe.map(function(mn){return nn(mn)+mn.duration})):ut.duration,Wt.delay=_t?Math.min.apply(Math,Qe.map(function(mn){return nn(mn)+mn.delay})):ut.delay,Wt.endDelay=_t?Wt.duration-Math.max.apply(Math,Qe.map(function(mn){return nn(mn)+mn.duration-mn.endDelay})):ut.endDelay,Wt}var yn=0;function Gn(Qe){var ut=X(g,Qe),_t=X(C,Qe),nn=jt(_t,Qe),Wt=$e(Qe.targets),mn=vn(Wt,nn),Un=Ft(mn,_t),Xn=yn;return yn++,fe(ut,{id:Xn,children:[],animatables:Wt,animations:mn,duration:Un.duration,delay:Un.delay,endDelay:Un.endDelay})}var Dn=[],bi=[],Pi,Zi=function(){function Qe(){Pi=requestAnimationFrame(ut)}function ut(_t){var nn=Dn.length;if(nn){for(var Wt=0;Wt<nn;){var mn=Dn[Wt];if(!mn.paused)mn.tick(_t);else{var Un=Dn.indexOf(mn);Un>-1&&(Dn.splice(Un,1),nn=Dn.length)}Wt++}Qe()}else Pi=cancelAnimationFrame(Pi)}return Qe}();function Dr(){if(document.hidden){for(var Qe=0,ut=Dn.length;Qe<ut;Qe++)activeInstance[Qe].pause();bi=Dn.slice(0),Dn=[]}else for(var _t=0,nn=bi.length;_t<nn;_t++)bi[_t].play()}document.addEventListener("visibilitychange",Dr);function Ki(Qe){Qe===void 0&&(Qe={});var ut=0,_t=0,nn=0,Wt,mn=0,Un=null;function Xn(){return window.Promise&&new Promise(function(pi){return Un=pi})}var ei=Xn(),pn=Gn(Qe);function Oi(){pn.reversed=!pn.reversed;for(var pi=0,Rr=Wt.length;pi<Rr;pi++)Wt[pi].reversed=pn.reversed}function Mi(pi){return pn.reversed?pn.duration-pi:pi}function Ti(){ut=0,_t=Mi(pn.currentTime)*(1/Ki.speed)}function Xr(pi,Rr){Rr&&Rr.seek(pi-Rr.timelineOffset)}function zi(pi){if(pn.reversePlayback)for(var to=mn;to--;)Xr(pi,Wt[to]);else for(var Rr=0;Rr<mn;Rr++)Xr(pi,Wt[Rr])}function er(pi){for(var Rr=0,to=pn.animations,as=to.length;Rr<as;){var ce=to[Rr],ge=ce.animatable,_e=ce.tweens,Le=_e.length-1,qe=_e[Le];Le&&(qe=V(_e,function(vr){return pi<vr.end})[0]||qe);for(var yt=E(pi-qe.start-qe.delay,0,qe.duration)/qe.duration,St=isNaN(yt)?1:qe.easing(yt),wn=qe.to.strings,xn=qe.round,Nt=[],an=qe.to.numbers.length,Pn=void 0,xi=0;xi<an;xi++){var Ui=void 0,Xi=qe.to.numbers[xi],fr=qe.from.numbers[xi]||0;qe.isPath?Ui=se(qe.value,St*Xi):Ui=fr+St*(Xi-fr),xn&&(qe.isColor&&xi>2||(Ui=Math.round(Ui*xn)/xn)),Nt.push(Ui)}var ur=wn.length;if(!ur)Pn=Nt[0];else{Pn=wn[0];for(var Vi=0;Vi<ur;Vi++){wn[Vi];var hs=wn[Vi+1],Jr=Nt[Vi];isNaN(Jr)||(hs?Pn+=Jr+hs:Pn+=Jr+" ")}}di[ce.type](ge.target,ce.property,Pn,ge.transforms),ce.currentValue=Pn,Rr++}}function kr(pi){pn[pi]&&!pn.passThrough&&pn[pi](pn)}function Os(){pn.remaining&&pn.remaining!==!0&&pn.remaining--}function ro(pi){var Rr=pn.duration,to=pn.delay,as=Rr-pn.endDelay,ce=Mi(pi);pn.progress=E(ce/Rr*100,0,100),pn.reversePlayback=ce<pn.currentTime,Wt&&zi(ce),!pn.began&&pn.currentTime>0&&(pn.began=!0,kr("begin"),kr("loopBegin")),ce<=to&&pn.currentTime!==0&&er(0),(ce>=as&&pn.currentTime!==Rr||!Rr)&&er(Rr),ce>to&&ce<as?(pn.changeBegan||(pn.changeBegan=!0,pn.changeCompleted=!1,kr("changeBegin")),kr("change"),er(ce)):pn.changeBegan&&(pn.changeCompleted=!0,pn.changeBegan=!1,kr("changeComplete")),pn.currentTime=E(ce,0,Rr),pn.began&&kr("update"),pi>=Rr&&(_t=0,Os(),pn.remaining?(ut=nn,kr("loopComplete"),kr("loopBegin"),pn.direction==="alternate"&&Oi()):(pn.paused=!0,pn.completed||(pn.completed=!0,kr("loopComplete"),kr("complete"),"Promise"in window&&(Un(),ei=Xn()))))}return pn.reset=function(){var pi=pn.direction;pn.passThrough=!1,pn.currentTime=0,pn.progress=0,pn.paused=!0,pn.began=!1,pn.changeBegan=!1,pn.completed=!1,pn.changeCompleted=!1,pn.reversePlayback=!1,pn.reversed=pi==="reverse",pn.remaining=pn.loop,Wt=pn.children,mn=Wt.length;for(var Rr=mn;Rr--;)pn.children[Rr].reset();(pn.reversed&&pn.loop!==!0||pi==="alternate"&&pn.loop===1)&&pn.remaining++,er(0)},pn.set=function(pi,Rr){return fi(pi,Rr),pn},pn.tick=function(pi){nn=pi,ut||(ut=nn),ro((nn+(_t-ut))*Ki.speed)},pn.seek=function(pi){ro(Mi(pi))},pn.pause=function(){pn.paused=!0,Ti()},pn.play=function(){!pn.paused||(pn.paused=!1,Dn.push(pn),Ti(),Pi||Zi())},pn.reverse=function(){Oi(),Ti()},pn.restart=function(){pn.reset(),pn.play()},pn.finished=ei,pn.reset(),pn.autoplay&&pn.play(),pn}function zr(Qe,ut){for(var _t=ut.length;_t--;)F(Qe,ut[_t].animatable.target)&&ut.splice(_t,1)}function Pr(Qe){for(var ut=Ke(Qe),_t=Dn.length;_t--;){var nn=Dn[_t],Wt=nn.animations,mn=nn.children;zr(ut,Wt);for(var Un=mn.length;Un--;){var Xn=mn[Un],ei=Xn.animations;zr(ut,ei),!ei.length&&!Xn.children.length&&mn.splice(Un,1)}!Wt.length&&!mn.length&&nn.pause()}}function ar(Qe,ut){ut===void 0&&(ut={});var _t=ut.direction||"normal",nn=ut.easing?ue(ut.easing):null,Wt=ut.grid,mn=ut.axis,Un=ut.from||0,Xn=Un==="first",ei=Un==="center",pn=Un==="last",Oi=R.arr(Qe),Mi=parseFloat(Oi?Qe[0]:Qe),Ti=Oi?parseFloat(Qe[1]):0,Xr=Mn(Oi?Qe[1]:Qe)||0,zi=ut.start||0+(Oi?Mi:0),er=[],kr=0;return function(Os,ro,pi){if(Xn&&(Un=0),ei&&(Un=(pi-1)/2),pn&&(Un=pi-1),!er.length){for(var Rr=0;Rr<pi;Rr++){if(!Wt)er.push(Math.abs(Un-Rr));else{var to=ei?(Wt[0]-1)/2:Un%Wt[0],as=ei?(Wt[1]-1)/2:Math.floor(Un/Wt[0]),ce=Rr%Wt[0],ge=Math.floor(Rr/Wt[0]),_e=to-ce,Le=as-ge,qe=Math.sqrt(_e*_e+Le*Le);mn==="x"&&(qe=-_e),mn==="y"&&(qe=-Le),er.push(qe)}kr=Math.max.apply(Math,er)}nn&&(er=er.map(function(St){return nn(St/kr)*kr})),_t==="reverse"&&(er=er.map(function(St){return mn?St<0?St*-1:-St:Math.abs(kr-St)}))}var yt=Oi?(Ti-Mi)/kr:Mi;return zi+yt*(Math.round(er[ro]*100)/100)+Xr}}function Qr(Qe){Qe===void 0&&(Qe={});var ut=Ki(Qe);return ut.duration=0,ut.add=function(_t,nn){var Wt=Dn.indexOf(ut),mn=ut.children;Wt>-1&&Dn.splice(Wt,1);function Un(Ti){Ti.passThrough=!0}for(var Xn=0;Xn<mn.length;Xn++)Un(mn[Xn]);var ei=fe(_t,X(C,Qe));ei.targets=ei.targets||Qe.targets;var pn=ut.duration;ei.autoplay=!1,ei.direction=ut.direction,ei.timelineOffset=R.und(nn)?pn:ni(nn,pn),Un(ut),ut.seek(ei.timelineOffset);var Oi=Ki(ei);Un(Oi),mn.push(Oi);var Mi=Ft(mn,Qe);return ut.delay=Mi.delay,ut.endDelay=Mi.endDelay,ut.duration=Mi.duration,ut.seek(0),ut.reset(),ut.autoplay&&ut.play(),ut},ut}Ki.version="3.0.0",Ki.speed=1,Ki.running=Dn,Ki.remove=Pr,Ki.get=tn,Ki.set=fi,Ki.convertPx=Bt,Ki.path=ee,Ki.setDashoffset=Oe,Ki.stagger=ar,Ki.timeline=Qr,Ki.easing=ue,Ki.penner=te,Ki.random=function(Qe,ut){return Math.floor(Math.random()*(ut-Qe+1))+Qe};const xs=Ki},"./node_modules/three-bmfont-text/index.js":(S,I,h)=>{var g=h("./node_modules/layout-bmfont-text/index.js");h("./node_modules/inherits/inherits_browser.js");var C=h("./node_modules/quad-indices/index.js"),v=h("./node_modules/three-buffer-vertex-data/index.js"),y=h("./node_modules/object-assign/index.js"),E=h("./node_modules/three-bmfont-text/lib/vertices.js"),_=h("./node_modules/three-bmfont-text/lib/utils.js");S.exports=function(b){return new m(b)};class m extends THREE.BufferGeometry{constructor(b){super(),typeof b=="string"&&(b={text:b}),this._opt=y({},b),b&&this.update(b)}update(b){if(typeof b=="string"&&(b={text:b}),b=y({},this._opt,b),!b.font)throw new TypeError("must specify a { font } in options");this.layout=g(b);var O=b.flipY!==!1,R=b.font,L=R.common.scaleW,P=R.common.scaleH,Y=this.layout.glyphs.filter(function(ue){var xe=ue.data;return xe.width*xe.height>0});this.visibleGlyphs=Y;var J=E.positions(Y),j=E.uvs(Y,L,P,O),U=C({clockwise:!0,type:"uint16",count:Y.length});if(v.index(this,U,1,"uint16"),v.attr(this,"position",J,2),v.attr(this,"uv",j,2),!b.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(b.multipage){var te=E.pages(Y);v.attr(this,"page",te,1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var b=this.attributes.position.array,O=this.attributes.position.itemSize;if(!b||!O||b.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}_.computeSphere(b,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var b=this.boundingBox,O=this.attributes.position.array,R=this.attributes.position.itemSize;if(!O||!R||O.length<2){b.makeEmpty();return}_.computeBox(O,b)}}},"./node_modules/three-bmfont-text/lib/utils.js":S=>{var I=2,h={min:[0,0],max:[0,0]};function g(C){var v=C.length/I;h.min[0]=C[0],h.min[1]=C[1],h.max[0]=C[0],h.max[1]=C[1];for(var y=0;y<v;y++){var E=C[y*I+0],_=C[y*I+1];h.min[0]=Math.min(E,h.min[0]),h.min[1]=Math.min(_,h.min[1]),h.max[0]=Math.max(E,h.max[0]),h.max[1]=Math.max(_,h.max[1])}}S.exports.computeBox=function(C,v){g(C),v.min.set(h.min[0],h.min[1],0),v.max.set(h.max[0],h.max[1],0)},S.exports.computeSphere=function(C,v){g(C);var y=h.min[0],E=h.min[1],_=h.max[0],m=h.max[1],w=_-y,b=m-E,O=Math.sqrt(w*w+b*b);v.center.set(y+w/2,E+b/2,0),v.radius=O/2}},"./node_modules/three-bmfont-text/lib/vertices.js":S=>{S.exports.pages=function(h){var g=new Float32Array(h.length*4*1),C=0;return h.forEach(function(v){var y=v.data.page||0;g[C++]=y,g[C++]=y,g[C++]=y,g[C++]=y}),g},S.exports.uvs=function(h,g,C,v){var y=new Float32Array(h.length*4*2),E=0;return h.forEach(function(_){var m=_.data,w=m.x+m.width,b=m.y+m.height,O=m.x/g,R=m.y/C,L=w/g,P=b/C;v&&(R=(C-m.y)/C,P=(C-b)/C),y[E++]=O,y[E++]=R,y[E++]=O,y[E++]=P,y[E++]=L,y[E++]=P,y[E++]=L,y[E++]=R}),y},S.exports.positions=function(h){var g=new Float32Array(h.length*4*2),C=0;return h.forEach(function(v){var y=v.data,E=v.position[0]+y.xoffset,_=v.position[1]+y.yoffset,m=y.width,w=y.height;g[C++]=E,g[C++]=_,g[C++]=E,g[C++]=_+w,g[C++]=E+m,g[C++]=_+w,g[C++]=E+m,g[C++]=_}),g}},"./node_modules/three-buffer-vertex-data/index.js":(S,I,h)=>{var g=h("./node_modules/flatten-vertex-data/index.js");S.exports.attr=v,S.exports.index=C;function C(E,_,m,w){typeof m!="number"&&(m=1),typeof w!="string"&&(w="uint16");var b=!E.index&&typeof E.setIndex!="function",O=b?E.getAttribute("index"):E.index,R=y(O,_,m,w);R&&(b?E.addAttribute("index",R):E.index=R)}function v(E,_,m,w,b){if(typeof w!="number"&&(w=3),typeof b!="string"&&(b="float32"),Array.isArray(m)&&Array.isArray(m[0])&&m[0].length!==w)throw new Error("Nested vertex array has unexpected size; expected "+w+" but found "+m[0].length);var O=E.getAttribute(_),R=y(O,m,w,b);E.setAttribute(_,R)}function y(E,_,m,w){return _=_||[],_=g(_,w),E=new THREE.BufferAttribute(_,m),E.itemSize=m,E.needsUpdate=!0,E}},"./node_modules/webvr-polyfill/build/webvr-polyfill.js":function(S,I,h){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(g,C){S.exports=C()})(this,function(){var g=typeof window<"u"?window:typeof h.g<"u"?h.g:typeof self<"u"?self:{};function C(J){return J&&J.__esModule&&Object.prototype.hasOwnProperty.call(J,"default")?J.default:J}function v(J,j){return j={exports:{}},J(j,j.exports),j.exports}var y=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},E=function(j,U){for(var te=0,ue=j.length;te<ue;te++)U[te]=j[te]},_=function(j,U){for(var te in U)U.hasOwnProperty(te)&&(j[te]=U[te]);return j},m=v(function(J,j){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(U,te){J.exports=te()})(g,function(){var U=function(ce,ge){if(!(ce instanceof ge))throw new TypeError("Cannot call a class as a function")},te=function(){function ce(ge,_e){for(var Le=0;Le<_e.length;Le++){var qe=_e[Le];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(ge,qe.key,qe)}}return function(ge,_e,Le){return _e&&ce(ge.prototype,_e),Le&&ce(ge,Le),ge}}(),ue=function(){function ce(ge,_e){var Le=[],qe=!0,yt=!1,St=void 0;try{for(var wn=ge[Symbol.iterator](),xn;!(qe=(xn=wn.next()).done)&&(Le.push(xn.value),!(_e&&Le.length===_e));qe=!0);}catch(Nt){yt=!0,St=Nt}finally{try{!qe&&wn.return&&wn.return()}finally{if(yt)throw St}}return Le}return function(ge,_e){if(Array.isArray(ge))return ge;if(Symbol.iterator in Object(ge))return ce(ge,_e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xe=.001,Ee=1,V=function(ge,_e){return"data:"+ge+","+encodeURIComponent(_e)},q=function(ge,_e,Le){return ge+(_e-ge)*Le},Q=function(){var ce=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return ce}}(),F=function(){var ce=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return ce}}(),z=function(){var ce=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return ce}}(),X=function(){var ce=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return ce}}(),fe=function(){var ce=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),ge=ce?parseInt(ce[1],10):null;return function(){return ge}}(),Ae=function(){var ce=!1;return ce=Q()&&z()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return ce}}(),Se=function(){var ce=!1;if(fe()===65){var ge=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(ge){var _e=ge[1].split("."),Le=ue(_e,4);Le[0],Le[1];var qe=Le[2],yt=Le[3];ce=parseInt(qe,10)===3325&&parseInt(yt,10)<148}}return function(){return ce}}(),Be=function(){var ce=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return ce}}(),Ge=function(){var ge=window.orientation==90||window.orientation==-90;return Be()?!ge:ge},ht=function(ge){return!(isNaN(ge)||ge<=xe||ge>Ee)},xt=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},at=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},Gt=function(ge){if(F())return!1;if(ge.requestFullscreen)ge.requestFullscreen();else if(ge.webkitRequestFullscreen)ge.webkitRequestFullscreen();else if(ge.mozRequestFullScreen)ge.mozRequestFullScreen();else if(ge.msRequestFullscreen)ge.msRequestFullscreen();else return!1;return!0},wt=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},Yt=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},Mn=function(ge,_e,Le,qe){var yt=ge.createShader(ge.VERTEX_SHADER);ge.shaderSource(yt,_e),ge.compileShader(yt);var St=ge.createShader(ge.FRAGMENT_SHADER);ge.shaderSource(St,Le),ge.compileShader(St);var wn=ge.createProgram();ge.attachShader(wn,yt),ge.attachShader(wn,St);for(var xn in qe)ge.bindAttribLocation(wn,qe[xn],xn);return ge.linkProgram(wn),ge.deleteShader(yt),ge.deleteShader(St),wn},je=function(ge,_e){for(var Le={},qe=ge.getProgramParameter(_e,ge.ACTIVE_UNIFORMS),yt="",St=0;St<qe;St++){var wn=ge.getActiveUniform(_e,St);yt=wn.name.replace("[0]",""),Le[yt]=ge.getUniformLocation(_e,yt)}return Le},rt=function(ge,_e,Le,qe,yt,St,wn){var xn=1/(_e-Le),Nt=1/(qe-yt),an=1/(St-wn);return ge[0]=-2*xn,ge[1]=0,ge[2]=0,ge[3]=0,ge[4]=0,ge[5]=-2*Nt,ge[6]=0,ge[7]=0,ge[8]=0,ge[9]=0,ge[10]=2*an,ge[11]=0,ge[12]=(_e+Le)*xn,ge[13]=(yt+qe)*Nt,ge[14]=(wn+St)*an,ge[15]=1,ge},At=function(){var ge=!1;return function(_e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(_e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(_e.substr(0,4)))&&(ge=!0)}(navigator.userAgent||navigator.vendor||window.opera),ge},Bt=function(ge,_e){for(var Le in _e)_e.hasOwnProperty(Le)&&(ge[Le]=_e[Le]);return ge},Pt=function(ge){if(Q()){var _e=ge.style.width,Le=ge.style.height;ge.style.width=parseInt(_e)+1+"px",ge.style.height=parseInt(Le)+"px",setTimeout(function(){ge.style.width=_e,ge.style.height=Le},100)}window.canvas=ge},qt=function(){var ce=Math.PI/180,ge=Math.PI*.25;function _e(Nt,an,Pn,xi){var Ui=Math.tan(an?an.upDegrees*ce:ge),Xi=Math.tan(an?an.downDegrees*ce:ge),fr=Math.tan(an?an.leftDegrees*ce:ge),ur=Math.tan(an?an.rightDegrees*ce:ge),Vi=2/(fr+ur),hs=2/(Ui+Xi);return Nt[0]=Vi,Nt[1]=0,Nt[2]=0,Nt[3]=0,Nt[4]=0,Nt[5]=hs,Nt[6]=0,Nt[7]=0,Nt[8]=-((fr-ur)*Vi*.5),Nt[9]=(Ui-Xi)*hs*.5,Nt[10]=xi/(Pn-xi),Nt[11]=-1,Nt[12]=0,Nt[13]=0,Nt[14]=xi*Pn/(Pn-xi),Nt[15]=0,Nt}function Le(Nt,an,Pn){var xi=an[0],Ui=an[1],Xi=an[2],fr=an[3],ur=xi+xi,Vi=Ui+Ui,hs=Xi+Xi,Jr=xi*ur,vr=xi*Vi,Ss=xi*hs,po=Ui*Vi,Qs=Ui*hs,Zr=Xi*hs,Fs=fr*ur,Ds=fr*Vi,_o=fr*hs;return Nt[0]=1-(po+Zr),Nt[1]=vr+_o,Nt[2]=Ss-Ds,Nt[3]=0,Nt[4]=vr-_o,Nt[5]=1-(Jr+Zr),Nt[6]=Qs+Fs,Nt[7]=0,Nt[8]=Ss+Ds,Nt[9]=Qs-Fs,Nt[10]=1-(Jr+po),Nt[11]=0,Nt[12]=Pn[0],Nt[13]=Pn[1],Nt[14]=Pn[2],Nt[15]=1,Nt}function qe(Nt,an,Pn){var xi=Pn[0],Ui=Pn[1],Xi=Pn[2],fr,ur,Vi,hs,Jr,vr,Ss,po,Qs,Zr,Fs,Ds;return an===Nt?(Nt[12]=an[0]*xi+an[4]*Ui+an[8]*Xi+an[12],Nt[13]=an[1]*xi+an[5]*Ui+an[9]*Xi+an[13],Nt[14]=an[2]*xi+an[6]*Ui+an[10]*Xi+an[14],Nt[15]=an[3]*xi+an[7]*Ui+an[11]*Xi+an[15]):(fr=an[0],ur=an[1],Vi=an[2],hs=an[3],Jr=an[4],vr=an[5],Ss=an[6],po=an[7],Qs=an[8],Zr=an[9],Fs=an[10],Ds=an[11],Nt[0]=fr,Nt[1]=ur,Nt[2]=Vi,Nt[3]=hs,Nt[4]=Jr,Nt[5]=vr,Nt[6]=Ss,Nt[7]=po,Nt[8]=Qs,Nt[9]=Zr,Nt[10]=Fs,Nt[11]=Ds,Nt[12]=fr*xi+Jr*Ui+Qs*Xi+an[12],Nt[13]=ur*xi+vr*Ui+Zr*Xi+an[13],Nt[14]=Vi*xi+Ss*Ui+Fs*Xi+an[14],Nt[15]=hs*xi+po*Ui+Ds*Xi+an[15]),Nt}function yt(Nt,an){var Pn=an[0],xi=an[1],Ui=an[2],Xi=an[3],fr=an[4],ur=an[5],Vi=an[6],hs=an[7],Jr=an[8],vr=an[9],Ss=an[10],po=an[11],Qs=an[12],Zr=an[13],Fs=an[14],Ds=an[15],_o=Pn*ur-xi*fr,Qa=Pn*Vi-Ui*fr,js=Pn*hs-Xi*fr,sl=xi*Vi-Ui*ur,Pl=xi*hs-Xi*ur,Ia=Ui*hs-Xi*Vi,Ra=Jr*Zr-vr*Qs,Ba=Jr*Fs-Ss*Qs,ja=Jr*Ds-po*Qs,ol=vr*Fs-Ss*Zr,tc=vr*Ds-po*Zr,Ol=Ss*Ds-po*Fs,qs=_o*Ol-Qa*tc+js*ol+sl*ja-Pl*Ba+Ia*Ra;return qs?(qs=1/qs,Nt[0]=(ur*Ol-Vi*tc+hs*ol)*qs,Nt[1]=(Ui*tc-xi*Ol-Xi*ol)*qs,Nt[2]=(Zr*Ia-Fs*Pl+Ds*sl)*qs,Nt[3]=(Ss*Pl-vr*Ia-po*sl)*qs,Nt[4]=(Vi*ja-fr*Ol-hs*Ba)*qs,Nt[5]=(Pn*Ol-Ui*ja+Xi*Ba)*qs,Nt[6]=(Fs*js-Qs*Ia-Ds*Qa)*qs,Nt[7]=(Jr*Ia-Ss*js+po*Qa)*qs,Nt[8]=(fr*tc-ur*ja+hs*Ra)*qs,Nt[9]=(xi*ja-Pn*tc-Xi*Ra)*qs,Nt[10]=(Qs*Pl-Zr*js+Ds*_o)*qs,Nt[11]=(vr*js-Jr*Pl-po*_o)*qs,Nt[12]=(ur*Ba-fr*ol-Vi*Ra)*qs,Nt[13]=(Pn*ol-xi*Ba+Ui*Ra)*qs,Nt[14]=(Zr*Qa-Qs*sl-Fs*_o)*qs,Nt[15]=(Jr*sl-vr*Qa+Ss*_o)*qs,Nt):null}var St=new Float32Array([0,0,0,1]),wn=new Float32Array([0,0,0]);function xn(Nt,an,Pn,xi,Ui,Xi){_e(Nt,xi||null,Xi.depthNear,Xi.depthFar);var fr=Pn.orientation||St,ur=Pn.position||wn;Le(an,fr,ur),Ui&&qe(an,an,Ui),yt(an,an)}return function(Nt,an,Pn){return!Nt||!an?!1:(Nt.pose=an,Nt.timestamp=an.timestamp,xn(Nt.leftProjectionMatrix,Nt.leftViewMatrix,an,Pn._getFieldOfView("left"),Pn._getEyeOffset("left"),Pn),xn(Nt.rightProjectionMatrix,Nt.rightViewMatrix,an,Pn._getFieldOfView("right"),Pn._getEyeOffset("right"),Pn),!0)}}(),un=function(){var ge=window.self!==window.top,_e=dn(document.referrer),Le=dn(window.location.href);return ge&&_e!==Le},dn=function(ge){var _e,Le=ge.indexOf("://");Le!==-1?_e=Le+3:_e=0;var qe=ge.indexOf("/",_e);return qe===-1&&(qe=ge.length),ge.substring(0,qe)},bn=function(ge){if(ge.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var _e=2*Math.acos(ge.w);return _e},tn=function(){var ce={};return function(ge,_e){ce[ge]===void 0&&(console.warn("webvr-polyfill: "+_e),ce[ge]=!0)}}(),ri=function(ge,_e){var Le=_e?"Please use "+_e+" instead.":"";tn(ge,ge+" has been deprecated. This may not work on native WebVR displays. "+Le)};function ni(ce,ge,_e){if(!ge){_e(ce);return}for(var Le=[],qe=null,yt=0;yt<ge.length;++yt){var St=ge[yt];switch(St){case ce.TEXTURE_BINDING_2D:case ce.TEXTURE_BINDING_CUBE_MAP:var wn=ge[++yt];if(wn<ce.TEXTURE0||wn>ce.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),Le.push(null,null);break}qe||(qe=ce.getParameter(ce.ACTIVE_TEXTURE)),ce.activeTexture(wn),Le.push(ce.getParameter(St),null);break;case ce.ACTIVE_TEXTURE:qe=ce.getParameter(ce.ACTIVE_TEXTURE),Le.push(null);break;default:Le.push(ce.getParameter(St));break}}_e(ce);for(var yt=0;yt<ge.length;++yt){var St=ge[yt],xn=Le[yt];switch(St){case ce.ACTIVE_TEXTURE:break;case ce.ARRAY_BUFFER_BINDING:ce.bindBuffer(ce.ARRAY_BUFFER,xn);break;case ce.COLOR_CLEAR_VALUE:ce.clearColor(xn[0],xn[1],xn[2],xn[3]);break;case ce.COLOR_WRITEMASK:ce.colorMask(xn[0],xn[1],xn[2],xn[3]);break;case ce.CURRENT_PROGRAM:ce.useProgram(xn);break;case ce.ELEMENT_ARRAY_BUFFER_BINDING:ce.bindBuffer(ce.ELEMENT_ARRAY_BUFFER,xn);break;case ce.FRAMEBUFFER_BINDING:ce.bindFramebuffer(ce.FRAMEBUFFER,xn);break;case ce.RENDERBUFFER_BINDING:ce.bindRenderbuffer(ce.RENDERBUFFER,xn);break;case ce.TEXTURE_BINDING_2D:var wn=ge[++yt];if(wn<ce.TEXTURE0||wn>ce.TEXTURE31)break;ce.activeTexture(wn),ce.bindTexture(ce.TEXTURE_2D,xn);break;case ce.TEXTURE_BINDING_CUBE_MAP:var wn=ge[++yt];if(wn<ce.TEXTURE0||wn>ce.TEXTURE31)break;ce.activeTexture(wn),ce.bindTexture(ce.TEXTURE_CUBE_MAP,xn);break;case ce.VIEWPORT:ce.viewport(xn[0],xn[1],xn[2],xn[3]);break;case ce.BLEND:case ce.CULL_FACE:case ce.DEPTH_TEST:case ce.SCISSOR_TEST:case ce.STENCIL_TEST:xn?ce.enable(St):ce.disable(St);break;default:console.log("No GL restore behavior for 0x"+St.toString(16));break}qe&&ce.activeTexture(qe)}}var zt=ni,Ue=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),Pe=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function Ye(ce,ge,_e,Le){this.gl=ce,this.cardboardUI=ge,this.bufferScale=_e,this.dirtySubmitFrameBindings=Le,this.ctxAttribs=ce.getContextAttributes(),this.instanceExt=ce.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=ce.drawingBufferWidth,this.bufferHeight=ce.drawingBufferHeight,this.realBindFramebuffer=ce.bindFramebuffer,this.realEnable=ce.enable,this.realDisable=ce.disable,this.realColorMask=ce.colorMask,this.realClearColor=ce.clearColor,this.realViewport=ce.viewport,Q()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(ce.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(ce.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=Mn(ce,Ue,Pe,this.attribs),this.uniforms=je(ce,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=ce.createBuffer(),this.indexBuffer=ce.createBuffer(),this.indexCount=0,this.renderTarget=ce.createTexture(),this.framebuffer=ce.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=ce.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=ce.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=ce.createRenderbuffer()),this.patch(),this.onResize()}Ye.prototype.destroy=function(){var ce=this.gl;this.unpatch(),ce.deleteProgram(this.program),ce.deleteBuffer(this.vertexBuffer),ce.deleteBuffer(this.indexBuffer),ce.deleteTexture(this.renderTarget),ce.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&ce.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&ce.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&ce.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Ye.prototype.onResize=function(){var ce=this.gl,ge=this,_e=[ce.RENDERBUFFER_BINDING,ce.TEXTURE_BINDING_2D,ce.TEXTURE0];zt(ce,_e,function(Le){ge.realBindFramebuffer.call(Le,Le.FRAMEBUFFER,null),ge.scissorTest&&ge.realDisable.call(Le,Le.SCISSOR_TEST),ge.realColorMask.call(Le,!0,!0,!0,!0),ge.realViewport.call(Le,0,0,Le.drawingBufferWidth,Le.drawingBufferHeight),ge.realClearColor.call(Le,0,0,0,1),Le.clear(Le.COLOR_BUFFER_BIT),ge.realBindFramebuffer.call(Le,Le.FRAMEBUFFER,ge.framebuffer),Le.bindTexture(Le.TEXTURE_2D,ge.renderTarget),Le.texImage2D(Le.TEXTURE_2D,0,ge.ctxAttribs.alpha?Le.RGBA:Le.RGB,ge.bufferWidth,ge.bufferHeight,0,ge.ctxAttribs.alpha?Le.RGBA:Le.RGB,Le.UNSIGNED_BYTE,null),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MAG_FILTER,Le.LINEAR),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MIN_FILTER,Le.LINEAR),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_S,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_T,Le.CLAMP_TO_EDGE),Le.framebufferTexture2D(Le.FRAMEBUFFER,Le.COLOR_ATTACHMENT0,Le.TEXTURE_2D,ge.renderTarget,0),ge.ctxAttribs.depth&&ge.ctxAttribs.stencil?(Le.bindRenderbuffer(Le.RENDERBUFFER,ge.depthStencilBuffer),Le.renderbufferStorage(Le.RENDERBUFFER,Le.DEPTH_STENCIL,ge.bufferWidth,ge.bufferHeight),Le.framebufferRenderbuffer(Le.FRAMEBUFFER,Le.DEPTH_STENCIL_ATTACHMENT,Le.RENDERBUFFER,ge.depthStencilBuffer)):ge.ctxAttribs.depth?(Le.bindRenderbuffer(Le.RENDERBUFFER,ge.depthBuffer),Le.renderbufferStorage(Le.RENDERBUFFER,Le.DEPTH_COMPONENT16,ge.bufferWidth,ge.bufferHeight),Le.framebufferRenderbuffer(Le.FRAMEBUFFER,Le.DEPTH_ATTACHMENT,Le.RENDERBUFFER,ge.depthBuffer)):ge.ctxAttribs.stencil&&(Le.bindRenderbuffer(Le.RENDERBUFFER,ge.stencilBuffer),Le.renderbufferStorage(Le.RENDERBUFFER,Le.STENCIL_INDEX8,ge.bufferWidth,ge.bufferHeight),Le.framebufferRenderbuffer(Le.FRAMEBUFFER,Le.STENCIL_ATTACHMENT,Le.RENDERBUFFER,ge.stencilBuffer)),!Le.checkFramebufferStatus(Le.FRAMEBUFFER)===Le.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),ge.realBindFramebuffer.call(Le,Le.FRAMEBUFFER,ge.lastBoundFramebuffer),ge.scissorTest&&ge.realEnable.call(Le,Le.SCISSOR_TEST),ge.realColorMask.apply(Le,ge.colorMask),ge.realViewport.apply(Le,ge.viewport),ge.realClearColor.apply(Le,ge.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},Ye.prototype.patch=function(){if(!this.isPatched){var ce=this,ge=this.gl.canvas,_e=this.gl;Q()||(ge.width=xt()*this.bufferScale,ge.height=at()*this.bufferScale,Object.defineProperty(ge,"width",{configurable:!0,enumerable:!0,get:function(){return ce.bufferWidth},set:function(qe){ce.bufferWidth=qe,ce.realCanvasWidth.set.call(ge,qe),ce.onResize()}}),Object.defineProperty(ge,"height",{configurable:!0,enumerable:!0,get:function(){return ce.bufferHeight},set:function(qe){ce.bufferHeight=qe,ce.realCanvasHeight.set.call(ge,qe),ce.onResize()}})),this.lastBoundFramebuffer=_e.getParameter(_e.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(_e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(Le,qe){ce.lastBoundFramebuffer=qe||ce.framebuffer,ce.realBindFramebuffer.call(_e,Le,ce.lastBoundFramebuffer)},this.cullFace=_e.getParameter(_e.CULL_FACE),this.depthTest=_e.getParameter(_e.DEPTH_TEST),this.blend=_e.getParameter(_e.BLEND),this.scissorTest=_e.getParameter(_e.SCISSOR_TEST),this.stencilTest=_e.getParameter(_e.STENCIL_TEST),_e.enable=function(Le){switch(Le){case _e.CULL_FACE:ce.cullFace=!0;break;case _e.DEPTH_TEST:ce.depthTest=!0;break;case _e.BLEND:ce.blend=!0;break;case _e.SCISSOR_TEST:ce.scissorTest=!0;break;case _e.STENCIL_TEST:ce.stencilTest=!0;break}ce.realEnable.call(_e,Le)},_e.disable=function(Le){switch(Le){case _e.CULL_FACE:ce.cullFace=!1;break;case _e.DEPTH_TEST:ce.depthTest=!1;break;case _e.BLEND:ce.blend=!1;break;case _e.SCISSOR_TEST:ce.scissorTest=!1;break;case _e.STENCIL_TEST:ce.stencilTest=!1;break}ce.realDisable.call(_e,Le)},this.colorMask=_e.getParameter(_e.COLOR_WRITEMASK),_e.colorMask=function(Le,qe,yt,St){ce.colorMask[0]=Le,ce.colorMask[1]=qe,ce.colorMask[2]=yt,ce.colorMask[3]=St,ce.realColorMask.call(_e,Le,qe,yt,St)},this.clearColor=_e.getParameter(_e.COLOR_CLEAR_VALUE),_e.clearColor=function(Le,qe,yt,St){ce.clearColor[0]=Le,ce.clearColor[1]=qe,ce.clearColor[2]=yt,ce.clearColor[3]=St,ce.realClearColor.call(_e,Le,qe,yt,St)},this.viewport=_e.getParameter(_e.VIEWPORT),_e.viewport=function(Le,qe,yt,St){ce.viewport[0]=Le,ce.viewport[1]=qe,ce.viewport[2]=yt,ce.viewport[3]=St,ce.realViewport.call(_e,Le,qe,yt,St)},this.isPatched=!0,Pt(ge)}},Ye.prototype.unpatch=function(){if(!!this.isPatched){var ce=this.gl,ge=this.gl.canvas;Q()||(Object.defineProperty(ge,"width",this.realCanvasWidth),Object.defineProperty(ge,"height",this.realCanvasHeight)),ge.width=this.bufferWidth,ge.height=this.bufferHeight,ce.bindFramebuffer=this.realBindFramebuffer,ce.enable=this.realEnable,ce.disable=this.realDisable,ce.colorMask=this.realColorMask,ce.clearColor=this.realClearColor,ce.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&ce.bindFramebuffer(ce.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){Pt(ge)},1)}},Ye.prototype.setTextureBounds=function(ce,ge){ce||(ce=[0,0,.5,1]),ge||(ge=[.5,0,.5,1]),this.viewportOffsetScale[0]=ce[0],this.viewportOffsetScale[1]=ce[1],this.viewportOffsetScale[2]=ce[2],this.viewportOffsetScale[3]=ce[3],this.viewportOffsetScale[4]=ge[0],this.viewportOffsetScale[5]=ge[1],this.viewportOffsetScale[6]=ge[2],this.viewportOffsetScale[7]=ge[3]},Ye.prototype.submitFrame=function(){var ce=this.gl,ge=this,_e=[];if(this.dirtySubmitFrameBindings||_e.push(ce.CURRENT_PROGRAM,ce.ARRAY_BUFFER_BINDING,ce.ELEMENT_ARRAY_BUFFER_BINDING,ce.TEXTURE_BINDING_2D,ce.TEXTURE0),zt(ce,_e,function(qe){ge.realBindFramebuffer.call(qe,qe.FRAMEBUFFER,null);var yt=0,St=0;ge.instanceExt&&(yt=qe.getVertexAttrib(ge.attribs.position,ge.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),St=qe.getVertexAttrib(ge.attribs.texCoord,ge.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),ge.cullFace&&ge.realDisable.call(qe,qe.CULL_FACE),ge.depthTest&&ge.realDisable.call(qe,qe.DEPTH_TEST),ge.blend&&ge.realDisable.call(qe,qe.BLEND),ge.scissorTest&&ge.realDisable.call(qe,qe.SCISSOR_TEST),ge.stencilTest&&ge.realDisable.call(qe,qe.STENCIL_TEST),ge.realColorMask.call(qe,!0,!0,!0,!0),ge.realViewport.call(qe,0,0,qe.drawingBufferWidth,qe.drawingBufferHeight),(ge.ctxAttribs.alpha||Q())&&(ge.realClearColor.call(qe,0,0,0,1),qe.clear(qe.COLOR_BUFFER_BIT)),qe.useProgram(ge.program),qe.bindBuffer(qe.ELEMENT_ARRAY_BUFFER,ge.indexBuffer),qe.bindBuffer(qe.ARRAY_BUFFER,ge.vertexBuffer),qe.enableVertexAttribArray(ge.attribs.position),qe.enableVertexAttribArray(ge.attribs.texCoord),qe.vertexAttribPointer(ge.attribs.position,2,qe.FLOAT,!1,20,0),qe.vertexAttribPointer(ge.attribs.texCoord,3,qe.FLOAT,!1,20,8),ge.instanceExt&&(yt!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.position,0),St!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.texCoord,0)),qe.activeTexture(qe.TEXTURE0),qe.uniform1i(ge.uniforms.diffuse,0),qe.bindTexture(qe.TEXTURE_2D,ge.renderTarget),qe.uniform4fv(ge.uniforms.viewportOffsetScale,ge.viewportOffsetScale),qe.drawElements(qe.TRIANGLES,ge.indexCount,qe.UNSIGNED_SHORT,0),ge.cardboardUI&&ge.cardboardUI.renderNoState(),ge.realBindFramebuffer.call(ge.gl,qe.FRAMEBUFFER,ge.framebuffer),ge.ctxAttribs.preserveDrawingBuffer||(ge.realClearColor.call(qe,0,0,0,0),qe.clear(qe.COLOR_BUFFER_BIT)),ge.dirtySubmitFrameBindings||ge.realBindFramebuffer.call(qe,qe.FRAMEBUFFER,ge.lastBoundFramebuffer),ge.cullFace&&ge.realEnable.call(qe,qe.CULL_FACE),ge.depthTest&&ge.realEnable.call(qe,qe.DEPTH_TEST),ge.blend&&ge.realEnable.call(qe,qe.BLEND),ge.scissorTest&&ge.realEnable.call(qe,qe.SCISSOR_TEST),ge.stencilTest&&ge.realEnable.call(qe,qe.STENCIL_TEST),ge.realColorMask.apply(qe,ge.colorMask),ge.realViewport.apply(qe,ge.viewport),(ge.ctxAttribs.alpha||!ge.ctxAttribs.preserveDrawingBuffer)&&ge.realClearColor.apply(qe,ge.clearColor),ge.instanceExt&&(yt!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.position,yt),St!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.texCoord,St))}),Q()){var Le=ce.canvas;(Le.width!=ge.bufferWidth||Le.height!=ge.bufferHeight)&&(ge.bufferWidth=Le.width,ge.bufferHeight=Le.height,ge.onResize())}},Ye.prototype.updateDeviceInfo=function(ce){var ge=this.gl,_e=this,Le=[ge.ARRAY_BUFFER_BINDING,ge.ELEMENT_ARRAY_BUFFER_BINDING];zt(ge,Le,function(qe){var yt=_e.computeMeshVertices_(_e.meshWidth,_e.meshHeight,ce);if(qe.bindBuffer(qe.ARRAY_BUFFER,_e.vertexBuffer),qe.bufferData(qe.ARRAY_BUFFER,yt,qe.STATIC_DRAW),!_e.indexCount){var St=_e.computeMeshIndices_(_e.meshWidth,_e.meshHeight);qe.bindBuffer(qe.ELEMENT_ARRAY_BUFFER,_e.indexBuffer),qe.bufferData(qe.ELEMENT_ARRAY_BUFFER,St,qe.STATIC_DRAW),_e.indexCount=St.length}})},Ye.prototype.computeMeshVertices_=function(ce,ge,_e){for(var Le=new Float32Array(2*ce*ge*5),qe=_e.getLeftEyeVisibleTanAngles(),yt=_e.getLeftEyeNoLensTanAngles(),St=_e.getLeftEyeVisibleScreenRect(yt),wn=0,xn=0;xn<2;xn++){for(var Nt=0;Nt<ge;Nt++)for(var an=0;an<ce;an++,wn++){var Pn=an/(ce-1),xi=Nt/(ge-1),Ui=Pn,Xi=xi,fr=q(qe[0],qe[2],Pn),ur=q(qe[3],qe[1],xi),Vi=Math.sqrt(fr*fr+ur*ur),hs=_e.distortion.distortInverse(Vi),Jr=fr*hs/Vi,vr=ur*hs/Vi;Pn=(Jr-yt[0])/(yt[2]-yt[0]),xi=(vr-yt[3])/(yt[1]-yt[3]),Pn=(St.x+Pn*St.width-.5)*2,xi=(St.y+xi*St.height-.5)*2,Le[wn*5+0]=Pn,Le[wn*5+1]=xi,Le[wn*5+2]=Ui,Le[wn*5+3]=Xi,Le[wn*5+4]=xn}var Ss=qe[2]-qe[0];qe[0]=-(Ss+qe[0]),qe[2]=Ss-qe[2],Ss=yt[2]-yt[0],yt[0]=-(Ss+yt[0]),yt[2]=Ss-yt[2],St.x=1-(St.x+St.width)}return Le},Ye.prototype.computeMeshIndices_=function(ce,ge){for(var _e=new Uint16Array(2*(ce-1)*(ge-1)*6),Le=ce/2,qe=ge/2,yt=0,St=0,wn=0;wn<2;wn++)for(var xn=0;xn<ge;xn++)for(var Nt=0;Nt<ce;Nt++,yt++)Nt==0||xn==0||(Nt<=Le==xn<=qe?(_e[St++]=yt,_e[St++]=yt-ce-1,_e[St++]=yt-ce,_e[St++]=yt-ce-1,_e[St++]=yt,_e[St++]=yt-1):(_e[St++]=yt-1,_e[St++]=yt-ce,_e[St++]=yt,_e[St++]=yt-ce,_e[St++]=yt-1,_e[St++]=yt-ce-1));return _e},Ye.prototype.getOwnPropertyDescriptor_=function(ce,ge){var _e=Object.getOwnPropertyDescriptor(ce,ge);return(_e.get===void 0||_e.set===void 0)&&(_e.configurable=!0,_e.enumerable=!0,_e.get=function(){return this.getAttribute(ge)},_e.set=function(Le){this.setAttribute(ge,Le)}),_e};var ze=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),He=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),et=Math.PI/180,Me=60,Te=12,Oe=20,Ze=1,ae=.75,ee=.3125,se=4,Ie=28,We=1.5;function Ke(ce){this.gl=ce,this.attribs={position:0},this.program=Mn(ce,ze,He,this.attribs),this.uniforms=je(ce,this.program),this.vertexBuffer=ce.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}Ke.prototype.destroy=function(){var ce=this.gl;this.listener&&ce.canvas.removeEventListener("click",this.listener,!1),ce.deleteProgram(this.program),ce.deleteBuffer(this.vertexBuffer)},Ke.prototype.listen=function(ce,ge){var _e=this.gl.canvas;this.listener=function(Le){var qe=_e.clientWidth/2,yt=Ie*We;Le.clientX>qe-yt&&Le.clientX<qe+yt&&Le.clientY>_e.clientHeight-yt?ce(Le):Le.clientX<yt&&Le.clientY<yt&&ge(Le)},_e.addEventListener("click",this.listener,!1)},Ke.prototype.onResize=function(){var ce=this.gl,ge=this,_e=[ce.ARRAY_BUFFER_BINDING];zt(ce,_e,function(Le){var qe=[],yt=Le.drawingBufferWidth/2,St=Math.max(screen.width,screen.height)*window.devicePixelRatio,wn=Le.drawingBufferWidth/St,xn=wn*window.devicePixelRatio,Nt=se*xn/2,an=Ie*We*xn,Pn=Ie*xn/2,xi=(Ie*We-Ie)*xn;qe.push(yt-Nt,an),qe.push(yt-Nt,Le.drawingBufferHeight),qe.push(yt+Nt,an),qe.push(yt+Nt,Le.drawingBufferHeight),ge.gearOffset=qe.length/2;function Ui(hs,Jr){var vr=(90-hs)*et,Ss=Math.cos(vr),po=Math.sin(vr);qe.push(ee*Ss*Pn+yt,ee*po*Pn+Pn),qe.push(Jr*Ss*Pn+yt,Jr*po*Pn+Pn)}for(var Xi=0;Xi<=6;Xi++){var fr=Xi*Me;Ui(fr,Ze),Ui(fr+Te,Ze),Ui(fr+Oe,ae),Ui(fr+(Me-Oe),ae),Ui(fr+(Me-Te),Ze)}ge.gearVertexCount=qe.length/2-ge.gearOffset,ge.arrowOffset=qe.length/2;function ur(hs,Jr){qe.push(xi+hs,Le.drawingBufferHeight-xi-Jr)}var Vi=Nt/Math.sin(45*et);ur(0,Pn),ur(Pn,0),ur(Pn+Vi,Vi),ur(Vi,Pn+Vi),ur(Vi,Pn-Vi),ur(0,Pn),ur(Pn,Pn*2),ur(Pn+Vi,Pn*2-Vi),ur(Vi,Pn-Vi),ur(0,Pn),ur(Vi,Pn-Nt),ur(Ie*xn,Pn-Nt),ur(Vi,Pn+Nt),ur(Ie*xn,Pn+Nt),ge.arrowVertexCount=qe.length/2-ge.arrowOffset,Le.bindBuffer(Le.ARRAY_BUFFER,ge.vertexBuffer),Le.bufferData(Le.ARRAY_BUFFER,new Float32Array(qe),Le.STATIC_DRAW)})},Ke.prototype.render=function(){var ce=this.gl,ge=this,_e=[ce.CULL_FACE,ce.DEPTH_TEST,ce.BLEND,ce.SCISSOR_TEST,ce.STENCIL_TEST,ce.COLOR_WRITEMASK,ce.VIEWPORT,ce.CURRENT_PROGRAM,ce.ARRAY_BUFFER_BINDING];zt(ce,_e,function(Le){Le.disable(Le.CULL_FACE),Le.disable(Le.DEPTH_TEST),Le.disable(Le.BLEND),Le.disable(Le.SCISSOR_TEST),Le.disable(Le.STENCIL_TEST),Le.colorMask(!0,!0,!0,!0),Le.viewport(0,0,Le.drawingBufferWidth,Le.drawingBufferHeight),ge.renderNoState()})},Ke.prototype.renderNoState=function(){var ce=this.gl;ce.useProgram(this.program),ce.bindBuffer(ce.ARRAY_BUFFER,this.vertexBuffer),ce.enableVertexAttribArray(this.attribs.position),ce.vertexAttribPointer(this.attribs.position,2,ce.FLOAT,!1,8,0),ce.uniform4f(this.uniforms.color,1,1,1,1),rt(this.projMat,0,ce.drawingBufferWidth,0,ce.drawingBufferHeight,.1,1024),ce.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),ce.drawArrays(ce.TRIANGLE_STRIP,0,4),ce.drawArrays(ce.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),ce.drawArrays(ce.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function $e(ce){this.coefficients=ce}$e.prototype.distortInverse=function(ce){for(var ge=0,_e=1,Le=ce-this.distort(ge);Math.abs(_e-ge)>1e-4;){var qe=ce-this.distort(_e),yt=_e-qe*((_e-ge)/(qe-Le));ge=_e,_e=yt,Le=qe}return _e},$e.prototype.distort=function(ce){for(var ge=ce*ce,_e=0,Le=0;Le<this.coefficients.length;Le++)_e=ge*(_e+this.coefficients[Le]);return(_e+1)*ce};var Vt=Math.PI/180,$t=180/Math.PI,Xt=function(ge,_e,Le){this.x=ge||0,this.y=_e||0,this.z=Le||0};Xt.prototype={constructor:Xt,set:function(ge,_e,Le){return this.x=ge,this.y=_e,this.z=Le,this},copy:function(ge){return this.x=ge.x,this.y=ge.y,this.z=ge.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var ge=this.length();if(ge!==0){var _e=1/ge;this.multiplyScalar(_e)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(ge){this.x*=ge,this.y*=ge,this.z*=ge},applyQuaternion:function(ge){var _e=this.x,Le=this.y,qe=this.z,yt=ge.x,St=ge.y,wn=ge.z,xn=ge.w,Nt=xn*_e+St*qe-wn*Le,an=xn*Le+wn*_e-yt*qe,Pn=xn*qe+yt*Le-St*_e,xi=-yt*_e-St*Le-wn*qe;return this.x=Nt*xn+xi*-yt+an*-wn-Pn*-St,this.y=an*xn+xi*-St+Pn*-yt-Nt*-wn,this.z=Pn*xn+xi*-wn+Nt*-St-an*-yt,this},dot:function(ge){return this.x*ge.x+this.y*ge.y+this.z*ge.z},crossVectors:function(ge,_e){var Le=ge.x,qe=ge.y,yt=ge.z,St=_e.x,wn=_e.y,xn=_e.z;return this.x=qe*xn-yt*wn,this.y=yt*St-Le*xn,this.z=Le*wn-qe*St,this}};var jt=function(ge,_e,Le,qe){this.x=ge||0,this.y=_e||0,this.z=Le||0,this.w=qe!==void 0?qe:1};jt.prototype={constructor:jt,set:function(ge,_e,Le,qe){return this.x=ge,this.y=_e,this.z=Le,this.w=qe,this},copy:function(ge){return this.x=ge.x,this.y=ge.y,this.z=ge.z,this.w=ge.w,this},setFromEulerXYZ:function(ge,_e,Le){var qe=Math.cos(ge/2),yt=Math.cos(_e/2),St=Math.cos(Le/2),wn=Math.sin(ge/2),xn=Math.sin(_e/2),Nt=Math.sin(Le/2);return this.x=wn*yt*St+qe*xn*Nt,this.y=qe*xn*St-wn*yt*Nt,this.z=qe*yt*Nt+wn*xn*St,this.w=qe*yt*St-wn*xn*Nt,this},setFromEulerYXZ:function(ge,_e,Le){var qe=Math.cos(ge/2),yt=Math.cos(_e/2),St=Math.cos(Le/2),wn=Math.sin(ge/2),xn=Math.sin(_e/2),Nt=Math.sin(Le/2);return this.x=wn*yt*St+qe*xn*Nt,this.y=qe*xn*St-wn*yt*Nt,this.z=qe*yt*Nt-wn*xn*St,this.w=qe*yt*St+wn*xn*Nt,this},setFromAxisAngle:function(ge,_e){var Le=_e/2,qe=Math.sin(Le);return this.x=ge.x*qe,this.y=ge.y*qe,this.z=ge.z*qe,this.w=Math.cos(Le),this},multiply:function(ge){return this.multiplyQuaternions(this,ge)},multiplyQuaternions:function(ge,_e){var Le=ge.x,qe=ge.y,yt=ge.z,St=ge.w,wn=_e.x,xn=_e.y,Nt=_e.z,an=_e.w;return this.x=Le*an+St*wn+qe*Nt-yt*xn,this.y=qe*an+St*xn+yt*wn-Le*Nt,this.z=yt*an+St*Nt+Le*xn-qe*wn,this.w=St*an-Le*wn-qe*xn-yt*Nt,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var ge=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return ge===0?(this.x=0,this.y=0,this.z=0,this.w=1):(ge=1/ge,this.x=this.x*ge,this.y=this.y*ge,this.z=this.z*ge,this.w=this.w*ge),this},slerp:function(ge,_e){if(_e===0)return this;if(_e===1)return this.copy(ge);var Le=this.x,qe=this.y,yt=this.z,St=this.w,wn=St*ge.w+Le*ge.x+qe*ge.y+yt*ge.z;if(wn<0?(this.w=-ge.w,this.x=-ge.x,this.y=-ge.y,this.z=-ge.z,wn=-wn):this.copy(ge),wn>=1)return this.w=St,this.x=Le,this.y=qe,this.z=yt,this;var xn=Math.acos(wn),Nt=Math.sqrt(1-wn*wn);if(Math.abs(Nt)<.001)return this.w=.5*(St+this.w),this.x=.5*(Le+this.x),this.y=.5*(qe+this.y),this.z=.5*(yt+this.z),this;var an=Math.sin((1-_e)*xn)/Nt,Pn=Math.sin(_e*xn)/Nt;return this.w=St*an+this.w*Pn,this.x=Le*an+this.x*Pn,this.y=qe*an+this.y*Pn,this.z=yt*an+this.z*Pn,this},setFromUnitVectors:function(){var ce,ge,_e=1e-6;return function(Le,qe){return ce===void 0&&(ce=new Xt),ge=Le.dot(qe)+1,ge<_e?(ge=0,Math.abs(Le.x)>Math.abs(Le.z)?ce.set(-Le.y,Le.x,0):ce.set(0,-Le.z,Le.y)):ce.crossVectors(Le,qe),this.x=ce.x,this.y=ce.y,this.z=ce.z,this.w=ge,this.normalize(),this}}()};function on(ce){this.width=ce.width||xt(),this.height=ce.height||at(),this.widthMeters=ce.widthMeters,this.heightMeters=ce.heightMeters,this.bevelMeters=ce.bevelMeters}var In=new on({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),di=new on({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),fi={CardboardV1:new vn({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new vn({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Nn(ce,ge){this.viewer=fi.CardboardV2,this.updateDeviceParams(ce),this.distortion=new $e(this.viewer.distortionCoefficients);for(var _e=0;_e<ge.length;_e++){var Le=ge[_e];fi[Le.id]=new vn(Le)}}Nn.prototype.updateDeviceParams=function(ce){this.device=this.determineDevice_(ce)||this.device},Nn.prototype.getDevice=function(){return this.device},Nn.prototype.setViewer=function(ce){this.viewer=ce,this.distortion=new $e(this.viewer.distortionCoefficients)},Nn.prototype.determineDevice_=function(ce){if(!ce)return Q()?(console.warn("Using fallback iOS device measurements."),di):(console.warn("Using fallback Android device measurements."),In);var ge=.0254,_e=ge/ce.xdpi,Le=ge/ce.ydpi,qe=xt(),yt=at();return new on({widthMeters:_e*qe,heightMeters:Le*yt,bevelMeters:ce.bevelMm*.001})},Nn.prototype.getDistortedFieldOfViewLeftEye=function(){var ce=this.viewer,ge=this.device,_e=this.distortion,Le=ce.screenLensDistance,qe=(ge.widthMeters-ce.interLensDistance)/2,yt=ce.interLensDistance/2,St=ce.baselineLensDistance-ge.bevelMeters,wn=ge.heightMeters-St,xn=$t*Math.atan(_e.distort(qe/Le)),Nt=$t*Math.atan(_e.distort(yt/Le)),an=$t*Math.atan(_e.distort(St/Le)),Pn=$t*Math.atan(_e.distort(wn/Le));return{leftDegrees:Math.min(xn,ce.fov),rightDegrees:Math.min(Nt,ce.fov),downDegrees:Math.min(an,ce.fov),upDegrees:Math.min(Pn,ce.fov)}},Nn.prototype.getLeftEyeVisibleTanAngles=function(){var ce=this.viewer,ge=this.device,_e=this.distortion,Le=Math.tan(-Vt*ce.fov),qe=Math.tan(Vt*ce.fov),yt=Math.tan(Vt*ce.fov),St=Math.tan(-Vt*ce.fov),wn=ge.widthMeters/4,xn=ge.heightMeters/2,Nt=ce.baselineLensDistance-ge.bevelMeters-xn,an=ce.interLensDistance/2-wn,Pn=-Nt,xi=ce.screenLensDistance,Ui=_e.distort((an-wn)/xi),Xi=_e.distort((Pn+xn)/xi),fr=_e.distort((an+wn)/xi),ur=_e.distort((Pn-xn)/xi),Vi=new Float32Array(4);return Vi[0]=Math.max(Le,Ui),Vi[1]=Math.min(qe,Xi),Vi[2]=Math.min(yt,fr),Vi[3]=Math.max(St,ur),Vi},Nn.prototype.getLeftEyeNoLensTanAngles=function(){var ce=this.viewer,ge=this.device,_e=this.distortion,Le=new Float32Array(4),qe=_e.distortInverse(Math.tan(-Vt*ce.fov)),yt=_e.distortInverse(Math.tan(Vt*ce.fov)),St=_e.distortInverse(Math.tan(Vt*ce.fov)),wn=_e.distortInverse(Math.tan(-Vt*ce.fov)),xn=ge.widthMeters/4,Nt=ge.heightMeters/2,an=ce.baselineLensDistance-ge.bevelMeters-Nt,Pn=ce.interLensDistance/2-xn,xi=-an,Ui=ce.screenLensDistance,Xi=(Pn-xn)/Ui,fr=(xi+Nt)/Ui,ur=(Pn+xn)/Ui,Vi=(xi-Nt)/Ui;return Le[0]=Math.max(qe,Xi),Le[1]=Math.min(yt,fr),Le[2]=Math.min(St,ur),Le[3]=Math.max(wn,Vi),Le},Nn.prototype.getLeftEyeVisibleScreenRect=function(ce){var ge=this.viewer,_e=this.device,Le=ge.screenLensDistance,qe=(_e.widthMeters-ge.interLensDistance)/2,yt=ge.baselineLensDistance-_e.bevelMeters,St=(ce[0]*Le+qe)/_e.widthMeters,wn=(ce[1]*Le+yt)/_e.heightMeters,xn=(ce[2]*Le+qe)/_e.widthMeters,Nt=(ce[3]*Le+yt)/_e.heightMeters;return{x:St,y:Nt,width:xn-St,height:wn-Nt}},Nn.prototype.getFieldOfViewLeftEye=function(ce){return ce?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Nn.prototype.getFieldOfViewRightEye=function(ce){var ge=this.getFieldOfViewLeftEye(ce);return{leftDegrees:ge.rightDegrees,rightDegrees:ge.leftDegrees,upDegrees:ge.upDegrees,downDegrees:ge.downDegrees}},Nn.prototype.getUndistortedFieldOfViewLeftEye=function(){var ce=this.getUndistortedParams_();return{leftDegrees:$t*Math.atan(ce.outerDist),rightDegrees:$t*Math.atan(ce.innerDist),downDegrees:$t*Math.atan(ce.bottomDist),upDegrees:$t*Math.atan(ce.topDist)}},Nn.prototype.getUndistortedViewportLeftEye=function(){var ce=this.getUndistortedParams_(),ge=this.viewer,_e=this.device,Le=ge.screenLensDistance,qe=_e.widthMeters/Le,yt=_e.heightMeters/Le,St=_e.width/qe,wn=_e.height/yt,xn=Math.round((ce.eyePosX-ce.outerDist)*St),Nt=Math.round((ce.eyePosY-ce.bottomDist)*wn);return{x:xn,y:Nt,width:Math.round((ce.eyePosX+ce.innerDist)*St)-xn,height:Math.round((ce.eyePosY+ce.topDist)*wn)-Nt}},Nn.prototype.getUndistortedParams_=function(){var ce=this.viewer,ge=this.device,_e=this.distortion,Le=ce.screenLensDistance,qe=ce.interLensDistance/2/Le,yt=ge.widthMeters/Le,St=ge.heightMeters/Le,wn=yt/2-qe,xn=(ce.baselineLensDistance-ge.bevelMeters)/Le,Nt=ce.fov,an=_e.distortInverse(Math.tan(Vt*Nt)),Pn=Math.min(wn,an),xi=Math.min(qe,an),Ui=Math.min(xn,an),Xi=Math.min(St-xn,an);return{outerDist:Pn,innerDist:xi,topDist:Xi,bottomDist:Ui,eyePosX:wn,eyePosY:xn}};function vn(ce){this.id=ce.id,this.label=ce.label,this.fov=ce.fov,this.interLensDistance=ce.interLensDistance,this.baselineLensDistance=ce.baselineLensDistance,this.screenLensDistance=ce.screenLensDistance,this.distortionCoefficients=ce.distortionCoefficients,this.inverseCoefficients=ce.inverseCoefficients}Nn.Viewers=fi;var Ft=1,yn="2019-11-09T17:36:14Z",Gn=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],Dn={format:Ft,last_updated:yn,devices:Gn};function bi(ce,ge){if(this.dpdb=Dn,this.recalculateDeviceParams_(),ce){this.onDeviceParamsUpdated=ge;var _e=new XMLHttpRequest,Le=this;_e.open("GET",ce,!0),_e.addEventListener("load",function(){Le.loading=!1,_e.status>=200&&_e.status<=299?(Le.dpdb=JSON.parse(_e.response),Le.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),_e.send()}}bi.prototype.getDeviceParams=function(){return this.deviceParams},bi.prototype.recalculateDeviceParams_=function(){var ce=this.calcDeviceParams_();ce?(this.deviceParams=ce,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},bi.prototype.calcDeviceParams_=function(){var ce=this.dpdb;if(!ce)return console.error("DPDB not available."),null;if(ce.format!=1)return console.error("DPDB has unexpected format version."),null;if(!ce.devices||!ce.devices.length)return console.error("DPDB does not have a devices section."),null;var ge=navigator.userAgent||navigator.vendor||window.opera,_e=xt(),Le=at();if(!ce.devices)return console.error("DPDB has no devices section."),null;for(var qe=0;qe<ce.devices.length;qe++){var yt=ce.devices[qe];if(!yt.rules){console.warn("Device["+qe+"] has no rules section.");continue}if(yt.type!="ios"&&yt.type!="android"){console.warn("Device["+qe+"] has invalid type.");continue}if(Q()==(yt.type=="ios")){for(var St=!1,wn=0;wn<yt.rules.length;wn++){var xn=yt.rules[wn];if(this.ruleMatches_(xn,ge,_e,Le)){St=!0;break}}if(!!St){var Nt=yt.dpi[0]||yt.dpi,an=yt.dpi[1]||yt.dpi;return new Pi({xdpi:Nt,ydpi:an,bevelMm:yt.bw})}}}return console.warn("No DPDB device match."),null},bi.prototype.ruleMatches_=function(ce,ge,_e,Le){if(!ce.ua&&!ce.res||(ce.ua&&ce.ua.substring(0,2)==="SM"&&(ce.ua=ce.ua.substring(0,7)),ce.ua&&ge.indexOf(ce.ua)<0))return!1;if(ce.res){if(!ce.res[0]||!ce.res[1])return!1;var qe=ce.res[0],yt=ce.res[1];if(Math.min(_e,Le)!=Math.min(qe,yt)||Math.max(_e,Le)!=Math.max(qe,yt))return!1}return!0};function Pi(ce){this.xdpi=ce.xdpi,this.ydpi=ce.ydpi,this.bevelMm=ce.bevelMm}function Zi(ce,ge){this.set(ce,ge)}Zi.prototype.set=function(ce,ge){this.sample=ce,this.timestampS=ge},Zi.prototype.copy=function(ce){this.set(ce.sample,ce.timestampS)};function Dr(ce,ge){this.kFilter=ce,this.isDebug=ge,this.currentAccelMeasurement=new Zi,this.currentGyroMeasurement=new Zi,this.previousGyroMeasurement=new Zi,Q()?this.filterQ=new jt(-1,0,0,1):this.filterQ=new jt(1,0,0,1),this.previousFilterQ=new jt,this.previousFilterQ.copy(this.filterQ),this.accelQ=new jt,this.isOrientationInitialized=!1,this.estimatedGravity=new Xt,this.measuredGravity=new Xt,this.gyroIntegralQ=new jt}Dr.prototype.addAccelMeasurement=function(ce,ge){this.currentAccelMeasurement.set(ce,ge)},Dr.prototype.addGyroMeasurement=function(ce,ge){this.currentGyroMeasurement.set(ce,ge);var _e=ge-this.previousGyroMeasurement.timestampS;ht(_e)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Dr.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var ce=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,ge=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,ce);this.gyroIntegralQ.multiply(ge),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(ge);var _e=new jt;_e.copy(this.filterQ),_e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(_e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Le=new jt;Le.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Le.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",$t*bn(Le),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var qe=new jt;qe.copy(this.filterQ),qe.multiply(Le),this.filterQ.slerp(qe,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Dr.prototype.getOrientation=function(){return this.filterQ},Dr.prototype.accelToQuaternion_=function(ce){var ge=new Xt;ge.copy(ce),ge.normalize();var _e=new jt;return _e.setFromUnitVectors(new Xt(0,0,-1),ge),_e.inverse(),_e},Dr.prototype.gyroToQuaternionDelta_=function(ce,ge){var _e=new jt,Le=new Xt;return Le.copy(ce),Le.normalize(),_e.setFromAxisAngle(Le,ce.length()*ge),_e};function Ki(ce,ge){this.predictionTimeS=ce,this.isDebug=ge,this.previousQ=new jt,this.previousTimestampS=null,this.deltaQ=new jt,this.outQ=new jt}Ki.prototype.getPrediction=function(ce,ge,_e){if(!this.previousTimestampS)return this.previousQ.copy(ce),this.previousTimestampS=_e,ce;var Le=new Xt;Le.copy(ge),Le.normalize();var qe=ge.length();if(qe<Vt*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",($t*qe).toFixed(1)),this.outQ.copy(ce),this.previousQ.copy(ce),this.outQ;var yt=qe*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Le,yt),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(ce),this.previousTimestampS=_e,this.outQ};function zr(ce,ge,_e,Le){this.yawOnly=_e,this.accelerometer=new Xt,this.gyroscope=new Xt,this.filter=new Dr(ce,Le),this.posePredictor=new Ki(ge,Le),this.isFirefoxAndroid=X(),this.isIOS=Q();var qe=fe();this.isDeviceMotionInRadians=!this.isIOS&&qe&&qe<66,this.isWithoutDeviceMotion=Se()||Ae(),this.filterToWorldQ=new jt,Q()?this.filterToWorldQ.setFromAxisAngle(new Xt(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new Xt(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new jt,this.worldToScreenQ=new jt,this.originalPoseAdjustQ=new jt,this.originalPoseAdjustQ.setFromAxisAngle(new Xt(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),Ge()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new jt,this.orientationOut_=new Float32Array(4),this.start()}zr.prototype.getPosition=function(){return null},zr.prototype.getOrientation=function(){var ce=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var qe=new jt().setFromAxisAngle(new Xt(0,0,-1),0),yt=new jt;return window.orientation===-90?yt.setFromAxisAngle(new Xt(0,1,0),Math.PI/-2):yt.setFromAxisAngle(new Xt(0,1,0),Math.PI/2),qe.multiply(yt)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var qe=new jt;return qe.setFromAxisAngle(new Xt(1,0,0),-Math.PI/2),qe}(),ce=this._deviceOrientationQ;var _e=new jt;return _e.copy(ce),_e.multiply(this.deviceOrientationFilterToWorldQ),_e.multiply(this.resetQ),_e.multiply(this.worldToScreenQ),_e.multiplyQuaternions(this.deviceOrientationFixQ,_e),this.yawOnly&&(_e.x=0,_e.z=0,_e.normalize()),this.orientationOut_[0]=_e.x,this.orientationOut_[1]=_e.y,this.orientationOut_[2]=_e.z,this.orientationOut_[3]=_e.w,this.orientationOut_}else{var ge=this.filter.getOrientation();ce=this.posePredictor.getPrediction(ge,this.gyroscope,this.previousTimestampS)}var _e=new jt;return _e.copy(this.filterToWorldQ),_e.multiply(this.resetQ),_e.multiply(ce),_e.multiply(this.worldToScreenQ),this.yawOnly&&(_e.x=0,_e.z=0,_e.normalize()),this.orientationOut_[0]=_e.x,this.orientationOut_[1]=_e.y,this.orientationOut_[2]=_e.z,this.orientationOut_[3]=_e.w,this.orientationOut_},zr.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),Ge()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},zr.prototype.onDeviceOrientation_=function(ce){this._deviceOrientationQ=this._deviceOrientationQ||new jt;var ge=ce.alpha,_e=ce.beta,Le=ce.gamma;ge=(ge||0)*Math.PI/180,_e=(_e||0)*Math.PI/180,Le=(Le||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(_e,ge,-Le)},zr.prototype.onDeviceMotion_=function(ce){this.updateDeviceMotion_(ce)},zr.prototype.updateDeviceMotion_=function(ce){var ge=ce.accelerationIncludingGravity,_e=ce.rotationRate,Le=ce.timeStamp/1e3,qe=Le-this.previousTimestampS;if(qe<0){tn("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=Le;return}else if(qe<=xe||qe>Ee){tn("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=Le;return}this.accelerometer.set(-ge.x,-ge.y,-ge.z),_e&&(Be()?this.gyroscope.set(-_e.beta,_e.alpha,_e.gamma):this.gyroscope.set(_e.alpha,_e.beta,_e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Le)),this.filter.addAccelMeasurement(this.accelerometer,Le),this.previousTimestampS=Le},zr.prototype.onOrientationChange_=function(ce){this.setScreenTransform_()},zr.prototype.onMessage_=function(ce){var ge=ce.data;if(!(!ge||!ge.type)){var _e=ge.type.toLowerCase();_e==="devicemotion"&&this.updateDeviceMotion_(ge.deviceMotionEvent)}},zr.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Xt(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Xt(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},zr.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),Q()&&un()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},zr.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var Pr=60,ar=new Xt(1,0,0),Qr=new Xt(0,0,1),xs=new jt;xs.setFromAxisAngle(ar,-Math.PI/2),xs.multiply(new jt().setFromAxisAngle(Qr,Math.PI/2));var Qe=function(){function ce(ge){U(this,ce),this.config=ge,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new jt,this._outQ=new jt,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return te(ce,[{key:"init",value:function(){var _e=null;try{_e=new RelativeOrientationSensor({frequency:Pr,referenceFrame:"screen"}),_e.addEventListener("error",this._onSensorError)}catch(Le){this.errors.push(Le),Le.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):Le.name==="ReferenceError"?this.useDeviceMotion():console.error(Le)}_e&&(this.api="sensor",this.sensor=_e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new zr(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var _e=this.sensor.quaternion;this._sensorQ.set(_e[0],_e[1],_e[2],_e[3]);var Le=this._outQ;return Le.copy(xs),Le.multiply(this._sensorQ),this.config.YAW_ONLY&&(Le.x=Le.z=0,Le.normalize()),this._out[0]=Le.x,this._out[1]=Le.y,this._out[2]=Le.z,this._out[3]=Le.w,this._out}},{key:"_onSensorError",value:function(_e){this.errors.push(_e.error),_e.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):_e.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(_e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),ce}(),ut="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function _t(){this.loadIcon_();var ce=document.createElement("div"),St=ce.style;St.position="fixed",St.top=0,St.right=0,St.bottom=0,St.left=0,St.backgroundColor="gray",St.fontFamily="sans-serif",St.zIndex=1e6;var ge=document.createElement("img");ge.src=this.icon;var St=ge.style;St.marginLeft="25%",St.marginTop="25%",St.width="50%",ce.appendChild(ge);var _e=document.createElement("div"),St=_e.style;St.textAlign="center",St.fontSize="16px",St.lineHeight="24px",St.margin="24px 25%",St.width="50%",_e.innerHTML="Place your phone into your Cardboard viewer.",ce.appendChild(_e);var Le=document.createElement("div"),St=Le.style;St.backgroundColor="#CFD8DC",St.position="fixed",St.bottom=0,St.width="100%",St.height="48px",St.padding="14px 24px",St.boxSizing="border-box",St.color="#656A6B",ce.appendChild(Le);var qe=document.createElement("div");qe.style.float="left",qe.innerHTML="No Cardboard viewer?";var yt=document.createElement("a");yt.href="https://www.google.com/get/cardboard/get-cardboard/",yt.innerHTML="get one",yt.target="_blank";var St=yt.style;St.float="right",St.fontWeight=600,St.textTransform="uppercase",St.borderLeft="1px solid gray",St.paddingLeft="24px",St.textDecoration="none",St.color="#656A6B",Le.appendChild(qe),Le.appendChild(yt),this.overlay=ce,this.text=_e,this.hide()}_t.prototype.show=function(ce){!ce&&!this.overlay.parentElement?document.body.appendChild(this.overlay):ce&&(this.overlay.parentElement&&this.overlay.parentElement!=ce&&this.overlay.parentElement.removeChild(this.overlay),ce.appendChild(this.overlay)),this.overlay.style.display="block";var ge=this.overlay.querySelector("img"),_e=ge.style;Ge()?(_e.width="20%",_e.marginLeft="40%",_e.marginTop="3%"):(_e.width="50%",_e.marginLeft="25%",_e.marginTop="25%")},_t.prototype.hide=function(){this.overlay.style.display="none"},_t.prototype.showTemporarily=function(ce,ge){this.show(ge),this.timer=setTimeout(this.hide.bind(this),ce)},_t.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},_t.prototype.update=function(){this.disableShowTemporarily(),!Ge()&&At()?this.show():this.hide()},_t.prototype.loadIcon_=function(){this.icon=V("image/svg+xml",ut)};var nn="CardboardV1",Wt="WEBVR_CARDBOARD_VIEWER",mn="webvr-polyfill-viewer-selector";function Un(ce){try{this.selectedKey=localStorage.getItem(Wt)}catch(ge){console.error("Failed to load viewer profile: %s",ge)}this.selectedKey||(this.selectedKey=ce||nn),this.dialog=this.createDialog_(Nn.Viewers),this.root=null,this.onChangeCallbacks_=[]}Un.prototype.show=function(ce){this.root=ce,ce.appendChild(this.dialog);var ge=this.dialog.querySelector("#"+this.selectedKey);ge.checked=!0,this.dialog.style.display="block"},Un.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Un.prototype.getCurrentViewer=function(){return Nn.Viewers[this.selectedKey]},Un.prototype.getSelectedKey_=function(){var ce=this.dialog.querySelector("input[name=field]:checked");return ce?ce.id:null},Un.prototype.onChange=function(ce){this.onChangeCallbacks_.push(ce)},Un.prototype.fireOnChange_=function(ce){for(var ge=0;ge<this.onChangeCallbacks_.length;ge++)this.onChangeCallbacks_[ge](ce)},Un.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!Nn.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(Nn.Viewers[this.selectedKey]);try{localStorage.setItem(Wt,this.selectedKey)}catch(ce){console.error("Failed to save viewer profile: %s",ce)}this.hide()},Un.prototype.createDialog_=function(ce){var ge=document.createElement("div");ge.classList.add(mn),ge.style.display="none";var _e=document.createElement("div"),yt=_e.style;yt.position="fixed",yt.left=0,yt.top=0,yt.width="100%",yt.height="100%",yt.background="rgba(0, 0, 0, 0.3)",_e.addEventListener("click",this.hide.bind(this));var Le=280,qe=document.createElement("div"),yt=qe.style;yt.boxSizing="border-box",yt.position="fixed",yt.top="24px",yt.left="50%",yt.marginLeft=-Le/2+"px",yt.width=Le+"px",yt.padding="24px",yt.overflow="hidden",yt.background="#fafafa",yt.fontFamily="'Roboto', sans-serif",yt.boxShadow="0px 5px 20px #666",qe.appendChild(this.createH1_("Select your viewer"));for(var St in ce)qe.appendChild(this.createChoice_(St,ce[St].label));return qe.appendChild(this.createButton_("Save",this.onSave_.bind(this))),ge.appendChild(_e),ge.appendChild(qe),ge},Un.prototype.createH1_=function(ce){var ge=document.createElement("h1"),_e=ge.style;return _e.color="black",_e.fontSize="20px",_e.fontWeight="bold",_e.marginTop=0,_e.marginBottom="24px",ge.innerHTML=ce,ge},Un.prototype.createChoice_=function(ce,ge){var _e=document.createElement("div");_e.style.marginTop="8px",_e.style.color="black";var Le=document.createElement("input");Le.style.fontSize="30px",Le.setAttribute("id",ce),Le.setAttribute("type","radio"),Le.setAttribute("value",ce),Le.setAttribute("name","field");var qe=document.createElement("label");return qe.style.marginLeft="4px",qe.setAttribute("for",ce),qe.innerHTML=ge,_e.appendChild(Le),_e.appendChild(qe),_e},Un.prototype.createButton_=function(ce,ge){var _e=document.createElement("button");_e.innerHTML=ce;var Le=_e.style;return Le.float="right",Le.textTransform="uppercase",Le.color="#1094f7",Le.fontSize="14px",Le.letterSpacing=0,Le.border=0,Le.background="none",Le.marginTop="16px",_e.addEventListener("click",ge),_e};var Xn=typeof window<"u"?window:typeof g<"u"?g:typeof self<"u"?self:{};function ei(ce){return ce&&ce.__esModule&&Object.prototype.hasOwnProperty.call(ce,"default")?ce.default:ce}function pn(ce,ge){return ge={exports:{}},ce(ge,ge.exports),ge.exports}var Oi=pn(function(ce,ge){(function(Le,qe){ce.exports=qe()})(Xn,function(){return function(_e){var Le={};function qe(yt){if(Le[yt])return Le[yt].exports;var St=Le[yt]={i:yt,l:!1,exports:{}};return _e[yt].call(St.exports,St,St.exports,qe),St.l=!0,St.exports}return qe.m=_e,qe.c=Le,qe.d=function(yt,St,wn){qe.o(yt,St)||Object.defineProperty(yt,St,{configurable:!1,enumerable:!0,get:wn})},qe.n=function(yt){var St=yt&&yt.__esModule?function(){return yt.default}:function(){return yt};return qe.d(St,"a",St),St},qe.o=function(yt,St){return Object.prototype.hasOwnProperty.call(yt,St)},qe.p="",qe(qe.s=0)}([function(_e,Le,qe){var yt=function(){function an(Pn,xi){for(var Ui=0;Ui<xi.length;Ui++){var Xi=xi[Ui];Xi.enumerable=Xi.enumerable||!1,Xi.configurable=!0,"value"in Xi&&(Xi.writable=!0),Object.defineProperty(Pn,Xi.key,Xi)}}return function(Pn,xi,Ui){return xi&&an(Pn.prototype,xi),Ui&&an(Pn,Ui),Pn}}();function St(an,Pn){if(!(an instanceof Pn))throw new TypeError("Cannot call a class as a function")}var wn=qe(1),xn=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,Nt=function(){function an(){St(this,an),xn?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",wn),this.noSleepVideo.addEventListener("timeupdate",function(Pn){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return yt(an,[{key:"enable",value:function(){xn?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){xn?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),an}();_e.exports=Nt},function(_e,Le,qe){_e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Mi=ei(Oi),Ti=1e3,Xr=[0,0,.5,1],zi=[.5,0,.5,1],er=window.requestAnimationFrame,kr=window.cancelAnimationFrame;function Os(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function ro(ce){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:ce.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:ce.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:ce.canPresent},maxLayers:{writable:!1,enumerable:!0,value:ce.maxLayers},hasOrientation:{enumerable:!0,get:function(){return ri("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),ce.hasOrientation}}})}function pi(ce){ce=ce||{};var ge="wakelock"in ce?ce.wakelock:!0;this.isPolyfilled=!0,this.displayId=Ti++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return ri("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new ro({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,ge&&At()&&(this.wakelock_=new Mi)}pi.prototype.getFrameData=function(ce){return qt(ce,this._getPose(),this)},pi.prototype.getPose=function(){return ri("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},pi.prototype.resetPose=function(){return ri("VRDisplay.prototype.resetPose"),this._resetPose()},pi.prototype.getImmediatePose=function(){return ri("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},pi.prototype.requestAnimationFrame=function(ce){return er(ce)},pi.prototype.cancelAnimationFrame=function(ce){return kr(ce)},pi.prototype.wrapForFullscreen=function(ce){if(Q())return ce;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var ge=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",ge.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==ce)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=ce,this.originalParent_=ce.parentElement,this.originalParent_||document.body.appendChild(ce),!this.fullscreenWrapper_.parentElement){var _e=this.fullscreenElement_.parentElement;_e.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),_e.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var Le=this;function qe(){if(!!Le.fullscreenElement_){var yt=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];Le.fullscreenElement_.setAttribute("style",yt.join("; ")+";")}}return qe(),this.fullscreenWrapper_},pi.prototype.removeFullscreenWrapper=function(){if(!!this.fullscreenElement_){var ce=this.fullscreenElement_;this.fullscreenElementCachedStyle_?ce.setAttribute("style",this.fullscreenElementCachedStyle_):ce.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var ge=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(ce),this.originalParent_===ge?ge.insertBefore(ce,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(ce),ge.removeChild(this.fullscreenWrapper_),ce}},pi.prototype.requestPresent=function(ce){var ge=this.isPresenting,_e=this;return ce instanceof Array||(ri("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),ce=[ce]),new Promise(function(Le,qe){if(!_e.capabilities.canPresent){qe(new Error("VRDisplay is not capable of presenting."));return}if(ce.length==0||ce.length>_e.capabilities.maxLayers){qe(new Error("Invalid number of layers."));return}var yt=ce[0];if(!yt.source){Le();return}var St=yt.leftBounds||Xr,wn=yt.rightBounds||zi;if(ge){var xn=_e.layer_;xn.source!==yt.source&&(xn.source=yt.source);for(var Nt=0;Nt<4;Nt++)xn.leftBounds[Nt]=St[Nt],xn.rightBounds[Nt]=wn[Nt];_e.wrapForFullscreen(_e.layer_.source),_e.updatePresent_(),Le();return}if(_e.layer_={predistorted:yt.predistorted,source:yt.source,leftBounds:St.slice(0),rightBounds:wn.slice(0)},_e.waitingForPresent_=!1,_e.layer_&&_e.layer_.source){var an=_e.wrapForFullscreen(_e.layer_.source),Pn=function(){var Xi=Yt();_e.isPresenting=an===Xi,_e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(fr){console.error("screen.orientation.lock() failed due to",fr.message)}),_e.waitingForPresent_=!1,_e.beginPresent_(),Le()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),_e.removeFullscreenWrapper(),_e.disableWakeLock(),_e.endPresent_(),_e.removeFullscreenListeners_()),_e.fireVRDisplayPresentChange_()},xi=function(){!_e.waitingForPresent_||(_e.removeFullscreenWrapper(),_e.removeFullscreenListeners_(),_e.disableWakeLock(),_e.waitingForPresent_=!1,_e.isPresenting=!1,qe(new Error("Unable to present.")))};_e.addFullscreenListeners_(an,Pn,xi),Gt(an)?(_e.enableWakeLock(),_e.waitingForPresent_=!0):(Q()||F())&&(_e.enableWakeLock(),_e.isPresenting=!0,_e.beginPresent_(),_e.fireVRDisplayPresentChange_(),Le())}!_e.waitingForPresent_&&!Q()&&(wt(),qe(new Error("Unable to present.")))})},pi.prototype.exitPresent=function(){var ce=this.isPresenting,ge=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(_e,Le){ce?(!wt()&&Q()&&(ge.endPresent_(),ge.fireVRDisplayPresentChange_()),F()&&(ge.removeFullscreenWrapper(),ge.removeFullscreenListeners_(),ge.endPresent_(),ge.fireVRDisplayPresentChange_()),_e()):Le(new Error("Was not presenting to VRDisplay."))})},pi.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},pi.prototype.fireVRDisplayPresentChange_=function(){var ce=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(ce)},pi.prototype.fireVRDisplayConnect_=function(){var ce=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(ce)},pi.prototype.addFullscreenListeners_=function(ce,ge,_e){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=ce,this.fullscreenChangeHandler_=ge,this.fullscreenErrorHandler_=_e,ge&&(document.fullscreenEnabled?ce.addEventListener("fullscreenchange",ge,!1):document.webkitFullscreenEnabled?ce.addEventListener("webkitfullscreenchange",ge,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",ge,!1):document.msFullscreenEnabled&&ce.addEventListener("msfullscreenchange",ge,!1)),_e&&(document.fullscreenEnabled?ce.addEventListener("fullscreenerror",_e,!1):document.webkitFullscreenEnabled?ce.addEventListener("webkitfullscreenerror",_e,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",_e,!1):document.msFullscreenEnabled&&ce.addEventListener("msfullscreenerror",_e,!1))},pi.prototype.removeFullscreenListeners_=function(){if(!!this.fullscreenEventTarget_){var ce=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var ge=this.fullscreenChangeHandler_;ce.removeEventListener("fullscreenchange",ge,!1),ce.removeEventListener("webkitfullscreenchange",ge,!1),document.removeEventListener("mozfullscreenchange",ge,!1),ce.removeEventListener("msfullscreenchange",ge,!1)}if(this.fullscreenErrorHandler_){var _e=this.fullscreenErrorHandler_;ce.removeEventListener("fullscreenerror",_e,!1),ce.removeEventListener("webkitfullscreenerror",_e,!1),document.removeEventListener("mozfullscreenerror",_e,!1),ce.removeEventListener("msfullscreenerror",_e,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},pi.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},pi.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},pi.prototype.beginPresent_=function(){},pi.prototype.endPresent_=function(){},pi.prototype.submitFrame=function(ce){},pi.prototype.getEyeParameters=function(ce){return null};var Rr={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},to={LEFT:"left",RIGHT:"right"};function as(ce){var ge=Bt({},Rr);ce=Bt(ge,ce||{}),pi.call(this,{wakelock:ce.MOBILE_WAKE_LOCK}),this.config=ce,this.displayName="Cardboard VRDisplay",this.capabilities=new ro({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Qe(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new bi(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Nn(this.dpdb_.getDeviceParams(),ce.ADDITIONAL_VIEWERS),this.viewerSelector_=new Un(ce.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new _t),Q()&&window.addEventListener("resize",this.onResize_.bind(this))}return as.prototype=Object.create(pi.prototype),as.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},as.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},as.prototype._getFieldOfView=function(ce){var ge;if(ce==to.LEFT)ge=this.deviceInfo_.getFieldOfViewLeftEye();else if(ce==to.RIGHT)ge=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",ce),null;return ge},as.prototype._getEyeOffset=function(ce){var ge;if(ce==to.LEFT)ge=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(ce==to.RIGHT)ge=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",ce),null;return ge},as.prototype.getEyeParameters=function(ce){var ge=this._getEyeOffset(ce),_e=this._getFieldOfView(ce),Le={offset:ge,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(Le,"fieldOfView",{enumerable:!0,get:function(){return ri("VRFieldOfView","VRFrameData's projection matrices"),_e}}),Le},as.prototype.onDeviceParamsUpdated_=function(ce){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(ce),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},as.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},as.prototype.beginPresent_=function(){var ce=this.layer_.source.getContext("webgl");ce||(ce=this.layer_.source.getContext("experimental-webgl")),ce||(ce=this.layer_.source.getContext("webgl2")),ce&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(ce.canvas.width=xt()*this.bufferScale_,ce.canvas.height=at()*this.bufferScale_,this.cardboardUI_=new Ke(ce)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new Ke(ce)),this.distorter_=new Ye(ce,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(ge){this.viewerSelector_.show(this.layer_.source.parentElement),ge.stopPropagation(),ge.preventDefault()}.bind(this),function(ge){this.exitPresent(),ge.stopPropagation(),ge.preventDefault()}.bind(this)),this.rotateInstructions_&&(Ge()&&At()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},as.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},as.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},as.prototype.submitFrame=function(ce){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var ge=this.layer_.source.getContext("webgl");ge||(ge=this.layer_.source.getContext("experimental-webgl")),ge||(ge=this.layer_.source.getContext("webgl2"));var _e=ge.canvas;(_e.width!=this.lastWidth||_e.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=_e.width,this.lastHeight=_e.height,this.cardboardUI_.render()}},as.prototype.onOrientationChange_=function(ce){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},as.prototype.onResize_=function(ce){if(this.layer_){var ge=this.layer_.source.getContext("webgl");ge||(ge=this.layer_.source.getContext("experimental-webgl")),ge||(ge=this.layer_.source.getContext("webgl2"));var _e=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];ge.canvas.setAttribute("style",_e.join("; ")+";"),Pt(ge.canvas)}},as.prototype.onViewerChanged_=function(ce){this.deviceInfo_.setViewer(ce),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},as.prototype.fireVRDisplayDeviceParamsChange_=function(){var ce=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(ce)},as.VRFrameData=Os,as.VRDisplay=pi,as})}),w=C(m),b="0.10.12",O={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function R(J){this.config=_(_({},O),J),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&y())&&(this.enable(),this.getVRDisplays().then(function(j){j&&j[0]&&j[0].fireVRDisplayConnect_&&j[0].fireVRDisplayConnect_()}))}R.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(y()){var J=new w({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(J)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},R.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var J=this.native.VRFrameData,j=new this.native.VRFrameData,U=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(te){if(te instanceof J){U.call(this,te);return}U.call(this,j),te.pose=j.pose,E(j.leftProjectionMatrix,te.leftProjectionMatrix),E(j.rightProjectionMatrix,te.rightProjectionMatrix),E(j.leftViewMatrix,te.leftViewMatrix),E(j.rightViewMatrix,te.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=w.VRDisplay,window.VRFrameData=w.VRFrameData},R.prototype.getVRDisplays=function(){var J=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(j){return j.length>0?j:J.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},R.version=b,R.VRFrameData=w.VRFrameData,R.VRDisplay=w.VRDisplay;var L=Object.freeze({default:R}),P=L&&R||L;typeof g<"u"&&g.window&&(g.document||(g.document=g.window.document),g.navigator||(g.navigator=g.window.navigator));var Y=P;return Y})},"./node_modules/word-wrapper/index.js":S=>{var I=/\n/,h=`
`,g=/\s/;S.exports=function(m,w){var b=S.exports.lines(m,w);return b.map(function(O){return m.substring(O.start,O.end)}).join(`
`)},S.exports.lines=function(w,b){if(b=b||{},b.width===0&&b.mode!=="nowrap")return[];w=w||"";var O=typeof b.width=="number"?b.width:Number.MAX_VALUE,R=Math.max(0,b.start||0),L=typeof b.end=="number"?b.end:w.length,P=b.mode,Y=b.measure||_;return P==="pre"?y(Y,w,R,L,O):E(Y,w,R,L,O,P)};function C(m,w,b,O){var R=m.indexOf(w,b);return R===-1||R>O?O:R}function v(m){return g.test(m)}function y(m,w,b,O,R){for(var L=[],P=b,Y=b;Y<O&&Y<w.length;Y++){var J=w.charAt(Y),j=I.test(J);if(j||Y===O-1){var U=j?Y:Y+1,te=m(w,P,U,R);L.push(te),P=Y+1}}return L}function E(m,w,b,O,R,L){var P=[],Y=R;for(L==="nowrap"&&(Y=Number.MAX_VALUE);b<O&&b<w.length;){for(var J=C(w,h,b,O);b<J&&v(w.charAt(b));)b++;var j=m(w,b,J,Y),U=b+(j.end-j.start),te=U+h.length;if(U<J){for(;U>b&&!v(w.charAt(U));)U--;if(U===b)te>b+h.length&&te--,U=te;else for(te=U;U>b&&v(w.charAt(U-h.length));)U--}if(U>=b){var ue=m(w,b,U,Y);P.push(ue)}b=te}return P}function _(m,w,b,O){var R=Math.min(O,b-w);return{start:w,end:w+R}}},"./node_modules/xhr/index.js":(S,I,h)=>{var g=h("./node_modules/global/window.js"),C=h("./node_modules/is-function/index.js"),v=h("./node_modules/parse-headers/parse-headers.js"),y=h("./node_modules/xtend/immutable.js");S.exports=w,S.exports.default=w,w.XMLHttpRequest=g.XMLHttpRequest||R,w.XDomainRequest="withCredentials"in new w.XMLHttpRequest?w.XMLHttpRequest:g.XDomainRequest,E(["get","put","post","patch","head","delete"],function(L){w[L==="delete"?"del":L]=function(P,Y,J){return Y=m(P,Y,J),Y.method=L.toUpperCase(),b(Y)}});function E(L,P){for(var Y=0;Y<L.length;Y++)P(L[Y])}function _(L){for(var P in L)if(L.hasOwnProperty(P))return!1;return!0}function m(L,P,Y){var J=L;return C(P)?(Y=P,typeof L=="string"&&(J={uri:L})):J=y(P,{uri:L}),J.callback=Y,J}function w(L,P,Y){return P=m(L,P,Y),b(P)}function b(L){if(typeof L.callback>"u")throw new Error("callback argument missing");var P=!1,Y=function(Be,Ge,ht){P||(P=!0,L.callback(Be,Ge,ht))};function J(){ue.readyState===4&&setTimeout(te,0)}function j(){var Se=void 0;if(ue.response?Se=ue.response:Se=ue.responseText||O(ue),X)try{Se=JSON.parse(Se)}catch{}return Se}function U(Se){return clearTimeout(fe),Se instanceof Error||(Se=new Error(""+(Se||"Unknown XMLHttpRequest Error"))),Se.statusCode=0,Y(Se,Ae)}function te(){if(!Ee){var Se;clearTimeout(fe),L.useXDR&&ue.status===void 0?Se=200:Se=ue.status===1223?204:ue.status;var Be=Ae,Ge=null;return Se!==0?(Be={body:j(),statusCode:Se,method:q,headers:{},url:V,rawRequest:ue},ue.getAllResponseHeaders&&(Be.headers=v(ue.getAllResponseHeaders()))):Ge=new Error("Internal XMLHttpRequest Error"),Y(Ge,Be,Be.body)}}var ue=L.xhr||null;ue||(L.cors||L.useXDR?ue=new w.XDomainRequest:ue=new w.XMLHttpRequest);var xe,Ee,V=ue.url=L.uri||L.url,q=ue.method=L.method||"GET",Q=L.body||L.data,F=ue.headers=L.headers||{},z=!!L.sync,X=!1,fe,Ae={body:void 0,headers:{},statusCode:0,method:q,url:V,rawRequest:ue};if("json"in L&&L.json!==!1&&(X=!0,F.accept||F.Accept||(F.Accept="application/json"),q!=="GET"&&q!=="HEAD"&&(F["content-type"]||F["Content-Type"]||(F["Content-Type"]="application/json"),Q=JSON.stringify(L.json===!0?Q:L.json))),ue.onreadystatechange=J,ue.onload=te,ue.onerror=U,ue.onprogress=function(){},ue.onabort=function(){Ee=!0},ue.ontimeout=U,ue.open(q,V,!z,L.username,L.password),z||(ue.withCredentials=!!L.withCredentials),!z&&L.timeout>0&&(fe=setTimeout(function(){if(!Ee){Ee=!0,ue.abort("timeout");var Se=new Error("XMLHttpRequest timeout");Se.code="ETIMEDOUT",U(Se)}},L.timeout)),ue.setRequestHeader)for(xe in F)F.hasOwnProperty(xe)&&ue.setRequestHeader(xe,F[xe]);else if(L.headers&&!_(L.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in L&&(ue.responseType=L.responseType),"beforeSend"in L&&typeof L.beforeSend=="function"&&L.beforeSend(ue),ue.send(Q||null),ue}function O(L){try{if(L.responseType==="document")return L.responseXML;var P=L.responseXML&&L.responseXML.documentElement.nodeName==="parsererror";if(L.responseType===""&&!P)return L.responseXML}catch{}return null}function R(){}},"./node_modules/xml-parse-from-string/index.js":S=>{S.exports=function(){return typeof self.DOMParser<"u"?function(h){var g=new self.DOMParser;return g.parseFromString(h,"application/xml")}:typeof self.ActiveXObject<"u"&&new self.ActiveXObject("Microsoft.XMLDOM")?function(h){var g=new self.ActiveXObject("Microsoft.XMLDOM");return g.async="false",g.loadXML(h),g}:function(h){var g=document.createElement("div");return g.innerHTML=h,g}}()},"./node_modules/xtend/immutable.js":S=>{S.exports=h;var I=Object.prototype.hasOwnProperty;function h(){for(var g={},C=0;C<arguments.length;C++){var v=arguments[C];for(var y in v)I.call(v,y)&&(g[y]=v[y])}return g}},"./src/components/animation.js":(S,I,h)=>{var g=h("./node_modules/super-animejs/lib/anime.es.js").default,C=h("./src/core/component.js").components,v=h("./src/core/component.js").registerComponent,y=h("./src/lib/three.js"),E=h("./src/utils/index.js"),_=new y.Color,m=new y.Color,w=E.entity.getComponentProperty,b=E.entity.setComponentProperty,O={},R="color",L="position",P="rotation",Y="scale",J="components",j="object3D";S.exports.Component=v("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(F){return F===!0||F==="true"?!0:F===!1||F==="false"?!1:parseInt(F,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var F=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){F.animationIsPlaying=!1,F.el.emit("animationcomplete",F.eventDetail,!1),F.id&&F.el.emit("animationcomplete__"+F.id,F.eventDetail,!1)}}},update:function(F){var z=this.config,X=this.data;this.animationIsPlaying=!1,this.data.enabled&&(!X.property||(z.autoplay=!1,z.direction=X.dir,z.duration=X.dur,z.easing=X.easing,z.elasticity=X.elasticity,z.loop=X.loop,z.round=X.round,this.createAndStartAnimation()))},tick:function(F,z){!this.animationIsPlaying||(this.time+=z,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){!this.paused||(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var F=this.data;if(this.updateConfig(),this.animationIsPlaying=!1,this.animation=g(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!(!F.autoplay||F.startEvents&&F.startEvents.length)){if(F.delay){setTimeout(this.beginAnimation,F.delay);return}this.beginAnimation()}},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){if(!!this.data.enabled){if(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=g(this.config),this.data.delay){setTimeout(this.beginAnimation,this.data.delay);return}this.beginAnimation()}},updateConfigForRawColor:function(){var F=this.config,z=this.data,X=this.el,fe,Ae,Se;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){fe=z.from===""?Ee(X,z.property):z.from,Se=z.to,this.setColorConfig(fe,Se),fe=this.fromColor,Se=this.toColor,this.targetsArray.length=0,this.targetsArray.push(fe),F.targets=this.targetsArray;for(Ae in Se)F[Ae]=Se[Ae];F.update=function(){var Be={};return function(Ge){var ht;ht=Ge.animatables[0].target,!(ht.r===Be.r&&ht.g===Be.g&&ht.b===Be.b)&&V(X,z.property,ht,z.type)}}()}},updateConfigForDefault:function(){var F=this.config,z=this.data,X=this.el,fe,Ae,Se,Be;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(z.from===""?fe=Q(z)?Ee(X,z.property):w(X,z.property):fe=z.from,Be=z.to,Se=!isNaN(fe||Be),Se?(fe=parseFloat(fe),Be=parseFloat(Be)):(fe=fe&&fe.toString(),Be=Be&&Be.toString()),Ae=z.to==="true"||z.to==="false"||z.to===!0||z.to===!1,Ae&&(fe=z.from==="true"||z.from===!0?1:0,Be=z.to==="true"||z.to===!0?1:0),this.targets.aframeProperty=fe,F.targets=this.targets,F.aframeProperty=Be,F.update=function(){var Ge;return function(ht){var xt;xt=ht.animatables[0].target.aframeProperty,xt!==Ge&&(Ge=xt,Ae&&(xt=xt>=1),Q(z)?V(X,z.property,xt,z.type):b(X,z.property,xt))}}())},updateConfigForVector:function(){var F=this.config,z=this.data,X=this.el,fe,Ae,Se;Ae=z.from!==""?E.coordinates.parse(z.from):w(X,z.property),Se=E.coordinates.parse(z.to),z.property===P&&(te(Ae),te(Se)),this.targetsArray.length=0,this.targetsArray.push(Ae),F.targets=this.targetsArray;for(fe in Se)F[fe]=Se[fe];if(z.property===L||z.property===P||z.property===Y){F.update=function(){var Be={};return function(Ge){var ht=Ge.animatables[0].target;z.property===Y&&(ht.x=Math.max(1e-4,ht.x),ht.y=Math.max(1e-4,ht.y),ht.z=Math.max(1e-4,ht.z)),!(ht.x===Be.x&&ht.y===Be.y&&ht.z===Be.z)&&(Be.x=ht.x,Be.y=ht.y,Be.z=ht.z,X.object3D[z.property].set(ht.x,ht.y,ht.z))}}();return}F.update=function(){var Be={};return function(Ge){var ht=Ge.animatables[0].target;ht.x===Be.x&&ht.y===Be.y&&ht.z===Be.z||(Be.x=ht.x,Be.y=ht.y,Be.z=ht.z,b(X,z.property,ht))}}()},updateConfig:function(){var F;F=U(this.el,this.data.property),Q(this.data)&&this.data.type===R?this.updateConfigForRawColor():F==="vec2"||F==="vec3"||F==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(F){var z,X=this.data,fe=this.el,Ae=this;return X.from!==""||!X.property.startsWith(J)||(z=q(X.property)[1],fe.components[z])?!1:(fe.addEventListener("componentinitialized",function Se(Be){Be.detail.name===z&&(F(),Ae.animation=g(Ae.config),fe.removeEventListener("componentinitialized",Se))}),!0)},stopRelatedAnimations:function(){var F,z;for(z in this.el.components)F=this.el.components[z],z!==this.attrName&&F.name==="animation"&&(!F.animationIsPlaying||F.data.property===this.data.property&&(F.animationIsPlaying=!1))},addEventListeners:function(){var F=this.data,z=this.el;ue(z,F.startEvents,this.onStartEvent),ue(z,F.pauseEvents,this.pauseAnimation),ue(z,F.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var F=this.data,z=this.el;xe(z,F.startEvents,this.onStartEvent),xe(z,F.pauseEvents,this.pauseAnimation),xe(z,F.resumeEvents,this.resumeAnimation)},setColorConfig:function(F,z){_.set(F),m.set(z),F=this.fromColor,z=this.toColor,F.r=_.r,F.g=_.g,F.b=_.b,z.r=m.r,z.g=m.g,z.b=m.b}});function U(F,z){var X,fe,Ae,Se;return Ae=z.split("."),fe=Ae[0],Se=Ae[1],X=F.components[fe]||C[fe],!X||Se&&!X.schema[Se]?null:Se?X.schema[Se].type:X.schema.type}function te(F){F.x=y.MathUtils.degToRad(F.x),F.y=y.MathUtils.degToRad(F.y),F.z=y.MathUtils.degToRad(F.z)}function ue(F,z,X){var fe;for(fe=0;fe<z.length;fe++)F.addEventListener(z[fe],X)}function xe(F,z,X){var fe;for(fe=0;fe<z.length;fe++)F.removeEventListener(z[fe],X)}function Ee(F,z){var X,fe,Ae;for(fe=q(z),Ae=F,X=0;X<fe.length;X++)Ae=Ae[fe[X]];if(Ae===void 0)throw console.log(F),new Error("[animation] property ("+z+") could not be found");return Ae}function V(F,z,X,fe){var Ae,Se,Be,Ge;for(z.startsWith("object3D.rotation")&&(X=y.MathUtils.degToRad(X)),Se=q(z),Ge=F,Ae=0;Ae<Se.length-1;Ae++)Ge=Ge[Se[Ae]];if(Be=Se[Se.length-1],fe===R){"r"in Ge[Be]?(Ge[Be].r=X.r,Ge[Be].g=X.g,Ge[Be].b=X.b):(Ge[Be].x=X.r,Ge[Be].y=X.g,Ge[Be].z=X.b);return}Ge[Be]=X}function q(F){return F in O||(O[F]=F.split(".")),O[F]}function Q(F){return F.isRawProperty||F.property.startsWith(J)||F.property.startsWith(j)}},"./src/components/camera.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/lib/three.js");S.exports.Component=g("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var v,y=this.el;v=this.camera=new C.PerspectiveCamera,y.setObject3D("camera",v)},update:function(v){var y=this.data,E=this.camera;E.aspect=y.aspect||window.innerWidth/window.innerHeight,E.far=y.far,E.fov=y.fov,E.near=y.near,E.zoom=y.zoom,E.updateProjectionMatrix(),this.updateActiveCamera(v),this.updateSpectatorCamera(v)},updateActiveCamera:function(v){var y=this.data,E=this.el,_=this.system;v&&v.active===y.active||y.spectator||(y.active&&_.activeCameraEl!==E?_.setActiveCamera(E):!y.active&&_.activeCameraEl===E&&_.disableActiveCamera())},updateSpectatorCamera:function(v){var y=this.data,E=this.el,_=this.system;v&&v.spectator===y.spectator||(y.spectator&&_.spectatorCameraEl!==E?_.setSpectatorCamera(E):!y.spectator&&_.spectatorCameraEl===E&&_.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},"./src/components/cursor.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/index.js"),v=C.bind,y={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},E={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},_={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},m={DOWN:["selectstart"],UP:["selectend"]},w="a-mouse-cursor-hover";S.exports.Component=g("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:C.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},multiple:!0,init:function(){var b=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=C.debounce(function(){b.canvasBounds=b.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=v(this.onCursorDown,this),this.onCursorUp=v(this.onCursorUp,this),this.onIntersection=v(this.onIntersection,this),this.onIntersectionCleared=v(this.onIntersectionCleared,this),this.onMouseMove=v(this.onMouseMove,this),this.onEnterVR=v(this.onEnterVR,this)},update:function(b){this.data.rayOrigin!==b.rayOrigin&&this.updateMouseEventListeners()},tick:function(){var b=this.el.sceneEl.frame,O=this.activeXRInput;this.data.rayOrigin==="xrselect"&&b&&O&&this.onMouseMove({frame:b,inputSource:O,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var b=this.el;b.removeState(E.HOVERING),b.removeState(E.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(E.HOVERED),this.removeEventListeners()},addEventListeners:function(){var b,O=this.data,R=this.el,L=this;function P(){b=R.sceneEl.canvas,!(O.downEvents.length||O.upEvents.length)&&(_.DOWN.forEach(function(Y){b.addEventListener(Y,L.onCursorDown)}),_.UP.forEach(function(Y){b.addEventListener(Y,L.onCursorUp)}))}b=R.sceneEl.canvas,b?P():R.sceneEl.addEventListener("render-target-loaded",P),O.downEvents.forEach(function(Y){R.addEventListener(Y,L.onCursorDown)}),O.upEvents.forEach(function(Y){R.addEventListener(Y,L.onCursorUp)}),R.addEventListener("raycaster-intersection",this.onIntersection),R.addEventListener("raycaster-closest-entity-changed",this.onIntersection),R.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),R.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),R.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var b,O=this.data,R=this.el,L=this;b=R.sceneEl.canvas,b&&!O.downEvents.length&&!O.upEvents.length&&(_.DOWN.forEach(function(P){b.removeEventListener(P,L.onCursorDown)}),_.UP.forEach(function(P){b.removeEventListener(P,L.onCursorUp)})),O.downEvents.forEach(function(P){R.removeEventListener(P,L.onCursorDown)}),O.upEvents.forEach(function(P){R.removeEventListener(P,L.onCursorUp)}),R.removeEventListener("raycaster-intersection",this.onIntersection),R.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),b.removeEventListener("mousemove",this.onMouseMove),b.removeEventListener("touchstart",this.onMouseMove),b.removeEventListener("touchmove",this.onMouseMove),R.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),R.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var b,O=this.el;b=O.sceneEl.canvas,b.removeEventListener("mousemove",this.onMouseMove),b.removeEventListener("touchmove",this.onMouseMove),O.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(b.addEventListener("mousemove",this.onMouseMove,!1),b.addEventListener("touchmove",this.onMouseMove,!1),O.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var b=new THREE.Vector3,O=new THREE.Vector2,R=new THREE.Vector3,L={origin:R,direction:b};return function(P){var Y=this.canvasBounds,J=this.el.sceneEl.camera,j,U,te,ue,xe,Ee,V,q;J.parent.updateMatrixWorld(),P.type==="touchmove"||P.type==="touchstart"?U=P.touches.item(0):U=P,j=U.clientX-Y.left,te=U.clientY-Y.top,O.x=j/Y.width*2-1,O.y=-(te/Y.height)*2+1,this.data.rayOrigin==="xrselect"&&(P.type==="selectstart"||P.type==="fakeselectevent")?(ue=P.frame,xe=P.inputSource,Ee=this.el.renderer.xr.getReferenceSpace(),V=ue.getPose(xe.targetRaySpace,Ee),q=V.transform,b.set(0,0,-1),b.applyQuaternion(q.orientation),R.copy(q.position)):P.type==="fakeselectout"?(b.set(0,1,0),R.set(0,9999,0)):J&&J.isPerspectiveCamera?(R.setFromMatrixPosition(J.matrixWorld),b.set(O.x,O.y,.5).unproject(J).sub(R).normalize()):J&&J.isOrthographicCamera?(R.set(O.x,O.y,(J.near+J.far)/(J.near-J.far)).unproject(J),b.set(0,0,-1).transformDirection(J.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+J.type),this.el.setAttribute("raycaster",L),P.type==="touchmove"&&P.preventDefault()}}(),onCursorDown:function(b){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&b.type==="touchstart"&&(this.onMouseMove(b),this.el.components.raycaster.checkIntersections(),b.preventDefault()),this.data.rayOrigin==="xrselect"&&b.type==="selectstart"&&(this.activeXRInput=b.inputSource,this.onMouseMove(b),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit(y.MOUSEDOWN,b),this.cursorDownEl=this.intersectedEl},onCursorUp:function(b){if(!!this.isCursorDown){this.isCursorDown=!1;var O=this.data;this.twoWayEmit(y.MOUSEUP,b),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(y.MOUSEUP,this.intersectedEventDetail)),(!O.fuse||O.rayOrigin==="mouse"||O.rayOrigin==="xrselect")&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(y.CLICK,b),O.rayOrigin==="xrselect"&&this.activeXRInput===b.inputSource&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,b.type==="touchend"&&b.preventDefault()}},onIntersection:function(b){var O,R=this.el,L,P,Y;L=b.detail.els[0]===R?1:0,Y=b.detail.intersections[L],P=b.detail.els[L],!!P&&this.intersectedEl!==P&&(this.intersectedEl&&(O=this.el.components.raycaster.getIntersection(this.intersectedEl),O&&O.distance<=Y.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(P,Y)))},onIntersectionCleared:function(b){var O=b.detail.clearedEls;O.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var b=this.el.sceneEl.xrSession,O=this;!b||this.data.rayOrigin!=="mouse"&&(m.DOWN.forEach(function(R){b.addEventListener(R,O.onCursorDown)}),m.UP.forEach(function(R){b.addEventListener(R,O.onCursorUp)}))},setIntersection:function(b,O){var R=this.el,L=this.data,P=this;this.intersectedEl!==b&&(this.intersectedEl=b,R.addState(E.HOVERING),b.addState(E.HOVERED),this.twoWayEmit(y.MOUSEENTER),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(w),!(L.fuseTimeout===0||!L.fuse||L.rayOrigin==="xrselect"||L.rayOrigin==="mouse")&&(R.addState(E.FUSING),this.twoWayEmit(y.FUSING),this.fuseTimeout=setTimeout(function(){R.removeState(E.FUSING),P.twoWayEmit(y.CLICK)},L.fuseTimeout)))},clearCurrentIntersection:function(b){var O,R,L,P=this.el;!this.intersectedEl||(this.intersectedEl.removeState(E.HOVERED),P.removeState(E.HOVERING),P.removeState(E.FUSING),this.twoWayEmit(y.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(w),this.intersectedEl=null,clearTimeout(this.fuseTimeout),b!==!0&&(L=this.el.components.raycaster.intersections,L.length!==0&&(O=L[0].object.el===P?1:0,R=L[O],R&&this.setIntersection(R.object.el,R))))},twoWayEmit:function(b,O){var R=this.el,L=this.intersectedEl,P;function Y(J,j){O instanceof MouseEvent?J.mouseEvent=O:typeof TouchEvent<"u"&&O instanceof TouchEvent&&(J.touchEvent=O)}P=this.el.components.raycaster.getIntersection(L),this.eventDetail.intersectedEl=L,this.eventDetail.intersection=P,Y(this.eventDetail),R.emit(b,this.eventDetail),L&&(this.intersectedEventDetail.intersection=P,Y(this.intersectedEventDetail),L.emit(b,this.intersectedEventDetail))}})},"./src/components/daydream-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,_=v.onButtonEvent,m="https://cdn.aframe.io/controllers/google/",w=m+"vr_controller_daydream.obj",b=m+"vr_controller_daydream.mtl",O=h("./src/utils/index.js").device.isWebXRAvailable,R="google-daydream",L="Daydream Controller",P=O?R:L,Y={axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},J={axes:{touchpad:[0,1]},buttons:["none","none","touchpad","menu","system"]},j=O?J:Y;S.exports.Component=g("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:j,bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var U=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(te){_(te.detail.id,"down",U)},this.onButtonUp=function(te){_(te.detail.id,"up",U)},this.onButtonTouchStart=function(te){_(te.detail.id,"touchstart",U)},this.onButtonTouchEnd=function(te){_(te.detail.id,"touchend",U)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var U=this.el;U.addEventListener("buttonchanged",this.onButtonChanged),U.addEventListener("buttondown",this.onButtonDown),U.addEventListener("buttonup",this.onButtonUp),U.addEventListener("touchstart",this.onButtonTouchStart),U.addEventListener("touchend",this.onButtonTouchEnd),U.addEventListener("model-loaded",this.onModelLoaded),U.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var U=this.el;U.removeEventListener("buttonchanged",this.onButtonChanged),U.removeEventListener("buttondown",this.onButtonDown),U.removeEventListener("buttonup",this.onButtonUp),U.removeEventListener("touchstart",this.onButtonTouchStart),U.removeEventListener("touchend",this.onButtonTouchEnd),U.removeEventListener("model-loaded",this.onModelLoaded),U.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,P,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var U=this.el,te=this.data;U.setAttribute("tracked-controls",{armModel:te.armModel,hand:te.hand,idPrefix:P,id:P,orientationOffset:te.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:w,mtl:b})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(U){var te=U.detail.model,ue;!this.data.model||(ue=this.buttonMeshes={},ue.menu=te.getObjectByName("AppButton_AppButton_Cylinder.004"),ue.system=te.getObjectByName("HomeButton_HomeButton_Cylinder.005"),ue.trackpad=te.getObjectByName("TouchPad_TouchPad_Cylinder.003"),ue.touchpad=te.getObjectByName("TouchPad_TouchPad_Cylinder.003"),te.position.set(0,0,-.04))},onAxisMoved:function(U){E(this,this.mapping.axes,U)},onButtonChanged:function(U){var te=this.mapping.buttons[U.detail.id];!te||this.el.emit(te+"changed",U.detail.state)},updateModel:function(U,te){!this.data.model||this.updateButtonModel(U,te)},updateButtonModel:function(U,te){var ue=this.buttonMeshes;if(!(!ue||!ue[U])){var xe;switch(te){case"down":xe=this.data.buttonHighlightColor;break;case"touchstart":xe=this.data.buttonTouchedColor;break;default:xe=this.data.buttonColor}ue[U].material.color.set(xe)}}})},"./src/components/gearvr-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,_=v.onButtonEvent,m=h("./src/utils/index.js").device.isWebXRAvailable,w="https://cdn.aframe.io/controllers/samsung/",b=w+"gear_vr_controller.obj",O=w+"gear_vr_controller.mtl",R="samsung-gearvr",L="Gear VR",P=m?R:L,Y={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},J={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},j=m?J:Y;S.exports.Component=g("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:j,bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var U=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(te){_(te.detail.id,"down",U)},this.onButtonUp=function(te){_(te.detail.id,"up",U)},this.onButtonTouchStart=function(te){_(te.detail.id,"touchstart",U)},this.onButtonTouchEnd=function(te){_(te.detail.id,"touchend",U)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var U=this.el;U.addEventListener("buttonchanged",this.onButtonChanged),U.addEventListener("buttondown",this.onButtonDown),U.addEventListener("buttonup",this.onButtonUp),U.addEventListener("touchstart",this.onButtonTouchStart),U.addEventListener("touchend",this.onButtonTouchEnd),U.addEventListener("model-loaded",this.onModelLoaded),U.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var U=this.el;U.removeEventListener("buttonchanged",this.onButtonChanged),U.removeEventListener("buttondown",this.onButtonDown),U.removeEventListener("buttonup",this.onButtonUp),U.removeEventListener("touchstart",this.onButtonTouchStart),U.removeEventListener("touchend",this.onButtonTouchEnd),U.removeEventListener("model-loaded",this.onModelLoaded),U.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,P,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var U=this.el,te=this.data;U.setAttribute("tracked-controls",{armModel:te.armModel,hand:te.hand,idPrefix:P,id:P,orientationOffset:te.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:b,mtl:O})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(U){var te=U.detail.model,ue;!this.data.model||(ue=this.buttonMeshes={},ue.trigger=te.children[2],ue.trackpad=te.children[1],ue.touchpad=te.children[1])},onButtonChanged:function(U){var te=this.mapping.buttons[U.detail.id];!te||this.el.emit(te+"changed",U.detail.state)},onAxisMoved:function(U){E(this,this.mapping.axes,U)},updateModel:function(U,te){!this.data.model||this.updateButtonModel(U,te)},updateButtonModel:function(U,te){var ue=this.buttonMeshes;if(!(!ue||!ue[U])){var xe;switch(te){case"down":xe=this.data.buttonHighlightColor;break;case"touchstart":xe=this.data.buttonTouchedColor;break;default:xe=this.data.buttonColor}ue[U].material.color.set(xe)}}})},"./src/components/generic-tracked-controller-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,_=v.onButtonEvent,m="generic",w={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]};S.exports.Component=g("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},mapping:w,bindMethods:function(){this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var b=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(O){_(O.detail.id,"down",b)},this.onButtonUp=function(O){_(O.detail.id,"up",b)},this.onButtonTouchStart=function(O){_(O.detail.id,"touchstart",b)},this.onButtonTouchEnd=function(O){_(O.detail.id,"touchend",b)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.el.addEventListener("controllerconnected",function(O){O.detail.name!==b.name&&(b.wasControllerConnected=!0,b.removeEventListeners(),b.removeControllersUpdateListener())})},addEventListeners:function(){var b=this.el;b.addEventListener("buttonchanged",this.onButtonChanged),b.addEventListener("buttondown",this.onButtonDown),b.addEventListener("buttonup",this.onButtonUp),b.addEventListener("touchstart",this.onButtonTouchStart),b.addEventListener("touchend",this.onButtonTouchEnd),b.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var b=this.el;b.removeEventListener("buttonchanged",this.onButtonChanged),b.removeEventListener("buttondown",this.onButtonDown),b.removeEventListener("buttonup",this.onButtonUp),b.removeEventListener("touchstart",this.onButtonTouchStart),b.removeEventListener("touchend",this.onButtonTouchEnd),b.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var b=this.data,O=b.hand?b.hand:void 0;y(this,m,{hand:O,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var b=this.el,O=this.data;if(this.el.components["tracked-controls"]){this.removeEventListeners();return}b.setAttribute("tracked-controls",{hand:O.hand,idPrefix:m,orientationOffset:O.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(b){var O=this.mapping.buttons[b.detail.id];!O||this.el.emit(O+"changed",b.detail.state)},onAxisMoved:function(b){E(this,this.mapping.axes,b)},initDefaultModel:function(){var b=this.modelEl=document.createElement("a-entity");b.setAttribute("geometry",{primitive:"sphere",radius:.03}),b.setAttribute("material",{color:this.data.color}),this.el.appendChild(b)}})},"./src/components/geometry.js":(S,I,h)=>{var g=h("./src/core/geometry.js").geometries,C=h("./src/core/geometry.js").geometryNames,v=h("./src/core/component.js").registerComponent,y=h("./src/lib/three.js"),E=new y.BufferGeometry;S.exports.Component=v("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:C,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(_){var m=this.data,w=this.el,b,O=this.system;this.geometry&&(O.unuseGeometry(_),this.geometry=null),this.geometry=O.getOrCreateGeometry(m),b=w.getObject3D("mesh"),b?b.geometry=this.geometry:(b=new y.Mesh,b.geometry=this.geometry,this.el.getAttribute("material")||(b.material=new y.MeshStandardMaterial({color:Math.random()*16777215,metalness:0,roughness:.5})),w.setObject3D("mesh",b))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=E,this.geometry=null},updateSchema:function(_){var m=this.oldData&&this.oldData.primitive,w=_.primitive,b=g[w]&&g[w].schema;if(!b)throw new Error("Unknown geometry schema `"+w+"`");m&&m===w||this.extendSchema(b)}})},"./src/components/gltf-model.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/lib/three.js"),v=h("./src/utils/index.js"),y=v.debug("components:gltf-model:warn");S.exports.Component=g("gltf-model",{schema:{type:"model"},init:function(){var E=this,_=this.system.getDRACOLoader(),m=this.system.getMeshoptDecoder(),w=this.system.getKTX2Loader();this.model=null,this.loader=new C.GLTFLoader,_&&this.loader.setDRACOLoader(_),m?this.ready=m.then(function(b){E.loader.setMeshoptDecoder(b)}):this.ready=Promise.resolve(),w&&this.loader.setKTX2Loader(w)},update:function(){var E=this,_=this.el,m=this.data;!m||(this.remove(),this.ready.then(function(){E.loader.load(m,function(b){E.model=b.scene||b.scenes[0],E.model.animations=b.animations,_.setObject3D("mesh",E.model),_.emit("model-loaded",{format:"gltf",model:E.model})},void 0,function(b){var O=b&&b.message?b.message:"Failed to load glTF model";y(O),_.emit("model-error",{format:"gltf",src:m})})}))},remove:function(){!this.model||this.el.removeObject3D("mesh")}})},"./src/components/hand-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C={toonLeft:"https://cdn.aframe.io/controllers/hands/leftHand.glb",toonRight:"https://cdn.aframe.io/controllers/hands/rightHand.glb",lowPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandLow.glb",lowPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandLow.glb",highPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandHigh.glb",highPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandHigh.glb"},v={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},y={};y[v.fist]="grip",y[v.thumbUp]="pistol",y[v.point]="pointing",S.exports.Component=g("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},init:function(){var m=this,w=this.el;this.gesture=v.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){m.handleButton("grip","down")},this.onGripUp=function(){m.handleButton("grip","up")},this.onTrackpadDown=function(){m.handleButton("trackpad","down")},this.onTrackpadUp=function(){m.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){m.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){m.handleButton("trackpad","touchend")},this.onTriggerDown=function(){m.handleButton("trigger","down")},this.onTriggerUp=function(){m.handleButton("trigger","up")},this.onTriggerTouchStart=function(){m.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){m.handleButton("trigger","touchend")},this.onGripTouchStart=function(){m.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){m.handleButton("grip","touchend")},this.onThumbstickDown=function(){m.handleButton("thumbstick","down")},this.onThumbstickUp=function(){m.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){m.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){m.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){m.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){m.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){m.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){m.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),w.addEventListener("controllerconnected",this.onControllerConnected),w.addEventListener("controllerdisconnected",this.onControllerDisconnected),w.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(m,w){var b=this.el.getObject3D("mesh");!b||!b.mixer||b.mixer.update(w/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var m=this.el;m.addEventListener("gripdown",this.onGripDown),m.addEventListener("gripup",this.onGripUp),m.addEventListener("trackpaddown",this.onTrackpadDown),m.addEventListener("trackpadup",this.onTrackpadUp),m.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),m.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),m.addEventListener("triggerdown",this.onTriggerDown),m.addEventListener("triggerup",this.onTriggerUp),m.addEventListener("triggertouchstart",this.onTriggerTouchStart),m.addEventListener("triggertouchend",this.onTriggerTouchEnd),m.addEventListener("griptouchstart",this.onGripTouchStart),m.addEventListener("griptouchend",this.onGripTouchEnd),m.addEventListener("thumbstickdown",this.onThumbstickDown),m.addEventListener("thumbstickup",this.onThumbstickUp),m.addEventListener("abuttontouchstart",this.onAorXTouchStart),m.addEventListener("abuttontouchend",this.onAorXTouchEnd),m.addEventListener("bbuttontouchstart",this.onBorYTouchStart),m.addEventListener("bbuttontouchend",this.onBorYTouchEnd),m.addEventListener("xbuttontouchstart",this.onAorXTouchStart),m.addEventListener("xbuttontouchend",this.onAorXTouchEnd),m.addEventListener("ybuttontouchstart",this.onBorYTouchStart),m.addEventListener("ybuttontouchend",this.onBorYTouchEnd),m.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),m.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var m=this.el;m.removeEventListener("gripdown",this.onGripDown),m.removeEventListener("gripup",this.onGripUp),m.removeEventListener("trackpaddown",this.onTrackpadDown),m.removeEventListener("trackpadup",this.onTrackpadUp),m.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),m.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),m.removeEventListener("triggerdown",this.onTriggerDown),m.removeEventListener("triggerup",this.onTriggerUp),m.removeEventListener("triggertouchstart",this.onTriggerTouchStart),m.removeEventListener("triggertouchend",this.onTriggerTouchEnd),m.removeEventListener("griptouchstart",this.onGripTouchStart),m.removeEventListener("griptouchend",this.onGripTouchEnd),m.removeEventListener("thumbstickdown",this.onThumbstickDown),m.removeEventListener("thumbstickup",this.onThumbstickUp),m.removeEventListener("abuttontouchstart",this.onAorXTouchStart),m.removeEventListener("abuttontouchend",this.onAorXTouchEnd),m.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),m.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),m.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),m.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),m.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),m.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),m.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),m.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(m){var w,b=this.el,O=this.data.hand,R=this.data.handModelStyle,L=this.data.color,P=this;if(w={hand:O,model:!1},O!==m){var Y=C[R+O.charAt(0).toUpperCase()+O.slice(1)];this.loader.load(Y,function(J){var j=J.scene.children[0],U=O==="left"?Math.PI/2:-Math.PI/2,te=b.sceneEl.hasWebXR?-Math.PI/2:0;j.mixer=new THREE.AnimationMixer(j),P.clips=J.animations,b.setObject3D("mesh",j);var ue=j.children[1].material;ue.color=new THREE.Color(L),j.position.set(0,0,0),j.rotation.set(te,0,U),b.setAttribute("magicleap-controls",w),b.setAttribute("vive-controls",w),b.setAttribute("oculus-touch-controls",w),b.setAttribute("windows-motion-controls",w),b.setAttribute("hp-mixed-reality-controls",w)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(m,w){var b,O=w==="down",R=w==="touchstart";if(w.indexOf("touch")===0){if(R===this.touchedButtons[m])return;this.touchedButtons[m]=R}else{if(O===this.pressedButtons[m])return;this.pressedButtons[m]=O}b=this.gesture,this.gesture=this.determineGesture(),this.gesture!==b&&(this.animateGesture(this.gesture,b),this.emitGestureEvents(this.gesture,b))},determineGesture:function(){var m,w=this.pressedButtons.grip,b=this.pressedButtons.surface||this.touchedButtons.surface,O=this.pressedButtons.trackpad||this.touchedButtons.trackpad,R=this.pressedButtons.trigger||this.touchedButtons.trigger,L=this.touchedButtons.AorX||this.touchedButtons.BorY,P=_(this.el.components["tracked-controls"]);return P?w||R?m=v.fist:O&&(m=v.point):w?b||L||O?m=R?v.fist:v.point:m=R?v.thumbUp:v.pointThumb:R&&(m=v.hold),m},getClip:function(m){var w,b;for(b=0;b<this.clips.length;b++)if(w=this.clips[b],w.name===m)return w},animateGesture:function(m,w){if(m){this.playAnimation(m||v.open,w,!1);return}this.playAnimation(w,w,!0)},emitGestureEvents:function(m,w){var b=this.el,O;w!==m&&(O=E(w,!1),O&&b.emit(O),O=E(m,!0),O&&b.emit(O))},playAnimation:function(m,w,b){var O,R,L=this.el.getObject3D("mesh"),P;if(!!L){if(L.mixer.stopAllAction(),O=this.getClip(m),P=L.mixer.clipAction(O),P.clampWhenFinished=!0,P.loop=THREE.LoopRepeat,P.repetitions=0,P.timeScale=b?-1:1,P.time=b?O.duration:0,P.weight=1,!w||m===w){L.mixer.stopAllAction(),P.play();return}O=this.getClip(w),R=L.mixer.clipAction(O),R.weight=.15,R.play(),P.play(),R.crossFadeTo(P,.15,!0)}}});function E(m,w){var b;if(!!m){if(b=y[m],b==="grip")return b+(w?"close":"open");if(b==="point")return b+(w?"up":"down");if(b==="pointing"||b==="pistol")return b+(w?"start":"end")}}function _(m){var w=m&&m.controller,b=w&&(w.id&&w.id.indexOf("OpenVR ")===0||w.profiles&&w.profiles[0]&&w.profiles[0]==="htc-vive");return b}},"./src/components/hand-tracking-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E="https://cdn.aframe.io/controllers/oculus-hands/v4/left.glb",_="https://cdn.aframe.io/controllers/oculus-hands/v4/right.glb",m=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],w=.015,b=.03,O=.5;S.exports.Component=g("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"}},bindMethods:function(){this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var R=0;R<this.jointEls.length;++R)this.jointEls[R].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var R=0;R<this.jointEls.length;++R)this.jointEls[R].object3D.visible=!1},init:function(){var R=this.el.sceneEl,L=R.getAttribute("webxr").optionalFeatures;L.push("hand-tracking"),R.setAttribute("webxr",{optionalFeatures:L}),this.onModelLoaded=this.onModelLoaded.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3},this.indexTipPosition=new THREE.Vector3,this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace)},updateReferenceSpace:function(){var R=this,L=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,!!L){var P=R.el.sceneEl.systems.webxr.sessionReferenceSpaceType;L.requestReferenceSpace(P).then(function(Y){R.referenceSpace=Y.getOffsetReferenceSpace(new XRRigidTransform({x:0,y:1.5,z:0}))}).catch(function(Y){throw R.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(P,"tracked-controls-webxr uses reference space "+P),Y})}},checkIfControllerPresent:function(){var R=this.data,L=R.hand?R.hand:void 0;y(this,"",{hand:L,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var R=this.el.sceneEl,L=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,P=R.frame,Y=this.el.components["tracked-controls-webxr"];!L||!P||!Y||L.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),P.getJointPose&&this.updateHandModel(),this.detectGesture())},updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(R){for(var L=this.bones,P=0;P<L.length;P++)if(L[P].name===R)return L[P];return null},updateHandMeshModel:function(){var R=this.el.sceneEl.frame,L=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,P=this.referenceSpace;if(!(!L||!this.mesh||!P)){this.mesh.visible=!1;for(var Y of L.hand.values()){var J,j,U;j=R.getJointPose(Y,P),J=this.getBone(Y.jointName),J!=null&&j&&(U=j.transform,this.mesh.visible=!0,J.position.copy(U.position),J.quaternion.copy(U.orientation))}}},updateHandDotsModel:function(){var R=this.el.sceneEl.frame,L=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,P=this.el.components["tracked-controls-webxr"],Y=P.system.referenceSpace,J,j,U,te=0;for(var ue of L.hand.values())J=this.jointEls[te++],j=J.object3D,U=R.getJointPose(ue,Y),J.object3D.visible=!!U,U&&(j.matrix.elements=U.transform.matrix,j.matrix.decompose(j.position,j.rotation,j.scale),J.setAttribute("scale",{x:U.radius,y:U.radius,z:U.radius}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var R=new THREE.Vector3;return function(){var L=this.el.sceneEl.frame,P=this.indexTipPosition,Y=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,J=this.el.components["tracked-controls-webxr"],j=this.referenceSpace||J.system.referenceSpace,U=Y.hand.get("index-finger-tip"),te=Y.hand.get("thumb-tip");if(!(!U||!te)){var ue=L.getJointPose(U,j),xe=L.getJointPose(te,j);if(!(!ue||!xe)){R.copy(xe.transform.position),P.copy(ue.transform.position);var Ee=P.distanceTo(R);Ee<w&&this.isPinched===!1&&(this.isPinched=!0,this.pinchEventDetail.position.copy(P).lerp(R,O),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchstarted",this.pinchEventDetail)),Ee>b&&this.isPinched===!0&&(this.isPinched=!1,this.pinchEventDetail.position.copy(P).lerp(R,O),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchended",this.pinchEventDetail)),this.isPinched&&(this.pinchEventDetail.position.copy(P).lerp(R,O),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchmoved",this.pinchEventDetail)),P.y+=1.5}}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var R=this.el,L=this.data;R.setAttribute("tracked-controls",{hand:L.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var R;this.checkIfControllerPresent(),R=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,!!this.el.getObject3D("mesh")&&(!R||!R.hand||!R.hand[0])&&(this.el.getObject3D("mesh").visible=!1)},initDefaultModel:function(){this.el.getObject3D("mesh")||(this.data.modelStyle==="dots"&&this.initDotsModel(),this.data.modelStyle==="mesh"&&this.initMeshHandModel())},initDotsModel:function(){if(this.jointEls.length===0)for(var R=0;R<m.length;++R){var L=this.jointEl=document.createElement("a-entity");L.setAttribute("geometry",{primitive:"sphere",radius:1}),L.setAttribute("material",{color:this.data.modelColor}),L.object3D.visible=!1,this.el.appendChild(L),this.jointEls.push(L)}},initMeshHandModel:function(){var R=this.data.hand==="left"?E:_;this.el.setAttribute("gltf-model",R)},onModelLoaded:function(){var R=this.mesh=this.el.getObject3D("mesh").children[0],L=this.skinnedMesh=R.getObjectByProperty("type","SkinnedMesh");!this.skinnedMesh||(this.bones=L.skeleton.bones,this.el.removeObject3D("mesh"),R.position.set(0,1.5,0),R.rotation.set(0,0,0),L.frustumCulled=!1,L.material=new THREE.MeshStandardMaterial({skinning:!0,color:this.data.modelColor}),this.el.setObject3D("mesh",R))}})},"./src/components/hide-on-enter-ar.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent;S.exports.Component=g("hide-on-enter-ar",{init:function(){var C=this;this.el.sceneEl.addEventListener("enter-vr",function(){C.el.sceneEl.is("ar-mode")&&(C.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){C.el.object3D.visible=!0})}})},"./src/components/hp-mixed-reality-controls.js":(S,I,h)=>{var g=h("./src/utils/bind.js"),C=h("./src/core/component.js").registerComponent,v=h("./src/lib/three.js"),y=h("./src/utils/tracked-controls.js"),E=y.checkControllerPresentAndSetup,_=y.emitIfAxesChanged,m=y.onButtonEvent,w="hp-mixed-reality",b="https://cdn.aframe.io/controllers/hp/mixed-reality/",O={x:0,y:0,z:.06},R={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},L={left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}};S.exports.Component=C("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:L,init:function(){var P=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=g(this.onButtonChanged,this),this.onButtonDown=function(Y){m(Y.detail.id,"down",P,P.data.hand)},this.onButtonUp=function(Y){m(Y.detail.id,"up",P,P.data.hand)},this.onButtonTouchEnd=function(Y){m(Y.detail.id,"touchend",P,P.data.hand)},this.onButtonTouchStart=function(Y){m(Y.detail.id,"touchstart",P,P.data.hand)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var P=this.data;this.controllerIndex=P.hand==="right"?0:P.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=g(this.onModelLoaded,this),this.onControllersUpdate=g(this.onControllersUpdate,this),this.checkIfControllerPresent=g(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=g(this.removeControllersUpdateListener,this),this.onAxisMoved=g(this.onAxisMoved,this)},addEventListeners:function(){var P=this.el;P.addEventListener("buttonchanged",this.onButtonChanged),P.addEventListener("buttondown",this.onButtonDown),P.addEventListener("buttonup",this.onButtonUp),P.addEventListener("touchstart",this.onButtonTouchStart),P.addEventListener("touchend",this.onButtonTouchEnd),P.addEventListener("axismove",this.onAxisMoved),P.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var P=this.el;P.removeEventListener("buttonchanged",this.onButtonChanged),P.removeEventListener("buttondown",this.onButtonDown),P.removeEventListener("buttonup",this.onButtonUp),P.removeEventListener("touchstart",this.onButtonTouchStart),P.removeEventListener("touchend",this.onButtonTouchEnd),P.removeEventListener("axismove",this.onAxisMoved),P.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var P=this.data;E(this,w,{index:this.controllerIndex,hand:P.hand})},injectTrackedControls:function(){var P=this.el,Y=this.data;P.setAttribute("tracked-controls",{idPrefix:w,hand:Y.hand,controller:this.controllerIndex,orientationOffset:Y.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",b+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(P){var Y=this.mapping[this.data.hand].buttons[P.detail.id],J;!Y||(Y==="trigger"&&(J=P.detail.state.value,console.log("analog value of trigger press: "+J)),this.el.emit(Y+"changed",P.detail.state))},onModelLoaded:function(P){var Y=P.detail.model;!this.data.model||(Y.position.copy(O),Y.rotation.copy(R),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new v.Vector3(0,0,0)}))},onAxisMoved:function(P){_(this,this.mapping.axes,P)}})},"./src/components/index.js":(S,I,h)=>{h("./src/components/animation.js"),h("./src/components/camera.js"),h("./src/components/cursor.js"),h("./src/components/daydream-controls.js"),h("./src/components/gearvr-controls.js"),h("./src/components/geometry.js"),h("./src/components/generic-tracked-controller-controls.js"),h("./src/components/gltf-model.js"),h("./src/components/hand-tracking-controls.js"),h("./src/components/hand-controls.js"),h("./src/components/hide-on-enter-ar.js"),h("./src/components/hp-mixed-reality-controls.js"),h("./src/components/layer.js"),h("./src/components/laser-controls.js"),h("./src/components/light.js"),h("./src/components/line.js"),h("./src/components/link.js"),h("./src/components/look-controls.js"),h("./src/components/magicleap-controls.js"),h("./src/components/material.js"),h("./src/components/obj-model.js"),h("./src/components/oculus-go-controls.js"),h("./src/components/oculus-touch-controls.js"),h("./src/components/position.js"),h("./src/components/raycaster.js"),h("./src/components/rotation.js"),h("./src/components/scale.js"),h("./src/components/shadow.js"),h("./src/components/sound.js"),h("./src/components/text.js"),h("./src/components/tracked-controls.js"),h("./src/components/tracked-controls-webvr.js"),h("./src/components/tracked-controls-webxr.js"),h("./src/components/visible.js"),h("./src/components/valve-index-controls.js"),h("./src/components/vive-controls.js"),h("./src/components/vive-focus-controls.js"),h("./src/components/wasd-controls.js"),h("./src/components/windows-motion-controls.js"),h("./src/components/scene/ar-hit-test.js"),h("./src/components/scene/background.js"),h("./src/components/scene/debug.js"),h("./src/components/scene/device-orientation-permission-ui.js"),h("./src/components/scene/embedded.js"),h("./src/components/scene/inspector.js"),h("./src/components/scene/fog.js"),h("./src/components/scene/keyboard-shortcuts.js"),h("./src/components/scene/pool.js"),h("./src/components/scene/reflection.js"),h("./src/components/scene/screenshot.js"),h("./src/components/scene/stats.js"),h("./src/components/scene/vr-mode-ui.js")},"./src/components/laser-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/index.js");g("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var v=this.config,y=this.data,E=this.el,_=this,m={hand:y.hand,model:y.model};E.setAttribute("daydream-controls",m),E.setAttribute("gearvr-controls",m),E.setAttribute("hp-mixed-reality-controls",m),E.setAttribute("magicleap-controls",m),E.setAttribute("oculus-go-controls",m),E.setAttribute("oculus-touch-controls",m),E.setAttribute("valve-index-controls",m),E.setAttribute("vive-controls",m),E.setAttribute("vive-focus-controls",m),E.setAttribute("windows-motion-controls",m),E.setAttribute("generic-tracked-controller-controls",{hand:m.hand}),E.addEventListener("controllerconnected",w),E.addEventListener("controllerdisconnected",b),E.addEventListener("controllermodelready",function(O){w(O),_.modelReady=!0});function w(O){var R=v[O.detail.name];if(!!R){var L=C.extend({showLine:!0},R.raycaster||{});O.detail.rayOrigin&&(L.origin=O.detail.rayOrigin.origin,L.direction=O.detail.rayOrigin.direction,L.showLine=!0),O.detail.rayOrigin||!_.modelReady?E.setAttribute("raycaster",L):E.setAttribute("raycaster","showLine",!0),E.setAttribute("cursor",C.extend({fuse:!1},R.cursor))}}function b(){E.setAttribute("raycaster","showLine",!1)}},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"gearvr-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:.001,z:0}}},"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},"./src/components/layer.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/index.js"),v=C.debug("components:layer:warn");S.exports.Component=g("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var E=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=E.createFramebuffer();var _=this.el.sceneEl.getAttribute("webxr").requiredFeatures;_.push("layers"),this.el.sceneEl.getAttribute("webxr","requiredFeatures",_),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(E){this.data.src!==E.src&&this.updateSrc()},updateSrc:function(){var E=this.data.type;if(this.texture=void 0,E==="quad"){this.loadQuadImage();return}if(E==="monocubemap"||E==="stereocubemap"){this.loadCubeMapImages();return}},loadCubeMapImages:function(){var E,_=this.xrGLFactory,m=this.el.sceneEl.frame,w=this.data.src,b=this.data.type;this.visibilityChanged=!1,this.layer&&(b!=="monocubemap"&&b!=="stereocubemap"||(w.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,b==="monocubemap"?(E=_.getSubImage(this.layer,m),this.loadCubeMapImage(E.colorTexture,w,0)):(E=_.getSubImage(this.layer,m,"left"),this.loadCubeMapImage(E.colorTexture,w,0),E=_.getSubImage(this.layer,m,"right"),this.loadCubeMapImage(E.colorTexture,w,6))))},loadQuadImage:function(){var E=this.data.src,_=this;this.el.sceneEl.systems.material.loadTexture(E,{src:E},function(w){_.el.sceneEl.renderer.initTexture(w),_.texture=w,E.tagName==="VIDEO"&&setTimeout(function(){_.textureIsVideo=!0},1e3),_.layer&&(_.layer.height=_.data.height/2||_.texture.image.height/1e3,_.layer.width=_.data.width/2||_.texture.image.width/1e3,_.needsRedraw=!0),_.updateQuadPanel()})},preGenerateCubeMapTextures:function(E,_){this.data.type==="monocubemap"?this.generateCubeMapTextures(E,0,_):(this.generateCubeMapTextures(E,0,_),this.generateCubeMapTextures(E,6,_))},generateCubeMapTextures:function(E,_,m){for(var w=this.data,b=this.cubeFaceSize,O=Math.min(E.width,E.height),R=[],L,P,Y=0;Y<6;Y++){var J=document.createElement("CANVAS");J.width=J.height=b;var j=J.getContext("2d");w.rotateCubemap&&(Y===2||Y===3)&&(j.save(),j.translate(b,b),j.rotate(Math.PI)),j.drawImage(E,(Y+_)*O,0,O,O,0,0,b,b),j.restore(),m&&m(),R.push(J)}return w.rotateCubemap&&(L=R[0],P=R[1],R[0]=P,R[1]=L,L=R[4],P=R[5],R[4]=P,R[5]=L),m&&m(),R},loadCubeMapImage:function(E,_,m){var w=this.el.sceneEl.renderer.getContext(),b;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!1),w.bindTexture(w.TEXTURE_CUBE_MAP,E),!_.complete||this.loadingScreen?b=this.loadingScreenImages:b=this.generateCubeMapTextures(_,m);var O=0;b.forEach(function(R,L){w.texSubImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+L,0,0,0,w.RGBA,w.UNSIGNED_BYTE,R),O=w.getError()}),O!==0&&console.log("renderingError, WebGL Error Code: "+O),w.bindTexture(w.TEXTURE_CUBE_MAP,null)},tick:function(){!this.el.sceneEl.xrSession||(!this.layer&&this.el.sceneEl.is("vr-mode")&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),!(!this.needsRedraw&&!this.layer.needsRedraw&&!this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var E=this,_=this.data.type;if(this.el.sceneEl.xrSession.onvisibilitychange=function(m){E.visibilityChanged=m.session.visibilityState!=="hidden"},_==="quad"){this.initQuadLayer();return}if(_==="monocubemap"||_==="stereocubemap"){this.initCubeMapLayer();return}},initQuadLayer:function(){var E=this.el.sceneEl,_=E.renderer.getContext(),m=this.xrGLFactory=new XRWebGLBinding(E.xrSession,_);!this.texture||(this.layer=m.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),E.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var E=this.data.src,_=this.el.sceneEl,m=_.renderer.getContext(),w=m.getParameter(m.MAX_CUBE_MAP_TEXTURE_SIZE),b=this.cubeFaceSize=Math.min(w,Math.min(E.width,E.height)),O=this.xrGLFactory=new XRWebGLBinding(_.xrSession,m);this.layer=O.createCubeLayer({space:this.referenceSpace,viewPixelWidth:b,viewPixelHeight:b,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),_.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var E=this.cubeFaceSize,_=this.loadingScreenImages=[],m=0;m<6;m++){var w=document.createElement("CANVAS");w.width=w.height=E;var b=w.getContext("2d");w.width=w.height=E,b.fillStyle="black",b.fillRect(0,0,E,E),m!==2&&m!==3&&(b.translate(E,0),b.scale(-1,1),b.fillStyle="white",b.font="30px Arial",b.fillText("Loading",E/2,E/2)),_.push(w)}},destroyLayer:function(){!this.layer||(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(E){this.layerEnabled=E,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var E=this.quadPanelEl;this.quadPanelEl||(E=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(E)),E.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),E.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var E=this.el.sceneEl,_=this.el.sceneEl.renderer.getContext(),m=this.xrGLFactory.getSubImage(this.layer,E.frame),w=E.renderer.properties.get(this.texture).__webglTexture,b=_.getParameter(_.FRAMEBUFFER_BINDING);_.viewport(m.viewport.x,m.viewport.y,m.viewport.width,m.viewport.height),_.bindFramebuffer(_.FRAMEBUFFER,this.frameBuffer),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,m.colorTexture,0),y(_,w,m,this.data.src),_.bindFramebuffer(_.FRAMEBUFFER,b)},updateTransform:function(){var E=this.el,_=this.position,m=this.quaternion;E.object3D.updateMatrixWorld(),_.setFromMatrixPosition(E.object3D.matrixWorld),m.setFromRotationMatrix(E.object3D.matrixWorld),this.layerEnabled||_.set(0,0,1e8),this.layer.transform=new XRRigidTransform(_,m)},onEnterVR:function(){var E=this.el.sceneEl,_=E.xrSession;if(!E.hasWebXR||!XRWebGLBinding||!_){v("The layer component requires WebXR and the layers API enabled");return}_.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.needsRedraw=!0,this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(E){this.referenceSpace=E}});function y(E,_,m,w){var b=E.createFramebuffer(),O=m.viewport.x,R=m.viewport.y,L=m.viewport.x+m.viewport.width,P=m.viewport.y+m.viewport.height;w.tagName==="VIDEO"&&(E.bindTexture(E.TEXTURE_2D,_),E.texSubImage2D(E.TEXTURE_2D,0,0,0,w.width,w.height,E.RGB,E.UNSIGNED_BYTE,w)),E.bindFramebuffer(E.READ_FRAMEBUFFER,b),E.framebufferTexture2D(E.READ_FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,_,0),E.readBuffer(E.COLOR_ATTACHMENT0),E.blitFramebuffer(0,0,w.width,w.height,O,R,L,P,E.COLOR_BUFFER_BIT,E.NEAREST),E.bindFramebuffer(E.READ_FRAMEBUFFER,null),E.deleteFramebuffer(b)}},"./src/components/light.js":(S,I,h)=>{var g=h("./src/utils/bind.js"),C=h("./src/utils/index.js"),v=C.diff,y=h("./src/utils/debug.js"),E=h("./src/core/component.js").registerComponent,_=h("./src/lib/three.js"),m=h("./src/utils/math.js"),w=_.MathUtils.degToRad,b=y("components:light:warn"),O=new _.CubeTextureLoader,R={};S.exports.Component=E("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var L=this.el;this.light=null,this.defaultTarget=null,this.rendererSystem=this.el.sceneEl.systems.renderer,this.system.registerLight(L)},update:function(L){var P=this.data,Y=v(P,L),J=this.light,j=this.rendererSystem,U=this;if(J&&!("type"in Y)){var te=!1;Object.keys(Y).forEach(function(ue){var xe=P[ue];switch(ue){case"color":{J.color.set(xe),j.applyColorCorrection(J.color);break}case"groundColor":{J.groundColor.set(xe),j.applyColorCorrection(J.groundColor);break}case"angle":{J.angle=w(xe);break}case"target":{xe===null?(P.type==="spot"||P.type==="directional")&&(J.target=U.defaultTarget):xe.hasLoaded?U.onSetTarget(xe,J):xe.addEventListener("loaded",g(U.onSetTarget,U,xe,J));break}case"envMap":U.updateProbeMap(P,J);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":te||(U.updateShadow(),te=!0);break;case"shadowCameraAutomatic":P.shadowCameraAutomatic?U.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(P.shadowCameraAutomatic)):U.shadowCameraAutomaticEls=[];break;default:J[ue]=xe}});return}this.setLight(this.data),this.updateShadow()},tick:function(){var L=new _.Box3,P=new _.Vector3,Y=new _.Vector3,J=new _.Matrix4,j=new _.Sphere,U=new _.Vector3;return function(){if(!!(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof _.OrthographicCamera&&this.shadowCameraAutomaticEls.length)){var te=this.light.shadow.camera;te.getWorldDirection(P),te.getWorldPosition(Y),J.copy(te.matrixWorld),J.invert(),te.near=1,te.left=1e5,te.right=-1e5,te.top=-1e5,te.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(ue){L.setFromObject(ue.object3D),L.getBoundingSphere(j);var xe=m.distanceOfPointFromPlane(Y,P,j.center),Ee=m.nearestPointInPlane(Y,P,j.center,U),V=Ee.applyMatrix4(J);te.near=Math.min(-xe-j.radius-1,te.near),te.left=Math.min(-j.radius+V.x,te.left),te.right=Math.max(j.radius+V.x,te.right),te.top=Math.max(j.radius+V.y,te.top),te.bottom=Math.min(-j.radius+V.y,te.bottom)}),te.updateProjectionMatrix()}}}(),setLight:function(L){var P=this.el,Y=this.getLight(L);Y&&(this.light&&P.removeObject3D("light"),this.light=Y,this.light.el=P,P.setObject3D("light",this.light),(L.type==="spot"||L.type==="directional"||L.type==="hemisphere")&&P.getObject3D("light").translateY(-1),L.type==="spot"&&(P.setObject3D("light-target",this.defaultTarget),P.getObject3D("light-target").position.set(0,0,-1)),L.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(L.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var L=this.el,P=this.data,Y=this.light;Y.castShadow=P.castShadow;var J=L.getObject3D("cameraHelper");if(P.shadowCameraVisible&&!J?L.setObject3D("cameraHelper",new _.CameraHelper(Y.shadow.camera)):!P.shadowCameraVisible&&J&&L.removeObject3D("cameraHelper"),!P.castShadow)return Y;Y.shadow.bias=P.shadowBias,Y.shadow.radius=P.shadowRadius,Y.shadow.mapSize.height=P.shadowMapHeight,Y.shadow.mapSize.width=P.shadowMapWidth,Y.shadow.camera.near=P.shadowCameraNear,Y.shadow.camera.far=P.shadowCameraFar,Y.shadow.camera instanceof _.OrthographicCamera?(Y.shadow.camera.top=P.shadowCameraTop,Y.shadow.camera.right=P.shadowCameraRight,Y.shadow.camera.bottom=P.shadowCameraBottom,Y.shadow.camera.left=P.shadowCameraLeft):Y.shadow.camera.fov=P.shadowCameraFov,Y.shadow.camera.updateProjectionMatrix(),J&&J.update()},getLight:function(L){var P=L.angle,Y=new _.Color(L.color);this.rendererSystem.applyColorCorrection(Y),Y=Y.getHex();var J=L.decay,j=L.distance,U=new _.Color(L.groundColor);this.rendererSystem.applyColorCorrection(U),U=U.getHex();var te=L.intensity,ue=L.type,xe=L.target,Ee=null;switch(ue.toLowerCase()){case"ambient":return new _.AmbientLight(Y,te);case"directional":return Ee=new _.DirectionalLight(Y,te),this.defaultTarget=Ee.target,xe&&(xe.hasLoaded?this.onSetTarget(xe,Ee):xe.addEventListener("loaded",g(this.onSetTarget,this,xe,Ee))),Ee;case"hemisphere":return new _.HemisphereLight(Y,U,te);case"point":return new _.PointLight(Y,te,j,J);case"spot":return Ee=new _.SpotLight(Y,te,j,w(P),L.penumbra,J),this.defaultTarget=Ee.target,xe&&(xe.hasLoaded?this.onSetTarget(xe,Ee):xe.addEventListener("loaded",g(this.onSetTarget,this,xe,Ee))),Ee;case"probe":return Ee=new _.LightProbe,this.updateProbeMap(L,Ee),Ee;default:b("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",ue)}},updateProbeMap:function(L,P){L.envMap||P.copy(new _.LightProbe),R[L.envMap]instanceof window.Promise&&R[L.envMap].then(function(Y){P.copy(Y)}),R[L.envMap]instanceof _.LightProbe&&P.copy(R[L.envMap]),R[L.envMap]=new window.Promise(function(Y){C.srcLoader.validateCubemapSrc(L.envMap,function(j){O.load(j,function(U){var te=_.LightProbeGenerator.fromCubeTexture(U);R[L.envMap]=te,P.copy(te)})})})},onSetTarget:function(L,P){P.target=L.object3D},remove:function(){var L=this.el;L.removeObject3D("light"),L.getObject3D("cameraHelper")&&L.removeObject3D("cameraHelper")}})},"./src/components/line.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent;S.exports.Component=g("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var v=this.data,y,E;this.rendererSystem=this.el.sceneEl.systems.renderer,E=this.material=new THREE.LineBasicMaterial({color:v.color,opacity:v.opacity,transparent:v.opacity<1,visible:v.visible}),y=this.geometry=new THREE.BufferGeometry,y.setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.rendererSystem.applyColorCorrection(E.color),this.line=new THREE.Line(y,E),this.el.setObject3D(this.attrName,this.line)},update:function(v){var y=this.data,E=this.geometry,_=!1,m=this.material,w=E.attributes.position.array;C(y.start,v.start)||(w[0]=y.start.x,w[1]=y.start.y,w[2]=y.start.z,_=!0),C(y.end,v.end)||(w[3]=y.end.x,w[4]=y.end.y,w[5]=y.end.z,_=!0),_&&(E.attributes.position.needsUpdate=!0,E.computeBoundingSphere()),m.color.setStyle(y.color),this.rendererSystem.applyColorCorrection(m.color),m.opacity=y.opacity,m.transparent=y.opacity<1,m.visible=y.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}});function C(v,y){return!v||!y?!1:v.x===y.x&&v.y===y.y&&v.z===y.z}},"./src/components/link.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/core/shader.js").registerShader,v=h("./src/lib/three.js");S.exports.Component=g("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new v.Quaternion,this.hiddenEls=[]},update:function(y){var E=this.data,_=this.el,m,w;!E.visualAspectEnabled||(this.initVisualAspect(),m=E.highlighted?E.highlightedColor:E.backgroundColor,w=E.highlighted?E.highlightedColor:E.borderColor,_.setAttribute("material","backgroundColor",m),_.setAttribute("material","strokeColor",w),E.on!==y.on&&this.updateEventListener(),y.peekMode!==void 0&&E.peekMode!==y.peekMode&&this.updatePeekMode(),!(!E.image||y.image===E.image)&&_.setAttribute("material","pano",typeof E.image=="string"?E.image:E.image.src))},updatePeekMode:function(){var y=this.el,E=this.sphereEl;this.data.peekMode?(this.hideAll(),y.getObject3D("mesh").visible=!1,E.setAttribute("visible",!0)):(this.showAll(),y.getObject3D("mesh").visible=!0,E.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var y=this.el;!y.isPlaying||(this.removeEventListener(),y.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var y=this.data.on;!y||this.el.removeEventListener(y,this.navigate)},initVisualAspect:function(){var y=this.el,E,_,m;!this.data.visualAspectEnabled||this.visualAspectInitialized||(m=this.textEl=this.textEl||document.createElement("a-entity"),_=this.sphereEl=this.sphereEl||document.createElement("a-entity"),E=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),y.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),y.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),m.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),m.setAttribute("position","0 1.5 0"),y.appendChild(m),E.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),E.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),E.setAttribute("rotation","0 180 0"),E.setAttribute("position","0 0 0"),E.setAttribute("visible",!1),y.appendChild(E),_.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),_.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),_.setAttribute("visible",!1),y.appendChild(_),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var y=new v.Vector3,E=new v.Vector3,_=new v.Quaternion,m=new v.Vector3;return function(){var w=this.el,b=w.object3D,O=w.sceneEl.camera,R,L,P=this.textEl;if(!!this.data.visualAspectEnabled)if(b.updateMatrixWorld(),O.parent.updateMatrixWorld(),O.updateMatrixWorld(),b.matrix.decompose(E,_,m),E.setFromMatrixPosition(b.matrixWorld),y.setFromMatrixPosition(O.matrixWorld),L=E.distanceTo(y),L>20)this.previousQuaternion||(this.quaternionClone.copy(_),this.previousQuaternion=this.quaternionClone),b.lookAt(y);else{if(R=this.calculateCameraPortalOrientation(),L<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;P.setAttribute("text","width",1.5),R<=0?(P.setAttribute("position","0 0 0.75"),P.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(P.setAttribute("position","0 0 -0.75"),P.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),w.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=R}else R<=0?P.setAttribute("rotation","0 180 0"):P.setAttribute("rotation","0 0 0"),P.setAttribute("text","width",5),P.setAttribute("position","0 1.5 0"),w.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(b.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var y=this.el,E=this.hiddenEls,_=this;E.length>0||y.sceneEl.object3D.traverse(function(m){m&&m.el&&m.el.hasAttribute("link-controls")||!m.el||m===y.sceneEl.object3D||m.el===y||m.el===_.sphereEl||m.el===y.sceneEl.cameraEl||m.el.getAttribute("visible")===!1||m.el===_.textEl||m.el===_.semiSphereEl||(m.el.setAttribute("visible",!1),E.push(m.el))})},showAll:function(){this.hiddenEls.forEach(function(y){y.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var y=new v.Matrix4,E=new v.Vector3,_=new v.Vector3(0,0,1),m=new v.Vector3(0,0,0);return function(){var w=this.el,b=w.sceneEl.camera;return E.set(0,0,0),_.set(0,0,1),m.set(0,0,0),w.object3D.matrixWorld.extractRotation(y),_.applyMatrix4(y),w.object3D.updateMatrixWorld(),w.object3D.localToWorld(m),b.parent.parent.updateMatrixWorld(),b.parent.updateMatrixWorld(),b.updateMatrixWorld(),b.localToWorld(E),E.sub(m).normalize(),_.normalize(),Math.sign(_.dot(E))}}(),remove:function(){this.removeEventListener()}}),C("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},"./src/components/look-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/lib/three.js"),v=h("./src/utils/index.js"),y=v.bind,E=Math.PI/2;S.exports.Component=g("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new C.Vector3,this.hmdQuaternion=new C.Quaternion,this.magicWindowAbsoluteEuler=new C.Euler,this.magicWindowDeltaEuler=new C.Euler,this.position=new C.Vector3,this.magicWindowObject=new C.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new C.Vector3,rotation:new C.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var _,m=this.data;(v.device.isMobile()||v.device.isMobileDeviceRequestingDesktopSite())&&(_=this.magicWindowControls=new C.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(_.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?_.enabled=m.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){_.enabled=m.magicWindowTrackingEnabled})))},update:function(_){var m=this.data;m.enabled!==_.enabled&&this.updateGrabCursor(m.enabled),_&&!m.magicWindowTrackingEnabled&&_.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=m.magicWindowTrackingEnabled),_&&!m.pointerLockEnabled!==_.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(_){var m=this.data;!m.enabled||this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=y(this.onMouseDown,this),this.onMouseMove=y(this.onMouseMove,this),this.onMouseUp=y(this.onMouseUp,this),this.onTouchStart=y(this.onTouchStart,this),this.onTouchMove=y(this.onTouchMove,this),this.onTouchEnd=y(this.onTouchEnd,this),this.onEnterVR=y(this.onEnterVR,this),this.onExitVR=y(this.onExitVR,this),this.onPointerLockChange=y(this.onPointerLockChange,this),this.onPointerLockError=y(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new C.Object3D,this.yawObject=new C.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var _=this.el.sceneEl,m=_.canvas;if(!m){_.addEventListener("render-target-loaded",y(this.addEventListeners,this));return}m.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),m.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),_.addEventListener("enter-vr",this.onEnterVR),_.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var _=this.el.sceneEl,m=_&&_.canvas;!m||(m.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),m.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),_.removeEventListener("enter-vr",this.onEnterVR),_.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var _=this.el.object3D,m=this.pitchObject,w=this.yawObject,b=this.el.sceneEl;(b.is("vr-mode")||b.is("ar-mode"))&&b.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),_.rotation.x=this.magicWindowDeltaEuler.x+m.rotation.x,_.rotation.y=this.magicWindowDeltaEuler.y+w.rotation.y,_.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var _=this.magicWindowAbsoluteEuler,m=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),_.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),!this.previousMagicWindowYaw&&_.y!==0&&(this.previousMagicWindowYaw=_.y),this.previousMagicWindowYaw&&(m.x=_.x,m.y+=_.y-this.previousMagicWindowYaw,m.z=_.z,this.previousMagicWindowYaw=_.y))},onMouseMove:function(_){var m,w,b,O=this.pitchObject,R=this.previousMouseEvent,L=this.yawObject;!this.data.enabled||!this.mouseDown&&!this.pointerLocked||(this.pointerLocked?(w=_.movementX||_.mozMovementX||0,b=_.movementY||_.mozMovementY||0):(w=_.screenX-R.screenX,b=_.screenY-R.screenY),this.previousMouseEvent.screenX=_.screenX,this.previousMouseEvent.screenY=_.screenY,m=this.data.reverseMouseDrag?1:-1,L.rotation.y+=w*.002*m,O.rotation.x+=b*.002*m,O.rotation.x=Math.max(-E,Math.min(E,O.rotation.x)))},onMouseDown:function(_){var m=this.el.sceneEl;if(!(!this.data.enabled||!this.data.mouseEnabled||(m.is("vr-mode")||m.is("ar-mode"))&&m.checkHeadsetConnected())&&_.button===0){var w=m&&m.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=_.screenX,this.previousMouseEvent.screenY=_.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(w.requestPointerLock?w.requestPointerLock():w.mozRequestPointerLock&&w.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(_){_.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:_.touches[0].pageX,y:_.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(_){var m,w=this.el.sceneEl.canvas,b,O=this.yawObject;!this.touchStarted||!this.data.touchEnabled||(b=2*Math.PI*(_.touches[0].pageX-this.touchStart.x)/w.clientWidth,m=this.data.reverseTouchDrag?1:-1,O.rotation.y-=b*.5*m,this.touchStart={x:_.touches[0].pageX,y:_.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var _=this.el.sceneEl;!_.checkHeadsetConnected()||(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),_.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){!this.el.sceneEl.checkHeadsetConnected()||(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!!(document.pointerLockElement||document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(_){var m=this.el.sceneEl;function w(){m.canvas.classList.add("a-grab-cursor")}function b(){m.canvas.classList.remove("a-grab-cursor")}if(!m.canvas){_?m.addEventListener("render-target-loaded",w):m.addEventListener("render-target-loaded",b);return}if(_){w();return}b()},saveCameraPose:function(){var _=this.el;this.savedPose.position.copy(_.object3D.position),this.savedPose.rotation.copy(_.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var _=this.el,m=this.savedPose;!this.hasSavedPose||(_.object3D.position.copy(m.position),_.object3D.rotation.copy(m.rotation),this.hasSavedPose=!1)}})},"./src/components/magicleap-controls.js":(S,I,h)=>{var g=h("./src/utils/bind.js"),C=h("./src/core/component.js").registerComponent,v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,_=v.onButtonEvent,m="magicleap",w="-one",b=m+w,O="https://cdn.aframe.io/controllers/magicleap/magicleap-one-controller.glb",R={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]};S.exports.Component=C("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:R,init:function(){var L=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=g(this.onButtonChanged,this),this.onButtonDown=function(P){_(P.detail.id,"down",L)},this.onButtonUp=function(P){_(P.detail.id,"up",L)},this.onButtonTouchEnd=function(P){_(P.detail.id,"touchend",L)},this.onButtonTouchStart=function(P){_(P.detail.id,"touchstart",L)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var L=this.data;this.controllerIndex=L.hand==="right"?0:L.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=g(this.onModelLoaded,this),this.onControllersUpdate=g(this.onControllersUpdate,this),this.checkIfControllerPresent=g(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=g(this.removeControllersUpdateListener,this),this.onAxisMoved=g(this.onAxisMoved,this)},addEventListeners:function(){var L=this.el;L.addEventListener("buttonchanged",this.onButtonChanged),L.addEventListener("buttondown",this.onButtonDown),L.addEventListener("buttonup",this.onButtonUp),L.addEventListener("touchstart",this.onButtonTouchStart),L.addEventListener("touchend",this.onButtonTouchEnd),L.addEventListener("axismove",this.onAxisMoved),L.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var L=this.el;L.removeEventListener("buttonchanged",this.onButtonChanged),L.removeEventListener("buttondown",this.onButtonDown),L.removeEventListener("buttonup",this.onButtonUp),L.removeEventListener("touchstart",this.onButtonTouchStart),L.removeEventListener("touchend",this.onButtonTouchEnd),L.removeEventListener("axismove",this.onAxisMoved),L.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var L=this.data;y(this,b,{index:this.controllerIndex,hand:L.hand})},injectTrackedControls:function(){var L=this.el,P=this.data;L.setAttribute("tracked-controls",{idPrefix:b,hand:P.hand,controller:this.controllerIndex,orientationOffset:P.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",O)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(L){var P=this.mapping.buttons[L.detail.id],Y;!P||(P==="trigger"&&(Y=L.detail.state.value,console.log("analog value of trigger press: "+Y)),this.el.emit(P+"changed",L.detail.state))},onModelLoaded:function(L){var P=L.detail.model;P.scale.set(.01,.01,.01)},onAxisMoved:function(L){E(this,this.mapping.axes,L)},updateModel:function(L,P){},setButtonColor:function(L,P){}})},"./src/components/material.js":(S,I,h)=>{var g=h("./src/utils/index.js"),C=h("./src/core/component.js"),v=h("./src/lib/three.js"),y=h("./src/core/shader.js"),E=g.debug("components:material:error"),_=C.registerComponent,m=y.shaders,w=y.shaderNames;S.exports.Component=_("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:w,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0}},init:function(){this.material=null},update:function(L){var P=this.data;(!this.shader||P.shader!==L.shader)&&this.updateShader(P.shader),this.shader.update(this.data),this.updateMaterial(L)},updateSchema:function(L){var P,Y,J,j;Y=L&&L.shader,P=this.oldData&&this.oldData.shader,j=Y||P,J=m[j]&&m[j].schema,J||E("Unknown shader schema "+j),!(P&&Y===P)&&(this.extendSchema(J),this.updateBehavior())},updateBehavior:function(){var L,P=this.el.sceneEl,Y=this.schema,J=this,j;function U(te,ue){var xe;for(xe in j)j[xe]=te;J.shader.update(j)}this.tick=void 0,j={};for(L in Y)Y[L].type==="time"&&(this.tick=U,j[L]=!0);!P||(this.tick?P.addBehavior(this):P.removeBehavior(this))},updateShader:function(L){var P=this.data,Y=m[L]&&m[L].Shader,J;if(!Y)throw new Error("Unknown shader "+L);J=this.shader=new Y,J.el=this.el,J.init(P),this.setMaterial(J.material),this.updateSchema(P)},updateMaterial:function(L){var P=this.data,Y=this.material,J;Y.alphaTest=P.alphaTest,Y.depthTest=P.depthTest!==!1,Y.depthWrite=P.depthWrite!==!1,Y.opacity=P.opacity,Y.flatShading=P.flatShading,Y.side=b(P.side),Y.transparent=P.transparent!==!1||P.opacity<1,Y.vertexColors=P.vertexColorsEnabled,Y.visible=P.visible,Y.blending=O(P.blending),Y.dithering=P.dithering;for(J in L)break;J&&(L.alphaTest!==P.alphaTest||L.side!==P.side||L.vertexColorsEnabled!==P.vertexColorsEnabled)&&(Y.needsUpdate=!0)},remove:function(){var L=new v.MeshBasicMaterial,P=this.material,Y=this.el.getObject3D("mesh");Y&&(Y.material=L),R(P,this.system)},setMaterial:function(L){var P=this.el,Y,J=this.system;this.material&&R(this.material,J),this.material=L,J.registerMaterial(L),Y=P.getObject3D("mesh"),Y?Y.material=L:P.addEventListener("object3dset",function j(U){U.detail.type!=="mesh"||U.target!==P||(P.getObject3D("mesh").material=L,P.removeEventListener("object3dset",j))})}});function b(L){switch(L){case"back":return v.BackSide;case"double":return v.DoubleSide;default:return v.FrontSide}}function O(L){switch(L){case"none":return v.NoBlending;case"additive":return v.AdditiveBlending;case"subtractive":return v.SubtractiveBlending;case"multiply":return v.MultiplyBlending;default:return v.NormalBlending}}function R(L,P){L.dispose(),P.unregisterMaterial(L)}},"./src/components/obj-model.js":(S,I,h)=>{var g=h("./src/utils/debug.js"),C=h("./src/core/component.js").registerComponent,v=h("./src/lib/three.js"),y=g("components:obj-model:warn");S.exports.Component=C("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var E=this;this.model=null,this.objLoader=new v.OBJLoader,this.mtlLoader=new v.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(_){!E.model||_.detail.name==="material"&&E.applyMaterial()})},update:function(){var E=this.data;!E.obj||(this.resetMesh(),this.loadObj(E.obj,E.mtl))},remove:function(){!this.model||this.resetMesh()},resetMesh:function(){this.el.removeObject3D("mesh")},loadObj:function(E,_){var m=this,w=this.el,b=this.mtlLoader,O=this.objLoader,R=this.el.sceneEl.systems.renderer,L=_.substr(0,_.lastIndexOf("/")+1);if(_){w.hasAttribute("material")&&y("Material component properties are ignored when a .MTL is provided"),b.setResourcePath(L),b.load(_,function(P){P.preload(),O.setMaterials(P),O.load(E,function(Y){m.model=Y,m.model.traverse(function(J){if(J.isMesh){var j=J.material;j.color&&R.applyColorCorrection(j.color),j.map&&R.applyColorCorrection(j.map),j.emissive&&R.applyColorCorrection(j.emissive),j.emissiveMap&&R.applyColorCorrection(j.emissiveMap)}}),w.setObject3D("mesh",Y),w.emit("model-loaded",{format:"obj",model:Y})})});return}O.load(E,function(Y){m.model=Y,m.applyMaterial(),w.setObject3D("mesh",Y),w.emit("model-loaded",{format:"obj",model:Y})})},applyMaterial:function(){var E=this.el.components.material;!E||this.model.traverse(function(_){_ instanceof v.Mesh&&(_.material=E.material)})}})},"./src/components/oculus-go-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,_=v.onButtonEvent,m=h("./src/utils/index.js").device.isWebXRAvailable,w="oculus-go",b="Oculus Go",O="https://cdn.aframe.io/controllers/oculus/go/oculus-go-controller.gltf",R=m?w:b,L={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},P={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},Y=m?P:L;S.exports.Component=g("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:Y,bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var J=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(j){_(j.detail.id,"down",J)},this.onButtonUp=function(j){_(j.detail.id,"up",J)},this.onButtonTouchStart=function(j){_(j.detail.id,"touchstart",J)},this.onButtonTouchEnd=function(j){_(j.detail.id,"touchend",J)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var J=this.el;J.addEventListener("buttonchanged",this.onButtonChanged),J.addEventListener("buttondown",this.onButtonDown),J.addEventListener("buttonup",this.onButtonUp),J.addEventListener("touchstart",this.onButtonTouchStart),J.addEventListener("touchend",this.onButtonTouchEnd),J.addEventListener("model-loaded",this.onModelLoaded),J.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var J=this.el;J.removeEventListener("buttonchanged",this.onButtonChanged),J.removeEventListener("buttondown",this.onButtonDown),J.removeEventListener("buttonup",this.onButtonUp),J.removeEventListener("touchstart",this.onButtonTouchStart),J.removeEventListener("touchend",this.onButtonTouchEnd),J.removeEventListener("model-loaded",this.onModelLoaded),J.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,R,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var J=this.el,j=this.data;J.setAttribute("tracked-controls",{armModel:j.armModel,hand:j.hand,idPrefix:R,orientationOffset:j.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",O)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(J){var j=J.detail.model,U;!this.data.model||(U=this.buttonMeshes={},U.trigger=j.getObjectByName("oculus_go_button_trigger"),U.trackpad=j.getObjectByName("oculus_go_touchpad"),U.touchpad=j.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(J){var j=this.mapping.buttons[J.detail.id];!j||this.el.emit(j+"changed",J.detail.state)},onAxisMoved:function(J){E(this,this.mapping.axes,J)},updateModel:function(J,j){!this.data.model||this.updateButtonModel(J,j)},updateButtonModel:function(J,j){var U=this.buttonMeshes;if(!(!U||!U[J])){var te,ue;switch(j){case"down":te=this.data.buttonHighlightColor;break;case"touchstart":te=this.data.buttonTouchedColor;break;default:te=this.data.buttonColor}ue=U[J],ue.material.color.set(te),this.rendererSystem.applyColorCorrection(ue.material.color)}}})},"./src/components/oculus-touch-controls.js":(S,I,h)=>{var g=h("./src/utils/bind.js"),C=h("./src/core/component.js").registerComponent,v=h("./src/lib/three.js"),y=h("./src/utils/tracked-controls.js"),E=y.checkControllerPresentAndSetup,_=y.emitIfAxesChanged,m=y.onButtonEvent,w=h("./src/utils/index.js").device.isWebXRAvailable,b="oculus-touch",O="Oculus Touch",R=w?b:O,L="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",P="https://cdn.aframe.io/controllers/meta/",Y={left:{modelUrl:L+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new v.Vector3(-.005,.003,-.055),modelPivotRotation:new v.Euler(0,0,0)},right:{modelUrl:L+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new v.Vector3(.005,.003,-.055),modelPivotRotation:new v.Euler(0,0,0)}},J={left:{modelUrl:L+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new v.Vector3(-.005,.036,-.037),modelPivotRotation:new v.Euler(Math.PI/4.5,0,0)},right:{modelUrl:L+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new v.Vector3(.005,.036,-.037),modelPivotRotation:new v.Euler(Math.PI/4.5,0,0)}},j=w?J:Y,U="oculus-touch",te={"oculus-touch":j,"oculus-touch-v2":{left:{modelUrl:L+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new v.Vector3(0,-.007,-.021),modelPivotRotation:new v.Euler(-Math.PI/4,0,0)},right:{modelUrl:L+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new v.Vector3(0,-.007,-.021),modelPivotRotation:new v.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:L+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new v.Vector3(0,0,0),modelPivotRotation:new v.Euler(0,0,0)},right:{modelUrl:L+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new v.Vector3(0,0,0),modelPivotRotation:new v.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:P+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new v.Vector3(0,0,0),modelPivotRotation:new v.Euler(0,0,0)},right:{modelUrl:P+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new v.Vector3(0,0,0),modelPivotRotation:new v.Euler(0,0,0)}}},ue={left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},xe={left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},Ee=w?xe:ue;S.exports.Component=C("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:Ee,bindMethods:function(){this.onButtonChanged=g(this.onButtonChanged,this),this.onThumbstickMoved=g(this.onThumbstickMoved,this),this.onModelLoaded=g(this.onModelLoaded,this),this.onControllersUpdate=g(this.onControllersUpdate,this),this.checkIfControllerPresent=g(this.checkIfControllerPresent,this),this.onAxisMoved=g(this.onAxisMoved,this)},init:function(){var q=this;this.onButtonDown=function(Q){m(Q.detail.id,"down",q,q.data.hand)},this.onButtonUp=function(Q){m(Q.detail.id,"up",q,q.data.hand)},this.onButtonTouchStart=function(Q){m(Q.detail.id,"touchstart",q,q.data.hand)},this.onButtonTouchEnd=function(Q){m(Q.detail.id,"touchend",q,q.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.triggerEuler=new v.Euler},addEventListeners:function(){var q=this.el;q.addEventListener("buttonchanged",this.onButtonChanged),q.addEventListener("buttondown",this.onButtonDown),q.addEventListener("buttonup",this.onButtonUp),q.addEventListener("touchstart",this.onButtonTouchStart),q.addEventListener("touchend",this.onButtonTouchEnd),q.addEventListener("axismove",this.onAxisMoved),q.addEventListener("model-loaded",this.onModelLoaded),q.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var q=this.el;q.removeEventListener("buttonchanged",this.onButtonChanged),q.removeEventListener("buttondown",this.onButtonDown),q.removeEventListener("buttonup",this.onButtonUp),q.removeEventListener("touchstart",this.onButtonTouchStart),q.removeEventListener("touchend",this.onButtonTouchEnd),q.removeEventListener("axismove",this.onAxisMoved),q.removeEventListener("model-loaded",this.onModelLoaded),q.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){E(this,R,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(q){var Q=this.data,F;if(!!Q.model){if(this.displayModel=te[Q.controllerType]||te[U],Q.controllerType==="auto"){var z=this.el.sceneEl.systems["tracked-controls-webvr"];if(z&&z.vrDisplay){var X=z.vrDisplay.displayName;/^Oculus Quest$/.test(X)&&(this.displayModel=te["oculus-touch-v2"])}else{F=U;for(var fe=Object.keys(te),Ae=0;Ae<q.profiles.length;Ae++)if(fe.indexOf(q.profiles[Ae])!==-1){F=q.profiles[Ae];break}this.displayModel=te[F]}}var Se=this.displayModel[Q.hand].modelUrl;this.isOculusTouchV3=this.displayModel===te["oculus-touch-v3"],this.el.setAttribute("gltf-model",Se)}},injectTrackedControls:function(q){var Q=this.data,F=b,z=Q.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",X=w?F:z;this.el.setAttribute("tracked-controls",{id:X,hand:Q.hand,orientationOffset:Q.orientationOffset,handTrackingEnabled:!1,iterateControllerProfiles:!0,space:"gripSpace"}),this.loadModel(q)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(q){var Q=this.mapping[this.data.hand].buttons[q.detail.id];if(!!Q){if(this.isOculusTouchV3)this.onButtonChangedV3(q);else{var F=this.buttonMeshes,z;(Q==="trigger"||Q==="grip")&&(z=q.detail.state.value),F&&(Q==="trigger"&&F.trigger&&(F.trigger.rotation.x=this.originalXRotationTrigger-z*(Math.PI/26)),Q==="grip"&&F.grip&&(z*=this.data.hand==="left"?-1:1,F.grip.position.x=this.originalXPositionGrip+z*.004))}this.el.emit(Q+"changed",q.detail.state)}},clickButtons:["xbutton","ybutton","abutton","bbutton","thumbstick"],onButtonChangedV3:function(q){var Q=this.mapping[this.data.hand].buttons[q.detail.id],F=this.buttonObjects,z;!F||(z=q.detail.state.value,z*=this.data.hand==="left"?-1:1,Q==="trigger"?(this.triggerEuler.copy(this.buttonRanges.trigger.min.rotation),this.triggerEuler.x+=z*this.buttonRanges.trigger.diff.x,this.triggerEuler.y+=z*this.buttonRanges.trigger.diff.y,this.triggerEuler.z+=z*this.buttonRanges.trigger.diff.z,F.trigger.setRotationFromEuler(this.triggerEuler)):Q==="grip"?F.grip.position.x=F.grip.minX+z*.004:this.clickButtons.includes(Q)&&(F[Q].position.y=z===0?this.buttonRanges[Q].unpressedY:this.buttonRanges[Q].pressedY))},onModelLoaded:function(q){if(!!this.data.model){if(this.isOculusTouchV3)this.onOculusTouchV3ModelLoaded(q);else{var Q=this.controllerObject3D=q.detail.model,F;F=this.buttonMeshes={},F.grip=Q.getObjectByName("buttonHand"),this.originalXPositionGrip=F.grip&&F.grip.position.x,F.trigger=Q.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=F.trigger&&F.trigger.rotation.x,F.thumbstick=Q.getObjectByName("stick"),F.xbutton=Q.getObjectByName("buttonX"),F.abutton=Q.getObjectByName("buttonA"),F.ybutton=Q.getObjectByName("buttonY"),F.bbutton=Q.getObjectByName("buttonB")}for(var z in this.buttonMeshes)this.buttonMeshes[z]&&V(this.buttonMeshes[z]);this.applyOffset(q.detail.model),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(q){q.position.copy(this.displayModel[this.data.hand].modelPivotOffset),q.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onOculusTouchV3ModelLoaded:function(q){var Q=this.controllerObject3D=q.detail.model,F=this.buttonObjects={},z=this.buttonMeshes={},X=this.buttonRanges={};z.grip=Q.getObjectByName("squeeze"),F.grip=Q.getObjectByName("xr_standard_squeeze_pressed_value"),X.grip={min:Q.getObjectByName("xr_standard_squeeze_pressed_min"),max:Q.getObjectByName("xr_standard_squeeze_pressed_max")},F.grip.minX=F.grip.position.x,z.thumbstick=Q.getObjectByName("thumbstick"),F.thumbstick=Q.getObjectByName("xr_standard_thumbstick_pressed_value"),X.thumbstick={min:Q.getObjectByName("xr_standard_thumbstick_pressed_min"),max:Q.getObjectByName("xr_standard_thumbstick_pressed_max"),originalRotation:this.buttonObjects.thumbstick.rotation.clone()},X.thumbstick.pressedY=F.thumbstick.position.y,X.thumbstick.unpressedY=X.thumbstick.pressedY+Math.abs(X.thumbstick.max.position.y)-Math.abs(X.thumbstick.min.position.y),z.trigger=Q.getObjectByName("trigger"),F.trigger=Q.getObjectByName("xr_standard_trigger_pressed_value"),X.trigger={min:Q.getObjectByName("xr_standard_trigger_pressed_min"),max:Q.getObjectByName("xr_standard_trigger_pressed_max")},X.trigger.diff={x:Math.abs(X.trigger.max.rotation.x)-Math.abs(X.trigger.min.rotation.x),y:Math.abs(X.trigger.max.rotation.y)-Math.abs(X.trigger.min.rotation.y),z:Math.abs(X.trigger.max.rotation.z)-Math.abs(X.trigger.min.rotation.z)};var fe=this.data.hand==="left"?"x":"a",Ae=this.data.hand==="left"?"y":"b",Se=fe+"button",Be=Ae+"button";z[Se]=Q.getObjectByName(fe+"_button"),F[Se]=Q.getObjectByName(fe+"_button_pressed_value"),X[Se]={min:Q.getObjectByName(fe+"_button_pressed_min"),max:Q.getObjectByName(fe+"_button_pressed_max")},z[Be]=Q.getObjectByName(Ae+"_button"),F[Be]=Q.getObjectByName(Ae+"_button_pressed_value"),X[Be]={min:Q.getObjectByName(Ae+"_button_pressed_min"),max:Q.getObjectByName(Ae+"_button_pressed_max")},X[Se].unpressedY=F[Se].position.y,X[Se].pressedY=X[Se].unpressedY+Math.abs(X[Se].max.position.y)-Math.abs(X[Se].min.position.y),X[Be].unpressedY=F[Be].position.y,X[Be].pressedY=X[Be].unpressedY-Math.abs(X[Be].max.position.y)+Math.abs(X[Be].min.position.y)},onAxisMoved:function(q){_(this,this.mapping[this.data.hand].axes,q)},onThumbstickMoved:function(q){if(!(!this.isOculusTouchV3||!this.buttonMeshes||!this.buttonMeshes.thumbstick))for(var Q in q.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[Q]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[Q]]-Math.PI/8*q.detail[Q]*(Q==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateModel:function(q,Q){!this.data.model||this.updateButtonModel(q,Q)},updateButtonModel:function(q,Q){var F=this.buttonMeshes,z,X;!F||F[q]&&(X=Q==="up"||Q==="touchend"?F[q].originalColor||this.data.buttonColor:Q==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,z=F[q],z.material.color.set(X),this.rendererSystem.applyColorCorrection(z.material.color))}});function V(q){q.traverse(function(Q){var F;Q.type==="Mesh"&&(F=Q.material.clone(),q.originalColor=Q.material.color,Q.material.dispose(),Q.material=F)})}},"./src/components/position.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent;S.exports.Component=g("position",{schema:{type:"vec3"},update:function(){var C=this.el.object3D,v=this.data;C.position.set(v.x,v.y,v.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},"./src/components/raycaster.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/lib/three.js"),v=h("./src/utils/index.js"),y=v.debug("components:raycaster:warn"),E=/^[\w\s-.,[\]#]*$/,_={childList:!0,attributes:!0,subtree:!0},m={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared",INTERSECTION_CLOSEST_ENTITY_CHANGED:"raycaster-closest-entity-changed"};S.exports.Component=g("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new C.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new C.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new C.Vector3,this.otherLineEndVec3=new C.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(b){var O=this.data,R=this.el,L=this.raycaster;L.far=O.far,L.near=O.near,O.showLine&&(O.far!==b.far||O.origin!==b.origin||O.direction!==b.direction||!b.showLine)&&(this.unitLineEndVec3.copy(O.direction).normalize(),this.drawLine()),!O.showLine&&b.showLine&&R.removeAttribute("line"),O.objects!==b.objects&&!E.test(O.objects)&&y('[raycaster] Selector "'+O.objects+'" may not update automatically with DOM changes.'),O.objects||y('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),O.autoRefresh!==b.autoRefresh&&R.isPlaying&&(O.autoRefresh?this.addEventListeners():this.removeEventListeners()),b.enabled&&!O.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){!this.data.autoRefresh||(this.observer.observe(this.el.sceneEl,_),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var b=this.data,O;O=b.objects?this.el.sceneEl.querySelectorAll(b.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(O),this.dirty=!1},tock:function(b){var O=this.data,R=this.prevCheckTime;!O.enabled||R&&b-R<O.interval||(this.prevCheckTime=b,this.checkIntersections())},checkIntersections:function(){var b=this.clearedIntersectedEls,O=this.el,R=this.data,L,P=this.intersectedEls,Y,J=this.intersections,j=this.newIntersectedEls,U=this.newIntersections,te=this.prevIntersectedEls,ue=this.rawIntersections;for(this.dirty&&this.refreshObjects(),w(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),ue.length=0,this.raycaster.intersectObjects(this.objects,!0,ue),J.length=0,P.length=0,L=0;L<ue.length;L++)Y=ue[L],!(R.showLine&&Y.object===O.getObject3D("line"))&&Y.object.el&&(J.push(Y),P.push(Y.object.el));for(U.length=0,j.length=0,L=0;L<J.length;L++)te.indexOf(J[L].object.el)===-1&&(U.push(J[L]),j.push(J[L].object.el));for(b.length=0,L=0;L<te.length;L++)P.indexOf(te[L])===-1&&(te[L].emit(m.INTERSECT_CLEAR,this.intersectedClearedDetail),b.push(te[L]));for(b.length&&O.emit(m.INTERSECTION_CLEAR,this.intersectionClearedDetail),L=0;L<j.length;L++)j[L].emit(m.INTERSECT,this.intersectedDetail);U.length&&(this.intersectionDetail.els=j,this.intersectionDetail.intersections=U,O.emit(m.INTERSECTION,this.intersectionDetail)),(te.length===0&&J.length>0||te.length>0&&J.length===0||te.length&&J.length&&te[0]!==J[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=J,O.emit(m.INTERSECTION_CLOSEST_ENTITY_CHANGED,this.intersectionDetail)),R.showLine&&setTimeout(this.updateLine)},updateLine:function(){var b=this.el,O=this.intersections,R;O.length&&(O[0].object.el===b&&O[1]?R=O[1].distance:R=O[0].distance),this.drawLine(R)},getIntersection:function(b){var O,R;for(O=0;O<this.intersections.length;O++)if(R=this.intersections[O],R.object.el===b)return R;return null},updateOriginDirection:function(){var b=new C.Vector3,O=new C.Vector3;return function(){var L=this.el,P=this.data;if(P.useWorldCoordinates){this.raycaster.set(P.origin,P.direction);return}L.object3D.updateMatrixWorld(),O.setFromMatrixPosition(L.object3D.matrixWorld),(P.origin.x!==0||P.origin.y!==0||P.origin.z!==0)&&(O=L.object3D.localToWorld(O.copy(P.origin))),b.copy(P.direction).transformDirection(L.object3D.matrixWorld).normalize(),this.raycaster.set(O,b)}}(),drawLine:function(b){var O=this.data,R=this.el,L;L=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,b===void 0&&(b=O.far===1/0?1e3:O.far),this.lineData.start=O.origin,this.lineData.end=L.copy(this.unitLineEndVec3).multiplyScalar(b).add(O.origin),this.lineData.color=O.lineColor,this.lineData.opacity=O.lineOpacity,R.setAttribute("line",this.lineData)},flattenObject3DMaps:function(b){var O,R,L=this.objects,P=this.el.sceneEl.object3D;function Y(j){return j.parent?Y(j.parent):j===P}for(L.length=0,R=0;R<b.length;R++){var J=b[R];if(J.isEntity&&J.object3D&&Y(J.object3D))for(O in J.object3DMap)L.push(J.getObject3D(O))}return L},clearAllIntersections:function(){var b;for(b=0;b<this.intersectedEls.length;b++)this.intersectedEls[b].emit(m.INTERSECT_CLEAR,this.intersectedClearedDetail);w(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(m.INTERSECTION_CLEAR,this.intersectionClearedDetail)}});function w(b,O){var R;for(b.length=O.length,R=0;R<O.length;R++)b[R]=O[R]}},"./src/components/rotation.js":(S,I,h)=>{var g=h("./src/lib/three.js").MathUtils.degToRad,C=h("./src/core/component.js").registerComponent;S.exports.Component=C("rotation",{schema:{type:"vec3"},update:function(){var v=this.data,y=this.el.object3D;y.rotation.set(g(v.x),g(v.y),g(v.z)),y.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},"./src/components/scale.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=1e-5;S.exports.Component=g("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var v=this.data,y=this.el.object3D,E=v.x===0?C:v.x,_=v.y===0?C:v.y,m=v.z===0?C:v.z;y.scale.set(E,_,m)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},"./src/components/scene/ar-hit-test.js":(S,I,h)=>{var g="data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",C=h("./src/core/component.js").registerComponent,v=h("./src/lib/three.js"),y=21,E=function(){var b=new v.Quaternion,O=new v.Vector3;function R(L,P,Y){P.position.copy(L.transform.position),P.quaternion.copy(L.transform.orientation),O.copy(Y),b.copy(L.transform.orientation),O.applyQuaternion(b),P.position.sub(O)}return R}();E.tempFakePose={transform:{orientation:new v.Quaternion,position:new v.Vector3}};function _(b,O){this.renderer=b,this.xrHitTestSource=null,b.xr.addEventListener("sessionend",function(){this.xrHitTestSource=null}.bind(this)),b.xr.addEventListener("sessionstart",function(){this.sessionStart(O)}.bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(O)}_.prototype.previousFrameAnchors=new Set,_.prototype.anchorToObject3D=new Map;function m(b){console.warn(b.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}_.prototype.sessionStart=function(O){if(this.session=this.renderer.xr.getSession(),!("requestHitTestSource"in this.session)){m({message:"No requestHitTestSource on the session."});return}O.space?this.session.requestHitTestSource(O).then(function(R){this.xrHitTestSource=R}.bind(this)).catch(m):O.profile&&this.session.requestHitTestSourceForTransientInput(O).then(function(R){this.xrHitTestSource=R,this.transient=!0}.bind(this)).catch(m)},_.prototype.anchorFromLastHitTestResult=function(b,O){var R=this.lastHitTest;if(!!R){var L={object3D:b,offset:O};Array.from(this.anchorToObject3D.entries()).forEach(function(P){var Y=P[1].object3D,J=P[0];Y===b&&(this.anchorToObject3D.delete(J),J.delete())}.bind(this)),R.createAnchor&&R.createAnchor().then(function(P){this.anchorToObject3D.set(P,L)}.bind(this)).catch(function(P){console.warn(P.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},_.prototype.doHit=function(O){if(!!this.renderer.xr.isPresenting){var R=this.renderer.xr.getReferenceSpace(),L=O.getViewerPose(R),P,Y;if(this.xrHitTestSource&&L)return this.transient?(P=O.getHitTestResultsForTransientInput(this.xrHitTestSource),P.length>0?(Y=P[0].results,Y.length>0?(this.lastHitTest=Y[0],Y[0].getPose(R)):!1):!1):(P=O.getHitTestResults(this.xrHitTestSource),P.length>0?(this.lastHitTest=P[0],P[0].getPose(R)):!1)}},_.updateAnchorPoses=function(b,O){var R=b.trackedAnchors||_.prototype.previousFrameAnchors;_.prototype.previousFrameAnchors.forEach(function(L){R.has(L)||_.prototype.anchorToObject3D.delete(L)}),R.forEach(function(L){var P,Y,J,j;try{P=b.getPose(L.anchorSpace,O)}catch{}P&&(Y=_.prototype.anchorToObject3D.get(L),J=Y.offset,j=Y.object3D,E(P,j,J))})};var w;S.exports.Component=C("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:g,type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new v.OrthographicCamera,this.orthoCam.layers.set(y),this.textureTarget=new v.WebGLRenderTarget(512,512,{}),this.basicMaterial=new v.MeshBasicMaterial({color:0,side:v.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new v.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var b=this.el.getAttribute("webxr"),O=b.optionalFeatures;(!O.includes("hit-test")||!O.includes("anchors"))&&(O.push("hit-test"),O.push("anchors"),this.el.setAttribute("webxr",b)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",function(){this.hitTest=null}.bind(this)),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",function(){if(!!this.el.is("ar-mode")){var R=this.el.sceneEl.renderer,L=this.session=R.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,w||(w=new Map),L.requestReferenceSpace("viewer").then(function(J){this.hitTest=new _(R,{space:J}),w.set(J,this.hitTest),this.el.emit("ar-hit-test-start")}.bind(this));var P="generic-touchscreen",Y=new _(R,{profile:P});L.addEventListener("selectstart",function(J){if(this.data.enabled===!0){var j=J.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:j,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),j.profiles[0]===P?this.hitTest=Y:(this.hitTest=w.get(j)||new _(R,{space:j.targetRaySpace}),w.set(j,this.hitTest)))}}.bind(this)),L.addEventListener("selectend",function(J){if(!this.hitTest||this.data.enabled!==!0){this.hitTest=null;return}var j=J.inputSource,U;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(U=this.data.target.object3D,U&&(E.tempFakePose.transform.position.copy(this.bboxMesh.position),E.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),E(E.tempFakePose,U,this.bboxOffset),U.visible=!0,this.hitTest.anchorFromLastHitTestResult(U,this.bboxOffset))),this.el.emit("ar-hit-test-select",{inputSource:j,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion})),this.hitTest=null}.bind(this))}}.bind(this)),this.bboxOffset=new v.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(y),this.data.target.object3D.traverse(function(b){b.layers.enable(y)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var b=new v.PlaneGeometry(1,1),O=new v.MeshBasicMaterial({transparent:!0,color:16777215});b.rotateX(-Math.PI/2),b.rotateY(-Math.PI/2),this.bbox=new v.Box3,this.bboxMesh=new v.Mesh(b,O),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var b,O=this.el.sceneEl.renderer,R,L,P=O.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),R=O.getRenderTarget(),O.setRenderTarget(this.textureTarget),O.xr.enabled=!1,L=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,O.render(this.el.object3D,this.orthoCam),this.el.object3D.background=L,this.el.object3D.overrideMaterial=null,O.xr.enabled=P,O.setRenderTarget(R),O.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),b=this.context.getImageData(0,0,512,512);for(var Y=0;Y<262144;Y++)b.data[Y*4+3]!==0&&b.data[Y*4+3]!==255&&(b.data[Y*4+3]=128);this.context.putImageData(b,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var b,O=this.el.sceneEl.frame,R=this.el.sceneEl.renderer;if(O&&_.updateAnchorPoses(O,R.xr.getReferenceSpace()),this.bboxNeedsUpdate){if(this.bboxNeedsUpdate=!1,!this.data.target||this.data.type==="map"){var L;this.textureCache.has(this.data.src)?L=this.textureCache.get(this.data.src):(L=new v.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,L)),this.bboxMesh.material.map=L,this.bboxMesh.material.needsUpdate=!0}this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)}this.hitTest&&(b=this.hitTest.doHit(O),b&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(b.transform.position),this.bboxMesh.quaternion.copy(b.transform.orientation)))}})},"./src/components/scene/background.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/core/component.js").components;S.exports.Component=g("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var v=this.data,y=this.el.object3D;v.transparent?y.background=null:y.background=new THREE.Color(v.color)},remove:function(){var v=this.data,y=this.el.object3D;if(v.transparent){y.background=null;return}y.background=C[this.name].schema.color.default}})},"./src/components/scene/debug.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent;S.exports.Component=g("debug",{schema:{default:!0}})},"./src/components/scene/device-orientation-permission-ui.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/index.js"),v=C.bind,y=h("./src/constants/index.js"),E="a-modal",_="a-dialog",m="a-dialog-text",w="a-dialog-text-container",b="a-dialog-buttons-container",O="a-dialog-button",R="a-dialog-allow-button",L="a-dialog-deny-button",P="a-dialog-ok-button";S.exports.Component=g("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},init:function(){var U=this;if(!!this.data.enabled){if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"&&location.protocol==="http:"&&this.showHTTPAlert(),typeof DeviceOrientationEvent>"u"||!DeviceOrientationEvent.requestPermission){this.permissionGranted=!0;return}this.onDeviceMotionDialogAllowClicked=v(this.onDeviceMotionDialogAllowClicked,this),this.onDeviceMotionDialogDenyClicked=v(this.onDeviceMotionDialogDenyClicked,this),DeviceOrientationEvent.requestPermission().then(function(){U.el.emit("deviceorientationpermissiongranted"),U.permissionGranted=!0}).catch(function(){U.devicePermissionDialogEl=Y(U.data.denyButtonText,U.data.allowButtonText,U.data.deviceMotionMessage,U.onDeviceMotionDialogAllowClicked,U.onDeviceMotionDialogDenyClicked),U.el.appendChild(U.devicePermissionDialogEl)})}},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var U=this,te=J(U.data.cancelButtonText,U.data.httpsMessage,function(){U.el.removeChild(te)});this.el.appendChild(te)},onDeviceMotionDialogAllowClicked:function(){var U=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(te){te==="granted"?(U.el.emit("deviceorientationpermissiongranted"),U.permissionGranted=!0):U.el.emit("deviceorientationpermissionrejected"),U.remove()}).catch(console.error)}});function Y(U,te,ue,xe,Ee){var V,q,Q;return V=document.createElement("div"),V.classList.add(b),q=document.createElement("button"),q.classList.add(O,L),q.setAttribute(y.AFRAME_INJECTED,""),q.innerHTML=U,V.appendChild(q),Q=document.createElement("button"),Q.classList.add(O,R),Q.setAttribute(y.AFRAME_INJECTED,""),Q.innerHTML=te,V.appendChild(Q),Q.addEventListener("click",function(F){F.stopPropagation(),xe()}),q.addEventListener("click",function(F){F.stopPropagation(),Ee()}),j(ue,V)}function J(U,te,ue){var xe,Ee;return xe=document.createElement("div"),xe.classList.add(b),Ee=document.createElement("button"),Ee.classList.add(O,P),Ee.setAttribute(y.AFRAME_INJECTED,""),Ee.innerHTML=U,xe.appendChild(Ee),Ee.addEventListener("click",function(V){V.stopPropagation(),ue()}),j(te,xe)}function j(U,te){var ue,xe,Ee,V;return ue=document.createElement("div"),ue.classList.add(E),ue.setAttribute(y.AFRAME_INJECTED,""),xe=document.createElement("div"),xe.className=_,xe.setAttribute(y.AFRAME_INJECTED,""),ue.appendChild(xe),Ee=document.createElement("div"),Ee.classList.add(w),xe.appendChild(Ee),V=document.createElement("div"),V.classList.add(m),V.innerHTML=U,Ee.appendChild(V),xe.appendChild(te),ue}},"./src/components/scene/embedded.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent;S.exports.Component=g("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var C=this.el,v=C.querySelector(".a-enter-vr");this.data===!0?(v&&v.classList.add("embedded"),C.removeFullScreenStyles()):(v&&v.classList.remove("embedded"),C.addFullScreenStyles())}})},"./src/components/scene/fog.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/lib/three.js"),v=h("./src/utils/debug.js"),y=v("components:fog:warn");S.exports.Component=g("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var _=this.data,m=this.el,w=this.el.object3D.fog;if(!m.isScene){y("Fog component can only be applied to <a-scene>");return}if(!w||_.type!==w.name){m.object3D.fog=E(_),m.systems.material.updateMaterials();return}Object.keys(this.schema).forEach(function(b){var O=_[b];b==="color"&&(O=new C.Color(O)),w[b]=O})},remove:function(){var _=this.el.object3D.fog;!_||(_.far=0,_.near=.1)}});function E(_){var m;return _.type==="exponential"?m=new C.FogExp2(_.color,_.density):m=new C.Fog(_.color,_.near,_.far),m.name=_.type,m}},"./src/components/scene/inspector.js":(S,I,h)=>{var g=h("./src/constants/index.js").AFRAME_INJECTED,C=h("./package.json"),v=h("./src/core/component.js").registerComponent,y=h("./src/utils/index.js");function E(O){var R=O.split(".");return R[2]="x",R.join(".")}var _="https://unpkg.com/aframe-inspector@"+E(C.version)+"/dist/aframe-inspector.min.js",m=_,w="Loading Inspector",b="Error loading Inspector";S.exports.Component=v("inspector",{schema:{url:{default:m}},init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var O;!this.firstPlay||(O=y.getUrlParameter("inspector"),O!=="false"&&!!O&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var O='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=w+O},remove:function(){this.removeEventListeners()},onKeydown:function(O){var R=O.keyCode===73&&(O.ctrlKey&&O.altKey||O.getModifierState("AltGraph"));!R||this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(O){O.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(O){var R=this,L;if(AFRAME.INSPECTOR||AFRAME.inspectorInjected){AFRAME.INSPECTOR.open(O);return}this.showLoader(),L=document.createElement("script"),L.src=this.data.url,L.setAttribute("data-name","aframe-inspector"),L.setAttribute(g,""),L.onload=function(){AFRAME.INSPECTOR.open(O),R.hideLoader(),R.removeEventListeners()},L.onerror=function(){R.loadingMessageEl.innerHTML=b},document.head.appendChild(L),AFRAME.inspectorInjected=!0},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})},"./src/components/scene/keyboard-shortcuts.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/index.js").shouldCaptureKeyEvent;S.exports.Component=g("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(v){var y=this.data;this.enterVREnabled=y.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(v){var y=this.el;!C(v)||(this.enterVREnabled&&v.keyCode===70&&y.enterVR(),this.enterVREnabled&&v.keyCode===27&&y.exitVR())}})},"./src/components/scene/pool.js":(S,I,h)=>{var g=h("./src/utils/debug.js"),C=h("./src/core/component.js").registerComponent,v=g("components:pool:warn");S.exports.Component=C("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var y;for(this.availableEls=[],this.usedEls=[],this.data.mixin||v("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||v("Container "+this.data.container+" not found.")),this.container=this.container||this.el,y=0;y<this.data.size;++y)this.createEntity()},update:function(y){var E=this.data;(y.mixin!==E.mixin||y.size!==E.size)&&this.initPool()},createEntity:function(){var y;y=document.createElement("a-entity"),y.play=this.wrapPlay(y.play),y.setAttribute("mixin",this.data.mixin),y.object3D.visible=!1,y.pause(),this.container.appendChild(y),this.availableEls.push(y);var E=this.usedEls;y.addEventListener("loaded",function(){E.indexOf(y)===-1&&(y.object3DParent=y.object3D.parent,y.object3D.parent.remove(y.object3D))})},wrapPlay:function(y){var E=this.usedEls;return function(){E.indexOf(this)!==-1&&y.call(this)}},requestEntity:function(){var y;if(this.availableEls.length===0){if(this.data.dynamic===!1){v("Requested entity from empty pool: "+this.attrName);return}else v("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName);this.createEntity()}return y=this.availableEls.shift(),this.usedEls.push(y),y.object3DParent&&(y.object3DParent.add(y.object3D),this.updateRaycasters()),y.object3D.visible=!0,y},returnEntity:function(y){var E=this.usedEls.indexOf(y);if(E===-1){v("The returned entity was not previously pooled from "+this.attrName);return}return this.usedEls.splice(E,1),this.availableEls.push(y),y.object3DParent=y.object3D.parent,y.object3D.parent.remove(y.object3D),this.updateRaycasters(),y.object3D.visible=!1,y.pause(),y},updateRaycasters(){var y=document.querySelectorAll("[raycaster]");y.forEach(function(E){E.components.raycaster.setDirty()})}})},"./src/components/scene/reflection.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent;function C(v,y,E,_){var m=Math.max(v.primaryLightIntensity.x,Math.max(v.primaryLightIntensity.y,v.primaryLightIntensity.z));y.sh.fromArray(v.sphericalHarmonicsCoefficients),y.intensity=1,E&&(E.color.setRGB(v.primaryLightIntensity.x/m,v.primaryLightIntensity.y/m,v.primaryLightIntensity.z/m),E.intensity=m,_.copy(v.primaryLightDirection))}S.exports.Component=g("reflection",{schema:{directionalLight:{type:"selector"}},init:function(){var v=this;this.cubeRenderTarget=new THREE.WebGLCubeRenderTarget(16),this.cubeCamera=new THREE.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new THREE.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var y=this.el.getAttribute("webxr"),E=y.optionalFeatures;E.includes("light-estimation")||(E.push("light-estimation"),this.el.setAttribute("webxr",y)),this.el.addEventListener("enter-vr",function(){var _=v.el.renderer,m=_.xr.getSession();m.requestLightProbe&&v.el.is("ar-mode")&&v.startLightProbe()}),this.el.addEventListener("exit-vr",function(){v.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var v=this.el.renderer,y=v.xr.getSession(),E=this,_=v.getContext();if(!this.probeLight){var m=document.createElement("a-light");m.setAttribute("type","probe"),m.setAttribute("intensity",0),this.el.appendChild(m),this.probeLight=m}switch(y.preferredReflectionFormat){case"srgba8":_.getExtension("EXT_sRGB");break;case"rgba16f":_.getExtension("OES_texture_half_float");break}this.glBinding=new XRWebGLBinding(y,_),_.getExtension("EXT_sRGB"),_.getExtension("OES_texture_half_float"),y.requestLightProbe().then(function(w){E.xrLightProbe=w,w.addEventListener("reflectionchange",E.updateXRCubeMap.bind(E))}).catch(function(w){console.warn("Lighting estimation not supported: "+w.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var v=this.el.renderer,y=this.glBinding.getReflectionCubeMap(this.xrLightProbe);if(y){var E=v.properties.get(this.lightingEstimationTexture);E.__webglTexture=y,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture}},tick:function(){var v=this.el.object3D,y=this.el.renderer,E=this.el.frame;if(E&&this.xrLightProbe){var _=E.getLightEstimate(this.xrLightProbe);_&&C(_,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(v.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(y,v),v.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&E&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}})},"./src/components/scene/screenshot.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/lib/three.js"),v=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),y=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);S.exports.Component=g("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var E=this.el,_=this;E.renderer?m():E.addEventListener("render-target-loaded",m);function m(){var w=E.renderer.getContext();!w||(_.cubeMapSize=w.getParameter(w.MAX_CUBE_MAP_TEXTURE_SIZE),_.material=new C.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:v,fragmentShader:y,side:C.DoubleSide}),_.quad=new C.Mesh(new C.PlaneGeometry(1,1),_.material),_.quad.visible=!1,_.camera=new C.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),_.canvas=document.createElement("canvas"),_.ctx=_.canvas.getContext("2d"),E.object3D.add(_.quad),_.onKeyDown=_.onKeyDown.bind(_))}},getRenderTarget:function(E,_){return new C.WebGLRenderTarget(E,_,{encoding:this.el.sceneEl.renderer.outputEncoding,minFilter:C.LinearFilter,magFilter:C.LinearFilter,wrapS:C.ClampToEdgeWrapping,wrapT:C.ClampToEdgeWrapping,format:C.RGBAFormat,type:C.UnsignedByteType})},resize:function(E,_){this.quad.scale.set(E,_,1),this.camera.left=-1*E/2,this.camera.right=E/2,this.camera.top=_/2,this.camera.bottom=-1*_/2,this.camera.updateProjectionMatrix(),this.canvas.width=E,this.canvas.height=_},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(E){var _=E.keyCode===83&&E.ctrlKey&&E.altKey;if(!(!this.data||!_)){var m=E.shiftKey?"equirectangular":"perspective";this.capture(m)}},setCapture:function(E){var _=this.el,m,w,b,O;return E==="perspective"?(this.quad.visible=!1,w=this.data.camera&&this.data.camera.components.camera.camera||_.camera,m={width:this.data.width,height:this.data.height}):(w=this.camera,O=new C.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:C.RGBFormat,generateMipmaps:!0,minFilter:C.LinearMipmapLinearFilter,encoding:C.sRGBEncoding}),b=new C.CubeCamera(_.camera.near,_.camera.far,O),_.camera.getWorldPosition(b.position),_.camera.getWorldQuaternion(b.quaternion),b.update(_.renderer,_.object3D),this.quad.material.uniforms.map.value=b.renderTarget.texture,m={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:w,size:m,projection:E}},capture:function(E){var _=this.el.renderer.xr.enabled,m=this.el.renderer,w;m.xr.enabled=!1,w=this.setCapture(E),this.renderCapture(w.camera,w.size,w.projection),this.saveCapture(),m.xr.enabled=_},getCanvas:function(E){var _=this.el.renderer.xr.enabled,m=this.el.renderer,w=this.setCapture(E);return m.xr.enabled=!1,this.renderCapture(w.camera,w.size,w.projection),m.xr.enabled=_,this.canvas},renderCapture:function(E,_,m){var w=this.el.renderer.autoClear,b=this.el,O,R,L,P=b.renderer;R=this.getRenderTarget(_.width,_.height),L=new Uint8Array(4*_.width*_.height),this.resize(_.width,_.height),P.autoClear=!0,P.clear(),P.setRenderTarget(R),P.render(b.object3D,E),P.autoClear=w,P.readRenderTargetPixels(R,0,0,_.width,_.height,L),P.setRenderTarget(null),m==="perspective"&&(L=this.flipPixelsVertically(L,_.width,_.height)),O=new ImageData(new Uint8ClampedArray(L),_.width,_.height),this.quad.visible=!1,this.ctx.putImageData(O,0,0)},flipPixelsVertically:function(E,_,m){for(var w=E.slice(0),b=0;b<_;++b)for(var O=0;O<m;++O)w[b*4+O*_*4]=E[b*4+(m-O)*_*4],w[b*4+1+O*_*4]=E[b*4+1+(m-O)*_*4],w[b*4+2+O*_*4]=E[b*4+2+(m-O)*_*4],w[b*4+3+O*_*4]=E[b*4+3+(m-O)*_*4];return w},saveCapture:function(){this.canvas.toBlob(function(E){var _="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",m=document.createElement("a"),w=URL.createObjectURL(E);m.href=w,m.setAttribute("download",_),m.innerHTML="downloading...",m.style.display="none",document.body.appendChild(m),setTimeout(function(){m.click(),document.body.removeChild(m)},1)},"image/png")}})},"./src/components/scene/stats.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./vendor/rStats.js"),v=h("./src/utils/index.js");h("./vendor/rStats.extras.js"),h("./src/lib/rStatsAframe.js");var y=window.aframeStats,E=v.bind,_="a-hidden",m=window.threeStats;S.exports.Component=g("stats",{schema:{default:!0},init:function(){var b=this.el;v.getUrlParameter("stats")!=="false"&&(this.stats=w(b),this.statsEl=document.querySelector(".rs-base"),this.hideBound=E(this.hide,this),this.showBound=E(this.show,this),b.addEventListener("enter-vr",this.hideBound),b.addEventListener("exit-vr",this.showBound))},update:function(){if(!!this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var b=this.stats;!b||(b("rAF").tick(),b("FPS").frame(),b().update())},hide:function(){this.statsEl.classList.add(_)},show:function(){this.statsEl.classList.remove(_)}});function w(b){var O=new m(b.renderer),R=new y(b),L=b.isMobile?[]:[O,R];return new C({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:L})}},"./src/components/scene/vr-mode-ui.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/constants/index.js"),v=h("./src/utils/index.js"),y=v.bind,E="a-enter-vr",_="a-enter-ar",m="a-enter-vr-button",w="a-enter-ar-button",b="a-hidden",O="a-orientation-modal";S.exports.Component=g("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},cardboardModeEnabled:{default:!1},enterVRButton:{default:""},enterARButton:{default:""}},init:function(){var J=this,j=this.el;v.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),j.addEventListener("enter-vr",this.updateEnterInterfaces),j.addEventListener("exit-vr",this.updateEnterInterfaces),j.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(U){U.data.type==="loaderReady"&&(J.insideLoader=!0,J.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=y(this.onEnterVRButtonClick,this),this.onEnterARButtonClick=y(this.onEnterARButtonClick,this),this.onModalClick=y(this.onModalClick,this),this.toggleOrientationModalIfNeeded=y(this.toggleOrientationModalIfNeeded,this),this.updateEnterInterfaces=y(this.updateEnterInterfaces,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var J=this.data,j=this.el;if(!J.enabled||this.insideLoader||v.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(J.enterVRButton?(this.enterVREl=document.querySelector(J.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=R(this.onEnterVRButtonClick),j.appendChild(this.enterVREl)),J.enterARButton?(this.enterAREl=document.querySelector(J.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=L(this.onEnterARButtonClick),j.appendChild(this.enterAREl)),this.orientationModalEl=P(this.onModalClick),j.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(J){J&&J.parentNode&&J.parentNode.removeChild(J)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var J=this.el;!this.enterVREl||(J.is("vr-mode")||(J.isMobile||v.device.isMobileDeviceRequestingDesktopSite())&&!this.data.cardboardModeEnabled&&!v.device.checkVRSupport()?this.enterVREl.classList.add(b):(v.device.checkVRSupport()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(b)))},toggleEnterARButtonIfNeeded:function(){var J=this.el;!this.enterAREl||(J.is("vr-mode")||!v.device.checkARSupport()?this.enterAREl.classList.add(b):this.enterAREl.classList.remove(b))},toggleOrientationModalIfNeeded:function(){var J=this.el,j=this.orientationModalEl;!j||!J.isMobile||(!v.device.isLandscape()&&J.is("vr-mode")?j.classList.remove(b):j.classList.add(b))}});function R(J){var j,U;return U=document.createElement("div"),U.classList.add(E),U.setAttribute(C.AFRAME_INJECTED,""),j=document.createElement("button"),j.className=m,j.setAttribute("title","Enter VR mode with a headset or fullscreen without"),j.setAttribute(C.AFRAME_INJECTED,""),v.device.isMobile()&&Y(j),U.appendChild(j),j.addEventListener("click",function(te){J(),te.stopPropagation()}),U}function L(J){var j,U;return U=document.createElement("div"),U.classList.add(_),U.setAttribute(C.AFRAME_INJECTED,""),j=document.createElement("button"),j.className=w,j.setAttribute("title","Enter AR mode with a headset or handheld device."),j.setAttribute(C.AFRAME_INJECTED,""),v.device.isMobile()&&Y(j),U.appendChild(j),j.addEventListener("click",function(te){J(),te.stopPropagation()}),U}function P(J){var j=document.createElement("div");j.className=O,j.classList.add(b),j.setAttribute(C.AFRAME_INJECTED,"");var U=document.createElement("button");return U.setAttribute(C.AFRAME_INJECTED,""),U.innerHTML="Exit VR",U.addEventListener("click",J),j.appendChild(U),j}function Y(J){J.addEventListener("touchstart",function(){J.classList.remove("resethover")}),J.addEventListener("touchend",function(){J.classList.add("resethover")})}},"./src/components/shadow.js":(S,I,h)=>{var g=h("./src/core/component.js"),C=h("./src/lib/three.js"),v=h("./src/utils/bind.js"),y=g.registerComponent;S.exports.Component=y("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=v(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var E=this.data;this.updateDescendants(E.cast,E.receive)},remove:function(){var E=this.el;E.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(E,_){var m=this.el.sceneEl;this.el.object3D.traverse(function(w){if(w instanceof C.Mesh&&(w.castShadow=E,w.receiveShadow=_,m.hasLoaded&&w.material))for(var b=Array.isArray(w.material)?w.material:[w.material],O=0;O<b.length;O++)b[O].needsUpdate=!0})}})},"./src/components/sound.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/debug.js"),v=h("./src/lib/three.js"),y=C("components:sound:warn");S.exports.Component=g("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var E=this;this.listener=null,this.audioLoader=new v.AudioLoader,this.pool=new v.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){E.playSound()}},update:function(E){var _=this.data,m,w,b=_.src!==E.src;if(b){if(!_.src)return;this.setupSound()}for(m=0;m<this.pool.children.length;m++)w=this.pool.children[m],_.positional&&(w.setDistanceModel(_.distanceModel),w.setMaxDistance(_.maxDistance),w.setRefDistance(_.refDistance),w.setRolloffFactor(_.rolloffFactor)),w.setLoop(_.loop),w.setVolume(_.volume),w.isPaused=!1;if(_.on!==E.on&&this.updateEventListener(E.on),b){var O=this;this.loaded=!1,this.audioLoader.load(_.src,function(R){for(m=0;m<O.pool.children.length;m++)w=O.pool.children[m],w.setBuffer(R);O.loaded=!0,v.Cache.remove(_.src),(O.data.autoplay||O.mustPlay)&&O.playSound(),O.el.emit("sound-loaded",O.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var E,_;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(E=0;E<this.pool.children.length;E++)_=this.pool.children[E],_.disconnect()}catch{y("Audio source not properly disconnected")}},updateEventListener:function(E){var _=this.el;E&&_.removeEventListener(E,this.playSoundBound),_.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var E=this.el,_,m=E.sceneEl,w=this,b;this.pool.children.length>0&&(this.stopSound(),E.removeObject3D("sound"));var O=this.listener=m.audioListener||new v.AudioListener;for(m.audioListener=O,m.camera&&m.camera.add(O),m.addEventListener("camera-set-active",function(R){R.detail.cameraEl.getObject3D("camera").add(O)}),this.pool=new v.Group,_=0;_<this.data.poolSize;_++)b=this.data.positional?new v.PositionalAudio(O):new v.Audio(O),this.pool.add(b);for(E.setObject3D(this.attrName,this.pool),_=0;_<this.pool.children.length;_++)b=this.pool.children[_],b.onEnded=function(){this.isPlaying=!1,w.el.emit("sound-ended",w.evtDetail,!1)}},pauseSound:function(){var E,_;for(this.isPlaying=!1,E=0;E<this.pool.children.length;E++)_=this.pool.children[E],!(!_.source||!_.source.buffer||!_.isPlaying||_.isPaused)&&(_.isPaused=!0,_.pause())},playSound:function(E){var _,m,w;if(!this.loaded){y("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0;return}for(_=!1,this.isPlaying=!0,m=0;m<this.pool.children.length;m++)if(w=this.pool.children[m],!w.isPlaying&&w.buffer&&!_){E&&E(w),w.play(),w.isPaused=!1,_=!0;continue}if(!_){y("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);return}this.mustPlay=!1},stopSound:function(){var E,_;for(this.isPlaying=!1,E=0;E<this.pool.children.length;E++){if(_=this.pool.children[E],!_.source||!_.source.buffer)return;_.stop()}}})},"./src/components/text.js":(S,I,h)=>{var g=h("./node_modules/three-bmfont-text/index.js"),C=h("./node_modules/load-bmfont/browser.js"),v=h("./src/core/component.js").registerComponent,y=h("./src/core/shader.js"),E=h("./src/lib/three.js"),_=h("./src/utils/index.js"),m=_.debug("components:text:error"),w=y.shaders,b=_.debug("components:text:warn"),O=1,R=16,L="https://cdn.aframe.io/fonts/",P={aileronsemibold:L+"Aileron-Semibold.fnt",dejavu:L+"DejaVu-sdf.fnt",exo2bold:L+"Exo2Bold.fnt",exo2semibold:L+"Exo2SemiBold.fnt",kelsonsans:L+"KelsonSans.fnt",monoid:L+"Monoid.fnt",mozillavr:L+"mozillavr.fnt",roboto:L+"Roboto-msdf.json",sourcecodepro:L+"SourceCodePro.fnt"},Y=["roboto"],J="roboto";S.exports.FONTS=P;var j=new z,U={},te={},ue=/^\w+:/;S.exports.Component=v("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:J},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:w},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=g(),this.createOrUpdateMaterial()},update:function(X){var fe=this.data,Ae=this.currentFont;if(te[fe.font]?this.texture=te[fe.font]:(this.texture=te[fe.font]=new E.Texture,this.texture.anisotropy=R),this.createOrUpdateMaterial(),X.font!==fe.font){this.updateFont();return}Ae&&(this.updateGeometry(this.geometry,Ae),this.updateLayout())},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var X=this.data,fe,Ae=this.material,Se,Be=this.shaderData,Ge;if(Ge=X.shader,Y.indexOf(X.font)!==-1||X.font.indexOf("-msdf.")>=0?Ge="msdf":X.font in P&&Y.indexOf(X.font)===-1&&(Ge="sdf"),fe=(this.shaderObject&&this.shaderObject.name)!==Ge,Be.alphaTest=X.alphaTest,Be.color=X.color,Be.map=this.texture,Be.opacity=X.opacity,Be.side=xe(X.side),Be.transparent=X.transparent,Be.negate=X.negate,!fe){this.shaderObject.update(Be),Ae.transparent=Be.transparent,Ae.side=Be.side;return}Se=q(this.el,Ge,Be),this.material=Se.material,this.shaderObject=Se.shader,this.material.side=Be.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var X=this.data,fe=this.el,Ae,Se=this.geometry,Be=this;X.font||b("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),Ae=this.lookupFont(X.font||J)||X.font,j.get(Ae,function(){return Ee(Ae,X.yOffset)}).then(function(ht){var xt;if(ht.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");U[Ae]||(ht.widthFactor=U[ht]=F(ht)),Be.currentFont=ht,xt=Be.getFontImageSrc(),j.get(xt,function(){return V(xt)}).then(function(at){var Gt=Be.texture;!Gt||(Gt.image=at,Gt.needsUpdate=!0,te[X.font]=Gt,Be.texture=Gt,Be.initMesh(),Be.currentFont=ht,Be.updateGeometry(Se,ht),Be.updateLayout(),Be.mesh.visible=!0,fe.emit("textfontset",{font:X.font,fontObj:ht}))}).catch(function(at){m(at.message),m(at.stack)})}).catch(function(Ge){m(Ge.message),m(Ge.stack)})},initMesh:function(){this.mesh||(this.mesh=new E.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var X=this.lookupFont(this.data.font||J)||this.data.font,fe=this.currentFont.pages[0];return fe.match(ue)&&fe.indexOf("http")!==0?X.replace(/(\.fnt)|(\.json)/,".png"):E.LoaderUtils.extractUrlBase(X)+fe},updateLayout:function(){var X,fe,Ae=this.el,Se=this.data,Be=this.geometry,Ge,ht,xt,at=this.mesh,Gt,wt,Yt,Mn,je;if(!(!at||!Be.layout)){if(Ge=Ae.getAttribute("geometry"),Yt=Se.width||Ge&&Ge.width||O,Gt=Q(Se.wrapPixels,Se.wrapCount,this.currentFont.widthFactor),wt=Yt/Gt,xt=Be.layout,ht=wt*(xt.height+xt.descender),Ge&&Ge.primitive==="plane"&&(Ge.width||Ae.setAttribute("geometry","width",Yt),Ge.height||Ae.setAttribute("geometry","height",ht)),X=Se.anchor==="align"?Se.align:Se.anchor,X==="left")Mn=0;else if(X==="right")Mn=-1*xt.width;else if(X==="center")Mn=-1*xt.width/2;else throw new TypeError("Invalid text.anchor property value",X);if(fe=Se.baseline,fe==="bottom")je=0;else if(fe==="top")je=-1*xt.height+xt.ascender;else if(fe==="center")je=-1*xt.height/2;else throw new TypeError("Invalid text.baseline property value",fe);at.position.x=Mn*wt+Se.xOffset,at.position.y=je*wt,at.position.z=Se.zOffset,at.scale.set(wt,-1*wt,wt)}},lookupFont:function(X){return P[X]},updateGeometry:function(){var X={},fe={},Ae=/\\n/g,Se=/\\t/g;return function(Be,Ge){var ht=this.data;fe.font=Ge,fe.lineHeight=ht.lineHeight&&isFinite(ht.lineHeight)?ht.lineHeight:Ge.common.lineHeight,fe.text=ht.value.toString().replace(Ae,`
`).replace(Se,"	"),fe.width=Q(ht.wrapPixels,ht.wrapCount,Ge.widthFactor),Be.update(_.extend(X,ht,fe))}}()});function xe(X){switch(X){case"back":return E.FrontSide;case"double":return E.DoubleSide;default:return E.BackSide}}function Ee(X,fe){return new Promise(function(Ae,Se){C(X,function(Be,Ge){if(Be){m("Error loading font",X),Se(Be);return}X.indexOf("/Roboto-msdf.json")>=0&&(fe=30),fe&&Ge.chars.map(function(xt){xt.yoffset+=fe}),Ae(Ge)})})}function V(X){return new Promise(function(fe,Ae){new E.ImageLoader().load(X,function(Se){fe(Se)},void 0,function(){m("Error loading font image",X),Ae(null)})})}function q(X,fe,Ae){var Se,Be;return Be=new w[fe].Shader,Be.el=X,Be.init(Ae),Be.update(Ae),Se=Be.material,Se.transparent=Ae.transparent,{material:Se,shader:Be}}function Q(X,fe,Ae){return X||(.5+fe)*Ae}function F(X){var fe=0,Ae=0,Se=0;return X.chars.map(function(Be){fe+=Be.xadvance,Be.id>=48&&Be.id<=57&&(Se++,Ae+=Be.xadvance)}),Se?Ae/Se:fe/X.chars.length}function z(){var X=this.cache={};this.get=function(fe,Ae){return fe in X||(X[fe]=Ae()),X[fe]}}},"./src/components/tracked-controls-webvr.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/tracked-controls.js"),v=h("./src/constants/index.js").DEFAULT_CAMERA_HEIGHT,y=h("./src/lib/three.js"),E=h("./src/constants/index.js").DEFAULT_HANDEDNESS,_={x:.175,y:-.3,z:-.03},m={x:0,y:0,z:-.175},w={touches:[]},b={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};S.exports.Component=g("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new y.Vector3,this.controllerQuaternion=new y.Quaternion,this.controllerEuler=new y.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(O,R){var L=this.el.getObject3D("mesh");L&&L.update&&L.update(R/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return v},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var O=this.data,R=C.findMatchingControllerWebVR(this.system.controllers,O.id,O.idPrefix,O.hand,O.controller);this.controller=R,this.el.components["tracked-controls"].controller=R,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(O){var R=this.controller,L=this.controllerEuler,P=this.controllerQuaternion,Y=this.deltaControllerPosition,J,j,U,te,ue;j=this.getHeadElement(),U=j.object3D,ue=this.defaultUserHeight(),te=R.pose,J=(R?R.hand:void 0)||E,O.copy(U.position),Y.set(_.x*(J==="left"?-1:J==="right"?1:0),_.y,_.z),Y.multiplyScalar(ue),Y.applyAxisAngle(U.up,U.rotation.y),O.add(Y),Y.set(m.x,m.y,m.z),Y.multiplyScalar(ue),te.orientation?P.fromArray(te.orientation):P.copy(U.quaternion),L.setFromQuaternion(P),L.set(L.x,L.y,0),Y.applyEuler(L),O.add(Y)},updatePose:function(){var O=this.controller,R=this.data,L=this.el.object3D,P,Y=this.system.vrDisplay,J;!O||(P=O.pose,P.position?L.position.fromArray(P.position):R.armModel&&this.applyArmModel(L.position),P.orientation&&L.quaternion.fromArray(P.orientation),Y&&P.position&&(J=this.el.sceneEl.renderer.xr.getStandingMatrix(),L.matrix.compose(L.position,L.quaternion,L.scale),L.matrix.multiplyMatrices(J,L.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),L.rotateX(this.data.orientationOffset.x*y.MathUtils.DEG2RAD),L.rotateY(this.data.orientationOffset.y*y.MathUtils.DEG2RAD),L.rotateZ(this.data.orientationOffset.z*y.MathUtils.DEG2RAD))},updateButtons:function(){var O,R=this.controller,L;if(!!R){for(L=0;L<R.buttons.length;++L)this.buttonStates[L]||(this.buttonStates[L]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[L]||(this.buttonEventDetails[L]={id:L,state:this.buttonStates[L]}),O=R.buttons[L],this.handleButton(L,O);this.handleAxes()}},handleButton:function(O,R){var L;return L=this.handlePress(O,R)|this.handleTouch(O,R)|this.handleValue(O,R),L?(this.el.emit(b.BUTTONCHANGED,this.buttonEventDetails[O],!1),!0):!1},handleAxes:function(){var O=!1,R=this.controller.axes,L,P=this.axis,Y=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),L=0;L<R.length;++L)Y.push(P[L]!==R[L]),Y[L]&&(O=!0);if(!O)return!1;for(this.axis.splice(0,this.axis.length),L=0;L<R.length;L++)this.axis.push(R[L]);return this.el.emit(b.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(O,R){var L,P=this.buttonStates[O];return R.pressed===P.pressed?!1:(L=R.pressed?b.BUTTONDOWN:b.BUTTONUP,this.el.emit(L,this.buttonEventDetails[O],!1),P.pressed=R.pressed,!0)},handleTouch:function(O,R){var L,P=this.buttonStates[O];return R.touched===P.touched?!1:(L=R.touched?b.TOUCHSTART:b.TOUCHEND,this.el.emit(L,this.buttonEventDetails[O],!1,w),P.touched=R.touched,!0)},handleValue:function(O,R){var L=this.buttonStates[O];return R.value===L.value?!1:(L.value=R.value,!0)}})},"./src/components/tracked-controls-webxr.js":(S,I,h)=>{var g=h("./src/utils/tracked-controls.js"),C=h("./src/core/component.js").registerComponent,v={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};S.exports.Component=C("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"gripSpace"}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var y=this.el.sceneEl;this.updateController(),y.addEventListener("controllersupdated",this.updateController)},pause:function(){var y=this.el.sceneEl;y.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(y){return!(!this.controller||this.controller.gamepad||y.inputSource.handedness!=="none"&&y.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=g.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var y=this.el.sceneEl,E=this.controller,_=y.frame;!E||!y.frame||!this.system.referenceSpace||E.hand||(this.pose=_.getPose(E[this.data.space],this.system.referenceSpace),this.updatePose(),this.updateButtons())},updatePose:function(){var y=this.el.object3D,E=this.pose;!E||(y.matrix.elements=E.transform.matrix,y.matrix.decompose(y.position,y.rotation,y.scale))},updateButtons:function(){var y,E,_=this.controller,m;if(!(!_||!_.gamepad)){for(m=_.gamepad,E=0;E<m.buttons.length;++E)this.buttonStates[E]||(this.buttonStates[E]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[E]||(this.buttonEventDetails[E]={id:E,state:this.buttonStates[E]}),y=m.buttons[E],this.handleButton(E,y);this.handleAxes()}},handleButton:function(y,E){var _;return _=this.handlePress(y,E)|this.handleTouch(y,E)|this.handleValue(y,E),_?(this.el.emit(v.BUTTONCHANGED,this.buttonEventDetails[y],!1),!0):!1},handleAxes:function(){var y=!1,E=this.controller.gamepad.axes,_,m=this.axis,w=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),_=0;_<E.length;++_)w.push(m[_]!==E[_]),w[_]&&(y=!0);if(!y)return!1;for(this.axis.splice(0,this.axis.length),_=0;_<E.length;_++)this.axis.push(E[_]);return this.el.emit(v.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(y,E){var _,m=this.buttonStates[y];return E.pressed===m.pressed?!1:(_=E.pressed?v.BUTTONDOWN:v.BUTTONUP,this.el.emit(_,this.buttonEventDetails[y],!1),m.pressed=E.pressed,!0)},handleTouch:function(y,E){var _,m=this.buttonStates[y];return E.touched===m.touched?!1:(_=E.touched?v.TOUCHSTART:v.TOUCHEND,this.el.emit(_,this.buttonEventDetails[y],!1),m.touched=E.touched,!0)},handleValue:function(y,E){var _=this.buttonStates[y];return E.value===_.value?!1:(_.value=E.value,!0)}})},"./src/components/tracked-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent;S.exports.Component=g("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"targetRaySpace"}},update:function(){var C=this.data,v=this.el;v.sceneEl.hasWebXR?v.setAttribute("tracked-controls-webxr",{id:C.id,hand:C.hand,index:C.controller,iterateControllerProfiles:C.iterateControllerProfiles,handTrackingEnabled:C.handTrackingEnabled,space:C.space}):v.setAttribute("tracked-controls-webvr",C)}})},"./src/components/valve-index-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/lib/three.js"),y=h("./src/utils/tracked-controls.js"),E=y.checkControllerPresentAndSetup,_=y.emitIfAxesChanged,m=y.onButtonEvent,w="https://cdn.aframe.io/controllers/valve/index/valve-index-",b={left:w+"left.glb",right:w+"right.glb"},O="valve",R=h("./src/utils/index.js").device.isWebXRAvailable,L={left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}},P={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},Y={left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},J={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},j=R?J:Y,U=R?P:L;S.exports.Component=g("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var te=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(ue){m(ue.detail.id,"down",te)},this.onButtonUp=function(ue){m(ue.detail.id,"up",te)},this.onButtonTouchEnd=function(ue){m(ue.detail.id,"touchend",te)},this.onButtonTouchStart=function(ue){m(ue.detail.id,"touchstart",te)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},addEventListeners:function(){var te=this.el;te.addEventListener("buttonchanged",this.onButtonChanged),te.addEventListener("buttondown",this.onButtonDown),te.addEventListener("buttonup",this.onButtonUp),te.addEventListener("touchend",this.onButtonTouchEnd),te.addEventListener("touchstart",this.onButtonTouchStart),te.addEventListener("model-loaded",this.onModelLoaded),te.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var te=this.el;te.removeEventListener("buttonchanged",this.onButtonChanged),te.removeEventListener("buttondown",this.onButtonDown),te.removeEventListener("buttonup",this.onButtonUp),te.removeEventListener("touchend",this.onButtonTouchEnd),te.removeEventListener("touchstart",this.onButtonTouchStart),te.removeEventListener("model-loaded",this.onModelLoaded),te.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var te=this.data,ue=te.hand==="right"?0:te.hand==="left"?1:2;E(this,O,{index:ue,iterateControllerProfiles:!0,hand:te.hand})},injectTrackedControls:function(){var te=this.el,ue=this.data;te.setAttribute("tracked-controls",{idPrefix:O,controller:ue.hand==="right"?1:ue.hand==="left"?0:2,hand:ue.hand,orientationOffset:ue.orientationOffset}),this.loadModel()},loadModel:function(){var te=this.data;!te.model||this.el.setAttribute("gltf-model",""+b[te.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(te){var ue=this.mapping.buttons[te.detail.id],xe=this.buttonMeshes,Ee;!ue||(ue==="trigger"&&(Ee=te.detail.state.value,xe&&xe.trigger&&(xe.trigger.rotation.x=this.triggerOriginalRotationX-Ee*(Math.PI/40))),this.el.emit(ue+"changed",te.detail.state))},onModelLoaded:function(te){var ue,xe=te.detail.model,Ee=this;!this.data.model||(ue=this.buttonMeshes={},ue.grip={left:xe.getObjectByName("leftgrip"),right:xe.getObjectByName("rightgrip")},ue.menu=xe.getObjectByName("menubutton"),ue.system=xe.getObjectByName("systembutton"),ue.trackpad=xe.getObjectByName("touchpad"),ue.trigger=xe.getObjectByName("trigger"),this.triggerOriginalRotationX=ue.trigger.rotation.x,Object.keys(ue).forEach(function(V){Ee.setButtonColor(V,Ee.data.buttonColor)}),xe.position.copy(U[this.data.hand]),xe.rotation.copy(j[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controlls",model:this.data.model,rayOrigin:new v.Vector3(0,0,0)}))},onAxisMoved:function(te){_(this,this.mapping.axes,te)},updateModel:function(te,ue){var xe,Ee;!this.data.model||(Ee=ue.indexOf("touch")!==-1,!Ee&&(xe=ue==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(te,xe)))},setButtonColor:function(te,ue){}})},"./src/components/visible.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent;S.exports.Component=g("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},"./src/components/vive-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,_=v.onButtonEvent,m="https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",w="https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl",b=h("./src/utils/index.js").device.isWebXRAvailable,O="htc-vive",R="OpenVR ",L=b?O:R,P={axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},Y={axes:{thumbstick:[0,1]},buttons:["trigger","grip","trackpad","none","menu"]},J=b?Y:P;S.exports.Component=g("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:J,init:function(){var j=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(U){_(U.detail.id,"down",j)},this.onButtonUp=function(U){_(U.detail.id,"up",j)},this.onButtonTouchEnd=function(U){_(U.detail.id,"touchend",j)},this.onButtonTouchStart=function(U){_(U.detail.id,"touchstart",j)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var j=this.data;this.controllerIndex=j.hand==="right"?0:j.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},addEventListeners:function(){var j=this.el;j.addEventListener("buttonchanged",this.onButtonChanged),j.addEventListener("buttondown",this.onButtonDown),j.addEventListener("buttonup",this.onButtonUp),j.addEventListener("touchend",this.onButtonTouchEnd),j.addEventListener("touchstart",this.onButtonTouchStart),j.addEventListener("model-loaded",this.onModelLoaded),j.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var j=this.el;j.removeEventListener("buttonchanged",this.onButtonChanged),j.removeEventListener("buttondown",this.onButtonDown),j.removeEventListener("buttonup",this.onButtonUp),j.removeEventListener("touchend",this.onButtonTouchEnd),j.removeEventListener("touchstart",this.onButtonTouchStart),j.removeEventListener("model-loaded",this.onModelLoaded),j.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var j=this.data;y(this,L,{index:this.controllerIndex,hand:j.hand})},injectTrackedControls:function(){var j=this.el,U=this.data;j.setAttribute("tracked-controls",{idPrefix:L,hand:U.hand,controller:this.controllerIndex,orientationOffset:U.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:m,mtl:w})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(j){var U=this.mapping.buttons[j.detail.id],te=this.buttonMeshes,ue;!U||(U==="trigger"&&(ue=j.detail.state.value,te&&te.trigger&&(te.trigger.rotation.x=-ue*(Math.PI/12))),this.el.emit(U+"changed",j.detail.state))},onModelLoaded:function(j){var U,te=j.detail.model,ue=this;!this.data.model||(U=this.buttonMeshes={},U.grip={left:te.getObjectByName("leftgrip"),right:te.getObjectByName("rightgrip")},U.menu=te.getObjectByName("menubutton"),U.system=te.getObjectByName("systembutton"),U.trackpad=te.getObjectByName("touchpad"),U.trigger=te.getObjectByName("trigger"),Object.keys(U).forEach(function(xe){ue.setButtonColor(xe,ue.data.buttonColor)}),te.position.set(0,-.015,.04))},onAxisMoved:function(j){E(this,this.mapping.axes,j)},updateModel:function(j,U){var te,ue;!this.data.model||(ue=U.indexOf("touch")!==-1,!ue&&(te=U==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(j,te)))},setButtonColor:function(j,U){var te=this.buttonMeshes,ue=this.rendererSystem;if(!!te){if(j==="grip"){te.grip.left.material.color.set(U),te.grip.right.material.color.set(U),ue.applyColorCorrection(te.grip.left.material.color),ue.applyColorCorrection(te.grip.right.material.color);return}te[j].material.color.set(U),ue.applyColorCorrection(te[j].material.color)}}})},"./src/components/vive-focus-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,_=v.onButtonEvent,m="HTC Vive Focus",w="https://cdn.aframe.io/controllers/vive/focus-controller/focus-controller.gltf";S.exports.Component=g("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var b=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(O){_(O.detail.id,"down",b)},this.onButtonUp=function(O){_(O.detail.id,"up",b)},this.onButtonTouchStart=function(O){_(O.detail.id,"touchstart",b)},this.onButtonTouchEnd=function(O){_(O.detail.id,"touchend",b)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var b=this.el;b.addEventListener("buttonchanged",this.onButtonChanged),b.addEventListener("buttondown",this.onButtonDown),b.addEventListener("buttonup",this.onButtonUp),b.addEventListener("touchstart",this.onButtonTouchStart),b.addEventListener("touchend",this.onButtonTouchEnd),b.addEventListener("model-loaded",this.onModelLoaded),b.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var b=this.el;b.removeEventListener("buttonchanged",this.onButtonChanged),b.removeEventListener("buttondown",this.onButtonDown),b.removeEventListener("buttonup",this.onButtonUp),b.removeEventListener("touchstart",this.onButtonTouchStart),b.removeEventListener("touchend",this.onButtonTouchEnd),b.removeEventListener("model-loaded",this.onModelLoaded),b.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){y(this,m,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var b=this.el,O=this.data;b.setAttribute("tracked-controls",{armModel:O.armModel,idPrefix:m,orientationOffset:O.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",w)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(b){var O=b.detail.model,R;!this.data.model||(R=this.buttonMeshes={},R.trigger=O.getObjectByName("BumperKey"),R.triggerPressed=O.getObjectByName("BumperKey_Press"),R.triggerPressed&&(R.triggerPressed.visible=!1),R.trackpad=O.getObjectByName("TouchPad"),R.trackpadPressed=O.getObjectByName("TouchPad_Press"),R.trackpadPressed&&(R.trackpadPressed.visible=!1))},onButtonChanged:function(b){var O=this.mapping.buttons[b.detail.id];!O||this.el.emit(O+"changed",b.detail.state)},onAxisMoved:function(b){E(this,this.mapping.axes,b)},updateModel:function(b,O){!this.data.model||this.updateButtonModel(b,O)},updateButtonModel:function(b,O){var R=this.buttonMeshes,L=b+"Pressed";if(!(!R||!R[b]||!R[L])){var P;switch(O){case"down":P=this.data.buttonHighlightColor;break;case"touchstart":P=this.data.buttonTouchedColor;break}P&&R[L].material.color.set(P),R[L].visible=!!P,R[b].visible=!P}}})},"./src/components/wasd-controls.js":(S,I,h)=>{var g=h("./src/constants/index.js").keyboardevent.KEYCODE_TO_CODE,C=h("./src/core/component.js").registerComponent,v=h("./src/lib/three.js"),y=h("./src/utils/index.js"),E=y.bind,_=y.shouldCaptureKeyEvent,m=1e-5,w=.2,b=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];S.exports.Component=C("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.easing=1.1,this.velocity=new v.Vector3,this.onBlur=E(this.onBlur,this),this.onContextMenu=E(this.onContextMenu,this),this.onFocus=E(this.onFocus,this),this.onKeyDown=E(this.onKeyDown,this),this.onKeyUp=E(this.onKeyUp,this),this.onVisibilityChange=E(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(R,L){var P=this.data,Y=this.el,J=this.velocity;!J[P.adAxis]&&!J[P.wsAxis]&&O(this.keys)||(L=L/1e3,this.updateVelocity(L),!(!J[P.adAxis]&&!J[P.wsAxis])&&Y.object3D.position.add(this.getMovementVector(L)))},update:function(R){R.adAxis!==this.data.adAxis&&(this.velocity[R.adAxis]=0),R.wsAxis!==this.data.wsAxis&&(this.velocity[R.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(R){var L,P,Y,J=this.data,j=this.keys,U=this.velocity,te,ue;if(P=J.adAxis,te=J.wsAxis,R>w){U[P]=0,U[te]=0;return}var xe=Math.pow(1/this.easing,R*60);U[P]!==0&&(U[P]=U[P]*xe),U[te]!==0&&(U[te]=U[te]*xe),Math.abs(U[P])<m&&(U[P]=0),Math.abs(U[te])<m&&(U[te]=0),J.enabled&&(L=J.acceleration,J.adEnabled&&(Y=J.adInverted?-1:1,(j.KeyA||j.ArrowLeft)&&(U[P]-=Y*L*R),(j.KeyD||j.ArrowRight)&&(U[P]+=Y*L*R)),J.wsEnabled&&(ue=J.wsInverted?-1:1,(j.KeyW||j.ArrowUp)&&(U[te]-=ue*L*R),(j.KeyS||j.ArrowDown)&&(U[te]+=ue*L*R)))},getMovementVector:function(){var R=new v.Vector3(0,0,0),L=new v.Euler(0,0,0,"YXZ");return function(P){var Y=this.el.getAttribute("rotation"),J=this.velocity,j;return R.copy(J),R.multiplyScalar(P),Y&&(j=this.data.fly?Y.x:0,L.set(v.MathUtils.degToRad(j),v.MathUtils.degToRad(Y.y),0),R.applyEuler(L)),R}}(),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var R=Object.keys(this.keys),L=0;L<R.length;L++)delete this.keys[R[L]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(R){var L;!_(R)||(L=R.code||g[R.keyCode],b.indexOf(L)!==-1&&(this.keys[L]=!0))},onKeyUp:function(R){var L;L=R.code||g[R.keyCode],delete this.keys[L]}});function O(R){var L;for(L in R)return!1;return!0}},"./src/components/windows-motion-controls.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/utils/bind.js"),v=h("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,_=v.onButtonEvent,m=h("./src/utils/index.js"),w=m.debug("components:windows-motion-controls:debug"),b=m.debug("components:windows-motion-controls:warn"),O=h("./src/constants/index.js").DEFAULT_HANDEDNESS,R="https://cdn.aframe.io/controllers/microsoft/",L={left:"left.glb",right:"right.glb",default:"universal.glb"},P=h("./src/utils/index.js").device.isWebXRAvailable,Y="windows-mixed-reality",J="Spatial Controller (Spatial Interaction Source) ",j=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,U=P?Y:J,te={axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},ue={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},xe=P?ue:te;S.exports.Component=g("windows-motion-controls",{schema:{hand:{default:O},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:xe,bindMethods:function(){this.onModelError=C(this.onModelError,this),this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var Ee=this,V=this.el;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(q){_(q.detail.id,"down",Ee)},this.onButtonUp=function(q){_(q.detail.id,"up",Ee)},this.onButtonTouchStart=function(q){_(q.detail.id,"touchstart",Ee)},this.onButtonTouchEnd=function(q){_(q.detail.id,"touchend",Ee)},this.onControllerConnected=function(){Ee.setModelVisibility(!0)},this.onControllerDisconnected=function(){Ee.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},V.addEventListener("controllerconnected",this.onControllerConnected),V.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var Ee=this.el;Ee.addEventListener("buttonchanged",this.onButtonChanged),Ee.addEventListener("buttondown",this.onButtonDown),Ee.addEventListener("buttonup",this.onButtonUp),Ee.addEventListener("touchstart",this.onButtonTouchStart),Ee.addEventListener("touchend",this.onButtonTouchEnd),Ee.addEventListener("axismove",this.onAxisMoved),Ee.addEventListener("model-error",this.onModelError),Ee.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var Ee=this.el;Ee.removeEventListener("buttonchanged",this.onButtonChanged),Ee.removeEventListener("buttondown",this.onButtonDown),Ee.removeEventListener("buttonup",this.onButtonUp),Ee.removeEventListener("touchstart",this.onButtonTouchStart),Ee.removeEventListener("touchend",this.onButtonTouchEnd),Ee.removeEventListener("axismove",this.onAxisMoved),Ee.removeEventListener("model-error",this.onModelError),Ee.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,U,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh){this.modelReady();return}var Ee=this.createControllerModelUrl();this.loadModel(Ee)},createControllerModelUrl:function(Ee){var V=this.el.components["tracked-controls"],q=V?V.controller:null,Q="default",F=this.data.hand,z;if(q&&!window.hasNativeWebXRImplementation&&(F=q.hand,!Ee)){var X=q.id.match(j);Q=X&&X[0]||Q}return z=L[F]||L.default,R+Q+"/"+z},injectTrackedControls:function(){var Ee=this.data;this.el.setAttribute("tracked-controls",{idPrefix:U,controller:Ee.pair,hand:Ee.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(Ee){var V=this.createControllerModelUrl(!0);Ee.detail.src!==V?(b("Failed to load controller model for device, attempting to load default."),this.loadModel(V)):b("Failed to load default controller model.")},loadModel:function(Ee){this.el.setAttribute("gltf-model","url("+Ee+")")},onModelLoaded:function(Ee){var V=this.controllerModel=Ee.detail.model,q=this.loadedMeshInfo,Q,F,z,X;if(w("Processing model"),q.buttonMeshes={},q.axisMeshes={},V){for(Q=0;Q<this.mapping.buttons.length;Q++){if(F=this.mapping.buttonMeshNames[this.mapping.buttons[Q]],!F){w("Skipping unknown button at index: "+Q+" with mapped name: "+this.mapping.buttons[Q]);continue}if(z=V.getObjectByName(F),!z){b("Missing button mesh with name: "+F);continue}X={index:Q,value:fe(z,"VALUE"),pressed:fe(z,"PRESSED"),unpressed:fe(z,"UNPRESSED")},X.value&&X.pressed&&X.unpressed?q.buttonMeshes[this.mapping.buttons[Q]]=X:b("Missing button submesh under mesh with name: "+F+"(VALUE: "+!!X.value+", PRESSED: "+!!X.pressed+", UNPRESSED:"+!!X.unpressed+")")}for(Q=0;Q<this.mapping.axisMeshNames.length;Q++){if(F=this.mapping.axisMeshNames[Q],!F){w("Skipping unknown axis at index: "+Q);continue}if(z=V.getObjectByName(F),!z){b("Missing axis mesh with name: "+F);continue}X={index:Q,value:fe(z,"VALUE"),min:fe(z,"MIN"),max:fe(z,"MAX")},X.value&&X.min&&X.max?q.axisMeshes[Q]=X:b("Missing axis submesh under mesh with name: "+F+"(VALUE: "+!!X.value+", MIN: "+!!X.min+", MAX:"+!!X.max+")")}this.calculateRayOriginFromMesh(V),this.setModelVisibility()}w("Model load complete.");function fe(Ae,Se){for(var Be=0,Ge=Ae.children.length;Be<Ge;Be++){var ht=Ae.children[Be];if(ht&&ht.name===Se)return ht}}},calculateRayOriginFromMesh:function(){var Ee=new THREE.Quaternion;return function(V){var q;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,q=V.getObjectByName(this.mapping.pointingPoseMeshName),q){var Q=V.parent;Q&&(V.parent=null,V.updateMatrixWorld(!0),V.parent=Q),q.getWorldPosition(this.rayOrigin.origin),q.getWorldQuaternion(Ee),this.rayOrigin.direction.applyQuaternion(Ee),Q&&V.updateMatrixWorld(!0)}else w("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var Ee=new THREE.Quaternion;return function(V,q){var Q=this.loadedMeshInfo.axisMeshes[V];if(!!Q){var F=Q.min,z=Q.max,X=Q.value,fe=q*.5+.5;X.setRotationFromQuaternion(Ee.copy(F.quaternion).slerp(z.quaternion,fe)),X.position.lerpVectors(F.position,z.position,fe)}}}(),lerpButtonTransform:function(){var Ee=new THREE.Quaternion;return function(V,q){var Q=this.loadedMeshInfo.buttonMeshes[V];if(!!Q){var F=Q.unpressed,z=Q.pressed,X=Q.value;X.setRotationFromQuaternion(Ee.copy(F.quaternion).slerp(z.quaternion,q)),X.position.lerpVectors(F.position,z.position,q)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(Ee){var V=this.mapping.buttons[Ee.detail.id];V&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(V,Ee.detail.state.value),this.el.emit(V+"changed",Ee.detail.state))},onAxisMoved:function(Ee){var V=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var q=0;q<V;q++)this.lerpAxisTransform(q,Ee.detail.axis[q]||0);E(this,this.mapping.axes,Ee)},setModelVisibility:function(Ee){var V=this.el.getObject3D("mesh");Ee=Ee!==void 0?Ee:this.modelVisible,this.modelVisible=Ee,V&&(V.visible=Ee)}})},"./src/constants/index.js":(S,I,h)=>{S.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:h("./src/constants/keyboardevent.js")}},"./src/constants/keyboardevent.js":S=>{S.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},"./src/core/a-assets.js":(S,I,h)=>{var g=h("./src/core/a-node.js").ANode,C=h("./src/utils/bind.js"),v=h("./src/utils/debug.js"),y=h("./src/lib/three.js"),E=new y.FileLoader,_=v("core:a-assets:warn");class m extends g{constructor(){super(),this.isAssets=!0,this.fileLoader=E,this.timeout=null}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var j=this,U,te=[],ue,xe,Ee,V,q;if(super.connectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(V=this.querySelectorAll("img"),U=0;U<V.length;U++)Ee=O(V[U]),te.push(new Promise(function(Q,F){if(y.Cache.add(V[U].getAttribute("src"),Ee),Ee.complete){Q();return}Ee.onload=Q,Ee.onerror=F}));for(xe=this.querySelectorAll("audio, video"),U=0;U<xe.length;U++)ue=O(xe[U]),!ue.src&&!ue.srcObject&&_("Audio/video asset has neither `src` nor `srcObject` attributes."),te.push(b(ue));Promise.allSettled(te).then(C(this.load,this)),q=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){j.hasLoaded||(_("Asset loading timed out in ",q,"ms"),j.emit("timeout"),j.load())},q)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(U){return U.isAssetItem&&U.hasAttribute("src")})}}customElements.define("a-assets",m);class w extends g{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var j=this,U=this.getAttribute("src");E.setResponseType(this.getAttribute("response-type")||P(U)),E.load(U,function(ue){j.data=ue,setTimeout(function(){g.prototype.load.call(j)})},function(ue){j.emit("progress",{loadedBytes:ue.loaded,totalBytes:ue.total,xhr:ue})},function(ue){j.emit("error",{xhr:ue})})}}customElements.define("a-asset-item",w);function b(J){if(!(!J.hasAttribute("autoplay")&&J.getAttribute("preload")!=="auto"))return new Promise(function(j,U){if(J.readyState===4)return j();if(J.error)return U();J.addEventListener("loadeddata",te,!1),J.addEventListener("progress",te,!1),J.addEventListener("error",U,!1);function te(){for(var ue=0,xe=0;xe<J.buffered.length;xe++)ue+=J.buffered.end(xe)-J.buffered.start(xe);ue>=J.duration&&(J.tagName==="VIDEO"&&y.Cache.add(J.getAttribute("src"),J),j())}})}function O(J){var j=R(J);return j.tagName&&j.tagName.toLowerCase()==="video"&&(j.setAttribute("playsinline",""),j.setAttribute("webkit-playsinline","")),j!==J&&(J.parentNode.appendChild(j),J.parentNode.removeChild(J)),j}function R(J){var j,U;return J.hasAttribute("crossorigin")||(U=J.getAttribute("src"),U!==null&&(U.indexOf("://")===-1||L(U)===window.location.host))?J:(_('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',U),J.crossOrigin="anonymous",j=J.cloneNode(!0),j)}function L(J){var j=J.indexOf("://")>-1?J.split("/")[2]:J.split("/")[0];return j.substring(0,j.indexOf(":"))}function P(J){var j=Y(J),U=j.lastIndexOf(".");if(U>=0){var te=j.slice(U,J.search(/\?|#|$/));if(te===".glb")return"arraybuffer"}return"text"}S.exports.inferResponseType=P;function Y(J){var j=document.createElement("a");j.href=J;var U=j.search.replace(/^\?/,""),te=J.replace(U,"").replace("?","");return te.substring(te.lastIndexOf("/")+1)}S.exports.getFileNameFromURL=Y},"./src/core/a-cubemap.js":(S,I,h)=>{var g=h("./src/utils/debug.js"),C=g("core:cubemap:warn");class v extends HTMLElement{constructor(E){return E=super(E),E}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}v.prototype.doConnectedCallback.call(this)}doConnectedCallback(){this.srcs=this.validate()}validate(){var E=this.querySelectorAll("[src]"),_,m=[];if(E.length===6){for(_=0;_<E.length;_++)m.push(E[_].getAttribute("src"));return m}C("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",v)},"./src/core/a-entity.js":(S,I,h)=>{var g=h("./src/core/a-node.js").ANode,C=h("./src/core/component.js").components,v=h("./src/lib/three.js"),y=h("./src/utils/index.js"),E=y.debug("core:a-entity:debug"),_=y.debug("core:a-entity:warn"),m="__",w=["position","rotation","scale","visible"],b={once:!0};class O extends g{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new v.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(U,te,ue){var xe=this.components[U];if(super.attributeChangedCallback(),xe&&xe.justInitialized&&ue===""){delete xe.justInitialized;return}!xe&&ue===null||this.setEntityAttribute(U,te,ue)}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}O.prototype.doConnectedCallback.call(this)}doConnectedCallback(){var U=this,te,ue;if(super.connectedCallback(),ue=this.sceneEl,this.addToParent(),!this.isScene){if(!ue){this.load();return}if(te=ue.querySelector("a-assets"),te&&!te.hasLoaded){te.addEventListener("loaded",function(){U.load()});return}this.load()}}disconnectedCallback(){var U;if(!!this.parentEl){for(U in this.components)this.removeComponent(U,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(U){return this.object3DMap[U]}setObject3D(U,te){var ue,xe=this;if(!(te instanceof v.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");ue=this.getObject3D(U),ue&&this.object3D.remove(ue),te.el=this,te.children.length&&te.traverse(function(V){V.el=xe}),this.object3D.add(te),this.object3DMap[U]=te,this.emit("object3dset",{object:te,type:U})}removeObject3D(U){var te=this.getObject3D(U);if(!te){_("Tried to remove `Object3D` of type:",U,"which was not defined.");return}this.object3D.remove(te),delete this.object3DMap[U],this.emit("object3dremove",{type:U})}getOrCreateObject3D(U,te){var ue=this.getObject3D(U);return!ue&&te&&(ue=new te,this.setObject3D(U,ue)),_("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),ue}add(U){if(!U.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(U.object3D),this.emit("child-attached",{el:U})}addToParent(){var U=this.parentEl=this.parentNode;!U||!U.add||this.attachedToParent||(U.add(this),this.attachedToParent=!0)}removeFromParent(){var U=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,U.emit("child-detached",{el:this})}load(){var U=this;this.hasLoaded||!this.parentEl||super.load.call(this,function(){!U.parentEl||(U.updateComponents(),(U.isScene||U.parentEl.isPlaying)&&U.play())})}remove(U){U?this.object3D.remove(U.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var U=this.children,te=[],ue=0;ue<U.length;ue++){var xe=U[ue];xe instanceof O&&te.push(xe)}return te}initComponent(U,te,ue){var xe,Ee,V,q,Q;if(V=y.split(U,m),q=V[0],Ee=V.length>2?V.slice(1).join("__"):V[1],!!C[q]&&(Q=R(this,U)||te!==void 0,!(!Q&&!ue)&&!(U in this.components))){if(this.initComponentDependencies(q),Ee&&!C[q].multiple)throw new Error("Trying to initialize multiple components of type `"+q+"`. There can only be one component of this type per entity.");xe=new C[q].Component(this,te,Ee),this.isPlaying&&xe.play(),this.hasAttribute(U)||(xe.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,U,"")),E("Component initialized: %s",U)}}initComponentDependencies(U){var te=this,ue=C[U],xe,Ee;if(!!ue&&(xe=C[U].dependencies,!!xe))for(Ee=0;Ee<xe.length;Ee++)te.initComponent(xe[Ee],window.HTMLElement.prototype.getAttribute.call(te,xe[Ee])||void 0,!0)}removeComponent(U,te){var ue;if(ue=this.components[U],!!ue){if(!ue.initialized){this.addEventListener("componentinitialized",function xe(Ee){Ee.detail.name===U&&(this.removeComponent(U,te),this.removeEventListener("componentinitialized",xe))});return}ue.pause(),ue.remove(),te&&(ue.destroy(),delete this.components[U]),this.emit("componentremoved",ue.evtDetail,!1)}}updateComponents(){var U,te,ue,xe,Ee=this.componentsToUpdate;if(!!this.hasLoaded){for(ue=0;ue<this.mixinEls.length;ue++)for(xe in this.mixinEls[ue].componentCache)Y(xe)&&(Ee[xe]=!0);if(this.getExtraComponents){te=this.getExtraComponents();for(xe in te)Y(xe)&&(Ee[xe]=!0)}for(ue=0;ue<this.attributes.length;++ue)xe=this.attributes[ue].name,w.indexOf(xe)===-1&&Y(xe)&&(Ee[xe]=!0);for(ue=0;ue<w.length;ue++)xe=w[ue],this.hasAttribute(xe)&&this.updateComponent(xe,this.getDOMAttribute(xe));for(xe in Ee)U=P(this.getDOMAttribute(xe),te&&te[xe]),this.updateComponent(xe,U),delete Ee[xe]}}updateComponent(U,te,ue){var xe=this.components[U];if(xe){if(te===null&&!R(this,U)){this.removeComponent(U,!0);return}xe.updateProperties(te,ue);return}this.initComponent(U,te,!1)}removeAttribute(U,te){var ue=this.components[U];if(ue&&te===void 0&&this.removeComponent(U,!0),ue&&te!==void 0){ue.resetProperty(te);return}U==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,U)}play(){var U,te,ue;if(!(this.isPlaying||!this.hasLoaded)){this.isPlaying=!0;for(ue in this.components)this.components[ue].play();for(U=this.getChildEntities(),te=0;te<U.length;te++)U[te].play();this.emit("play")}}pause(){var U,te,ue;if(!!this.isPlaying){this.isPlaying=!1;for(ue in this.components)this.components[ue].pause();for(U=this.getChildEntities(),te=0;te<U.length;te++)U[te].pause();this.emit("pause")}}setEntityAttribute(U,te,ue){if(C[U]||this.components[U]){this.updateComponent(U,ue);return}if(U==="mixin"){if(ue===this.computedMixinStr)return;this.mixinUpdate(ue,te)}}mixinUpdate(U,te){var ue=O.componentsUpdated,xe,Ee,V,q,Q=this;if(!this.hasLoaded){this.addEventListener("loaded",function(){Q.mixinUpdate(U,te)},b);return}for(te=te||this.getAttribute("mixin"),V=this.updateMixins(U,te),ue.length=0,q=0;q<this.mixinEls.length;q++)for(xe in this.mixinEls[q].componentCache)ue.indexOf(xe)===-1&&(this.components[xe]?this.components[xe].handleMixinUpdate():this.initComponent(xe,null),ue.push(xe));for(q=0;q<V.oldMixinIds.length;q++)if(Ee=document.getElementById(V.oldMixinIds[q]),!!Ee)for(xe in Ee.componentCache)ue.indexOf(xe)===-1&&this.components[xe]&&(this.getDOMAttribute(xe)?this.components[xe].handleMixinUpdate():this.removeComponent(xe,!0))}setAttribute(U,te,ue){var xe=O.singlePropUpdate,Ee,V,q,Q,F,z;if(Q=U.indexOf(m),q=Q>0?U.substring(0,Q):U,!C[q]){U==="mixin"&&this.mixinUpdate(te),super.setAttribute.call(this,U,te);return}if(!this.components[U]&&this.hasAttribute(U)&&this.updateComponent(U,window.HTMLElement.prototype.getAttribute.call(this,U)),typeof ue<"u"&&typeof te=="string"&&te.length>0&&typeof y.styleParser.parse(te)=="string"){for(z in xe)delete xe[z];Ee=xe,Ee[te]=ue,V=!1}else Ee=te,V=ue===!0;this.updateComponent(U,Ee,V),F=this.sceneEl&&this.sceneEl.getAttribute("debug"),F&&this.components[U].flushToDOM()}flushToDOM(U){var te=this.components,ue,xe=this.children,Ee,V;for(V in te)te[V].flushToDOM();if(!!U)for(Ee=0;Ee<xe.length;++Ee)ue=xe[Ee],ue.flushToDOM&&ue.flushToDOM(U)}getAttribute(U){var te;return U==="position"?this.object3D.position:U==="rotation"?J(this):U==="scale"?this.object3D.scale:U==="visible"?this.object3D.visible:(te=this.components[U],te?te.data:window.HTMLElement.prototype.getAttribute.call(this,U))}getDOMAttribute(U){var te=this.components[U];return te?te.attrValue:window.HTMLElement.prototype.getAttribute.call(this,U)}addState(U){this.is(U)||(this.states.push(U),this.emit("stateadded",U))}removeState(U){var te=this.states.indexOf(U);te!==-1&&(this.states.splice(te,1),this.emit("stateremoved",U))}is(U){return this.states.indexOf(U)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var U;if(this.parentNode){_("Entity can only be destroyed if detached from scenegraph.");return}for(U in this.components)this.components[U].destroy()}}function R(j,U){return j.components[U]&&j.components[U].attrValue?!0:L(U,j.mixinEls)}function L(j,U){var te,ue=!1;for(te=0;te<U.length&&(ue=U[te].hasAttribute(j),!ue);++te);return ue}function P(j,U){return U?U.constructor===Object?y.extend(U,y.styleParser.parse(j||{})):j||U:j}function Y(j){return j.indexOf(m)!==-1&&(j=y.split(j,m)[0]),!!C[j]}function J(j){var U=v.MathUtils.radToDeg,te=j.object3D.rotation,ue=j.rotationObj;return ue.x=U(te.x),ue.y=U(te.y),ue.z=U(te.z),ue}O.componentsUpdated=[],O.singlePropUpdate={},customElements.define("a-entity",O),S.exports.AEntity=O},"./src/core/a-mixin.js":(S,I,h)=>{var g=h("./src/core/a-node.js").ANode,C=h("./src/core/component.js").components,v=h("./src/utils/index.js"),y="__";class E extends g{constructor(){super(),this.componentCache={},this.isMixin=!0}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){super.connectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(m,w,b){super.attributeChangedCallback(),this.cacheAttribute(m,b),this.updateEntities()}setAttribute(m,w){window.HTMLElement.prototype.setAttribute.call(this,m,w),this.cacheAttribute(m,w)}cacheAttribute(m,w){var b,O;O=v.split(m,y)[0],b=C[O],b&&(w===void 0&&(w=window.HTMLElement.prototype.getAttribute.call(this,m)),this.componentCache[m]=b.parseAttrValueForCache(w))}getAttribute(m){return this.componentCache[m]||window.HTMLElement.prototype.getAttribute.call(this,m)}cacheAttributes(){var m=this.attributes,w,b;for(b=0;b<m.length;b++)w=m[b].name,this.cacheAttribute(w)}updateEntities(){var m,w,b;if(!!this.sceneEl)for(w=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),b=0;b<w.length;b++)m=w[b],!(!m.hasLoaded||m.isMixin)&&m.mixinUpdate(this.id)}}customElements.define("a-mixin",E)},"./src/core/a-node.js":(S,I,h)=>{var g=h("./src/utils/index.js"),C=g.debug("core:a-node:warn"),v={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function y(_){return _.tagName.toLowerCase()in v||_.isNode}class E extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}E.prototype.doConnectedCallback.call(this)}doConnectedCallback(){var m;this.sceneEl=this.closestScene(),this.sceneEl||C("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(m=this.getAttribute("mixin"),m&&this.updateMixins(m))}attributeChangedCallback(m,w,b){b!==this.computedMixinStr&&m==="mixin"&&!this.isMixin&&this.updateMixins(b,w)}closestScene(){for(var m=this;m&&!m.isScene;)m=m.parentElement;return m}closest(m){for(var w=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,b=this;b&&!w.call(b,m);)b=b.parentElement;return b}disconnectedCallback(){this.hasLoaded=!1}load(m,w){var b,O,R=this;this.hasLoaded||(w=w||y,b=this.getChildren(),O=b.filter(w).map(function(L){return new Promise(function(Y,J){if(L.hasLoaded)return Y();L.addEventListener("loaded",Y),L.addEventListener("error",J)})}),Promise.allSettled(O).then(function(P){P.forEach(function(J){J.status==="rejected"&&C("Rendering scene with errors on node: ",J.reason.target)}),R.hasLoaded=!0,R.setupMutationObserver(),m&&m(),R.emit("loaded",void 0,!1)}))}setupMutationObserver(){var m=this,w={attributes:!0,attributeOldValue:!0},b=new MutationObserver(function(R){var L;for(L=0;L<R.length;L++)if(R[L].type==="attributes"){var P=R[L].attributeName,Y=window.HTMLElement.prototype.getAttribute.call(m,P),J=R[L].oldValue;m.attributeChangedCallback(P,J,Y)}});b.observe(this,w)}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(m,w){var b=E.newMixinIdArray,O=E.oldMixinIdArray,R=E.mixinIds,L,P,Y;for(b.length=0,O.length=0,P=m?g.split(m.trim(),/\s+/):b,Y=w?g.split(w.trim(),/\s+/):O,R.newMixinIds=P,R.oldMixinIds=Y,L=0;L<Y.length;L++)P.indexOf(Y[L])===-1&&this.unregisterMixin(Y[L]);for(this.computedMixinStr="",this.mixinEls.length=0,L=0;L<P.length;L++)this.registerMixin(document.getElementById(P[L]));return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),R}registerMixin(m){var w,b,O;if(!!m){if(O=m.getAttribute("mixin"),O)for(w=g.split(O.trim(),/\s+/),b=0;b<w.length;b++)this.registerMixin(document.getElementById(w[b]));this.computedMixinStr=this.computedMixinStr+" "+m.id,this.mixinEls.push(m)}}setAttribute(m,w){m==="mixin"&&this.updateMixins(w),window.HTMLElement.prototype.setAttribute.call(this,m,w)}unregisterMixin(m){var w,b=this.mixinEls,O;for(w=0;w<b.length;++w)if(O=b[w],m===O.id){b.splice(w,1);break}}emit(m,w,b,O){var R=E.evtData;b===void 0&&(b=!0),R.bubbles=!!b,R.detail=w,O&&(R=g.extend({},O,R)),this.dispatchEvent(new CustomEvent(m,R))}}E.evtData={},E.newMixinIdArray=[],E.oldMixinIdArray=[],E.mixinIds={},customElements.define("a-node",E),S.exports.ANode=E,S.exports.knownTags=v},"./src/core/component.js":(S,I,h)=>{var g=h("./src/core/schema.js"),C=h("./src/core/scene/scenes.js"),v=h("./src/core/system.js"),y=h("./src/utils/index.js"),E=S.exports.components={},_=g.parseProperties,m=g.parseProperty,w=g.process,b=g.isSingleProperty,O=g.stringifyProperties,R=g.stringifyProperty,L=y.styleParser,P=y.debug("core:component:warn"),Y=document.currentScript,J=new RegExp("[A-Z]+"),j={},U=S.exports.Component=function(X,fe,Ae){var Se=this;this.el=X,this.id=Ae,this.attrName=this.name+(Ae?"__"+Ae:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=j[this.name];var Be=this.events;this.events={},te(this,Be),this.attrValue=void 0,this.isObjectBased?(this.nextData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.nextData,this.schema),this.oldData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.oldData,this.schema),this.previousOldData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.previousOldData,this.schema),this.parsingAttrValue=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.parsingAttrValue,this.schema)):(this.nextData=void 0,this.oldData=void 0,this.previousOldData=void 0,this.parsingAttrValue=void 0),this.throttledEmitComponentChanged=y.throttleLeadingAndTrailing(function(){X.emit("componentchanged",Se.evtDetail,!1)},200),this.updateProperties(fe)};U.prototype={schema:{},init:function(){},events:{},update:function(X){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(X,fe){var Ae=this.schema;return this.isSingleProperty?m(X,Ae):_(L.parse(X),Ae,!0,this.name,fe)},stringify:function(X){var fe=this.schema;return typeof X=="string"?X:this.isSingleProperty?R(X,fe):(X=O(X,fe),L.stringify(X))},updateCachedAttrValue:function(X,fe){var Ae,Se,Be;if(X!==void 0){if(X===null){this.isObjectBased&&this.attrValue&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0;return}if(X instanceof Object&&!(X instanceof window.HTMLElement)?(Se=this.objectPool.use(),Ae=y.extend(Se,X)):Ae=this.parseAttrValueForCache(X),this.isObjectBased&&!fe&&this.attrValue)for(Be in this.attrValue)Ae[Be]===void 0&&(Ae[Be]=this.attrValue[Be]);this.isObjectBased&&!this.attrValue&&(this.attrValue=this.objectPool.use()),y.objectPool.clearObject(this.attrValue),this.attrValue=Ee(this.attrValue,Ae,this.isObjectBased),y.objectPool.clearObject(Se)}},parseAttrValueForCache:function(X){var fe;return typeof X!="string"?X:(this.isSingleProperty?(fe=this.schema.parse(X),typeof fe=="string"&&(fe=X)):(y.objectPool.clearObject(this.parsingAttrValue),fe=L.parse(X,this.parsingAttrValue)),fe)},flushToDOM:function(X){var fe=X?this.data:this.attrValue;fe!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(fe))},updateProperties:function(X,fe){var Ae=this.el;if(!Ae.hasLoaded){this.updateCachedAttrValue(X);return}X!==null&&(X=this.parseAttrValueForCache(X)),this.updateCachedAttrValue(X,fe),this.initialized?(this.updateComponent(X,fe),this.callUpdateHandler()):this.initComponent()},initComponent:function(){var X=this.el,fe;this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue),!X.initializingComponents[this.name]&&(X.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete X.initializingComponents[this.name],this.oldData=Ee(this.oldData,this.data,this.isObjectBased),fe=this.isObjectBased?this.objectPool.use():void 0,this.update(fe),this.isObjectBased&&this.objectPool.recycle(fe),X.isPlaying&&this.play(),X.emit("componentinitialized",this.evtDetail,!1))},updateComponent:function(X,fe){var Ae,Se;if(fe){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}if(this.isSingleProperty){this.isObjectBased&&m(X,this.schema),this.data=X;return}if(_(X,this.schema,!0,this.name),this.schemaChangeKeys.length){for(Ae in X)if(this.schema[Ae].schemaChange){Se=!0;break}}if(Se){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}for(Ae in X)X[Ae]!==void 0&&(this.data[Ae]=X[Ae])},callUpdateHandler:function(){var X;this.previousOldData instanceof Object&&y.objectPool.clearObject(this.previousOldData),this.isObjectBased?xe(this.previousOldData,this.oldData):this.previousOldData=this.oldData,X=!y.deepEqual(this.oldData,this.data),!(!this.isPositionRotationScale&&!X)&&(this.oldData instanceof Object&&y.objectPool.clearObject(this.oldData),this.oldData=Ee(this.oldData,this.data,this.isObjectBased),this.update(this.previousOldData),this.throttledEmitComponentChanged())},handleMixinUpdate:function(){this.data=this.buildData(this.attrValue),this.callUpdateHandler()},resetProperty:function(X){if(this.isObjectBased){if(!(X in this.attrValue))return;delete this.attrValue[X],this.data[X]=this.schema[X].default}else this.attrValue=this.schema.default,this.data=this.schema.default;this.updateProperties(this.attrValue)},extendSchema:function(X){var fe;fe=y.extend({},E[this.name].schema),y.extend(fe,X),this.schema=w(fe),this.el.emit("schemachanged",this.evtDetail)},buildData:function(X,fe,Ae){var Se,Be,Ge,ht,xt,at=this.nextData,Gt=this.schema,wt,Yt=this.el.mixinEls,Mn;if(Se=X&&X.constructor===Array?X.length:X!=null,this.isObjectBased&&y.objectPool.clearObject(at),this.isSingleProperty)this.isObjectBased?Be=xe(at,Gt.default):Be=z(Gt.default)?y.clone(Gt.default):Gt.default;else{Mn=!fe&&this.attrValue,Be=Mn instanceof Object?xe(at,Mn):at;for(ht in Gt)Ge=Gt[ht].default,Be[ht]===void 0&&(Be[ht]=z(Ge)?y.clone(Ge):Ge)}for(wt=0;wt<Yt.length;wt++)xt=Yt[wt].getAttribute(this.attrName),xt&&(Be=Ee(Be,xt,this.isObjectBased));if(Se){if(this.isSingleProperty)return F(X)?(xe(this.parsingAttrValue,X),m(this.parsingAttrValue,Gt)):m(X,Gt);Be=Ee(Be,X,this.isObjectBased)}else if(this.isSingleProperty)return m(Be,Gt);return _(Be,Gt,void 0,this.name,Ae)},eventsAttach:function(){var X;this.eventsDetach();for(X in this.events)this.el.addEventListener(X,this.events[X])},eventsDetach:function(){var X;for(X in this.events)this.el.removeEventListener(X,this.events[X])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.oldData),this.objectPool.recycle(this.parsingAttrValue),this.attrValue=this.oldData=this.parsingAttrValue=void 0}};function te(X,fe){var Ae;for(Ae in fe)X.events[Ae]=fe[Ae].bind(X)}if(window.debug)var ue=S.exports.registrationOrderWarnings={};S.exports.registerComponent=function(X,fe){var Ae,Se,Be={},Ge,ht,xt;if(document.currentScript&&document.currentScript!==Y&&C.forEach(function(Gt){Gt.hasLoaded||document.currentScript.compareDocumentPosition(Gt)!==Node.DOCUMENT_POSITION_FOLLOWING&&(P("The component `"+X+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(ue[X]=!0))}),J.test(X)===!0&&P("The component name `"+X+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+X.toLowerCase()+"`"),X.indexOf("__")!==-1)throw new Error("The component name `"+X+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(fe).forEach(function(at){Be[at]={value:fe[at],writable:!0}}),E[X])throw new Error("The component `"+X+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");if(Ae=function(at,Gt,wt){U.call(this,at,Gt,wt)},Ae.prototype=Object.create(U.prototype,Be),Ae.prototype.name=X,Ae.prototype.isPositionRotationScale=X==="position"||X==="rotation"||X==="scale",Ae.prototype.constructor=Ae,Ae.prototype.system=v&&v.systems[X],Ae.prototype.play=Q(Ae.prototype.play),Ae.prototype.pause=q(Ae.prototype.pause),Ge=y.extend(w(Ae.prototype.schema,Ae.prototype.name)),Ae.prototype.isSingleProperty=ht=b(Ae.prototype.schema),Ae.prototype.isSinglePropertyObject=xt=ht&&F(m(void 0,Ge))&&!(Ge.default instanceof window.HTMLElement),Ae.prototype.isObjectBased=!ht||xt,!ht){Ae.prototype.schemaChangeKeys=[];for(Se in Ge)Ge[Se].schemaChange&&Ae.prototype.schemaChangeKeys.push(Se)}return j[X]=y.objectPool.createPool(),E[X]={Component:Ae,dependencies:Ae.prototype.dependencies,isSingleProperty:Ae.prototype.isSingleProperty,isSinglePropertyObject:Ae.prototype.isSinglePropertyObject,isObjectBased:Ae.prototype.isObjectBased,multiple:Ae.prototype.multiple,name:X,parse:Ae.prototype.parse,parseAttrValueForCache:Ae.prototype.parseAttrValueForCache,schema:Ge,stringify:Ae.prototype.stringify,type:Ae.prototype.type},Ae};function xe(X,fe){var Ae,Se;for(Se in fe)fe[Se]!==void 0&&(Ae=fe[Se],X[Se]=z(Ae)?y.clone(Ae):Ae);return X}function Ee(X,fe,Ae){var Se;if(Ae&&fe.constructor===Object){for(Se in fe)fe[Se]!==void 0&&(fe[Se]&&fe[Se].constructor===Object?X[Se]=y.clone(fe[Se]):X[Se]=fe[Se]);return X}return fe}function V(X){return X.tick||X.tock}function q(X){return function(){var Ae=this.el.sceneEl;!this.isPlaying||(X.call(this),this.isPlaying=!1,this.eventsDetach(),V(this)&&Ae.removeBehavior(this))}}function Q(X){return function(){var Ae=this.el.sceneEl,Se=this.el.isPlaying&&!this.isPlaying;!this.initialized||!Se||(X.call(this),this.isPlaying=!0,this.eventsAttach(),V(this)&&Ae.addBehavior(this))}}function F(X){return X&&X.constructor===Object&&!(X instanceof window.HTMLElement)}function z(X){return X&&(X.constructor===Object||X.constructor===Array)&&!(X instanceof window.HTMLElement)}},"./src/core/geometry.js":(S,I,h)=>{var g=h("./src/core/schema.js"),C=g.process,v=S.exports.geometries={},y=S.exports.geometryNames=[],E=h("./src/lib/three.js"),_=S.exports.Geometry=function(){};_.prototype={schema:{},init:function(m){return this.geometry=new E.BufferGeometry,this.geometry},update:function(m){}},S.exports.registerGeometry=function(m,w){var b,O={};if(Object.keys(w).forEach(function(L){O[L]={value:w[L],writable:!0}}),v[m])throw new Error("The geometry `"+m+"` has been already registered");return b=function(){_.call(this)},b.prototype=Object.create(_.prototype,O),b.prototype.name=m,b.prototype.constructor=b,v[m]={Geometry:b,schema:C(b.prototype.schema)},y.push(m),b}},"./src/core/propertyTypes.js":(S,I,h)=>{var g=h("./src/utils/coordinates.js"),C=h("./node_modules/debug/browser.js"),v=C("core:propertyTypes:warn"),y=C("core:propertyTypes:warn"),E=S.exports.propertyTypes={},_=/[,> .[\]:]/,m=/\url\((.+)\)/;w("audio","",R),w("array",[],b,O),w("asset","",R),w("boolean",!1,Y),w("color","#FFF",L,P),w("int",0,J),w("number",0,j),w("map","",R),w("model","",R),w("selector",null,U,ue),w("selectorAll",null,te,xe),w("src","",Ee),w("string","",L,P),w("time",0,J),w("vec2",{x:0,y:0},V,g.stringify),w("vec3",{x:0,y:0,z:0},V,g.stringify),w("vec4",{x:0,y:0,z:0,w:1},V,g.stringify);function w(F,z,X,fe){if("type"in E){v("Property type "+F+" is already registered.");return}E[F]={default:z,parse:X||L,stringify:fe||P}}S.exports.registerPropertyType=w;function b(F){if(Array.isArray(F))return F;if(!F||typeof F!="string")return[];return F.split(",").map(z);function z(X){return X.trim()}}function O(F){return F.join(", ")}function R(F){var z,X;if(typeof F!="string")return F;if(X=F.match(m),X)return X[1];if(F.charAt(0)==="#"){if(z=document.getElementById(F.substring(1)),z)return z.tagName==="CANVAS"||z.tagName==="VIDEO"||z.tagName==="IMG"?z:z.getAttribute("src");y('"'+F+'" asset not found.');return}return F}function L(F){return F}function P(F){return F===null?"null":F.toString()}function Y(F){return F!=="false"&&F!==!1}function J(F){return parseInt(F,10)}function j(F){return parseFloat(F,10)}function U(F){return F?typeof F!="string"?F:F[0]==="#"&&!_.test(F)?document.getElementById(F.substring(1)):document.querySelector(F):null}function te(F){return F?typeof F!="string"?F:Array.prototype.slice.call(document.querySelectorAll(F),0):null}function ue(F){return F.getAttribute?"#"+F.getAttribute("id"):P(F)}function xe(F){return F instanceof Array?F.map(function(z){return"#"+z.getAttribute("id")}).join(", "):P(F)}function Ee(F){return y("`src` property type is deprecated. Use `asset` instead."),R(F)}function V(F){return g.parse(F,this.default)}function q(F,z){return F==="audio"&&typeof z!="string"||F==="array"&&!Array.isArray(z)||F==="asset"&&typeof z!="string"||F==="boolean"&&typeof z!="boolean"||F==="color"&&typeof z!="string"||F==="int"&&typeof z!="number"||F==="number"&&typeof z!="number"||F==="map"&&typeof z!="string"||F==="model"&&typeof z!="string"||F==="selector"&&typeof z!="string"&&z!==null||F==="selectorAll"&&typeof z!="string"&&z!==null||F==="src"&&typeof z!="string"||F==="string"&&typeof z!="string"||F==="time"&&typeof z!="number"?!1:F==="vec2"?Q(z,2):F==="vec3"?Q(z,3):F==="vec4"?Q(z,4):!0}S.exports.isValidDefaultValue=q;function Q(F,z){if(F===null)return!0;if(typeof F!="object"||Object.keys(F).length!==z)return!1;var X=F.x,fe=F.y,Ae=F.z,Se=F.w;return!(typeof X!="number"||typeof fe!="number"||z>2&&typeof Ae!="number"||z>3&&typeof Se!="number")}S.exports.isValidDefaultCoordinate=Q},"./src/core/scene/a-scene.js":(S,I,h)=>{var g=h("./src/core/scene/metaTags.js").inject,C=h("./src/core/scene/wakelock.js"),v=h("./src/core/scene/loadingScreen.js"),y=h("./src/core/scene/scenes.js"),E=h("./src/core/system.js").systems,_=h("./src/lib/three.js"),m=h("./src/utils/index.js"),w=h("./src/core/a-entity.js").AEntity,b=h("./src/core/a-node.js").ANode,O=h("./src/core/scene/postMessage.js"),R=m.bind,L=m.device.isIOS(),P=m.device.isMobile(),Y=m.device.isWebXRAvailable,J=m.debug("core:a-scene:warn");L&&h("./src/utils/ios-orientationchange-blank-bug.js");class j extends w{constructor(){var Q;super(),Q=this,Q.clock=new _.Clock,Q.isIOS=L,Q.isMobile=P,Q.hasWebXR=Y,Q.isAR=!1,Q.isScene=!0,Q.object3D=new _.Scene,Q.object3D.onAfterRender=function(F,z,X){Q.isPlaying&&Q.tock(Q.time,Q.delta,X)},Q.resize=R(Q.resize,Q),Q.render=R(Q.render,Q),Q.systems={},Q.systemNames=[],Q.time=Q.delta=0,Q.behaviors={tick:[],tock:[]},Q.hasLoaded=!1,Q.isPlaying=!1,Q.originalHTML=Q.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var Q=this,F=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.connectedCallback(),V(this),this.setupRenderer(),v.setup(this,te),this.resize(),F||this.addFullScreenStyles(),O(this),g(this),C(this),this.onVRPresentChangeBound=R(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){Q.enterVR()},this.exitVRBound=function(){Q.exitVR()},this.exitVRTrueBound=function(){Q.exitVR(!0)},this.pointerRestrictedBound=function(){Q.pointerRestricted()},this.pointerUnrestrictedBound=function(){Q.pointerUnrestricted()},Q.hasWebXR||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){Q.attachedCallbackPostCamera()}),this.initSystems(),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){Q.enterVR()})}attachedCallbackPostCamera(){var Q,F=this;window.addEventListener("load",Q),window.addEventListener("resize",function(){F.isIOS?setTimeout(F.resize,100):F.resize()}),this.play(),y.push(this)}initSystems(){var Q;this.initSystem("camera");for(Q in E)Q!=="camera"&&this.initSystem(Q)}initSystem(Q){this.systems[Q]||(this.systems[Q]=new E[Q](this),this.systemNames.push(Q))}disconnectedCallback(){var Q=y.indexOf(this);super.disconnectedCallback(),y.splice(Q,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.dispose()}addBehavior(Q){var F,z=this.behaviors,X;for(X in z)!Q[X]||(F=this.behaviors[X],F.indexOf(Q)===-1&&F.push(Q))}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return m.device.checkHeadsetConnected()}enterAR(){var Q;if(!this.hasWebXR)throw Q="Failed to enter AR mode, WebXR not supported.",new Error(Q);if(!m.device.checkARSupport())throw Q="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(Q);return this.enterVR(!0)}enterVR(Q){var F=this,z,X=F.renderer.xr,fe;if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var Ae=F.getAttribute("renderer");if(X.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var Se=this.sceneEl.systems.webxr.sessionReferenceSpaceType;X.setReferenceSpaceType(Se);var Be=Q?"immersive-ar":"immersive-vr";return fe=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(at,Gt){navigator.xr.requestSession(Be,fe).then(function(Yt){F.xrSession=Yt,X.layersEnabled=fe.requiredFeatures.indexOf("layers")!==-1,X.setSession(Yt).then(function(){X.setFoveation(Ae.foveationLevel)}),F.systems.renderer.setWebXRFrameRate(Yt),Yt.addEventListener("end",F.exitVRBound),ht(at)},function(Yt){var Mn=Be==="immersive-ar",je=Mn?"AR":"VR";throw new Error("Failed to enter "+je+" mode (`requestSession`) "+Yt)})})}else{if(z=m.device.getVRDisplay(),X.setDevice(z),z.isPresenting&&!window.hasNativeWebVRImplementation)return ht(),Promise.resolve();var Ge={highRefreshRate:Ae.highRefreshRate};return z.requestPresent([{source:this.canvas,attributes:Ge}]).then(ht,xt)}}return ht(),Promise.resolve();function ht(at){var Gt;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(Gt=new CustomEvent("vrdisplaypresentchange",{detail:{display:m.device.getVRDisplay()}}),window.dispatchEvent(Gt)),Q?F.addState("ar-mode"):F.addState("vr-mode"),F.emit("enter-vr",{target:F}),!F.hasWebXR&&F.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),F.addFullScreenStyles(),!F.isMobile&&!F.checkHeadsetConnected()&&xe(F.canvas),F.resize(),at&&at()}function xt(at){throw F.removeState("vr-mode"),at&&at.message?new Error("Failed to enter VR mode (`requestPresent`): "+at.message):new Error("Failed to enter VR mode (`requestPresent`).")}}exitVR(){var Q=this,F,z=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(z.enabled=!1,F=m.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0;else if(F.isPresenting)return F.exitPresent().then(X,fe)}else Ee();return X(),Promise.resolve();function X(){Q.removeState("vr-mode"),Q.removeState("ar-mode"),Q.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),Q.hasAttribute("embedded")&&Q.removeFullScreenStyles(),Q.resize(),Q.isIOS&&m.forceCanvasResizeSafariMobile(Q.canvas),Q.renderer.setPixelRatio(window.devicePixelRatio),Q.emit("exit-vr",{target:Q})}function fe(Ae){throw Ae&&Ae.message?new Error("Failed to exit VR mode (`exitPresent`): "+Ae.message):new Error("Failed to exit VR mode (`exitPresent`).")}}pointerRestricted(){if(this.canvas){var Q=this.getPointerLockElement();Q&&Q!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}pointerUnrestricted(){var Q=this.getPointerLockElement();Q&&Q===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}onVRPresentChange(Q){var F=Q.display||Q.detail.display;if(F&&F.isPresenting){this.enterVR();return}this.exitVR()}getAttribute(Q){var F=this.systems[Q];return F?F.data:w.prototype.getAttribute.call(this,Q)}getComputedAttribut(Q){J("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(Q)}getDOMAttribute(Q){var F=this.systems[Q];return F?F.data:w.prototype.getDOMAttribute.call(this,Q)}setAttribute(Q,F,z){var X=this.systems[Q];if(X){b.prototype.setAttribute.call(this,Q,F),X.updateProperties(F);return}w.prototype.setAttribute.call(this,Q,F,z)}removeBehavior(Q){var F,z,X=this.behaviors,fe;for(z in X)!Q[z]||(F=this.behaviors[z],fe=F.indexOf(Q),fe!==-1&&F.splice(fe,1))}resize(){var Q=this.camera,F=this.canvas,z,X,fe,Ae=this.renderer.xr.isPresenting;X=this.renderer.xr.enabled&&Ae,!(!Q||!F||this.is("vr-mode")&&(this.isMobile||X))&&(z=this.getAttribute("embedded")&&!this.is("vr-mode"),fe=te(F,z,this.maxCanvasSize,this.is("vr-mode")),Q.aspect=fe.width/fe.height,Q.updateProjectionMatrix(),this.renderer.setSize(fe.width,fe.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var Q=this,F,z,X,fe;fe={alpha:!0,antialias:!P,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:1920,width:1920},this.hasAttribute("renderer")&&(X=this.getAttribute("renderer"),z=m.styleParser.parse(X),z.precision&&(fe.precision=z.precision+"p"),z.antialias&&z.antialias!=="auto"&&(fe.antialias=z.antialias==="true"),z.logarithmicDepthBuffer&&z.logarithmicDepthBuffer!=="auto"&&(fe.logarithmicDepthBuffer=z.logarithmicDepthBuffer==="true"),z.alpha&&(fe.alpha=z.alpha==="true"),this.maxCanvasSize={width:z.maxCanvasWidth?parseInt(z.maxCanvasWidth):this.maxCanvasSize.width,height:z.maxCanvasHeight?parseInt(z.maxCanvasHeight):this.maxCanvasSize.height}),F=this.renderer=new _.WebGLRenderer(fe),F.setPixelRatio(window.devicePixelRatio),F.sortObjects=!1,this.camera&&F.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){F.xr.setPoseTarget(Q.camera.el.object3D)})}play(){var Q=this,F=this;if(this.renderStarted){w.prototype.play.call(this);return}this.addEventListener("loaded",function(){var z=this.renderer,X,fe=this.renderer.xr;w.prototype.play.call(this),!F.renderStarted&&(F.resize(),F.renderer&&(window.performance&&window.performance.mark("render-started"),v.remove(),X=m.device.getVRDisplay(),X&&X.isPresenting&&(fe.setDevice(X),fe.enabled=!0,F.enterVR()),z.setAnimationLoop(this.render),F.renderStarted=!0,F.emit("renderstart")))}),setTimeout(function(){w.prototype.load.call(Q)})}updateComponent(Q){Q in E||w.prototype.updateComponent.apply(this,arguments)}tick(Q,F){var z,X=this.systems;for(z=0;z<this.behaviors.tick.length;z++)!this.behaviors.tick[z].el.isPlaying||this.behaviors.tick[z].tick(Q,F);for(z=0;z<this.systemNames.length;z++)!X[this.systemNames[z]].tick||X[this.systemNames[z]].tick(Q,F)}tock(Q,F,z){var X,fe=this.systems;for(X=0;X<this.behaviors.tock.length;X++)!this.behaviors.tock[X].el.isPlaying||this.behaviors.tock[X].tock(Q,F,z);for(X=0;X<this.systemNames.length;X++)!fe[this.systemNames[X]].tock||fe[this.systemNames[X]].tock(Q,F,z)}render(Q,F){var z=this.renderer;this.frame=F,this.delta=this.clock.getDelta()*1e3,this.time=this.clock.elapsedTime*1e3,this.isPlaying&&this.tick(this.time,this.delta);var X=null;this.is("ar-mode")&&(X=this.object3D.background,this.object3D.background=null),z.render(this.object3D,this.camera),X&&(this.object3D.background=X)}}function U(q,Q){var F,z=window.devicePixelRatio;return!Q||Q.width===-1&&Q.height===-1||q.width*z<Q.width&&q.height*z<Q.height||(F=q.width/q.height,q.width*z>Q.width&&Q.width!==-1&&(q.width=Math.round(Q.width/z),q.height=Math.round(Q.width/F/z)),q.height*z>Q.height&&Q.height!==-1&&(q.height=Math.round(Q.height/z),q.width=Math.round(Q.height*F/z))),q}window.customElements.define("a-scene",j);function te(q,Q,F,z){if(!q.parentElement)return{height:0,width:0};if(Q){var X;return X={height:q.parentElement.offsetHeight,width:q.parentElement.offsetWidth},U(X,F)}return ue(F,z)}function ue(q,Q){var F;return F={height:document.body.offsetHeight,width:document.body.offsetWidth},Q?F:U(F,q)}function xe(q){var Q=q.requestFullscreen||q.webkitRequestFullscreen||q.mozRequestFullScreen||q.msRequestFullscreen;Q.apply(q,[{navigationUI:"hide"}])}function Ee(){var q=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;!q||(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function V(q){var Q;Q=document.createElement("canvas"),Q.classList.add("a-canvas"),Q.dataset.aframeCanvas=!0,q.appendChild(Q),document.addEventListener("fullscreenchange",F),document.addEventListener("mozfullscreenchange",F),document.addEventListener("webkitfullscreenchange",F),document.addEventListener("MSFullscreenChange",F),Q.addEventListener("touchmove",function(z){z.preventDefault()}),q.canvas=Q,q.emit("render-target-loaded",{target:Q}),setTimeout(R(q.resize,q),0);function F(){var z=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;z||q.exitVR(),document.activeElement.blur(),document.body.focus()}}S.exports.setupCanvas=V,S.exports.AScene=j},"./src/core/scene/loadingScreen.js":(S,I,h)=>{var g=h("./src/utils/index.js"),C=g.styleParser,v,y,E,_="loading-screen",m="a-loader-title";S.exports.setup=function(R,L){v=R,E=L;var P=v.hasAttribute(_)?C.parse(v.getAttribute(_)):void 0,Y=P&&P.dotsColor||"white",J=P&&P.backgroundColor||"#24CAFF",j=P===void 0||P.enabled==="true"||P.enabled===void 0,U,te,ue,xe,Ee,V,q,Q,F,z;!j||(U=new THREE.Scene,te=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),ue=new THREE.MeshBasicMaterial({color:Y}),xe=new THREE.Mesh(te,ue),Ee=xe.clone(),V=xe.clone(),q=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),Q=new THREE.Clock,F=0,z=function(){v.renderer.render(U,q),F=Q.getElapsedTime()%4,xe.visible=F>=1,Ee.visible=F>=2,V.visible=F>=3},U.background=new THREE.Color(J),U.add(q),xe.position.set(-1,0,-15),Ee.position.set(0,0,-15),V.position.set(1,0,-15),q.add(xe),q.add(Ee),q.add(V),b(),setTimeout(function(){v.hasLoaded||(w(q),y.style.display="block",window.addEventListener("resize",function(){w(q)}),v.renderer.setAnimationLoop(z))},200))},S.exports.remove=function(){window.removeEventListener("resize",w),y&&(y.style.display="none")};function w(O){var R=v.hasAttribute("embedded"),L=E(v.canvas,R,v.maxCanvasSize,v.is("vr-mode"));O.aspect=L.width/L.height,O.updateProjectionMatrix(),v.renderer.setSize(L.width,L.height,!1)}function b(){y=document.createElement("div"),y.className=m,y.innerHTML=document.title,y.style.display="none",v.appendChild(y)}},"./src/core/scene/metaTags.js":(S,I,h)=>{var g=h("./src/constants/index.js"),C=h("./src/utils/index.js").extend,v=S.exports.MOBILE_HEAD_TAGS=[E({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),E({name:"mobile-web-app-capable",content:"yes"}),E({name:"theme-color",content:"black"})],y=[E({name:"apple-mobile-web-app-capable",content:"yes"}),E({name:"apple-mobile-web-app-status-bar-style",content:"black"}),_({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function E(w){return{tagName:"meta",attributes:w,exists:function(){return document.querySelector('meta[name="'+w.name+'"]')}}}function _(w){return{tagName:"link",attributes:w,exists:function(){return document.querySelector('link[rel="'+w.rel+'"]')}}}S.exports.inject=function(b){var O=document.head,R=O.querySelector("script"),L,P=[];return v.forEach(Y),b.isIOS&&y.forEach(Y),P;function Y(J){!J||J.exists()||(L=m(J),L&&(R?R.parentNode.insertBefore(L,R):O.appendChild(L),P.push(L)))}};function m(w){if(!(!w||!w.tagName)){var b=document.createElement(w.tagName);return b.setAttribute(g.AFRAME_INJECTED,""),C(b,w.attributes)}}},"./src/core/scene/postMessage.js":(S,I,h)=>{var g=h("./src/utils/bind.js"),C=h("./src/utils/index.js").isIframed;S.exports=function(E){!C()||window.addEventListener("message",g(v,E))};function v(y){var E=this;if(!!y.data)switch(y.data.type){case"vr":switch(y.data.data){case"enter":E.enterVR();break;case"exit":E.exitVR();break}}}},"./src/core/scene/scenes.js":S=>{S.exports=[]},"./src/core/scene/wakelock.js":(S,I,h)=>{var g=h("./vendor/wakelock/wakelock.js");S.exports=function(v){if(!!v.isMobile){var y=v.wakelock=new g;v.addEventListener("enter-vr",function(){y.request()}),v.addEventListener("exit-vr",function(){y.release()})}}},"./src/core/schema.js":(S,I,h)=>{var g=h("./src/utils/index.js"),C=h("./src/core/propertyTypes.js"),v=g.debug,y=C.isValidDefaultValue,E=C.propertyTypes,_=v("core:schema:warn");function m(R){return"type"in R?typeof R.type=="string":"default"in R}S.exports.isSingleProperty=m,S.exports.process=function(R,L){var P;if(m(R))return w(R,L);for(P in R)R[P]=w(R[P],L);return R};function w(R,L){var P=R.default,Y,J,j=R.type;return R.type?R.type==="bool"?j="boolean":R.type==="float"&&(j="number"):P!==void 0&&(typeof P=="boolean"||typeof P=="number")?j=typeof P:Array.isArray(P)?j="array":j="string",J=E[j],J||_("Unknown property type for component `"+L+"`: "+j),Y=!!R.parse,R.parse=R.parse||J.parse,R.stringify=R.stringify||J.stringify,R.type=j,"default"in R?!Y&&!y(j,P)&&_("Default value `"+P+"` does not match type `"+j+"` in component `"+L+"`"):R.default=J.default,R}S.exports.processPropertyDefinition=w,S.exports.parseProperties=function(){var R=[];return function(L,P,Y,J,j){var U,te,ue,xe;R.length=0;for(te in Y?L:P)Y&&L[te]===void 0||R.push(te);if(L===null||typeof L!="object")return L;for(te in L)L[te]!==void 0&&!P[te]&&!j&&_("Unknown property `"+te+"` for component/system `"+J+"`.");for(U=0;U<R.length;U++){if(te=R[U],ue=P[te],xe=L[te],!P[te])return;L[te]=b(xe,ue)}return L}}();function b(R,L){return(R==null||R==="")&&(R=L.default,Array.isArray(R)&&(R=R.slice())),L.parse(R,L.default)}S.exports.parseProperty=b,S.exports.stringifyProperties=function(R,L){var P,Y,J,j={},U;for(P in R)Y=L[P],J=R[P],U=J,typeof U=="object"&&(U=O(J,Y),Y||_("Unknown component property: "+P)),j[P]=U;return j};function O(R,L){return typeof R!="object"?R:!L||R===null?JSON.stringify(R):L.stringify(R)}S.exports.stringifyProperty=O},"./src/core/shader.js":(S,I,h)=>{var g=h("./src/core/schema.js"),C=g.process,v=S.exports.shaders={},y=S.exports.shaderNames=[],E=h("./src/lib/three.js"),_=h("./src/utils/index.js"),m={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},w=S.exports.Shader=function(){};w.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(b){return this.attributes=this.initVariables(b,"attribute"),this.uniforms=this.initVariables(b,"uniform"),this.material=new(this.raw?E.RawShaderMaterial:E.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(b,O){var R,L=this.schema,P={},Y;for(R in L)L[R].is===O&&(Y=m[L[R].type],P[R]={type:Y,value:void 0});return P},update:function(b){this.updateVariables(b,"attribute"),this.updateVariables(b,"uniform")},updateVariables:function(b,O){var R,L,P=this.schema,Y;Y=O==="uniform"?this.uniforms:this.attributes;for(R in b)if(!(!P[R]||P[R].is!==O)){if(P[R].type==="map"){if(!Y[R]||Y[R].value===b[R])continue;L="_texture_"+R,this.setMapOnTextureLoad(Y,R,L),_.material.updateMapMaterialFromData(L,R,this,b);continue}Y[R].value=this.parseValue(P[R].type,b[R]),Y[R].needsUpdate=!0}},parseValue:function(b,O){var R;switch(b){case"vec2":return new E.Vector2(O.x,O.y);case"vec3":return new E.Vector3(O.x,O.y,O.z);case"vec4":return new E.Vector4(O.x,O.y,O.z,O.w);case"color":return R=new E.Color(O),new E.Vector3(R.r,R.g,R.b);case"map":return E.ImageUtils.loadTexture(O);default:return O}},setMapOnTextureLoad:function(b,O,R){var L=this;this.el.addEventListener("materialtextureloaded",function(){b[O].value=L.material[R],b[O].needsUpdate=!0})}},S.exports.registerShader=function(b,O){var R,L={};if(Object.keys(O).forEach(function(P){L[P]={value:O[P],writable:!0}}),v[b])throw new Error("The shader "+b+" has been already registered");return R=function(){w.call(this)},R.prototype=Object.create(w.prototype,L),R.prototype.name=b,R.prototype.constructor=R,v[b]={Shader:R,schema:C(R.prototype.schema)},y.push(b),R}},"./src/core/system.js":(S,I,h)=>{var g=h("./src/core/component.js"),C=h("./src/core/schema.js"),v=h("./src/utils/index.js"),y=C.parseProperties,E=C.parseProperty,_=C.process,m=C.isSingleProperty,w=v.styleParser,b=S.exports.systems={},O=S.exports.System=function(R){var L=g&&g.components[this.name];this.el=R,this.sceneEl=R,L&&(L.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};O.prototype={schema:{},init:function(){},update:function(R){},updateProperties:function(R){var L=this.data;!Object.keys(C).length||(this.buildData(R),this.update(L))},buildData:function(R){var L=this.schema;!Object.keys(L).length||(R=R||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),m(L)?this.data=E(R,L):this.data=y(w.parse(R)||{},L))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},S.exports.registerSystem=function(R,L){var P,Y,J={},j=v.findAllScenes(document);if(Object.keys(L).forEach(function(U){J[U]={value:L[U],writable:!0}}),b[R])throw new Error("The system `"+R+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(Y=function(U){O.call(this,U)},Y.prototype=Object.create(O.prototype,J),Y.prototype.name=R,Y.prototype.constructor=Y,Y.prototype.schema=v.extend(_(Y.prototype.schema)),b[R]=Y,P=0;P<j.length;P++)j[P].initSystem(R)}},"./src/extras/components/index.js":(S,I,h)=>{h("./src/extras/components/pivot.js")},"./src/extras/components/pivot.js":(S,I,h)=>{var g=h("./src/core/component.js").registerComponent,C=h("./src/lib/three.js"),v=new C.Vector3,y=new C.Vector3;g("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var E=this.data,_=this.el,m=_.object3D.parent,w=_.object3D,b=new C.Group;v.copy(w.position),y.copy(w.rotation),m.remove(w),b.add(w),m.add(b),_.object3D=b,w.position.set(-1*E.x,-1*E.y,-1*E.z),b.position.set(E.x+v.x,E.y+v.y,E.z+v.z),b.rotation.copy(w.rotation),w.rotation.set(0,0,0)}})},"./src/extras/primitives/getMeshMixin.js":(S,I,h)=>{var g=h("./src/core/component.js").components,C=h("./src/core/shader.js").shaders,v=h("./src/utils/index.js"),y={};Object.keys(g.material.schema).forEach(E),Object.keys(C.standard.schema).forEach(E);function E(_){var m=_.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();_==="fog"&&(m="material-fog"),_==="visible"&&(m="material-visible"),y[m]="material."+_}S.exports=function(){return{defaultComponents:{material:{}},mappings:v.extend({},y)}}},"./src/extras/primitives/index.js":(S,I,h)=>{h("./src/extras/primitives/primitives/a-camera.js"),h("./src/extras/primitives/primitives/a-cursor.js"),h("./src/extras/primitives/primitives/a-curvedimage.js"),h("./src/extras/primitives/primitives/a-gltf-model.js"),h("./src/extras/primitives/primitives/a-image.js"),h("./src/extras/primitives/primitives/a-light.js"),h("./src/extras/primitives/primitives/a-link.js"),h("./src/extras/primitives/primitives/a-obj-model.js"),h("./src/extras/primitives/primitives/a-sky.js"),h("./src/extras/primitives/primitives/a-sound.js"),h("./src/extras/primitives/primitives/a-text.js"),h("./src/extras/primitives/primitives/a-video.js"),h("./src/extras/primitives/primitives/a-videosphere.js"),h("./src/extras/primitives/primitives/meshPrimitives.js")},"./src/extras/primitives/primitives.js":(S,I,h)=>{var g=h("./src/core/a-node.js").knownTags,C=h("./src/core/a-entity.js").AEntity,v=h("./src/core/component.js").components,y=h("./src/utils/index.js"),E=y.debug,_=y.entity.setComponentProperty,m=E("extras:primitives:debug"),w=E("extras:primitives:warn"),b=E("extras:primitives:error"),O=S.exports.primitives={};S.exports.registerPrimitive=function(Y,J){if(Y=Y.toLowerCase(),g[Y]){b("Trying to register primitive "+Y+" that has been already previously registered");return}g[Y]=!0,m("Registering <%s>",Y),J.defaultAttributes&&w("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var j=J.mappings||{},U=class extends C{constructor(){super(),this.defaultComponentsFromPrimitive=J.defaultComponents||J.defaultAttributes||{},this.deprecated=J.deprecated||null,this.deprecatedMappings=J.deprecatedMappings||{},this.mappings=j,J.deprecated&&console.warn(J.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var te=this.mappings,ue=this;Object.keys(te).forEach(function(Ee){var V;Ee!==Ee.toLowerCase()&&w("Mapping keys should be specified in lower case. The mapping key "+Ee+" may not be recognized"),v[Ee]&&(V=te[Ee].replace(".","-"),te[V]=te[Ee],delete te[Ee],console.warn("The primitive "+ue.tagName.toLowerCase()+" has a mapping collision. The attribute "+Ee+" has the same name as a registered component and has been renamed to "+V))})}getExtraComponents(){var te,ue,xe,Ee,V,q,Q=this;for(ue=y.clone(this.defaultComponentsFromPrimitive),V=this.getAttribute("mixin"),V&&(V=V.trim().split(" "),V.forEach(function(Se){var Be=Q.sceneEl.querySelector("#"+Se).componentCache;Object.keys(Be).forEach(function(ht){ue[ht]=F(ue[ht],Be[ht])})})),xe=0;xe<this.attributes.length;xe++)if(te=this.attributes[xe],Ee=this.mappings[te.name],Ee){q=y.entity.getComponentPropertyPath(Ee),q.constructor===Array?(ue[q[0]]=ue[q[0]]||{},ue[q[0]][q[1]]=te.value.trim()):ue[q]=te.value.trim();continue}return ue;function F(Ae,Se){return z(Ae)?X(Se):z(Se)?X(Ae):fe(Ae)&&fe(Se)?y.extendDeep(Ae,Se):X(Se)}function z(Ae){return typeof Ae>"u"}function X(Ae){return fe(Ae)?y.extendDeep({},Ae):Ae}function fe(Ae){return Ae!==null&&Ae.constructor===Object}}attributeChangedCallback(te,ue,xe){var Ee=this.mappings[te];if(te in this.deprecatedMappings&&console.warn(this.deprecatedMappings[te]),!te||!Ee){super.attributeChangedCallback(te,ue,xe);return}_(this,Ee,xe)}};return customElements.define(Y,U),U.mappings=j,O[Y]=U,U};function R(P,Y){var J=v[P].schema;Object.keys(J).map(function(j){var U=j.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();Y[U]!==void 0&&(U=P+"-"+j),Y[U]=P+"."+j})}function L(P,Y,J){J=J||{},Object.keys(Y).map(function(U){R(U,J)}),S.exports.registerPrimitive(P,y.extendDeep({},null,{defaultComponents:Y,mappings:J}))}S.exports.definePrimitive=L},"./src/extras/primitives/primitives/a-camera.js":(S,I,h)=>{var g=h("./src/extras/primitives/primitives.js").registerPrimitive;g("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},"./src/extras/primitives/primitives/a-cursor.js":(S,I,h)=>{var g=h("./src/extras/primitives/getMeshMixin.js"),C=h("./src/extras/primitives/primitives.js").registerPrimitive,v=h("./src/utils/index.js");C("a-cursor",v.extendDeep({},g(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},"./src/extras/primitives/primitives/a-curvedimage.js":(S,I,h)=>{var g=h("./src/extras/primitives/getMeshMixin.js"),C=h("./src/extras/primitives/primitives.js").registerPrimitive,v=h("./src/utils/index.js");C("a-curvedimage",v.extendDeep({},g(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},"./src/extras/primitives/primitives/a-gltf-model.js":(S,I,h)=>{var g=h("./src/extras/primitives/primitives.js").registerPrimitive;g("a-gltf-model",{mappings:{src:"gltf-model"}})},"./src/extras/primitives/primitives/a-image.js":(S,I,h)=>{var g=h("./src/extras/primitives/getMeshMixin.js"),C=h("./src/extras/primitives/primitives.js").registerPrimitive,v=h("./src/utils/index.js");C("a-image",v.extendDeep({},g(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-light.js":(S,I,h)=>{var g=h("./src/extras/primitives/primitives.js").registerPrimitive;g("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}})},"./src/extras/primitives/primitives/a-link.js":(S,I,h)=>{var g=h("./src/extras/primitives/primitives.js").registerPrimitive;g("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},"./src/extras/primitives/primitives/a-obj-model.js":(S,I,h)=>{var g=h("./src/extras/primitives/getMeshMixin.js")(),C=h("./src/extras/primitives/primitives.js").registerPrimitive,v=h("./src/utils/index.js");C("a-obj-model",v.extendDeep({},g,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},"./src/extras/primitives/primitives/a-sky.js":(S,I,h)=>{var g=h("./src/extras/primitives/getMeshMixin.js"),C=h("./src/extras/primitives/primitives.js").registerPrimitive,v=h("./src/utils/index.js"),y=h("./src/extras/primitives/primitives/meshPrimitives.js");C("a-sky",v.extendDeep({},g(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:v.extendDeep({},y["a-sphere"].mappings)}))},"./src/extras/primitives/primitives/a-sound.js":(S,I,h)=>{var g=h("./src/extras/primitives/primitives.js").registerPrimitive;g("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},"./src/extras/primitives/primitives/a-text.js":(S,I,h)=>{var g=h("./src/extras/primitives/primitives.js").definePrimitive;g("a-text",{text:{anchor:"align",width:5}})},"./src/extras/primitives/primitives/a-video.js":(S,I,h)=>{var g=h("./src/extras/primitives/getMeshMixin.js"),C=h("./src/extras/primitives/primitives.js").registerPrimitive,v=h("./src/utils/index.js");C("a-video",v.extendDeep({},g(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-videosphere.js":(S,I,h)=>{var g=h("./src/extras/primitives/getMeshMixin.js"),C=h("./src/extras/primitives/primitives.js").registerPrimitive,v=h("./src/utils/index.js");C("a-videosphere",v.extendDeep({},g(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},"./src/extras/primitives/primitives/meshPrimitives.js":(S,I,h)=>{var g=h("./src/extras/primitives/getMeshMixin.js"),C=h("./src/core/geometry.js").geometries,v=h("./src/core/geometry.js").geometryNames,y=h("./src/extras/primitives/primitives.js").registerPrimitive,E=h("./src/utils/index.js"),_=S.exports={};v.forEach(function(b){var O=C[b],R=m(b),L={};Object.keys(O.schema).forEach(function(j){L[m(j)]="geometry."+j});var P="a-"+R,Y=y(P,E.extendDeep({},g(),{defaultComponents:{geometry:{primitive:b}},mappings:L}));_[P]=Y});function m(w){return w.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},"./src/geometries/box.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js");g("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(v){this.geometry=new C.BoxGeometry(v.width,v.height,v.depth,v.segmentsWidth,v.segmentsHeight,v.segmentsDepth)}})},"./src/geometries/circle.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js"),v=C.MathUtils.degToRad;g("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new C.CircleGeometry(y.radius,y.segments,v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/cone.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js"),v=C.MathUtils.degToRad;g("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new C.CylinderGeometry(y.radiusTop,y.radiusBottom,y.height,y.segmentsRadial,y.segmentsHeight,y.openEnded,v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/cylinder.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js"),v=C.MathUtils.degToRad;g("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new C.CylinderGeometry(y.radius,y.radius,y.height,y.segmentsRadial,y.segmentsHeight,y.openEnded,v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/dodecahedron.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js");g("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(v){this.geometry=new C.DodecahedronGeometry(v.radius,v.detail)}})},"./src/geometries/icosahedron.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js");g("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(v){this.geometry=new C.IcosahedronGeometry(v.radius,v.detail)}})},"./src/geometries/index.js":(S,I,h)=>{h("./src/geometries/box.js"),h("./src/geometries/circle.js"),h("./src/geometries/cone.js"),h("./src/geometries/cylinder.js"),h("./src/geometries/dodecahedron.js"),h("./src/geometries/icosahedron.js"),h("./src/geometries/octahedron.js"),h("./src/geometries/plane.js"),h("./src/geometries/ring.js"),h("./src/geometries/sphere.js"),h("./src/geometries/tetrahedron.js"),h("./src/geometries/torus.js"),h("./src/geometries/torusKnot.js"),h("./src/geometries/triangle.js")},"./src/geometries/octahedron.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js");g("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(v){this.geometry=new C.OctahedronGeometry(v.radius,v.detail)}})},"./src/geometries/plane.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js");g("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(v){this.geometry=new C.PlaneGeometry(v.width,v.height,v.segmentsWidth,v.segmentsHeight)}})},"./src/geometries/ring.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js"),v=C.MathUtils.degToRad;g("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new C.RingGeometry(y.radiusInner,y.radiusOuter,y.segmentsTheta,y.segmentsPhi,v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/sphere.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js"),v=C.MathUtils.degToRad;g("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(y){this.geometry=new C.SphereGeometry(y.radius,y.segmentsWidth,y.segmentsHeight,v(y.phiStart),v(y.phiLength),v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/tetrahedron.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js");g("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(v){this.geometry=new C.TetrahedronGeometry(v.radius,v.detail)}})},"./src/geometries/torus.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js"),v=C.MathUtils.degToRad;g("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(y){this.geometry=new C.TorusGeometry(y.radius,y.radiusTubular*2,y.segmentsRadial,y.segmentsTubular,v(y.arc))}})},"./src/geometries/torusKnot.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js");g("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(v){this.geometry=new C.TorusKnotGeometry(v.radius,v.radiusTubular*2,v.segmentsTubular,v.segmentsRadial,v.p,v.q)}})},"./src/geometries/triangle.js":(S,I,h)=>{var g=h("./src/core/geometry.js").registerGeometry,C=h("./src/lib/three.js"),v=new C.Quaternion,y=new C.Vector3(0,0,1),E=new C.Vector2,_=new C.Vector2,m=new C.Vector2;g("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(w){var b,O,R,L,P,Y,J,j,U;R=new C.Triangle,R.a.set(w.vertexA.x,w.vertexA.y,w.vertexA.z),R.b.set(w.vertexB.x,w.vertexB.y,w.vertexB.z),R.c.set(w.vertexC.x,w.vertexC.y,w.vertexC.z),O=R.getNormal(new C.Vector3),v.setFromUnitVectors(O,y),L=R.a.clone().applyQuaternion(v),P=R.b.clone().applyQuaternion(v),Y=R.c.clone().applyQuaternion(v),E.set(Math.min(L.x,P.x,Y.x),Math.min(L.y,P.y,Y.y)),_.set(Math.max(L.x,P.x,Y.x),Math.max(L.y,P.y,Y.y)),m.set(0,0).subVectors(_,E),L=new C.Vector2().subVectors(L,E).divide(m),P=new C.Vector2().subVectors(P,E).divide(m),Y=new C.Vector2().subVectors(Y,E).divide(m),b=this.geometry=new C.BufferGeometry,J=[R.a.x,R.a.y,R.a.z,R.b.x,R.b.y,R.b.z,R.c.x,R.c.y,R.c.z],j=[O.x,O.y,O.z,O.x,O.y,O.z,O.x,O.y,O.z],U=[L.x,L.y,P.x,P.y,Y.x,Y.y],b.setAttribute("position",new C.Float32BufferAttribute(J,3)),b.setAttribute("normal",new C.Float32BufferAttribute(j,3)),b.setAttribute("uv",new C.Float32BufferAttribute(U,2))}})},"./src/index.js":(S,I,h)=>{if(window.Promise=window.Promise||h("./node_modules/promise-polyfill/Promise.js"),h("./node_modules/@ungap/custom-elements/index.js"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var g=h("./src/utils/isIOSOlderThan10.js"),C=g(window.navigator.userAgent)?1/window.devicePixelRatio:1,v=h("./node_modules/webvr-polyfill/build/webvr-polyfill.js"),y={BUFFER_SCALE:C,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new v(y)}var E=h("./src/utils/index.js"),_=E.debug;E.isIE11&&(h("./node_modules/custom-event-polyfill/polyfill.js"),h("./vendor/starts-with-polyfill.js"));var m=_("A-Frame:error"),w=_("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&w("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),!window.cordova&&window.location.protocol==="file:"&&m("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),h("./node_modules/present/lib/present-browser.js"),E.device.isBrowserEnvironment&&(h("./src/style/aframe.css"),h("./src/style/rStats.css"));var b=h("./src/core/scene/a-scene.js").AScene,O=h("./src/core/component.js").components,R=h("./src/core/component.js").registerComponent,L=h("./src/core/geometry.js").registerGeometry,P=h("./src/extras/primitives/primitives.js").registerPrimitive,Y=h("./src/core/shader.js").registerShader,J=h("./src/core/system.js").registerSystem,j=h("./src/core/shader.js").shaders,U=h("./src/core/system.js").systems,te=window.THREE=h("./src/lib/three.js"),ue=h("./package.json");h("./src/components/index.js"),h("./src/geometries/index.js"),h("./src/shaders/index.js"),h("./src/systems/index.js");var xe=h("./src/core/a-node.js").ANode,Ee=h("./src/core/a-entity.js").AEntity;h("./src/core/a-assets.js"),h("./src/core/a-cubemap.js"),h("./src/core/a-mixin.js"),h("./src/extras/components/index.js"),h("./src/extras/primitives/index.js"),console.log("A-Frame Version: 1.4.2 (Date 2023-04-22, Commit #4e521f1f)"),console.log("THREE Version (https://github.com/supermedium/three.js):",ue.dependencies["super-three"]),console.log("WebVR Polyfill Version:",ue.dependencies["webvr-polyfill"]),S.exports=window.AFRAME={AComponent:h("./src/core/component.js").Component,AEntity:Ee,ANode:xe,ANIME:h("./node_modules/super-animejs/lib/anime.es.js").default,AScene:b,components:O,coreComponents:Object.keys(O),geometries:h("./src/core/geometry.js").geometries,registerComponent:R,registerGeometry:L,registerPrimitive:P,registerShader:Y,registerSystem:J,primitives:{getMeshMixin:h("./src/extras/primitives/getMeshMixin.js"),primitives:h("./src/extras/primitives/primitives.js").primitives},scenes:h("./src/core/scene/scenes.js"),schema:h("./src/core/schema.js"),shaders:j,systems:U,THREE:te,utils:E,version:ue.version}},"./src/lib/rStatsAframe.js":S=>{window.aframeStats=function(I){var h=null,g=I,C={te:{caption:"Entities"},lt:{caption:"Load Time"}},v=[{caption:"A-Frame",values:["te","lt"]}];function y(){h("te").set(E()),window.performance.getEntriesByName&&h("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function E(){var b=g.querySelectorAll("*");return Array.prototype.slice.call(b).filter(function(O){return O.isEntity}),b.length}function _(){}function m(){}function w(b){h=b}return{update:y,start:_,end:m,attach:w,values:C,groups:v,fractions:[]}},S.exports={aframeStats:window.aframeStats}},"./src/lib/three.js":(S,I,h)=>{var g=h("./src/lib/three.module.js").default;g.TextureLoader&&(g.TextureLoader.prototype.crossOrigin="anonymous"),g.ImageLoader&&(g.ImageLoader.prototype.crossOrigin="anonymous"),g.Cache&&(g.Cache.enabled=!0),g.DRACOLoader.prototype.crossOrigin="anonymous",g.GLTFLoader.prototype.crossOrigin="anonymous",g.KTX2Loader.prototype.crossOrigin="anonymous",g.MTLLoader.prototype.crossOrigin="anonymous",g.OBJLoader.prototype.crossOrigin="anonymous",S.exports=g},"./src/lib/three.module.js":(S,I,h)=>{h.r(I),h.d(I,{default:()=>R});var g=h("./node_modules/super-three/build/three.module.js"),C=h("./node_modules/super-three/examples/jsm/loaders/DRACOLoader.js"),v=h("./node_modules/super-three/examples/jsm/loaders/GLTFLoader.js"),y=h("./node_modules/super-three/examples/jsm/loaders/KTX2Loader.js"),E=h("./node_modules/super-three/examples/jsm/loaders/OBJLoader.js"),_=h("./node_modules/super-three/examples/jsm/loaders/MTLLoader.js"),m=h("./node_modules/super-three/examples/jsm/utils/BufferGeometryUtils.js"),w=h("./node_modules/super-three/examples/jsm/lights/LightProbeGenerator.js"),b=h("./node_modules/object-assign/index.js"),O=window.THREE=b({},g);h("./vendor/DeviceOrientationControls.js"),O.DRACOLoader=C.DRACOLoader,O.GLTFLoader=v.GLTFLoader,O.KTX2Loader=y.KTX2Loader,O.OBJLoader=E.OBJLoader,O.MTLLoader=_.MTLLoader,O.BufferGeometryUtils=m,O.LightProbeGenerator=w.LightProbeGenerator;const R=O},"./src/shaders/flat.js":(S,I,h)=>{var g=h("./src/core/shader.js").registerShader,C=h("./src/lib/three.js"),v=h("./src/utils/index.js");S.exports.Shader=g("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(E){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new C.Color},this.textureSrc=null,y(E,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new C.MeshBasicMaterial(this.materialData)},update:function(E){this.updateMaterial(E),v.material.updateMap(this,E)},updateMaterial:function(E){var _;y(E,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(_ in this.materialData)this.material[_]=this.materialData[_]}});function y(E,_){return _.color.set(E.color),_.fog=E.fog,_.wireframe=E.wireframe,_.toneMapped=E.toneMapped,_.wireframeLinewidth=E.wireframeLinewidth,_}},"./src/shaders/index.js":(S,I,h)=>{h("./src/shaders/flat.js"),h("./src/shaders/standard.js"),h("./src/shaders/phong.js"),h("./src/shaders/sdf.js"),h("./src/shaders/msdf.js"),h("./src/shaders/ios10hls.js"),h("./src/shaders/shadow.js")},"./src/shaders/ios10hls.js":(S,I,h)=>{var g=h("./src/core/shader.js").registerShader;S.exports.Shader=g("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join(`
`)})},"./src/shaders/msdf.js":(S,I,h)=>{var g=h("./src/core/shader.js").registerShader,C=!!document.createElement("canvas").getContext("webgl2"),v=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),y=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),E=C?y:v,_=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture2D(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),m=["#version 300 es","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  fragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),w=C?m:_;S.exports.Shader=g("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:E,fragmentShader:w})},"./src/shaders/phong.js":(S,I,h)=>{var g=h("./src/core/shader.js").registerShader,C=h("./src/lib/three.js"),v=h("./src/utils/index.js"),y=new C.CubeTextureLoader,E={};S.exports.Shader=g("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(m){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new C.Color,specular:new C.Color,emissive:new C.Color},this.textureSrc=null,_(m,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new C.MeshPhongMaterial(this.materialData),v.material.updateMap(this,m)},update:function(m){this.updateMaterial(m),v.material.updateMap(this,m),m.normalMap&&v.material.updateDistortionMap("normal",this,m),m.displacementMap&&v.material.updateDistortionMap("displacement",this,m),m.ambientOcclusionMap&&v.material.updateDistortionMap("ambientOcclusion",this,m),m.bump&&v.material.updateDistortionMap("bump",this,m),this.updateEnvMap(m)},updateMaterial:function(m){var w;_(m,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(w in this.materialData)this.material[w]=this.materialData[w]},updateEnvMap:function(m){var w=this,b=this.material,O=m.envMap,R=m.sphericalEnvMap,L=m.refract,P=this.el.sceneEl;if(!O&&!R||this.isLoadingEnvMap){Object.defineProperty(b,"envMap",{get:function(){return P.object3D.environment},set:function(Y){delete this.envMap,this.envMap=Y}}),b.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,delete b.envMap,R){this.el.sceneEl.systems.material.loadTexture(R,{src:R},function(J){w.isLoadingEnvMap=!1,J.mapping=L?C.EquirectangularRefractionMapping:C.EquirectangularReflectionMapping,b.envMap=J,v.material.handleTextureEvents(w.el,J),b.needsUpdate=!0});return}if(E[O]){E[O].then(function(Y){w.isLoadingEnvMap=!1,b.envMap=Y,v.material.handleTextureEvents(w.el,Y),b.needsUpdate=!0});return}E[O]=new Promise(function(Y){v.srcLoader.validateCubemapSrc(O,function(j){y.load(j,function(U){w.isLoadingEnvMap=!1,b.envMap=U,U.mapping=L?C.CubeRefractionMapping:C.CubeReflectionMapping,v.material.handleTextureEvents(w.el,U),Y(U)})})})}});function _(m,w){switch(w.color.set(m.color),w.specular.set(m.emissive),w.emissive.set(m.emissive),w.emissiveIntensity=m.emissiveIntensity,w.fog=m.fog,w.transparent=m.transparent,w.wireframe=m.wireframe,w.wireframeLinewidth=m.wireframeLinewidth,w.shininess=m.shininess,w.flatShading=m.flatShading,w.wireframe=m.wireframe,w.wireframeLinewidth=m.wireframeLinewidth,w.reflectivity=m.reflectivity,w.refractionRatio=m.refractionRatio,m.combine){case"mix":w.combine=C.MixOperation;break;case"multiply":w.combine=C.MultiplyOperation;break;case"add":w.combine=C.AddOperation;break}return m.normalMap&&(w.normalScale=m.normalScale),m.ambientOcclusionMap&&(w.aoMapIntensity=m.ambientOcclusionMapIntensity),m.bumpMap&&(w.aoMapIntensity=m.bumpMapScale),m.displacementMap&&(w.displacementScale=m.displacementScale,w.displacementBias=m.displacementBias),w}},"./src/shaders/sdf.js":(S,I,h)=>{var g=h("./src/core/shader.js").registerShader,C=!!document.createElement("canvas").getContext("webgl2"),v=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),y=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),E=C?y:v,_=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture2D(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture2D(map, box.xy).a, width)","        + contour(texture2D(map, box.zw).a, width)","        + contour(texture2D(map, box.xw).a, width)","        + contour(texture2D(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture2D(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join(`
`),m=["#version 300 es","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture(map, box.xy).a, width)","        + contour(texture(map, box.zw).a, width)","        + contour(texture(map, box.xw).a, width)","        + contour(texture(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  fragColor = vec4(color, opacity * alpha);","}"].join(`
`),w=C?m:_;S.exports.Shader=g("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:E,fragmentShader:w})},"./src/shaders/shadow.js":(S,I,h)=>{var g=h("./src/core/shader.js").registerShader,C=h("./src/lib/three.js");S.exports.Shader=g("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(v){this.rendererSystem=this.el.sceneEl.systems.renderer,this.material=new C.ShadowMaterial},update:function(v){this.material.opacity=v.opacity,this.material.alphaToCoverage=v.alphaToCoverage,this.material.transparent=v.transparent}})},"./src/shaders/standard.js":(S,I,h)=>{var g=h("./src/core/shader.js").registerShader,C=h("./src/lib/three.js"),v=h("./src/utils/index.js"),y=new C.CubeTextureLoader,E={};S.exports.Shader=g("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(m){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new C.Color,emissive:new C.Color},_(m,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.material=new C.MeshStandardMaterial(this.materialData)},update:function(m){this.updateMaterial(m),v.material.updateMap(this,m),m.normalMap&&v.material.updateDistortionMap("normal",this,m),m.displacementMap&&v.material.updateDistortionMap("displacement",this,m),m.ambientOcclusionMap&&v.material.updateDistortionMap("ambientOcclusion",this,m),m.metalnessMap&&v.material.updateDistortionMap("metalness",this,m),m.roughnessMap&&v.material.updateDistortionMap("roughness",this,m),this.updateEnvMap(m)},updateMaterial:function(m){var w,b=this.material;_(m,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive);for(w in this.materialData)b[w]=this.materialData[w]},updateEnvMap:function(m){var w=this,b=this.material,O=m.envMap,R=m.sphericalEnvMap;if(!O&&!R||this.isLoadingEnvMap){b.envMap=null,b.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,R){this.el.sceneEl.systems.material.loadTexture(R,{src:R},function(P){w.isLoadingEnvMap=!1,P.mapping=C.EquirectangularReflectionMapping,b.envMap=P,v.material.handleTextureEvents(w.el,P),b.needsUpdate=!0});return}if(E[O]){E[O].then(function(L){w.isLoadingEnvMap=!1,b.envMap=L,v.material.handleTextureEvents(w.el,L),b.needsUpdate=!0});return}E[O]=new Promise(function(L){v.srcLoader.validateCubemapSrc(O,function(Y){y.load(Y,function(J){w.isLoadingEnvMap=!1,b.envMap=J,v.material.handleTextureEvents(w.el,J),L(J)})})})}});function _(m,w){return w.color.set(m.color),w.emissive.set(m.emissive),w.emissiveIntensity=m.emissiveIntensity,w.fog=m.fog,w.metalness=m.metalness,w.roughness=m.roughness,w.wireframe=m.wireframe,w.wireframeLinewidth=m.wireframeLinewidth,m.normalMap&&(w.normalScale=m.normalScale),m.ambientOcclusionMap&&(w.aoMapIntensity=m.ambientOcclusionMapIntensity),m.displacementMap&&(w.displacementScale=m.displacementScale,w.displacementBias=m.displacementBias),w}},"./src/systems/camera.js":(S,I,h)=>{var g=h("./src/constants/index.js"),C=h("./src/core/system.js").registerSystem,v="data-aframe-default-camera";S.exports.System=C("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var E,_,m=this.sceneEl,w=this;if(m.camera&&!m.camera.el.getAttribute("camera").spectator){m.emit("cameraready",{cameraEl:m.camera.el});return}if(E=m.querySelectorAll("a-camera, :not(a-mixin)[camera]"),!E.length){this.createDefaultCamera();return}for(this.numUserCameras=E.length,_=0;_<E.length;_++)E[_].addEventListener("object3dset",function(b){b.detail.type==="camera"&&w.checkUserCamera(this)}),E[_].isNode?E[_].load():E[_].addEventListener("nodeready",function(){this.load()})},checkUserCamera:function(E){var _,m=this.el.sceneEl;if(this.numUserCamerasChecked++,!this.initialCameraFound){if(_=E.getAttribute("camera"),!_.active||_.spectator){this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera();return}this.initialCameraFound=!0,m.camera=E.getObject3D("camera"),m.emit("cameraready",{cameraEl:E})}},createDefaultCamera:function(){var E,_=this.sceneEl;E=document.createElement("a-entity"),E.setAttribute("camera",{active:!0}),E.setAttribute("position",{x:0,y:g.DEFAULT_CAMERA_HEIGHT,z:0}),E.setAttribute("wasd-controls",""),E.setAttribute("look-controls",""),E.setAttribute(g.AFRAME_INJECTED,""),E.addEventListener("object3dset",function(m){m.detail.type==="camera"&&(_.camera=m.detail.object,_.emit("cameraready",{cameraEl:E}))}),_.appendChild(E)},disableActiveCamera:function(){var E,_;E=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"),_=E[E.length-1],_.setAttribute("camera","active",!0)},setActiveCamera:function(E){var _,m,w,b,O=this.activeCameraEl,R=this.sceneEl;if(b=E.getObject3D("camera"),!(!b||E===this.activeCameraEl)){var L=R.querySelector("["+v+"]"),P=L&&L.querySelector(":not(a-mixin)[camera]");for(E!==P&&y(R),this.activeCameraEl=E,this.activeCameraEl.play(),R.camera=b,O&&O.setAttribute("camera","active",!1),m=R.querySelectorAll(":not(a-mixin)[camera]"),w=0;w<m.length;w++)_=m[w],!(!_.isEntity||E===_)&&(_.setAttribute("camera","active",!1),_.pause());R.emit("camera-set-active",{cameraEl:E})}},setSpectatorCamera:function(E){var _,m=this.spectatorCameraEl,w=this.sceneEl,b;_=E.getObject3D("camera"),!(!_||E===this.spectatorCameraEl)&&(m&&m.setAttribute("camera","spectator",!1),b=this.spectatorCameraEl=E,w.addEventListener("enter-vr",this.wrapRender),w.addEventListener("exit-vr",this.unwrapRender),b.setAttribute("camera","active",!1),b.play(),w.emit("camera-set-spectator",{cameraEl:E}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){!this.spectatorCameraEl||this.originalRender||(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){!this.originalRender||(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(E,_){var m,w=this.sceneEl,b;m=w.renderer.xr.enabled,this.originalRender.call(w.renderer,E,_),!(!this.spectatorCameraEl||w.isMobile||!m)&&(b=this.spectatorCameraEl.components.camera.camera,w.renderer.xr.enabled=!1,this.originalRender.call(w.renderer,E,b),w.renderer.xr.enabled=m)}});function y(E){var _,m=E.camera;!m||(_=E.querySelector("["+v+"]"),_&&E.removeChild(_))}},"./src/systems/geometry.js":(S,I,h)=>{var g=h("./src/core/geometry.js").geometries,C=h("./src/core/system.js").registerSystem;S.exports.System=C("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(_){var m=this.cache,w,b;return _.skipCache?v(_):(b=this.hash(_),w=m[b],E(this.cacheCount,b),w||(w=v(_),m[b]=w,w))},unuseGeometry:function(_){var m=this.cache,w=this.cacheCount,b,O;_.skipCache||(O=this.hash(_),m[O]&&(y(w,O),!(w[O]>0)&&(b=m[O],b.dispose(),delete m[O],delete w[O])))},hash:function(_){return JSON.stringify(_)}});function v(_){var m=_.primitive,w=g[m]&&g[m].Geometry,b=new w;if(!w)throw new Error("Unknown geometry `"+m+"`");return b.init(_),b.geometry}function y(_,m){_[m]--}function E(_,m){_[m]=_[m]===void 0?1:_[m]+1}},"./src/systems/gltf-model.js":(S,I,h)=>{var g=h("./src/core/system.js").registerSystem,C=h("./src/lib/three.js");function v(y){return new Promise(function(E,_){var m=document.createElement("script");document.body.appendChild(m),m.onload=E,m.onerror=_,m.async=!0,m.src=y})}S.exports.System=g("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.6/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var y=this.data.dracoDecoderPath,E=this.data.basisTranscoderPath,_=this.data.meshoptDecoderPath;!this.dracoLoader&&y&&(this.dracoLoader=new C.DRACOLoader,this.dracoLoader.setDecoderPath(y)),!this.ktx2Loader&&E&&(this.ktx2Loader=new C.KTX2Loader,this.ktx2Loader.setTranscoderPath(E).detectSupport(this.el.renderer)),!this.meshoptDecoder&&_&&(this.meshoptDecoder=v(_).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}})},"./src/systems/index.js":(S,I,h)=>{h("./src/systems/camera.js"),h("./src/systems/geometry.js"),h("./src/systems/gltf-model.js"),h("./src/systems/light.js"),h("./src/systems/material.js"),h("./src/systems/renderer.js"),h("./src/systems/shadow.js"),h("./src/systems/tracked-controls-webvr.js"),h("./src/systems/tracked-controls-webxr.js"),h("./src/systems/webxr.js")},"./src/systems/light.js":(S,I,h)=>{var g=h("./src/core/system.js").registerSystem,C=h("./src/utils/bind.js"),v=h("./src/constants/index.js"),y="data-aframe-default-light";S.exports.System=g("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",C(this.setupDefaultLights,this))},registerLight:function(E){E.hasAttribute(y)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var E,_=this.sceneEl;if(!!this.defaultLights){E=document.querySelectorAll("["+y+"]");for(var m=0;m<E.length;m++)_.removeChild(E[m]);this.defaultLights=!1}},setupDefaultLights:function(){var E=this.sceneEl,_,m;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(_=document.createElement("a-entity"),_.setAttribute("light",{color:"#BBB",type:"ambient"}),_.setAttribute(y,""),_.setAttribute(v.AFRAME_INJECTED,""),E.appendChild(_),m=document.createElement("a-entity"),m.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),m.setAttribute("position",{x:-.5,y:1,z:1}),m.setAttribute(y,""),m.setAttribute(v.AFRAME_INJECTED,""),E.appendChild(m),this.defaultLights=!0)}})},"./src/systems/material.js":(S,I,h)=>{var g=h("./src/core/system.js").registerSystem,C=h("./src/lib/three.js"),v=h("./src/utils/index.js"),y=h("./src/utils/material.js").isHLS,E=h("./src/utils/material.js").setTextureProperties,_=v.bind,m=v.debug,w=m("components:texture:error"),b=new C.TextureLoader,O=m("components:texture:warn");b.setCrossOrigin("anonymous"),S.exports.System=g("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",_(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(J,j,U){var te=this;if(J.tagName==="CANVAS"){this.loadCanvas(J,j,U);return}if(J.tagName==="VIDEO"){!J.src&&!J.srcObject&&!J.childElementCount&&O("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),this.loadVideo(J,j,U);return}v.srcLoader.validateSrc(J,ue,xe);function ue(Ee){te.loadImage(Ee,j,U)}function xe(Ee){te.loadVideo(Ee,j,U)}},loadImage:function(J,j,U){var te=this.hash(j),ue=this.textureCache;if(ue[te]){ue[te].then(U);return}ue[te]=L(J,j),ue[te].then(U)},loadCanvas:function(J,j,U){var te;te=new C.CanvasTexture(J),E(te,j),U(te)},loadVideo:function(J,j,U){var te,ue,xe=this.textureCache,Ee,V;function q(Q){Q.texture.needsUpdate=!0,U(Q.texture,Q.videoEl)}if(typeof J!="string"){if(Ee=J,te=this.hashVideo(j,Ee),xe[te]){xe[te].then(q);return}Y(Ee)}if(Ee=Ee||P(J,j.width,j.height),te=this.hashVideo(j,Ee),xe[te]){xe[te].then(q);return}ue=new C.VideoTexture(Ee),ue.minFilter=C.LinearFilter,E(ue,j),this.sceneEl.isIOS&&y(Ee.src||Ee.getAttribute("src"),Ee.type||Ee.getAttribute("type"))&&(ue.format=C.RGBAFormat,ue.needsCorrectionBGRA=!0,ue.flipY=!1,ue.needsCorrectionFlipY=!0),V={texture:ue,videoEl:Ee},xe[te]=Promise.resolve(V),q(V)},hash:function(J){return J.src.tagName&&(J=v.extendDeep({},J),J.src=J.src.src),JSON.stringify(J)},hashVideo:function(J,j){return R(J,j)},registerMaterial:function(J){this.materials[J.uuid]=J},unregisterMaterial:function(J){delete this.materials[J.uuid];var j=this.textureCounts;Object.keys(J).filter(function(U){return J[U]&&J[U].isTexture}).forEach(function(U){j[J[U].uuid]--,j[J[U].uuid]<=0&&J[U].dispose()})},updateMaterials:function(J){var j=this.materials;Object.keys(j).forEach(function(U){j[U].needsUpdate=!0})},onMaterialTextureLoaded:function(J){this.textureCounts[J.detail.texture.uuid]||(this.textureCounts[J.detail.texture.uuid]=0),this.textureCounts[J.detail.texture.uuid]++}});function R(J,j){var U,te=j.getAttribute("id"),ue,xe;if(te)return te;for(ue="",xe=J||{},U=0;U<j.attributes.length;U++)xe[j.attributes[U].name]=j.attributes[U].value;return Object.keys(xe).sort().forEach(function(Ee){ue+=Ee+":"+xe[Ee]+";"}),ue}function L(J,j){return new Promise(U);function U(te,ue){var xe=typeof J!="string";function Ee(V){E(V,j),V.needsUpdate=!0,te(V)}if(xe){Ee(new C.Texture(J));return}b.load(J,Ee,function(){},function(V){w("`$s` could not be fetched (Error code: %s; Response: %s)",V.status,V.statusText)})}}function P(J,j,U){var te=document.createElement("video");return te.width=j,te.height=U,te.setAttribute("playsinline",""),te.setAttribute("webkit-playsinline",""),te.autoplay=!0,te.loop=!0,te.crossOrigin="anonymous",te.addEventListener("error",function(){O("`$s` is not a valid video",J)},!0),te.src=J,te}function Y(J){return J.autoplay=J.hasAttribute("autoplay")&&J.getAttribute("autoplay")!=="false",J.controls=J.hasAttribute("controls")&&J.getAttribute("controls")!=="false",J.getAttribute("loop")==="false"&&J.removeAttribute("loop"),J.getAttribute("preload")==="false"&&(J.preload="none"),J.crossOrigin=J.crossOrigin||"anonymous",J.setAttribute("playsinline",""),J.setAttribute("webkit-playsinline",""),J}},"./src/systems/renderer.js":(S,I,h)=>{var g=h("./src/core/system.js").registerSystem,C=h("./src/utils/index.js"),v=h("./src/lib/three.js"),y=C.debug,E=y("components:renderer:warn");S.exports.System=g("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:C.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:1920},maxCanvasHeight:{default:1920},physicallyCorrectLights:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon"]},precision:{default:"high",oneOf:["high","medium","low"]},sortObjects:{default:!1},colorManagement:{default:!1},gammaOutput:{default:!1},alpha:{default:!0},foveationLevel:{default:1}},init:function(){var _=this.data,m=this.el,w=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),b=m.renderer;b.sortObjects=_.sortObjects,b.physicallyCorrectLights=_.physicallyCorrectLights,b.toneMapping=v[w+"ToneMapping"],(_.colorManagement||_.gammaOutput)&&(b.outputEncoding=v.sRGBEncoding,_.gammaOutput&&E('Property `gammaOutput` is deprecated. Use `renderer="colorManagement: true;"` instead.')),m.hasAttribute("antialias")&&E('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),m.hasAttribute("logarithmicDepthBuffer")&&E('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.')},update:function(){var _=this.data,m=this.el,w=m.renderer,b=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);w.toneMapping=v[b+"ToneMapping"],w.toneMappingExposure=_.exposure,w.xr.setFoveation(_.foveationLevel)},applyColorCorrection:function(_){!this.data.colorManagement||!_||(_.isColor?_.convertSRGBToLinear():_.isTexture&&(_.encoding=v.sRGBEncoding))},setWebXRFrameRate:function(_){var m=this.data,w=_.supportedFrameRates;if(w&&_.updateTargetFrameRate){let b;w.includes(90)?b=m.highRefreshRate?90:72:b=m.highRefreshRate?72:60,_.updateTargetFrameRate(b).catch(function(O){console.warn("failed to set target frame rate of "+b+". Error info: "+O)})}}})},"./src/systems/shadow.js":(S,I,h)=>{var g=h("./src/core/system.js").registerSystem,C=h("./src/lib/three.js"),v={basic:C.BasicShadowMap,pcf:C.PCFShadowMap,pcfsoft:C.PCFSoftShadowMap};S.exports.System=g("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var y=this.sceneEl,E=this.data;this.shadowMapEnabled=!1,y.renderer&&(y.renderer.shadowMap.type=v[E.type],y.renderer.shadowMap.autoUpdate=E.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},update:function(y){y.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.data.enabled)},setShadowMapEnabled:function(y){var E=this.sceneEl.renderer;this.shadowMapEnabled=this.data.enabled&&y,E&&(E.shadowMap.enabled=this.shadowMapEnabled)}})},"./src/systems/tracked-controls-webvr.js":(S,I,h)=>{var g=h("./src/core/system.js").registerSystem,C=h("./src/utils/index.js"),v=C.device.isWebXRAvailable;S.exports.System=g("tracked-controls-webvr",{init:function(){var y=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=C.throttle(this.updateControllerList,500,this),!v&&(!navigator.getVRDisplays||this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(E){E.length&&(y.vrDisplay=E[0])})}))},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var y=this.controllers,E,_,m,w;if(_=navigator.getGamepads&&navigator.getGamepads(),!!_){for(w=y.length,y.length=0,m=0;m<_.length;++m)E=_[m],E&&E.pose&&y.push(E);y.length!==w&&this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/tracked-controls-webxr.js":(S,I,h)=>{var g=h("./src/core/system.js").registerSystem,C=h("./src/utils/index.js");S.exports.System=g("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=C.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var v=this,y=this.el.xrSession;if(!y){this.referenceSpace=void 0,this.controllers=[],this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1));return}var E=v.el.sceneEl.systems.webxr.sessionReferenceSpaceType;y.requestReferenceSpace(E).then(function(_){v.referenceSpace=_}).catch(function(_){throw v.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(E,'tracked-controls-webxr uses reference space "'+E+'".'),_})},updateControllerList:function(){var v=this.el.xrSession,y=this.oldControllers,E;if(!v){if(this.oldControllersLength===0)return;this.oldControllersLength=0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1);return}if(!!v.inputSources){if(this.controllers=v.inputSources,this.oldControllersLength===this.controllers.length){var _=!0;for(E=0;E<this.controllers.length;++E)if(!(this.controllers[E]===y[E]&&this.controllers[E].gamepad===y[E].gamepad)){_=!1;break}if(_)return}for(y.length=0,E=0;E<this.controllers.length;E++)y.push(this.controllers[E]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/webxr.js":(S,I,h)=>{var g=h("./src/core/system.js").registerSystem,C=h("./src/utils/index.js"),v=C.debug("systems:webxr:warn");S.exports.System=g("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var y=this.data;this.sessionConfiguration={requiredFeatures:y.requiredFeatures,optionalFeatures:y.optionalFeatures},this.sessionReferenceSpaceType=y.referenceSpaceType,y.overlayElement&&(y.overlayElement.classList.remove("a-dom-overlay"),y.optionalFeatures.includes("dom-overlay")||(y.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",y)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:y.overlayElement},y.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(y){return!!(y==="viewer"||y==="local"||this.sessionConfiguration.requiredFeatures.includes(y)||this.sessionConfiguration.optionalFeatures.includes(y))},warnIfFeatureNotRequested:function(y,E){if(!this.wasFeatureRequested(y)){var _='Please add the feature "'+y+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`;v((E?E+" ":"")+_)}}})},"./src/utils/bind.js":S=>{S.exports=function(h,g){return function(C){return function(){var y=C.concat(Array.prototype.slice.call(arguments,0));return h.apply(g,y)}}(Array.prototype.slice.call(arguments,2))}},"./src/utils/coordinates.js":(S,I,h)=>{var g=h("./src/utils/debug.js"),C=h("./node_modules/object-assign/index.js"),v=g("utils:coordinates:warn"),y=["x","y","z","w"],E=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;S.exports.regex=E;var _="object",m=/\s+/g;function w(L,P){var Y,J,j,U,te,ue,xe,Ee,V;if(L&&L instanceof Object)return ue=L.x===void 0?P&&P.x:L.x,xe=L.y===void 0?P&&P.y:L.y,Ee=L.z===void 0?P&&P.z:L.z,V=L.w===void 0?P&&P.w:L.w,ue!=null&&(L.x=R(ue)),xe!=null&&(L.y=R(xe)),Ee!=null&&(L.z=R(Ee)),V!=null&&(L.w=R(V)),L;if(L==null)return typeof P===_?C({},P):P;for(Y=L.trim().split(m),te={},U=0;U<y.length;U++)if(j=y[U],Y[U])te[j]=parseFloat(Y[U],10);else{if(J=P&&P[j],J===void 0)continue;te[j]=R(J)}return te}S.exports.parse=w;function b(L){var P;return typeof L!==_?L:(P=L.x+" "+L.y,L.z!=null&&(P+=" "+L.z),L.w!=null&&(P+=" "+L.w),P)}S.exports.stringify=b;function O(L){return E.test(L)}S.exports.isCoordinates=O,S.exports.isCoordinate=function(L){return v("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),O(L)};function R(L){return L!=null&&L.constructor===String?parseFloat(L,10):L}S.exports.toVector3=function(L){return new THREE.Vector3(L.x,L.y,L.z)}},"./src/utils/debug.js":(S,I,h)=>{var g=h("./node_modules/process/browser.js"),C=h("./node_modules/debug/browser.js"),v=h("./node_modules/object-assign/index.js"),y={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},E=function(O){var R=C(O);return R.color=m(O),R};v(E,C);function _(O){var R=O.split(":");return R[R.length-1]}function m(O){var R=_(O),L=y.colors&&y.colors[R];return L||null}function w(){try{return window.localStorage}catch{}}var b=w();b&&(parseInt(b.logs,10)||b.logs==="true")?E.enable("*"):E.enable("*:error,*:info,*:warn"),g.browser&&(window.logs=E),S.exports=E},"./src/utils/device.js":(S,I,h)=>{var g=h("./node_modules/process/browser.js"),C=h("./node_modules/debug/browser.js")("device:error"),v,y=!1,E=!1,_=S.exports.isWebXRAvailable=!window.debug&&navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(Ee){var V;_||(V=document.createElement("canvas"),v=Ee.display,V.getContext("webgl",{}),v.requestPresent([{source:V}]).then(function(){},function(){}))}),_){var m=function(){var Ee=document.querySelector("a-scene");if(!Ee){window.addEventListener("DOMContentLoaded",m);return}Ee.hasLoaded?Ee.components["vr-mode-ui"].updateEnterInterfaces():Ee.addEventListener("loaded",m)},w=function(Ee){C("WebXR session support error: "+Ee.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(Ee){y=Ee,m()}).catch(w),navigator.xr.isSessionSupported("immersive-ar").then(function(Ee){E=Ee,m()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){y=!0,m()}).catch(w),navigator.xr.supportsSession("immersive-ar").then(function(){E=!0,m()}).catch(function(){})):C("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(Ee){var V=document.querySelector("a-scene");v=Ee.length&&Ee[0],V&&V.emit("displayconnected",{vrDisplay:v})});function b(){return v}S.exports.getVRDisplay=b;function O(){return y||E||!!b()}S.exports.checkHeadsetConnected=O;function R(){return E}S.exports.checkARSupport=R;function L(){return y}S.exports.checkVRSupport=L;var P=function(){var Ee=!1;return function(V){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(V)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(V.substr(0,4)))&&(Ee=!0),(J()||Y()||xe())&&(Ee=!0),ue()&&(Ee=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return Ee}}();S.exports.isMobile=P;function Y(Ee){var V=Ee||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(V)}S.exports.isTablet=Y;function J(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}S.exports.isIOS=J;function j(){return!P()&&!ue()&&window.orientation!==void 0}S.exports.isMobileDeviceRequestingDesktopSite=j;function U(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}S.exports.isOculusBrowser=U;function te(){return/(Mobile VR)/i.test(window.navigator.userAgent)}S.exports.isFirefoxReality=te;function ue(){return U()||te()}S.exports.isMobileVR=ue;function xe(){return/R7 Build/.test(window.navigator.userAgent)}S.exports.isR7=xe,S.exports.isLandscape=function(){var Ee=window.orientation;return xe()&&(Ee+=90),Ee===90||Ee===-90},S.exports.isBrowserEnvironment=!!(!g||g.browser),S.exports.isNodeEnvironment=!S.exports.isBrowserEnvironment},"./src/utils/entity.js":S=>{var I={};function h(g,C){return C=C||".",I[C]||(I[C]={}),g.indexOf(C)!==-1?I[C][g]=g.split(C):I[C][g]=g,I[C][g]}S.exports.getComponentPropertyPath=h,S.exports.propertyPathCache=I,S.exports.getComponentProperty=function(g,C,v){var y;return v=v||".",C.indexOf(v)!==-1?(y=h(C,v),y.constructor===String?g.getAttribute(y):g.getAttribute(y[0])[y[1]]):g.getAttribute(C)},S.exports.setComponentProperty=function(g,C,v,y){var E;if(y=y||".",C.indexOf(y)!==-1){E=h(C,y),E.constructor===String?g.setAttribute(E,v):g.setAttribute(E[0],E[1],v);return}g.setAttribute(C,v)}},"./src/utils/forceCanvasResizeSafariMobile.js":S=>{S.exports=function(h){var g=h.style.width,C=h.style.height;h.style.width=parseInt(g,10)+1+"px",h.style.height=parseInt(C,10)+1+"px",setTimeout(function(){h.style.width=g,h.style.height=C},200)}},"./src/utils/index.js":(S,I,h)=>{var g=h("./src/utils/debug.js"),C=h("./node_modules/deep-assign/index.js"),v=h("./src/utils/device.js"),y=h("./node_modules/object-assign/index.js"),E=h("./src/utils/object-pool.js"),_=g("utils:warn");S.exports.bind=h("./src/utils/bind.js"),S.exports.coordinates=h("./src/utils/coordinates.js"),S.exports.debug=g,S.exports.device=v,S.exports.entity=h("./src/utils/entity.js"),S.exports.forceCanvasResizeSafariMobile=h("./src/utils/forceCanvasResizeSafariMobile.js"),S.exports.isIE11=h("./src/utils/is-ie11.js"),S.exports.material=h("./src/utils/material.js"),S.exports.objectPool=E,S.exports.split=h("./src/utils/split.js").split,S.exports.styleParser=h("./src/utils/styleParser.js"),S.exports.trackedControls=h("./src/utils/tracked-controls.js"),S.exports.checkHeadsetConnected=function(){return _("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),v.checkHeadsetConnected(arguments)},S.exports.isGearVR=S.exports.device.isGearVR=function(){_("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},S.exports.isIOS=function(){return _("`utils.isIOS` has moved to `utils.device.isIOS`"),v.isIOS(arguments)},S.exports.isOculusGo=S.exports.device.isOculusGo=function(){_("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},S.exports.isMobile=function(){return _("`utils.isMobile has moved to `utils.device.isMobile`"),v.isMobile(arguments)},S.exports.throttle=function(w,b,O){var R;return O&&(w=S.exports.bind(w,O)),function(){var L=Date.now(),P=typeof R>"u"?b:L-R;(typeof R>"u"||P>=b)&&(R=L,w.apply(null,arguments))}},S.exports.throttleLeadingAndTrailing=function(w,b,O){var R,L;return O&&(w=S.exports.bind(w,O)),function(){var P=Date.now(),Y=typeof R>"u"?b:P-R,J=arguments;typeof R>"u"||Y>=b?(clearTimeout(L),R=P,w.apply(null,J)):(clearTimeout(L),L=setTimeout(function(){R=Date.now(),w.apply(this,J)},b-Y))}},S.exports.throttleTick=function(w,b,O){var R;return O&&(w=S.exports.bind(w,O)),function(L,P){var Y=typeof R>"u"?P:L-R;(typeof R>"u"||Y>=b)&&(R=L,w(L,Y))}},S.exports.debounce=function(w,b,O){var R;return function(){var L=this,P=arguments,Y=function(){R=null,O||w.apply(L,P)},J=O&&!R;clearTimeout(R),R=setTimeout(Y,b),J&&w.apply(L,P)}},S.exports.extend=y,S.exports.extendDeep=C,S.exports.clone=function(w){return JSON.parse(JSON.stringify(w))};var m=function(){var w=E.createPool(function(){return[]});return function(b,O){var R,L,P,Y,J,j;if(b===void 0||O===void 0||b===null||O===null||!(b&&O&&b.constructor===Object&&O.constructor===Object||b.constructor===Array&&O.constructor===Array))return b===O;L=w.use(),P=w.use(),L.length=0,P.length=0;for(R in b)L.push(R);for(R in O)P.push(R);if(L.length!==P.length)return w.recycle(L),w.recycle(P),!1;for(Y=0;Y<L.length;++Y)if(J=b[L[Y]],j=O[L[Y]],typeof J=="object"||typeof j=="object"||Array.isArray(J)&&Array.isArray(j)){if(J===j)continue;if(!m(J,j))return w.recycle(L),w.recycle(P),!1}else if(J!==j)return w.recycle(L),w.recycle(P),!1;return w.recycle(L),w.recycle(P),!0}}();S.exports.deepEqual=m,S.exports.diff=function(){var w=[];return function(b,O,R){var L,P,Y,J,j,U,te;J=R||{},w.length=0;for(j in b)w.push(j);if(!O)return J;for(Y in O)w.indexOf(Y)===-1&&w.push(Y);for(U=0;U<w.length;U++)j=w[U],L=b[j],P=O[j],te=L&&P&&L.constructor===Object&&P.constructor===Object,(te&&!m(L,P)||!te&&L!==P)&&(J[j]=P);return J}}(),S.exports.shouldCaptureKeyEvent=function(w){return w.metaKey?!1:document.activeElement===document.body},S.exports.splitString=function(w,b){typeof b>"u"&&(b=" ");var O=new RegExp(b,"g");return w=(w||"").replace(O,b),w.split(b)},S.exports.getElData=function(w,b){b=b||{};var O={};Object.keys(b).forEach(R);function R(L){w.hasAttribute(L)&&(O[L]=w.getAttribute(L))}return O},S.exports.getUrlParameter=function(w){w=w.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+w+"=([^&#]*)"),O=b.exec(location.search);return O===null?"":decodeURIComponent(O[1].replace(/\+/g," "))},S.exports.isIframed=function(){return window.top!==window.self},S.exports.findAllScenes=function(w){for(var b=[],O=w.getElementsByTagName("*"),R=0,L=O.length;R<L;R++)O[R].isScene&&b.push(O[R]);return b},S.exports.srcLoader=h("./src/utils/src-loader.js")},"./src/utils/ios-orientationchange-blank-bug.js":()=>{window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},"./src/utils/is-ie11.js":S=>{function I(){var h=-1,g=navigator.userAgent,C;return navigator.appName==="Microsoft Internet Explorer"?(C=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),C.exec(g)!=null&&(h=parseFloat(RegExp.$1))):navigator.appName==="Netscape"&&(C=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),C.exec(g)!=null&&(h=parseFloat(RegExp.$1))),h}S.exports=I()===11},"./src/utils/isIOSOlderThan10.js":S=>{S.exports=function(h){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(h)}},"./src/utils/material.js":(S,I,h)=>{var g=h("./src/lib/three.js"),C=["application/x-mpegurl","application/vnd.apple.mpegurl"],v=new Set(["emissiveMap","envMap","map","specularMap"]);function y(_,m){var w=m.offset||{x:0,y:0},b=m.repeat||{x:1,y:1},O=m.npot||!1;O&&(_.wrapS=g.ClampToEdgeWrapping,_.wrapT=g.ClampToEdgeWrapping,_.magFilter=g.LinearFilter,_.minFilter=g.LinearFilter),(b.x!==1||b.y!==1)&&(_.wrapS=g.RepeatWrapping,_.wrapT=g.RepeatWrapping,_.repeat.set(b.x,b.y)),(w.x!==0||w.y!==0)&&_.offset.set(w.x,w.y)}S.exports.setTextureProperties=y,S.exports.updateMapMaterialFromData=function(_,m,w,b){var O=w.el,R=w.material,L=O.sceneEl.systems.renderer,P=b[m];if(w.materialSrcs||(w.materialSrcs={}),!P){delete w.materialSrcs[_],J(null);return}if(P===w.materialSrcs[_]&&R[_]){y(R[_],b);return}w.materialSrcs[_]=P,P instanceof g.Texture?J(P):O.sceneEl.systems.material.loadTexture(P,{src:P,repeat:b.repeat,offset:b.offset,npot:b.npot},Y);function Y(j){w.materialSrcs[_]===P&&J(j)}function J(j){R[_]=j,j&&v.has(_)&&L.applyColorCorrection(j),R.needsUpdate=!0,E(O,j)}},S.exports.updateMap=function(_,m){return S.exports.updateMapMaterialFromData("map","src",_,m)},S.exports.updateDistortionMap=function(_,m,w){var b=_;_==="ambientOcclusion"&&(b="ao");var O=m.el,R=m.material,L=O.sceneEl.systems.renderer,P=w[_+"Map"],Y={};if(Y.src=P,Y.offset=w[_+"TextureOffset"],Y.repeat=w[_+"TextureRepeat"],Y.wrap=w[_+"TextureWrap"],P){if(P===m[_+"TextureSrc"])return;m[_+"TextureSrc"]=P,O.sceneEl.systems.material.loadTexture(P,Y,J);return}if(!R.map)return;J(null);function J(j){var U=b+"Map";R[U]=j,j&&v.has(U)&&L.applyColorCorrection(j),j&&y(j,w),R.needsUpdate=!0,E(O,j)}};function E(_,m){!m||(_.emit("materialtextureloaded",{src:m.image,texture:m}),!(!m.image||m.image.tagName!=="VIDEO")&&(m.image.addEventListener("loadeddata",function(){!_.components||!_.components.material||(m.needsCorrectionBGRA&&m.needsCorrectionFlipY&&["standard","flat"].indexOf(_.components.material.data.shader)!==-1&&_.setAttribute("material","shader","ios10hls"),_.emit("materialvideoloadeddata",{src:m.image,texture:m}))}),m.image.addEventListener("ended",function(){_.emit("materialvideoended",{src:m.image,texture:m})})))}S.exports.handleTextureEvents=E,S.exports.isHLS=function(_,m){return!!(m&&C.includes(m.toLowerCase())||_&&_.toLowerCase().indexOf(".m3u8")>0)}},"./src/utils/math.js":S=>{function I(g,C,v){var y=C.dot(g);return(y-C.dot(v))/C.length()}function h(g,C,v,y){var E=I(g,C,v);return y.copy(C),y.multiplyScalar(E),y.add(v),y}S.exports.distanceOfPointFromPlane=I,S.exports.nearestPointInPlane=h},"./src/utils/object-pool.js":S=>{var I=Object.freeze(Object.create(null));function h(){return{}}S.exports.createPool=function(y){var E=[],_=null;y=y||h;function m(){var R;return(_===null||_===E.length)&&b(E.length||5),R=E[_],E[_++]=I,g(R),R}function w(R){if(R instanceof Object){if(_===null||_===-1){E[E.length]=R;return}E[--_]=R}}function b(R){var L,P;if(R=R===void 0?E.length:R,R>0&&_==null&&(_=0),R>0)for(L=E.length,E.length+=Number(R),P=L;P<E.length;P++)E[P]=y();return E.length}function O(){return E.length}return{grow:b,pool:E,recycle:w,size:O,use:m}};function g(v){var y;if(!(!v||v.constructor!==Object))for(y in v)v[y]=void 0}S.exports.clearObject=g;function C(v,y){var E;if(!(!v||v.constructor!==Object))for(E in v)E in y||delete v[E]}S.exports.removeUnusedKeys=C},"./src/utils/split.js":S=>{S.exports.split=function(){var I={};return function(h,g){return g in I||(I[g]={}),h in I[g]||(I[g][h]=h.split(g)),I[g][h]}}()},"./src/utils/src-loader.js":(S,I,h)=>{var g=h("./src/utils/debug.js"),C=g("utils:src-loader:warn");function v(b,O,R){_(b,function(P){if(P){O(b);return}R(b)})}function y(b,O){var R,L="",P,Y,J=[];for(P=0;P<5;P++)L+="(url\\((?:[^\\)]+)\\),\\s*)";L+="(url\\((?:[^\\)]+)\\)\\s*)",Y=b.match(new RegExp(L));function j(U){J.push(U),J.length===6&&O(J)}if(Y){for(P=1;P<7;P++)v(E(Y[P]),j);return}if(R=w(b),!!R){if(R.tagName==="A-CUBEMAP"&&R.srcs)return O(R.srcs);C('Selector "%s" does not point to <a-cubemap>',b)}}function E(b){var O=b.match(/\url\((.+)\)/);if(!!O)return O[1]}function _(b,O){var R;if(b.tagName){O(b.tagName==="IMG");return}R=new XMLHttpRequest,R.open("HEAD",b),R.addEventListener("load",function(L){var P;R.status>=200&&R.status<300?(P=R.getResponseHeader("Content-Type"),P==null?m(b,O):P.startsWith("image")?O(!0):O(!1)):m(b,O),R.abort()}),R.send()}function m(b,O){var R=new Image;R.addEventListener("load",L);function L(){O(!0)}R.addEventListener("error",P);function P(){O(!1)}R.src=b}function w(b){try{var O=document.querySelector(b);return O||C('No element was found matching the selector: "%s"',b),O}catch{C('"%s" is not a valid selector',b);return}}S.exports={parseUrl:E,validateSrc:v,validateCubemapSrc:y}},"./src/utils/styleParser.js":S=>{var I=/-([a-z])/g;S.exports.parse=function(_,m){var w;return typeof _!="string"||(w=v(_,m),w[""])?_:g(w)},S.exports.stringify=function(_){return typeof _=="string"?_:y(_)};function h(_){return _.replace(I,E)}S.exports.toCamelCase=h;function g(_){var m,w;for(w in _)m=h(w),w!==m&&(_[m]=_[w],delete _[w]);return _}S.exports.transformKeysToCamelCase=g;var C=function(){var _=[],m=/url\([^)]+$/;return function(b){var O="",R,L=0,P=";";for(_.length=0;L<b.length;){if(R=b.indexOf(P,L),R===-1&&(R=b.length),O+=b.substring(L,R),m.test(O)){O+=";",L=R+1;continue}_.push(O.trim()),O="",L=R+1}return _}}();function v(_,m){var w,b,O,R,L,P;for(m=m||{},w=C(_),b=0;b<w.length;b++)O=w[b],O&&(R=O.indexOf(":"),L=O.substr(0,R).trim(),P=O.substr(R+1).trim(),m[L]=P);return m}function y(_){var m,w=0,b=0,O="";for(m in _)w++;for(m in _)O+=m+": "+_[m],b<w-1&&(O+="; "),b++;return O}function E(_){return _[1].toUpperCase()}},"./src/utils/tracked-controls.js":(S,I,h)=>{var g=h("./src/constants/index.js").DEFAULT_HANDEDNESS,C=["x","y","z","w"],v=2;S.exports.checkControllerPresentAndSetup=function(w,b,O){var R=w.el,L,P=R.sceneEl.hasWebXR,Y=P?E:y,J;if(L=Y(w,b,O),J=!!L,w.controllerPresent&&!w.controllerEventsActive&&!P&&w.addEventListeners(),J===w.controllerPresent)return J;w.controllerPresent=J,J?(w.addEventListeners(),w.injectTrackedControls(L),R.emit("controllerconnected",{name:w.name,component:w})):(w.removeEventListeners(),R.emit("controllerdisconnected",{name:w.name,component:w}))};function y(w,b,O){var R,L=w.el.sceneEl,P,Y=O.index||0;return!b||(P=L&&L.systems["tracked-controls-webvr"],!P)||(R=P.controllers,!R.length)?!1:!!_(R,null,b,O.hand,Y)}function E(w,b,O){var R,L=w.el.sceneEl,P=L&&L.systems["tracked-controls-webxr"];return!P||(R=P.controllers,!R||!R.length)?!1:m(R,b,O.hand,O.index,O.iterateControllerProfiles,O.handTracking)}S.exports.isControllerPresentWebVR=y,S.exports.isControllerPresentWebXR=E;function _(w,b,O,R,L){var P,Y,J=0,j=L>=0?L:0;for(Y=0;Y<w.length;Y++)if(P=w[Y],!(O&&!P.id.startsWith(O))&&!(!O&&P.id!==b)&&!(R&&P.hand&&R!==P.hand)){if(R&&!P.hand)j=v*L+(R===g?0:1);else return P;if(J===j)return P;++J}}function m(w,b,O,R,L,P){var Y,J,j,U=!1,te,ue;for(Y=0;Y<w.length;Y++){if(j=w[Y],ue=j.profiles,P)U=j.hand;else if(L)for(J=0;J<ue.length&&(U=ue[J].startsWith(b),!U);J++);else U=ue.length>0&&ue[0].startsWith(b);if(!!U){if(te=j.handedness==="right"||j.handedness==="left",te){if(j.handedness===O)return w[Y]}else if(Y===R)return w[Y]}}}S.exports.findMatchingControllerWebVR=_,S.exports.findMatchingControllerWebXR=m,S.exports.emitIfAxesChanged=function(w,b,O){var R,L,P,Y,J;for(L in b){for(R=b[L],P=!1,J=0;J<R.length;J++)O.detail.changed[R[J]]&&(P=!0);if(!!P){for(Y={},J=0;J<R.length;J++)Y[C[J]]=O.detail.axis[R[J]];w.el.emit(L+"moved",Y)}}},S.exports.onButtonEvent=function(w,b,O,R){var L=R?O.mapping[R]:O.mapping,P=L.buttons[w];O.el.emit(P+b),O.updateModel&&O.updateModel(P,b)}},"./vendor/DeviceOrientationControls.js":()=>{THREE.DeviceOrientationControls=function(S){var I=this;this.object=S,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var h=function(v){I.deviceOrientation=v},g=function(){I.screenOrientation=window.orientation||0},C=function(){var v=new THREE.Vector3(0,0,1),y=new THREE.Euler,E=new THREE.Quaternion,_=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(m,w,b,O,R){y.set(b,w,-O,"YXZ"),m.setFromEuler(y),m.multiply(_),m.multiply(E.setFromAxisAngle(v,-R))}}();this.connect=function(){g(),window.addEventListener("orientationchange",g,!1),window.addEventListener("deviceorientation",h,!1),I.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",g,!1),window.removeEventListener("deviceorientation",h,!1),I.enabled=!1},this.update=function(){if(I.enabled!==!1){var v=I.deviceOrientation;if(v){var y=v.alpha?THREE.MathUtils.degToRad(v.alpha)+I.alphaOffset:0,E=v.beta?THREE.MathUtils.degToRad(v.beta):0,_=v.gamma?THREE.MathUtils.degToRad(v.gamma):0,m=I.screenOrientation?THREE.MathUtils.degToRad(I.screenOrientation):0;C(I.object.quaternion,y,E,_,m)}}},this.dispose=function(){I.disconnect()},this.connect()}},"./vendor/rStats.extras.js":S=>{window.glStats=function(){var I=null,h=0,g=0,C=0,v=0,y=0,E=0,_=0;function m(J,j){return function(){j.apply(this,arguments),J.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=m(WebGLRenderingContext.prototype.drawArrays,function(){h++,arguments[0]==this.POINTS?E+=arguments[2]:y+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=m(WebGLRenderingContext.prototype.drawElements,function(){g++,v+=arguments[1]/3,y+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=m(WebGLRenderingContext.prototype.useProgram,function(){C++}),WebGLRenderingContext.prototype.bindTexture=m(WebGLRenderingContext.prototype.bindTexture,function(){_++});var w={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},b=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],O=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function R(){I("allcalls").set(h+g),I("drawElements").set(g),I("drawArrays").set(h),I("bindTexture").set(_),I("useProgram").set(C),I("glfaces").set(v),I("glvertices").set(y),I("glpoints").set(E)}function L(){h=0,g=0,C=0,v=0,y=0,E=0,_=0}function P(){}function Y(J){I=J}return{update:R,start:L,end:P,attach:Y,values:w,groups:b,fractions:O}},window.threeStats=function(I){var h=null,g={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},C=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],v=[];function y(){h("renderer.info.memory.geometries").set(I.info.memory.geometries),h("renderer.info.programs").set(I.info.programs.length),h("renderer.info.memory.textures").set(I.info.memory.textures),h("renderer.info.render.calls").set(I.info.render.calls),h("renderer.info.render.triangles").set(I.info.render.triangles),h("renderer.info.render.points").set(I.info.render.points)}function E(){}function _(){}function m(w){h=w}return{update:y,start:E,end:_,attach:m,values:g,groups:C,fractions:v}},window.BrowserStats=function(){var I=null,h=0,g=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var C={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},v=[{caption:"Browser",values:["memory","total"]}],y=[{base:"total",steps:["memory"]}],E=Math.log(1024);function _(R){var L=100,P=Math.floor(Math.log(R)/E);return Math.round(R*L/Math.pow(1024,P))/L}function m(){h=_(performance.memory.usedJSHeapSize),g=_(performance.memory.totalJSHeapSize),I("memory").set(h),I("total").set(g)}function w(){h=0}function b(){}function O(R){I=R}return{update:m,start:w,end:b,attach:O,values:C,groups:v,fractions:y}},S.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},"./vendor/rStats.js":S=>{(function(){"performance"in window||(window.performance={});var I=window.performance;if(!("now"in I)){var h=Date.now();I.timing&&I.timing.navigationStart&&(h=I.timing.navigationStart),I.now=function(){return Date.now()-h}}I.mark||(I.mark=function(){}),I.measure||(I.measure=function(){})})(),window.rStats=function(h){function g(ue,xe){for(var Ee=Object.keys(ue),V=0,q=Ee.length;V<q;V++)xe(Ee[V])}function C(ue){var xe=document.createElement("link");xe.href=ue,xe.rel="stylesheet",xe.type="text/css",document.getElementsByTagName("head")[0].appendChild(xe)}var v=h||{},y=v.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],E="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",_=(v.CSSPath?v.CSSPath:"")+"rStats.css",m=v.css||[E,_];m.forEach(function(ue){C(ue)}),v.values||(v.values={});var w,b,O=10,R=200,L={};function P(ue,xe,Ee){var V=Ee||{},q=document.createElement("canvas"),Q=q.getContext("2d"),F=0,z=0,X=V.color?V.color:"#666666",fe=document.createElement("canvas"),Ae=fe.getContext("2d");fe.width=1,fe.height=2*O,Ae.fillStyle="#444444",Ae.fillRect(0,0,1,2*O),Ae.fillStyle=X,Ae.fillRect(0,O,1,O),Ae.fillStyle="#ffffff",Ae.globalAlpha=.5,Ae.fillRect(0,O,1,1),Ae.globalAlpha=1;var Se=document.createElement("canvas"),Be=Se.getContext("2d");Se.width=1,Se.height=2*O,Be.fillStyle="#444444",Be.fillRect(0,0,1,2*O),Be.fillStyle="#b70000",Be.fillRect(0,O,1,O),Be.globalAlpha=.5,Be.fillStyle="#ffffff",Be.fillRect(0,O,1,1),Be.globalAlpha=1;function Ge(){q.width=R,q.height=O,q.style.width=q.width+"px",q.style.height=q.height+"px",q.className="rs-canvas",ue.appendChild(q),Q.fillStyle="#444444",Q.fillRect(0,0,q.width,q.height)}function ht(xt,at){z+=(xt-z)*.1,F*=.99,z>F&&(F=z),Q.drawImage(q,1,0,q.width-1,q.height,0,0,q.width-1,q.height),at?Q.drawImage(Se,q.width-1,q.height-z*q.height/F-O):Q.drawImage(fe,q.width-1,q.height-z*q.height/F-O)}return Ge(),{draw:ht}}function Y(ue,xe){var Ee=document.createElement("canvas"),V=Ee.getContext("2d");function q(){Ee.width=R,Ee.height=O*xe,Ee.style.width=Ee.width+"px",Ee.style.height=Ee.height+"px",Ee.className="rs-canvas",ue.appendChild(Ee),V.fillStyle="#444444",V.fillRect(0,0,Ee.width,Ee.height)}function Q(F){V.drawImage(Ee,1,0,Ee.width-1,Ee.height,0,0,Ee.width-1,Ee.height);var z=0;g(F,function(X){var fe=F[X]*Ee.height;V.fillStyle=y[X],V.fillRect(Ee.width-1,z,1,fe),z+=fe})}return q(),{draw:Q}}function J(ue,xe){var Ee=ue,V,q=0,Q=0,F=0,z=0,X=performance.now(),fe=0,Ae=document.createElement("div"),Se=document.createElement("span"),Be=document.createElement("div"),Ge=document.createTextNode(""),ht=v?v.values[Ee.toLowerCase()]:null,xt=new P(Ae,Ee,ht),at=!1;Se.className="rs-counter-id",Se.textContent=ht&&ht.caption?ht.caption:Ee,Be.className="rs-counter-value",Be.appendChild(Ge),Ae.appendChild(Se),Ae.appendChild(Be),xe?xe.div.appendChild(Ae):b.appendChild(Ae),V=performance.now();function Gt(Bt){if(ht&&ht.average){z+=Bt,fe++;var Pt=performance.now();Pt-X>=(ht.avgMs||1e3)&&(F=z/fe,z=0,X=Pt,fe=0)}}function wt(){V=performance.now(),v.userTimingAPI&&performance.mark(Ee+"-start"),at=!0}function Yt(){q=performance.now()-V,v.userTimingAPI&&(performance.mark(Ee+"-end"),at&&performance.measure(Ee,Ee+"-start",Ee+"-end")),Gt(q)}function Mn(){Yt(),wt()}function je(){var Bt=ht&&ht.average?F:q;Ge.nodeValue=Math.round(Bt*100)/100;var Pt=ht&&(ht.below&&q<ht.below||ht.over&&q>ht.over);xt.draw(q,Pt),Ae.className=Pt?"rs-counter-base alarm":"rs-counter-base"}function rt(){var Bt=performance.now(),Pt=Bt-V;Q++,Pt>1e3&&(ht&&ht.interpolate===!1?q=Q:q=Q*1e3/Pt,Q=0,V=Bt,Gt(q))}function At(Bt){q=Bt,Gt(q)}return{set:At,start:wt,tick:Mn,end:Yt,frame:rt,value:function(){return q},draw:je}}function j(ue){var xe=ue.toLowerCase();if(xe===void 0&&(xe="default"),L[xe])return L[xe];var Ee=null;v&&v.groups&&g(v.groups,function(q){var Q=v.groups[parseInt(q,10)];!Ee&&Q.values.indexOf(xe.toLowerCase())!==-1&&(Ee=Q)});var V=new J(xe,Ee);return L[xe]=V,V}function U(){if(v.plugins){v.values||(v.values={}),v.groups||(v.groups=[]),v.fractions||(v.fractions=[]);for(var ue=0;ue<v.plugins.length;ue++)v.plugins[ue].attach(j),g(v.plugins[ue].values,function(xe){v.values[xe]=v.plugins[ue].values[xe]}),v.groups=v.groups.concat(v.plugins[ue].groups),v.fractions=v.fractions.concat(v.plugins[ue].fractions)}else v.plugins={};w=document.createElement("div"),w.className="rs-base",b=document.createElement("div"),b.className="rs-container",b.style.height="auto",w.appendChild(b),document.body.appendChild(w),v&&(v.groups&&g(v.groups,function(xe){var Ee=v.groups[parseInt(xe,10)],V=document.createElement("div");V.className="rs-group",Ee.div=V;var q=document.createElement("h1");q.textContent=Ee.caption,q.addEventListener("click",function(Q){this.classList.toggle("hidden"),Q.preventDefault()}.bind(V)),b.appendChild(q),b.appendChild(V)}),v.fractions&&g(v.fractions,function(xe){var Ee=v.fractions[parseInt(xe,10)],V=document.createElement("div");V.className="rs-fraction";var q=document.createElement("div");q.className="rs-legend";var Q=0;g(v.fractions[xe].steps,function(z){var X=document.createElement("p");X.textContent=v.fractions[xe].steps[z],X.style.color=y[Q],q.appendChild(X),Q++}),V.appendChild(q),V.style.height=Q*O+"px",Ee.div=V;var F=new Y(V,Q);Ee.graph=F,b.appendChild(V)}))}function te(){g(v.plugins,function(ue){v.plugins[ue].update()}),g(L,function(ue){L[ue].draw()}),v&&v.fractions&&g(v.fractions,function(ue){var xe=v.fractions[parseInt(ue,10)],Ee=[],V=L[xe.base.toLowerCase()];V&&(V=V.value(),g(v.fractions[ue].steps,function(q){var Q=v.fractions[ue].steps[parseInt(q,10)].toLowerCase(),F=L[Q];F&&Ee.push(F.value()/V)})),xe.graph.draw(Ee)})}return U(),function(ue){return ue?j(ue):{element:w,update:te}}},S.exports=window.rStats},"./vendor/starts-with-polyfill.js":()=>{String.prototype.startsWith||(String.prototype.startsWith=function(S,I){return I=I||0,this.substr(I,S.length)===S})},"./vendor/wakelock/util.js":S=>{var I={};I.base64=function(h,g){return"data:"+h+";base64,"+g},I.isMobile=function(){var h=!1;return function(g){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(g)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(g.substr(0,4)))&&(h=!0)}(navigator.userAgent||navigator.vendor||window.opera),h},I.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},I.isIFrame=function(){try{return window.self!==window.top}catch{return!0}},I.appendQueryParameter=function(h,g,C){var v=h.indexOf("?")<0?"?":"&";return h+=v+g+"="+C,h},I.getQueryParameter=function(h){h=h.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var g=new RegExp("[\\?&]"+h+"=([^&#]*)"),C=g.exec(location.search);return C===null?"":decodeURIComponent(C[1].replace(/\+/g," "))},I.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90},S.exports=I},"./vendor/wakelock/wakelock.js":(S,I,h)=>{var g=h("./vendor/wakelock/util.js");function C(){var E=document.createElement("video");E.addEventListener("ended",function(){E.play()}),this.request=function(){E.paused&&(E.src=g.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),E.play())},this.release=function(){E.pause(),E.src=""}}function v(){var E=null;this.request=function(){E||(E=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){E&&(clearInterval(E),E=null)}}function y(){var E=navigator.userAgent||navigator.vendor||window.opera;return E.match(/iPhone/i)||E.match(/iPod/i)?v:C}S.exports=y()},"./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css":(S,I,h)=>{h.r(I),h.d(I,{default:()=>te});var g=h("./node_modules/css-loader/dist/runtime/sourceMaps.js"),C=h.n(g),v=h("./node_modules/css-loader/dist/runtime/api.js"),y=h.n(v),E=h("./node_modules/css-loader/dist/runtime/getUrl.js"),_=h.n(E),m=new URL(h("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),h.b),w=new URL(h("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),h.b),b=new URL(h("data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"),h.b),O=new URL(h("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"),h.b),R=new URL(h("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"),h.b),L=y()(C()),P=_()(m),Y=_()(w),J=_()(b),j=_()(O),U=_()(R);L.push([S.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar {
  right: 80px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(`+P+`) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(`+Y+`) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(`+J+`);
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  margin-right: 10px;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}


.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(`+j+`) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(`+U+`) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;;AAGA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar {
  right: 80px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  margin-right: 10px;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}


.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const te=L},"./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css":(S,I,h)=>{h.r(I),h.d(I,{default:()=>_});var g=h("./node_modules/css-loader/dist/runtime/sourceMaps.js"),C=h.n(g),v=h("./node_modules/css-loader/dist/runtime/api.js"),y=h.n(v),E=y()(C());E.push([S.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const _=E},"./src/style/aframe.css":(S,I,h)=>{h.r(I),h.d(I,{default:()=>J});var g=h("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),C=h.n(g),v=h("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),y=h.n(v),E=h("./node_modules/style-loader/dist/runtime/insertBySelector.js"),_=h.n(E),m=h("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),w=h.n(m),b=h("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),O=h.n(b),R=h("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),L=h.n(R),P=h("./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css"),Y={};Y.styleTagTransform=L(),Y.setAttributes=w(),Y.insert=_().bind(null,"head"),Y.domAPI=y(),Y.insertStyleElement=O(),C()(P.default,Y);const J=P.default&&P.default.locals?P.default.locals:void 0},"./src/style/rStats.css":(S,I,h)=>{h.r(I),h.d(I,{default:()=>J});var g=h("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),C=h.n(g),v=h("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),y=h.n(v),E=h("./node_modules/style-loader/dist/runtime/insertBySelector.js"),_=h.n(E),m=h("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),w=h.n(m),b=h("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),O=h.n(b),R=h("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),L=h.n(R),P=h("./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css"),Y={};Y.styleTagTransform=L(),Y.setAttributes=w(),Y.insert=_().bind(null,"head"),Y.domAPI=y(),Y.insertStyleElement=O(),C()(P.default,Y);const J=P.default&&P.default.locals?P.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":S=>{var I=[];function h(v){for(var y=-1,E=0;E<I.length;E++)if(I[E].identifier===v){y=E;break}return y}function g(v,y){for(var E={},_=[],m=0;m<v.length;m++){var w=v[m],b=y.base?w[0]+y.base:w[0],O=E[b]||0,R="".concat(b," ").concat(O);E[b]=O+1;var L=h(R),P={css:w[1],media:w[2],sourceMap:w[3],supports:w[4],layer:w[5]};if(L!==-1)I[L].references++,I[L].updater(P);else{var Y=C(P,y);y.byIndex=m,I.splice(m,0,{identifier:R,updater:Y,references:1})}_.push(R)}return _}function C(v,y){var E=y.domAPI(y);E.update(v);var _=function(w){if(w){if(w.css===v.css&&w.media===v.media&&w.sourceMap===v.sourceMap&&w.supports===v.supports&&w.layer===v.layer)return;E.update(v=w)}else E.remove()};return _}S.exports=function(v,y){y=y||{},v=v||[];var E=g(v,y);return function(m){m=m||[];for(var w=0;w<E.length;w++){var b=E[w],O=h(b);I[O].references--}for(var R=g(m,y),L=0;L<E.length;L++){var P=E[L],Y=h(P);I[Y].references===0&&(I[Y].updater(),I.splice(Y,1))}E=R}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":S=>{var I={};function h(C){if(typeof I[C]>"u"){var v=document.querySelector(C);if(window.HTMLIFrameElement&&v instanceof window.HTMLIFrameElement)try{v=v.contentDocument.head}catch{v=null}I[C]=v}return I[C]}function g(C,v){var y=h(C);if(!y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");y.appendChild(v)}S.exports=g},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":S=>{function I(h){var g=document.createElement("style");return h.setAttributes(g,h.attributes),h.insert(g,h.options),g}S.exports=I},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(S,I,h)=>{function g(C){var v=h.nc;v&&C.setAttribute("nonce",v)}S.exports=g},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":S=>{function I(C,v,y){var E="";y.supports&&(E+="@supports (".concat(y.supports,") {")),y.media&&(E+="@media ".concat(y.media," {"));var _=typeof y.layer<"u";_&&(E+="@layer".concat(y.layer.length>0?" ".concat(y.layer):""," {")),E+=y.css,_&&(E+="}"),y.media&&(E+="}"),y.supports&&(E+="}");var m=y.sourceMap;m&&typeof btoa<"u"&&(E+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(m))))," */")),v.styleTagTransform(E,C,v.options)}function h(C){if(C.parentNode===null)return!1;C.parentNode.removeChild(C)}function g(C){if(typeof document>"u")return{update:function(){},remove:function(){}};var v=C.insertStyleElement(C);return{update:function(E){I(v,C,E)},remove:function(){h(v)}}}S.exports=g},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":S=>{function I(h,g){if(g.styleSheet)g.styleSheet.cssText=h;else{for(;g.firstChild;)g.removeChild(g.firstChild);g.appendChild(document.createTextNode(h))}}S.exports=I},"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E":S=>{S.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":S=>{S.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":S=>{S.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E":S=>{S.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E":S=>{S.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"},"./node_modules/super-three/build/three.module.js":(S,I,h)=>{h.r(I),h.d(I,{ACESFilmicToneMapping:()=>zt,AddEquation:()=>Ee,AddOperation:()=>dn,AdditiveAnimationBlendMode:()=>fr,AdditiveBlending:()=>U,AlphaFormat:()=>bi,AlwaysDepth:()=>Yt,AlwaysStencilFunc:()=>rh,AmbientLight:()=>Iy,AmbientLightProbe:()=>GE,AnimationClip:()=>Gg,AnimationLoader:()=>TE,AnimationMixer:()=>sb,AnimationObjectGroup:()=>nb,AnimationUtils:()=>Xu,ArcCurve:()=>kt,ArrayCamera:()=>Mg,ArrowHelper:()=>Tb,Audio:()=>Hy,AudioAnalyser:()=>WE,AudioContext:()=>r1,AudioListener:()=>VE,AudioLoader:()=>kE,AxesHelper:()=>Sb,BackSide:()=>P,BasicDepthPacking:()=>Ss,BasicShadowMap:()=>w,Bone:()=>wc,BooleanKeyframeTrack:()=>df,Box2:()=>fb,Box3:()=>xa,Box3Helper:()=>Cb,BoxBufferGeometry:()=>kb,BoxGeometry:()=>Za,BoxHelper:()=>wb,BufferAttribute:()=>Rs,BufferGeometry:()=>Or,BufferGeometryLoader:()=>Dy,ByteType:()=>on,Cache:()=>pf,Camera:()=>$a,CameraHelper:()=>_b,CanvasTexture:()=>pt,CapsuleBufferGeometry:()=>Ub,CapsuleGeometry:()=>As,CatmullRomCurve3:()=>Wn,CineonToneMapping:()=>ni,CircleBufferGeometry:()=>Gb,CircleGeometry:()=>Ct,ClampToEdgeWrapping:()=>Oe,Clock:()=>ky,Color:()=>Si,ColorKeyframeTrack:()=>Zv,ColorManagement:()=>Ro,CompressedArrayTexture:()=>lt,CompressedTexture:()=>it,CompressedTextureLoader:()=>SE,ConeBufferGeometry:()=>Hb,ConeGeometry:()=>is,CubeCamera:()=>Zf,CubeReflectionMapping:()=>Ye,CubeRefractionMapping:()=>ze,CubeTexture:()=>Vc,CubeTextureLoader:()=>IE,CubeUVReflectionMapping:()=>Me,CubicBezierCurve:()=>Cn,CubicBezierCurve3:()=>zn,CubicInterpolant:()=>vy,CullFaceBack:()=>E,CullFaceFront:()=>_,CullFaceFrontBack:()=>m,CullFaceNone:()=>y,Curve:()=>mt,CurvePath:()=>pr,CustomBlending:()=>xe,CustomToneMapping:()=>Ue,CylinderBufferGeometry:()=>zb,CylinderGeometry:()=>Mr,Cylindrical:()=>db,Data3DTexture:()=>kl,DataArrayTexture:()=>cl,DataTexture:()=>Hh,DataTexture2DArray:()=>Fb,DataTexture3D:()=>Nb,DataTextureLoader:()=>RE,DataUtils:()=>Db,DecrementStencilOp:()=>Ia,DecrementWrapStencilOp:()=>Ba,DefaultLoadingManager:()=>Ey,DepthFormat:()=>zr,DepthStencilFormat:()=>Pr,DepthTexture:()=>Ig,DirectionalLight:()=>Sy,DirectionalLightHelper:()=>bb,DiscreteInterpolant:()=>yy,DodecahedronBufferGeometry:()=>Vb,DodecahedronGeometry:()=>eo,DoubleSide:()=>Y,DstAlphaFactor:()=>Ge,DstColorFactor:()=>xt,DynamicCopyUsage:()=>oh,DynamicDrawUsage:()=>od,DynamicReadUsage:()=>no,EdgesGeometry:()=>Zp,EllipseCurve:()=>ot,EqualDepth:()=>rt,EqualStencilFunc:()=>Ol,EquirectangularReflectionMapping:()=>He,EquirectangularRefractionMapping:()=>et,Euler:()=>zo,EventDispatcher:()=>ia,ExtrudeBufferGeometry:()=>Qb,ExtrudeGeometry:()=>$r,FileLoader:()=>qu,Float16BufferAttribute:()=>Jf,Float32BufferAttribute:()=>Yi,Float64BufferAttribute:()=>yh,FloatType:()=>vn,Fog:()=>Jd,FogExp2:()=>Wp,FramebufferTexture:()=>Xe,FrontSide:()=>L,Frustum:()=>dl,GLBufferAttribute:()=>cb,GLSL1:()=>kf,GLSL3:()=>ah,GreaterDepth:()=>Bt,GreaterEqualDepth:()=>At,GreaterEqualStencilFunc:()=>sd,GreaterStencilFunc:()=>Fo,GridHelper:()=>xb,Group:()=>Xl,HalfFloatType:()=>Ft,HemisphereLight:()=>by,HemisphereLightHelper:()=>yb,HemisphereLightProbe:()=>UE,IcosahedronBufferGeometry:()=>jb,IcosahedronGeometry:()=>nu,ImageBitmapLoader:()=>NE,ImageLoader:()=>Hg,ImageUtils:()=>dh,ImmediateRenderObject:()=>Pb,IncrementStencilOp:()=>Pl,IncrementWrapStencilOp:()=>Ra,InstancedBufferAttribute:()=>Cc,InstancedBufferGeometry:()=>Ly,InstancedInterleavedBuffer:()=>lb,InstancedMesh:()=>hA,Int16BufferAttribute:()=>Cm,Int32BufferAttribute:()=>xu,Int8BufferAttribute:()=>u0,IntType:()=>fi,InterleavedBuffer:()=>Kp,InterleavedBufferAttribute:()=>Uu,Interpolant:()=>Sl,InterpolateDiscrete:()=>xn,InterpolateLinear:()=>Nt,InterpolateSmooth:()=>an,InvertStencilOp:()=>ja,KeepStencilOp:()=>js,KeyframeTrack:()=>Tc,LOD:()=>cA,LatheBufferGeometry:()=>Wb,LatheGeometry:()=>_r,Layers:()=>ms,LessDepth:()=>Mn,LessEqualDepth:()=>je,LessEqualStencilFunc:()=>qs,LessStencilFunc:()=>tc,Light:()=>jh,LightProbe:()=>gA,Line:()=>f,Line3:()=>pb,LineBasicMaterial:()=>ga,LineCurve:()=>hr,LineCurve3:()=>Fn,LineDashedMaterial:()=>fs,LineLoop:()=>G,LineSegments:()=>D,LinearEncoding:()=>Jr,LinearFilter:()=>Ke,LinearInterpolant:()=>Jv,LinearMipMapLinearFilter:()=>Xt,LinearMipMapNearestFilter:()=>Vt,LinearMipmapLinearFilter:()=>$t,LinearMipmapNearestFilter:()=>$e,LinearSRGBColorSpace:()=>_o,LinearToneMapping:()=>tn,Loader:()=>Il,LoaderUtils:()=>i1,LoadingManager:()=>$v,LoopOnce:()=>yt,LoopPingPong:()=>wn,LoopRepeat:()=>St,LuminanceAlphaFormat:()=>Ki,LuminanceFormat:()=>Dr,MOUSE:()=>C,Material:()=>Zo,MaterialLoader:()=>AA,MathUtils:()=>Vf,Matrix3:()=>No,Matrix4:()=>Gi,MaxEquation:()=>F,Mesh:()=>$s,MeshBasicMaterial:()=>lo,MeshDepthMaterial:()=>_g,MeshDistanceMaterial:()=>wg,MeshLambertMaterial:()=>uf,MeshMatcapMaterial:()=>cn,MeshNormalMaterial:()=>Ku,MeshPhongMaterial:()=>im,MeshPhysicalMaterial:()=>nm,MeshStandardMaterial:()=>Qh,MeshToonMaterial:()=>rm,MinEquation:()=>Q,MirroredRepeatWrapping:()=>Ze,MixOperation:()=>un,MultiplyBlending:()=>ue,MultiplyOperation:()=>qt,NearestFilter:()=>ae,NearestMipMapLinearFilter:()=>We,NearestMipMapNearestFilter:()=>se,NearestMipmapLinearFilter:()=>Ie,NearestMipmapNearestFilter:()=>ee,NeverDepth:()=>wt,NeverStencilFunc:()=>ol,NoBlending:()=>J,NoColorSpace:()=>Fs,NoToneMapping:()=>bn,NormalAnimationBlendMode:()=>Xi,NormalBlending:()=>j,NotEqualDepth:()=>Pt,NotEqualStencilFunc:()=>rd,NumberKeyframeTrack:()=>kg,Object3D:()=>ds,ObjectLoader:()=>OE,ObjectSpaceNormalMap:()=>Zr,OctahedronBufferGeometry:()=>Kb,OctahedronGeometry:()=>Jl,OneFactor:()=>X,OneMinusDstAlphaFactor:()=>ht,OneMinusDstColorFactor:()=>at,OneMinusSrcAlphaFactor:()=>Be,OneMinusSrcColorFactor:()=>Ae,OrthographicCamera:()=>Su,PCFShadowMap:()=>b,PCFSoftShadowMap:()=>O,PMREMGenerator:()=>Dh,Path:()=>Ri,PerspectiveCamera:()=>Ao,Plane:()=>Qo,PlaneBufferGeometry:()=>Xb,PlaneGeometry:()=>_u,PlaneHelper:()=>Mb,PointLight:()=>Ty,PointLightHelper:()=>Ab,Points:()=>we,PointsMaterial:()=>$,PolarGridHelper:()=>Eb,PolyhedronBufferGeometry:()=>Yb,PolyhedronGeometry:()=>Tr,PositionalAudio:()=>jE,PropertyBinding:()=>Cs,PropertyMixer:()=>Vy,QuadraticBezierCurve:()=>jn,QuadraticBezierCurve3:()=>Sn,Quaternion:()=>Mo,QuaternionKeyframeTrack:()=>sm,QuaternionLinearInterpolant:()=>xy,REVISION:()=>g,RGBADepthPacking:()=>po,RGBAFormat:()=>Zi,RGBAIntegerFormat:()=>ut,RGBA_ASTC_10x10_Format:()=>ge,RGBA_ASTC_10x5_Format:()=>to,RGBA_ASTC_10x6_Format:()=>as,RGBA_ASTC_10x8_Format:()=>ce,RGBA_ASTC_12x10_Format:()=>_e,RGBA_ASTC_12x12_Format:()=>Le,RGBA_ASTC_4x4_Format:()=>Xr,RGBA_ASTC_5x4_Format:()=>zi,RGBA_ASTC_5x5_Format:()=>er,RGBA_ASTC_6x5_Format:()=>kr,RGBA_ASTC_6x6_Format:()=>Os,RGBA_ASTC_8x5_Format:()=>ro,RGBA_ASTC_8x6_Format:()=>pi,RGBA_ASTC_8x8_Format:()=>Rr,RGBA_BPTC_Format:()=>qe,RGBA_ETC2_EAC_Format:()=>Ti,RGBA_PVRTC_2BPPV1_Format:()=>pn,RGBA_PVRTC_4BPPV1_Format:()=>ei,RGBA_S3TC_DXT1_Format:()=>nn,RGBA_S3TC_DXT3_Format:()=>Wt,RGBA_S3TC_DXT5_Format:()=>mn,RGBFormat:()=>Pi,RGB_ETC1_Format:()=>Oi,RGB_ETC2_Format:()=>Mi,RGB_PVRTC_2BPPV1_Format:()=>Xn,RGB_PVRTC_4BPPV1_Format:()=>Un,RGB_S3TC_DXT1_Format:()=>_t,RGFormat:()=>xs,RGIntegerFormat:()=>Qe,RawShaderMaterial:()=>ou,Ray:()=>Jo,Raycaster:()=>ub,RectAreaLight:()=>Ry,RedFormat:()=>ar,RedIntegerFormat:()=>Qr,ReinhardToneMapping:()=>ri,RepeatWrapping:()=>Te,ReplaceStencilOp:()=>sl,ReverseSubtractEquation:()=>q,RingBufferGeometry:()=>qb,RingGeometry:()=>iu,SRGBColorSpace:()=>Ds,Scene:()=>Lg,ShaderChunk:()=>Wr,ShaderLib:()=>Ca,ShaderMaterial:()=>ea,ShadowMaterial:()=>cf,Shape:()=>el,ShapeBufferGeometry:()=>Jb,ShapeGeometry:()=>ru,ShapePath:()=>Ib,ShapeUtils:()=>Bi,ShortType:()=>In,Skeleton:()=>af,SkeletonHelper:()=>gb,SkinnedMesh:()=>bl,Source:()=>Da,Sphere:()=>qo,SphereBufferGeometry:()=>Zb,SphereGeometry:()=>su,Spherical:()=>hb,SphericalHarmonics3:()=>By,SplineCurve:()=>Ii,SpotLight:()=>Cy,SpotLightHelper:()=>mb,Sprite:()=>aA,SpriteMaterial:()=>Xp,SrcAlphaFactor:()=>Se,SrcAlphaSaturateFactor:()=>Gt,SrcColorFactor:()=>fe,StaticCopyUsage:()=>Ff,StaticDrawUsage:()=>Dc,StaticReadUsage:()=>Pf,StereoCamera:()=>HE,StreamCopyUsage:()=>Nf,StreamDrawUsage:()=>sh,StreamReadUsage:()=>Of,StringKeyframeTrack:()=>ff,SubtractEquation:()=>V,SubtractiveBlending:()=>te,TOUCH:()=>v,TangentSpaceNormalMap:()=>Qs,TetrahedronBufferGeometry:()=>$b,TetrahedronGeometry:()=>Vu,Texture:()=>Ws,TextureLoader:()=>BE,TorusBufferGeometry:()=>e_,TorusGeometry:()=>Qu,TorusKnotBufferGeometry:()=>t_,TorusKnotGeometry:()=>ju,Triangle:()=>Fa,TriangleFanDrawMode:()=>hs,TriangleStripDrawMode:()=>Vi,TrianglesDrawMode:()=>ur,TubeBufferGeometry:()=>n_,TubeGeometry:()=>Wu,UVMapping:()=>Pe,Uint16BufferAttribute:()=>Yf,Uint32BufferAttribute:()=>qf,Uint8BufferAttribute:()=>_m,Uint8ClampedBufferAttribute:()=>wm,Uniform:()=>a1,UniformsGroup:()=>ab,UniformsLib:()=>gi,UniformsUtils:()=>Mm,UnsignedByteType:()=>jt,UnsignedInt248Type:()=>Dn,UnsignedIntType:()=>Nn,UnsignedShort4444Type:()=>yn,UnsignedShort5551Type:()=>Gn,UnsignedShortType:()=>di,VSMShadowMap:()=>R,Vector2:()=>On,Vector3:()=>nt,Vector4:()=>es,VectorKeyframeTrack:()=>Ug,VideoTexture:()=>ke,WebGL1Renderer:()=>oA,WebGL3DRenderTarget:()=>mo,WebGLArrayRenderTarget:()=>Yo,WebGLCubeRenderTarget:()=>$f,WebGLMultipleRenderTargets:()=>ph,WebGLMultisampleRenderTarget:()=>Ob,WebGLRenderTarget:()=>ko,WebGLRenderer:()=>Bg,WebGLUtils:()=>Cg,WireframeGeometry:()=>mA,WrapAroundEnding:()=>Ui,ZeroCurvatureEnding:()=>Pn,ZeroFactor:()=>z,ZeroSlopeEnding:()=>xi,ZeroStencilOp:()=>Qa,_SRGBAFormat:()=>du,sRGBEncoding:()=>vr});/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const g="147",C={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},v={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},y=0,E=1,_=2,m=3,w=0,b=1,O=2,R=3,L=0,P=1,Y=2,J=0,j=1,U=2,te=3,ue=4,xe=5,Ee=100,V=101,q=102,Q=103,F=104,z=200,X=201,fe=202,Ae=203,Se=204,Be=205,Ge=206,ht=207,xt=208,at=209,Gt=210,wt=0,Yt=1,Mn=2,je=3,rt=4,At=5,Bt=6,Pt=7,qt=0,un=1,dn=2,bn=0,tn=1,ri=2,ni=3,zt=4,Ue=5,Pe=300,Ye=301,ze=302,He=303,et=304,Me=306,Te=1e3,Oe=1001,Ze=1002,ae=1003,ee=1004,se=1004,Ie=1005,We=1005,Ke=1006,$e=1007,Vt=1007,$t=1008,Xt=1008,jt=1009,on=1010,In=1011,di=1012,fi=1013,Nn=1014,vn=1015,Ft=1016,yn=1017,Gn=1018,Dn=1020,bi=1021,Pi=1022,Zi=1023,Dr=1024,Ki=1025,zr=1026,Pr=1027,ar=1028,Qr=1029,xs=1030,Qe=1031,ut=1033,_t=33776,nn=33777,Wt=33778,mn=33779,Un=35840,Xn=35841,ei=35842,pn=35843,Oi=36196,Mi=37492,Ti=37496,Xr=37808,zi=37809,er=37810,kr=37811,Os=37812,ro=37813,pi=37814,Rr=37815,to=37816,as=37817,ce=37818,ge=37819,_e=37820,Le=37821,qe=36492,yt=2200,St=2201,wn=2202,xn=2300,Nt=2301,an=2302,Pn=2400,xi=2401,Ui=2402,Xi=2500,fr=2501,ur=0,Vi=1,hs=2,Jr=3e3,vr=3001,Ss=3200,po=3201,Qs=0,Zr=1,Fs="",Ds="srgb",_o="srgb-linear",Qa=0,js=7680,sl=7681,Pl=7682,Ia=7683,Ra=34055,Ba=34056,ja=5386,ol=512,tc=513,Ol=514,qs=515,Fo=516,rd=517,sd=518,rh=519,Dc=35044,od=35048,sh=35040,Pf=35045,no=35049,Of=35041,Ff=35046,oh=35050,Nf=35042,kf="100",ah="300 es",du=1035;class ia{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const c=a.indexOf(n);c!==-1&&a.splice(c,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const a=r.slice(0);for(let c=0,p=a.length;c<p;c++)a[c].call(this,e);e.target=null}}}const wo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ad=1234567;const al=Math.PI/180,Pc=180/Math.PI;function Co(){const x=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(wo[x&255]+wo[x>>8&255]+wo[x>>16&255]+wo[x>>24&255]+"-"+wo[e&255]+wo[e>>8&255]+"-"+wo[e>>16&15|64]+wo[e>>24&255]+"-"+wo[n&63|128]+wo[n>>8&255]+"-"+wo[n>>16&255]+wo[n>>24&255]+wo[r&255]+wo[r>>8&255]+wo[r>>16&255]+wo[r>>24&255]).toLowerCase()}function Ns(x,e,n){return Math.max(e,Math.min(n,x))}function Js(x,e){return(x%e+e)%e}function fu(x,e,n,r,a){return r+(x-e)*(a-r)/(n-e)}function ll(x,e,n){return x!==e?(n-x)/(e-x):0}function Wa(x,e,n){return(1-n)*x+n*e}function ld(x,e,n,r){return Wa(x,e,1-Math.exp(-n*r))}function cd(x,e=1){return e-Math.abs(Js(x,e*2)-e)}function ud(x,e,n){return x<=e?0:x>=n?1:(x=(x-e)/(n-e),x*x*(3-2*x))}function Uf(x,e,n){return x<=e?0:x>=n?1:(x=(x-e)/(n-e),x*x*x*(x*(x*6-15)+10))}function nc(x,e){return x+Math.floor(Math.random()*(e-x+1))}function Gf(x,e){return x+Math.random()*(e-x)}function Hf(x){return x*(.5-Math.random())}function hd(x){x!==void 0&&(ad=x);let e=ad+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function dd(x){return x*al}function zf(x){return x*Pc}function lh(x){return(x&x-1)===0&&x!==0}function fd(x){return Math.pow(2,Math.ceil(Math.log(x)/Math.LN2))}function pu(x){return Math.pow(2,Math.floor(Math.log(x)/Math.LN2))}function pd(x,e,n,r,a){const c=Math.cos,p=Math.sin,A=c(n/2),N=p(n/2),H=c((e+r)/2),Z=p((e+r)/2),ne=c((e-r)/2),re=p((e-r)/2),le=c((r-e)/2),me=p((r-e)/2);switch(a){case"XYX":x.set(A*Z,N*ne,N*re,A*H);break;case"YZY":x.set(N*re,A*Z,N*ne,A*H);break;case"ZXZ":x.set(N*ne,N*re,A*Z,A*H);break;case"XZX":x.set(A*Z,N*me,N*le,A*H);break;case"YXY":x.set(N*le,A*Z,N*me,A*H);break;case"ZYZ":x.set(N*me,N*le,A*Z,A*H);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function La(x,e){switch(e.constructor){case Float32Array:return x;case Uint16Array:return x/65535;case Uint8Array:return x/255;case Int16Array:return Math.max(x/32767,-1);case Int8Array:return Math.max(x/127,-1);default:throw new Error("Invalid component type.")}}function Is(x,e){switch(e.constructor){case Float32Array:return x;case Uint16Array:return Math.round(x*65535);case Uint8Array:return Math.round(x*255);case Int16Array:return Math.round(x*32767);case Int8Array:return Math.round(x*127);default:throw new Error("Invalid component type.")}}var Vf=Object.freeze({__proto__:null,DEG2RAD:al,RAD2DEG:Pc,generateUUID:Co,clamp:Ns,euclideanModulo:Js,mapLinear:fu,inverseLerp:ll,lerp:Wa,damp:ld,pingpong:cd,smoothstep:ud,smootherstep:Uf,randInt:nc,randFloat:Gf,randFloatSpread:Hf,seededRandom:hd,degToRad:dd,radToDeg:zf,isPowerOfTwo:lh,ceilPowerOfTwo:fd,floorPowerOfTwo:pu,setQuaternionFromProperEuler:pd,normalize:Is,denormalize:La});class On{constructor(e=0,n=0){On.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6],this.y=a[1]*n+a[4]*r+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),a=Math.sin(n),c=this.x-e.x,p=this.y-e.y;return this.x=c*r-p*a+e.x,this.y=c*a+p*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class No{constructor(){No.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,r,a,c,p,A,N,H){const Z=this.elements;return Z[0]=e,Z[1]=a,Z[2]=A,Z[3]=n,Z[4]=c,Z[5]=N,Z[6]=r,Z[7]=p,Z[8]=H,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,a=n.elements,c=this.elements,p=r[0],A=r[3],N=r[6],H=r[1],Z=r[4],ne=r[7],re=r[2],le=r[5],me=r[8],pe=a[0],de=a[3],Ce=a[6],Fe=a[1],Re=a[4],De=a[7],Ve=a[2],ct=a[5],bt=a[8];return c[0]=p*pe+A*Fe+N*Ve,c[3]=p*de+A*Re+N*ct,c[6]=p*Ce+A*De+N*bt,c[1]=H*pe+Z*Fe+ne*Ve,c[4]=H*de+Z*Re+ne*ct,c[7]=H*Ce+Z*De+ne*bt,c[2]=re*pe+le*Fe+me*Ve,c[5]=re*de+le*Re+me*ct,c[8]=re*Ce+le*De+me*bt,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],a=e[2],c=e[3],p=e[4],A=e[5],N=e[6],H=e[7],Z=e[8];return n*p*Z-n*A*H-r*c*Z+r*A*N+a*c*H-a*p*N}invert(){const e=this.elements,n=e[0],r=e[1],a=e[2],c=e[3],p=e[4],A=e[5],N=e[6],H=e[7],Z=e[8],ne=Z*p-A*H,re=A*N-Z*c,le=H*c-p*N,me=n*ne+r*re+a*le;if(me===0)return this.set(0,0,0,0,0,0,0,0,0);const pe=1/me;return e[0]=ne*pe,e[1]=(a*H-Z*r)*pe,e[2]=(A*r-a*p)*pe,e[3]=re*pe,e[4]=(Z*n-a*N)*pe,e[5]=(a*c-A*n)*pe,e[6]=le*pe,e[7]=(r*N-H*n)*pe,e[8]=(p*n-r*c)*pe,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,a,c,p,A){const N=Math.cos(c),H=Math.sin(c);return this.set(r*N,r*H,-r*(N*p+H*A)+p+e,-a*H,a*N,-a*(-H*p+N*A)+A+n,0,0,1),this}scale(e,n){return this.premultiply(ch.makeScale(e,n)),this}rotate(e){return this.premultiply(ch.makeRotation(-e)),this}translate(e,n){return this.premultiply(ch.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let a=0;a<9;a++)if(n[a]!==r[a])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ch=new No;function md(x){for(let e=x.length-1;e>=0;--e)if(x[e]>=65535)return!0;return!1}const Qf={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ic(x,e){return new Qf[x](e)}function Fl(x){return document.createElementNS("http://www.w3.org/1999/xhtml",x)}function Nl(x){return x<.04045?x*.0773993808:Math.pow(x*.9478672986+.0521327014,2.4)}function mu(x){return x<.0031308?x*12.92:1.055*Math.pow(x,.41666)-.055}const uh={[Ds]:{[_o]:Nl},[_o]:{[Ds]:mu}},Ro={legacyMode:!0,get workingColorSpace(){return _o},set workingColorSpace(x){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(x,e,n){if(this.legacyMode||e===n||!e||!n)return x;if(uh[e]&&uh[e][n]!==void 0){const r=uh[e][n];return x.r=r(x.r),x.g=r(x.g),x.b=r(x.b),x}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(x,e){return this.convert(x,this.workingColorSpace,e)},toWorkingColorSpace:function(x,e){return this.convert(x,e,this.workingColorSpace)}},Oc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},so={r:0,g:0,b:0},ya={h:0,s:0,l:0},Ka={h:0,s:0,l:0};function hh(x,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?x+(e-x)*6*n:n<.5?e:n<.6666666666666666?x+(e-x)*6*(.6666666666666666-n):x}function gu(x,e){return e.r=x.r,e.g=x.g,e.b=x.b,e}class Si{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ds){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ro.toWorkingColorSpace(this,n),this}setRGB(e,n,r,a=Ro.workingColorSpace){return this.r=e,this.g=n,this.b=r,Ro.toWorkingColorSpace(this,a),this}setHSL(e,n,r,a=Ro.workingColorSpace){if(e=Js(e,1),n=Ns(n,0,1),r=Ns(r,0,1),n===0)this.r=this.g=this.b=r;else{const c=r<=.5?r*(1+n):r+n-r*n,p=2*r-c;this.r=hh(p,c,e+.3333333333333333),this.g=hh(p,c,e),this.b=hh(p,c,e-.3333333333333333)}return Ro.toWorkingColorSpace(this,a),this}setStyle(e,n=Ds){function r(c){c!==void 0&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let c;const p=a[1],A=a[2];switch(p){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,Ro.toWorkingColorSpace(this,n),r(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,Ro.toWorkingColorSpace(this,n),r(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A)){const N=parseFloat(c[1])/360,H=parseFloat(c[2])/100,Z=parseFloat(c[3])/100;return r(c[4]),this.setHSL(N,H,Z,n)}break}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const c=a[1],p=c.length;if(p===3)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,Ro.toWorkingColorSpace(this,n),this;if(p===6)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,Ro.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=Ds){const r=Oc[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Nl(e.r),this.g=Nl(e.g),this.b=Nl(e.b),this}copyLinearToSRGB(e){return this.r=mu(e.r),this.g=mu(e.g),this.b=mu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ds){return Ro.fromWorkingColorSpace(gu(this,so),e),Ns(so.r*255,0,255)<<16^Ns(so.g*255,0,255)<<8^Ns(so.b*255,0,255)<<0}getHexString(e=Ds){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Ro.workingColorSpace){Ro.fromWorkingColorSpace(gu(this,so),n);const r=so.r,a=so.g,c=so.b,p=Math.max(r,a,c),A=Math.min(r,a,c);let N,H;const Z=(A+p)/2;if(A===p)N=0,H=0;else{const ne=p-A;switch(H=Z<=.5?ne/(p+A):ne/(2-p-A),p){case r:N=(a-c)/ne+(a<c?6:0);break;case a:N=(c-r)/ne+2;break;case c:N=(r-a)/ne+4;break}N/=6}return e.h=N,e.s=H,e.l=Z,e}getRGB(e,n=Ro.workingColorSpace){return Ro.fromWorkingColorSpace(gu(this,so),n),e.r=so.r,e.g=so.g,e.b=so.b,e}getStyle(e=Ds){return Ro.fromWorkingColorSpace(gu(this,so),e),e!==Ds?`color(${e} ${so.r} ${so.g} ${so.b})`:`rgb(${so.r*255|0},${so.g*255|0},${so.b*255|0})`}offsetHSL(e,n,r){return this.getHSL(ya),ya.h+=e,ya.s+=n,ya.l+=r,this.setHSL(ya.h,ya.s,ya.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ya),e.getHSL(Ka);const r=Wa(ya.h,Ka.h,n),a=Wa(ya.s,Ka.s,n),c=Wa(ya.l,Ka.l,n);return this.setHSL(r,a,c),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Si.NAMES=Oc;let rc;class dh{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{rc===void 0&&(rc=Fl("canvas")),rc.width=e.width,rc.height=e.height;const r=rc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=rc}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Fl("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const a=r.getImageData(0,0,e.width,e.height),c=a.data;for(let p=0;p<c.length;p++)c[p]=Nl(c[p]/255)*255;return r.putImageData(a,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Nl(n[r]/255)*255):n[r]=Nl(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Da{constructor(e=null){this.isSource=!0,this.uuid=Co(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},a=this.data;if(a!==null){let c;if(Array.isArray(a)){c=[];for(let p=0,A=a.length;p<A;p++)a[p].isDataTexture?c.push(sc(a[p].image)):c.push(sc(a[p]))}else c=sc(a);r.url=c}return n||(e.images[this.uuid]=r),r}}function sc(x){return typeof HTMLImageElement<"u"&&x instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&x instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&x instanceof ImageBitmap?dh.getDataURL(x):x.data?{data:Array.from(x.data),width:x.width,height:x.height,type:x.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let fh=0;class Ws extends ia{constructor(e=Ws.DEFAULT_IMAGE,n=Ws.DEFAULT_MAPPING,r=Oe,a=Oe,c=Ke,p=$t,A=Zi,N=jt,H=Ws.DEFAULT_ANISOTROPY,Z=Jr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fh++}),this.uuid=Co(),this.name="",this.source=new Da(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=a,this.magFilter=c,this.minFilter=p,this.anisotropy=H,this.format=A,this.internalFormat=null,this.type=N,this.offset=new On(0,0),this.repeat=new On(1,1),this.center=new On(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new No,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Z,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Pe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Te:e.x=e.x-Math.floor(e.x);break;case Oe:e.x=e.x<0?0:1;break;case Ze:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Te:e.y=e.y-Math.floor(e.y);break;case Oe:e.y=e.y<0?0:1;break;case Ze:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Ws.DEFAULT_IMAGE=null,Ws.DEFAULT_MAPPING=Pe,Ws.DEFAULT_ANISOTROPY=1;class es{constructor(e=0,n=0,r=0,a=1){es.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,a){return this.x=e,this.y=n,this.z=r,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,a=this.z,c=this.w,p=e.elements;return this.x=p[0]*n+p[4]*r+p[8]*a+p[12]*c,this.y=p[1]*n+p[5]*r+p[9]*a+p[13]*c,this.z=p[2]*n+p[6]*r+p[10]*a+p[14]*c,this.w=p[3]*n+p[7]*r+p[11]*a+p[15]*c,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,a,c;const N=e.elements,H=N[0],Z=N[4],ne=N[8],re=N[1],le=N[5],me=N[9],pe=N[2],de=N[6],Ce=N[10];if(Math.abs(Z-re)<.01&&Math.abs(ne-pe)<.01&&Math.abs(me-de)<.01){if(Math.abs(Z+re)<.1&&Math.abs(ne+pe)<.1&&Math.abs(me+de)<.1&&Math.abs(H+le+Ce-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const Re=(H+1)/2,De=(le+1)/2,Ve=(Ce+1)/2,ct=(Z+re)/4,bt=(ne+pe)/4,Ne=(me+de)/4;return Re>De&&Re>Ve?Re<.01?(r=0,a=.707106781,c=.707106781):(r=Math.sqrt(Re),a=ct/r,c=bt/r):De>Ve?De<.01?(r=.707106781,a=0,c=.707106781):(a=Math.sqrt(De),r=ct/a,c=Ne/a):Ve<.01?(r=.707106781,a=.707106781,c=0):(c=Math.sqrt(Ve),r=bt/c,a=Ne/c),this.set(r,a,c,n),this}let Fe=Math.sqrt((de-me)*(de-me)+(ne-pe)*(ne-pe)+(re-Z)*(re-Z));return Math.abs(Fe)<.001&&(Fe=1),this.x=(de-me)/Fe,this.y=(ne-pe)/Fe,this.z=(re-Z)/Fe,this.w=Math.acos((H+le+Ce-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ko extends ia{constructor(e=1,n=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new es(0,0,e,n),this.scissorTest=!1,this.viewport=new es(0,0,e,n);const a={width:e,height:n,depth:1};this.texture=new Ws(a,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ke,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Da(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class cl extends Ws{constructor(e=null,n=1,r=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:a},this.magFilter=ae,this.minFilter=ae,this.wrapR=Oe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Yo extends ko{constructor(e=1,n=1,r=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new cl(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class kl extends Ws{constructor(e=null,n=1,r=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:a},this.magFilter=ae,this.minFilter=ae,this.wrapR=Oe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mo extends ko{constructor(e=1,n=1,r=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new kl(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class ph extends ko{constructor(e=1,n=1,r=1,a={}){super(e,n,a),this.isWebGLMultipleRenderTargets=!0;const c=this.texture;this.texture=[];for(let p=0;p<r;p++)this.texture[p]=c.clone(),this.texture[p].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let a=0,c=this.texture.length;a<c;a++)this.texture[a].image.width=e,this.texture[a].image.height=n,this.texture[a].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Mo{constructor(e=0,n=0,r=0,a=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=a}static slerpFlat(e,n,r,a,c,p,A){let N=r[a+0],H=r[a+1],Z=r[a+2],ne=r[a+3];const re=c[p+0],le=c[p+1],me=c[p+2],pe=c[p+3];if(A===0){e[n+0]=N,e[n+1]=H,e[n+2]=Z,e[n+3]=ne;return}if(A===1){e[n+0]=re,e[n+1]=le,e[n+2]=me,e[n+3]=pe;return}if(ne!==pe||N!==re||H!==le||Z!==me){let de=1-A;const Ce=N*re+H*le+Z*me+ne*pe,Fe=Ce>=0?1:-1,Re=1-Ce*Ce;if(Re>Number.EPSILON){const Ve=Math.sqrt(Re),ct=Math.atan2(Ve,Ce*Fe);de=Math.sin(de*ct)/Ve,A=Math.sin(A*ct)/Ve}const De=A*Fe;if(N=N*de+re*De,H=H*de+le*De,Z=Z*de+me*De,ne=ne*de+pe*De,de===1-A){const Ve=1/Math.sqrt(N*N+H*H+Z*Z+ne*ne);N*=Ve,H*=Ve,Z*=Ve,ne*=Ve}}e[n]=N,e[n+1]=H,e[n+2]=Z,e[n+3]=ne}static multiplyQuaternionsFlat(e,n,r,a,c,p){const A=r[a],N=r[a+1],H=r[a+2],Z=r[a+3],ne=c[p],re=c[p+1],le=c[p+2],me=c[p+3];return e[n]=A*me+Z*ne+N*le-H*re,e[n+1]=N*me+Z*re+H*ne-A*le,e[n+2]=H*me+Z*le+A*re-N*ne,e[n+3]=Z*me-A*ne-N*re-H*le,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,a){return this._x=e,this._y=n,this._z=r,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,a=e._y,c=e._z,p=e._order,A=Math.cos,N=Math.sin,H=A(r/2),Z=A(a/2),ne=A(c/2),re=N(r/2),le=N(a/2),me=N(c/2);switch(p){case"XYZ":this._x=re*Z*ne+H*le*me,this._y=H*le*ne-re*Z*me,this._z=H*Z*me+re*le*ne,this._w=H*Z*ne-re*le*me;break;case"YXZ":this._x=re*Z*ne+H*le*me,this._y=H*le*ne-re*Z*me,this._z=H*Z*me-re*le*ne,this._w=H*Z*ne+re*le*me;break;case"ZXY":this._x=re*Z*ne-H*le*me,this._y=H*le*ne+re*Z*me,this._z=H*Z*me+re*le*ne,this._w=H*Z*ne-re*le*me;break;case"ZYX":this._x=re*Z*ne-H*le*me,this._y=H*le*ne+re*Z*me,this._z=H*Z*me-re*le*ne,this._w=H*Z*ne+re*le*me;break;case"YZX":this._x=re*Z*ne+H*le*me,this._y=H*le*ne+re*Z*me,this._z=H*Z*me-re*le*ne,this._w=H*Z*ne-re*le*me;break;case"XZY":this._x=re*Z*ne-H*le*me,this._y=H*le*ne-re*Z*me,this._z=H*Z*me+re*le*ne,this._w=H*Z*ne+re*le*me;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,a=Math.sin(r);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],a=n[4],c=n[8],p=n[1],A=n[5],N=n[9],H=n[2],Z=n[6],ne=n[10],re=r+A+ne;if(re>0){const le=.5/Math.sqrt(re+1);this._w=.25/le,this._x=(Z-N)*le,this._y=(c-H)*le,this._z=(p-a)*le}else if(r>A&&r>ne){const le=2*Math.sqrt(1+r-A-ne);this._w=(Z-N)/le,this._x=.25*le,this._y=(a+p)/le,this._z=(c+H)/le}else if(A>ne){const le=2*Math.sqrt(1+A-r-ne);this._w=(c-H)/le,this._x=(a+p)/le,this._y=.25*le,this._z=(N+Z)/le}else{const le=2*Math.sqrt(1+ne-r-A);this._w=(p-a)/le,this._x=(c+H)/le,this._y=(N+Z)/le,this._z=.25*le}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ns(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const a=Math.min(1,n/r);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,a=e._y,c=e._z,p=e._w,A=n._x,N=n._y,H=n._z,Z=n._w;return this._x=r*Z+p*A+a*H-c*N,this._y=a*Z+p*N+c*A-r*H,this._z=c*Z+p*H+r*N-a*A,this._w=p*Z-r*A-a*N-c*H,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,a=this._y,c=this._z,p=this._w;let A=p*e._w+r*e._x+a*e._y+c*e._z;if(A<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,A=-A):this.copy(e),A>=1)return this._w=p,this._x=r,this._y=a,this._z=c,this;const N=1-A*A;if(N<=Number.EPSILON){const le=1-n;return this._w=le*p+n*this._w,this._x=le*r+n*this._x,this._y=le*a+n*this._y,this._z=le*c+n*this._z,this.normalize(),this._onChangeCallback(),this}const H=Math.sqrt(N),Z=Math.atan2(H,A),ne=Math.sin((1-n)*Z)/H,re=Math.sin(n*Z)/H;return this._w=p*ne+this._w*re,this._x=r*ne+this._x*re,this._y=a*ne+this._y*re,this._z=c*ne+this._z*re,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),a=2*Math.PI*Math.random(),c=2*Math.PI*Math.random();return this.set(n*Math.cos(a),r*Math.sin(c),r*Math.cos(c),n*Math.sin(a))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class nt{constructor(e=0,n=0,r=0){nt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(oc.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(oc.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,a=this.z,c=e.elements;return this.x=c[0]*n+c[3]*r+c[6]*a,this.y=c[1]*n+c[4]*r+c[7]*a,this.z=c[2]*n+c[5]*r+c[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,a=this.z,c=e.elements,p=1/(c[3]*n+c[7]*r+c[11]*a+c[15]);return this.x=(c[0]*n+c[4]*r+c[8]*a+c[12])*p,this.y=(c[1]*n+c[5]*r+c[9]*a+c[13])*p,this.z=(c[2]*n+c[6]*r+c[10]*a+c[14])*p,this}applyQuaternion(e){const n=this.x,r=this.y,a=this.z,c=e.x,p=e.y,A=e.z,N=e.w,H=N*n+p*a-A*r,Z=N*r+A*n-c*a,ne=N*a+c*r-p*n,re=-c*n-p*r-A*a;return this.x=H*N+re*-c+Z*-A-ne*-p,this.y=Z*N+re*-p+ne*-c-H*-A,this.z=ne*N+re*-A+H*-p-Z*-c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,a=this.z,c=e.elements;return this.x=c[0]*n+c[4]*r+c[8]*a,this.y=c[1]*n+c[5]*r+c[9]*a,this.z=c[2]*n+c[6]*r+c[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,a=e.y,c=e.z,p=n.x,A=n.y,N=n.z;return this.x=a*N-c*A,this.y=c*p-r*N,this.z=r*A-a*p,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Au.copy(this).projectOnVector(e),this.sub(Au)}reflect(e){return this.sub(Au.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ns(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,a=this.z-e.z;return n*n+r*r+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const a=Math.sin(n)*e;return this.x=a*Math.sin(r),this.y=Math.cos(n)*e,this.z=a*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=a,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Au=new nt,oc=new Mo;class xa{constructor(e=new nt(1/0,1/0,1/0),n=new nt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,r=1/0,a=1/0,c=-1/0,p=-1/0,A=-1/0;for(let N=0,H=e.length;N<H;N+=3){const Z=e[N],ne=e[N+1],re=e[N+2];Z<n&&(n=Z),ne<r&&(r=ne),re<a&&(a=re),Z>c&&(c=Z),ne>p&&(p=ne),re>A&&(A=re)}return this.min.set(n,r,a),this.max.set(c,p,A),this}setFromBufferAttribute(e){let n=1/0,r=1/0,a=1/0,c=-1/0,p=-1/0,A=-1/0;for(let N=0,H=e.count;N<H;N++){const Z=e.getX(N),ne=e.getY(N),re=e.getZ(N);Z<n&&(n=Z),ne<r&&(r=ne),re<a&&(a=re),Z>c&&(c=Z),ne>p&&(p=ne),re>A&&(A=re)}return this.min.set(n,r,a),this.max.set(c,p,A),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Ul.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(n&&r.attributes!=null&&r.attributes.position!==void 0){const c=r.attributes.position;for(let p=0,A=c.count;p<A;p++)Ul.fromBufferAttribute(c,p).applyMatrix4(e.matrixWorld),this.expandByPoint(Ul)}else r.boundingBox===null&&r.computeBoundingBox(),ac.copy(r.boundingBox),ac.applyMatrix4(e.matrixWorld),this.union(ac);const a=e.children;for(let c=0,p=a.length;c<p;c++)this.expandByObject(a[c],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ul),Ul.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cc),ma.subVectors(this.max,cc),lc.subVectors(e.a,cc),Ya.subVectors(e.b,cc),ra.subVectors(e.c,cc),Ea.subVectors(Ya,lc),ul.subVectors(ra,Ya),Gl.subVectors(lc,ra);let n=[0,-Ea.z,Ea.y,0,-ul.z,ul.y,0,-Gl.z,Gl.y,Ea.z,0,-Ea.x,ul.z,0,-ul.x,Gl.z,0,-Gl.x,-Ea.y,Ea.x,0,-ul.y,ul.x,0,-Gl.y,Gl.x,0];return!Uo(n,lc,Ya,ra,ma)||(n=[1,0,0,0,1,0,0,0,1],!Uo(n,lc,Ya,ra,ma))?!1:(Fc.crossVectors(Ea,ul),n=[Fc.x,Fc.y,Fc.z],Uo(n,lc,Ya,ra,ma))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ul.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Ul).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Xa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xa=[new nt,new nt,new nt,new nt,new nt,new nt,new nt,new nt],Ul=new nt,ac=new xa,lc=new nt,Ya=new nt,ra=new nt,Ea=new nt,ul=new nt,Gl=new nt,cc=new nt,ma=new nt,Fc=new nt,Es=new nt;function Uo(x,e,n,r,a){for(let c=0,p=x.length-3;c<=p;c+=3){Es.fromArray(x,c);const A=a.x*Math.abs(Es.x)+a.y*Math.abs(Es.y)+a.z*Math.abs(Es.z),N=e.dot(Es),H=n.dot(Es),Z=r.dot(Es);if(Math.max(-Math.max(N,H,Z),Math.min(N,H,Z))>A)return!1}return!0}const gd=new xa,hl=new nt,mh=new nt;class qo{constructor(e=new nt,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):gd.setFromPoints(e).getCenter(r);let a=0;for(let c=0,p=e.length;c<p;c++)a=Math.max(a,r.distanceToSquared(e[c]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hl.subVectors(e,this.center);const n=hl.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),a=(r-this.radius)*.5;this.center.addScaledVector(hl,a/r),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(mh.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hl.copy(e.center).add(mh)),this.expandByPoint(hl.copy(e.center).sub(mh))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const sa=new nt,gh=new nt,Ci=new nt,gr=new nt,ts=new nt,oo=new nt,ls=new nt;class Jo{constructor(e=new nt,n=new nt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,sa)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=sa.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(sa.copy(this.direction).multiplyScalar(n).add(this.origin),sa.distanceToSquared(e))}distanceSqToSegment(e,n,r,a){gh.copy(e).add(n).multiplyScalar(.5),Ci.copy(n).sub(e).normalize(),gr.copy(this.origin).sub(gh);const c=e.distanceTo(n)*.5,p=-this.direction.dot(Ci),A=gr.dot(this.direction),N=-gr.dot(Ci),H=gr.lengthSq(),Z=Math.abs(1-p*p);let ne,re,le,me;if(Z>0)if(ne=p*N-A,re=p*A-N,me=c*Z,ne>=0)if(re>=-me)if(re<=me){const pe=1/Z;ne*=pe,re*=pe,le=ne*(ne+p*re+2*A)+re*(p*ne+re+2*N)+H}else re=c,ne=Math.max(0,-(p*re+A)),le=-ne*ne+re*(re+2*N)+H;else re=-c,ne=Math.max(0,-(p*re+A)),le=-ne*ne+re*(re+2*N)+H;else re<=-me?(ne=Math.max(0,-(-p*c+A)),re=ne>0?-c:Math.min(Math.max(-c,-N),c),le=-ne*ne+re*(re+2*N)+H):re<=me?(ne=0,re=Math.min(Math.max(-c,-N),c),le=re*(re+2*N)+H):(ne=Math.max(0,-(p*c+A)),re=ne>0?c:Math.min(Math.max(-c,-N),c),le=-ne*ne+re*(re+2*N)+H);else re=p>0?-c:c,ne=Math.max(0,-(p*re+A)),le=-ne*ne+re*(re+2*N)+H;return r&&r.copy(this.direction).multiplyScalar(ne).add(this.origin),a&&a.copy(Ci).multiplyScalar(re).add(gh),le}intersectSphere(e,n){sa.subVectors(e.center,this.origin);const r=sa.dot(this.direction),a=sa.dot(sa)-r*r,c=e.radius*e.radius;if(a>c)return null;const p=Math.sqrt(c-a),A=r-p,N=r+p;return A<0&&N<0?null:A<0?this.at(N,n):this.at(A,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,a,c,p,A,N;const H=1/this.direction.x,Z=1/this.direction.y,ne=1/this.direction.z,re=this.origin;return H>=0?(r=(e.min.x-re.x)*H,a=(e.max.x-re.x)*H):(r=(e.max.x-re.x)*H,a=(e.min.x-re.x)*H),Z>=0?(c=(e.min.y-re.y)*Z,p=(e.max.y-re.y)*Z):(c=(e.max.y-re.y)*Z,p=(e.min.y-re.y)*Z),r>p||c>a||((c>r||isNaN(r))&&(r=c),(p<a||isNaN(a))&&(a=p),ne>=0?(A=(e.min.z-re.z)*ne,N=(e.max.z-re.z)*ne):(A=(e.max.z-re.z)*ne,N=(e.min.z-re.z)*ne),r>N||A>a)||((A>r||r!==r)&&(r=A),(N<a||a!==a)&&(a=N),a<0)?null:this.at(r>=0?r:a,n)}intersectsBox(e){return this.intersectBox(e,sa)!==null}intersectTriangle(e,n,r,a,c){ts.subVectors(n,e),oo.subVectors(r,e),ls.crossVectors(ts,oo);let p=this.direction.dot(ls),A;if(p>0){if(a)return null;A=1}else if(p<0)A=-1,p=-p;else return null;gr.subVectors(this.origin,e);const N=A*this.direction.dot(oo.crossVectors(gr,oo));if(N<0)return null;const H=A*this.direction.dot(ts.cross(gr));if(H<0||N+H>p)return null;const Z=-A*gr.dot(ls);return Z<0?null:this.at(Z/p,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Gi{constructor(){Gi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,r,a,c,p,A,N,H,Z,ne,re,le,me,pe,de){const Ce=this.elements;return Ce[0]=e,Ce[4]=n,Ce[8]=r,Ce[12]=a,Ce[1]=c,Ce[5]=p,Ce[9]=A,Ce[13]=N,Ce[2]=H,Ce[6]=Z,Ce[10]=ne,Ce[14]=re,Ce[3]=le,Ce[7]=me,Ce[11]=pe,Ce[15]=de,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Gi().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,a=1/oa.setFromMatrixColumn(e,0).length(),c=1/oa.setFromMatrixColumn(e,1).length(),p=1/oa.setFromMatrixColumn(e,2).length();return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n[3]=0,n[4]=r[4]*c,n[5]=r[5]*c,n[6]=r[6]*c,n[7]=0,n[8]=r[8]*p,n[9]=r[9]*p,n[10]=r[10]*p,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,a=e.y,c=e.z,p=Math.cos(r),A=Math.sin(r),N=Math.cos(a),H=Math.sin(a),Z=Math.cos(c),ne=Math.sin(c);if(e.order==="XYZ"){const re=p*Z,le=p*ne,me=A*Z,pe=A*ne;n[0]=N*Z,n[4]=-N*ne,n[8]=H,n[1]=le+me*H,n[5]=re-pe*H,n[9]=-A*N,n[2]=pe-re*H,n[6]=me+le*H,n[10]=p*N}else if(e.order==="YXZ"){const re=N*Z,le=N*ne,me=H*Z,pe=H*ne;n[0]=re+pe*A,n[4]=me*A-le,n[8]=p*H,n[1]=p*ne,n[5]=p*Z,n[9]=-A,n[2]=le*A-me,n[6]=pe+re*A,n[10]=p*N}else if(e.order==="ZXY"){const re=N*Z,le=N*ne,me=H*Z,pe=H*ne;n[0]=re-pe*A,n[4]=-p*ne,n[8]=me+le*A,n[1]=le+me*A,n[5]=p*Z,n[9]=pe-re*A,n[2]=-p*H,n[6]=A,n[10]=p*N}else if(e.order==="ZYX"){const re=p*Z,le=p*ne,me=A*Z,pe=A*ne;n[0]=N*Z,n[4]=me*H-le,n[8]=re*H+pe,n[1]=N*ne,n[5]=pe*H+re,n[9]=le*H-me,n[2]=-H,n[6]=A*N,n[10]=p*N}else if(e.order==="YZX"){const re=p*N,le=p*H,me=A*N,pe=A*H;n[0]=N*Z,n[4]=pe-re*ne,n[8]=me*ne+le,n[1]=ne,n[5]=p*Z,n[9]=-A*Z,n[2]=-H*Z,n[6]=le*ne+me,n[10]=re-pe*ne}else if(e.order==="XZY"){const re=p*N,le=p*H,me=A*N,pe=A*H;n[0]=N*Z,n[4]=-ne,n[8]=H*Z,n[1]=re*ne+pe,n[5]=p*Z,n[9]=le*ne-me,n[2]=me*ne-le,n[6]=A*Z,n[10]=pe*ne+re}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Nc,e,uc)}lookAt(e,n,r){const a=this.elements;return br.subVectors(e,n),br.lengthSq()===0&&(br.z=1),br.normalize(),Go.crossVectors(r,br),Go.lengthSq()===0&&(Math.abs(r.z)===1?br.x+=1e-4:br.z+=1e-4,br.normalize(),Go.crossVectors(r,br)),Go.normalize(),Ho.crossVectors(br,Go),a[0]=Go.x,a[4]=Ho.x,a[8]=br.x,a[1]=Go.y,a[5]=Ho.y,a[9]=br.y,a[2]=Go.z,a[6]=Ho.z,a[10]=br.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,a=n.elements,c=this.elements,p=r[0],A=r[4],N=r[8],H=r[12],Z=r[1],ne=r[5],re=r[9],le=r[13],me=r[2],pe=r[6],de=r[10],Ce=r[14],Fe=r[3],Re=r[7],De=r[11],Ve=r[15],ct=a[0],bt=a[4],Ne=a[8],dt=a[12],vt=a[1],Ut=a[5],hn=a[9],Kt=a[13],Dt=a[2],sn=a[6],kn=a[10],Zn=a[14],Ln=a[3],ui=a[7],si=a[11],Qi=a[15];return c[0]=p*ct+A*vt+N*Dt+H*Ln,c[4]=p*bt+A*Ut+N*sn+H*ui,c[8]=p*Ne+A*hn+N*kn+H*si,c[12]=p*dt+A*Kt+N*Zn+H*Qi,c[1]=Z*ct+ne*vt+re*Dt+le*Ln,c[5]=Z*bt+ne*Ut+re*sn+le*ui,c[9]=Z*Ne+ne*hn+re*kn+le*si,c[13]=Z*dt+ne*Kt+re*Zn+le*Qi,c[2]=me*ct+pe*vt+de*Dt+Ce*Ln,c[6]=me*bt+pe*Ut+de*sn+Ce*ui,c[10]=me*Ne+pe*hn+de*kn+Ce*si,c[14]=me*dt+pe*Kt+de*Zn+Ce*Qi,c[3]=Fe*ct+Re*vt+De*Dt+Ve*Ln,c[7]=Fe*bt+Re*Ut+De*sn+Ve*ui,c[11]=Fe*Ne+Re*hn+De*kn+Ve*si,c[15]=Fe*dt+Re*Kt+De*Zn+Ve*Qi,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],a=e[8],c=e[12],p=e[1],A=e[5],N=e[9],H=e[13],Z=e[2],ne=e[6],re=e[10],le=e[14],me=e[3],pe=e[7],de=e[11],Ce=e[15];return me*(+c*N*ne-a*H*ne-c*A*re+r*H*re+a*A*le-r*N*le)+pe*(+n*N*le-n*H*re+c*p*re-a*p*le+a*H*Z-c*N*Z)+de*(+n*H*ne-n*A*le-c*p*ne+r*p*le+c*A*Z-r*H*Z)+Ce*(-a*A*Z-n*N*ne+n*A*re+a*p*ne-r*p*re+r*N*Z)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=n,a[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],a=e[2],c=e[3],p=e[4],A=e[5],N=e[6],H=e[7],Z=e[8],ne=e[9],re=e[10],le=e[11],me=e[12],pe=e[13],de=e[14],Ce=e[15],Fe=ne*de*H-pe*re*H+pe*N*le-A*de*le-ne*N*Ce+A*re*Ce,Re=me*re*H-Z*de*H-me*N*le+p*de*le+Z*N*Ce-p*re*Ce,De=Z*pe*H-me*ne*H+me*A*le-p*pe*le-Z*A*Ce+p*ne*Ce,Ve=me*ne*N-Z*pe*N-me*A*re+p*pe*re+Z*A*de-p*ne*de,ct=n*Fe+r*Re+a*De+c*Ve;if(ct===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const bt=1/ct;return e[0]=Fe*bt,e[1]=(pe*re*c-ne*de*c-pe*a*le+r*de*le+ne*a*Ce-r*re*Ce)*bt,e[2]=(A*de*c-pe*N*c+pe*a*H-r*de*H-A*a*Ce+r*N*Ce)*bt,e[3]=(ne*N*c-A*re*c-ne*a*H+r*re*H+A*a*le-r*N*le)*bt,e[4]=Re*bt,e[5]=(Z*de*c-me*re*c+me*a*le-n*de*le-Z*a*Ce+n*re*Ce)*bt,e[6]=(me*N*c-p*de*c-me*a*H+n*de*H+p*a*Ce-n*N*Ce)*bt,e[7]=(p*re*c-Z*N*c+Z*a*H-n*re*H-p*a*le+n*N*le)*bt,e[8]=De*bt,e[9]=(me*ne*c-Z*pe*c-me*r*le+n*pe*le+Z*r*Ce-n*ne*Ce)*bt,e[10]=(p*pe*c-me*A*c+me*r*H-n*pe*H-p*r*Ce+n*A*Ce)*bt,e[11]=(Z*A*c-p*ne*c-Z*r*H+n*ne*H+p*r*le-n*A*le)*bt,e[12]=Ve*bt,e[13]=(Z*pe*a-me*ne*a+me*r*re-n*pe*re-Z*r*de+n*ne*de)*bt,e[14]=(me*A*a-p*pe*a-me*r*N+n*pe*N+p*r*de-n*A*de)*bt,e[15]=(p*ne*a-Z*A*a+Z*r*N-n*ne*N-p*r*re+n*A*re)*bt,this}scale(e){const n=this.elements,r=e.x,a=e.y,c=e.z;return n[0]*=r,n[4]*=a,n[8]*=c,n[1]*=r,n[5]*=a,n[9]*=c,n[2]*=r,n[6]*=a,n[10]*=c,n[3]*=r,n[7]*=a,n[11]*=c,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,a))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),a=Math.sin(n),c=1-r,p=e.x,A=e.y,N=e.z,H=c*p,Z=c*A;return this.set(H*p+r,H*A-a*N,H*N+a*A,0,H*A+a*N,Z*A+r,Z*N-a*p,0,H*N-a*A,Z*N+a*p,c*N*N+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,a,c,p){return this.set(1,r,c,0,e,1,p,0,n,a,1,0,0,0,0,1),this}compose(e,n,r){const a=this.elements,c=n._x,p=n._y,A=n._z,N=n._w,H=c+c,Z=p+p,ne=A+A,re=c*H,le=c*Z,me=c*ne,pe=p*Z,de=p*ne,Ce=A*ne,Fe=N*H,Re=N*Z,De=N*ne,Ve=r.x,ct=r.y,bt=r.z;return a[0]=(1-(pe+Ce))*Ve,a[1]=(le+De)*Ve,a[2]=(me-Re)*Ve,a[3]=0,a[4]=(le-De)*ct,a[5]=(1-(re+Ce))*ct,a[6]=(de+Fe)*ct,a[7]=0,a[8]=(me+Re)*bt,a[9]=(de-Fe)*bt,a[10]=(1-(re+pe))*bt,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,n,r){const a=this.elements;let c=oa.set(a[0],a[1],a[2]).length();const p=oa.set(a[4],a[5],a[6]).length(),A=oa.set(a[8],a[9],a[10]).length();this.determinant()<0&&(c=-c),e.x=a[12],e.y=a[13],e.z=a[14],jr.copy(this);const H=1/c,Z=1/p,ne=1/A;return jr.elements[0]*=H,jr.elements[1]*=H,jr.elements[2]*=H,jr.elements[4]*=Z,jr.elements[5]*=Z,jr.elements[6]*=Z,jr.elements[8]*=ne,jr.elements[9]*=ne,jr.elements[10]*=ne,n.setFromRotationMatrix(jr),r.x=c,r.y=p,r.z=A,this}makePerspective(e,n,r,a,c,p){const A=this.elements,N=2*c/(n-e),H=2*c/(r-a),Z=(n+e)/(n-e),ne=(r+a)/(r-a),re=-(p+c)/(p-c),le=-2*p*c/(p-c);return A[0]=N,A[4]=0,A[8]=Z,A[12]=0,A[1]=0,A[5]=H,A[9]=ne,A[13]=0,A[2]=0,A[6]=0,A[10]=re,A[14]=le,A[3]=0,A[7]=0,A[11]=-1,A[15]=0,this}makeOrthographic(e,n,r,a,c,p){const A=this.elements,N=1/(n-e),H=1/(r-a),Z=1/(p-c),ne=(n+e)*N,re=(r+a)*H,le=(p+c)*Z;return A[0]=2*N,A[4]=0,A[8]=0,A[12]=-ne,A[1]=0,A[5]=2*H,A[9]=0,A[13]=-re,A[2]=0,A[6]=0,A[10]=-2*Z,A[14]=-le,A[3]=0,A[7]=0,A[11]=0,A[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let a=0;a<16;a++)if(n[a]!==r[a])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const oa=new nt,jr=new Gi,Nc=new nt(0,0,0),uc=new nt(1,1,1),Go=new nt,Ho=new nt,br=new nt,Pa=new Gi,hc=new Mo;class zo{constructor(e=0,n=0,r=0,a=zo.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,a=this._order){return this._x=e,this._y=n,this._z=r,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const a=e.elements,c=a[0],p=a[4],A=a[8],N=a[1],H=a[5],Z=a[9],ne=a[2],re=a[6],le=a[10];switch(n){case"XYZ":this._y=Math.asin(Ns(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-Z,le),this._z=Math.atan2(-p,c)):(this._x=Math.atan2(re,H),this._z=0);break;case"YXZ":this._x=Math.asin(-Ns(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(A,le),this._z=Math.atan2(N,H)):(this._y=Math.atan2(-ne,c),this._z=0);break;case"ZXY":this._x=Math.asin(Ns(re,-1,1)),Math.abs(re)<.9999999?(this._y=Math.atan2(-ne,le),this._z=Math.atan2(-p,H)):(this._y=0,this._z=Math.atan2(N,c));break;case"ZYX":this._y=Math.asin(-Ns(ne,-1,1)),Math.abs(ne)<.9999999?(this._x=Math.atan2(re,le),this._z=Math.atan2(N,c)):(this._x=0,this._z=Math.atan2(-p,H));break;case"YZX":this._z=Math.asin(Ns(N,-1,1)),Math.abs(N)<.9999999?(this._x=Math.atan2(-Z,H),this._y=Math.atan2(-ne,c)):(this._x=0,this._y=Math.atan2(A,le));break;case"XZY":this._z=Math.asin(-Ns(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(re,H),this._y=Math.atan2(A,c)):(this._x=Math.atan2(-Z,le),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return Pa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Pa,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return hc.setFromEuler(this),this.setFromQuaternion(hc,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}zo.DefaultOrder="XYZ",zo.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class ms{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Us=0;const Yr=new nt,gs=new Mo,ao=new Gi,qa=new nt,Hl=new nt,Ad=new nt,vd=new Mo,Ah=new nt(1,0,0),vh=new nt(0,1,0),yd=new nt(0,0,1),jf={type:"added"},xd={type:"removed"};class ds extends ia{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Us++}),this.uuid=Co(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ds.DefaultUp.clone();const e=new nt,n=new zo,r=new Mo,a=new nt(1,1,1);function c(){r.setFromEuler(n,!1)}function p(){n.setFromQuaternion(r,void 0,!1)}n._onChange(c),r._onChange(p),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Gi},normalMatrix:{value:new No}}),this.matrix=new Gi,this.matrixWorld=new Gi,this.matrixAutoUpdate=ds.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ds.DefaultMatrixWorldAutoUpdate,this.layers=new ms,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return gs.setFromAxisAngle(e,n),this.quaternion.multiply(gs),this}rotateOnWorldAxis(e,n){return gs.setFromAxisAngle(e,n),this.quaternion.premultiply(gs),this}rotateX(e){return this.rotateOnAxis(Ah,e)}rotateY(e){return this.rotateOnAxis(vh,e)}rotateZ(e){return this.rotateOnAxis(yd,e)}translateOnAxis(e,n){return Yr.copy(e).applyQuaternion(this.quaternion),this.position.add(Yr.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Ah,e)}translateY(e){return this.translateOnAxis(vh,e)}translateZ(e){return this.translateOnAxis(yd,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ao.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?qa.copy(e):qa.set(e,n,r);const a=this.parent;this.updateWorldMatrix(!0,!1),Hl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ao.lookAt(Hl,qa,this.up):ao.lookAt(qa,Hl,this.up),this.quaternion.setFromRotationMatrix(ao),a&&(ao.extractRotation(a.matrixWorld),gs.setFromRotationMatrix(ao),this.quaternion.premultiply(gs.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(jf)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(xd)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(xd)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ao.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ao.multiply(e.parent.matrixWorld)),e.applyMatrix4(ao),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,a=this.children.length;r<a;r++){const p=this.children[r].getObjectByProperty(e,n);if(p!==void 0)return p}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hl,e,Ad),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hl,vd,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,a=n.length;r<a;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,a=n.length;r<a;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,a=n.length;r<a;r++){const c=n[r];(c.matrixWorldAutoUpdate===!0||e===!0)&&c.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const a=this.children;for(let c=0,p=a.length;c<p;c++){const A=a[c];A.matrixWorldAutoUpdate===!0&&A.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON()));function c(A,N){return A[N.uuid]===void 0&&(A[N.uuid]=N.toJSON(e)),N.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=c(e.geometries,this.geometry);const A=this.geometry.parameters;if(A!==void 0&&A.shapes!==void 0){const N=A.shapes;if(Array.isArray(N))for(let H=0,Z=N.length;H<Z;H++){const ne=N[H];c(e.shapes,ne)}else c(e.shapes,N)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(c(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const A=[];for(let N=0,H=this.material.length;N<H;N++)A.push(c(e.materials,this.material[N]));a.material=A}else a.material=c(e.materials,this.material);if(this.children.length>0){a.children=[];for(let A=0;A<this.children.length;A++)a.children.push(this.children[A].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let A=0;A<this.animations.length;A++){const N=this.animations[A];a.animations.push(c(e.animations,N))}}if(n){const A=p(e.geometries),N=p(e.materials),H=p(e.textures),Z=p(e.images),ne=p(e.shapes),re=p(e.skeletons),le=p(e.animations),me=p(e.nodes);A.length>0&&(r.geometries=A),N.length>0&&(r.materials=N),H.length>0&&(r.textures=H),Z.length>0&&(r.images=Z),ne.length>0&&(r.shapes=ne),re.length>0&&(r.skeletons=re),le.length>0&&(r.animations=le),me.length>0&&(r.nodes=me)}return r.object=a,r;function p(A){const N=[];for(const H in A){const Z=A[H];delete Z.metadata,N.push(Z)}return N}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const a=e.children[r];this.add(a.clone())}return this}}ds.DefaultUp=new nt(0,1,0),ds.DefaultMatrixAutoUpdate=!0,ds.DefaultMatrixWorldAutoUpdate=!0;const ba=new nt,io=new nt,_a=new nt,Oa=new nt,zl=new nt,vu=new nt,bm=new nt,Wf=new nt,Kf=new nt,Xf=new nt;class Fa{constructor(e=new nt,n=new nt,r=new nt){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,a){a.subVectors(r,n),ba.subVectors(e,n),a.cross(ba);const c=a.lengthSq();return c>0?a.multiplyScalar(1/Math.sqrt(c)):a.set(0,0,0)}static getBarycoord(e,n,r,a,c){ba.subVectors(a,n),io.subVectors(r,n),_a.subVectors(e,n);const p=ba.dot(ba),A=ba.dot(io),N=ba.dot(_a),H=io.dot(io),Z=io.dot(_a),ne=p*H-A*A;if(ne===0)return c.set(-2,-1,-1);const re=1/ne,le=(H*N-A*Z)*re,me=(p*Z-A*N)*re;return c.set(1-le-me,me,le)}static containsPoint(e,n,r,a){return this.getBarycoord(e,n,r,a,Oa),Oa.x>=0&&Oa.y>=0&&Oa.x+Oa.y<=1}static getUV(e,n,r,a,c,p,A,N){return this.getBarycoord(e,n,r,a,Oa),N.set(0,0),N.addScaledVector(c,Oa.x),N.addScaledVector(p,Oa.y),N.addScaledVector(A,Oa.z),N}static isFrontFacing(e,n,r,a){return ba.subVectors(r,n),io.subVectors(e,n),ba.cross(io).dot(a)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,a){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,n,r,a){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ba.subVectors(this.c,this.b),io.subVectors(this.a,this.b),ba.cross(io).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(.3333333333333333)}getNormal(e){return Fa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Fa.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,a,c){return Fa.getUV(e,this.a,this.b,this.c,n,r,a,c)}containsPoint(e){return Fa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,a=this.b,c=this.c;let p,A;zl.subVectors(a,r),vu.subVectors(c,r),Wf.subVectors(e,r);const N=zl.dot(Wf),H=vu.dot(Wf);if(N<=0&&H<=0)return n.copy(r);Kf.subVectors(e,a);const Z=zl.dot(Kf),ne=vu.dot(Kf);if(Z>=0&&ne<=Z)return n.copy(a);const re=N*ne-Z*H;if(re<=0&&N>=0&&Z<=0)return p=N/(N-Z),n.copy(r).addScaledVector(zl,p);Xf.subVectors(e,c);const le=zl.dot(Xf),me=vu.dot(Xf);if(me>=0&&le<=me)return n.copy(c);const pe=le*H-N*me;if(pe<=0&&H>=0&&me<=0)return A=H/(H-me),n.copy(r).addScaledVector(vu,A);const de=Z*me-le*ne;if(de<=0&&ne-Z>=0&&le-me>=0)return bm.subVectors(c,a),A=(ne-Z)/(ne-Z+(le-me)),n.copy(a).addScaledVector(bm,A);const Ce=1/(de+pe+re);return p=pe*Ce,A=re*Ce,n.copy(r).addScaledVector(zl,p).addScaledVector(vu,A)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let c0=0;class Zo extends ia{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:c0++}),this.uuid=Co(),this.name="",this.type="Material",this.blending=j,this.side=L,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Se,this.blendDst=Be,this.blendEquation=Ee,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=je,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=rh,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=js,this.stencilZFail=js,this.stencilZPass=js,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const a=this[n];if(a===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}a&&a.isColor?a.set(r):a&&a.isVector3&&r&&r.isVector3?a.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==j&&(r.blending=this.blending),this.side!==L&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function a(c){const p=[];for(const A in c){const N=c[A];delete N.metadata,p.push(N)}return p}if(n){const c=a(e.textures),p=a(e.images);c.length>0&&(r.textures=c),p.length>0&&(r.images=p)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const a=n.length;r=new Array(a);for(let c=0;c!==a;++c)r[c]=n[c].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class lo extends Zo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zs=new nt,yu=new On;class Rs{constructor(e,n,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r===!0,this.usage=Dc,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let a=0,c=this.itemSize;a<c;a++)this.array[e+a]=n.array[r+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)yu.fromBufferAttribute(this,n),yu.applyMatrix3(e),this.setXY(n,yu.x,yu.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Zs.fromBufferAttribute(this,n),Zs.applyMatrix3(e),this.setXYZ(n,Zs.x,Zs.y,Zs.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Zs.fromBufferAttribute(this,n),Zs.applyMatrix4(e),this.setXYZ(n,Zs.x,Zs.y,Zs.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Zs.fromBufferAttribute(this,n),Zs.applyNormalMatrix(e),this.setXYZ(n,Zs.x,Zs.y,Zs.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Zs.fromBufferAttribute(this,n),Zs.transformDirection(e),this.setXYZ(n,Zs.x,Zs.y,Zs.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=La(n,this.array)),n}setX(e,n){return this.normalized&&(n=Is(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=La(n,this.array)),n}setY(e,n){return this.normalized&&(n=Is(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=La(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Is(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=La(n,this.array)),n}setW(e,n){return this.normalized&&(n=Is(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Is(n,this.array),r=Is(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,a){return e*=this.itemSize,this.normalized&&(n=Is(n,this.array),r=Is(r,this.array),a=Is(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=a,this}setXYZW(e,n,r,a,c){return e*=this.itemSize,this.normalized&&(n=Is(n,this.array),r=Is(r,this.array),a=Is(a,this.array),c=Is(c,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=a,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Dc&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class u0 extends Rs{constructor(e,n,r){super(new Int8Array(e),n,r)}}class _m extends Rs{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class wm extends Rs{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class Cm extends Rs{constructor(e,n,r){super(new Int16Array(e),n,r)}}class Yf extends Rs{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class xu extends Rs{constructor(e,n,r){super(new Int32Array(e),n,r)}}class qf extends Rs{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Jf extends Rs{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}}class Yi extends Rs{constructor(e,n,r){super(new Float32Array(e),n,r)}}class yh extends Rs{constructor(e,n,r){super(new Float64Array(e),n,r)}}let Eu=0;const wa=new Gi,Bo=new ds,kc=new nt,qi=new xa,Qn=new xa,cs=new nt;class Or extends ia{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Eu++}),this.uuid=Co(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(md(e)?qf:Yf)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const c=new No().getNormalMatrix(e);r.applyNormalMatrix(c),r.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return wa.makeRotationFromQuaternion(e),this.applyMatrix4(wa),this}rotateX(e){return wa.makeRotationX(e),this.applyMatrix4(wa),this}rotateY(e){return wa.makeRotationY(e),this.applyMatrix4(wa),this}rotateZ(e){return wa.makeRotationZ(e),this.applyMatrix4(wa),this}translate(e,n,r){return wa.makeTranslation(e,n,r),this.applyMatrix4(wa),this}scale(e,n,r){return wa.makeScale(e,n,r),this.applyMatrix4(wa),this}lookAt(e){return Bo.lookAt(e),Bo.updateMatrix(),this.applyMatrix4(Bo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kc).negate(),this.translate(kc.x,kc.y,kc.z),this}setFromPoints(e){const n=[];for(let r=0,a=e.length;r<a;r++){const c=e[r];n.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new Yi(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new nt(-1/0,-1/0,-1/0),new nt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,a=n.length;r<a;r++){const c=n[r];qi.setFromBufferAttribute(c),this.morphTargetsRelative?(cs.addVectors(this.boundingBox.min,qi.min),this.boundingBox.expandByPoint(cs),cs.addVectors(this.boundingBox.max,qi.max),this.boundingBox.expandByPoint(cs)):(this.boundingBox.expandByPoint(qi.min),this.boundingBox.expandByPoint(qi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new qo);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new nt,1/0);return}if(e){const r=this.boundingSphere.center;if(qi.setFromBufferAttribute(e),n)for(let c=0,p=n.length;c<p;c++){const A=n[c];Qn.setFromBufferAttribute(A),this.morphTargetsRelative?(cs.addVectors(qi.min,Qn.min),qi.expandByPoint(cs),cs.addVectors(qi.max,Qn.max),qi.expandByPoint(cs)):(qi.expandByPoint(Qn.min),qi.expandByPoint(Qn.max))}qi.getCenter(r);let a=0;for(let c=0,p=e.count;c<p;c++)cs.fromBufferAttribute(e,c),a=Math.max(a,r.distanceToSquared(cs));if(n)for(let c=0,p=n.length;c<p;c++){const A=n[c],N=this.morphTargetsRelative;for(let H=0,Z=A.count;H<Z;H++)cs.fromBufferAttribute(A,H),N&&(kc.fromBufferAttribute(e,H),cs.add(kc)),a=Math.max(a,r.distanceToSquared(cs))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,a=n.position.array,c=n.normal.array,p=n.uv.array,A=a.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Rs(new Float32Array(4*A),4));const N=this.getAttribute("tangent").array,H=[],Z=[];for(let vt=0;vt<A;vt++)H[vt]=new nt,Z[vt]=new nt;const ne=new nt,re=new nt,le=new nt,me=new On,pe=new On,de=new On,Ce=new nt,Fe=new nt;function Re(vt,Ut,hn){ne.fromArray(a,vt*3),re.fromArray(a,Ut*3),le.fromArray(a,hn*3),me.fromArray(p,vt*2),pe.fromArray(p,Ut*2),de.fromArray(p,hn*2),re.sub(ne),le.sub(ne),pe.sub(me),de.sub(me);const Kt=1/(pe.x*de.y-de.x*pe.y);!isFinite(Kt)||(Ce.copy(re).multiplyScalar(de.y).addScaledVector(le,-pe.y).multiplyScalar(Kt),Fe.copy(le).multiplyScalar(pe.x).addScaledVector(re,-de.x).multiplyScalar(Kt),H[vt].add(Ce),H[Ut].add(Ce),H[hn].add(Ce),Z[vt].add(Fe),Z[Ut].add(Fe),Z[hn].add(Fe))}let De=this.groups;De.length===0&&(De=[{start:0,count:r.length}]);for(let vt=0,Ut=De.length;vt<Ut;++vt){const hn=De[vt],Kt=hn.start,Dt=hn.count;for(let sn=Kt,kn=Kt+Dt;sn<kn;sn+=3)Re(r[sn+0],r[sn+1],r[sn+2])}const Ve=new nt,ct=new nt,bt=new nt,Ne=new nt;function dt(vt){bt.fromArray(c,vt*3),Ne.copy(bt);const Ut=H[vt];Ve.copy(Ut),Ve.sub(bt.multiplyScalar(bt.dot(Ut))).normalize(),ct.crossVectors(Ne,Ut);const Kt=ct.dot(Z[vt])<0?-1:1;N[vt*4]=Ve.x,N[vt*4+1]=Ve.y,N[vt*4+2]=Ve.z,N[vt*4+3]=Kt}for(let vt=0,Ut=De.length;vt<Ut;++vt){const hn=De[vt],Kt=hn.start,Dt=hn.count;for(let sn=Kt,kn=Kt+Dt;sn<kn;sn+=3)dt(r[sn+0]),dt(r[sn+1]),dt(r[sn+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Rs(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let re=0,le=r.count;re<le;re++)r.setXYZ(re,0,0,0);const a=new nt,c=new nt,p=new nt,A=new nt,N=new nt,H=new nt,Z=new nt,ne=new nt;if(e)for(let re=0,le=e.count;re<le;re+=3){const me=e.getX(re+0),pe=e.getX(re+1),de=e.getX(re+2);a.fromBufferAttribute(n,me),c.fromBufferAttribute(n,pe),p.fromBufferAttribute(n,de),Z.subVectors(p,c),ne.subVectors(a,c),Z.cross(ne),A.fromBufferAttribute(r,me),N.fromBufferAttribute(r,pe),H.fromBufferAttribute(r,de),A.add(Z),N.add(Z),H.add(Z),r.setXYZ(me,A.x,A.y,A.z),r.setXYZ(pe,N.x,N.y,N.z),r.setXYZ(de,H.x,H.y,H.z)}else for(let re=0,le=n.count;re<le;re+=3)a.fromBufferAttribute(n,re+0),c.fromBufferAttribute(n,re+1),p.fromBufferAttribute(n,re+2),Z.subVectors(p,c),ne.subVectors(a,c),Z.cross(ne),r.setXYZ(re+0,Z.x,Z.y,Z.z),r.setXYZ(re+1,Z.x,Z.y,Z.z),r.setXYZ(re+2,Z.x,Z.y,Z.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)cs.fromBufferAttribute(e,n),cs.normalize(),e.setXYZ(n,cs.x,cs.y,cs.z)}toNonIndexed(){function e(A,N){const H=A.array,Z=A.itemSize,ne=A.normalized,re=new H.constructor(N.length*Z);let le=0,me=0;for(let pe=0,de=N.length;pe<de;pe++){A.isInterleavedBufferAttribute?le=N[pe]*A.data.stride+A.offset:le=N[pe]*Z;for(let Ce=0;Ce<Z;Ce++)re[me++]=H[le++]}return new Rs(re,Z,ne)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Or,r=this.index.array,a=this.attributes;for(const A in a){const N=a[A],H=e(N,r);n.setAttribute(A,H)}const c=this.morphAttributes;for(const A in c){const N=[],H=c[A];for(let Z=0,ne=H.length;Z<ne;Z++){const re=H[Z],le=e(re,r);N.push(le)}n.morphAttributes[A]=N}n.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let A=0,N=p.length;A<N;A++){const H=p[A];n.addGroup(H.start,H.count,H.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const N=this.parameters;for(const H in N)N[H]!==void 0&&(e[H]=N[H]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const N in r){const H=r[N];e.data.attributes[N]=H.toJSON(e.data)}const a={};let c=!1;for(const N in this.morphAttributes){const H=this.morphAttributes[N],Z=[];for(let ne=0,re=H.length;ne<re;ne++){const le=H[ne];Z.push(le.toJSON(e.data))}Z.length>0&&(a[N]=Z,c=!0)}c&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));const A=this.boundingSphere;return A!==null&&(e.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const a=e.attributes;for(const H in a){const Z=a[H];this.setAttribute(H,Z.clone(n))}const c=e.morphAttributes;for(const H in c){const Z=[],ne=c[H];for(let re=0,le=ne.length;re<le;re++)Z.push(ne[re].clone(n));this.morphAttributes[H]=Z}this.morphTargetsRelative=e.morphTargetsRelative;const p=e.groups;for(let H=0,Z=p.length;H<Z;H++){const ne=p[H];this.addGroup(ne.start,ne.count,ne.materialIndex)}const A=e.boundingBox;A!==null&&(this.boundingBox=A.clone());const N=e.boundingSphere;return N!==null&&(this.boundingSphere=N.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Uc=new Gi,xh=new Jo,go=new qo,os=new nt,aa=new nt,dc=new nt,To=new nt,Je=new nt,Ed=new nt,bd=new nt,$o=new nt,Ja=new nt,Gc=new On,Eh=new On,fc=new On,Hc=new nt,pc=new nt;class $s extends ds{constructor(e=new Or,n=new lo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,p=a.length;c<p;c++){const A=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=c}}}}raycast(e,n){const r=this.geometry,a=this.material,c=this.matrixWorld;if(a===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),go.copy(r.boundingSphere),go.applyMatrix4(c),e.ray.intersectsSphere(go)===!1)||(Uc.copy(c).invert(),xh.copy(e.ray).applyMatrix4(Uc),r.boundingBox!==null&&xh.intersectsBox(r.boundingBox)===!1))return;let p;const A=r.index,N=r.attributes.position,H=r.morphAttributes.position,Z=r.morphTargetsRelative,ne=r.attributes.uv,re=r.attributes.uv2,le=r.groups,me=r.drawRange;if(A!==null)if(Array.isArray(a))for(let pe=0,de=le.length;pe<de;pe++){const Ce=le[pe],Fe=a[Ce.materialIndex],Re=Math.max(Ce.start,me.start),De=Math.min(A.count,Math.min(Ce.start+Ce.count,me.start+me.count));for(let Ve=Re,ct=De;Ve<ct;Ve+=3){const bt=A.getX(Ve),Ne=A.getX(Ve+1),dt=A.getX(Ve+2);p=Vl(this,Fe,e,xh,N,H,Z,ne,re,bt,Ne,dt),p&&(p.faceIndex=Math.floor(Ve/3),p.face.materialIndex=Ce.materialIndex,n.push(p))}}else{const pe=Math.max(0,me.start),de=Math.min(A.count,me.start+me.count);for(let Ce=pe,Fe=de;Ce<Fe;Ce+=3){const Re=A.getX(Ce),De=A.getX(Ce+1),Ve=A.getX(Ce+2);p=Vl(this,a,e,xh,N,H,Z,ne,re,Re,De,Ve),p&&(p.faceIndex=Math.floor(Ce/3),n.push(p))}}else if(N!==void 0)if(Array.isArray(a))for(let pe=0,de=le.length;pe<de;pe++){const Ce=le[pe],Fe=a[Ce.materialIndex],Re=Math.max(Ce.start,me.start),De=Math.min(N.count,Math.min(Ce.start+Ce.count,me.start+me.count));for(let Ve=Re,ct=De;Ve<ct;Ve+=3){const bt=Ve,Ne=Ve+1,dt=Ve+2;p=Vl(this,Fe,e,xh,N,H,Z,ne,re,bt,Ne,dt),p&&(p.faceIndex=Math.floor(Ve/3),p.face.materialIndex=Ce.materialIndex,n.push(p))}}else{const pe=Math.max(0,me.start),de=Math.min(N.count,me.start+me.count);for(let Ce=pe,Fe=de;Ce<Fe;Ce+=3){const Re=Ce,De=Ce+1,Ve=Ce+2;p=Vl(this,a,e,xh,N,H,Z,ne,re,Re,De,Ve),p&&(p.faceIndex=Math.floor(Ce/3),n.push(p))}}}}function zc(x,e,n,r,a,c,p,A){let N;if(e.side===P?N=r.intersectTriangle(p,c,a,!0,A):N=r.intersectTriangle(a,c,p,e.side!==Y,A),N===null)return null;pc.copy(A),pc.applyMatrix4(x.matrixWorld);const H=n.ray.origin.distanceTo(pc);return H<n.near||H>n.far?null:{distance:H,point:pc.clone(),object:x}}function Vl(x,e,n,r,a,c,p,A,N,H,Z,ne){os.fromBufferAttribute(a,H),aa.fromBufferAttribute(a,Z),dc.fromBufferAttribute(a,ne);const re=x.morphTargetInfluences;if(c&&re){bd.set(0,0,0),$o.set(0,0,0),Ja.set(0,0,0);for(let me=0,pe=c.length;me<pe;me++){const de=re[me],Ce=c[me];de!==0&&(To.fromBufferAttribute(Ce,H),Je.fromBufferAttribute(Ce,Z),Ed.fromBufferAttribute(Ce,ne),p?(bd.addScaledVector(To,de),$o.addScaledVector(Je,de),Ja.addScaledVector(Ed,de)):(bd.addScaledVector(To.sub(os),de),$o.addScaledVector(Je.sub(aa),de),Ja.addScaledVector(Ed.sub(dc),de)))}os.add(bd),aa.add($o),dc.add(Ja)}x.isSkinnedMesh&&(x.boneTransform(H,os),x.boneTransform(Z,aa),x.boneTransform(ne,dc));const le=zc(x,e,n,r,os,aa,dc,Hc);if(le){A&&(Gc.fromBufferAttribute(A,H),Eh.fromBufferAttribute(A,Z),fc.fromBufferAttribute(A,ne),le.uv=Fa.getUV(Hc,os,aa,dc,Gc,Eh,fc,new On)),N&&(Gc.fromBufferAttribute(N,H),Eh.fromBufferAttribute(N,Z),fc.fromBufferAttribute(N,ne),le.uv2=Fa.getUV(Hc,os,aa,dc,Gc,Eh,fc,new On));const me={a:H,b:Z,c:ne,normal:new nt,materialIndex:0};Fa.getNormal(os,aa,dc,me.normal),le.face=me}return le}class Za extends Or{constructor(e=1,n=1,r=1,a=1,c=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:a,heightSegments:c,depthSegments:p};const A=this;a=Math.floor(a),c=Math.floor(c),p=Math.floor(p);const N=[],H=[],Z=[],ne=[];let re=0,le=0;me("z","y","x",-1,-1,r,n,e,p,c,0),me("z","y","x",1,-1,r,n,-e,p,c,1),me("x","z","y",1,1,e,r,n,a,p,2),me("x","z","y",1,-1,e,r,-n,a,p,3),me("x","y","z",1,-1,e,n,r,a,c,4),me("x","y","z",-1,-1,e,n,-r,a,c,5),this.setIndex(N),this.setAttribute("position",new Yi(H,3)),this.setAttribute("normal",new Yi(Z,3)),this.setAttribute("uv",new Yi(ne,2));function me(pe,de,Ce,Fe,Re,De,Ve,ct,bt,Ne,dt){const vt=De/bt,Ut=Ve/Ne,hn=De/2,Kt=Ve/2,Dt=ct/2,sn=bt+1,kn=Ne+1;let Zn=0,Ln=0;const ui=new nt;for(let si=0;si<kn;si++){const Qi=si*Ut-Kt;for(let Li=0;Li<sn;Li++){const gn=Li*vt-hn;ui[pe]=gn*Fe,ui[de]=Qi*Re,ui[Ce]=Dt,H.push(ui.x,ui.y,ui.z),ui[pe]=0,ui[de]=0,ui[Ce]=ct>0?1:-1,Z.push(ui.x,ui.y,ui.z),ne.push(Li/bt),ne.push(1-si/Ne),Zn+=1}}for(let si=0;si<Ne;si++)for(let Qi=0;Qi<bt;Qi++){const Li=re+Qi+sn*si,gn=re+Qi+sn*(si+1),$n=re+(Qi+1)+sn*(si+1),_i=re+(Qi+1)+sn*si;N.push(Li,gn,_i),N.push(gn,$n,_i),Ln+=6}A.addGroup(le,Ln,dt),le+=Ln,re+=Zn}}static fromJSON(e){return new Za(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function mc(x){const e={};for(const n in x){e[n]={};for(const r in x[n]){const a=x[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?e[n][r]=a.clone():Array.isArray(a)?e[n][r]=a.slice():e[n][r]=a}}return e}function Vo(x){const e={};for(let n=0;n<x.length;n++){const r=mc(x[n]);for(const a in r)e[a]=r[a]}return e}function bu(x){const e=[];for(let n=0;n<x.length;n++)e.push(x[n].clone());return e}function h0(x){return x.getRenderTarget()===null&&x.outputEncoding===vr?Ds:_o}const Mm={clone:mc,merge:Vo};var Tm=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Sm=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ea extends Zo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Tm,this.fragmentShader=Sm,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mc(e.uniforms),this.uniformsGroups=bu(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const a in this.uniforms){const p=this.uniforms[a].value;p&&p.isTexture?n.uniforms[a]={type:"t",value:p.toJSON(e).uuid}:p&&p.isColor?n.uniforms[a]={type:"c",value:p.getHex()}:p&&p.isVector2?n.uniforms[a]={type:"v2",value:p.toArray()}:p&&p.isVector3?n.uniforms[a]={type:"v3",value:p.toArray()}:p&&p.isVector4?n.uniforms[a]={type:"v4",value:p.toArray()}:p&&p.isMatrix3?n.uniforms[a]={type:"m3",value:p.toArray()}:p&&p.isMatrix4?n.uniforms[a]={type:"m4",value:p.toArray()}:n.uniforms[a]={value:p}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const r={};for(const a in this.extensions)this.extensions[a]===!0&&(r[a]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class $a extends ds{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gi,this.projectionMatrix=new Gi,this.projectionMatrixInverse=new Gi}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ao extends $a{constructor(e=50,n=1,r=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=a,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Pc*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(al*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Pc*2*Math.atan(Math.tan(al*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,a,c,p){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=a,this.view.width=c,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(al*.5*this.fov)/this.zoom,r=2*n,a=this.aspect*r,c=-.5*a;const p=this.view;if(this.view!==null&&this.view.enabled){const N=p.fullWidth,H=p.fullHeight;c+=p.offsetX*a/N,n-=p.offsetY*r/H,a*=p.width/N,r*=p.height/H}const A=this.filmOffset;A!==0&&(c+=e*A/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+a,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const gc=-90,Na=1;class Zf extends ds{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r;const a=new Ao(gc,Na,e,n);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(1,0,0),this.add(a);const c=new Ao(gc,Na,e,n);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(-1,0,0),this.add(c);const p=new Ao(gc,Na,e,n);p.layers=this.layers,p.up.set(0,0,-1),p.lookAt(0,1,0),this.add(p);const A=new Ao(gc,Na,e,n);A.layers=this.layers,A.up.set(0,0,1),A.lookAt(0,-1,0),this.add(A);const N=new Ao(gc,Na,e,n);N.layers=this.layers,N.up.set(0,1,0),N.lookAt(0,0,1),this.add(N);const H=new Ao(gc,Na,e,n);H.layers=this.layers,H.up.set(0,1,0),H.lookAt(0,0,-1),this.add(H)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[a,c,p,A,N,H]=this.children,Z=e.getRenderTarget(),ne=e.toneMapping,re=e.xr.enabled;e.toneMapping=bn,e.xr.enabled=!1;const le=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,a),e.setRenderTarget(r,1),e.render(n,c),e.setRenderTarget(r,2),e.render(n,p),e.setRenderTarget(r,3),e.render(n,A),e.setRenderTarget(r,4),e.render(n,N),r.texture.generateMipmaps=le,e.setRenderTarget(r,5),e.render(n,H),e.setRenderTarget(Z),e.toneMapping=ne,e.xr.enabled=re,r.texture.needsPMREMUpdate=!0}}class Vc extends Ws{constructor(e,n,r,a,c,p,A,N,H,Z){e=e!==void 0?e:[],n=n!==void 0?n:Ye,super(e,n,r,a,c,p,A,N,H,Z),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $f extends ko{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},a=[r,r,r,r,r,r];this.texture=new Vc(a,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ke}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Za(5,5,5),c=new ea({name:"CubemapFromEquirect",uniforms:mc(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:P,blending:J});c.uniforms.tEquirect.value=n;const p=new $s(a,c),A=n.minFilter;return n.minFilter===$t&&(n.minFilter=Ke),new Zf(1,10,this).update(e,p),n.minFilter=A,p.geometry.dispose(),p.material.dispose(),this}clear(e,n,r,a){const c=e.getRenderTarget();for(let p=0;p<6;p++)e.setRenderTarget(this,p),e.clear(n,r,a);e.setRenderTarget(c)}}const Ql=new nt,ir=new nt,bh=new No;class Qo{constructor(e=new nt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,a){return this.normal.set(e,n,r),this.constant=a,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const a=Ql.subVectors(r,n).cross(ir.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const r=e.delta(Ql),a=this.normal.dot(r);if(a===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const c=-(e.start.dot(this.normal)+this.constant)/a;return c<0||c>1?null:n.copy(r).multiplyScalar(c).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||bh.getNormalMatrix(e),a=this.coplanarPoint(Ql).applyMatrix4(e),c=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _h=new qo,ep=new nt;class dl{constructor(e=new Qo,n=new Qo,r=new Qo,a=new Qo,c=new Qo,p=new Qo){this.planes=[e,n,r,a,c,p]}set(e,n,r,a,c,p){const A=this.planes;return A[0].copy(e),A[1].copy(n),A[2].copy(r),A[3].copy(a),A[4].copy(c),A[5].copy(p),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,a=r[0],c=r[1],p=r[2],A=r[3],N=r[4],H=r[5],Z=r[6],ne=r[7],re=r[8],le=r[9],me=r[10],pe=r[11],de=r[12],Ce=r[13],Fe=r[14],Re=r[15];return n[0].setComponents(A-a,ne-N,pe-re,Re-de).normalize(),n[1].setComponents(A+a,ne+N,pe+re,Re+de).normalize(),n[2].setComponents(A+c,ne+H,pe+le,Re+Ce).normalize(),n[3].setComponents(A-c,ne-H,pe-le,Re-Ce).normalize(),n[4].setComponents(A-p,ne-Z,pe-me,Re-Fe).normalize(),n[5].setComponents(A+p,ne+Z,pe+me,Re+Fe).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),_h.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSprite(e){return _h.center.set(0,0,0),_h.radius=.7071067811865476,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const n=this.planes,r=e.center,a=-e.radius;for(let c=0;c<6;c++)if(n[c].distanceToPoint(r)<a)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const a=n[r];if(ep.x=a.normal.x>0?e.max.x:e.min.x,ep.y=a.normal.y>0?e.max.y:e.min.y,ep.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(ep)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function wh(){let x=null,e=!1,n=null,r=null;function a(c,p){n(c,p),r=x.requestAnimationFrame(a)}return{start:function(){e!==!0&&n!==null&&(r=x.requestAnimationFrame(a),e=!0)},stop:function(){x.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(c){n=c},setContext:function(c){x=c}}}function ka(x,e){const n=e.isWebGL2,r=new WeakMap;function a(H,Z){const ne=H.array,re=H.usage,le=x.createBuffer();x.bindBuffer(Z,le),x.bufferData(Z,ne,re),H.onUploadCallback();let me;if(ne instanceof Float32Array)me=5126;else if(ne instanceof Uint16Array)if(H.isFloat16BufferAttribute)if(n)me=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else me=5123;else if(ne instanceof Int16Array)me=5122;else if(ne instanceof Uint32Array)me=5125;else if(ne instanceof Int32Array)me=5124;else if(ne instanceof Int8Array)me=5120;else if(ne instanceof Uint8Array)me=5121;else if(ne instanceof Uint8ClampedArray)me=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+ne);return{buffer:le,type:me,bytesPerElement:ne.BYTES_PER_ELEMENT,version:H.version}}function c(H,Z,ne){const re=Z.array,le=Z.updateRange;x.bindBuffer(ne,H),le.count===-1?x.bufferSubData(ne,0,re):(n?x.bufferSubData(ne,le.offset*re.BYTES_PER_ELEMENT,re,le.offset,le.count):x.bufferSubData(ne,le.offset*re.BYTES_PER_ELEMENT,re.subarray(le.offset,le.offset+le.count)),le.count=-1),Z.onUploadCallback()}function p(H){return H.isInterleavedBufferAttribute&&(H=H.data),r.get(H)}function A(H){H.isInterleavedBufferAttribute&&(H=H.data);const Z=r.get(H);Z&&(x.deleteBuffer(Z.buffer),r.delete(H))}function N(H,Z){if(H.isGLBufferAttribute){const re=r.get(H);(!re||re.version<H.version)&&r.set(H,{buffer:H.buffer,type:H.type,bytesPerElement:H.elementSize,version:H.version});return}H.isInterleavedBufferAttribute&&(H=H.data);const ne=r.get(H);ne===void 0?r.set(H,a(H,Z)):ne.version<H.version&&(c(ne.buffer,H,Z),ne.version=H.version)}return{get:p,remove:A,update:N}}class _u extends Or{constructor(e=1,n=1,r=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:a};const c=e/2,p=n/2,A=Math.floor(r),N=Math.floor(a),H=A+1,Z=N+1,ne=e/A,re=n/N,le=[],me=[],pe=[],de=[];for(let Ce=0;Ce<Z;Ce++){const Fe=Ce*re-p;for(let Re=0;Re<H;Re++){const De=Re*ne-c;me.push(De,-Fe,0),pe.push(0,0,1),de.push(Re/A),de.push(1-Ce/N)}}for(let Ce=0;Ce<N;Ce++)for(let Fe=0;Fe<A;Fe++){const Re=Fe+H*Ce,De=Fe+H*(Ce+1),Ve=Fe+1+H*(Ce+1),ct=Fe+1+H*Ce;le.push(Re,De,ct),le.push(De,Ve,ct)}this.setIndex(le),this.setAttribute("position",new Yi(me,3)),this.setAttribute("normal",new Yi(pe,3)),this.setAttribute("uv",new Yi(de,2))}static fromJSON(e){return new _u(e.width,e.height,e.widthSegments,e.heightSegments)}}var d0=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,wu=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Im=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,tv=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,f0=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ch=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ac="vec3 transformed = vec3( position );",tp=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_d=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,nv=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,iv=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,p0=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,m0=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,g0=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,rv=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,A0=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Rm=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,sv=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,ov=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,fl=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,pl=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vc=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Bm=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,yc=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Mh=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Th=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,v0="gl_FragColor = linearToOutputTexel( gl_FragColor );",Lm=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Dm=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Pm=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,vo=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,av=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,y0=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ml=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,np=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Fi=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xc=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ks=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ip=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lv=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cv=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,jl=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Om=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Sh=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Ua=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,wd=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,jo=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,x0=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ih=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Fm=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Qc=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jc=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Wc=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Nm=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,km=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Um=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,rp=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,sp=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,op=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ap=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lp=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cp=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Gm=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,up=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Cu=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,E0=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,uv=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,hv=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,hp=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Rh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dp=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Bh=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Lh=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,fp=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Cd=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Md=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,ns=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Ei=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,gl=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Hm=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zm=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,b0=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dv=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fv=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_0=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,w0=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,C0=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,M0=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,T0=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,S0=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Vm=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,pv=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,mv=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,gv=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Av=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,vv=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pp=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mp=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,yv=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,xv=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Qm=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Mu=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,I0=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Td=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Sd=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,gp=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Wr={alphamap_fragment:d0,alphamap_pars_fragment:wu,alphatest_fragment:Im,alphatest_pars_fragment:tv,aomap_fragment:f0,aomap_pars_fragment:Ch,begin_vertex:Ac,beginnormal_vertex:tp,bsdfs:_d,iridescence_fragment:nv,bumpmap_pars_fragment:iv,clipping_planes_fragment:p0,clipping_planes_pars_fragment:m0,clipping_planes_pars_vertex:g0,clipping_planes_vertex:rv,color_fragment:A0,color_pars_fragment:Rm,color_pars_vertex:sv,color_vertex:ov,common:fl,cube_uv_reflection_fragment:pl,defaultnormal_vertex:vc,displacementmap_pars_vertex:Bm,displacementmap_vertex:yc,emissivemap_fragment:Mh,emissivemap_pars_fragment:Th,encodings_fragment:v0,encodings_pars_fragment:Lm,envmap_fragment:Dm,envmap_common_pars_fragment:Pm,envmap_pars_fragment:vo,envmap_pars_vertex:av,envmap_physical_pars_fragment:Sh,envmap_vertex:y0,fog_vertex:ml,fog_pars_vertex:np,fog_fragment:Fi,fog_pars_fragment:xc,gradientmap_pars_fragment:Ks,lightmap_fragment:ip,lightmap_pars_fragment:lv,lights_lambert_fragment:cv,lights_lambert_pars_fragment:jl,lights_pars_begin:Om,lights_toon_fragment:Ua,lights_toon_pars_fragment:wd,lights_phong_fragment:jo,lights_phong_pars_fragment:x0,lights_physical_fragment:Ih,lights_physical_pars_fragment:Fm,lights_fragment_begin:Qc,lights_fragment_maps:jc,lights_fragment_end:Wc,logdepthbuf_fragment:Nm,logdepthbuf_pars_fragment:km,logdepthbuf_pars_vertex:Um,logdepthbuf_vertex:rp,map_fragment:sp,map_pars_fragment:op,map_particle_fragment:ap,map_particle_pars_fragment:lp,metalnessmap_fragment:cp,metalnessmap_pars_fragment:Gm,morphcolor_vertex:up,morphnormal_vertex:Cu,morphtarget_pars_vertex:E0,morphtarget_vertex:uv,normal_fragment_begin:hv,normal_fragment_maps:hp,normal_pars_fragment:Rh,normal_pars_vertex:dp,normal_vertex:Bh,normalmap_pars_fragment:Lh,clearcoat_normal_fragment_begin:fp,clearcoat_normal_fragment_maps:Cd,clearcoat_pars_fragment:Md,iridescence_pars_fragment:ns,output_fragment:Ei,packing:gl,premultiplied_alpha_fragment:Hm,project_vertex:zm,dithering_fragment:b0,dithering_pars_fragment:dv,roughnessmap_fragment:fv,roughnessmap_pars_fragment:_0,shadowmap_pars_fragment:w0,shadowmap_pars_vertex:C0,shadowmap_vertex:M0,shadowmask_pars_fragment:T0,skinbase_vertex:S0,skinning_pars_vertex:Vm,skinning_vertex:pv,skinnormal_vertex:mv,specularmap_fragment:gv,specularmap_pars_fragment:Av,tonemapping_fragment:vv,tonemapping_pars_fragment:pp,transmission_fragment:mp,transmission_pars_fragment:yv,uv_pars_fragment:xv,uv_pars_vertex:Qm,uv_vertex:Mu,uv2_pars_fragment:I0,uv2_pars_vertex:Td,uv2_vertex:Sd,worldpos_vertex:gp,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`},gi={common:{diffuse:{value:new Si(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new No},uv2Transform:{value:new No},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new On(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Si(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Si(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new No}},sprite:{diffuse:{value:new Si(16777215)},opacity:{value:1},center:{value:new On(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new No}}},Ca={basic:{uniforms:Vo([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.fog]),vertexShader:Wr.meshbasic_vert,fragmentShader:Wr.meshbasic_frag},lambert:{uniforms:Vo([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.fog,gi.lights,{emissive:{value:new Si(0)}}]),vertexShader:Wr.meshlambert_vert,fragmentShader:Wr.meshlambert_frag},phong:{uniforms:Vo([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.fog,gi.lights,{emissive:{value:new Si(0)},specular:{value:new Si(1118481)},shininess:{value:30}}]),vertexShader:Wr.meshphong_vert,fragmentShader:Wr.meshphong_frag},standard:{uniforms:Vo([gi.common,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.roughnessmap,gi.metalnessmap,gi.fog,gi.lights,{emissive:{value:new Si(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wr.meshphysical_vert,fragmentShader:Wr.meshphysical_frag},toon:{uniforms:Vo([gi.common,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.gradientmap,gi.fog,gi.lights,{emissive:{value:new Si(0)}}]),vertexShader:Wr.meshtoon_vert,fragmentShader:Wr.meshtoon_frag},matcap:{uniforms:Vo([gi.common,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.fog,{matcap:{value:null}}]),vertexShader:Wr.meshmatcap_vert,fragmentShader:Wr.meshmatcap_frag},points:{uniforms:Vo([gi.points,gi.fog]),vertexShader:Wr.points_vert,fragmentShader:Wr.points_frag},dashed:{uniforms:Vo([gi.common,gi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wr.linedashed_vert,fragmentShader:Wr.linedashed_frag},depth:{uniforms:Vo([gi.common,gi.displacementmap]),vertexShader:Wr.depth_vert,fragmentShader:Wr.depth_frag},normal:{uniforms:Vo([gi.common,gi.bumpmap,gi.normalmap,gi.displacementmap,{opacity:{value:1}}]),vertexShader:Wr.meshnormal_vert,fragmentShader:Wr.meshnormal_frag},sprite:{uniforms:Vo([gi.sprite,gi.fog]),vertexShader:Wr.sprite_vert,fragmentShader:Wr.sprite_frag},background:{uniforms:{uvTransform:{value:new No},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wr.background_vert,fragmentShader:Wr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Wr.backgroundCube_vert,fragmentShader:Wr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wr.cube_vert,fragmentShader:Wr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wr.equirect_vert,fragmentShader:Wr.equirect_frag},distanceRGBA:{uniforms:Vo([gi.common,gi.displacementmap,{referencePosition:{value:new nt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wr.distanceRGBA_vert,fragmentShader:Wr.distanceRGBA_frag},shadow:{uniforms:Vo([gi.lights,gi.fog,{color:{value:new Si(0)},opacity:{value:1}}]),vertexShader:Wr.shadow_vert,fragmentShader:Wr.shadow_frag}};Ca.physical={uniforms:Vo([Ca.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new On(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Si(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new On},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Si(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Si(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Wr.meshphysical_vert,fragmentShader:Wr.meshphysical_frag};const Dd={r:0,b:0,g:0};function B0(x,e,n,r,a,c,p){const A=new Si(0);let N=c===!0?0:1,H,Z,ne=null,re=0,le=null;function me(de,Ce){let Fe=!1,Re=Ce.isScene===!0?Ce.background:null;Re&&Re.isTexture&&(Re=(Ce.backgroundBlurriness>0?n:e).get(Re));const De=x.xr,Ve=De.getSession&&De.getSession();Ve&&Ve.environmentBlendMode==="additive"&&(Re=null),Re===null?pe(A,N):Re&&Re.isColor&&(pe(Re,1),Fe=!0),(x.autoClear||Fe)&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil),Re&&(Re.isCubeTexture||Re.mapping===Me)?(Z===void 0&&(Z=new $s(new Za(1,1,1),new ea({name:"BackgroundCubeMaterial",uniforms:mc(Ca.backgroundCube.uniforms),vertexShader:Ca.backgroundCube.vertexShader,fragmentShader:Ca.backgroundCube.fragmentShader,side:P,depthTest:!1,depthWrite:!1,fog:!1})),Z.geometry.deleteAttribute("normal"),Z.geometry.deleteAttribute("uv"),Z.onBeforeRender=function(ct,bt,Ne){this.matrixWorld.copyPosition(Ne.matrixWorld)},Object.defineProperty(Z.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(Z)),Z.material.uniforms.envMap.value=Re,Z.material.uniforms.flipEnvMap.value=Re.isCubeTexture&&Re.isRenderTargetTexture===!1?-1:1,Z.material.uniforms.backgroundBlurriness.value=Ce.backgroundBlurriness,Z.material.uniforms.backgroundIntensity.value=Ce.backgroundIntensity,(ne!==Re||re!==Re.version||le!==x.toneMapping)&&(Z.material.needsUpdate=!0,ne=Re,re=Re.version,le=x.toneMapping),Z.layers.enableAll(),de.unshift(Z,Z.geometry,Z.material,0,0,null)):Re&&Re.isTexture&&(H===void 0&&(H=new $s(new _u(2,2),new ea({name:"BackgroundMaterial",uniforms:mc(Ca.background.uniforms),vertexShader:Ca.background.vertexShader,fragmentShader:Ca.background.fragmentShader,side:L,depthTest:!1,depthWrite:!1,fog:!1})),H.geometry.deleteAttribute("normal"),Object.defineProperty(H.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(H)),H.material.uniforms.t2D.value=Re,H.material.uniforms.backgroundIntensity.value=Ce.backgroundIntensity,Re.matrixAutoUpdate===!0&&Re.updateMatrix(),H.material.uniforms.uvTransform.value.copy(Re.matrix),(ne!==Re||re!==Re.version||le!==x.toneMapping)&&(H.material.needsUpdate=!0,ne=Re,re=Re.version,le=x.toneMapping),H.layers.enableAll(),de.unshift(H,H.geometry,H.material,0,0,null))}function pe(de,Ce){de.getRGB(Dd,h0(x)),r.buffers.color.setClear(Dd.r,Dd.g,Dd.b,Ce,p)}return{getClearColor:function(){return A},setClearColor:function(de,Ce=1){A.set(de),N=Ce,pe(A,N)},getClearAlpha:function(){return N},setClearAlpha:function(de){N=de,pe(A,N)},render:me}}function Zm(x,e,n,r){const a=x.getParameter(34921),c=r.isWebGL2?null:e.get("OES_vertex_array_object"),p=r.isWebGL2||c!==null,A={},N=de(null);let H=N,Z=!1;function ne(Dt,sn,kn,Zn,Ln){let ui=!1;if(p){const si=pe(Zn,kn,sn);H!==si&&(H=si,le(H.object)),ui=Ce(Dt,Zn,kn,Ln),ui&&Fe(Dt,Zn,kn,Ln)}else{const si=sn.wireframe===!0;(H.geometry!==Zn.id||H.program!==kn.id||H.wireframe!==si)&&(H.geometry=Zn.id,H.program=kn.id,H.wireframe=si,ui=!0)}Ln!==null&&n.update(Ln,34963),(ui||Z)&&(Z=!1,Ne(Dt,sn,kn,Zn),Ln!==null&&x.bindBuffer(34963,n.get(Ln).buffer))}function re(){return r.isWebGL2?x.createVertexArray():c.createVertexArrayOES()}function le(Dt){return r.isWebGL2?x.bindVertexArray(Dt):c.bindVertexArrayOES(Dt)}function me(Dt){return r.isWebGL2?x.deleteVertexArray(Dt):c.deleteVertexArrayOES(Dt)}function pe(Dt,sn,kn){const Zn=kn.wireframe===!0;let Ln=A[Dt.id];Ln===void 0&&(Ln={},A[Dt.id]=Ln);let ui=Ln[sn.id];ui===void 0&&(ui={},Ln[sn.id]=ui);let si=ui[Zn];return si===void 0&&(si=de(re()),ui[Zn]=si),si}function de(Dt){const sn=[],kn=[],Zn=[];for(let Ln=0;Ln<a;Ln++)sn[Ln]=0,kn[Ln]=0,Zn[Ln]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:sn,enabledAttributes:kn,attributeDivisors:Zn,object:Dt,attributes:{},index:null}}function Ce(Dt,sn,kn,Zn){const Ln=H.attributes,ui=sn.attributes;let si=0;const Qi=kn.getAttributes();for(const Li in Qi)if(Qi[Li].location>=0){const $n=Ln[Li];let _i=ui[Li];if(_i===void 0&&(Li==="instanceMatrix"&&Dt.instanceMatrix&&(_i=Dt.instanceMatrix),Li==="instanceColor"&&Dt.instanceColor&&(_i=Dt.instanceColor)),$n===void 0||$n.attribute!==_i||_i&&$n.data!==_i.data)return!0;si++}return H.attributesNum!==si||H.index!==Zn}function Fe(Dt,sn,kn,Zn){const Ln={},ui=sn.attributes;let si=0;const Qi=kn.getAttributes();for(const Li in Qi)if(Qi[Li].location>=0){let $n=ui[Li];$n===void 0&&(Li==="instanceMatrix"&&Dt.instanceMatrix&&($n=Dt.instanceMatrix),Li==="instanceColor"&&Dt.instanceColor&&($n=Dt.instanceColor));const _i={};_i.attribute=$n,$n&&$n.data&&(_i.data=$n.data),Ln[Li]=_i,si++}H.attributes=Ln,H.attributesNum=si,H.index=Zn}function Re(){const Dt=H.newAttributes;for(let sn=0,kn=Dt.length;sn<kn;sn++)Dt[sn]=0}function De(Dt){Ve(Dt,0)}function Ve(Dt,sn){const kn=H.newAttributes,Zn=H.enabledAttributes,Ln=H.attributeDivisors;kn[Dt]=1,Zn[Dt]===0&&(x.enableVertexAttribArray(Dt),Zn[Dt]=1),Ln[Dt]!==sn&&((r.isWebGL2?x:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Dt,sn),Ln[Dt]=sn)}function ct(){const Dt=H.newAttributes,sn=H.enabledAttributes;for(let kn=0,Zn=sn.length;kn<Zn;kn++)sn[kn]!==Dt[kn]&&(x.disableVertexAttribArray(kn),sn[kn]=0)}function bt(Dt,sn,kn,Zn,Ln,ui){r.isWebGL2===!0&&(kn===5124||kn===5125)?x.vertexAttribIPointer(Dt,sn,kn,Ln,ui):x.vertexAttribPointer(Dt,sn,kn,Zn,Ln,ui)}function Ne(Dt,sn,kn,Zn){if(r.isWebGL2===!1&&(Dt.isInstancedMesh||Zn.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;Re();const Ln=Zn.attributes,ui=kn.getAttributes(),si=sn.defaultAttributeValues;for(const Qi in ui){const Li=ui[Qi];if(Li.location>=0){let gn=Ln[Qi];if(gn===void 0&&(Qi==="instanceMatrix"&&Dt.instanceMatrix&&(gn=Dt.instanceMatrix),Qi==="instanceColor"&&Dt.instanceColor&&(gn=Dt.instanceColor)),gn!==void 0){const $n=gn.normalized,_i=gn.itemSize,ln=n.get(gn);if(ln===void 0)continue;const Wi=ln.buffer,wi=ln.type,Ar=ln.bytesPerElement;if(gn.isInterleavedBufferAttribute){const mi=gn.data,rs=mi.stride,Hn=gn.offset;if(mi.isInstancedInterleavedBuffer){for(let Rn=0;Rn<Li.locationSize;Rn++)Ve(Li.location+Rn,mi.meshPerAttribute);Dt.isInstancedMesh!==!0&&Zn._maxInstanceCount===void 0&&(Zn._maxInstanceCount=mi.meshPerAttribute*mi.count)}else for(let Rn=0;Rn<Li.locationSize;Rn++)De(Li.location+Rn);x.bindBuffer(34962,Wi);for(let Rn=0;Rn<Li.locationSize;Rn++)bt(Li.location+Rn,_i/Li.locationSize,wi,$n,rs*Ar,(Hn+_i/Li.locationSize*Rn)*Ar)}else{if(gn.isInstancedBufferAttribute){for(let mi=0;mi<Li.locationSize;mi++)Ve(Li.location+mi,gn.meshPerAttribute);Dt.isInstancedMesh!==!0&&Zn._maxInstanceCount===void 0&&(Zn._maxInstanceCount=gn.meshPerAttribute*gn.count)}else for(let mi=0;mi<Li.locationSize;mi++)De(Li.location+mi);x.bindBuffer(34962,Wi);for(let mi=0;mi<Li.locationSize;mi++)bt(Li.location+mi,_i/Li.locationSize,wi,$n,_i*Ar,_i/Li.locationSize*mi*Ar)}}else if(si!==void 0){const $n=si[Qi];if($n!==void 0)switch($n.length){case 2:x.vertexAttrib2fv(Li.location,$n);break;case 3:x.vertexAttrib3fv(Li.location,$n);break;case 4:x.vertexAttrib4fv(Li.location,$n);break;default:x.vertexAttrib1fv(Li.location,$n)}}}}ct()}function dt(){hn();for(const Dt in A){const sn=A[Dt];for(const kn in sn){const Zn=sn[kn];for(const Ln in Zn)me(Zn[Ln].object),delete Zn[Ln];delete sn[kn]}delete A[Dt]}}function vt(Dt){if(A[Dt.id]===void 0)return;const sn=A[Dt.id];for(const kn in sn){const Zn=sn[kn];for(const Ln in Zn)me(Zn[Ln].object),delete Zn[Ln];delete sn[kn]}delete A[Dt.id]}function Ut(Dt){for(const sn in A){const kn=A[sn];if(kn[Dt.id]===void 0)continue;const Zn=kn[Dt.id];for(const Ln in Zn)me(Zn[Ln].object),delete Zn[Ln];delete kn[Dt.id]}}function hn(){Kt(),Z=!0,H!==N&&(H=N,le(H.object))}function Kt(){N.geometry=null,N.program=null,N.wireframe=!1}return{setup:ne,reset:hn,resetDefaultState:Kt,dispose:dt,releaseStatesOfGeometry:vt,releaseStatesOfProgram:Ut,initAttributes:Re,enableAttribute:De,disableUnusedAttributes:ct}}function Tu(x,e,n,r){const a=r.isWebGL2;let c;function p(H){c=H}function A(H,Z){x.drawArrays(c,H,Z),n.update(Z,c,1)}function N(H,Z,ne){if(ne===0)return;let re,le;if(a)re=x,le="drawArraysInstanced";else if(re=e.get("ANGLE_instanced_arrays"),le="drawArraysInstancedANGLE",re===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}re[le](c,H,Z,ne),n.update(Z,c,ne)}this.setMode=p,this.render=A,this.renderInstances=N}function L0(x,e,n){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const bt=e.get("EXT_texture_filter_anisotropic");r=x.getParameter(bt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function c(bt){if(bt==="highp"){if(x.getShaderPrecisionFormat(35633,36338).precision>0&&x.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";bt="mediump"}return bt==="mediump"&&x.getShaderPrecisionFormat(35633,36337).precision>0&&x.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const p=typeof WebGL2RenderingContext<"u"&&x instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&x instanceof WebGL2ComputeRenderingContext;let A=n.precision!==void 0?n.precision:"highp";const N=c(A);N!==A&&(console.warn("THREE.WebGLRenderer:",A,"not supported, using",N,"instead."),A=N);const H=p||e.has("WEBGL_draw_buffers"),Z=n.logarithmicDepthBuffer===!0,ne=x.getParameter(34930),re=x.getParameter(35660),le=x.getParameter(3379),me=x.getParameter(34076),pe=x.getParameter(34921),de=x.getParameter(36347),Ce=x.getParameter(36348),Fe=x.getParameter(36349),Re=re>0,De=p||e.has("OES_texture_float"),Ve=Re&&De,ct=p?x.getParameter(36183):0;return{isWebGL2:p,drawBuffers:H,getMaxAnisotropy:a,getMaxPrecision:c,precision:A,logarithmicDepthBuffer:Z,maxTextures:ne,maxVertexTextures:re,maxTextureSize:le,maxCubemapSize:me,maxAttributes:pe,maxVertexUniforms:de,maxVaryings:Ce,maxFragmentUniforms:Fe,vertexTextures:Re,floatFragmentTextures:De,floatVertexTextures:Ve,maxSamples:ct}}function $m(x){const e=this;let n=null,r=0,a=!1,c=!1;const p=new Qo,A=new No,N={value:null,needsUpdate:!1};this.uniform=N,this.numPlanes=0,this.numIntersection=0,this.init=function(ne,re,le){const me=ne.length!==0||re||r!==0||a;return a=re,n=Z(ne,le,0),r=ne.length,me},this.beginShadows=function(){c=!0,Z(null)},this.endShadows=function(){c=!1,H()},this.setState=function(ne,re,le){const me=ne.clippingPlanes,pe=ne.clipIntersection,de=ne.clipShadows,Ce=x.get(ne);if(!a||me===null||me.length===0||c&&!de)c?Z(null):H();else{const Fe=c?0:r,Re=Fe*4;let De=Ce.clippingState||null;N.value=De,De=Z(me,re,Re,le);for(let Ve=0;Ve!==Re;++Ve)De[Ve]=n[Ve];Ce.clippingState=De,this.numIntersection=pe?this.numPlanes:0,this.numPlanes+=Fe}};function H(){N.value!==n&&(N.value=n,N.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function Z(ne,re,le,me){const pe=ne!==null?ne.length:0;let de=null;if(pe!==0){if(de=N.value,me!==!0||de===null){const Ce=le+pe*4,Fe=re.matrixWorldInverse;A.getNormalMatrix(Fe),(de===null||de.length<Ce)&&(de=new Float32Array(Ce));for(let Re=0,De=le;Re!==pe;++Re,De+=4)p.copy(ne[Re]).applyMatrix4(Fe,A),p.normal.toArray(de,De),de[De+3]=p.constant}N.value=de,N.needsUpdate=!0}return e.numPlanes=pe,e.numIntersection=0,de}}function Ep(x){let e=new WeakMap;function n(p,A){return A===He?p.mapping=Ye:A===et&&(p.mapping=ze),p}function r(p){if(p&&p.isTexture&&p.isRenderTargetTexture===!1){const A=p.mapping;if(A===He||A===et)if(e.has(p)){const N=e.get(p).texture;return n(N,p.mapping)}else{const N=p.image;if(N&&N.height>0){const H=new $f(N.height/2);return H.fromEquirectangularTexture(x,p),e.set(p,H),p.addEventListener("dispose",a),n(H.texture,p.mapping)}else return null}}return p}function a(p){const A=p.target;A.removeEventListener("dispose",a);const N=e.get(A);N!==void 0&&(e.delete(A),N.dispose())}function c(){e=new WeakMap}return{get:r,dispose:c}}class Su extends $a{constructor(e=-1,n=1,r=1,a=-1,c=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=a,this.near=c,this.far=p,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,a,c,p){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=a,this.view.width=c,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let c=r-e,p=r+e,A=a+n,N=a-n;if(this.view!==null&&this.view.enabled){const H=(this.right-this.left)/this.view.fullWidth/this.zoom,Z=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=H*this.view.offsetX,p=c+H*this.view.width,A-=Z*this.view.offsetY,N=A-Z*this.view.height}this.projectionMatrix.makeOrthographic(c,p,A,N,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Iu=4,bp=[.125,.215,.35,.446,.526,.582],Kc=20,_p=new Su,Pd=new Si;let Xc=null;const Wl=(1+Math.sqrt(5))/2,Ga=1/Wl,Od=[new nt(1,1,1),new nt(-1,1,1),new nt(1,1,-1),new nt(-1,1,-1),new nt(0,Wl,Ga),new nt(0,Wl,-Ga),new nt(Ga,0,Wl),new nt(-Ga,0,Wl),new nt(Wl,Ga,0),new nt(-Wl,Ga,0)];class Dh{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,a=100){Xc=this._renderer.getRenderTarget(),this._setSize(256);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,a,c),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Kl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=D0(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Xc),e.scissorTest=!1,Ru(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Ye||e.mapping===ze?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Xc=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Ke,minFilter:Ke,generateMipmaps:!1,type:Ft,format:Zi,encoding:Jr,depthBuffer:!1},a=Cp(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Cp(e,n,r);const{_lodMax:c}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=wp(c)),this._blurMaterial=eg(c,e,n)}return a}_compileMaterial(e){const n=new $s(this._lodPlanes[0],e);this._renderer.compile(n,_p)}_sceneToCubeUV(e,n,r,a){const A=new Ao(90,1,n,r),N=[1,-1,1,1,1,1],H=[1,1,1,-1,-1,-1],Z=this._renderer,ne=Z.autoClear,re=Z.toneMapping;Z.getClearColor(Pd),Z.toneMapping=bn,Z.autoClear=!1;const le=new lo({name:"PMREM.Background",side:P,depthWrite:!1,depthTest:!1}),me=new $s(new Za,le);let pe=!1;const de=e.background;de?de.isColor&&(le.color.copy(de),e.background=null,pe=!0):(le.color.copy(Pd),pe=!0);for(let Ce=0;Ce<6;Ce++){const Fe=Ce%3;Fe===0?(A.up.set(0,N[Ce],0),A.lookAt(H[Ce],0,0)):Fe===1?(A.up.set(0,0,N[Ce]),A.lookAt(0,H[Ce],0)):(A.up.set(0,N[Ce],0),A.lookAt(0,0,H[Ce]));const Re=this._cubeSize;Ru(a,Fe*Re,Ce>2?Re:0,Re,Re),Z.setRenderTarget(a),pe&&Z.render(me,A),Z.render(e,A)}me.geometry.dispose(),me.material.dispose(),Z.toneMapping=re,Z.autoClear=ne,e.background=de}_textureToCubeUV(e,n){const r=this._renderer,a=e.mapping===Ye||e.mapping===ze;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=Kl()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=D0());const c=a?this._cubemapMaterial:this._equirectMaterial,p=new $s(this._lodPlanes[0],c),A=c.uniforms;A.envMap.value=e;const N=this._cubeSize;Ru(n,0,0,3*N,2*N),r.setRenderTarget(n),r.render(p,_p)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let a=1;a<this._lodPlanes.length;a++){const c=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),p=Od[(a-1)%Od.length];this._blur(e,a-1,a,c,p)}n.autoClear=r}_blur(e,n,r,a,c){const p=this._pingPongRenderTarget;this._halfBlur(e,p,n,r,a,"latitudinal",c),this._halfBlur(p,e,r,r,a,"longitudinal",c)}_halfBlur(e,n,r,a,c,p,A){const N=this._renderer,H=this._blurMaterial;p!=="latitudinal"&&p!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const Z=3,ne=new $s(this._lodPlanes[a],H),re=H.uniforms,le=this._sizeLods[r]-1,me=isFinite(c)?Math.PI/(2*le):2*Math.PI/(2*Kc-1),pe=c/me,de=isFinite(c)?1+Math.floor(Z*pe):Kc;de>Kc&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${de} samples when the maximum is set to ${Kc}`);const Ce=[];let Fe=0;for(let bt=0;bt<Kc;++bt){const Ne=bt/pe,dt=Math.exp(-Ne*Ne/2);Ce.push(dt),bt===0?Fe+=dt:bt<de&&(Fe+=2*dt)}for(let bt=0;bt<Ce.length;bt++)Ce[bt]=Ce[bt]/Fe;re.envMap.value=e.texture,re.samples.value=de,re.weights.value=Ce,re.latitudinal.value=p==="latitudinal",A&&(re.poleAxis.value=A);const{_lodMax:Re}=this;re.dTheta.value=me,re.mipInt.value=Re-r;const De=this._sizeLods[a],Ve=3*De*(a>Re-Iu?a-Re+Iu:0),ct=4*(this._cubeSize-De);Ru(n,Ve,ct,3*De,2*De),N.setRenderTarget(n),N.render(ne,_p)}}function wp(x){const e=[],n=[],r=[];let a=x;const c=x-Iu+1+bp.length;for(let p=0;p<c;p++){const A=Math.pow(2,a);n.push(A);let N=1/A;p>x-Iu?N=bp[p-x+Iu-1]:p===0&&(N=0),r.push(N);const H=1/(A-2),Z=-H,ne=1+H,re=[Z,Z,ne,Z,ne,ne,Z,Z,ne,ne,Z,ne],le=6,me=6,pe=3,de=2,Ce=1,Fe=new Float32Array(pe*me*le),Re=new Float32Array(de*me*le),De=new Float32Array(Ce*me*le);for(let ct=0;ct<le;ct++){const bt=ct%3*2/3-1,Ne=ct>2?0:-1,dt=[bt,Ne,0,bt+2/3,Ne,0,bt+2/3,Ne+1,0,bt,Ne,0,bt+2/3,Ne+1,0,bt,Ne+1,0];Fe.set(dt,pe*me*ct),Re.set(re,de*me*ct);const vt=[ct,ct,ct,ct,ct,ct];De.set(vt,Ce*me*ct)}const Ve=new Or;Ve.setAttribute("position",new Rs(Fe,pe)),Ve.setAttribute("uv",new Rs(Re,de)),Ve.setAttribute("faceIndex",new Rs(De,Ce)),e.push(Ve),a>Iu&&a--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Cp(x,e,n){const r=new ko(x,e,n);return r.texture.mapping=Me,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ru(x,e,n,r,a){x.viewport.set(e,n,r,a),x.scissor.set(e,n,r,a)}function eg(x,e,n){const r=new Float32Array(Kc),a=new nt(0,1,0);return new ea({name:"SphericalGaussianBlur",defines:{n:Kc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${x}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:Al(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:J,depthTest:!1,depthWrite:!1})}function D0(){return new ea({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Al(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:J,depthTest:!1,depthWrite:!1})}function Kl(){return new ea({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Al(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:J,depthTest:!1,depthWrite:!1})}function Al(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ov(x){let e=new WeakMap,n=null;function r(A){if(A&&A.isTexture){const N=A.mapping,H=N===He||N===et,Z=N===Ye||N===ze;if(H||Z)if(A.isRenderTargetTexture&&A.needsPMREMUpdate===!0){A.needsPMREMUpdate=!1;let ne=e.get(A);return n===null&&(n=new Dh(x)),ne=H?n.fromEquirectangular(A,ne):n.fromCubemap(A,ne),e.set(A,ne),ne.texture}else{if(e.has(A))return e.get(A).texture;{const ne=A.image;if(H&&ne&&ne.height>0||Z&&ne&&a(ne)){n===null&&(n=new Dh(x));const re=H?n.fromEquirectangular(A):n.fromCubemap(A);return e.set(A,re),A.addEventListener("dispose",c),re.texture}else return null}}}return A}function a(A){let N=0;const H=6;for(let Z=0;Z<H;Z++)A[Z]!==void 0&&N++;return N===H}function c(A){const N=A.target;N.removeEventListener("dispose",c);const H=e.get(N);H!==void 0&&(e.delete(N),H.dispose())}function p(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:p}}function Mp(x){const e={};function n(r){if(e[r]!==void 0)return e[r];let a;switch(r){case"WEBGL_depth_texture":a=x.getExtension("WEBGL_depth_texture")||x.getExtension("MOZ_WEBGL_depth_texture")||x.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=x.getExtension("WEBGL_compressed_texture_s3tc")||x.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=x.getExtension(r)}return e[r]=a,a}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const a=n(r);return a===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),a}}}function Tp(x,e,n,r){const a={},c=new WeakMap;function p(ne){const re=ne.target;re.index!==null&&e.remove(re.index);for(const me in re.attributes)e.remove(re.attributes[me]);re.removeEventListener("dispose",p),delete a[re.id];const le=c.get(re);le&&(e.remove(le),c.delete(re)),r.releaseStatesOfGeometry(re),re.isInstancedBufferGeometry===!0&&delete re._maxInstanceCount,n.memory.geometries--}function A(ne,re){return a[re.id]===!0||(re.addEventListener("dispose",p),a[re.id]=!0,n.memory.geometries++),re}function N(ne){const re=ne.attributes;for(const me in re)e.update(re[me],34962);const le=ne.morphAttributes;for(const me in le){const pe=le[me];for(let de=0,Ce=pe.length;de<Ce;de++)e.update(pe[de],34962)}}function H(ne){const re=[],le=ne.index,me=ne.attributes.position;let pe=0;if(le!==null){const Fe=le.array;pe=le.version;for(let Re=0,De=Fe.length;Re<De;Re+=3){const Ve=Fe[Re+0],ct=Fe[Re+1],bt=Fe[Re+2];re.push(Ve,ct,ct,bt,bt,Ve)}}else{const Fe=me.array;pe=me.version;for(let Re=0,De=Fe.length/3-1;Re<De;Re+=3){const Ve=Re+0,ct=Re+1,bt=Re+2;re.push(Ve,ct,ct,bt,bt,Ve)}}const de=new(md(re)?qf:Yf)(re,1);de.version=pe;const Ce=c.get(ne);Ce&&e.remove(Ce),c.set(ne,de)}function Z(ne){const re=c.get(ne);if(re){const le=ne.index;le!==null&&re.version<le.version&&H(ne)}else H(ne);return c.get(ne)}return{get:A,update:N,getWireframeAttribute:Z}}function Fd(x,e,n,r){const a=r.isWebGL2;let c;function p(re){c=re}let A,N;function H(re){A=re.type,N=re.bytesPerElement}function Z(re,le){x.drawElements(c,le,A,re*N),n.update(le,c,1)}function ne(re,le,me){if(me===0)return;let pe,de;if(a)pe=x,de="drawElementsInstanced";else if(pe=e.get("ANGLE_instanced_arrays"),de="drawElementsInstancedANGLE",pe===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}pe[de](c,le,A,re*N,me),n.update(le,c,me)}this.setMode=p,this.setIndex=H,this.render=Z,this.renderInstances=ne}function Sp(x){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(c,p,A){switch(n.calls++,p){case 4:n.triangles+=A*(c/3);break;case 1:n.lines+=A*(c/2);break;case 3:n.lines+=A*(c-1);break;case 2:n.lines+=A*c;break;case 0:n.points+=A*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p);break}}function a(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:a,update:r}}function Nd(x,e){return x[0]-e[0]}function kd(x,e){return Math.abs(e[1])-Math.abs(x[1])}function Ip(x,e,n){const r={},a=new Float32Array(8),c=new WeakMap,p=new es,A=[];for(let H=0;H<8;H++)A[H]=[H,0];function N(H,Z,ne,re){const le=H.morphTargetInfluences;if(e.isWebGL2===!0){const pe=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,de=pe!==void 0?pe.length:0;let Ce=c.get(Z);if(Ce===void 0||Ce.count!==de){let kn=function(){Dt.dispose(),c.delete(Z),Z.removeEventListener("dispose",kn)};var me=kn;Ce!==void 0&&Ce.texture.dispose();const De=Z.morphAttributes.position!==void 0,Ve=Z.morphAttributes.normal!==void 0,ct=Z.morphAttributes.color!==void 0,bt=Z.morphAttributes.position||[],Ne=Z.morphAttributes.normal||[],dt=Z.morphAttributes.color||[];let vt=0;De===!0&&(vt=1),Ve===!0&&(vt=2),ct===!0&&(vt=3);let Ut=Z.attributes.position.count*vt,hn=1;Ut>e.maxTextureSize&&(hn=Math.ceil(Ut/e.maxTextureSize),Ut=e.maxTextureSize);const Kt=new Float32Array(Ut*hn*4*de),Dt=new cl(Kt,Ut,hn,de);Dt.type=vn,Dt.needsUpdate=!0;const sn=vt*4;for(let Zn=0;Zn<de;Zn++){const Ln=bt[Zn],ui=Ne[Zn],si=dt[Zn],Qi=Ut*hn*4*Zn;for(let Li=0;Li<Ln.count;Li++){const gn=Li*sn;De===!0&&(p.fromBufferAttribute(Ln,Li),Kt[Qi+gn+0]=p.x,Kt[Qi+gn+1]=p.y,Kt[Qi+gn+2]=p.z,Kt[Qi+gn+3]=0),Ve===!0&&(p.fromBufferAttribute(ui,Li),Kt[Qi+gn+4]=p.x,Kt[Qi+gn+5]=p.y,Kt[Qi+gn+6]=p.z,Kt[Qi+gn+7]=0),ct===!0&&(p.fromBufferAttribute(si,Li),Kt[Qi+gn+8]=p.x,Kt[Qi+gn+9]=p.y,Kt[Qi+gn+10]=p.z,Kt[Qi+gn+11]=si.itemSize===4?p.w:1)}}Ce={count:de,texture:Dt,size:new On(Ut,hn)},c.set(Z,Ce),Z.addEventListener("dispose",kn)}let Fe=0;for(let De=0;De<le.length;De++)Fe+=le[De];const Re=Z.morphTargetsRelative?1:1-Fe;re.getUniforms().setValue(x,"morphTargetBaseInfluence",Re),re.getUniforms().setValue(x,"morphTargetInfluences",le),re.getUniforms().setValue(x,"morphTargetsTexture",Ce.texture,n),re.getUniforms().setValue(x,"morphTargetsTextureSize",Ce.size)}else{const pe=le===void 0?0:le.length;let de=r[Z.id];if(de===void 0||de.length!==pe){de=[];for(let Ve=0;Ve<pe;Ve++)de[Ve]=[Ve,0];r[Z.id]=de}for(let Ve=0;Ve<pe;Ve++){const ct=de[Ve];ct[0]=Ve,ct[1]=le[Ve]}de.sort(kd);for(let Ve=0;Ve<8;Ve++)Ve<pe&&de[Ve][1]?(A[Ve][0]=de[Ve][0],A[Ve][1]=de[Ve][1]):(A[Ve][0]=Number.MAX_SAFE_INTEGER,A[Ve][1]=0);A.sort(Nd);const Ce=Z.morphAttributes.position,Fe=Z.morphAttributes.normal;let Re=0;for(let Ve=0;Ve<8;Ve++){const ct=A[Ve],bt=ct[0],Ne=ct[1];bt!==Number.MAX_SAFE_INTEGER&&Ne?(Ce&&Z.getAttribute("morphTarget"+Ve)!==Ce[bt]&&Z.setAttribute("morphTarget"+Ve,Ce[bt]),Fe&&Z.getAttribute("morphNormal"+Ve)!==Fe[bt]&&Z.setAttribute("morphNormal"+Ve,Fe[bt]),a[Ve]=Ne,Re+=Ne):(Ce&&Z.hasAttribute("morphTarget"+Ve)===!0&&Z.deleteAttribute("morphTarget"+Ve),Fe&&Z.hasAttribute("morphNormal"+Ve)===!0&&Z.deleteAttribute("morphNormal"+Ve),a[Ve]=0)}const De=Z.morphTargetsRelative?1:1-Re;re.getUniforms().setValue(x,"morphTargetBaseInfluence",De),re.getUniforms().setValue(x,"morphTargetInfluences",a)}}return{update:N}}function Rp(x,e,n,r){let a=new WeakMap;function c(N){const H=r.render.frame,Z=N.geometry,ne=e.get(N,Z);return a.get(ne)!==H&&(e.update(ne),a.set(ne,H)),N.isInstancedMesh&&(N.hasEventListener("dispose",A)===!1&&N.addEventListener("dispose",A),n.update(N.instanceMatrix,34962),N.instanceColor!==null&&n.update(N.instanceColor,34962)),ne}function p(){a=new WeakMap}function A(N){const H=N.target;H.removeEventListener("dispose",A),n.remove(H.instanceMatrix),H.instanceColor!==null&&n.remove(H.instanceColor)}return{update:c,dispose:p}}const Ud=new Ws,Gd=new cl,Hd=new kl,Bp=new Vc,la=[],Lp=[],Bu=new Float32Array(16),Dp=new Float32Array(9),Pp=new Float32Array(4);function Yc(x,e,n){const r=x[0];if(r<=0||r>0)return x;const a=e*n;let c=la[a];if(c===void 0&&(c=new Float32Array(a),la[a]=c),e!==0){r.toArray(c,0);for(let p=1,A=0;p!==e;++p)A+=n,x[p].toArray(c,A)}return c}function yo(x,e){if(x.length!==e.length)return!1;for(let n=0,r=x.length;n<r;n++)if(x[n]!==e[n])return!1;return!0}function xo(x,e){for(let n=0,r=e.length;n<r;n++)x[n]=e[n]}function Ph(x,e){let n=Lp[e];n===void 0&&(n=new Int32Array(e),Lp[e]=n);for(let r=0;r!==e;++r)n[r]=x.allocateTextureUnit();return n}function Fv(x,e){const n=this.cache;n[0]!==e&&(x.uniform1f(this.addr,e),n[0]=e)}function Xs(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(x.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;x.uniform2fv(this.addr,e),xo(n,e)}}function vl(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(x.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(x.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(yo(n,e))return;x.uniform3fv(this.addr,e),xo(n,e)}}function Lu(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(x.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;x.uniform4fv(this.addr,e),xo(n,e)}}function tg(x,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;x.uniformMatrix2fv(this.addr,!1,e),xo(n,e)}else{if(yo(n,r))return;Pp.set(r),x.uniformMatrix2fv(this.addr,!1,Pp),xo(n,r)}}function zd(x,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;x.uniformMatrix3fv(this.addr,!1,e),xo(n,e)}else{if(yo(n,r))return;Dp.set(r),x.uniformMatrix3fv(this.addr,!1,Dp),xo(n,r)}}function Oh(x,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;x.uniformMatrix4fv(this.addr,!1,e),xo(n,e)}else{if(yo(n,r))return;Bu.set(r),x.uniformMatrix4fv(this.addr,!1,Bu),xo(n,r)}}function Du(x,e){const n=this.cache;n[0]!==e&&(x.uniform1i(this.addr,e),n[0]=e)}function Vd(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(x.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;x.uniform2iv(this.addr,e),xo(n,e)}}function Qd(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(x.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yo(n,e))return;x.uniform3iv(this.addr,e),xo(n,e)}}function Pu(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(x.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;x.uniform4iv(this.addr,e),xo(n,e)}}function P0(x,e){const n=this.cache;n[0]!==e&&(x.uniform1ui(this.addr,e),n[0]=e)}function yl(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(x.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;x.uniform2uiv(this.addr,e),xo(n,e)}}function Nv(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(x.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yo(n,e))return;x.uniform3uiv(this.addr,e),xo(n,e)}}function Op(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(x.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;x.uniform4uiv(this.addr,e),xo(n,e)}}function O0(x,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(x.uniform1i(this.addr,a),r[0]=a),n.setTexture2D(e||Ud,a)}function jd(x,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(x.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(e||Hd,a)}function ng(x,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(x.uniform1i(this.addr,a),r[0]=a),n.setTextureCube(e||Bp,a)}function Fp(x,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(x.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(e||Gd,a)}function ig(x){switch(x){case 5126:return Fv;case 35664:return Xs;case 35665:return vl;case 35666:return Lu;case 35674:return tg;case 35675:return zd;case 35676:return Oh;case 5124:case 35670:return Du;case 35667:case 35671:return Vd;case 35668:case 35672:return Qd;case 35669:case 35673:return Pu;case 5125:return P0;case 36294:return yl;case 36295:return Nv;case 36296:return Op;case 35678:case 36198:case 36298:case 36306:case 35682:return O0;case 35679:case 36299:case 36307:return jd;case 35680:case 36300:case 36308:case 36293:return ng;case 36289:case 36303:case 36311:case 36292:return Fp}}function rg(x,e){x.uniform1fv(this.addr,e)}function sg(x,e){const n=Yc(e,this.size,2);x.uniform2fv(this.addr,n)}function og(x,e){const n=Yc(e,this.size,3);x.uniform3fv(this.addr,n)}function Np(x,e){const n=Yc(e,this.size,4);x.uniform4fv(this.addr,n)}function ag(x,e){const n=Yc(e,this.size,4);x.uniformMatrix2fv(this.addr,!1,n)}function Wd(x,e){const n=Yc(e,this.size,9);x.uniformMatrix3fv(this.addr,!1,n)}function F0(x,e){const n=Yc(e,this.size,16);x.uniformMatrix4fv(this.addr,!1,n)}function kp(x,e){x.uniform1iv(this.addr,e)}function lg(x,e){x.uniform2iv(this.addr,e)}function Up(x,e){x.uniform3iv(this.addr,e)}function cg(x,e){x.uniform4iv(this.addr,e)}function N0(x,e){x.uniform1uiv(this.addr,e)}function Kd(x,e){x.uniform2uiv(this.addr,e)}function qc(x,e){x.uniform3uiv(this.addr,e)}function xl(x,e){x.uniform4uiv(this.addr,e)}function ug(x,e,n){const r=this.cache,a=e.length,c=Ph(n,a);yo(r,c)||(x.uniform1iv(this.addr,c),xo(r,c));for(let p=0;p!==a;++p)n.setTexture2D(e[p]||Ud,c[p])}function k0(x,e,n){const r=this.cache,a=e.length,c=Ph(n,a);yo(r,c)||(x.uniform1iv(this.addr,c),xo(r,c));for(let p=0;p!==a;++p)n.setTexture3D(e[p]||Hd,c[p])}function U0(x,e,n){const r=this.cache,a=e.length,c=Ph(n,a);yo(r,c)||(x.uniform1iv(this.addr,c),xo(r,c));for(let p=0;p!==a;++p)n.setTextureCube(e[p]||Bp,c[p])}function G0(x,e,n){const r=this.cache,a=e.length,c=Ph(n,a);yo(r,c)||(x.uniform1iv(this.addr,c),xo(r,c));for(let p=0;p!==a;++p)n.setTexture2DArray(e[p]||Gd,c[p])}function hg(x){switch(x){case 5126:return rg;case 35664:return sg;case 35665:return og;case 35666:return Np;case 35674:return ag;case 35675:return Wd;case 35676:return F0;case 5124:case 35670:return kp;case 35667:case 35671:return lg;case 35668:case 35672:return Up;case 35669:case 35673:return cg;case 5125:return N0;case 36294:return Kd;case 36295:return qc;case 36296:return xl;case 35678:case 36198:case 36298:case 36306:case 35682:return ug;case 35679:case 36299:case 36307:return k0;case 35680:case 36300:case 36308:case 36293:return U0;case 36289:case 36303:case 36311:case 36292:return G0}}class H0{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=ig(n.type)}}class dg{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=hg(n.type)}}class z0{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const a=this.seq;for(let c=0,p=a.length;c!==p;++c){const A=a[c];A.setValue(e,n[A.id],r)}}}const Ou=/(\w+)(\])?(\[|\.)?/g;function Gp(x,e){x.seq.push(e),x.map[e.id]=e}function V0(x,e,n){const r=x.name,a=r.length;for(Ou.lastIndex=0;;){const c=Ou.exec(r),p=Ou.lastIndex;let A=c[1];const N=c[2]==="]",H=c[3];if(N&&(A=A|0),H===void 0||H==="["&&p+2===a){Gp(n,H===void 0?new H0(A,x,e):new dg(A,x,e));break}else{let ne=n.map[A];ne===void 0&&(ne=new z0(A),Gp(n,ne)),n=ne}}}class Fh{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,35718);for(let a=0;a<r;++a){const c=e.getActiveUniform(n,a),p=e.getUniformLocation(n,c.name);V0(c,p,this)}}setValue(e,n,r,a){const c=this.map[n];c!==void 0&&c.setValue(e,r,a)}setOptional(e,n,r){const a=n[r];a!==void 0&&this.setValue(e,r,a)}static upload(e,n,r,a){for(let c=0,p=n.length;c!==p;++c){const A=n[c],N=r[A.id];N.needsUpdate!==!1&&A.setValue(e,N.value,a)}}static seqWithValue(e,n){const r=[];for(let a=0,c=e.length;a!==c;++a){const p=e[a];p.id in n&&r.push(p)}return r}}function Nh(x,e,n){const r=x.createShader(e);return x.shaderSource(r,n),x.compileShader(r),r}let Q0=0;function fg(x,e){const n=x.split(`
`),r=[],a=Math.max(e-6,0),c=Math.min(e+6,n.length);for(let p=a;p<c;p++){const A=p+1;r.push(`${A===e?">":" "} ${A}: ${n[p]}`)}return r.join(`
`)}function pg(x){switch(x){case Jr:return["Linear","( value )"];case vr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",x),["Linear","( value )"]}}function Hp(x,e,n){const r=x.getShaderParameter(e,35713),a=x.getShaderInfoLog(e).trim();if(r&&a==="")return"";const c=/ERROR: 0:(\d+)/.exec(a);if(c){const p=parseInt(c[1]);return n.toUpperCase()+`

`+a+`

`+fg(x.getShaderSource(e),p)}else return a}function mg(x,e){const n=pg(e);return"vec4 "+x+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Xd(x,e){let n;switch(e){case tn:n="Linear";break;case ri:n="Reinhard";break;case ni:n="OptimizedCineon";break;case zt:n="ACESFilmic";break;case Ue:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+x+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function j0(x){return[x.extensionDerivatives||!!x.envMapCubeUVHeight||x.bumpMap||x.tangentSpaceNormalMap||x.clearcoatNormalMap||x.flatShading||x.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(x.extensionFragDepth||x.logarithmicDepthBuffer)&&x.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",x.extensionDrawBuffers&&x.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(x.extensionShaderTextureLOD||x.envMap||x.transmission)&&x.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yd).join(`
`)}function gg(x){const e=[];for(const n in x){const r=x[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function W0(x,e){const n={},r=x.getProgramParameter(e,35721);for(let a=0;a<r;a++){const c=x.getActiveAttrib(e,a),p=c.name;let A=1;c.type===35674&&(A=2),c.type===35675&&(A=3),c.type===35676&&(A=4),n[p]={type:c.type,location:x.getAttribLocation(e,p),locationSize:A}}return n}function Yd(x){return x!==""}function K0(x,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return x.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ag(x,e){return x.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const X0=/^[ \t]*#include +<([\w\d./]+)>/gm;function zp(x){return x.replace(X0,vg)}function vg(x,e){const n=Wr[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return zp(n)}const kv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qd(x){return x.replace(kv,yg)}function yg(x,e,n,r){let a="";for(let c=parseInt(e);c<parseInt(n);c++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return a}function xg(x){let e="precision "+x.precision+` float;
precision `+x.precision+" int;";return x.precision==="highp"?e+=`
#define HIGH_PRECISION`:x.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:x.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Y0(x){let e="SHADOWMAP_TYPE_BASIC";return x.shadowMapType===b?e="SHADOWMAP_TYPE_PCF":x.shadowMapType===O?e="SHADOWMAP_TYPE_PCF_SOFT":x.shadowMapType===R&&(e="SHADOWMAP_TYPE_VSM"),e}function q0(x){let e="ENVMAP_TYPE_CUBE";if(x.envMap)switch(x.envMapMode){case Ye:case ze:e="ENVMAP_TYPE_CUBE";break;case Me:e="ENVMAP_TYPE_CUBE_UV";break}return e}function J0(x){let e="ENVMAP_MODE_REFLECTION";if(x.envMap)switch(x.envMapMode){case ze:e="ENVMAP_MODE_REFRACTION";break}return e}function Z0(x){let e="ENVMAP_BLENDING_NONE";if(x.envMap)switch(x.combine){case qt:e="ENVMAP_BLENDING_MULTIPLY";break;case un:e="ENVMAP_BLENDING_MIX";break;case dn:e="ENVMAP_BLENDING_ADD";break}return e}function Uv(x){const e=x.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function $0(x,e,n,r){const a=x.getContext(),c=n.defines;let p=n.vertexShader,A=n.fragmentShader;const N=Y0(n),H=q0(n),Z=J0(n),ne=Z0(n),re=Uv(n),le=n.isWebGL2?"":j0(n),me=gg(c),pe=a.createProgram();let de,Ce,Fe=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(de=[me].filter(Yd).join(`
`),de.length>0&&(de+=`
`),Ce=[le,me].filter(Yd).join(`
`),Ce.length>0&&(Ce+=`
`)):(de=[xg(n),"#define SHADER_NAME "+n.shaderName,me,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+Z:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+N:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Yd).join(`
`),Ce=[le,xg(n),"#define SHADER_NAME "+n.shaderName,me,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+H:"",n.envMap?"#define "+Z:"",n.envMap?"#define "+ne:"",re?"#define CUBEUV_TEXEL_WIDTH "+re.texelWidth:"",re?"#define CUBEUV_TEXEL_HEIGHT "+re.texelHeight:"",re?"#define CUBEUV_MAX_MIP "+re.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+N:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==bn?"#define TONE_MAPPING":"",n.toneMapping!==bn?Wr.tonemapping_pars_fragment:"",n.toneMapping!==bn?Xd("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Wr.encodings_pars_fragment,mg("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Yd).join(`
`)),p=zp(p),p=K0(p,n),p=Ag(p,n),A=zp(A),A=K0(A,n),A=Ag(A,n),p=qd(p),A=qd(A),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(Fe=`#version 300 es
`,de=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+de,Ce=["#define varying in",n.glslVersion===ah?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ah?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ce);const Re=Fe+de+p,De=Fe+Ce+A,Ve=Nh(a,35633,Re),ct=Nh(a,35632,De);if(a.attachShader(pe,Ve),a.attachShader(pe,ct),n.index0AttributeName!==void 0?a.bindAttribLocation(pe,0,n.index0AttributeName):n.morphTargets===!0&&a.bindAttribLocation(pe,0,"position"),a.linkProgram(pe),x.debug.checkShaderErrors){const dt=a.getProgramInfoLog(pe).trim(),vt=a.getShaderInfoLog(Ve).trim(),Ut=a.getShaderInfoLog(ct).trim();let hn=!0,Kt=!0;if(a.getProgramParameter(pe,35714)===!1){hn=!1;const Dt=Hp(a,Ve,"vertex"),sn=Hp(a,ct,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(pe,35715)+`

Program Info Log: `+dt+`
`+Dt+`
`+sn)}else dt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",dt):(vt===""||Ut==="")&&(Kt=!1);Kt&&(this.diagnostics={runnable:hn,programLog:dt,vertexShader:{log:vt,prefix:de},fragmentShader:{log:Ut,prefix:Ce}})}a.deleteShader(Ve),a.deleteShader(ct);let bt;this.getUniforms=function(){return bt===void 0&&(bt=new Fh(a,pe)),bt};let Ne;return this.getAttributes=function(){return Ne===void 0&&(Ne=W0(a,pe)),Ne},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(pe),this.program=void 0},this.name=n.shaderName,this.id=Q0++,this.cacheKey=e,this.usedTimes=1,this.program=pe,this.vertexShader=Ve,this.fragmentShader=ct,this}let Fu=0;class eA{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,a=this._getShaderStage(n),c=this._getShaderStage(r),p=this._getShaderCacheForMaterial(e);return p.has(a)===!1&&(p.add(a),a.usedTimes++),p.has(c)===!1&&(p.add(c),c.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Gv(e),n.set(e,r)),r}}class Gv{constructor(e){this.id=Fu++,this.code=e,this.usedTimes=0}}function Nu(x,e,n,r,a,c,p){const A=new ms,N=new eA,H=[],Z=a.isWebGL2,ne=a.logarithmicDepthBuffer,re=a.vertexTextures;let le=a.precision;const me={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function pe(Ne,dt,vt,Ut,hn){const Kt=Ut.fog,Dt=hn.geometry,sn=Ne.isMeshStandardMaterial?Ut.environment:null,kn=(Ne.isMeshStandardMaterial?n:e).get(Ne.envMap||sn),Zn=!!kn&&kn.mapping===Me?kn.image.height:null,Ln=me[Ne.type];Ne.precision!==null&&(le=a.getMaxPrecision(Ne.precision),le!==Ne.precision&&console.warn("THREE.WebGLProgram.getParameters:",Ne.precision,"not supported, using",le,"instead."));const ui=Dt.morphAttributes.position||Dt.morphAttributes.normal||Dt.morphAttributes.color,si=ui!==void 0?ui.length:0;let Qi=0;Dt.morphAttributes.position!==void 0&&(Qi=1),Dt.morphAttributes.normal!==void 0&&(Qi=2),Dt.morphAttributes.color!==void 0&&(Qi=3);let Li,gn,$n,_i;if(Ln){const rs=Ca[Ln];Li=rs.vertexShader,gn=rs.fragmentShader}else Li=Ne.vertexShader,gn=Ne.fragmentShader,N.update(Ne),$n=N.getVertexShaderID(Ne),_i=N.getFragmentShaderID(Ne);const ln=x.getRenderTarget(),Wi=Ne.alphaTest>0,wi=Ne.clearcoat>0,Ar=Ne.iridescence>0;return{isWebGL2:Z,shaderID:Ln,shaderName:Ne.type,vertexShader:Li,fragmentShader:gn,defines:Ne.defines,customVertexShaderID:$n,customFragmentShaderID:_i,isRawShaderMaterial:Ne.isRawShaderMaterial===!0,glslVersion:Ne.glslVersion,precision:le,instancing:hn.isInstancedMesh===!0,instancingColor:hn.isInstancedMesh===!0&&hn.instanceColor!==null,supportsVertexTextures:re,outputEncoding:ln===null?x.outputEncoding:ln.isXRRenderTarget===!0?ln.texture.encoding:Jr,map:!!Ne.map,matcap:!!Ne.matcap,envMap:!!kn,envMapMode:kn&&kn.mapping,envMapCubeUVHeight:Zn,lightMap:!!Ne.lightMap,aoMap:!!Ne.aoMap,emissiveMap:!!Ne.emissiveMap,bumpMap:!!Ne.bumpMap,normalMap:!!Ne.normalMap,objectSpaceNormalMap:Ne.normalMapType===Zr,tangentSpaceNormalMap:Ne.normalMapType===Qs,decodeVideoTexture:!!Ne.map&&Ne.map.isVideoTexture===!0&&Ne.map.encoding===vr,clearcoat:wi,clearcoatMap:wi&&!!Ne.clearcoatMap,clearcoatRoughnessMap:wi&&!!Ne.clearcoatRoughnessMap,clearcoatNormalMap:wi&&!!Ne.clearcoatNormalMap,iridescence:Ar,iridescenceMap:Ar&&!!Ne.iridescenceMap,iridescenceThicknessMap:Ar&&!!Ne.iridescenceThicknessMap,displacementMap:!!Ne.displacementMap,roughnessMap:!!Ne.roughnessMap,metalnessMap:!!Ne.metalnessMap,specularMap:!!Ne.specularMap,specularIntensityMap:!!Ne.specularIntensityMap,specularColorMap:!!Ne.specularColorMap,opaque:Ne.transparent===!1&&Ne.blending===j,alphaMap:!!Ne.alphaMap,alphaTest:Wi,gradientMap:!!Ne.gradientMap,sheen:Ne.sheen>0,sheenColorMap:!!Ne.sheenColorMap,sheenRoughnessMap:!!Ne.sheenRoughnessMap,transmission:Ne.transmission>0,transmissionMap:!!Ne.transmissionMap,thicknessMap:!!Ne.thicknessMap,combine:Ne.combine,vertexTangents:!!Ne.normalMap&&!!Dt.attributes.tangent,vertexColors:Ne.vertexColors,vertexAlphas:Ne.vertexColors===!0&&!!Dt.attributes.color&&Dt.attributes.color.itemSize===4,vertexUvs:!!Ne.map||!!Ne.bumpMap||!!Ne.normalMap||!!Ne.specularMap||!!Ne.alphaMap||!!Ne.emissiveMap||!!Ne.roughnessMap||!!Ne.metalnessMap||!!Ne.clearcoatMap||!!Ne.clearcoatRoughnessMap||!!Ne.clearcoatNormalMap||!!Ne.iridescenceMap||!!Ne.iridescenceThicknessMap||!!Ne.displacementMap||!!Ne.transmissionMap||!!Ne.thicknessMap||!!Ne.specularIntensityMap||!!Ne.specularColorMap||!!Ne.sheenColorMap||!!Ne.sheenRoughnessMap,uvsVertexOnly:!(!!Ne.map||!!Ne.bumpMap||!!Ne.normalMap||!!Ne.specularMap||!!Ne.alphaMap||!!Ne.emissiveMap||!!Ne.roughnessMap||!!Ne.metalnessMap||!!Ne.clearcoatNormalMap||!!Ne.iridescenceMap||!!Ne.iridescenceThicknessMap||Ne.transmission>0||!!Ne.transmissionMap||!!Ne.thicknessMap||!!Ne.specularIntensityMap||!!Ne.specularColorMap||Ne.sheen>0||!!Ne.sheenColorMap||!!Ne.sheenRoughnessMap)&&!!Ne.displacementMap,fog:!!Kt,useFog:Ne.fog===!0,fogExp2:Kt&&Kt.isFogExp2,flatShading:!!Ne.flatShading,sizeAttenuation:Ne.sizeAttenuation,logarithmicDepthBuffer:ne,skinning:hn.isSkinnedMesh===!0,morphTargets:Dt.morphAttributes.position!==void 0,morphNormals:Dt.morphAttributes.normal!==void 0,morphColors:Dt.morphAttributes.color!==void 0,morphTargetsCount:si,morphTextureStride:Qi,numDirLights:dt.directional.length,numPointLights:dt.point.length,numSpotLights:dt.spot.length,numSpotLightMaps:dt.spotLightMap.length,numRectAreaLights:dt.rectArea.length,numHemiLights:dt.hemi.length,numDirLightShadows:dt.directionalShadowMap.length,numPointLightShadows:dt.pointShadowMap.length,numSpotLightShadows:dt.spotShadowMap.length,numSpotLightShadowsWithMaps:dt.numSpotLightShadowsWithMaps,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:Ne.dithering,shadowMapEnabled:x.shadowMap.enabled&&vt.length>0,shadowMapType:x.shadowMap.type,toneMapping:Ne.toneMapped?x.toneMapping:bn,physicallyCorrectLights:x.physicallyCorrectLights,premultipliedAlpha:Ne.premultipliedAlpha,doubleSided:Ne.side===Y,flipSided:Ne.side===P,useDepthPacking:!!Ne.depthPacking,depthPacking:Ne.depthPacking||0,index0AttributeName:Ne.index0AttributeName,extensionDerivatives:Ne.extensions&&Ne.extensions.derivatives,extensionFragDepth:Ne.extensions&&Ne.extensions.fragDepth,extensionDrawBuffers:Ne.extensions&&Ne.extensions.drawBuffers,extensionShaderTextureLOD:Ne.extensions&&Ne.extensions.shaderTextureLOD,rendererExtensionFragDepth:Z||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:Z||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:Z||r.has("EXT_shader_texture_lod"),customProgramCacheKey:Ne.customProgramCacheKey()}}function de(Ne){const dt=[];if(Ne.shaderID?dt.push(Ne.shaderID):(dt.push(Ne.customVertexShaderID),dt.push(Ne.customFragmentShaderID)),Ne.defines!==void 0)for(const vt in Ne.defines)dt.push(vt),dt.push(Ne.defines[vt]);return Ne.isRawShaderMaterial===!1&&(Ce(dt,Ne),Fe(dt,Ne),dt.push(x.outputEncoding)),dt.push(Ne.customProgramCacheKey),dt.join()}function Ce(Ne,dt){Ne.push(dt.precision),Ne.push(dt.outputEncoding),Ne.push(dt.envMapMode),Ne.push(dt.envMapCubeUVHeight),Ne.push(dt.combine),Ne.push(dt.vertexUvs),Ne.push(dt.fogExp2),Ne.push(dt.sizeAttenuation),Ne.push(dt.morphTargetsCount),Ne.push(dt.morphAttributeCount),Ne.push(dt.numDirLights),Ne.push(dt.numPointLights),Ne.push(dt.numSpotLights),Ne.push(dt.numSpotLightMaps),Ne.push(dt.numHemiLights),Ne.push(dt.numRectAreaLights),Ne.push(dt.numDirLightShadows),Ne.push(dt.numPointLightShadows),Ne.push(dt.numSpotLightShadows),Ne.push(dt.numSpotLightShadowsWithMaps),Ne.push(dt.shadowMapType),Ne.push(dt.toneMapping),Ne.push(dt.numClippingPlanes),Ne.push(dt.numClipIntersection),Ne.push(dt.depthPacking)}function Fe(Ne,dt){A.disableAll(),dt.isWebGL2&&A.enable(0),dt.supportsVertexTextures&&A.enable(1),dt.instancing&&A.enable(2),dt.instancingColor&&A.enable(3),dt.map&&A.enable(4),dt.matcap&&A.enable(5),dt.envMap&&A.enable(6),dt.lightMap&&A.enable(7),dt.aoMap&&A.enable(8),dt.emissiveMap&&A.enable(9),dt.bumpMap&&A.enable(10),dt.normalMap&&A.enable(11),dt.objectSpaceNormalMap&&A.enable(12),dt.tangentSpaceNormalMap&&A.enable(13),dt.clearcoat&&A.enable(14),dt.clearcoatMap&&A.enable(15),dt.clearcoatRoughnessMap&&A.enable(16),dt.clearcoatNormalMap&&A.enable(17),dt.iridescence&&A.enable(18),dt.iridescenceMap&&A.enable(19),dt.iridescenceThicknessMap&&A.enable(20),dt.displacementMap&&A.enable(21),dt.specularMap&&A.enable(22),dt.roughnessMap&&A.enable(23),dt.metalnessMap&&A.enable(24),dt.gradientMap&&A.enable(25),dt.alphaMap&&A.enable(26),dt.alphaTest&&A.enable(27),dt.vertexColors&&A.enable(28),dt.vertexAlphas&&A.enable(29),dt.vertexUvs&&A.enable(30),dt.vertexTangents&&A.enable(31),dt.uvsVertexOnly&&A.enable(32),Ne.push(A.mask),A.disableAll(),dt.fog&&A.enable(0),dt.useFog&&A.enable(1),dt.flatShading&&A.enable(2),dt.logarithmicDepthBuffer&&A.enable(3),dt.skinning&&A.enable(4),dt.morphTargets&&A.enable(5),dt.morphNormals&&A.enable(6),dt.morphColors&&A.enable(7),dt.premultipliedAlpha&&A.enable(8),dt.shadowMapEnabled&&A.enable(9),dt.physicallyCorrectLights&&A.enable(10),dt.doubleSided&&A.enable(11),dt.flipSided&&A.enable(12),dt.useDepthPacking&&A.enable(13),dt.dithering&&A.enable(14),dt.specularIntensityMap&&A.enable(15),dt.specularColorMap&&A.enable(16),dt.transmission&&A.enable(17),dt.transmissionMap&&A.enable(18),dt.thicknessMap&&A.enable(19),dt.sheen&&A.enable(20),dt.sheenColorMap&&A.enable(21),dt.sheenRoughnessMap&&A.enable(22),dt.decodeVideoTexture&&A.enable(23),dt.opaque&&A.enable(24),Ne.push(A.mask)}function Re(Ne){const dt=me[Ne.type];let vt;if(dt){const Ut=Ca[dt];vt=Mm.clone(Ut.uniforms)}else vt=Ne.uniforms;return vt}function De(Ne,dt){let vt;for(let Ut=0,hn=H.length;Ut<hn;Ut++){const Kt=H[Ut];if(Kt.cacheKey===dt){vt=Kt,++vt.usedTimes;break}}return vt===void 0&&(vt=new $0(x,dt,Ne,c),H.push(vt)),vt}function Ve(Ne){if(--Ne.usedTimes===0){const dt=H.indexOf(Ne);H[dt]=H[H.length-1],H.pop(),Ne.destroy()}}function ct(Ne){N.remove(Ne)}function bt(){N.dispose()}return{getParameters:pe,getProgramCacheKey:de,getUniforms:Re,acquireProgram:De,releaseProgram:Ve,releaseShaderCache:ct,programs:H,dispose:bt}}function Hv(){let x=new WeakMap;function e(c){let p=x.get(c);return p===void 0&&(p={},x.set(c,p)),p}function n(c){x.delete(c)}function r(c,p,A){x.get(c)[p]=A}function a(){x=new WeakMap}return{get:e,remove:n,update:r,dispose:a}}function Eg(x,e){return x.groupOrder!==e.groupOrder?x.groupOrder-e.groupOrder:x.renderOrder!==e.renderOrder?x.renderOrder-e.renderOrder:x.material.id!==e.material.id?x.material.id-e.material.id:x.z!==e.z?x.z-e.z:x.id-e.id}function Jc(x,e){return x.groupOrder!==e.groupOrder?x.groupOrder-e.groupOrder:x.renderOrder!==e.renderOrder?x.renderOrder-e.renderOrder:x.z!==e.z?e.z-x.z:x.id-e.id}function bg(){const x=[];let e=0;const n=[],r=[],a=[];function c(){e=0,n.length=0,r.length=0,a.length=0}function p(ne,re,le,me,pe,de){let Ce=x[e];return Ce===void 0?(Ce={id:ne.id,object:ne,geometry:re,material:le,groupOrder:me,renderOrder:ne.renderOrder,z:pe,group:de},x[e]=Ce):(Ce.id=ne.id,Ce.object=ne,Ce.geometry=re,Ce.material=le,Ce.groupOrder=me,Ce.renderOrder=ne.renderOrder,Ce.z=pe,Ce.group=de),e++,Ce}function A(ne,re,le,me,pe,de){const Ce=p(ne,re,le,me,pe,de);le.transmission>0?r.push(Ce):le.transparent===!0?a.push(Ce):n.push(Ce)}function N(ne,re,le,me,pe,de){const Ce=p(ne,re,le,me,pe,de);le.transmission>0?r.unshift(Ce):le.transparent===!0?a.unshift(Ce):n.unshift(Ce)}function H(ne,re){n.length>1&&n.sort(ne||Eg),r.length>1&&r.sort(re||Jc),a.length>1&&a.sort(re||Jc)}function Z(){for(let ne=e,re=x.length;ne<re;ne++){const le=x[ne];if(le.id===null)break;le.id=null,le.object=null,le.geometry=null,le.material=null,le.group=null}}return{opaque:n,transmissive:r,transparent:a,init:c,push:A,unshift:N,finish:Z,sort:H}}function zv(){let x=new WeakMap;function e(r,a){const c=x.get(r);let p;return c===void 0?(p=new bg,x.set(r,[p])):a>=c.length?(p=new bg,c.push(p)):p=c[a],p}function n(){x=new WeakMap}return{get:e,dispose:n}}function ku(){const x={};return{get:function(e){if(x[e.id]!==void 0)return x[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new nt,color:new Si};break;case"SpotLight":n={position:new nt,direction:new nt,color:new Si,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new nt,color:new Si,distance:0,decay:0};break;case"HemisphereLight":n={direction:new nt,skyColor:new Si,groundColor:new Si};break;case"RectAreaLight":n={color:new Si,position:new nt,halfWidth:new nt,halfHeight:new nt};break}return x[e.id]=n,n}}}function Vv(){const x={};return{get:function(e){if(x[e.id]!==void 0)return x[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On,shadowCameraNear:1,shadowCameraFar:1e3};break}return x[e.id]=n,n}}}let tA=0;function nA(x,e){return(e.castShadow?2:0)-(x.castShadow?2:0)+(e.map?1:0)-(x.map?1:0)}function Qv(x,e){const n=new ku,r=Vv(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let Z=0;Z<9;Z++)a.probe.push(new nt);const c=new nt,p=new Gi,A=new Gi;function N(Z,ne){let re=0,le=0,me=0;for(let Ut=0;Ut<9;Ut++)a.probe[Ut].set(0,0,0);let pe=0,de=0,Ce=0,Fe=0,Re=0,De=0,Ve=0,ct=0,bt=0,Ne=0;Z.sort(nA);const dt=ne!==!0?Math.PI:1;for(let Ut=0,hn=Z.length;Ut<hn;Ut++){const Kt=Z[Ut],Dt=Kt.color,sn=Kt.intensity,kn=Kt.distance,Zn=Kt.shadow&&Kt.shadow.map?Kt.shadow.map.texture:null;if(Kt.isAmbientLight)re+=Dt.r*sn*dt,le+=Dt.g*sn*dt,me+=Dt.b*sn*dt;else if(Kt.isLightProbe)for(let Ln=0;Ln<9;Ln++)a.probe[Ln].addScaledVector(Kt.sh.coefficients[Ln],sn);else if(Kt.isDirectionalLight){const Ln=n.get(Kt);if(Ln.color.copy(Kt.color).multiplyScalar(Kt.intensity*dt),Kt.castShadow){const ui=Kt.shadow,si=r.get(Kt);si.shadowBias=ui.bias,si.shadowNormalBias=ui.normalBias,si.shadowRadius=ui.radius,si.shadowMapSize=ui.mapSize,a.directionalShadow[pe]=si,a.directionalShadowMap[pe]=Zn,a.directionalShadowMatrix[pe]=Kt.shadow.matrix,De++}a.directional[pe]=Ln,pe++}else if(Kt.isSpotLight){const Ln=n.get(Kt);Ln.position.setFromMatrixPosition(Kt.matrixWorld),Ln.color.copy(Dt).multiplyScalar(sn*dt),Ln.distance=kn,Ln.coneCos=Math.cos(Kt.angle),Ln.penumbraCos=Math.cos(Kt.angle*(1-Kt.penumbra)),Ln.decay=Kt.decay,a.spot[Ce]=Ln;const ui=Kt.shadow;if(Kt.map&&(a.spotLightMap[bt]=Kt.map,bt++,ui.updateMatrices(Kt),Kt.castShadow&&Ne++),a.spotLightMatrix[Ce]=ui.matrix,Kt.castShadow){const si=r.get(Kt);si.shadowBias=ui.bias,si.shadowNormalBias=ui.normalBias,si.shadowRadius=ui.radius,si.shadowMapSize=ui.mapSize,a.spotShadow[Ce]=si,a.spotShadowMap[Ce]=Zn,ct++}Ce++}else if(Kt.isRectAreaLight){const Ln=n.get(Kt);Ln.color.copy(Dt).multiplyScalar(sn),Ln.halfWidth.set(Kt.width*.5,0,0),Ln.halfHeight.set(0,Kt.height*.5,0),a.rectArea[Fe]=Ln,Fe++}else if(Kt.isPointLight){const Ln=n.get(Kt);if(Ln.color.copy(Kt.color).multiplyScalar(Kt.intensity*dt),Ln.distance=Kt.distance,Ln.decay=Kt.decay,Kt.castShadow){const ui=Kt.shadow,si=r.get(Kt);si.shadowBias=ui.bias,si.shadowNormalBias=ui.normalBias,si.shadowRadius=ui.radius,si.shadowMapSize=ui.mapSize,si.shadowCameraNear=ui.camera.near,si.shadowCameraFar=ui.camera.far,a.pointShadow[de]=si,a.pointShadowMap[de]=Zn,a.pointShadowMatrix[de]=Kt.shadow.matrix,Ve++}a.point[de]=Ln,de++}else if(Kt.isHemisphereLight){const Ln=n.get(Kt);Ln.skyColor.copy(Kt.color).multiplyScalar(sn*dt),Ln.groundColor.copy(Kt.groundColor).multiplyScalar(sn*dt),a.hemi[Re]=Ln,Re++}}Fe>0&&(e.isWebGL2||x.has("OES_texture_float_linear")===!0?(a.rectAreaLTC1=gi.LTC_FLOAT_1,a.rectAreaLTC2=gi.LTC_FLOAT_2):x.has("OES_texture_half_float_linear")===!0?(a.rectAreaLTC1=gi.LTC_HALF_1,a.rectAreaLTC2=gi.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=re,a.ambient[1]=le,a.ambient[2]=me;const vt=a.hash;(vt.directionalLength!==pe||vt.pointLength!==de||vt.spotLength!==Ce||vt.rectAreaLength!==Fe||vt.hemiLength!==Re||vt.numDirectionalShadows!==De||vt.numPointShadows!==Ve||vt.numSpotShadows!==ct||vt.numSpotMaps!==bt)&&(a.directional.length=pe,a.spot.length=Ce,a.rectArea.length=Fe,a.point.length=de,a.hemi.length=Re,a.directionalShadow.length=De,a.directionalShadowMap.length=De,a.pointShadow.length=Ve,a.pointShadowMap.length=Ve,a.spotShadow.length=ct,a.spotShadowMap.length=ct,a.directionalShadowMatrix.length=De,a.pointShadowMatrix.length=Ve,a.spotLightMatrix.length=ct+bt-Ne,a.spotLightMap.length=bt,a.numSpotLightShadowsWithMaps=Ne,vt.directionalLength=pe,vt.pointLength=de,vt.spotLength=Ce,vt.rectAreaLength=Fe,vt.hemiLength=Re,vt.numDirectionalShadows=De,vt.numPointShadows=Ve,vt.numSpotShadows=ct,vt.numSpotMaps=bt,a.version=tA++)}function H(Z,ne){let re=0,le=0,me=0,pe=0,de=0;const Ce=ne.matrixWorldInverse;for(let Fe=0,Re=Z.length;Fe<Re;Fe++){const De=Z[Fe];if(De.isDirectionalLight){const Ve=a.directional[re];Ve.direction.setFromMatrixPosition(De.matrixWorld),c.setFromMatrixPosition(De.target.matrixWorld),Ve.direction.sub(c),Ve.direction.transformDirection(Ce),re++}else if(De.isSpotLight){const Ve=a.spot[me];Ve.position.setFromMatrixPosition(De.matrixWorld),Ve.position.applyMatrix4(Ce),Ve.direction.setFromMatrixPosition(De.matrixWorld),c.setFromMatrixPosition(De.target.matrixWorld),Ve.direction.sub(c),Ve.direction.transformDirection(Ce),me++}else if(De.isRectAreaLight){const Ve=a.rectArea[pe];Ve.position.setFromMatrixPosition(De.matrixWorld),Ve.position.applyMatrix4(Ce),A.identity(),p.copy(De.matrixWorld),p.premultiply(Ce),A.extractRotation(p),Ve.halfWidth.set(De.width*.5,0,0),Ve.halfHeight.set(0,De.height*.5,0),Ve.halfWidth.applyMatrix4(A),Ve.halfHeight.applyMatrix4(A),pe++}else if(De.isPointLight){const Ve=a.point[le];Ve.position.setFromMatrixPosition(De.matrixWorld),Ve.position.applyMatrix4(Ce),le++}else if(De.isHemisphereLight){const Ve=a.hemi[de];Ve.direction.setFromMatrixPosition(De.matrixWorld),Ve.direction.transformDirection(Ce),de++}}}return{setup:N,setupView:H,state:a}}function iA(x,e){const n=new Qv(x,e),r=[],a=[];function c(){r.length=0,a.length=0}function p(ne){r.push(ne)}function A(ne){a.push(ne)}function N(ne){n.setup(r,ne)}function H(ne){n.setupView(r,ne)}return{init:c,state:{lightsArray:r,shadowsArray:a,lights:n},setupLights:N,setupLightsView:H,pushLight:p,pushShadow:A}}function jv(x,e){let n=new WeakMap;function r(c,p=0){const A=n.get(c);let N;return A===void 0?(N=new iA(x,e),n.set(c,[N])):p>=A.length?(N=new iA(x,e),A.push(N)):N=A[p],N}function a(){n=new WeakMap}return{get:r,dispose:a}}class _g extends Zo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ss,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wg extends Zo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new nt,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Wv=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Kv=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Xv(x,e,n){let r=new dl;const a=new On,c=new On,p=new es,A=new _g({depthPacking:po}),N=new wg,H={},Z=n.maxTextureSize,ne={0:P,1:L,2:Y},re=new ea({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new On},radius:{value:4}},vertexShader:Wv,fragmentShader:Kv}),le=re.clone();le.defines.HORIZONTAL_PASS=1;const me=new Or;me.setAttribute("position",new Rs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const pe=new $s(me,re),de=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=b,this.render=function(De,Ve,ct){if(de.enabled===!1||de.autoUpdate===!1&&de.needsUpdate===!1||De.length===0)return;const bt=x.getRenderTarget(),Ne=x.getActiveCubeFace(),dt=x.getActiveMipmapLevel(),vt=x.state;vt.setBlending(J),vt.buffers.color.setClear(1,1,1,1),vt.buffers.depth.setTest(!0),vt.setScissorTest(!1);for(let Ut=0,hn=De.length;Ut<hn;Ut++){const Kt=De[Ut],Dt=Kt.shadow;if(Dt===void 0){console.warn("THREE.WebGLShadowMap:",Kt,"has no shadow.");continue}if(Dt.autoUpdate===!1&&Dt.needsUpdate===!1)continue;a.copy(Dt.mapSize);const sn=Dt.getFrameExtents();if(a.multiply(sn),c.copy(Dt.mapSize),(a.x>Z||a.y>Z)&&(a.x>Z&&(c.x=Math.floor(Z/sn.x),a.x=c.x*sn.x,Dt.mapSize.x=c.x),a.y>Z&&(c.y=Math.floor(Z/sn.y),a.y=c.y*sn.y,Dt.mapSize.y=c.y)),Dt.map===null){const Zn=this.type!==R?{minFilter:ae,magFilter:ae}:{};Dt.map=new ko(a.x,a.y,Zn),Dt.map.texture.name=Kt.name+".shadowMap",Dt.camera.updateProjectionMatrix()}x.setRenderTarget(Dt.map),x.clear();const kn=Dt.getViewportCount();for(let Zn=0;Zn<kn;Zn++){const Ln=Dt.getViewport(Zn);p.set(c.x*Ln.x,c.y*Ln.y,c.x*Ln.z,c.y*Ln.w),vt.viewport(p),Dt.updateMatrices(Kt,Zn),r=Dt.getFrustum(),Re(Ve,ct,Dt.camera,Kt,this.type)}Dt.isPointLightShadow!==!0&&this.type===R&&Ce(Dt,ct),Dt.needsUpdate=!1}de.needsUpdate=!1,x.setRenderTarget(bt,Ne,dt)};function Ce(De,Ve){const ct=e.update(pe);re.defines.VSM_SAMPLES!==De.blurSamples&&(re.defines.VSM_SAMPLES=De.blurSamples,le.defines.VSM_SAMPLES=De.blurSamples,re.needsUpdate=!0,le.needsUpdate=!0),De.mapPass===null&&(De.mapPass=new ko(a.x,a.y)),re.uniforms.shadow_pass.value=De.map.texture,re.uniforms.resolution.value=De.mapSize,re.uniforms.radius.value=De.radius,x.setRenderTarget(De.mapPass),x.clear(),x.renderBufferDirect(Ve,null,ct,re,pe,null),le.uniforms.shadow_pass.value=De.mapPass.texture,le.uniforms.resolution.value=De.mapSize,le.uniforms.radius.value=De.radius,x.setRenderTarget(De.map),x.clear(),x.renderBufferDirect(Ve,null,ct,le,pe,null)}function Fe(De,Ve,ct,bt,Ne,dt){let vt=null;const Ut=ct.isPointLight===!0?De.customDistanceMaterial:De.customDepthMaterial;if(Ut!==void 0?vt=Ut:vt=ct.isPointLight===!0?N:A,x.localClippingEnabled&&Ve.clipShadows===!0&&Array.isArray(Ve.clippingPlanes)&&Ve.clippingPlanes.length!==0||Ve.displacementMap&&Ve.displacementScale!==0||Ve.alphaMap&&Ve.alphaTest>0||Ve.map&&Ve.alphaTest>0){const hn=vt.uuid,Kt=Ve.uuid;let Dt=H[hn];Dt===void 0&&(Dt={},H[hn]=Dt);let sn=Dt[Kt];sn===void 0&&(sn=vt.clone(),Dt[Kt]=sn),vt=sn}return vt.visible=Ve.visible,vt.wireframe=Ve.wireframe,dt===R?vt.side=Ve.shadowSide!==null?Ve.shadowSide:Ve.side:vt.side=Ve.shadowSide!==null?Ve.shadowSide:ne[Ve.side],vt.alphaMap=Ve.alphaMap,vt.alphaTest=Ve.alphaTest,vt.map=Ve.map,vt.clipShadows=Ve.clipShadows,vt.clippingPlanes=Ve.clippingPlanes,vt.clipIntersection=Ve.clipIntersection,vt.displacementMap=Ve.displacementMap,vt.displacementScale=Ve.displacementScale,vt.displacementBias=Ve.displacementBias,vt.wireframeLinewidth=Ve.wireframeLinewidth,vt.linewidth=Ve.linewidth,ct.isPointLight===!0&&vt.isMeshDistanceMaterial===!0&&(vt.referencePosition.setFromMatrixPosition(ct.matrixWorld),vt.nearDistance=bt,vt.farDistance=Ne),vt}function Re(De,Ve,ct,bt,Ne){if(De.visible===!1)return;if(De.layers.test(Ve.layers)&&(De.isMesh||De.isLine||De.isPoints)&&(De.castShadow||De.receiveShadow&&Ne===R)&&(!De.frustumCulled||r.intersectsObject(De))){De.modelViewMatrix.multiplyMatrices(ct.matrixWorldInverse,De.matrixWorld);const Ut=e.update(De),hn=De.material;if(Array.isArray(hn)){const Kt=Ut.groups;for(let Dt=0,sn=Kt.length;Dt<sn;Dt++){const kn=Kt[Dt],Zn=hn[kn.materialIndex];if(Zn&&Zn.visible){const Ln=Fe(De,Zn,bt,ct.near,ct.far,Ne);x.renderBufferDirect(ct,null,Ut,Ln,De,kn)}}}else if(hn.visible){const Kt=Fe(De,hn,bt,ct.near,ct.far,Ne);x.renderBufferDirect(ct,null,Ut,Kt,De,null)}}const vt=De.children;for(let Ut=0,hn=vt.length;Ut<hn;Ut++)Re(vt[Ut],Ve,ct,bt,Ne)}}function rA(x,e,n){const r=n.isWebGL2;function a(){let Lt=!1;const _n=new es;let li=null;const ji=new es(0,0,0,0);return{setMask:function(dr){li!==dr&&!Lt&&(x.colorMask(dr,dr,dr,dr),li=dr)},setLocked:function(dr){Lt=dr},setClear:function(dr,ks,ha,Ta,xf){xf===!0&&(dr*=Ta,ks*=Ta,ha*=Ta),_n.set(dr,ks,ha,Ta),ji.equals(_n)===!1&&(x.clearColor(dr,ks,ha,Ta),ji.copy(_n))},reset:function(){Lt=!1,li=null,ji.set(-1,0,0,0)}}}function c(){let Lt=!1,_n=null,li=null,ji=null;return{setTest:function(dr){dr?Wi(2929):wi(2929)},setMask:function(dr){_n!==dr&&!Lt&&(x.depthMask(dr),_n=dr)},setFunc:function(dr){if(li!==dr){switch(dr){case wt:x.depthFunc(512);break;case Yt:x.depthFunc(519);break;case Mn:x.depthFunc(513);break;case je:x.depthFunc(515);break;case rt:x.depthFunc(514);break;case At:x.depthFunc(518);break;case Bt:x.depthFunc(516);break;case Pt:x.depthFunc(517);break;default:x.depthFunc(515)}li=dr}},setLocked:function(dr){Lt=dr},setClear:function(dr){ji!==dr&&(x.clearDepth(dr),ji=dr)},reset:function(){Lt=!1,_n=null,li=null,ji=null}}}function p(){let Lt=!1,_n=null,li=null,ji=null,dr=null,ks=null,ha=null,Ta=null,xf=null;return{setTest:function(uo){Lt||(uo?Wi(2960):wi(2960))},setMask:function(uo){_n!==uo&&!Lt&&(x.stencilMask(uo),_n=uo)},setFunc:function(uo,Zu,Zl){(li!==uo||ji!==Zu||dr!==Zl)&&(x.stencilFunc(uo,Zu,Zl),li=uo,ji=Zu,dr=Zl)},setOp:function(uo,Zu,Zl){(ks!==uo||ha!==Zu||Ta!==Zl)&&(x.stencilOp(uo,Zu,Zl),ks=uo,ha=Zu,Ta=Zl)},setLocked:function(uo){Lt=uo},setClear:function(uo){xf!==uo&&(x.clearStencil(uo),xf=uo)},reset:function(){Lt=!1,_n=null,li=null,ji=null,dr=null,ks=null,ha=null,Ta=null,xf=null}}}const A=new a,N=new c,H=new p,Z=new WeakMap,ne=new WeakMap;let re={},le={},me=new WeakMap,pe=[],de=null,Ce=!1,Fe=null,Re=null,De=null,Ve=null,ct=null,bt=null,Ne=null,dt=!1,vt=null,Ut=null,hn=null,Kt=null,Dt=null;const sn=x.getParameter(35661);let kn=!1,Zn=0;const Ln=x.getParameter(7938);Ln.indexOf("WebGL")!==-1?(Zn=parseFloat(/^WebGL (\d)/.exec(Ln)[1]),kn=Zn>=1):Ln.indexOf("OpenGL ES")!==-1&&(Zn=parseFloat(/^OpenGL ES (\d)/.exec(Ln)[1]),kn=Zn>=2);let ui=null,si={};const Qi=x.getParameter(3088),Li=x.getParameter(2978),gn=new es().fromArray(Qi),$n=new es().fromArray(Li);function _i(Lt,_n,li){const ji=new Uint8Array(4),dr=x.createTexture();x.bindTexture(Lt,dr),x.texParameteri(Lt,10241,9728),x.texParameteri(Lt,10240,9728);for(let ks=0;ks<li;ks++)x.texImage2D(_n+ks,0,6408,1,1,0,6408,5121,ji);return dr}const ln={};ln[3553]=_i(3553,3553,1),ln[34067]=_i(34067,34069,6),A.setClear(0,0,0,1),N.setClear(1),H.setClear(0),Wi(2929),N.setFunc(je),Di(!1),Vr(E),Wi(2884),yi(J);function Wi(Lt){re[Lt]!==!0&&(x.enable(Lt),re[Lt]=!0)}function wi(Lt){re[Lt]!==!1&&(x.disable(Lt),re[Lt]=!1)}function Ar(Lt,_n){return le[Lt]!==_n?(x.bindFramebuffer(Lt,_n),le[Lt]=_n,r&&(Lt===36009&&(le[36160]=_n),Lt===36160&&(le[36009]=_n)),!0):!1}function mi(Lt,_n){let li=pe,ji=!1;if(Lt)if(li=me.get(_n),li===void 0&&(li=[],me.set(_n,li)),Lt.isWebGLMultipleRenderTargets){const dr=Lt.texture;if(li.length!==dr.length||li[0]!==36064){for(let ks=0,ha=dr.length;ks<ha;ks++)li[ks]=36064+ks;li.length=dr.length,ji=!0}}else li[0]!==36064&&(li[0]=36064,ji=!0);else li[0]!==1029&&(li[0]=1029,ji=!0);ji&&(n.isWebGL2?x.drawBuffers(li):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(li))}function rs(Lt){return de!==Lt?(x.useProgram(Lt),de=Lt,!0):!1}const Hn={[Ee]:32774,[V]:32778,[q]:32779};if(r)Hn[Q]=32775,Hn[F]=32776;else{const Lt=e.get("EXT_blend_minmax");Lt!==null&&(Hn[Q]=Lt.MIN_EXT,Hn[F]=Lt.MAX_EXT)}const Rn={[z]:0,[X]:1,[fe]:768,[Se]:770,[Gt]:776,[xt]:774,[Ge]:772,[Ae]:769,[Be]:771,[at]:775,[ht]:773};function yi(Lt,_n,li,ji,dr,ks,ha,Ta){if(Lt===J){Ce===!0&&(wi(3042),Ce=!1);return}if(Ce===!1&&(Wi(3042),Ce=!0),Lt!==xe){if(Lt!==Fe||Ta!==dt){if((Re!==Ee||ct!==Ee)&&(x.blendEquation(32774),Re=Ee,ct=Ee),Ta)switch(Lt){case j:x.blendFuncSeparate(1,771,1,771);break;case U:x.blendFunc(1,1);break;case te:x.blendFuncSeparate(0,769,0,1);break;case ue:x.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Lt);break}else switch(Lt){case j:x.blendFuncSeparate(770,771,1,771);break;case U:x.blendFunc(770,1);break;case te:x.blendFuncSeparate(0,769,0,1);break;case ue:x.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Lt);break}De=null,Ve=null,bt=null,Ne=null,Fe=Lt,dt=Ta}return}dr=dr||_n,ks=ks||li,ha=ha||ji,(_n!==Re||dr!==ct)&&(x.blendEquationSeparate(Hn[_n],Hn[dr]),Re=_n,ct=dr),(li!==De||ji!==Ve||ks!==bt||ha!==Ne)&&(x.blendFuncSeparate(Rn[li],Rn[ji],Rn[ks],Rn[ha]),De=li,Ve=ji,bt=ks,Ne=ha),Fe=Lt,dt=!1}function cr(Lt,_n){Lt.side===Y?wi(2884):Wi(2884);let li=Lt.side===P;_n&&(li=!li),Di(li),Lt.blending===j&&Lt.transparent===!1?yi(J):yi(Lt.blending,Lt.blendEquation,Lt.blendSrc,Lt.blendDst,Lt.blendEquationAlpha,Lt.blendSrcAlpha,Lt.blendDstAlpha,Lt.premultipliedAlpha),N.setFunc(Lt.depthFunc),N.setTest(Lt.depthTest),N.setMask(Lt.depthWrite),A.setMask(Lt.colorWrite);const ji=Lt.stencilWrite;H.setTest(ji),ji&&(H.setMask(Lt.stencilWriteMask),H.setFunc(Lt.stencilFunc,Lt.stencilRef,Lt.stencilFuncMask),H.setOp(Lt.stencilFail,Lt.stencilZFail,Lt.stencilZPass)),yr(Lt.polygonOffset,Lt.polygonOffsetFactor,Lt.polygonOffsetUnits),Lt.alphaToCoverage===!0?Wi(32926):wi(32926)}function Di(Lt){vt!==Lt&&(Lt?x.frontFace(2304):x.frontFace(2305),vt=Lt)}function Vr(Lt){Lt!==y?(Wi(2884),Lt!==Ut&&(Lt===E?x.cullFace(1029):Lt===_?x.cullFace(1028):x.cullFace(1032))):wi(2884),Ut=Lt}function Sr(Lt){Lt!==hn&&(kn&&x.lineWidth(Lt),hn=Lt)}function yr(Lt,_n,li){Lt?(Wi(32823),(Kt!==_n||Dt!==li)&&(x.polygonOffset(_n,li),Kt=_n,Dt=li)):wi(32823)}function Ys(Lt){Lt?Wi(3089):wi(3089)}function zs(Lt){Lt===void 0&&(Lt=33984+sn-1),ui!==Lt&&(x.activeTexture(Lt),ui=Lt)}function ft(Lt,_n,li){li===void 0&&(ui===null?li=33984+sn-1:li=ui);let ji=si[li];ji===void 0&&(ji={type:void 0,texture:void 0},si[li]=ji),(ji.type!==Lt||ji.texture!==_n)&&(ui!==li&&(x.activeTexture(li),ui=li),x.bindTexture(Lt,_n||ln[Lt]),ji.type=Lt,ji.texture=_n)}function tt(){const Lt=si[ui];Lt!==void 0&&Lt.type!==void 0&&(x.bindTexture(Lt.type,null),Lt.type=void 0,Lt.texture=void 0)}function fn(){try{x.compressedTexImage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function hi(){try{x.compressedTexImage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Ai(){try{x.texSubImage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function ki(){try{x.texSubImage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Gr(){try{x.compressedTexSubImage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Hi(){try{x.compressedTexSubImage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Bn(){try{x.texStorage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function xr(){try{x.texStorage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Lr(){try{x.texImage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function or(){try{x.texImage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Ir(Lt){gn.equals(Lt)===!1&&(x.scissor(Lt.x,Lt.y,Lt.z,Lt.w),gn.copy(Lt))}function Er(Lt){$n.equals(Lt)===!1&&(x.viewport(Lt.x,Lt.y,Lt.z,Lt.w),$n.copy(Lt))}function Bs(Lt,_n){let li=ne.get(_n);li===void 0&&(li=new WeakMap,ne.set(_n,li));let ji=li.get(Lt);ji===void 0&&(ji=x.getUniformBlockIndex(_n,Lt.name),li.set(Lt,ji))}function co(Lt,_n){const ji=ne.get(_n).get(Lt);Z.get(Lt)!==ji&&(x.uniformBlockBinding(_n,ji,Lt.__bindingPointIndex),Z.set(Lt,ji))}function ua(){x.disable(3042),x.disable(2884),x.disable(2929),x.disable(32823),x.disable(3089),x.disable(2960),x.disable(32926),x.blendEquation(32774),x.blendFunc(1,0),x.blendFuncSeparate(1,0,1,0),x.colorMask(!0,!0,!0,!0),x.clearColor(0,0,0,0),x.depthMask(!0),x.depthFunc(513),x.clearDepth(1),x.stencilMask(4294967295),x.stencilFunc(519,0,4294967295),x.stencilOp(7680,7680,7680),x.clearStencil(0),x.cullFace(1029),x.frontFace(2305),x.polygonOffset(0,0),x.activeTexture(33984),x.bindFramebuffer(36160,null),r===!0&&(x.bindFramebuffer(36009,null),x.bindFramebuffer(36008,null)),x.useProgram(null),x.lineWidth(1),x.scissor(0,0,x.canvas.width,x.canvas.height),x.viewport(0,0,x.canvas.width,x.canvas.height),re={},ui=null,si={},le={},me=new WeakMap,pe=[],de=null,Ce=!1,Fe=null,Re=null,De=null,Ve=null,ct=null,bt=null,Ne=null,dt=!1,vt=null,Ut=null,hn=null,Kt=null,Dt=null,gn.set(0,0,x.canvas.width,x.canvas.height),$n.set(0,0,x.canvas.width,x.canvas.height),A.reset(),N.reset(),H.reset()}return{buffers:{color:A,depth:N,stencil:H},enable:Wi,disable:wi,bindFramebuffer:Ar,drawBuffers:mi,useProgram:rs,setBlending:yi,setMaterial:cr,setFlipSided:Di,setCullFace:Vr,setLineWidth:Sr,setPolygonOffset:yr,setScissorTest:Ys,activeTexture:zs,bindTexture:ft,unbindTexture:tt,compressedTexImage2D:fn,compressedTexImage3D:hi,texImage2D:Lr,texImage3D:or,updateUBOMapping:Bs,uniformBlockBinding:co,texStorage2D:Bn,texStorage3D:xr,texSubImage2D:Ai,texSubImage3D:ki,compressedTexSubImage2D:Gr,compressedTexSubImage3D:Hi,scissor:Ir,viewport:Er,reset:ua}}function Yv(x,e,n,r,a,c,p){const A=a.isWebGL2,N=a.maxTextures,H=a.maxCubemapSize,Z=a.maxTextureSize,ne=a.maxSamples,re=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,le=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),me=new WeakMap;let pe;const de=new WeakMap;let Ce=!1;try{Ce=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Fe(ft,tt){return Ce?new OffscreenCanvas(ft,tt):Fl("canvas")}function Re(ft,tt,fn,hi){let Ai=1;if((ft.width>hi||ft.height>hi)&&(Ai=hi/Math.max(ft.width,ft.height)),Ai<1||tt===!0)if(typeof HTMLImageElement<"u"&&ft instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ft instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ft instanceof ImageBitmap){const ki=tt?pu:Math.floor,Gr=ki(Ai*ft.width),Hi=ki(Ai*ft.height);pe===void 0&&(pe=Fe(Gr,Hi));const Bn=fn?Fe(Gr,Hi):pe;return Bn.width=Gr,Bn.height=Hi,Bn.getContext("2d").drawImage(ft,0,0,Gr,Hi),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ft.width+"x"+ft.height+") to ("+Gr+"x"+Hi+")."),Bn}else return"data"in ft&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ft.width+"x"+ft.height+")."),ft;return ft}function De(ft){return lh(ft.width)&&lh(ft.height)}function Ve(ft){return A?!1:ft.wrapS!==Oe||ft.wrapT!==Oe||ft.minFilter!==ae&&ft.minFilter!==Ke}function ct(ft,tt){return ft.generateMipmaps&&tt&&ft.minFilter!==ae&&ft.minFilter!==Ke}function bt(ft){x.generateMipmap(ft)}function Ne(ft,tt,fn,hi,Ai=!1){if(A===!1)return tt;if(ft!==null){if(x[ft]!==void 0)return x[ft];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ft+"'")}let ki=tt;return tt===6403&&(fn===5126&&(ki=33326),fn===5131&&(ki=33325),fn===5121&&(ki=33321)),tt===33319&&(fn===5126&&(ki=33328),fn===5131&&(ki=33327),fn===5121&&(ki=33323)),tt===6408&&(fn===5126&&(ki=34836),fn===5131&&(ki=34842),fn===5121&&(ki=hi===vr&&Ai===!1?35907:32856),fn===32819&&(ki=32854),fn===32820&&(ki=32855)),(ki===33325||ki===33326||ki===33327||ki===33328||ki===34842||ki===34836)&&e.get("EXT_color_buffer_float"),ki}function dt(ft,tt,fn){return ct(ft,fn)===!0||ft.isFramebufferTexture&&ft.minFilter!==ae&&ft.minFilter!==Ke?Math.log2(Math.max(tt.width,tt.height))+1:ft.mipmaps!==void 0&&ft.mipmaps.length>0?ft.mipmaps.length:ft.isCompressedTexture&&Array.isArray(ft.image)?tt.mipmaps.length:1}function vt(ft){return ft===ae||ft===ee||ft===Ie?9728:9729}function Ut(ft){const tt=ft.target;tt.removeEventListener("dispose",Ut),Kt(tt),tt.isVideoTexture&&me.delete(tt)}function hn(ft){const tt=ft.target;tt.removeEventListener("dispose",hn),sn(tt)}function Kt(ft){const tt=r.get(ft);if(tt.__webglInit===void 0)return;const fn=ft.source,hi=de.get(fn);if(hi){const Ai=hi[tt.__cacheKey];Ai.usedTimes--,Ai.usedTimes===0&&Dt(ft),Object.keys(hi).length===0&&de.delete(fn)}r.remove(ft)}function Dt(ft){const tt=r.get(ft);x.deleteTexture(tt.__webglTexture);const fn=ft.source,hi=de.get(fn);delete hi[tt.__cacheKey],p.memory.textures--}function sn(ft){const tt=ft.texture,fn=r.get(ft),hi=r.get(tt);if(hi.__webglTexture!==void 0&&(x.deleteTexture(hi.__webglTexture),p.memory.textures--),ft.depthTexture&&ft.depthTexture.dispose(),ft.isWebGLCubeRenderTarget)for(let Ai=0;Ai<6;Ai++)x.deleteFramebuffer(fn.__webglFramebuffer[Ai]),fn.__webglDepthbuffer&&x.deleteRenderbuffer(fn.__webglDepthbuffer[Ai]);else{if(x.deleteFramebuffer(fn.__webglFramebuffer),fn.__webglDepthbuffer&&x.deleteRenderbuffer(fn.__webglDepthbuffer),fn.__webglMultisampledFramebuffer&&x.deleteFramebuffer(fn.__webglMultisampledFramebuffer),fn.__webglColorRenderbuffer)for(let Ai=0;Ai<fn.__webglColorRenderbuffer.length;Ai++)fn.__webglColorRenderbuffer[Ai]&&x.deleteRenderbuffer(fn.__webglColorRenderbuffer[Ai]);fn.__webglDepthRenderbuffer&&x.deleteRenderbuffer(fn.__webglDepthRenderbuffer)}if(ft.isWebGLMultipleRenderTargets)for(let Ai=0,ki=tt.length;Ai<ki;Ai++){const Gr=r.get(tt[Ai]);Gr.__webglTexture&&(x.deleteTexture(Gr.__webglTexture),p.memory.textures--),r.remove(tt[Ai])}r.remove(tt),r.remove(ft)}let kn=0;function Zn(){kn=0}function Ln(){const ft=kn;return ft>=N&&console.warn("THREE.WebGLTextures: Trying to use "+ft+" texture units while this GPU supports only "+N),kn+=1,ft}function ui(ft){const tt=[];return tt.push(ft.wrapS),tt.push(ft.wrapT),tt.push(ft.wrapR||0),tt.push(ft.magFilter),tt.push(ft.minFilter),tt.push(ft.anisotropy),tt.push(ft.internalFormat),tt.push(ft.format),tt.push(ft.type),tt.push(ft.generateMipmaps),tt.push(ft.premultiplyAlpha),tt.push(ft.flipY),tt.push(ft.unpackAlignment),tt.push(ft.encoding),tt.join()}function si(ft,tt){const fn=r.get(ft);if(ft.isVideoTexture&&Ys(ft),ft.isRenderTargetTexture===!1&&ft.version>0&&fn.__version!==ft.version){const hi=ft.image;if(hi===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(hi.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{wi(fn,ft,tt);return}}n.bindTexture(3553,fn.__webglTexture,33984+tt)}function Qi(ft,tt){const fn=r.get(ft);if(ft.version>0&&fn.__version!==ft.version){wi(fn,ft,tt);return}n.bindTexture(35866,fn.__webglTexture,33984+tt)}function Li(ft,tt){const fn=r.get(ft);if(ft.version>0&&fn.__version!==ft.version){wi(fn,ft,tt);return}n.bindTexture(32879,fn.__webglTexture,33984+tt)}function gn(ft,tt){const fn=r.get(ft);if(ft.version>0&&fn.__version!==ft.version){Ar(fn,ft,tt);return}n.bindTexture(34067,fn.__webglTexture,33984+tt)}const $n={[Te]:10497,[Oe]:33071,[Ze]:33648},_i={[ae]:9728,[ee]:9984,[Ie]:9986,[Ke]:9729,[$e]:9985,[$t]:9987};function ln(ft,tt,fn){if(fn?(x.texParameteri(ft,10242,$n[tt.wrapS]),x.texParameteri(ft,10243,$n[tt.wrapT]),(ft===32879||ft===35866)&&x.texParameteri(ft,32882,$n[tt.wrapR]),x.texParameteri(ft,10240,_i[tt.magFilter]),x.texParameteri(ft,10241,_i[tt.minFilter])):(x.texParameteri(ft,10242,33071),x.texParameteri(ft,10243,33071),(ft===32879||ft===35866)&&x.texParameteri(ft,32882,33071),(tt.wrapS!==Oe||tt.wrapT!==Oe)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),x.texParameteri(ft,10240,vt(tt.magFilter)),x.texParameteri(ft,10241,vt(tt.minFilter)),tt.minFilter!==ae&&tt.minFilter!==Ke&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const hi=e.get("EXT_texture_filter_anisotropic");if(tt.type===vn&&e.has("OES_texture_float_linear")===!1||A===!1&&tt.type===Ft&&e.has("OES_texture_half_float_linear")===!1)return;(tt.anisotropy>1||r.get(tt).__currentAnisotropy)&&(x.texParameterf(ft,hi.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(tt.anisotropy,a.getMaxAnisotropy())),r.get(tt).__currentAnisotropy=tt.anisotropy)}}function Wi(ft,tt){let fn=!1;ft.__webglInit===void 0&&(ft.__webglInit=!0,tt.addEventListener("dispose",Ut));const hi=tt.source;let Ai=de.get(hi);Ai===void 0&&(Ai={},de.set(hi,Ai));const ki=ui(tt);if(ki!==ft.__cacheKey){Ai[ki]===void 0&&(Ai[ki]={texture:x.createTexture(),usedTimes:0},p.memory.textures++,fn=!0),Ai[ki].usedTimes++;const Gr=Ai[ft.__cacheKey];Gr!==void 0&&(Ai[ft.__cacheKey].usedTimes--,Gr.usedTimes===0&&Dt(tt)),ft.__cacheKey=ki,ft.__webglTexture=Ai[ki].texture}return fn}function wi(ft,tt,fn){let hi=3553;(tt.isDataArrayTexture||tt.isCompressedArrayTexture)&&(hi=35866),tt.isData3DTexture&&(hi=32879);const Ai=Wi(ft,tt),ki=tt.source;n.bindTexture(hi,ft.__webglTexture,33984+fn);const Gr=r.get(ki);if(ki.version!==Gr.__version||Ai===!0){n.activeTexture(33984+fn),x.pixelStorei(37440,tt.flipY),x.pixelStorei(37441,tt.premultiplyAlpha),x.pixelStorei(3317,tt.unpackAlignment),x.pixelStorei(37443,0);const Hi=Ve(tt)&&De(tt.image)===!1;let Bn=Re(tt.image,Hi,!1,Z);Bn=zs(tt,Bn);const xr=De(Bn)||A,Lr=c.convert(tt.format,tt.encoding);let or=c.convert(tt.type),Ir=Ne(tt.internalFormat,Lr,or,tt.encoding,tt.isVideoTexture);ln(hi,tt,xr);let Er;const Bs=tt.mipmaps,co=A&&tt.isVideoTexture!==!0,ua=Gr.__version===void 0||Ai===!0,Lt=dt(tt,Bn,xr);if(tt.isDepthTexture)Ir=6402,A?tt.type===vn?Ir=36012:tt.type===Nn?Ir=33190:tt.type===Dn?Ir=35056:Ir=33189:tt.type===vn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),tt.format===zr&&Ir===6402&&tt.type!==di&&tt.type!==Nn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),tt.type=Nn,or=c.convert(tt.type)),tt.format===Pr&&Ir===6402&&(Ir=34041,tt.type!==Dn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),tt.type=Dn,or=c.convert(tt.type))),ua&&(co?n.texStorage2D(3553,1,Ir,Bn.width,Bn.height):n.texImage2D(3553,0,Ir,Bn.width,Bn.height,0,Lr,or,null));else if(tt.isDataTexture)if(Bs.length>0&&xr){co&&ua&&n.texStorage2D(3553,Lt,Ir,Bs[0].width,Bs[0].height);for(let _n=0,li=Bs.length;_n<li;_n++)Er=Bs[_n],co?n.texSubImage2D(3553,_n,0,0,Er.width,Er.height,Lr,or,Er.data):n.texImage2D(3553,_n,Ir,Er.width,Er.height,0,Lr,or,Er.data);tt.generateMipmaps=!1}else co?(ua&&n.texStorage2D(3553,Lt,Ir,Bn.width,Bn.height),n.texSubImage2D(3553,0,0,0,Bn.width,Bn.height,Lr,or,Bn.data)):n.texImage2D(3553,0,Ir,Bn.width,Bn.height,0,Lr,or,Bn.data);else if(tt.isCompressedTexture)if(tt.isCompressedArrayTexture){co&&ua&&n.texStorage3D(35866,Lt,Ir,Bs[0].width,Bs[0].height,Bn.depth);for(let _n=0,li=Bs.length;_n<li;_n++)Er=Bs[_n],tt.format!==Zi?Lr!==null?co?n.compressedTexSubImage3D(35866,_n,0,0,0,Er.width,Er.height,Bn.depth,Lr,Er.data,0,0):n.compressedTexImage3D(35866,_n,Ir,Er.width,Er.height,Bn.depth,0,Er.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):co?n.texSubImage3D(35866,_n,0,0,0,Er.width,Er.height,Bn.depth,Lr,or,Er.data):n.texImage3D(35866,_n,Ir,Er.width,Er.height,Bn.depth,0,Lr,or,Er.data)}else{co&&ua&&n.texStorage2D(3553,Lt,Ir,Bs[0].width,Bs[0].height);for(let _n=0,li=Bs.length;_n<li;_n++)Er=Bs[_n],tt.format!==Zi?Lr!==null?co?n.compressedTexSubImage2D(3553,_n,0,0,Er.width,Er.height,Lr,Er.data):n.compressedTexImage2D(3553,_n,Ir,Er.width,Er.height,0,Er.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):co?n.texSubImage2D(3553,_n,0,0,Er.width,Er.height,Lr,or,Er.data):n.texImage2D(3553,_n,Ir,Er.width,Er.height,0,Lr,or,Er.data)}else if(tt.isDataArrayTexture)co?(ua&&n.texStorage3D(35866,Lt,Ir,Bn.width,Bn.height,Bn.depth),n.texSubImage3D(35866,0,0,0,0,Bn.width,Bn.height,Bn.depth,Lr,or,Bn.data)):n.texImage3D(35866,0,Ir,Bn.width,Bn.height,Bn.depth,0,Lr,or,Bn.data);else if(tt.isData3DTexture)co?(ua&&n.texStorage3D(32879,Lt,Ir,Bn.width,Bn.height,Bn.depth),n.texSubImage3D(32879,0,0,0,0,Bn.width,Bn.height,Bn.depth,Lr,or,Bn.data)):n.texImage3D(32879,0,Ir,Bn.width,Bn.height,Bn.depth,0,Lr,or,Bn.data);else if(tt.isFramebufferTexture){if(ua)if(co)n.texStorage2D(3553,Lt,Ir,Bn.width,Bn.height);else{let _n=Bn.width,li=Bn.height;for(let ji=0;ji<Lt;ji++)n.texImage2D(3553,ji,Ir,_n,li,0,Lr,or,null),_n>>=1,li>>=1}}else if(Bs.length>0&&xr){co&&ua&&n.texStorage2D(3553,Lt,Ir,Bs[0].width,Bs[0].height);for(let _n=0,li=Bs.length;_n<li;_n++)Er=Bs[_n],co?n.texSubImage2D(3553,_n,0,0,Lr,or,Er):n.texImage2D(3553,_n,Ir,Lr,or,Er);tt.generateMipmaps=!1}else co?(ua&&n.texStorage2D(3553,Lt,Ir,Bn.width,Bn.height),n.texSubImage2D(3553,0,0,0,Lr,or,Bn)):n.texImage2D(3553,0,Ir,Lr,or,Bn);ct(tt,xr)&&bt(hi),Gr.__version=ki.version,tt.onUpdate&&tt.onUpdate(tt)}ft.__version=tt.version}function Ar(ft,tt,fn){if(tt.image.length!==6)return;const hi=Wi(ft,tt),Ai=tt.source;n.bindTexture(34067,ft.__webglTexture,33984+fn);const ki=r.get(Ai);if(Ai.version!==ki.__version||hi===!0){n.activeTexture(33984+fn),x.pixelStorei(37440,tt.flipY),x.pixelStorei(37441,tt.premultiplyAlpha),x.pixelStorei(3317,tt.unpackAlignment),x.pixelStorei(37443,0);const Gr=tt.isCompressedTexture||tt.image[0].isCompressedTexture,Hi=tt.image[0]&&tt.image[0].isDataTexture,Bn=[];for(let _n=0;_n<6;_n++)!Gr&&!Hi?Bn[_n]=Re(tt.image[_n],!1,!0,H):Bn[_n]=Hi?tt.image[_n].image:tt.image[_n],Bn[_n]=zs(tt,Bn[_n]);const xr=Bn[0],Lr=De(xr)||A,or=c.convert(tt.format,tt.encoding),Ir=c.convert(tt.type),Er=Ne(tt.internalFormat,or,Ir,tt.encoding),Bs=A&&tt.isVideoTexture!==!0,co=ki.__version===void 0||hi===!0;let ua=dt(tt,xr,Lr);ln(34067,tt,Lr);let Lt;if(Gr){Bs&&co&&n.texStorage2D(34067,ua,Er,xr.width,xr.height);for(let _n=0;_n<6;_n++){Lt=Bn[_n].mipmaps;for(let li=0;li<Lt.length;li++){const ji=Lt[li];tt.format!==Zi?or!==null?Bs?n.compressedTexSubImage2D(34069+_n,li,0,0,ji.width,ji.height,or,ji.data):n.compressedTexImage2D(34069+_n,li,Er,ji.width,ji.height,0,ji.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bs?n.texSubImage2D(34069+_n,li,0,0,ji.width,ji.height,or,Ir,ji.data):n.texImage2D(34069+_n,li,Er,ji.width,ji.height,0,or,Ir,ji.data)}}}else{Lt=tt.mipmaps,Bs&&co&&(Lt.length>0&&ua++,n.texStorage2D(34067,ua,Er,Bn[0].width,Bn[0].height));for(let _n=0;_n<6;_n++)if(Hi){Bs?n.texSubImage2D(34069+_n,0,0,0,Bn[_n].width,Bn[_n].height,or,Ir,Bn[_n].data):n.texImage2D(34069+_n,0,Er,Bn[_n].width,Bn[_n].height,0,or,Ir,Bn[_n].data);for(let li=0;li<Lt.length;li++){const dr=Lt[li].image[_n].image;Bs?n.texSubImage2D(34069+_n,li+1,0,0,dr.width,dr.height,or,Ir,dr.data):n.texImage2D(34069+_n,li+1,Er,dr.width,dr.height,0,or,Ir,dr.data)}}else{Bs?n.texSubImage2D(34069+_n,0,0,0,or,Ir,Bn[_n]):n.texImage2D(34069+_n,0,Er,or,Ir,Bn[_n]);for(let li=0;li<Lt.length;li++){const ji=Lt[li];Bs?n.texSubImage2D(34069+_n,li+1,0,0,or,Ir,ji.image[_n]):n.texImage2D(34069+_n,li+1,Er,or,Ir,ji.image[_n])}}}ct(tt,Lr)&&bt(34067),ki.__version=Ai.version,tt.onUpdate&&tt.onUpdate(tt)}ft.__version=tt.version}function mi(ft,tt,fn,hi,Ai){const ki=c.convert(fn.format,fn.encoding),Gr=c.convert(fn.type),Hi=Ne(fn.internalFormat,ki,Gr,fn.encoding);r.get(tt).__hasExternalTextures||(Ai===32879||Ai===35866?n.texImage3D(Ai,0,Hi,tt.width,tt.height,tt.depth,0,ki,Gr,null):n.texImage2D(Ai,0,Hi,tt.width,tt.height,0,ki,Gr,null)),n.bindFramebuffer(36160,ft),yr(tt)?re.framebufferTexture2DMultisampleEXT(36160,hi,Ai,r.get(fn).__webglTexture,0,Sr(tt)):(Ai===3553||Ai>=34069&&Ai<=34074)&&x.framebufferTexture2D(36160,hi,Ai,r.get(fn).__webglTexture,0),n.bindFramebuffer(36160,null)}function rs(ft,tt,fn){if(x.bindRenderbuffer(36161,ft),tt.depthBuffer&&!tt.stencilBuffer){let hi=33189;if(fn||yr(tt)){const Ai=tt.depthTexture;Ai&&Ai.isDepthTexture&&(Ai.type===vn?hi=36012:Ai.type===Nn&&(hi=33190));const ki=Sr(tt);yr(tt)?re.renderbufferStorageMultisampleEXT(36161,ki,hi,tt.width,tt.height):x.renderbufferStorageMultisample(36161,ki,hi,tt.width,tt.height)}else x.renderbufferStorage(36161,hi,tt.width,tt.height);x.framebufferRenderbuffer(36160,36096,36161,ft)}else if(tt.depthBuffer&&tt.stencilBuffer){const hi=Sr(tt);fn&&yr(tt)===!1?x.renderbufferStorageMultisample(36161,hi,35056,tt.width,tt.height):yr(tt)?re.renderbufferStorageMultisampleEXT(36161,hi,35056,tt.width,tt.height):x.renderbufferStorage(36161,34041,tt.width,tt.height),x.framebufferRenderbuffer(36160,33306,36161,ft)}else{const hi=tt.isWebGLMultipleRenderTargets===!0?tt.texture:[tt.texture];for(let Ai=0;Ai<hi.length;Ai++){const ki=hi[Ai],Gr=c.convert(ki.format,ki.encoding),Hi=c.convert(ki.type),Bn=Ne(ki.internalFormat,Gr,Hi,ki.encoding),xr=Sr(tt);fn&&yr(tt)===!1?x.renderbufferStorageMultisample(36161,xr,Bn,tt.width,tt.height):yr(tt)?re.renderbufferStorageMultisampleEXT(36161,xr,Bn,tt.width,tt.height):x.renderbufferStorage(36161,Bn,tt.width,tt.height)}}x.bindRenderbuffer(36161,null)}function Hn(ft,tt){if(tt&&tt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,ft),!(tt.depthTexture&&tt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(tt.depthTexture).__webglTexture||tt.depthTexture.image.width!==tt.width||tt.depthTexture.image.height!==tt.height)&&(tt.depthTexture.image.width=tt.width,tt.depthTexture.image.height=tt.height,tt.depthTexture.needsUpdate=!0),si(tt.depthTexture,0);const hi=r.get(tt.depthTexture).__webglTexture,Ai=Sr(tt);if(tt.depthTexture.format===zr)yr(tt)?re.framebufferTexture2DMultisampleEXT(36160,36096,3553,hi,0,Ai):x.framebufferTexture2D(36160,36096,3553,hi,0);else if(tt.depthTexture.format===Pr)yr(tt)?re.framebufferTexture2DMultisampleEXT(36160,33306,3553,hi,0,Ai):x.framebufferTexture2D(36160,33306,3553,hi,0);else throw new Error("Unknown depthTexture format")}function Rn(ft){const tt=r.get(ft),fn=ft.isWebGLCubeRenderTarget===!0;if(ft.depthTexture&&!tt.__autoAllocateDepthBuffer){if(fn)throw new Error("target.depthTexture not supported in Cube render targets");Hn(tt.__webglFramebuffer,ft)}else if(fn){tt.__webglDepthbuffer=[];for(let hi=0;hi<6;hi++)n.bindFramebuffer(36160,tt.__webglFramebuffer[hi]),tt.__webglDepthbuffer[hi]=x.createRenderbuffer(),rs(tt.__webglDepthbuffer[hi],ft,!1)}else n.bindFramebuffer(36160,tt.__webglFramebuffer),tt.__webglDepthbuffer=x.createRenderbuffer(),rs(tt.__webglDepthbuffer,ft,!1);n.bindFramebuffer(36160,null)}function yi(ft,tt,fn){const hi=r.get(ft);tt!==void 0&&mi(hi.__webglFramebuffer,ft,ft.texture,36064,3553),fn!==void 0&&Rn(ft)}function cr(ft){const tt=ft.texture,fn=r.get(ft),hi=r.get(tt);ft.addEventListener("dispose",hn),ft.isWebGLMultipleRenderTargets!==!0&&(hi.__webglTexture===void 0&&(hi.__webglTexture=x.createTexture()),hi.__version=tt.version,p.memory.textures++);const Ai=ft.isWebGLCubeRenderTarget===!0,ki=ft.isWebGLMultipleRenderTargets===!0,Gr=De(ft)||A;if(Ai){fn.__webglFramebuffer=[];for(let Hi=0;Hi<6;Hi++)fn.__webglFramebuffer[Hi]=x.createFramebuffer()}else{if(fn.__webglFramebuffer=x.createFramebuffer(),ki)if(a.drawBuffers){const Hi=ft.texture;for(let Bn=0,xr=Hi.length;Bn<xr;Bn++){const Lr=r.get(Hi[Bn]);Lr.__webglTexture===void 0&&(Lr.__webglTexture=x.createTexture(),p.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(A&&ft.samples>0&&yr(ft)===!1){const Hi=ki?tt:[tt];fn.__webglMultisampledFramebuffer=x.createFramebuffer(),fn.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,fn.__webglMultisampledFramebuffer);for(let Bn=0;Bn<Hi.length;Bn++){const xr=Hi[Bn];fn.__webglColorRenderbuffer[Bn]=x.createRenderbuffer(),x.bindRenderbuffer(36161,fn.__webglColorRenderbuffer[Bn]);const Lr=c.convert(xr.format,xr.encoding),or=c.convert(xr.type),Ir=Ne(xr.internalFormat,Lr,or,xr.encoding,ft.isXRRenderTarget===!0),Er=Sr(ft);x.renderbufferStorageMultisample(36161,Er,Ir,ft.width,ft.height),x.framebufferRenderbuffer(36160,36064+Bn,36161,fn.__webglColorRenderbuffer[Bn])}x.bindRenderbuffer(36161,null),ft.depthBuffer&&(fn.__webglDepthRenderbuffer=x.createRenderbuffer(),rs(fn.__webglDepthRenderbuffer,ft,!0)),n.bindFramebuffer(36160,null)}}if(Ai){n.bindTexture(34067,hi.__webglTexture),ln(34067,tt,Gr);for(let Hi=0;Hi<6;Hi++)mi(fn.__webglFramebuffer[Hi],ft,tt,36064,34069+Hi);ct(tt,Gr)&&bt(34067),n.unbindTexture()}else if(ki){const Hi=ft.texture;for(let Bn=0,xr=Hi.length;Bn<xr;Bn++){const Lr=Hi[Bn],or=r.get(Lr);n.bindTexture(3553,or.__webglTexture),ln(3553,Lr,Gr),mi(fn.__webglFramebuffer,ft,Lr,36064+Bn,3553),ct(Lr,Gr)&&bt(3553)}n.unbindTexture()}else{let Hi=3553;(ft.isWebGL3DRenderTarget||ft.isWebGLArrayRenderTarget)&&(A?Hi=ft.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Hi,hi.__webglTexture),ln(Hi,tt,Gr),mi(fn.__webglFramebuffer,ft,tt,36064,Hi),ct(tt,Gr)&&bt(Hi),n.unbindTexture()}ft.depthBuffer&&Rn(ft)}function Di(ft){const tt=De(ft)||A,fn=ft.isWebGLMultipleRenderTargets===!0?ft.texture:[ft.texture];for(let hi=0,Ai=fn.length;hi<Ai;hi++){const ki=fn[hi];if(ct(ki,tt)){const Gr=ft.isWebGLCubeRenderTarget?34067:3553,Hi=r.get(ki).__webglTexture;n.bindTexture(Gr,Hi),bt(Gr),n.unbindTexture()}}}function Vr(ft){if(A&&ft.samples>0&&yr(ft)===!1){const tt=ft.isWebGLMultipleRenderTargets?ft.texture:[ft.texture],fn=ft.width,hi=ft.height;let Ai=16384;const ki=[],Gr=ft.stencilBuffer?33306:36096,Hi=r.get(ft),Bn=ft.isWebGLMultipleRenderTargets===!0;if(Bn)for(let xr=0;xr<tt.length;xr++)n.bindFramebuffer(36160,Hi.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(36160,36064+xr,36161,null),n.bindFramebuffer(36160,Hi.__webglFramebuffer),x.framebufferTexture2D(36009,36064+xr,3553,null,0);n.bindFramebuffer(36008,Hi.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Hi.__webglFramebuffer);for(let xr=0;xr<tt.length;xr++){ki.push(36064+xr),ft.depthBuffer&&ki.push(Gr);const Lr=Hi.__ignoreDepthValues!==void 0?Hi.__ignoreDepthValues:!1;if(Lr===!1&&(ft.depthBuffer&&(Ai|=256),ft.stencilBuffer&&(Ai|=1024)),Bn&&x.framebufferRenderbuffer(36008,36064,36161,Hi.__webglColorRenderbuffer[xr]),Lr===!0&&(x.invalidateFramebuffer(36008,[Gr]),x.invalidateFramebuffer(36009,[Gr])),Bn){const or=r.get(tt[xr]).__webglTexture;x.framebufferTexture2D(36009,36064,3553,or,0)}x.blitFramebuffer(0,0,fn,hi,0,0,fn,hi,Ai,9728),le&&x.invalidateFramebuffer(36008,ki)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),Bn)for(let xr=0;xr<tt.length;xr++){n.bindFramebuffer(36160,Hi.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(36160,36064+xr,36161,Hi.__webglColorRenderbuffer[xr]);const Lr=r.get(tt[xr]).__webglTexture;n.bindFramebuffer(36160,Hi.__webglFramebuffer),x.framebufferTexture2D(36009,36064+xr,3553,Lr,0)}n.bindFramebuffer(36009,Hi.__webglMultisampledFramebuffer)}}function Sr(ft){return Math.min(ne,ft.samples)}function yr(ft){const tt=r.get(ft);return A&&ft.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&tt.__useRenderToTexture!==!1}function Ys(ft){const tt=p.render.frame;me.get(ft)!==tt&&(me.set(ft,tt),ft.update())}function zs(ft,tt){const fn=ft.encoding,hi=ft.format,Ai=ft.type;return ft.isCompressedTexture===!0||ft.isVideoTexture===!0||ft.format===du||fn!==Jr&&(fn===vr?A===!1?e.has("EXT_sRGB")===!0&&hi===Zi?(ft.format=du,ft.minFilter=Ke,ft.generateMipmaps=!1):tt=dh.sRGBToLinear(tt):(hi!==Zi||Ai!==jt)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fn)),tt}this.allocateTextureUnit=Ln,this.resetTextureUnits=Zn,this.setTexture2D=si,this.setTexture2DArray=Qi,this.setTexture3D=Li,this.setTextureCube=gn,this.rebindTextures=yi,this.setupRenderTarget=cr,this.updateRenderTargetMipmap=Di,this.updateMultisampleRenderTarget=Vr,this.setupDepthRenderbuffer=Rn,this.setupFrameBufferTexture=mi,this.useMultisampledRTT=yr}function Cg(x,e,n){const r=n.isWebGL2;function a(c,p=null){let A;if(c===jt)return 5121;if(c===yn)return 32819;if(c===Gn)return 32820;if(c===on)return 5120;if(c===In)return 5122;if(c===di)return 5123;if(c===fi)return 5124;if(c===Nn)return 5125;if(c===vn)return 5126;if(c===Ft)return r?5131:(A=e.get("OES_texture_half_float"),A!==null?A.HALF_FLOAT_OES:null);if(c===bi)return 6406;if(c===Zi)return 6408;if(c===Dr)return 6409;if(c===Ki)return 6410;if(c===zr)return 6402;if(c===Pr)return 34041;if(c===Pi)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(c===du)return A=e.get("EXT_sRGB"),A!==null?A.SRGB_ALPHA_EXT:null;if(c===ar)return 6403;if(c===Qr)return 36244;if(c===xs)return 33319;if(c===Qe)return 33320;if(c===ut)return 36249;if(c===_t||c===nn||c===Wt||c===mn)if(p===vr)if(A=e.get("WEBGL_compressed_texture_s3tc_srgb"),A!==null){if(c===_t)return A.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(c===nn)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(c===Wt)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(c===mn)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(A=e.get("WEBGL_compressed_texture_s3tc"),A!==null){if(c===_t)return A.COMPRESSED_RGB_S3TC_DXT1_EXT;if(c===nn)return A.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(c===Wt)return A.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(c===mn)return A.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(c===Un||c===Xn||c===ei||c===pn)if(A=e.get("WEBGL_compressed_texture_pvrtc"),A!==null){if(c===Un)return A.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(c===Xn)return A.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(c===ei)return A.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(c===pn)return A.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(c===Oi)return A=e.get("WEBGL_compressed_texture_etc1"),A!==null?A.COMPRESSED_RGB_ETC1_WEBGL:null;if(c===Mi||c===Ti)if(A=e.get("WEBGL_compressed_texture_etc"),A!==null){if(c===Mi)return p===vr?A.COMPRESSED_SRGB8_ETC2:A.COMPRESSED_RGB8_ETC2;if(c===Ti)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:A.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(c===Xr||c===zi||c===er||c===kr||c===Os||c===ro||c===pi||c===Rr||c===to||c===as||c===ce||c===ge||c===_e||c===Le)if(A=e.get("WEBGL_compressed_texture_astc"),A!==null){if(c===Xr)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:A.COMPRESSED_RGBA_ASTC_4x4_KHR;if(c===zi)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:A.COMPRESSED_RGBA_ASTC_5x4_KHR;if(c===er)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:A.COMPRESSED_RGBA_ASTC_5x5_KHR;if(c===kr)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:A.COMPRESSED_RGBA_ASTC_6x5_KHR;if(c===Os)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:A.COMPRESSED_RGBA_ASTC_6x6_KHR;if(c===ro)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:A.COMPRESSED_RGBA_ASTC_8x5_KHR;if(c===pi)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:A.COMPRESSED_RGBA_ASTC_8x6_KHR;if(c===Rr)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:A.COMPRESSED_RGBA_ASTC_8x8_KHR;if(c===to)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:A.COMPRESSED_RGBA_ASTC_10x5_KHR;if(c===as)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:A.COMPRESSED_RGBA_ASTC_10x6_KHR;if(c===ce)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:A.COMPRESSED_RGBA_ASTC_10x8_KHR;if(c===ge)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:A.COMPRESSED_RGBA_ASTC_10x10_KHR;if(c===_e)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:A.COMPRESSED_RGBA_ASTC_12x10_KHR;if(c===Le)return p===vr?A.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:A.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(c===qe)if(A=e.get("EXT_texture_compression_bptc"),A!==null){if(c===qe)return p===vr?A.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:A.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return c===Dn?r?34042:(A=e.get("WEBGL_depth_texture"),A!==null?A.UNSIGNED_INT_24_8_WEBGL:null):x[c]!==void 0?x[c]:null}return{convert:a}}class Xl extends ds{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Mg extends Ao{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}var sA=new nt,Tg=new nt;function kh(x,e,n){sA.setFromMatrixPosition(e.matrixWorld),Tg.setFromMatrixPosition(n.matrixWorld);var r=sA.distanceTo(Tg),a=e.projectionMatrix.elements,c=n.projectionMatrix.elements,p=a[14]/(a[10]-1),A=a[14]/(a[10]+1),N=(a[9]+1)/a[5],H=(a[9]-1)/a[5],Z=(a[8]-1)/a[0],ne=(c[8]+1)/c[0],re=p*Z,le=p*ne,me=r/(-Z+ne),pe=me*-Z;e.matrixWorld.decompose(x.position,x.quaternion,x.scale),x.translateX(pe),x.translateZ(me),x.matrixWorld.compose(x.position,x.quaternion,x.scale),x.matrixWorldInverse.copy(x.matrixWorld).invert();var de=p+me,Ce=A+me,Fe=re-pe,Re=le+(r-pe),De=N*A/Ce*de,Ve=H*A/Ce*de;x.projectionMatrix.makePerspective(Fe,Re,De,Ve,de,Ce)}function Sg(x){var e,n,r=this,a=null,c=null,p=null,A=[],N=new Gi,H=new Gi,Z=1,ne="local-floor";typeof window<"u"&&"VRFrameData"in window&&(c=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",De,!1));var re=new Gi,le=new Mo,me=new nt,pe=new Ao;pe.viewport=new es,pe.layers.enable(1);var de=new Ao;de.viewport=new es,de.layers.enable(2);var Ce=new Mg([pe,de]);Ce.layers.enable(1),Ce.layers.enable(2);var Fe=new On,Re;function De(){var Ut=r.isPresenting=a!==null&&a.isPresenting===!0;if(Ut){var hn=a.getEyeParameters("left");e=2*hn.renderWidth*Z,n=hn.renderHeight*Z,Re=x.getPixelRatio(),x.getSize(Fe),x.setDrawingBufferSize(e,n,1),pe.viewport.set(0,0,e/2,n),de.viewport.set(e/2,0,e/2,n),vt.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&x.setDrawingBufferSize(Fe.width,Fe.height,Re),vt.stop(),r.dispatchEvent({type:"sessionend"})}var Ve=[],ct=[];function bt(Ut){for(var hn=navigator.getGamepads&&navigator.getGamepads(),Kt=0,Dt=hn.length;Kt<Dt;Kt++){var sn=hn[Kt];if(sn&&(sn.id==="Daydream Controller"||sn.id==="Gear VR Controller"||sn.id==="Oculus Go Controller"||sn.id==="OpenVR Gamepad"||sn.id.startsWith("Oculus Touch")||sn.id.startsWith("HTC Vive Focus")||sn.id.startsWith("Spatial Controller"))){var kn=sn.hand;if(Ut===0&&(kn===""||kn==="right")||Ut===1&&kn==="left")return sn}}}function Ne(){for(var Ut=0;Ut<A.length;Ut++){var hn=A[Ut],Kt=bt(Ut);if(Kt!==void 0&&Kt.pose!==void 0){if(Kt.pose===null)return;var Dt=Kt.pose;Dt.hasPosition===!1&&hn.position.set(.2,-.6,-.05),Dt.position!==null&&hn.position.fromArray(Dt.position),Dt.orientation!==null&&hn.quaternion.fromArray(Dt.orientation),hn.matrix.compose(hn.position,hn.quaternion,hn.scale),hn.matrix.premultiply(N),hn.matrix.decompose(hn.position,hn.quaternion,hn.scale),hn.matrixWorldNeedsUpdate=!0,hn.visible=!0;var sn=Kt.id==="Daydream Controller"?0:1;Ve[Ut]===void 0&&(Ve[Ut]=!1),Ve[Ut]!==Kt.buttons[sn].pressed&&(Ve[Ut]=Kt.buttons[sn].pressed,Ve[Ut]===!0?hn.dispatchEvent({type:"selectstart"}):(hn.dispatchEvent({type:"selectend"}),hn.dispatchEvent({type:"select"}))),sn=2,ct[Ut]===void 0&&(ct[Ut]=!1),Kt.buttons[sn]!==void 0&&ct[Ut]!==Kt.buttons[sn].pressed&&(ct[Ut]=Kt.buttons[sn].pressed,ct[Ut]===!0?hn.dispatchEvent({type:"squeezestart"}):(hn.dispatchEvent({type:"squeezeend"}),hn.dispatchEvent({type:"squeeze"})))}else hn.visible=!1}}function dt(Ut,hn){hn!==null&&hn.length===4&&Ut.set(hn[0]*e,hn[1]*n,hn[2]*e,hn[3]*n)}this.enabled=!1,this.getController=function(Ut){var hn=A[Ut];return hn===void 0&&(hn=new Xl,hn.matrixAutoUpdate=!1,hn.visible=!1,A[Ut]=hn),hn},this.getDevice=function(){return a},this.setDevice=function(Ut){Ut!==void 0&&(a=Ut),vt.setContext(Ut)},this.setFramebufferScaleFactor=function(Ut){Z=Ut},this.setReferenceSpaceType=function(Ut){ne=Ut},this.setPoseTarget=function(Ut){Ut!==void 0&&(p=Ut)},this.cameraAutoUpdate=!0,this.updateCamera=function(Ut){var hn=ne==="local-floor"?1.6:0;if(a.depthNear=Ut.near,a.depthFar=Ut.far,a.getFrameData(c),ne==="local-floor"){var Kt=a.stageParameters;Kt?N.fromArray(Kt.sittingToStandingTransform):N.makeTranslation(0,hn,0)}var Dt=c.pose,sn=p!==null?p:Ut;sn.matrix.copy(N),sn.matrix.decompose(sn.position,sn.quaternion,sn.scale),Dt.orientation!==null&&(le.fromArray(Dt.orientation),sn.quaternion.multiply(le)),Dt.position!==null&&(le.setFromRotationMatrix(N),me.fromArray(Dt.position),me.applyQuaternion(le),sn.position.add(me)),sn.updateMatrixWorld();for(var kn=sn.children,Zn=0,Ln=kn.length;Zn<Ln;Zn++)kn[Zn].updateMatrixWorld(!0);pe.near=Ut.near,de.near=Ut.near,pe.far=Ut.far,de.far=Ut.far,pe.matrixWorldInverse.fromArray(c.leftViewMatrix),de.matrixWorldInverse.fromArray(c.rightViewMatrix),H.copy(N).invert(),ne==="local-floor"&&(pe.matrixWorldInverse.multiply(H),de.matrixWorldInverse.multiply(H));var ui=sn.parent;ui!==null&&(re.copy(ui.matrixWorld).invert(),pe.matrixWorldInverse.multiply(re),de.matrixWorldInverse.multiply(re)),pe.matrixWorld.copy(pe.matrixWorldInverse).invert(),de.matrixWorld.copy(de.matrixWorldInverse).invert(),pe.projectionMatrix.fromArray(c.leftProjectionMatrix),de.projectionMatrix.fromArray(c.rightProjectionMatrix),kh(Ce,pe,de);var si=a.getLayers();if(si.length){var Qi=si[0];dt(pe.viewport,Qi.leftBounds),dt(de.viewport,Qi.rightBounds)}return Ne(),Ce},this.getCamera=function(){return Ce},this.getFoveation=function(){return 1},this.setFoveation=function(Ut){Ut!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getStandingMatrix=function(){return N},this.isPresenting=!1;var vt=new wh;this.setAnimationLoop=function(Ut){vt.setAnimationLoop(Ut),this.isPresenting&&vt.start()},this.submitFrame=function(){this.isPresenting&&a.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",De)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(Sg.prototype,{addEventListener:ia.prototype.addEventListener,hasEventListener:ia.prototype.hasEventListener,removeEventListener:ia.prototype.removeEventListener,dispatchEvent:ia.prototype.dispatchEvent});const Vp={type:"move"};class Qp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new nt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new nt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new nt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new nt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let a=null,c=null,p=null;const A=this._targetRay,N=this._grip,H=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(H&&e.hand){p=!0;for(const pe of e.hand.values()){const de=n.getJointPose(pe,r),Ce=this._getHandJoint(H,pe);de!==null&&(Ce.matrix.fromArray(de.transform.matrix),Ce.matrix.decompose(Ce.position,Ce.rotation,Ce.scale),Ce.jointRadius=de.radius),Ce.visible=de!==null}const Z=H.joints["index-finger-tip"],ne=H.joints["thumb-tip"],re=Z.position.distanceTo(ne.position),le=.02,me=.005;H.inputState.pinching&&re>le+me?(H.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!H.inputState.pinching&&re<=le-me&&(H.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else N!==null&&e.gripSpace&&(c=n.getPose(e.gripSpace,r),c!==null&&(N.matrix.fromArray(c.transform.matrix),N.matrix.decompose(N.position,N.rotation,N.scale),c.linearVelocity?(N.hasLinearVelocity=!0,N.linearVelocity.copy(c.linearVelocity)):N.hasLinearVelocity=!1,c.angularVelocity?(N.hasAngularVelocity=!0,N.angularVelocity.copy(c.angularVelocity)):N.hasAngularVelocity=!1));A!==null&&(a=n.getPose(e.targetRaySpace,r),a===null&&c!==null&&(a=c),a!==null&&(A.matrix.fromArray(a.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),a.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(a.linearVelocity)):A.hasLinearVelocity=!1,a.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(a.angularVelocity)):A.hasAngularVelocity=!1,this.dispatchEvent(Vp)))}return A!==null&&(A.visible=a!==null),N!==null&&(N.visible=c!==null),H!==null&&(H.visible=p!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Xl;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Ig extends Ws{constructor(e,n,r,a,c,p,A,N,H,Z){if(Z=Z!==void 0?Z:zr,Z!==zr&&Z!==Pr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&Z===zr&&(r=Nn),r===void 0&&Z===Pr&&(r=Dn),super(null,a,c,p,A,N,Z,r,H),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=A!==void 0?A:ae,this.minFilter=N!==void 0?N:ae,this.flipY=!1,this.generateMipmaps=!1}}class qv extends ia{constructor(e,n){super();const r=this;let a=null,c=1;var p=null;let A=null,N="local-floor",H=null,Z=null;var ne=[];let re=null,le=null,me=null,pe=null;const de=n.getContextAttributes();let Ce=null,Fe=null;const Re=[],De=[],Ve=new Set,ct=new Map,bt=new Ao;bt.layers.enable(1),bt.viewport=new es;const Ne=new Ao;Ne.layers.enable(2),Ne.viewport=new es;const dt=[bt,Ne],vt=new Mg;vt.layers.enable(1),vt.layers.enable(2);let Ut=null,hn=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.getCameraPose=function(){return Z},this.getController=function(gn){let $n=Re[gn];return $n===void 0&&($n=new Qp,Re[gn]=$n),$n.getTargetRaySpace()},this.getControllerGrip=function(gn){let $n=Re[gn];return $n===void 0&&($n=new Qp,Re[gn]=$n),$n.getGripSpace()},this.getHand=function(gn){let $n=Re[gn];return $n===void 0&&($n=new Qp,Re[gn]=$n),$n.getHandSpace()};function Kt(gn){const $n=De.indexOf(gn.inputSource);if($n===-1)return;const _i=Re[$n];_i!==void 0&&_i.dispatchEvent({type:gn.type,data:gn.inputSource})}function Dt(){a.removeEventListener("select",Kt),a.removeEventListener("selectstart",Kt),a.removeEventListener("selectend",Kt),a.removeEventListener("squeeze",Kt),a.removeEventListener("squeezestart",Kt),a.removeEventListener("squeezeend",Kt),a.removeEventListener("end",Dt),a.removeEventListener("inputsourceschange",sn);for(let gn=0;gn<Re.length;gn++){const $n=De[gn];$n!==null&&(De[gn]=null,Re[gn].disconnect($n))}Ut=null,hn=null,e.setRenderTarget(Ce),me=null,le=null,re=null,a=null,Fe=null,Li.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(gn){c=gn,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(gn){N=gn,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return H||A},this.setReferenceSpace=function(gn){H=gn},this.getBaseLayer=function(){return le!==null?le:me},this.getBinding=function(){return re},this.getFrame=function(){return pe},this.getSession=function(){return a},this.setSession=async function(gn){if(a=gn,a!==null){if(Ce=e.getRenderTarget(),a.addEventListener("select",Kt),a.addEventListener("selectstart",Kt),a.addEventListener("selectend",Kt),a.addEventListener("squeeze",Kt),a.addEventListener("squeezestart",Kt),a.addEventListener("squeezeend",Kt),a.addEventListener("end",Dt),a.addEventListener("inputsourceschange",sn),de.xrCompatible!==!0&&await n.makeXRCompatible(),a.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const $n={antialias:a.renderState.layers===void 0?de.antialias:!0,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:c};me=new XRWebGLLayer(a,n,$n),a.updateRenderState({baseLayer:me}),Fe=new ko(me.framebufferWidth,me.framebufferHeight,{format:Zi,type:jt,encoding:e.outputEncoding,stencilBuffer:de.stencil})}else{let $n=null,_i=null,ln=null;de.depth&&(ln=de.stencil?35056:33190,$n=de.stencil?Pr:zr,_i=de.stencil?Dn:Nn);const Wi={colorFormat:32856,depthFormat:ln,scaleFactor:c};re=new XRWebGLBinding(a,n),le=re.createProjectionLayer(Wi),a.updateRenderState({layers:[le]}),Fe=new ko(le.textureWidth,le.textureHeight,{format:Zi,type:jt,depthTexture:new Ig(le.textureWidth,le.textureHeight,_i,void 0,void 0,void 0,void 0,void 0,void 0,$n),stencilBuffer:de.stencil,encoding:e.outputEncoding,samples:de.antialias?4:0});const wi=e.properties.get(Fe);wi.__ignoreDepthValues=le.ignoreDepthValues}Fe.isXRRenderTarget=!0,this.setFoveation(1),H=null,A=await a.requestReferenceSpace(N),Li.setContext(a),Li.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.addLayer=function(gn){!window.XRWebGLBinding||!this.layersEnabled||!a||(ne.push(gn),this.updateLayers())},this.removeLayer=function(gn){ne.splice(ne.indexOf(gn),1),!(!window.XRWebGLBinding||!this.layersEnabled||!a)&&this.updateLayers()},this.updateLayers=function(){var gn=ne.map(function($n){return $n});gn.unshift(a.renderState.layers[0]),a.updateRenderState({layers:gn})};function sn(gn){for(let $n=0;$n<gn.removed.length;$n++){const _i=gn.removed[$n],ln=De.indexOf(_i);ln>=0&&(De[ln]=null,Re[ln].disconnect(_i))}for(let $n=0;$n<gn.added.length;$n++){const _i=gn.added[$n];let ln=De.indexOf(_i);if(ln===-1){for(let wi=0;wi<Re.length;wi++)if(wi>=De.length){De.push(_i),ln=wi;break}else if(De[wi]===null){De[wi]=_i,ln=wi;break}if(ln===-1)break}const Wi=Re[ln];Wi&&Wi.connect(_i)}}const kn=new nt,Zn=new nt;function Ln(gn,$n,_i){kn.setFromMatrixPosition($n.matrixWorld),Zn.setFromMatrixPosition(_i.matrixWorld);const ln=kn.distanceTo(Zn),Wi=$n.projectionMatrix.elements,wi=_i.projectionMatrix.elements,Ar=Wi[14]/(Wi[10]-1),mi=Wi[14]/(Wi[10]+1),rs=(Wi[9]+1)/Wi[5],Hn=(Wi[9]-1)/Wi[5],Rn=(Wi[8]-1)/Wi[0],yi=(wi[8]+1)/wi[0],cr=Ar*Rn,Di=Ar*yi,Vr=ln/(-Rn+yi),Sr=Vr*-Rn;$n.matrixWorld.decompose(gn.position,gn.quaternion,gn.scale),gn.translateX(Sr),gn.translateZ(Vr),gn.matrixWorld.compose(gn.position,gn.quaternion,gn.scale),gn.matrixWorldInverse.copy(gn.matrixWorld).invert();const yr=Ar+Vr,Ys=mi+Vr,zs=cr-Sr,ft=Di+(ln-Sr),tt=rs*mi/Ys*yr,fn=Hn*mi/Ys*yr;gn.projectionMatrix.makePerspective(zs,ft,tt,fn,yr,Ys)}function ui(gn,$n){$n===null?gn.matrixWorld.copy(gn.matrix):gn.matrixWorld.multiplyMatrices($n.matrixWorld,gn.matrix),gn.matrixWorldInverse.copy(gn.matrixWorld).invert()}this.setPoseTarget=function(gn){gn!==void 0&&(p=gn)},this.updateCamera=function(gn){if(a===null)return;vt.near=Ne.near=bt.near=gn.near,vt.far=Ne.far=bt.far=gn.far,(Ut!==vt.near||hn!==vt.far)&&(a.updateRenderState({depthNear:vt.near,depthFar:vt.far}),Ut=vt.near,hn=vt.far);const $n=vt.cameras;var _i=p||gn;const ln=_i.parent;ui(vt,ln);for(let wi=0;wi<$n.length;wi++)ui($n[wi],ln);vt.matrixWorld.decompose(vt.position,vt.quaternion,vt.scale),_i.matrixWorld.copy(vt.matrixWorld),_i.matrix.copy(vt.matrix),_i.matrix.decompose(_i.position,_i.quaternion,_i.scale);const Wi=_i.children;for(let wi=0,Ar=Wi.length;wi<Ar;wi++)Wi[wi].updateMatrixWorld(!0);$n.length===2?Ln(vt,bt,Ne):vt.projectionMatrix.copy(bt.projectionMatrix)},this.getCamera=function(){return vt},this.getFoveation=function(){if(le!==null)return le.fixedFoveation;if(me!==null)return me.fixedFoveation},this.setFoveation=function(gn){le!==null&&(le.fixedFoveation=gn),me!==null&&me.fixedFoveation!==void 0&&(me.fixedFoveation=gn)},this.getPlanes=function(){return Ve};let si=null;function Qi(gn,$n){if(Z=$n.getViewerPose(H||A),pe=$n,Z!==null){const _i=Z.views;me!==null&&(e.setRenderTargetFramebuffer(Fe,me.framebuffer),e.setRenderTarget(Fe));let ln=!1;_i.length!==vt.cameras.length&&(vt.cameras.length=0,ln=!0);for(let Wi=0;Wi<_i.length;Wi++){const wi=_i[Wi];let Ar=null;if(me!==null)Ar=me.getViewport(wi);else{const rs=re.getViewSubImage(le,wi);Ar=rs.viewport,Wi===0&&(e.setRenderTargetTextures(Fe,rs.colorTexture,le.ignoreDepthValues?void 0:rs.depthStencilTexture),e.setRenderTarget(Fe))}let mi=dt[Wi];mi===void 0&&(mi=new Ao,mi.layers.enable(Wi),mi.viewport=new es,dt[Wi]=mi),mi.matrix.fromArray(wi.transform.matrix),mi.projectionMatrix.fromArray(wi.projectionMatrix),mi.viewport.set(Ar.x,Ar.y,Ar.width,Ar.height),Wi===0&&vt.matrix.copy(mi.matrix),ln===!0&&vt.cameras.push(mi)}}for(let _i=0;_i<Re.length;_i++){const ln=De[_i],Wi=Re[_i];ln!==null&&Wi!==void 0&&Wi.update(ln,$n,H||A)}if(si&&si(gn,$n),$n.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:$n.detectedPlanes});let _i=null;for(const ln of Ve)$n.detectedPlanes.has(ln)||(_i===null&&(_i=[]),_i.push(ln));if(_i!==null)for(const ln of _i)Ve.delete(ln),ct.delete(ln),r.dispatchEvent({type:"planeremoved",data:ln});for(const ln of $n.detectedPlanes)if(!Ve.has(ln))Ve.add(ln),ct.set(ln,$n.lastChangedTime),r.dispatchEvent({type:"planeadded",data:ln});else{const Wi=ct.get(ln);ln.lastChangedTime>Wi&&(ct.set(ln,ln.lastChangedTime),r.dispatchEvent({type:"planechanged",data:ln}))}}pe=null}const Li=new wh;Li.setAnimationLoop(Qi),this.setAnimationLoop=function(gn){si=gn},this.dispose=function(){}}}function Zc(x,e){function n(pe,de){de.color.getRGB(pe.fogColor.value,h0(x)),de.isFog?(pe.fogNear.value=de.near,pe.fogFar.value=de.far):de.isFogExp2&&(pe.fogDensity.value=de.density)}function r(pe,de,Ce,Fe,Re){de.isMeshBasicMaterial||de.isMeshLambertMaterial?a(pe,de):de.isMeshToonMaterial?(a(pe,de),Z(pe,de)):de.isMeshPhongMaterial?(a(pe,de),H(pe,de)):de.isMeshStandardMaterial?(a(pe,de),ne(pe,de),de.isMeshPhysicalMaterial&&re(pe,de,Re)):de.isMeshMatcapMaterial?(a(pe,de),le(pe,de)):de.isMeshDepthMaterial?a(pe,de):de.isMeshDistanceMaterial?(a(pe,de),me(pe,de)):de.isMeshNormalMaterial?a(pe,de):de.isLineBasicMaterial?(c(pe,de),de.isLineDashedMaterial&&p(pe,de)):de.isPointsMaterial?A(pe,de,Ce,Fe):de.isSpriteMaterial?N(pe,de):de.isShadowMaterial?(pe.color.value.copy(de.color),pe.opacity.value=de.opacity):de.isShaderMaterial&&(de.uniformsNeedUpdate=!1)}function a(pe,de){pe.opacity.value=de.opacity,de.color&&pe.diffuse.value.copy(de.color),de.emissive&&pe.emissive.value.copy(de.emissive).multiplyScalar(de.emissiveIntensity),de.map&&(pe.map.value=de.map),de.alphaMap&&(pe.alphaMap.value=de.alphaMap),de.bumpMap&&(pe.bumpMap.value=de.bumpMap,pe.bumpScale.value=de.bumpScale,de.side===P&&(pe.bumpScale.value*=-1)),de.displacementMap&&(pe.displacementMap.value=de.displacementMap,pe.displacementScale.value=de.displacementScale,pe.displacementBias.value=de.displacementBias),de.emissiveMap&&(pe.emissiveMap.value=de.emissiveMap),de.normalMap&&(pe.normalMap.value=de.normalMap,pe.normalScale.value.copy(de.normalScale),de.side===P&&pe.normalScale.value.negate()),de.specularMap&&(pe.specularMap.value=de.specularMap),de.alphaTest>0&&(pe.alphaTest.value=de.alphaTest);const Ce=e.get(de).envMap;if(Ce&&(pe.envMap.value=Ce,pe.flipEnvMap.value=Ce.isCubeTexture&&Ce.isRenderTargetTexture===!1?-1:1,pe.reflectivity.value=de.reflectivity,pe.ior.value=de.ior,pe.refractionRatio.value=de.refractionRatio),de.lightMap){pe.lightMap.value=de.lightMap;const De=x.physicallyCorrectLights!==!0?Math.PI:1;pe.lightMapIntensity.value=de.lightMapIntensity*De}de.aoMap&&(pe.aoMap.value=de.aoMap,pe.aoMapIntensity.value=de.aoMapIntensity);let Fe;de.map?Fe=de.map:de.specularMap?Fe=de.specularMap:de.displacementMap?Fe=de.displacementMap:de.normalMap?Fe=de.normalMap:de.bumpMap?Fe=de.bumpMap:de.roughnessMap?Fe=de.roughnessMap:de.metalnessMap?Fe=de.metalnessMap:de.alphaMap?Fe=de.alphaMap:de.emissiveMap?Fe=de.emissiveMap:de.clearcoatMap?Fe=de.clearcoatMap:de.clearcoatNormalMap?Fe=de.clearcoatNormalMap:de.clearcoatRoughnessMap?Fe=de.clearcoatRoughnessMap:de.iridescenceMap?Fe=de.iridescenceMap:de.iridescenceThicknessMap?Fe=de.iridescenceThicknessMap:de.specularIntensityMap?Fe=de.specularIntensityMap:de.specularColorMap?Fe=de.specularColorMap:de.transmissionMap?Fe=de.transmissionMap:de.thicknessMap?Fe=de.thicknessMap:de.sheenColorMap?Fe=de.sheenColorMap:de.sheenRoughnessMap&&(Fe=de.sheenRoughnessMap),Fe!==void 0&&(Fe.isWebGLRenderTarget&&(Fe=Fe.texture),Fe.matrixAutoUpdate===!0&&Fe.updateMatrix(),pe.uvTransform.value.copy(Fe.matrix));let Re;de.aoMap?Re=de.aoMap:de.lightMap&&(Re=de.lightMap),Re!==void 0&&(Re.isWebGLRenderTarget&&(Re=Re.texture),Re.matrixAutoUpdate===!0&&Re.updateMatrix(),pe.uv2Transform.value.copy(Re.matrix))}function c(pe,de){pe.diffuse.value.copy(de.color),pe.opacity.value=de.opacity}function p(pe,de){pe.dashSize.value=de.dashSize,pe.totalSize.value=de.dashSize+de.gapSize,pe.scale.value=de.scale}function A(pe,de,Ce,Fe){pe.diffuse.value.copy(de.color),pe.opacity.value=de.opacity,pe.size.value=de.size*Ce,pe.scale.value=Fe*.5,de.map&&(pe.map.value=de.map),de.alphaMap&&(pe.alphaMap.value=de.alphaMap),de.alphaTest>0&&(pe.alphaTest.value=de.alphaTest);let Re;de.map?Re=de.map:de.alphaMap&&(Re=de.alphaMap),Re!==void 0&&(Re.matrixAutoUpdate===!0&&Re.updateMatrix(),pe.uvTransform.value.copy(Re.matrix))}function N(pe,de){pe.diffuse.value.copy(de.color),pe.opacity.value=de.opacity,pe.rotation.value=de.rotation,de.map&&(pe.map.value=de.map),de.alphaMap&&(pe.alphaMap.value=de.alphaMap),de.alphaTest>0&&(pe.alphaTest.value=de.alphaTest);let Ce;de.map?Ce=de.map:de.alphaMap&&(Ce=de.alphaMap),Ce!==void 0&&(Ce.matrixAutoUpdate===!0&&Ce.updateMatrix(),pe.uvTransform.value.copy(Ce.matrix))}function H(pe,de){pe.specular.value.copy(de.specular),pe.shininess.value=Math.max(de.shininess,1e-4)}function Z(pe,de){de.gradientMap&&(pe.gradientMap.value=de.gradientMap)}function ne(pe,de){pe.roughness.value=de.roughness,pe.metalness.value=de.metalness,de.roughnessMap&&(pe.roughnessMap.value=de.roughnessMap),de.metalnessMap&&(pe.metalnessMap.value=de.metalnessMap),e.get(de).envMap&&(pe.envMapIntensity.value=de.envMapIntensity)}function re(pe,de,Ce){pe.ior.value=de.ior,de.sheen>0&&(pe.sheenColor.value.copy(de.sheenColor).multiplyScalar(de.sheen),pe.sheenRoughness.value=de.sheenRoughness,de.sheenColorMap&&(pe.sheenColorMap.value=de.sheenColorMap),de.sheenRoughnessMap&&(pe.sheenRoughnessMap.value=de.sheenRoughnessMap)),de.clearcoat>0&&(pe.clearcoat.value=de.clearcoat,pe.clearcoatRoughness.value=de.clearcoatRoughness,de.clearcoatMap&&(pe.clearcoatMap.value=de.clearcoatMap),de.clearcoatRoughnessMap&&(pe.clearcoatRoughnessMap.value=de.clearcoatRoughnessMap),de.clearcoatNormalMap&&(pe.clearcoatNormalScale.value.copy(de.clearcoatNormalScale),pe.clearcoatNormalMap.value=de.clearcoatNormalMap,de.side===P&&pe.clearcoatNormalScale.value.negate())),de.iridescence>0&&(pe.iridescence.value=de.iridescence,pe.iridescenceIOR.value=de.iridescenceIOR,pe.iridescenceThicknessMinimum.value=de.iridescenceThicknessRange[0],pe.iridescenceThicknessMaximum.value=de.iridescenceThicknessRange[1],de.iridescenceMap&&(pe.iridescenceMap.value=de.iridescenceMap),de.iridescenceThicknessMap&&(pe.iridescenceThicknessMap.value=de.iridescenceThicknessMap)),de.transmission>0&&(pe.transmission.value=de.transmission,pe.transmissionSamplerMap.value=Ce.texture,pe.transmissionSamplerSize.value.set(Ce.width,Ce.height),de.transmissionMap&&(pe.transmissionMap.value=de.transmissionMap),pe.thickness.value=de.thickness,de.thicknessMap&&(pe.thicknessMap.value=de.thicknessMap),pe.attenuationDistance.value=de.attenuationDistance,pe.attenuationColor.value.copy(de.attenuationColor)),pe.specularIntensity.value=de.specularIntensity,pe.specularColor.value.copy(de.specularColor),de.specularIntensityMap&&(pe.specularIntensityMap.value=de.specularIntensityMap),de.specularColorMap&&(pe.specularColorMap.value=de.specularColorMap)}function le(pe,de){de.matcap&&(pe.matcap.value=de.matcap)}function me(pe,de){pe.referencePosition.value.copy(de.referencePosition),pe.nearDistance.value=de.nearDistance,pe.farDistance.value=de.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function jp(x,e,n,r){let a={},c={},p=[];const A=n.isWebGL2?x.getParameter(35375):0;function N(Fe,Re){const De=Re.program;r.uniformBlockBinding(Fe,De)}function H(Fe,Re){let De=a[Fe.id];De===void 0&&(me(Fe),De=Z(Fe),a[Fe.id]=De,Fe.addEventListener("dispose",de));const Ve=Re.program;r.updateUBOMapping(Fe,Ve);const ct=e.render.frame;c[Fe.id]!==ct&&(re(Fe),c[Fe.id]=ct)}function Z(Fe){const Re=ne();Fe.__bindingPointIndex=Re;const De=x.createBuffer(),Ve=Fe.__size,ct=Fe.usage;return x.bindBuffer(35345,De),x.bufferData(35345,Ve,ct),x.bindBuffer(35345,null),x.bindBufferBase(35345,Re,De),De}function ne(){for(let Fe=0;Fe<A;Fe++)if(p.indexOf(Fe)===-1)return p.push(Fe),Fe;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function re(Fe){const Re=a[Fe.id],De=Fe.uniforms,Ve=Fe.__cache;x.bindBuffer(35345,Re);for(let ct=0,bt=De.length;ct<bt;ct++){const Ne=De[ct];if(le(Ne,ct,Ve)===!0){const dt=Ne.value,vt=Ne.__offset;typeof dt=="number"?(Ne.__data[0]=dt,x.bufferSubData(35345,vt,Ne.__data)):(Ne.value.isMatrix3?(Ne.__data[0]=Ne.value.elements[0],Ne.__data[1]=Ne.value.elements[1],Ne.__data[2]=Ne.value.elements[2],Ne.__data[3]=Ne.value.elements[0],Ne.__data[4]=Ne.value.elements[3],Ne.__data[5]=Ne.value.elements[4],Ne.__data[6]=Ne.value.elements[5],Ne.__data[7]=Ne.value.elements[0],Ne.__data[8]=Ne.value.elements[6],Ne.__data[9]=Ne.value.elements[7],Ne.__data[10]=Ne.value.elements[8],Ne.__data[11]=Ne.value.elements[0]):dt.toArray(Ne.__data),x.bufferSubData(35345,vt,Ne.__data))}}x.bindBuffer(35345,null)}function le(Fe,Re,De){const Ve=Fe.value;if(De[Re]===void 0)return typeof Ve=="number"?De[Re]=Ve:De[Re]=Ve.clone(),!0;if(typeof Ve=="number"){if(De[Re]!==Ve)return De[Re]=Ve,!0}else{const ct=De[Re];if(ct.equals(Ve)===!1)return ct.copy(Ve),!0}return!1}function me(Fe){const Re=Fe.uniforms;let De=0;const Ve=16;let ct=0;for(let bt=0,Ne=Re.length;bt<Ne;bt++){const dt=Re[bt],vt=pe(dt);if(dt.__data=new Float32Array(vt.storage/Float32Array.BYTES_PER_ELEMENT),dt.__offset=De,bt>0){ct=De%Ve;const Ut=Ve-ct;ct!==0&&Ut-vt.boundary<0&&(De+=Ve-ct,dt.__offset=De)}De+=vt.storage}return ct=De%Ve,ct>0&&(De+=Ve-ct),Fe.__size=De,Fe.__cache={},this}function pe(Fe){const Re=Fe.value,De={boundary:0,storage:0};return typeof Re=="number"?(De.boundary=4,De.storage=4):Re.isVector2?(De.boundary=8,De.storage=8):Re.isVector3||Re.isColor?(De.boundary=16,De.storage=12):Re.isVector4?(De.boundary=16,De.storage=16):Re.isMatrix3?(De.boundary=48,De.storage=48):Re.isMatrix4?(De.boundary=64,De.storage=64):Re.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Re),De}function de(Fe){const Re=Fe.target;Re.removeEventListener("dispose",de);const De=p.indexOf(Re.__bindingPointIndex);p.splice(De,1),x.deleteBuffer(a[Re.id]),delete a[Re.id],delete c[Re.id]}function Ce(){for(const Fe in a)x.deleteBuffer(a[Fe]);p=[],a={},c={}}return{bind:N,update:H,dispose:Ce}}function Rg(){const x=Fl("canvas");return x.style.display="block",x}function Bg(x={}){this.isWebGLRenderer=!0;const e=x.canvas!==void 0?x.canvas:Rg(),n=x.context!==void 0?x.context:null,r=x.depth!==void 0?x.depth:!0,a=x.stencil!==void 0?x.stencil:!0,c=x.antialias!==void 0?x.antialias:!1,p=x.premultipliedAlpha!==void 0?x.premultipliedAlpha:!0,A=x.preserveDrawingBuffer!==void 0?x.preserveDrawingBuffer:!1,N=x.powerPreference!==void 0?x.powerPreference:"default",H=x.failIfMajorPerformanceCaveat!==void 0?x.failIfMajorPerformanceCaveat:!1;let Z;n!==null?Z=n.getContextAttributes().alpha:Z=x.alpha!==void 0?x.alpha:!1;let ne=null,re=null;const le=[],me=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Jr,this.physicallyCorrectLights=!1,this.toneMapping=bn,this.toneMappingExposure=1;const pe=this;let de=!1,Ce=0,Fe=0,Re=null,De=-1,Ve=null;const ct=new es,bt=new es;let Ne=null,dt=e.width,vt=e.height,Ut=1,hn=null,Kt=null;const Dt=new es(0,0,dt,vt),sn=new es(0,0,dt,vt);let kn=!1;const Zn=new dl;let Ln=!1,ui=!1,si=null;const Qi=new Gi,Li=new On,gn=new nt,$n={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _i(){return Re===null?Ut:1}let ln=n;function Wi(st,rn){for(let An=0;An<st.length;An++){const Jt=st[An],Tn=e.getContext(Jt,rn);if(Tn!==null)return Tn}return null}try{const st={alpha:!0,depth:r,stencil:a,antialias:c,premultipliedAlpha:p,preserveDrawingBuffer:A,powerPreference:N,failIfMajorPerformanceCaveat:H};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${g}`),e.addEventListener("webglcontextlost",Ir,!1),e.addEventListener("webglcontextrestored",Er,!1),e.addEventListener("webglcontextcreationerror",Bs,!1),ln===null){const rn=["webgl2","webgl","experimental-webgl"];if(pe.isWebGL1Renderer===!0&&rn.shift(),ln=Wi(rn,st),ln===null)throw Wi(rn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ln.getShaderPrecisionFormat===void 0&&(ln.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(st){throw console.error("THREE.WebGLRenderer: "+st.message),st}let wi,Ar,mi,rs,Hn,Rn,yi,cr,Di,Vr,Sr,yr,Ys,zs,ft,tt,fn,hi,Ai,ki,Gr,Hi,Bn,xr;function Lr(){wi=new Mp(ln),Ar=new L0(ln,wi,x),wi.init(Ar),Hi=new Cg(ln,wi,Ar),mi=new rA(ln,wi,Ar),rs=new Sp,Hn=new Hv,Rn=new Yv(ln,wi,mi,Hn,Ar,Hi,rs),yi=new Ep(pe),cr=new Ov(pe),Di=new ka(ln,Ar),Bn=new Zm(ln,wi,Di,Ar),Vr=new Tp(ln,Di,rs,Bn),Sr=new Rp(ln,Vr,Di,rs),Ai=new Ip(ln,Ar,Rn),tt=new $m(Hn),yr=new Nu(pe,yi,cr,wi,Ar,Bn,tt),Ys=new Zc(pe,Hn),zs=new zv,ft=new jv(wi,Ar),hi=new B0(pe,yi,cr,mi,Sr,Z,p),fn=new Xv(pe,Sr,Ar),xr=new jp(ln,rs,Ar,mi),ki=new Tu(ln,wi,rs,Ar),Gr=new Fd(ln,wi,rs,Ar),rs.programs=yr.programs,pe.capabilities=Ar,pe.extensions=wi,pe.properties=Hn,pe.renderLists=zs,pe.shadowMap=fn,pe.state=mi,pe.info=rs}Lr();const or=typeof navigator<"u"&&"xr"in navigator?new qv(pe,ln):new Sg(pe);this.xr=or,this.getContext=function(){return ln},this.getContextAttributes=function(){return ln.getContextAttributes()},this.forceContextLoss=function(){const st=wi.get("WEBGL_lose_context");st&&st.loseContext()},this.forceContextRestore=function(){const st=wi.get("WEBGL_lose_context");st&&st.restoreContext()},this.getPixelRatio=function(){return Ut},this.setPixelRatio=function(st){st!==void 0&&(Ut=st,this.setSize(dt,vt,!1))},this.getSize=function(st){return st.set(dt,vt)},this.setSize=function(st,rn,An){if(or.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}dt=st,vt=rn,e.width=Math.floor(st*Ut),e.height=Math.floor(rn*Ut),An!==!1&&(e.style.width=st+"px",e.style.height=rn+"px"),this.setViewport(0,0,st,rn)},this.getDrawingBufferSize=function(st){return st.set(dt*Ut,vt*Ut).floor()},this.setDrawingBufferSize=function(st,rn,An){dt=st,vt=rn,Ut=An,e.width=Math.floor(st*An),e.height=Math.floor(rn*An),this.setViewport(0,0,st,rn)},this.getCurrentViewport=function(st){return st.copy(ct)},this.getViewport=function(st){return st.copy(Dt)},this.setViewport=function(st,rn,An,Jt){st.isVector4?Dt.set(st.x,st.y,st.z,st.w):Dt.set(st,rn,An,Jt),mi.viewport(ct.copy(Dt).multiplyScalar(Ut).floor())},this.getScissor=function(st){return st.copy(sn)},this.setScissor=function(st,rn,An,Jt){st.isVector4?sn.set(st.x,st.y,st.z,st.w):sn.set(st,rn,An,Jt),mi.scissor(bt.copy(sn).multiplyScalar(Ut).floor())},this.getScissorTest=function(){return kn},this.setScissorTest=function(st){mi.setScissorTest(kn=st)},this.setOpaqueSort=function(st){hn=st},this.setTransparentSort=function(st){Kt=st},this.getClearColor=function(st){return st.copy(hi.getClearColor())},this.setClearColor=function(){hi.setClearColor.apply(hi,arguments)},this.getClearAlpha=function(){return hi.getClearAlpha()},this.setClearAlpha=function(){hi.setClearAlpha.apply(hi,arguments)},this.clear=function(st=!0,rn=!0,An=!0){let Jt=0;st&&(Jt|=16384),rn&&(Jt|=256),An&&(Jt|=1024),ln.clear(Jt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ir,!1),e.removeEventListener("webglcontextrestored",Er,!1),e.removeEventListener("webglcontextcreationerror",Bs,!1),zs.dispose(),ft.dispose(),Hn.dispose(),yi.dispose(),cr.dispose(),Sr.dispose(),Bn.dispose(),xr.dispose(),yr.dispose(),or.dispose(),or.removeEventListener("sessionstart",ji),or.removeEventListener("sessionend",dr),si&&(si.dispose(),si=null),ks.stop()};function Ir(st){st.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),de=!0}function Er(){console.log("THREE.WebGLRenderer: Context Restored."),de=!1;const st=rs.autoReset,rn=fn.enabled,An=fn.autoUpdate,Jt=fn.needsUpdate,Tn=fn.type;Lr(),rs.autoReset=st,fn.enabled=rn,fn.autoUpdate=An,fn.needsUpdate=Jt,fn.type=Tn}function Bs(st){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",st.statusMessage)}function co(st){const rn=st.target;rn.removeEventListener("dispose",co),ua(rn)}function ua(st){Lt(st),Hn.remove(st)}function Lt(st){const rn=Hn.get(st).programs;rn!==void 0&&(rn.forEach(function(An){yr.releaseProgram(An)}),st.isShaderMaterial&&yr.releaseShaderCache(st))}this.renderBufferDirect=function(st,rn,An,Jt,Tn,Cr){rn===null&&(rn=$n);const Kr=Tn.isMesh&&Tn.matrixWorld.determinant()<0,us=i_(st,rn,An,Jt,Tn);mi.setMaterial(Jt,Kr);let ps=An.index,Ls=1;Jt.wireframe===!0&&(ps=Vr.getWireframeAttribute(An),Ls=2);const bs=An.drawRange,_s=An.attributes.position;let Ko=bs.start*Ls,Rl=(bs.start+bs.count)*Ls;Cr!==null&&(Ko=Math.max(Ko,Cr.start*Ls),Rl=Math.min(Rl,(Cr.start+Cr.count)*Ls)),ps!==null?(Ko=Math.max(Ko,0),Rl=Math.min(Rl,ps.count)):_s!=null&&(Ko=Math.max(Ko,0),Rl=Math.min(Rl,_s.count));const $u=Rl-Ko;if($u<0||$u===1/0)return;Bn.setup(Tn,Jt,us,An,ps);let Ef,Xo=ki;if(ps!==null&&(Ef=Di.get(ps),Xo=Gr,Xo.setIndex(Ef)),Tn.isMesh)Jt.wireframe===!0?(mi.setLineWidth(Jt.wireframeLinewidth*_i()),Xo.setMode(1)):Xo.setMode(4);else if(Tn.isLine){let ws=Jt.linewidth;ws===void 0&&(ws=1),mi.setLineWidth(ws*_i()),Tn.isLineSegments?Xo.setMode(1):Tn.isLineLoop?Xo.setMode(2):Xo.setMode(3)}else Tn.isPoints?Xo.setMode(0):Tn.isSprite&&Xo.setMode(4);if(Tn.isInstancedMesh)Xo.renderInstances(Ko,$u,Tn.count);else if(An.isInstancedBufferGeometry){const ws=An._maxInstanceCount!==void 0?An._maxInstanceCount:1/0,h1=Math.min(An.instanceCount,ws);Xo.renderInstances(Ko,$u,h1)}else Xo.render(Ko,$u)},this.compile=function(st,rn){function An(Jt,Tn,Cr){Jt.transparent===!0&&Jt.side===Y?(Jt.side=P,Jt.needsUpdate=!0,Zl(Jt,Tn,Cr),Jt.side=L,Jt.needsUpdate=!0,Zl(Jt,Tn,Cr),Jt.side=Y):Zl(Jt,Tn,Cr)}re=ft.get(st),re.init(),me.push(re),st.traverseVisible(function(Jt){Jt.isLight&&Jt.layers.test(rn.layers)&&(re.pushLight(Jt),Jt.castShadow&&re.pushShadow(Jt))}),re.setupLights(pe.physicallyCorrectLights),st.traverse(function(Jt){const Tn=Jt.material;if(Tn)if(Array.isArray(Tn))for(let Cr=0;Cr<Tn.length;Cr++){const Kr=Tn[Cr];An(Kr,st,Jt)}else An(Tn,st,Jt)}),me.pop(),re=null};let _n=null;function li(st){_n&&_n(st)}function ji(){ks.stop()}function dr(){ks.start()}const ks=new wh;ks.setAnimationLoop(li),typeof self<"u"&&ks.setContext(self),this.setAnimationLoop=function(st){_n=st,or.setAnimationLoop(st),st===null?ks.stop():ks.start()},or.addEventListener("sessionstart",ji),or.addEventListener("sessionend",dr),this.render=function(st,rn){if(rn!==void 0&&rn.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(de===!0)return;st.matrixWorldAutoUpdate===!0&&st.updateMatrixWorld(),rn.parent===null&&rn.matrixWorldAutoUpdate===!0&&rn.updateMatrixWorld(),or.enabled===!0&&or.isPresenting===!0&&(or.cameraAutoUpdate===!0&&or.updateCamera(rn),rn=or.getCamera()),st.isScene===!0&&st.onBeforeRender(pe,st,rn,Re),re=ft.get(st,me.length),re.init(),me.push(re),Qi.multiplyMatrices(rn.projectionMatrix,rn.matrixWorldInverse),Zn.setFromProjectionMatrix(Qi),ui=this.localClippingEnabled,Ln=tt.init(this.clippingPlanes,ui,rn),ne=zs.get(st,le.length),ne.init(),le.push(ne),ha(st,rn,0,pe.sortObjects),ne.finish(),pe.sortObjects===!0&&ne.sort(hn,Kt),Ln===!0&&tt.beginShadows();const An=re.state.shadowsArray;if(fn.render(An,st,rn),Ln===!0&&tt.endShadows(),this.info.autoReset===!0&&this.info.reset(),hi.render(ne,st),re.setupLights(pe.physicallyCorrectLights),rn.isArrayCamera){const Jt=rn.cameras;for(let Tn=0,Cr=Jt.length;Tn<Cr;Tn++){const Kr=Jt[Tn];Ta(ne,st,Kr,Kr.viewport)}}else Ta(ne,st,rn);Re!==null&&(Rn.updateMultisampleRenderTarget(Re),Rn.updateRenderTargetMipmap(Re)),st.isScene===!0&&st.onAfterRender(pe,st,rn),or.enabled&&or.submitFrame&&or.submitFrame(),Bn.resetDefaultState(),De=-1,Ve=null,me.pop(),me.length>0?re=me[me.length-1]:re=null,le.pop(),le.length>0?ne=le[le.length-1]:ne=null};function ha(st,rn,An,Jt){if(st.visible===!1)return;if(st.layers.test(rn.layers)){if(st.isGroup)An=st.renderOrder;else if(st.isLOD)st.autoUpdate===!0&&st.update(rn);else if(st.isLight)re.pushLight(st),st.castShadow&&re.pushShadow(st);else if(st.isSprite){if(!st.frustumCulled||Zn.intersectsSprite(st)){Jt&&gn.setFromMatrixPosition(st.matrixWorld).applyMatrix4(Qi);const Kr=Sr.update(st),us=st.material;us.visible&&ne.push(st,Kr,us,An,gn.z,null)}}else if((st.isMesh||st.isLine||st.isPoints)&&(st.isSkinnedMesh&&st.skeleton.frame!==rs.render.frame&&(st.skeleton.update(),st.skeleton.frame=rs.render.frame),!st.frustumCulled||Zn.intersectsObject(st))){Jt&&gn.setFromMatrixPosition(st.matrixWorld).applyMatrix4(Qi);const Kr=Sr.update(st),us=st.material;if(Array.isArray(us)){const ps=Kr.groups;for(let Ls=0,bs=ps.length;Ls<bs;Ls++){const _s=ps[Ls],Ko=us[_s.materialIndex];Ko&&Ko.visible&&ne.push(st,Kr,Ko,An,gn.z,_s)}}else us.visible&&ne.push(st,Kr,us,An,gn.z,null)}}const Cr=st.children;for(let Kr=0,us=Cr.length;Kr<us;Kr++)ha(Cr[Kr],rn,An,Jt)}function Ta(st,rn,An,Jt){const Tn=st.opaque,Cr=st.transmissive,Kr=st.transparent;re.setupLightsView(An),Cr.length>0&&xf(Tn,rn,An),Jt&&mi.viewport(ct.copy(Jt)),Tn.length>0&&uo(Tn,rn,An),Cr.length>0&&uo(Cr,rn,An),Kr.length>0&&uo(Kr,rn,An),mi.buffers.depth.setTest(!0),mi.buffers.depth.setMask(!0),mi.buffers.color.setMask(!0),mi.setPolygonOffset(!1)}function xf(st,rn,An){const Jt=Ar.isWebGL2;si===null&&(si=new ko(1,1,{generateMipmaps:!0,type:wi.has("EXT_color_buffer_half_float")?Ft:jt,minFilter:$t,samples:Jt&&c===!0?4:0})),pe.getDrawingBufferSize(Li),Jt?si.setSize(Li.x,Li.y):si.setSize(pu(Li.x),pu(Li.y));const Tn=pe.getRenderTarget();pe.setRenderTarget(si),pe.clear();const Cr=pe.toneMapping;pe.toneMapping=bn,uo(st,rn,An),pe.toneMapping=Cr,Rn.updateMultisampleRenderTarget(si),Rn.updateRenderTargetMipmap(si),pe.setRenderTarget(Tn)}function uo(st,rn,An){const Jt=rn.isScene===!0?rn.overrideMaterial:null;for(let Tn=0,Cr=st.length;Tn<Cr;Tn++){const Kr=st[Tn],us=Kr.object,ps=Kr.geometry,Ls=Jt===null?Kr.material:Jt,bs=Kr.group;us.layers.test(An.layers)&&Zu(us,rn,An,ps,Ls,bs)}}function Zu(st,rn,An,Jt,Tn,Cr){st.onBeforeRender(pe,rn,An,Jt,Tn,Cr),st.modelViewMatrix.multiplyMatrices(An.matrixWorldInverse,st.matrixWorld),st.normalMatrix.getNormalMatrix(st.modelViewMatrix),Tn.onBeforeRender(pe,rn,An,Jt,st,Cr),Tn.transparent===!0&&Tn.side===Y?(Tn.side=P,Tn.needsUpdate=!0,pe.renderBufferDirect(An,rn,Jt,Tn,st,Cr),Tn.side=L,Tn.needsUpdate=!0,pe.renderBufferDirect(An,rn,Jt,Tn,st,Cr),Tn.side=Y):pe.renderBufferDirect(An,rn,Jt,Tn,st,Cr),st.onAfterRender(pe,rn,An,Jt,Tn,Cr)}function Zl(st,rn,An){rn.isScene!==!0&&(rn=$n);const Jt=Hn.get(st),Tn=re.state.lights,Cr=re.state.shadowsArray,Kr=Tn.state.version,us=yr.getParameters(st,Tn.state,Cr,rn,An),ps=yr.getProgramCacheKey(us);let Ls=Jt.programs;Jt.environment=st.isMeshStandardMaterial?rn.environment:null,Jt.fog=rn.fog,Jt.envMap=(st.isMeshStandardMaterial?cr:yi).get(st.envMap||Jt.environment),Ls===void 0&&(st.addEventListener("dispose",co),Ls=new Map,Jt.programs=Ls);let bs=Ls.get(ps);if(bs!==void 0){if(Jt.currentProgram===bs&&Jt.lightsStateVersion===Kr)return e2(st,us),bs}else us.uniforms=yr.getUniforms(st),st.onBuild(An,us,pe),st.onBeforeCompile(us,pe),bs=yr.acquireProgram(us,ps),Ls.set(ps,bs),Jt.uniforms=us.uniforms;const _s=Jt.uniforms;(!st.isShaderMaterial&&!st.isRawShaderMaterial||st.clipping===!0)&&(_s.clippingPlanes=tt.uniform),e2(st,us),Jt.needsLights=s_(st),Jt.lightsStateVersion=Kr,Jt.needsLights&&(_s.ambientLightColor.value=Tn.state.ambient,_s.lightProbe.value=Tn.state.probe,_s.directionalLights.value=Tn.state.directional,_s.directionalLightShadows.value=Tn.state.directionalShadow,_s.spotLights.value=Tn.state.spot,_s.spotLightShadows.value=Tn.state.spotShadow,_s.rectAreaLights.value=Tn.state.rectArea,_s.ltc_1.value=Tn.state.rectAreaLTC1,_s.ltc_2.value=Tn.state.rectAreaLTC2,_s.pointLights.value=Tn.state.point,_s.pointLightShadows.value=Tn.state.pointShadow,_s.hemisphereLights.value=Tn.state.hemi,_s.directionalShadowMap.value=Tn.state.directionalShadowMap,_s.directionalShadowMatrix.value=Tn.state.directionalShadowMatrix,_s.spotShadowMap.value=Tn.state.spotShadowMap,_s.spotLightMatrix.value=Tn.state.spotLightMatrix,_s.spotLightMap.value=Tn.state.spotLightMap,_s.pointShadowMap.value=Tn.state.pointShadowMap,_s.pointShadowMatrix.value=Tn.state.pointShadowMatrix);const Ko=bs.getUniforms(),Rl=Fh.seqWithValue(Ko.seq,_s);return Jt.currentProgram=bs,Jt.uniformsList=Rl,bs}function e2(st,rn){const An=Hn.get(st);An.outputEncoding=rn.outputEncoding,An.instancing=rn.instancing,An.skinning=rn.skinning,An.morphTargets=rn.morphTargets,An.morphNormals=rn.morphNormals,An.morphColors=rn.morphColors,An.morphTargetsCount=rn.morphTargetsCount,An.numClippingPlanes=rn.numClippingPlanes,An.numIntersection=rn.numClipIntersection,An.vertexAlphas=rn.vertexAlphas,An.vertexTangents=rn.vertexTangents,An.toneMapping=rn.toneMapping}function i_(st,rn,An,Jt,Tn){rn.isScene!==!0&&(rn=$n),Rn.resetTextureUnits();const Cr=rn.fog,Kr=Jt.isMeshStandardMaterial?rn.environment:null,us=Re===null?pe.outputEncoding:Re.isXRRenderTarget===!0?Re.texture.encoding:Jr,ps=(Jt.isMeshStandardMaterial?cr:yi).get(Jt.envMap||Kr),Ls=Jt.vertexColors===!0&&!!An.attributes.color&&An.attributes.color.itemSize===4,bs=!!Jt.normalMap&&!!An.attributes.tangent,_s=!!An.morphAttributes.position,Ko=!!An.morphAttributes.normal,Rl=!!An.morphAttributes.color,$u=Jt.toneMapped?pe.toneMapping:bn,Ef=An.morphAttributes.position||An.morphAttributes.normal||An.morphAttributes.color,Xo=Ef!==void 0?Ef.length:0,ws=Hn.get(Jt),h1=re.state.lights;if(Ln===!0&&(ui===!0||st!==Ve)){const Bl=st===Ve&&Jt.id===De;tt.setState(Jt,st,Bl)}let da=!1;Jt.version===ws.__version?(ws.needsLights&&ws.lightsStateVersion!==h1.state.version||ws.outputEncoding!==us||Tn.isInstancedMesh&&ws.instancing===!1||!Tn.isInstancedMesh&&ws.instancing===!0||Tn.isSkinnedMesh&&ws.skinning===!1||!Tn.isSkinnedMesh&&ws.skinning===!0||ws.envMap!==ps||Jt.fog===!0&&ws.fog!==Cr||ws.numClippingPlanes!==void 0&&(ws.numClippingPlanes!==tt.numPlanes||ws.numIntersection!==tt.numIntersection)||ws.vertexAlphas!==Ls||ws.vertexTangents!==bs||ws.morphTargets!==_s||ws.morphNormals!==Ko||ws.morphColors!==Rl||ws.toneMapping!==$u||Ar.isWebGL2===!0&&ws.morphTargetsCount!==Xo)&&(da=!0):(da=!0,ws.__version=Jt.version);let bf=ws.currentProgram;da===!0&&(bf=Zl(Jt,rn,Tn));let t2=!1,Vg=!1,d1=!1;const Ha=bf.getUniforms(),_f=ws.uniforms;if(mi.useProgram(bf.program)&&(t2=!0,Vg=!0,d1=!0),Jt.id!==De&&(De=Jt.id,Vg=!0),t2||Ve!==st){if(Ha.setValue(ln,"projectionMatrix",st.projectionMatrix),Ar.logarithmicDepthBuffer&&Ha.setValue(ln,"logDepthBufFC",2/(Math.log(st.far+1)/Math.LN2)),Ve!==st&&(Ve=st,Vg=!0,d1=!0),Jt.isShaderMaterial||Jt.isMeshPhongMaterial||Jt.isMeshToonMaterial||Jt.isMeshStandardMaterial||Jt.envMap){const Bl=Ha.map.cameraPosition;Bl!==void 0&&Bl.setValue(ln,gn.setFromMatrixPosition(st.matrixWorld))}(Jt.isMeshPhongMaterial||Jt.isMeshToonMaterial||Jt.isMeshLambertMaterial||Jt.isMeshBasicMaterial||Jt.isMeshStandardMaterial||Jt.isShaderMaterial)&&Ha.setValue(ln,"isOrthographic",st.isOrthographicCamera===!0),(Jt.isMeshPhongMaterial||Jt.isMeshToonMaterial||Jt.isMeshLambertMaterial||Jt.isMeshBasicMaterial||Jt.isMeshStandardMaterial||Jt.isShaderMaterial||Jt.isShadowMaterial||Tn.isSkinnedMesh)&&Ha.setValue(ln,"viewMatrix",st.matrixWorldInverse)}if(Tn.isSkinnedMesh){Ha.setOptional(ln,Tn,"bindMatrix"),Ha.setOptional(ln,Tn,"bindMatrixInverse");const Bl=Tn.skeleton;Bl&&(Ar.floatVertexTextures?(Bl.boneTexture===null&&Bl.computeBoneTexture(),Ha.setValue(ln,"boneTexture",Bl.boneTexture,Rn),Ha.setValue(ln,"boneTextureSize",Bl.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const f1=An.morphAttributes;if((f1.position!==void 0||f1.normal!==void 0||f1.color!==void 0&&Ar.isWebGL2===!0)&&Ai.update(Tn,An,Jt,bf),(Vg||ws.receiveShadow!==Tn.receiveShadow)&&(ws.receiveShadow=Tn.receiveShadow,Ha.setValue(ln,"receiveShadow",Tn.receiveShadow)),Jt.isMeshGouraudMaterial&&Jt.envMap!==null&&(_f.envMap.value=ps,_f.flipEnvMap.value=ps.isCubeTexture&&ps.isRenderTargetTexture===!1?-1:1),Vg&&(Ha.setValue(ln,"toneMappingExposure",pe.toneMappingExposure),ws.needsLights&&r_(_f,d1),Cr&&Jt.fog===!0&&Ys.refreshFogUniforms(_f,Cr),Ys.refreshMaterialUniforms(_f,Jt,Ut,vt,si),Fh.upload(ln,ws.uniformsList,_f,Rn)),Jt.isShaderMaterial&&Jt.uniformsNeedUpdate===!0&&(Fh.upload(ln,ws.uniformsList,_f,Rn),Jt.uniformsNeedUpdate=!1),Jt.isSpriteMaterial&&Ha.setValue(ln,"center",Tn.center),Ha.setValue(ln,"modelViewMatrix",Tn.modelViewMatrix),Ha.setValue(ln,"normalMatrix",Tn.normalMatrix),Ha.setValue(ln,"modelMatrix",Tn.matrixWorld),Jt.isShaderMaterial||Jt.isRawShaderMaterial){const Bl=Jt.uniformsGroups;for(let p1=0,o_=Bl.length;p1<o_;p1++)if(Ar.isWebGL2){const n2=Bl[p1];xr.update(n2,bf),xr.bind(n2,bf)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return bf}function r_(st,rn){st.ambientLightColor.needsUpdate=rn,st.lightProbe.needsUpdate=rn,st.directionalLights.needsUpdate=rn,st.directionalLightShadows.needsUpdate=rn,st.pointLights.needsUpdate=rn,st.pointLightShadows.needsUpdate=rn,st.spotLights.needsUpdate=rn,st.spotLightShadows.needsUpdate=rn,st.rectAreaLights.needsUpdate=rn,st.hemisphereLights.needsUpdate=rn}function s_(st){return st.isMeshLambertMaterial||st.isMeshToonMaterial||st.isMeshPhongMaterial||st.isMeshStandardMaterial||st.isShadowMaterial||st.isShaderMaterial&&st.lights===!0}this.setTexture2D=function(){var st=!1;return function(An,Jt){An&&An.isWebGLRenderTarget&&(st||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),st=!0),An=An.texture),Rn.setTexture2D(An,Jt)}}(),this.getActiveCubeFace=function(){return Ce},this.getActiveMipmapLevel=function(){return Fe},this.getRenderTarget=function(){return Re},this.setRenderTargetTextures=function(st,rn,An){Hn.get(st.texture).__webglTexture=rn,Hn.get(st.depthTexture).__webglTexture=An;const Jt=Hn.get(st);Jt.__hasExternalTextures=!0,Jt.__hasExternalTextures&&(Jt.__autoAllocateDepthBuffer=An===void 0,Jt.__autoAllocateDepthBuffer||wi.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Jt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(st,rn){const An=Hn.get(st);An.__webglFramebuffer=rn,An.__useDefaultFramebuffer=rn===void 0},this.setRenderTarget=function(st,rn=0,An=0){Re=st,Ce=rn,Fe=An;let Jt=!0,Tn=null,Cr=!1,Kr=!1;if(st){const ps=Hn.get(st);ps.__useDefaultFramebuffer!==void 0?(mi.bindFramebuffer(36160,null),Jt=!1):ps.__webglFramebuffer===void 0?Rn.setupRenderTarget(st):ps.__hasExternalTextures&&Rn.rebindTextures(st,Hn.get(st.texture).__webglTexture,Hn.get(st.depthTexture).__webglTexture);const Ls=st.texture;(Ls.isData3DTexture||Ls.isDataArrayTexture||Ls.isCompressedArrayTexture)&&(Kr=!0);const bs=Hn.get(st).__webglFramebuffer;st.isWebGLCubeRenderTarget?(Tn=bs[rn],Cr=!0):Ar.isWebGL2&&st.samples>0&&Rn.useMultisampledRTT(st)===!1?Tn=Hn.get(st).__webglMultisampledFramebuffer:Tn=bs,ct.copy(st.viewport),bt.copy(st.scissor),Ne=st.scissorTest}else ct.copy(Dt).multiplyScalar(Ut).floor(),bt.copy(sn).multiplyScalar(Ut).floor(),Ne=kn;if(mi.bindFramebuffer(36160,Tn)&&Ar.drawBuffers&&Jt&&mi.drawBuffers(st,Tn),mi.viewport(ct),mi.scissor(bt),mi.setScissorTest(Ne),Cr){const ps=Hn.get(st.texture);ln.framebufferTexture2D(36160,36064,34069+rn,ps.__webglTexture,An)}else if(Kr){const ps=Hn.get(st.texture),Ls=rn||0;ln.framebufferTextureLayer(36160,36064,ps.__webglTexture,An||0,Ls)}De=-1},this.readRenderTargetPixels=function(st,rn,An,Jt,Tn,Cr,Kr){if(!(st&&st.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let us=Hn.get(st).__webglFramebuffer;if(st.isWebGLCubeRenderTarget&&Kr!==void 0&&(us=us[Kr]),us){mi.bindFramebuffer(36160,us);try{const ps=st.texture,Ls=ps.format,bs=ps.type;if(Ls!==Zi&&Hi.convert(Ls)!==ln.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const _s=bs===Ft&&(wi.has("EXT_color_buffer_half_float")||Ar.isWebGL2&&wi.has("EXT_color_buffer_float"));if(bs!==jt&&Hi.convert(bs)!==ln.getParameter(35738)&&!(bs===vn&&(Ar.isWebGL2||wi.has("OES_texture_float")||wi.has("WEBGL_color_buffer_float")))&&!_s){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}rn>=0&&rn<=st.width-Jt&&An>=0&&An<=st.height-Tn&&ln.readPixels(rn,An,Jt,Tn,Hi.convert(Ls),Hi.convert(bs),Cr)}finally{const ps=Re!==null?Hn.get(Re).__webglFramebuffer:null;mi.bindFramebuffer(36160,ps)}}},this.copyFramebufferToTexture=function(st,rn,An=0){const Jt=Math.pow(2,-An),Tn=Math.floor(rn.image.width*Jt),Cr=Math.floor(rn.image.height*Jt);Rn.setTexture2D(rn,0),ln.copyTexSubImage2D(3553,An,0,0,st.x,st.y,Tn,Cr),mi.unbindTexture()},this.copyTextureToTexture=function(st,rn,An,Jt=0){const Tn=rn.image.width,Cr=rn.image.height,Kr=Hi.convert(An.format),us=Hi.convert(An.type);Rn.setTexture2D(An,0),ln.pixelStorei(37440,An.flipY),ln.pixelStorei(37441,An.premultiplyAlpha),ln.pixelStorei(3317,An.unpackAlignment),rn.isDataTexture?ln.texSubImage2D(3553,Jt,st.x,st.y,Tn,Cr,Kr,us,rn.image.data):rn.isCompressedTexture?ln.compressedTexSubImage2D(3553,Jt,st.x,st.y,rn.mipmaps[0].width,rn.mipmaps[0].height,Kr,rn.mipmaps[0].data):ln.texSubImage2D(3553,Jt,st.x,st.y,Kr,us,rn.image),Jt===0&&An.generateMipmaps&&ln.generateMipmap(3553),mi.unbindTexture()},this.copyTextureToTexture3D=function(st,rn,An,Jt,Tn=0){if(pe.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Cr=st.max.x-st.min.x+1,Kr=st.max.y-st.min.y+1,us=st.max.z-st.min.z+1,ps=Hi.convert(Jt.format),Ls=Hi.convert(Jt.type);let bs;if(Jt.isData3DTexture)Rn.setTexture3D(Jt,0),bs=32879;else if(Jt.isDataArrayTexture)Rn.setTexture2DArray(Jt,0),bs=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ln.pixelStorei(37440,Jt.flipY),ln.pixelStorei(37441,Jt.premultiplyAlpha),ln.pixelStorei(3317,Jt.unpackAlignment);const _s=ln.getParameter(3314),Ko=ln.getParameter(32878),Rl=ln.getParameter(3316),$u=ln.getParameter(3315),Ef=ln.getParameter(32877),Xo=An.isCompressedTexture?An.mipmaps[0]:An.image;ln.pixelStorei(3314,Xo.width),ln.pixelStorei(32878,Xo.height),ln.pixelStorei(3316,st.min.x),ln.pixelStorei(3315,st.min.y),ln.pixelStorei(32877,st.min.z),An.isDataTexture||An.isData3DTexture?ln.texSubImage3D(bs,Tn,rn.x,rn.y,rn.z,Cr,Kr,us,ps,Ls,Xo.data):An.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ln.compressedTexSubImage3D(bs,Tn,rn.x,rn.y,rn.z,Cr,Kr,us,ps,Xo.data)):ln.texSubImage3D(bs,Tn,rn.x,rn.y,rn.z,Cr,Kr,us,ps,Ls,Xo),ln.pixelStorei(3314,_s),ln.pixelStorei(32878,Ko),ln.pixelStorei(3316,Rl),ln.pixelStorei(3315,$u),ln.pixelStorei(32877,Ef),Tn===0&&Jt.generateMipmaps&&ln.generateMipmap(bs),mi.unbindTexture()},this.initTexture=function(st){st.isCubeTexture?Rn.setTextureCube(st,0):st.isData3DTexture?Rn.setTexture3D(st,0):st.isDataArrayTexture||st.isCompressedArrayTexture?Rn.setTexture2DArray(st,0):Rn.setTexture2D(st,0),mi.unbindTexture()},this.resetState=function(){Ce=0,Fe=0,Re=null,mi.reset(),Bn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class oA extends Bg{}oA.prototype.isWebGL1Renderer=!0;class Wp{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Si(e),this.density=n}clone(){return new Wp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Jd{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Si(e),this.near=n,this.far=r}clone(){return new Jd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Lg extends ds{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Kp{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Dc,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Co()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let a=0,c=this.stride;a<c;a++)this.array[e+a]=n.array[r+a];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Co()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Co()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ca=new nt;class Uu{constructor(e,n,r,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=a===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.applyMatrix4(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.applyNormalMatrix(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.transformDirection(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}setX(e,n){return this.normalized&&(n=Is(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Is(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Is(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Is(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=La(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=La(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=La(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=La(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Is(n,this.array),r=Is(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=Is(n,this.array),r=Is(r,this.array),a=Is(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=a,this}setXYZW(e,n,r,a,c){return e=e*this.data.stride+this.offset,this.normalized&&(n=Is(n,this.array),r=Is(r,this.array),a=Is(a,this.array),c=Is(c,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=a,this.data.array[e+3]=c,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const a=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)n.push(this.data.array[a+c])}return new Rs(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Uu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const a=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)n.push(this.data.array[a+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Xp extends Zo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Si(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ec;const Uh=new nt,Gh=new nt,bc=new nt,Gs=new On,Zd=new On,$d=new Gi,ef=new nt,tf=new nt,Yp=new nt,Dg=new On,nf=new On,Pg=new On;class aA extends ds{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Ec===void 0){Ec=new Or;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Kp(n,5);Ec.setIndex([0,1,2,0,2,3]),Ec.setAttribute("position",new Uu(r,3,0,!1)),Ec.setAttribute("uv",new Uu(r,2,3,!1))}this.geometry=Ec,this.material=e!==void 0?e:new Xp,this.center=new On(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gh.setFromMatrixScale(this.matrixWorld),$d.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gh.multiplyScalar(-bc.z);const r=this.material.rotation;let a,c;r!==0&&(c=Math.cos(r),a=Math.sin(r));const p=this.center;rf(ef.set(-.5,-.5,0),bc,p,Gh,a,c),rf(tf.set(.5,-.5,0),bc,p,Gh,a,c),rf(Yp.set(.5,.5,0),bc,p,Gh,a,c),Dg.set(0,0),nf.set(1,0),Pg.set(1,1);let A=e.ray.intersectTriangle(ef,tf,Yp,!1,Uh);if(A===null&&(rf(tf.set(-.5,.5,0),bc,p,Gh,a,c),nf.set(0,1),A=e.ray.intersectTriangle(ef,Yp,tf,!1,Uh),A===null))return;const N=e.ray.origin.distanceTo(Uh);N<e.near||N>e.far||n.push({distance:N,point:Uh.clone(),uv:Fa.getUV(Uh,ef,tf,Yp,Dg,nf,Pg,new On),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function rf(x,e,n,r,a,c){Gs.subVectors(x,n).addScalar(.5).multiply(r),a!==void 0?(Zd.x=c*Gs.x-a*Gs.y,Zd.y=a*Gs.x+c*Gs.y):Zd.copy(Gs),x.copy(e),x.x+=Zd.x,x.y+=Zd.y,x.applyMatrix4($d)}const sf=new nt,lA=new nt;class cA extends ds{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,a=n.length;r<a;r++){const c=n[r];this.addLevel(c.object.clone(),c.distance,c.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const a=this.levels;let c;for(c=0;c<a.length&&!(n<a[c].distance);c++);return a.splice(c,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,a;for(r=1,a=n.length;r<a;r++){let c=n[r].distance;if(n[r].object.visible&&(c-=c*n[r].hysteresis),e<c)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){sf.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(sf);this.getObjectForDistance(a).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){sf.setFromMatrixPosition(e.matrixWorld),lA.setFromMatrixPosition(this.matrixWorld);const r=sf.distanceTo(lA)/e.zoom;n[0].object.visible=!0;let a,c;for(a=1,c=n.length;a<c;a++){let p=n[a].distance;if(n[a].object.visible&&(p-=p*n[a].hysteresis),r>=p)n[a-1].object.visible=!1,n[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<c;a++)n[a].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let a=0,c=r.length;a<c;a++){const p=r[a];n.object.levels.push({object:p.object.uuid,distance:p.distance,hysteresis:p.hysteresis})}return n}}const Gu=new nt,_c=new es,El=new es,uA=new nt,Og=new Gi;class bl extends $s{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Gi,this.bindMatrixInverse=new Gi}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new es,n=this.geometry.attributes.skinWeight;for(let r=0,a=n.count;r<a;r++){e.fromBufferAttribute(n,r);const c=1/e.manhattanLength();c!==1/0?e.multiplyScalar(c):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const r=this.skeleton,a=this.geometry;_c.fromBufferAttribute(a.attributes.skinIndex,e),El.fromBufferAttribute(a.attributes.skinWeight,e),Gu.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let c=0;c<4;c++){const p=El.getComponent(c);if(p!==0){const A=_c.getComponent(c);Og.multiplyMatrices(r.bones[A].matrixWorld,r.boneInverses[A]),n.addScaledVector(uA.copy(Gu).applyMatrix4(Og),p)}}return n.applyMatrix4(this.bindMatrixInverse)}}class wc extends ds{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Hh extends Ws{constructor(e=null,n=1,r=1,a,c,p,A,N,H=ae,Z=ae,ne,re){super(null,p,A,N,H,Z,a,c,ne,re),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const qp=new Gi,of=new Gi;class af{constructor(e=[],n=[]){this.uuid=Co(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,a=this.bones.length;r<a;r++)this.boneInverses.push(new Gi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Gi;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,a=this.boneTexture;for(let c=0,p=e.length;c<p;c++){const A=e[c]?e[c].matrixWorld:of;qp.multiplyMatrices(A,n[c]),qp.toArray(r,c*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new af(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=fd(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Hh(n,e,e,Zi,vn);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const a=this.bones[n];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,a=e.bones.length;r<a;r++){const c=e.bones[r];let p=n[c];p===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",c),p=new wc),this.bones.push(p),this.boneInverses.push(new Gi().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let a=0,c=n.length;a<c;a++){const p=n[a];e.bones.push(p.uuid);const A=r[a];e.boneInverses.push(A.toArray())}return e}}class Cc extends Rs{constructor(e,n,r,a=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Fg=new Gi,Jp=new Gi,Yl=[],zh=new Gi,Vh=new $s;class hA extends $s{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Cc(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let a=0;a<r;a++)this.setMatrixAt(a,zh)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,a=this.count;if(Vh.geometry=this.geometry,Vh.material=this.material,Vh.material!==void 0)for(let c=0;c<a;c++){this.getMatrixAt(c,Fg),Jp.multiplyMatrices(r,Fg),Vh.matrixWorld=Jp,Vh.raycast(e,Yl);for(let p=0,A=Yl.length;p<A;p++){const N=Yl[p];N.instanceId=c,N.object=this,n.push(N)}Yl.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Cc(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ga extends Zo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Si(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const s=new nt,t=new nt,i=new Gi,o=new Jo,l=new qo;class f extends ds{constructor(e=new Or,n=new ga){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let a=1,c=n.count;a<c;a++)s.fromBufferAttribute(n,a-1),t.fromBufferAttribute(n,a),r[a]=r[a-1],r[a]+=s.distanceTo(t);e.setAttribute("lineDistance",new Yi(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,a=this.matrixWorld,c=e.params.Line.threshold,p=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),l.copy(r.boundingSphere),l.applyMatrix4(a),l.radius+=c,e.ray.intersectsSphere(l)===!1)return;i.copy(a).invert(),o.copy(e.ray).applyMatrix4(i);const A=c/((this.scale.x+this.scale.y+this.scale.z)/3),N=A*A,H=new nt,Z=new nt,ne=new nt,re=new nt,le=this.isLineSegments?2:1,me=r.index,de=r.attributes.position;if(me!==null){const Ce=Math.max(0,p.start),Fe=Math.min(me.count,p.start+p.count);for(let Re=Ce,De=Fe-1;Re<De;Re+=le){const Ve=me.getX(Re),ct=me.getX(Re+1);if(H.fromBufferAttribute(de,Ve),Z.fromBufferAttribute(de,ct),o.distanceSqToSegment(H,Z,re,ne)>N)continue;re.applyMatrix4(this.matrixWorld);const Ne=e.ray.origin.distanceTo(re);Ne<e.near||Ne>e.far||n.push({distance:Ne,point:ne.clone().applyMatrix4(this.matrixWorld),index:Re,face:null,faceIndex:null,object:this})}}else{const Ce=Math.max(0,p.start),Fe=Math.min(de.count,p.start+p.count);for(let Re=Ce,De=Fe-1;Re<De;Re+=le){if(H.fromBufferAttribute(de,Re),Z.fromBufferAttribute(de,Re+1),o.distanceSqToSegment(H,Z,re,ne)>N)continue;re.applyMatrix4(this.matrixWorld);const ct=e.ray.origin.distanceTo(re);ct<e.near||ct>e.far||n.push({distance:ct,point:ne.clone().applyMatrix4(this.matrixWorld),index:Re,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,p=a.length;c<p;c++){const A=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=c}}}}}const B=new nt,M=new nt;class D extends f{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let a=0,c=n.count;a<c;a+=2)B.fromBufferAttribute(n,a),M.fromBufferAttribute(n,a+1),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+B.distanceTo(M);e.setAttribute("lineDistance",new Yi(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class G extends f{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class $ extends Zo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Si(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ie=new Gi,oe=new Jo,he=new qo,ye=new nt;class we extends ds{constructor(e=new Or,n=new $){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,a=this.matrixWorld,c=e.params.Points.threshold,p=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),he.copy(r.boundingSphere),he.applyMatrix4(a),he.radius+=c,e.ray.intersectsSphere(he)===!1)return;ie.copy(a).invert(),oe.copy(e.ray).applyMatrix4(ie);const A=c/((this.scale.x+this.scale.y+this.scale.z)/3),N=A*A,H=r.index,ne=r.attributes.position;if(H!==null){const re=Math.max(0,p.start),le=Math.min(H.count,p.start+p.count);for(let me=re,pe=le;me<pe;me++){const de=H.getX(me);ye.fromBufferAttribute(ne,de),be(ye,de,N,a,e,n,this)}}else{const re=Math.max(0,p.start),le=Math.min(ne.count,p.start+p.count);for(let me=re,pe=le;me<pe;me++)ye.fromBufferAttribute(ne,me),be(ye,me,N,a,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,p=a.length;c<p;c++){const A=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=c}}}}}function be(x,e,n,r,a,c,p){const A=oe.distanceSqToPoint(x);if(A<n){const N=new nt;oe.closestPointToPoint(x,N),N.applyMatrix4(r);const H=a.ray.origin.distanceTo(N);if(H<a.near||H>a.far)return;c.push({distance:H,distanceToRay:Math.sqrt(A),point:N,index:e,face:null,object:p})}}class ke extends Ws{constructor(e,n,r,a,c,p,A,N,H){super(e,n,r,a,c,p,A,N,H),this.isVideoTexture=!0,this.minFilter=p!==void 0?p:Ke,this.magFilter=c!==void 0?c:Ke,this.generateMipmaps=!1;const Z=this;function ne(){Z.needsUpdate=!0,e.requestVideoFrameCallback(ne)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(ne)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Xe extends Ws{constructor(e,n,r){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=ae,this.minFilter=ae,this.generateMipmaps=!1,this.needsUpdate=!0}}class it extends Ws{constructor(e,n,r,a,c,p,A,N,H,Z,ne,re){super(null,p,A,N,H,Z,a,c,ne,re),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class lt extends it{constructor(e,n,r,a,c,p){super(e,n,r,c,p),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=Oe}}class pt extends Ws{constructor(e,n,r,a,c,p,A,N,H){super(e,n,r,a,c,p,A,N,H),this.isCanvasTexture=!0,this.needsUpdate=!0}}class mt{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,a=this.getPoint(0),c=0;n.push(0);for(let p=1;p<=e;p++)r=this.getPoint(p/e),c+=r.distanceTo(a),n.push(c),a=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let a=0;const c=r.length;let p;n?p=n:p=e*r[c-1];let A=0,N=c-1,H;for(;A<=N;)if(a=Math.floor(A+(N-A)/2),H=r[a]-p,H<0)A=a+1;else if(H>0)N=a-1;else{N=a;break}if(a=N,r[a]===p)return a/(c-1);const Z=r[a],re=r[a+1]-Z,le=(p-Z)/re;return(a+le)/(c-1)}getTangent(e,n){let a=e-1e-4,c=e+1e-4;a<0&&(a=0),c>1&&(c=1);const p=this.getPoint(a),A=this.getPoint(c),N=n||(p.isVector2?new On:new nt);return N.copy(A).sub(p).normalize(),N}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new nt,a=[],c=[],p=[],A=new nt,N=new Gi;for(let le=0;le<=e;le++){const me=le/e;a[le]=this.getTangentAt(me,new nt)}c[0]=new nt,p[0]=new nt;let H=Number.MAX_VALUE;const Z=Math.abs(a[0].x),ne=Math.abs(a[0].y),re=Math.abs(a[0].z);Z<=H&&(H=Z,r.set(1,0,0)),ne<=H&&(H=ne,r.set(0,1,0)),re<=H&&r.set(0,0,1),A.crossVectors(a[0],r).normalize(),c[0].crossVectors(a[0],A),p[0].crossVectors(a[0],c[0]);for(let le=1;le<=e;le++){if(c[le]=c[le-1].clone(),p[le]=p[le-1].clone(),A.crossVectors(a[le-1],a[le]),A.length()>Number.EPSILON){A.normalize();const me=Math.acos(Ns(a[le-1].dot(a[le]),-1,1));c[le].applyMatrix4(N.makeRotationAxis(A,me))}p[le].crossVectors(a[le],c[le])}if(n===!0){let le=Math.acos(Ns(c[0].dot(c[e]),-1,1));le/=e,a[0].dot(A.crossVectors(c[0],c[e]))>0&&(le=-le);for(let me=1;me<=e;me++)c[me].applyMatrix4(N.makeRotationAxis(a[me],le*me)),p[me].crossVectors(a[me],c[me])}return{tangents:a,normals:c,binormals:p}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ot extends mt{constructor(e=0,n=0,r=1,a=1,c=0,p=Math.PI*2,A=!1,N=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=a,this.aStartAngle=c,this.aEndAngle=p,this.aClockwise=A,this.aRotation=N}getPoint(e,n){const r=n||new On,a=Math.PI*2;let c=this.aEndAngle-this.aStartAngle;const p=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=a;for(;c>a;)c-=a;c<Number.EPSILON&&(p?c=0:c=a),this.aClockwise===!0&&!p&&(c===a?c=-a:c=c-a);const A=this.aStartAngle+e*c;let N=this.aX+this.xRadius*Math.cos(A),H=this.aY+this.yRadius*Math.sin(A);if(this.aRotation!==0){const Z=Math.cos(this.aRotation),ne=Math.sin(this.aRotation),re=N-this.aX,le=H-this.aY;N=re*Z-le*ne+this.aX,H=re*ne+le*Z+this.aY}return r.set(N,H)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class kt extends ot{constructor(e,n,r,a,c,p){super(e,n,r,r,a,c,p),this.isArcCurve=!0,this.type="ArcCurve"}}function gt(){let x=0,e=0,n=0,r=0;function a(c,p,A,N){x=c,e=A,n=-3*c+3*p-2*A-N,r=2*c-2*p+A+N}return{initCatmullRom:function(c,p,A,N,H){a(p,A,H*(A-c),H*(N-p))},initNonuniformCatmullRom:function(c,p,A,N,H,Z,ne){let re=(p-c)/H-(A-c)/(H+Z)+(A-p)/Z,le=(A-p)/Z-(N-p)/(Z+ne)+(N-A)/ne;re*=Z,le*=Z,a(p,A,re,le)},calc:function(c){const p=c*c,A=p*c;return x+e*c+n*p+r*A}}}const Ht=new nt,Zt=new gt,Qt=new gt,en=new gt;class Wn extends mt{constructor(e=[],n=!1,r="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=a}getPoint(e,n=new nt){const r=n,a=this.points,c=a.length,p=(c-(this.closed?0:1))*e;let A=Math.floor(p),N=p-A;this.closed?A+=A>0?0:(Math.floor(Math.abs(A)/c)+1)*c:N===0&&A===c-1&&(A=c-2,N=1);let H,Z;this.closed||A>0?H=a[(A-1)%c]:(Ht.subVectors(a[0],a[1]).add(a[0]),H=Ht);const ne=a[A%c],re=a[(A+1)%c];if(this.closed||A+2<c?Z=a[(A+2)%c]:(Ht.subVectors(a[c-1],a[c-2]).add(a[c-1]),Z=Ht),this.curveType==="centripetal"||this.curveType==="chordal"){const le=this.curveType==="chordal"?.5:.25;let me=Math.pow(H.distanceToSquared(ne),le),pe=Math.pow(ne.distanceToSquared(re),le),de=Math.pow(re.distanceToSquared(Z),le);pe<1e-4&&(pe=1),me<1e-4&&(me=pe),de<1e-4&&(de=pe),Zt.initNonuniformCatmullRom(H.x,ne.x,re.x,Z.x,me,pe,de),Qt.initNonuniformCatmullRom(H.y,ne.y,re.y,Z.y,me,pe,de),en.initNonuniformCatmullRom(H.z,ne.z,re.z,Z.z,me,pe,de)}else this.curveType==="catmullrom"&&(Zt.initCatmullRom(H.x,ne.x,re.x,Z.x,this.tension),Qt.initCatmullRom(H.y,ne.y,re.y,Z.y,this.tension),en.initCatmullRom(H.z,ne.z,re.z,Z.z,this.tension));return r.set(Zt.calc(N),Qt.calc(N),en.calc(N)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const a=this.points[n];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(new nt().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ii(x,e,n,r,a){const c=(r-e)*.5,p=(a-n)*.5,A=x*x,N=x*A;return(2*n-2*r+c+p)*N+(-3*n+3*r-2*c-p)*A+c*x+n}function lr(x,e){const n=1-x;return n*n*e}function oi(x,e){return 2*(1-x)*x*e}function qn(x,e){return x*x*e}function $i(x,e,n,r){return lr(x,e)+oi(x,n)+qn(x,r)}function Ji(x,e){const n=1-x;return n*n*n*e}function qr(x,e){const n=1-x;return 3*n*n*x*e}function Tt(x,e){return 3*(1-x)*x*x*e}function Mt(x,e){return x*x*x*e}function Yn(x,e,n,r,a){return Ji(x,e)+qr(x,n)+Tt(x,r)+Mt(x,a)}class Cn extends mt{constructor(e=new On,n=new On,r=new On,a=new On){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=a}getPoint(e,n=new On){const r=n,a=this.v0,c=this.v1,p=this.v2,A=this.v3;return r.set(Yn(e,a.x,c.x,p.x,A.x),Yn(e,a.y,c.y,p.y,A.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zn extends mt{constructor(e=new nt,n=new nt,r=new nt,a=new nt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=a}getPoint(e,n=new nt){const r=n,a=this.v0,c=this.v1,p=this.v2,A=this.v3;return r.set(Yn(e,a.x,c.x,p.x,A.x),Yn(e,a.y,c.y,p.y,A.y),Yn(e,a.z,c.z,p.z,A.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hr extends mt{constructor(e=new On,n=new On){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new On){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const r=n||new On;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Fn extends mt{constructor(e=new nt,n=new nt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new nt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jn extends mt{constructor(e=new On,n=new On,r=new On){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new On){const r=n,a=this.v0,c=this.v1,p=this.v2;return r.set($i(e,a.x,c.x,p.x),$i(e,a.y,c.y,p.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Sn extends mt{constructor(e=new nt,n=new nt,r=new nt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new nt){const r=n,a=this.v0,c=this.v1,p=this.v2;return r.set($i(e,a.x,c.x,p.x),$i(e,a.y,c.y,p.y),$i(e,a.z,c.z,p.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ii extends mt{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new On){const r=n,a=this.points,c=(a.length-1)*e,p=Math.floor(c),A=c-p,N=a[p===0?p:p-1],H=a[p],Z=a[p>a.length-2?a.length-1:p+1],ne=a[p>a.length-3?a.length-1:p+2];return r.set(ii(A,N.x,H.x,Z.x,ne.x),ii(A,N.y,H.y,Z.y,ne.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const a=this.points[n];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(new On().fromArray(a))}return this}}var vi=Object.freeze({__proto__:null,ArcCurve:kt,CatmullRomCurve3:Wn,CubicBezierCurve:Cn,CubicBezierCurve3:zn,EllipseCurve:ot,LineCurve:hr,LineCurve3:Fn,QuadraticBezierCurve:jn,QuadraticBezierCurve3:Sn,SplineCurve:Ii});class pr extends mt{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new hr(n,e))}getPoint(e,n){const r=e*this.getLength(),a=this.getCurveLengths();let c=0;for(;c<a.length;){if(a[c]>=r){const p=a[c]-r,A=this.curves[c],N=A.getLength(),H=N===0?0:1-p/N;return A.getPointAt(H,n)}c++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,a=this.curves.length;r<a;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let a=0,c=this.curves;a<c.length;a++){const p=c[a],A=p.isEllipseCurve?e*2:p.isLineCurve||p.isLineCurve3?1:p.isSplineCurve?e*p.points.length:e,N=p.getPoints(A);for(let H=0;H<N.length;H++){const Z=N[H];r&&r.equals(Z)||(n.push(Z),r=Z)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const a=e.curves[n];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const a=this.curves[n];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const a=e.curves[n];this.curves.push(new vi[a.type]().fromJSON(a))}return this}}class Ri extends pr{constructor(e){super(),this.type="Path",this.currentPoint=new On,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new hr(this.currentPoint.clone(),new On(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,a){const c=new jn(this.currentPoint.clone(),new On(e,n),new On(r,a));return this.curves.push(c),this.currentPoint.set(r,a),this}bezierCurveTo(e,n,r,a,c,p){const A=new Cn(this.currentPoint.clone(),new On(e,n),new On(r,a),new On(c,p));return this.curves.push(A),this.currentPoint.set(c,p),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new Ii(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,a,c,p){const A=this.currentPoint.x,N=this.currentPoint.y;return this.absarc(e+A,n+N,r,a,c,p),this}absarc(e,n,r,a,c,p){return this.absellipse(e,n,r,r,a,c,p),this}ellipse(e,n,r,a,c,p,A,N){const H=this.currentPoint.x,Z=this.currentPoint.y;return this.absellipse(e+H,n+Z,r,a,c,p,A,N),this}absellipse(e,n,r,a,c,p,A,N){const H=new ot(e,n,r,a,c,p,A,N);if(this.curves.length>0){const ne=H.getPoint(0);ne.equals(this.currentPoint)||this.lineTo(ne.x,ne.y)}this.curves.push(H);const Z=H.getPoint(1);return this.currentPoint.copy(Z),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class _r extends Or{constructor(e=[new On(0,-.5),new On(.5,0),new On(0,.5)],n=12,r=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:a},n=Math.floor(n),a=Ns(a,0,Math.PI*2);const c=[],p=[],A=[],N=[],H=[],Z=1/n,ne=new nt,re=new On,le=new nt,me=new nt,pe=new nt;let de=0,Ce=0;for(let Fe=0;Fe<=e.length-1;Fe++)switch(Fe){case 0:de=e[Fe+1].x-e[Fe].x,Ce=e[Fe+1].y-e[Fe].y,le.x=Ce*1,le.y=-de,le.z=Ce*0,pe.copy(le),le.normalize(),N.push(le.x,le.y,le.z);break;case e.length-1:N.push(pe.x,pe.y,pe.z);break;default:de=e[Fe+1].x-e[Fe].x,Ce=e[Fe+1].y-e[Fe].y,le.x=Ce*1,le.y=-de,le.z=Ce*0,me.copy(le),le.x+=pe.x,le.y+=pe.y,le.z+=pe.z,le.normalize(),N.push(le.x,le.y,le.z),pe.copy(me)}for(let Fe=0;Fe<=n;Fe++){const Re=r+Fe*Z*a,De=Math.sin(Re),Ve=Math.cos(Re);for(let ct=0;ct<=e.length-1;ct++){ne.x=e[ct].x*De,ne.y=e[ct].y,ne.z=e[ct].x*Ve,p.push(ne.x,ne.y,ne.z),re.x=Fe/n,re.y=ct/(e.length-1),A.push(re.x,re.y);const bt=N[3*ct+0]*De,Ne=N[3*ct+1],dt=N[3*ct+0]*Ve;H.push(bt,Ne,dt)}}for(let Fe=0;Fe<n;Fe++)for(let Re=0;Re<e.length-1;Re++){const De=Re+Fe*e.length,Ve=De,ct=De+e.length,bt=De+e.length+1,Ne=De+1;c.push(Ve,ct,Ne),c.push(bt,Ne,ct)}this.setIndex(c),this.setAttribute("position",new Yi(p,3)),this.setAttribute("uv",new Yi(A,2)),this.setAttribute("normal",new Yi(H,3))}static fromJSON(e){return new _r(e.points,e.segments,e.phiStart,e.phiLength)}}class As extends _r{constructor(e=1,n=1,r=4,a=8){const c=new Ri;c.absarc(0,-n/2,e,Math.PI*1.5,0),c.absarc(0,n/2,e,0,Math.PI*.5),super(c.getPoints(r),a),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:r,radialSegments:a}}static fromJSON(e){return new As(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ct extends Or{constructor(e=1,n=8,r=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:a},n=Math.max(3,n);const c=[],p=[],A=[],N=[],H=new nt,Z=new On;p.push(0,0,0),A.push(0,0,1),N.push(.5,.5);for(let ne=0,re=3;ne<=n;ne++,re+=3){const le=r+ne/n*a;H.x=e*Math.cos(le),H.y=e*Math.sin(le),p.push(H.x,H.y,H.z),A.push(0,0,1),Z.x=(p[re]/e+1)/2,Z.y=(p[re+1]/e+1)/2,N.push(Z.x,Z.y)}for(let ne=1;ne<=n;ne++)c.push(ne,ne+1,0);this.setIndex(c),this.setAttribute("position",new Yi(p,3)),this.setAttribute("normal",new Yi(A,3)),this.setAttribute("uv",new Yi(N,2))}static fromJSON(e){return new Ct(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Mr extends Or{constructor(e=1,n=1,r=1,a=8,c=1,p=!1,A=0,N=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:a,heightSegments:c,openEnded:p,thetaStart:A,thetaLength:N};const H=this;a=Math.floor(a),c=Math.floor(c);const Z=[],ne=[],re=[],le=[];let me=0;const pe=[],de=r/2;let Ce=0;Fe(),p===!1&&(e>0&&Re(!0),n>0&&Re(!1)),this.setIndex(Z),this.setAttribute("position",new Yi(ne,3)),this.setAttribute("normal",new Yi(re,3)),this.setAttribute("uv",new Yi(le,2));function Fe(){const De=new nt,Ve=new nt;let ct=0;const bt=(n-e)/r;for(let Ne=0;Ne<=c;Ne++){const dt=[],vt=Ne/c,Ut=vt*(n-e)+e;for(let hn=0;hn<=a;hn++){const Kt=hn/a,Dt=Kt*N+A,sn=Math.sin(Dt),kn=Math.cos(Dt);Ve.x=Ut*sn,Ve.y=-vt*r+de,Ve.z=Ut*kn,ne.push(Ve.x,Ve.y,Ve.z),De.set(sn,bt,kn).normalize(),re.push(De.x,De.y,De.z),le.push(Kt,1-vt),dt.push(me++)}pe.push(dt)}for(let Ne=0;Ne<a;Ne++)for(let dt=0;dt<c;dt++){const vt=pe[dt][Ne],Ut=pe[dt+1][Ne],hn=pe[dt+1][Ne+1],Kt=pe[dt][Ne+1];Z.push(vt,Ut,Kt),Z.push(Ut,hn,Kt),ct+=6}H.addGroup(Ce,ct,0),Ce+=ct}function Re(De){const Ve=me,ct=new On,bt=new nt;let Ne=0;const dt=De===!0?e:n,vt=De===!0?1:-1;for(let hn=1;hn<=a;hn++)ne.push(0,de*vt,0),re.push(0,vt,0),le.push(.5,.5),me++;const Ut=me;for(let hn=0;hn<=a;hn++){const Dt=hn/a*N+A,sn=Math.cos(Dt),kn=Math.sin(Dt);bt.x=dt*kn,bt.y=de*vt,bt.z=dt*sn,ne.push(bt.x,bt.y,bt.z),re.push(0,vt,0),ct.x=sn*.5+.5,ct.y=kn*.5*vt+.5,le.push(ct.x,ct.y),me++}for(let hn=0;hn<a;hn++){const Kt=Ve+hn,Dt=Ut+hn;De===!0?Z.push(Dt,Dt+1,Kt):Z.push(Dt+1,Dt,Kt),Ne+=3}H.addGroup(Ce,Ne,De===!0?1:2),Ce+=Ne}}static fromJSON(e){return new Mr(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class is extends Mr{constructor(e=1,n=1,r=8,a=1,c=!1,p=0,A=Math.PI*2){super(0,e,n,r,a,c,p,A),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:a,openEnded:c,thetaStart:p,thetaLength:A}}static fromJSON(e){return new is(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Tr extends Or{constructor(e=[],n=[],r=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:a};const c=[],p=[];A(a),H(r),Z(),this.setAttribute("position",new Yi(c,3)),this.setAttribute("normal",new Yi(c.slice(),3)),this.setAttribute("uv",new Yi(p,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function A(Fe){const Re=new nt,De=new nt,Ve=new nt;for(let ct=0;ct<n.length;ct+=3)le(n[ct+0],Re),le(n[ct+1],De),le(n[ct+2],Ve),N(Re,De,Ve,Fe)}function N(Fe,Re,De,Ve){const ct=Ve+1,bt=[];for(let Ne=0;Ne<=ct;Ne++){bt[Ne]=[];const dt=Fe.clone().lerp(De,Ne/ct),vt=Re.clone().lerp(De,Ne/ct),Ut=ct-Ne;for(let hn=0;hn<=Ut;hn++)hn===0&&Ne===ct?bt[Ne][hn]=dt:bt[Ne][hn]=dt.clone().lerp(vt,hn/Ut)}for(let Ne=0;Ne<ct;Ne++)for(let dt=0;dt<2*(ct-Ne)-1;dt++){const vt=Math.floor(dt/2);dt%2===0?(re(bt[Ne][vt+1]),re(bt[Ne+1][vt]),re(bt[Ne][vt])):(re(bt[Ne][vt+1]),re(bt[Ne+1][vt+1]),re(bt[Ne+1][vt]))}}function H(Fe){const Re=new nt;for(let De=0;De<c.length;De+=3)Re.x=c[De+0],Re.y=c[De+1],Re.z=c[De+2],Re.normalize().multiplyScalar(Fe),c[De+0]=Re.x,c[De+1]=Re.y,c[De+2]=Re.z}function Z(){const Fe=new nt;for(let Re=0;Re<c.length;Re+=3){Fe.x=c[Re+0],Fe.y=c[Re+1],Fe.z=c[Re+2];const De=de(Fe)/2/Math.PI+.5,Ve=Ce(Fe)/Math.PI+.5;p.push(De,1-Ve)}me(),ne()}function ne(){for(let Fe=0;Fe<p.length;Fe+=6){const Re=p[Fe+0],De=p[Fe+2],Ve=p[Fe+4],ct=Math.max(Re,De,Ve),bt=Math.min(Re,De,Ve);ct>.9&&bt<.1&&(Re<.2&&(p[Fe+0]+=1),De<.2&&(p[Fe+2]+=1),Ve<.2&&(p[Fe+4]+=1))}}function re(Fe){c.push(Fe.x,Fe.y,Fe.z)}function le(Fe,Re){const De=Fe*3;Re.x=e[De+0],Re.y=e[De+1],Re.z=e[De+2]}function me(){const Fe=new nt,Re=new nt,De=new nt,Ve=new nt,ct=new On,bt=new On,Ne=new On;for(let dt=0,vt=0;dt<c.length;dt+=9,vt+=6){Fe.set(c[dt+0],c[dt+1],c[dt+2]),Re.set(c[dt+3],c[dt+4],c[dt+5]),De.set(c[dt+6],c[dt+7],c[dt+8]),ct.set(p[vt+0],p[vt+1]),bt.set(p[vt+2],p[vt+3]),Ne.set(p[vt+4],p[vt+5]),Ve.copy(Fe).add(Re).add(De).divideScalar(3);const Ut=de(Ve);pe(ct,vt+0,Fe,Ut),pe(bt,vt+2,Re,Ut),pe(Ne,vt+4,De,Ut)}}function pe(Fe,Re,De,Ve){Ve<0&&Fe.x===1&&(p[Re]=Fe.x-1),De.x===0&&De.z===0&&(p[Re]=Ve/2/Math.PI+.5)}function de(Fe){return Math.atan2(Fe.z,-Fe.x)}function Ce(Fe){return Math.atan2(-Fe.y,Math.sqrt(Fe.x*Fe.x+Fe.z*Fe.z))}}static fromJSON(e){return new Tr(e.vertices,e.indices,e.radius,e.details)}}class eo extends Tr{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,a=1/r,c=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-r,0,-a,r,0,a,-r,0,a,r,-a,-r,0,-a,r,0,a,-r,0,a,r,0,-r,0,-a,r,0,-a,-r,0,a,r,0,a],p=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(c,p,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new eo(e.radius,e.detail)}}const vs=new nt,Lo=new nt,_l=new nt,wl=new Fa;class Zp extends Or{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const a=Math.pow(10,4),c=Math.cos(al*n),p=e.getIndex(),A=e.getAttribute("position"),N=p?p.count:A.count,H=[0,0,0],Z=["a","b","c"],ne=new Array(3),re={},le=[];for(let me=0;me<N;me+=3){p?(H[0]=p.getX(me),H[1]=p.getX(me+1),H[2]=p.getX(me+2)):(H[0]=me,H[1]=me+1,H[2]=me+2);const{a:pe,b:de,c:Ce}=wl;if(pe.fromBufferAttribute(A,H[0]),de.fromBufferAttribute(A,H[1]),Ce.fromBufferAttribute(A,H[2]),wl.getNormal(_l),ne[0]=`${Math.round(pe.x*a)},${Math.round(pe.y*a)},${Math.round(pe.z*a)}`,ne[1]=`${Math.round(de.x*a)},${Math.round(de.y*a)},${Math.round(de.z*a)}`,ne[2]=`${Math.round(Ce.x*a)},${Math.round(Ce.y*a)},${Math.round(Ce.z*a)}`,!(ne[0]===ne[1]||ne[1]===ne[2]||ne[2]===ne[0]))for(let Fe=0;Fe<3;Fe++){const Re=(Fe+1)%3,De=ne[Fe],Ve=ne[Re],ct=wl[Z[Fe]],bt=wl[Z[Re]],Ne=`${De}_${Ve}`,dt=`${Ve}_${De}`;dt in re&&re[dt]?(_l.dot(re[dt].normal)<=c&&(le.push(ct.x,ct.y,ct.z),le.push(bt.x,bt.y,bt.z)),re[dt]=null):Ne in re||(re[Ne]={index0:H[Fe],index1:H[Re],normal:_l.clone()})}}for(const me in re)if(re[me]){const{index0:pe,index1:de}=re[me];vs.fromBufferAttribute(A,pe),Lo.fromBufferAttribute(A,de),le.push(vs.x,vs.y,vs.z),le.push(Lo.x,Lo.y,Lo.z)}this.setAttribute("position",new Yi(le,3))}}}class el extends Ri{constructor(e){super(e),this.uuid=Co(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,a=this.holes.length;r<a;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const a=e.holes[n];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const a=this.holes[n];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const a=e.holes[n];this.holes.push(new Ri().fromJSON(a))}return this}}const Hu={triangulate:function(x,e,n=2){const r=e&&e.length,a=r?e[0]*n:x.length;let c=$p(x,0,a,n,!0);const p=[];if(!c||c.next===c.prev)return p;let A,N,H,Z,ne,re,le;if(r&&(c=fA(x,e,c,n)),x.length>80*n){A=H=x[0],N=Z=x[1];for(let me=n;me<a;me+=n)ne=x[me],re=x[me+1],ne<A&&(A=ne),re<N&&(N=re),ne>H&&(H=ne),re>Z&&(Z=re);le=Math.max(H-A,Z-N),le=le!==0?32767/le:0}return $c(c,p,n,A,N,le,0),p}};function $p(x,e,n,r,a){let c,p;if(a===nr(x,e,n,r)>0)for(c=e;c<n;c+=r)p=wr(c,x[c],x[c+1],p);else for(c=n-r;c>=e;c-=r)p=wr(c,x[c],x[c+1],p);return p&&En(p,p.next)&&(rr(p),p=p.next),p}function ql(x,e){if(!x)return x;e||(e=x);let n=x,r;do if(r=!1,!n.steiner&&(En(n,n.next)||It(n.prev,n,n.next)===0)){if(rr(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function $c(x,e,n,r,a,c,p){if(!x)return;!p&&c&&Ng(x,r,a,c);let A=x,N,H;for(;x.prev!==x.next;){if(N=x.prev,H=x.next,c?Cl(x,r,a,c):Mc(x)){e.push(N.i/n|0),e.push(x.i/n|0),e.push(H.i/n|0),rr(x),x=H.next,A=H.next;continue}if(x=H,x===A){p?p===1?(x=eu(ql(x),e,n),$c(x,e,n,r,a,c,2)):p===2&&dA(x,e,n,r,a,c):$c(ql(x),e,n,r,a,c,1);break}}}function Mc(x){const e=x.prev,n=x,r=x.next;if(It(e,n,r)>=0)return!1;const a=e.x,c=n.x,p=r.x,A=e.y,N=n.y,H=r.y,Z=a<c?a<p?a:p:c<p?c:p,ne=A<N?A<H?A:H:N<H?N:H,re=a>c?a>p?a:p:c>p?c:p,le=A>N?A>H?A:H:N>H?N:H;let me=r.next;for(;me!==e;){if(me.x>=Z&&me.x<=re&&me.y>=ne&&me.y<=le&&Et(a,A,c,N,p,H,me.x,me.y)&&It(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function Cl(x,e,n,r){const a=x.prev,c=x,p=x.next;if(It(a,c,p)>=0)return!1;const A=a.x,N=c.x,H=p.x,Z=a.y,ne=c.y,re=p.y,le=A<N?A<H?A:H:N<H?N:H,me=Z<ne?Z<re?Z:re:ne<re?ne:re,pe=A>N?A>H?A:H:N>H?N:H,de=Z>ne?Z>re?Z:re:ne>re?ne:re,Ce=ve(le,me,e,n,r),Fe=ve(pe,de,e,n,r);let Re=x.prevZ,De=x.nextZ;for(;Re&&Re.z>=Ce&&De&&De.z<=Fe;){if(Re.x>=le&&Re.x<=pe&&Re.y>=me&&Re.y<=de&&Re!==a&&Re!==p&&Et(A,Z,N,ne,H,re,Re.x,Re.y)&&It(Re.prev,Re,Re.next)>=0||(Re=Re.prevZ,De.x>=le&&De.x<=pe&&De.y>=me&&De.y<=de&&De!==a&&De!==p&&Et(A,Z,N,ne,H,re,De.x,De.y)&&It(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;Re&&Re.z>=Ce;){if(Re.x>=le&&Re.x<=pe&&Re.y>=me&&Re.y<=de&&Re!==a&&Re!==p&&Et(A,Z,N,ne,H,re,Re.x,Re.y)&&It(Re.prev,Re,Re.next)>=0)return!1;Re=Re.prevZ}for(;De&&De.z<=Fe;){if(De.x>=le&&De.x<=pe&&De.y>=me&&De.y<=de&&De!==a&&De!==p&&Et(A,Z,N,ne,H,re,De.x,De.y)&&It(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function eu(x,e,n){let r=x;do{const a=r.prev,c=r.next.next;!En(a,c)&&Kn(a,r,r.next,c)&&ai(a,c)&&ai(c,a)&&(e.push(a.i/n|0),e.push(r.i/n|0),e.push(c.i/n|0),rr(r),rr(r.next),r=x=c),r=r.next}while(r!==x);return ql(r)}function dA(x,e,n,r,a,c){let p=x;do{let A=p.next.next;for(;A!==p.prev;){if(p.i!==A.i&&Ot(p,A)){let N=tr(p,A);p=ql(p,p.next),N=ql(N,N.next),$c(p,e,n,r,a,c,0),$c(N,e,n,r,a,c,0);return}A=A.next}p=p.next}while(p!==x)}function fA(x,e,n,r){const a=[];let c,p,A,N,H;for(c=0,p=e.length;c<p;c++)A=e[c]*r,N=c<p-1?e[c+1]*r:x.length,H=$p(x,A,N,r,!1),H===H.next&&(H.steiner=!0),a.push(Rt(H));for(a.sort(pA),c=0;c<a.length;c++)n=Ml(a[c],n);return n}function pA(x,e){return x.x-e.x}function Ml(x,e){const n=Ma(x,e);if(!n)return e;const r=tr(n,x);return ql(r,r.next),ql(n,n.next)}function Ma(x,e){let n=e,r=-1/0,a;const c=x.x,p=x.y;do{if(p<=n.y&&p>=n.next.y&&n.next.y!==n.y){const re=n.x+(p-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(re<=c&&re>r&&(r=re,a=n.x<n.next.x?n:n.next,re===c))return a}n=n.next}while(n!==e);if(!a)return null;const A=a,N=a.x,H=a.y;let Z=1/0,ne;n=a;do c>=n.x&&n.x>=N&&c!==n.x&&Et(p<H?c:r,p,N,H,p<H?r:c,p,n.x,n.y)&&(ne=Math.abs(p-n.y)/(c-n.x),ai(n,x)&&(ne<Z||ne===Z&&(n.x>a.x||n.x===a.x&&Tl(a,n)))&&(a=n,Z=ne)),n=n.next;while(n!==A);return a}function Tl(x,e){return It(x.prev,x,e.prev)<0&&It(e.next,x,x.next)<0}function Ng(x,e,n,r){let a=x;do a.z===0&&(a.z=ve(a.x,a.y,e,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==x);a.prevZ.nextZ=null,a.prevZ=null,zu(a)}function zu(x){let e,n,r,a,c,p,A,N,H=1;do{for(n=x,x=null,c=null,p=0;n;){for(p++,r=n,A=0,e=0;e<H&&(A++,r=r.nextZ,!!r);e++);for(N=H;A>0||N>0&&r;)A!==0&&(N===0||!r||n.z<=r.z)?(a=n,n=n.nextZ,A--):(a=r,r=r.nextZ,N--),c?c.nextZ=a:x=a,a.prevZ=c,c=a;n=r}c.nextZ=null,H*=2}while(p>1);return x}function ve(x,e,n,r,a){return x=(x-n)*a|0,e=(e-r)*a|0,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,x|e<<1}function Rt(x){let e=x,n=x;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==x);return n}function Et(x,e,n,r,a,c,p,A){return(a-p)*(e-A)>=(x-p)*(c-A)&&(x-p)*(r-A)>=(n-p)*(e-A)&&(n-p)*(c-A)>=(a-p)*(r-A)}function Ot(x,e){return x.next.i!==e.i&&x.prev.i!==e.i&&!Vn(x,e)&&(ai(x,e)&&ai(e,x)&&ci(x,e)&&(It(x.prev,x,e.prev)||It(x,e.prev,e))||En(x,e)&&It(x.prev,x,x.next)>0&&It(e.prev,e,e.next)>0)}function It(x,e,n){return(e.y-x.y)*(n.x-e.x)-(e.x-x.x)*(n.y-e.y)}function En(x,e){return x.x===e.x&&x.y===e.y}function Kn(x,e,n,r){const a=Jn(It(x,e,n)),c=Jn(It(x,e,r)),p=Jn(It(n,r,x)),A=Jn(It(n,r,e));return!!(a!==c&&p!==A||a===0&&ti(x,n,e)||c===0&&ti(x,r,e)||p===0&&ti(n,x,r)||A===0&&ti(n,e,r))}function ti(x,e,n){return e.x<=Math.max(x.x,n.x)&&e.x>=Math.min(x.x,n.x)&&e.y<=Math.max(x.y,n.y)&&e.y>=Math.min(x.y,n.y)}function Jn(x){return x>0?1:x<0?-1:0}function Vn(x,e){let n=x;do{if(n.i!==x.i&&n.next.i!==x.i&&n.i!==e.i&&n.next.i!==e.i&&Kn(n,n.next,x,e))return!0;n=n.next}while(n!==x);return!1}function ai(x,e){return It(x.prev,x,x.next)<0?It(x,e,x.next)>=0&&It(x,x.prev,e)>=0:It(x,e,x.prev)<0||It(x,x.next,e)<0}function ci(x,e){let n=x,r=!1;const a=(x.x+e.x)/2,c=(x.y+e.y)/2;do n.y>c!=n.next.y>c&&n.next.y!==n.y&&a<(n.next.x-n.x)*(c-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==x);return r}function tr(x,e){const n=new Ni(x.i,x.x,x.y),r=new Ni(e.i,e.x,e.y),a=x.next,c=e.prev;return x.next=e,e.prev=x,n.next=a,a.prev=n,r.next=n,n.prev=r,c.next=r,r.prev=c,r}function wr(x,e,n,r){const a=new Ni(x,e,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function rr(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function Ni(x,e,n){this.i=x,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nr(x,e,n,r){let a=0;for(let c=e,p=n-r;c<n;c+=r)a+=(x[p]-x[c])*(x[c+1]+x[p+1]),p=c;return a}class Bi{static area(e){const n=e.length;let r=0;for(let a=n-1,c=0;c<n;a=c++)r+=e[a].x*e[c].y-e[c].x*e[a].y;return r*.5}static isClockWise(e){return Bi.area(e)<0}static triangulateShape(e,n){const r=[],a=[],c=[];sr(e),Ur(r,e);let p=e.length;n.forEach(sr);for(let N=0;N<n.length;N++)a.push(p),p+=n[N].length,Ur(r,n[N]);const A=Hu.triangulate(r,a);for(let N=0;N<A.length;N+=3)c.push(A.slice(N,N+3));return c}}function sr(x){const e=x.length;e>2&&x[e-1].equals(x[0])&&x.pop()}function Ur(x,e){for(let n=0;n<e.length;n++)x.push(e[n].x),x.push(e[n].y)}class $r extends Or{constructor(e=new el([new On(.5,.5),new On(-.5,.5),new On(-.5,-.5),new On(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,a=[],c=[];for(let A=0,N=e.length;A<N;A++){const H=e[A];p(H)}this.setAttribute("position",new Yi(a,3)),this.setAttribute("uv",new Yi(c,2)),this.computeVertexNormals();function p(A){const N=[],H=n.curveSegments!==void 0?n.curveSegments:12,Z=n.steps!==void 0?n.steps:1,ne=n.depth!==void 0?n.depth:1;let re=n.bevelEnabled!==void 0?n.bevelEnabled:!0,le=n.bevelThickness!==void 0?n.bevelThickness:.2,me=n.bevelSize!==void 0?n.bevelSize:le-.1,pe=n.bevelOffset!==void 0?n.bevelOffset:0,de=n.bevelSegments!==void 0?n.bevelSegments:3;const Ce=n.extrudePath,Fe=n.UVGenerator!==void 0?n.UVGenerator:Eo;let Re,De=!1,Ve,ct,bt,Ne;Ce&&(Re=Ce.getSpacedPoints(Z),De=!0,re=!1,Ve=Ce.computeFrenetFrames(Z,!1),ct=new nt,bt=new nt,Ne=new nt),re||(de=0,le=0,me=0,pe=0);const dt=A.extractPoints(H);let vt=dt.shape;const Ut=dt.holes;if(!Bi.isClockWise(vt)){vt=vt.reverse();for(let Hn=0,Rn=Ut.length;Hn<Rn;Hn++){const yi=Ut[Hn];Bi.isClockWise(yi)&&(Ut[Hn]=yi.reverse())}}const Kt=Bi.triangulateShape(vt,Ut),Dt=vt;for(let Hn=0,Rn=Ut.length;Hn<Rn;Hn++){const yi=Ut[Hn];vt=vt.concat(yi)}function sn(Hn,Rn,yi){return Rn||console.error("THREE.ExtrudeGeometry: vec does not exist"),Rn.clone().multiplyScalar(yi).add(Hn)}const kn=vt.length,Zn=Kt.length;function Ln(Hn,Rn,yi){let cr,Di,Vr;const Sr=Hn.x-Rn.x,yr=Hn.y-Rn.y,Ys=yi.x-Hn.x,zs=yi.y-Hn.y,ft=Sr*Sr+yr*yr,tt=Sr*zs-yr*Ys;if(Math.abs(tt)>Number.EPSILON){const fn=Math.sqrt(ft),hi=Math.sqrt(Ys*Ys+zs*zs),Ai=Rn.x-yr/fn,ki=Rn.y+Sr/fn,Gr=yi.x-zs/hi,Hi=yi.y+Ys/hi,Bn=((Gr-Ai)*zs-(Hi-ki)*Ys)/(Sr*zs-yr*Ys);cr=Ai+Sr*Bn-Hn.x,Di=ki+yr*Bn-Hn.y;const xr=cr*cr+Di*Di;if(xr<=2)return new On(cr,Di);Vr=Math.sqrt(xr/2)}else{let fn=!1;Sr>Number.EPSILON?Ys>Number.EPSILON&&(fn=!0):Sr<-Number.EPSILON?Ys<-Number.EPSILON&&(fn=!0):Math.sign(yr)===Math.sign(zs)&&(fn=!0),fn?(cr=-yr,Di=Sr,Vr=Math.sqrt(ft)):(cr=Sr,Di=yr,Vr=Math.sqrt(ft/2))}return new On(cr/Vr,Di/Vr)}const ui=[];for(let Hn=0,Rn=Dt.length,yi=Rn-1,cr=Hn+1;Hn<Rn;Hn++,yi++,cr++)yi===Rn&&(yi=0),cr===Rn&&(cr=0),ui[Hn]=Ln(Dt[Hn],Dt[yi],Dt[cr]);const si=[];let Qi,Li=ui.concat();for(let Hn=0,Rn=Ut.length;Hn<Rn;Hn++){const yi=Ut[Hn];Qi=[];for(let cr=0,Di=yi.length,Vr=Di-1,Sr=cr+1;cr<Di;cr++,Vr++,Sr++)Vr===Di&&(Vr=0),Sr===Di&&(Sr=0),Qi[cr]=Ln(yi[cr],yi[Vr],yi[Sr]);si.push(Qi),Li=Li.concat(Qi)}for(let Hn=0;Hn<de;Hn++){const Rn=Hn/de,yi=le*Math.cos(Rn*Math.PI/2),cr=me*Math.sin(Rn*Math.PI/2)+pe;for(let Di=0,Vr=Dt.length;Di<Vr;Di++){const Sr=sn(Dt[Di],ui[Di],cr);Wi(Sr.x,Sr.y,-yi)}for(let Di=0,Vr=Ut.length;Di<Vr;Di++){const Sr=Ut[Di];Qi=si[Di];for(let yr=0,Ys=Sr.length;yr<Ys;yr++){const zs=sn(Sr[yr],Qi[yr],cr);Wi(zs.x,zs.y,-yi)}}}const gn=me+pe;for(let Hn=0;Hn<kn;Hn++){const Rn=re?sn(vt[Hn],Li[Hn],gn):vt[Hn];De?(bt.copy(Ve.normals[0]).multiplyScalar(Rn.x),ct.copy(Ve.binormals[0]).multiplyScalar(Rn.y),Ne.copy(Re[0]).add(bt).add(ct),Wi(Ne.x,Ne.y,Ne.z)):Wi(Rn.x,Rn.y,0)}for(let Hn=1;Hn<=Z;Hn++)for(let Rn=0;Rn<kn;Rn++){const yi=re?sn(vt[Rn],Li[Rn],gn):vt[Rn];De?(bt.copy(Ve.normals[Hn]).multiplyScalar(yi.x),ct.copy(Ve.binormals[Hn]).multiplyScalar(yi.y),Ne.copy(Re[Hn]).add(bt).add(ct),Wi(Ne.x,Ne.y,Ne.z)):Wi(yi.x,yi.y,ne/Z*Hn)}for(let Hn=de-1;Hn>=0;Hn--){const Rn=Hn/de,yi=le*Math.cos(Rn*Math.PI/2),cr=me*Math.sin(Rn*Math.PI/2)+pe;for(let Di=0,Vr=Dt.length;Di<Vr;Di++){const Sr=sn(Dt[Di],ui[Di],cr);Wi(Sr.x,Sr.y,ne+yi)}for(let Di=0,Vr=Ut.length;Di<Vr;Di++){const Sr=Ut[Di];Qi=si[Di];for(let yr=0,Ys=Sr.length;yr<Ys;yr++){const zs=sn(Sr[yr],Qi[yr],cr);De?Wi(zs.x,zs.y+Re[Z-1].y,Re[Z-1].x+yi):Wi(zs.x,zs.y,ne+yi)}}}$n(),_i();function $n(){const Hn=a.length/3;if(re){let Rn=0,yi=kn*Rn;for(let cr=0;cr<Zn;cr++){const Di=Kt[cr];wi(Di[2]+yi,Di[1]+yi,Di[0]+yi)}Rn=Z+de*2,yi=kn*Rn;for(let cr=0;cr<Zn;cr++){const Di=Kt[cr];wi(Di[0]+yi,Di[1]+yi,Di[2]+yi)}}else{for(let Rn=0;Rn<Zn;Rn++){const yi=Kt[Rn];wi(yi[2],yi[1],yi[0])}for(let Rn=0;Rn<Zn;Rn++){const yi=Kt[Rn];wi(yi[0]+kn*Z,yi[1]+kn*Z,yi[2]+kn*Z)}}r.addGroup(Hn,a.length/3-Hn,0)}function _i(){const Hn=a.length/3;let Rn=0;ln(Dt,Rn),Rn+=Dt.length;for(let yi=0,cr=Ut.length;yi<cr;yi++){const Di=Ut[yi];ln(Di,Rn),Rn+=Di.length}r.addGroup(Hn,a.length/3-Hn,1)}function ln(Hn,Rn){let yi=Hn.length;for(;--yi>=0;){const cr=yi;let Di=yi-1;Di<0&&(Di=Hn.length-1);for(let Vr=0,Sr=Z+de*2;Vr<Sr;Vr++){const yr=kn*Vr,Ys=kn*(Vr+1),zs=Rn+cr+yr,ft=Rn+Di+yr,tt=Rn+Di+Ys,fn=Rn+cr+Ys;Ar(zs,ft,tt,fn)}}}function Wi(Hn,Rn,yi){N.push(Hn),N.push(Rn),N.push(yi)}function wi(Hn,Rn,yi){mi(Hn),mi(Rn),mi(yi);const cr=a.length/3,Di=Fe.generateTopUV(r,a,cr-3,cr-2,cr-1);rs(Di[0]),rs(Di[1]),rs(Di[2])}function Ar(Hn,Rn,yi,cr){mi(Hn),mi(Rn),mi(cr),mi(Rn),mi(yi),mi(cr);const Di=a.length/3,Vr=Fe.generateSideWallUV(r,a,Di-6,Di-3,Di-2,Di-1);rs(Vr[0]),rs(Vr[1]),rs(Vr[3]),rs(Vr[1]),rs(Vr[2]),rs(Vr[3])}function mi(Hn){a.push(N[Hn*3+0]),a.push(N[Hn*3+1]),a.push(N[Hn*3+2])}function rs(Hn){c.push(Hn.x),c.push(Hn.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return tu(n,r,e)}static fromJSON(e,n){const r=[];for(let c=0,p=e.shapes.length;c<p;c++){const A=n[e.shapes[c]];r.push(A)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new vi[a.type]().fromJSON(a)),new $r(r,e.options)}}const Eo={generateTopUV:function(x,e,n,r,a){const c=e[n*3],p=e[n*3+1],A=e[r*3],N=e[r*3+1],H=e[a*3],Z=e[a*3+1];return[new On(c,p),new On(A,N),new On(H,Z)]},generateSideWallUV:function(x,e,n,r,a,c){const p=e[n*3],A=e[n*3+1],N=e[n*3+2],H=e[r*3],Z=e[r*3+1],ne=e[r*3+2],re=e[a*3],le=e[a*3+1],me=e[a*3+2],pe=e[c*3],de=e[c*3+1],Ce=e[c*3+2];return Math.abs(A-Z)<Math.abs(p-H)?[new On(p,1-N),new On(H,1-ne),new On(re,1-me),new On(pe,1-Ce)]:[new On(A,1-N),new On(Z,1-ne),new On(le,1-me),new On(de,1-Ce)]}};function tu(x,e,n){if(n.shapes=[],Array.isArray(x))for(let r=0,a=x.length;r<a;r++){const c=x[r];n.shapes.push(c.uuid)}else n.shapes.push(x.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class nu extends Tr{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,a=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],c=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,c,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new nu(e.radius,e.detail)}}class Jl extends Tr{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,a,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Jl(e.radius,e.detail)}}class iu extends Or{constructor(e=.5,n=1,r=8,a=1,c=0,p=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:a,thetaStart:c,thetaLength:p},r=Math.max(3,r),a=Math.max(1,a);const A=[],N=[],H=[],Z=[];let ne=e;const re=(n-e)/a,le=new nt,me=new On;for(let pe=0;pe<=a;pe++){for(let de=0;de<=r;de++){const Ce=c+de/r*p;le.x=ne*Math.cos(Ce),le.y=ne*Math.sin(Ce),N.push(le.x,le.y,le.z),H.push(0,0,1),me.x=(le.x/n+1)/2,me.y=(le.y/n+1)/2,Z.push(me.x,me.y)}ne+=re}for(let pe=0;pe<a;pe++){const de=pe*(r+1);for(let Ce=0;Ce<r;Ce++){const Fe=Ce+de,Re=Fe,De=Fe+r+1,Ve=Fe+r+2,ct=Fe+1;A.push(Re,De,ct),A.push(De,Ve,ct)}}this.setIndex(A),this.setAttribute("position",new Yi(N,3)),this.setAttribute("normal",new Yi(H,3)),this.setAttribute("uv",new Yi(Z,2))}static fromJSON(e){return new iu(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ru extends Or{constructor(e=new el([new On(0,.5),new On(-.5,-.5),new On(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],a=[],c=[],p=[];let A=0,N=0;if(Array.isArray(e)===!1)H(e);else for(let Z=0;Z<e.length;Z++)H(e[Z]),this.addGroup(A,N,Z),A+=N,N=0;this.setIndex(r),this.setAttribute("position",new Yi(a,3)),this.setAttribute("normal",new Yi(c,3)),this.setAttribute("uv",new Yi(p,2));function H(Z){const ne=a.length/3,re=Z.extractPoints(n);let le=re.shape;const me=re.holes;Bi.isClockWise(le)===!1&&(le=le.reverse());for(let de=0,Ce=me.length;de<Ce;de++){const Fe=me[de];Bi.isClockWise(Fe)===!0&&(me[de]=Fe.reverse())}const pe=Bi.triangulateShape(le,me);for(let de=0,Ce=me.length;de<Ce;de++){const Fe=me[de];le=le.concat(Fe)}for(let de=0,Ce=le.length;de<Ce;de++){const Fe=le[de];a.push(Fe.x,Fe.y,0),c.push(0,0,1),p.push(Fe.x,Fe.y)}for(let de=0,Ce=pe.length;de<Ce;de++){const Fe=pe[de],Re=Fe[0]+ne,De=Fe[1]+ne,Ve=Fe[2]+ne;r.push(Re,De,Ve),N+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return em(n,e)}static fromJSON(e,n){const r=[];for(let a=0,c=e.shapes.length;a<c;a++){const p=n[e.shapes[a]];r.push(p)}return new ru(r,e.curveSegments)}}function em(x,e){if(e.shapes=[],Array.isArray(x))for(let n=0,r=x.length;n<r;n++){const a=x[n];e.shapes.push(a.uuid)}else e.shapes.push(x.uuid);return e}class su extends Or{constructor(e=1,n=32,r=16,a=0,c=Math.PI*2,p=0,A=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:a,phiLength:c,thetaStart:p,thetaLength:A},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const N=Math.min(p+A,Math.PI);let H=0;const Z=[],ne=new nt,re=new nt,le=[],me=[],pe=[],de=[];for(let Ce=0;Ce<=r;Ce++){const Fe=[],Re=Ce/r;let De=0;Ce==0&&p==0?De=.5/n:Ce==r&&N==Math.PI&&(De=-.5/n);for(let Ve=0;Ve<=n;Ve++){const ct=Ve/n;ne.x=-e*Math.cos(a+ct*c)*Math.sin(p+Re*A),ne.y=e*Math.cos(p+Re*A),ne.z=e*Math.sin(a+ct*c)*Math.sin(p+Re*A),me.push(ne.x,ne.y,ne.z),re.copy(ne).normalize(),pe.push(re.x,re.y,re.z),de.push(ct+De,1-Re),Fe.push(H++)}Z.push(Fe)}for(let Ce=0;Ce<r;Ce++)for(let Fe=0;Fe<n;Fe++){const Re=Z[Ce][Fe+1],De=Z[Ce][Fe],Ve=Z[Ce+1][Fe],ct=Z[Ce+1][Fe+1];(Ce!==0||p>0)&&le.push(Re,De,ct),(Ce!==r-1||N<Math.PI)&&le.push(De,Ve,ct)}this.setIndex(le),this.setAttribute("position",new Yi(me,3)),this.setAttribute("normal",new Yi(pe,3)),this.setAttribute("uv",new Yi(de,2))}static fromJSON(e){return new su(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Vu extends Tr{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,a,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Vu(e.radius,e.detail)}}class Qu extends Or{constructor(e=1,n=.4,r=8,a=6,c=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:a,arc:c},r=Math.floor(r),a=Math.floor(a);const p=[],A=[],N=[],H=[],Z=new nt,ne=new nt,re=new nt;for(let le=0;le<=r;le++)for(let me=0;me<=a;me++){const pe=me/a*c,de=le/r*Math.PI*2;ne.x=(e+n*Math.cos(de))*Math.cos(pe),ne.y=(e+n*Math.cos(de))*Math.sin(pe),ne.z=n*Math.sin(de),A.push(ne.x,ne.y,ne.z),Z.x=e*Math.cos(pe),Z.y=e*Math.sin(pe),re.subVectors(ne,Z).normalize(),N.push(re.x,re.y,re.z),H.push(me/a),H.push(le/r)}for(let le=1;le<=r;le++)for(let me=1;me<=a;me++){const pe=(a+1)*le+me-1,de=(a+1)*(le-1)+me-1,Ce=(a+1)*(le-1)+me,Fe=(a+1)*le+me;p.push(pe,de,Fe),p.push(de,Ce,Fe)}this.setIndex(p),this.setAttribute("position",new Yi(A,3)),this.setAttribute("normal",new Yi(N,3)),this.setAttribute("uv",new Yi(H,2))}static fromJSON(e){return new Qu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ju extends Or{constructor(e=1,n=.4,r=64,a=8,c=2,p=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:a,p:c,q:p},r=Math.floor(r),a=Math.floor(a);const A=[],N=[],H=[],Z=[],ne=new nt,re=new nt,le=new nt,me=new nt,pe=new nt,de=new nt,Ce=new nt;for(let Re=0;Re<=r;++Re){const De=Re/r*c*Math.PI*2;Fe(De,c,p,e,le),Fe(De+.01,c,p,e,me),de.subVectors(me,le),Ce.addVectors(me,le),pe.crossVectors(de,Ce),Ce.crossVectors(pe,de),pe.normalize(),Ce.normalize();for(let Ve=0;Ve<=a;++Ve){const ct=Ve/a*Math.PI*2,bt=-n*Math.cos(ct),Ne=n*Math.sin(ct);ne.x=le.x+(bt*Ce.x+Ne*pe.x),ne.y=le.y+(bt*Ce.y+Ne*pe.y),ne.z=le.z+(bt*Ce.z+Ne*pe.z),N.push(ne.x,ne.y,ne.z),re.subVectors(ne,le).normalize(),H.push(re.x,re.y,re.z),Z.push(Re/r),Z.push(Ve/a)}}for(let Re=1;Re<=r;Re++)for(let De=1;De<=a;De++){const Ve=(a+1)*(Re-1)+(De-1),ct=(a+1)*Re+(De-1),bt=(a+1)*Re+De,Ne=(a+1)*(Re-1)+De;A.push(Ve,ct,Ne),A.push(ct,bt,Ne)}this.setIndex(A),this.setAttribute("position",new Yi(N,3)),this.setAttribute("normal",new Yi(H,3)),this.setAttribute("uv",new Yi(Z,2));function Fe(Re,De,Ve,ct,bt){const Ne=Math.cos(Re),dt=Math.sin(Re),vt=Ve/De*Re,Ut=Math.cos(vt);bt.x=ct*(2+Ut)*.5*Ne,bt.y=ct*(2+Ut)*dt*.5,bt.z=ct*Math.sin(vt)*.5}}static fromJSON(e){return new ju(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Wu extends Or{constructor(e=new Sn(new nt(-1,-1,0),new nt(-1,1,0),new nt(1,1,0)),n=64,r=1,a=8,c=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:a,closed:c};const p=e.computeFrenetFrames(n,c);this.tangents=p.tangents,this.normals=p.normals,this.binormals=p.binormals;const A=new nt,N=new nt,H=new On;let Z=new nt;const ne=[],re=[],le=[],me=[];pe(),this.setIndex(me),this.setAttribute("position",new Yi(ne,3)),this.setAttribute("normal",new Yi(re,3)),this.setAttribute("uv",new Yi(le,2));function pe(){for(let Re=0;Re<n;Re++)de(Re);de(c===!1?n:0),Fe(),Ce()}function de(Re){Z=e.getPointAt(Re/n,Z);const De=p.normals[Re],Ve=p.binormals[Re];for(let ct=0;ct<=a;ct++){const bt=ct/a*Math.PI*2,Ne=Math.sin(bt),dt=-Math.cos(bt);N.x=dt*De.x+Ne*Ve.x,N.y=dt*De.y+Ne*Ve.y,N.z=dt*De.z+Ne*Ve.z,N.normalize(),re.push(N.x,N.y,N.z),A.x=Z.x+r*N.x,A.y=Z.y+r*N.y,A.z=Z.z+r*N.z,ne.push(A.x,A.y,A.z)}}function Ce(){for(let Re=1;Re<=n;Re++)for(let De=1;De<=a;De++){const Ve=(a+1)*(Re-1)+(De-1),ct=(a+1)*Re+(De-1),bt=(a+1)*Re+De,Ne=(a+1)*(Re-1)+De;me.push(Ve,ct,Ne),me.push(ct,bt,Ne)}}function Fe(){for(let Re=0;Re<=n;Re++)for(let De=0;De<=a;De++)H.x=Re/n,H.y=De/a,le.push(H.x,H.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Wu(new vi[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class mA extends Or{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,a=new nt,c=new nt;if(e.index!==null){const p=e.attributes.position,A=e.index;let N=e.groups;N.length===0&&(N=[{start:0,count:A.count,materialIndex:0}]);for(let H=0,Z=N.length;H<Z;++H){const ne=N[H],re=ne.start,le=ne.count;for(let me=re,pe=re+le;me<pe;me+=3)for(let de=0;de<3;de++){const Ce=A.getX(me+de),Fe=A.getX(me+(de+1)%3);a.fromBufferAttribute(p,Ce),c.fromBufferAttribute(p,Fe),tm(a,c,r)===!0&&(n.push(a.x,a.y,a.z),n.push(c.x,c.y,c.z))}}}else{const p=e.attributes.position;for(let A=0,N=p.count/3;A<N;A++)for(let H=0;H<3;H++){const Z=3*A+H,ne=3*A+(H+1)%3;a.fromBufferAttribute(p,Z),c.fromBufferAttribute(p,ne),tm(a,c,r)===!0&&(n.push(a.x,a.y,a.z),n.push(c.x,c.y,c.z))}}this.setAttribute("position",new Yi(n,3))}}}function tm(x,e,n){const r=`${x.x},${x.y},${x.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${x.x},${x.y},${x.z}`;return n.has(r)===!0||n.has(a)===!0?!1:(n.add(r),n.add(a),!0)}var lf=Object.freeze({__proto__:null,BoxGeometry:Za,CapsuleGeometry:As,CircleGeometry:Ct,ConeGeometry:is,CylinderGeometry:Mr,DodecahedronGeometry:eo,EdgesGeometry:Zp,ExtrudeGeometry:$r,IcosahedronGeometry:nu,LatheGeometry:_r,OctahedronGeometry:Jl,PlaneGeometry:_u,PolyhedronGeometry:Tr,RingGeometry:iu,ShapeGeometry:ru,SphereGeometry:su,TetrahedronGeometry:Vu,TorusGeometry:Qu,TorusKnotGeometry:ju,TubeGeometry:Wu,WireframeGeometry:mA});class cf extends Zo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Si(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class ou extends ea{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Qh extends Zo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Si(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nm extends Qh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new On(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ns(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Si(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Si(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Si(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class im extends Zo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Si(16777215),this.specular=new Si(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rm extends Zo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Si(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Ku extends Zo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class uf extends Zo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cn extends Zo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Si(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fs extends ga{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Br(x,e,n){return Fr(x)?new x.constructor(x.subarray(e,n!==void 0?n:x.length)):x.slice(e,n)}function Hs(x,e,n){return!x||!n&&x.constructor===e?x:typeof e.BYTES_PER_ELEMENT=="number"?new e(x):Array.prototype.slice.call(x)}function Fr(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}function Wo(x){function e(a,c){return x[a]-x[c]}const n=x.length,r=new Array(n);for(let a=0;a!==n;++a)r[a]=a;return r.sort(e),r}function Aa(x,e,n){const r=x.length,a=new x.constructor(r);for(let c=0,p=0;p!==r;++c){const A=n[c]*e;for(let N=0;N!==e;++N)a[p++]=x[A+N]}return a}function va(x,e,n,r){let a=1,c=x[0];for(;c!==void 0&&c[r]===void 0;)c=x[a++];if(c===void 0)return;let p=c[r];if(p!==void 0)if(Array.isArray(p))do p=c[r],p!==void 0&&(e.push(c.time),n.push.apply(n,p)),c=x[a++];while(c!==void 0);else if(p.toArray!==void 0)do p=c[r],p!==void 0&&(e.push(c.time),p.toArray(n,n.length)),c=x[a++];while(c!==void 0);else do p=c[r],p!==void 0&&(e.push(c.time),n.push(p)),c=x[a++];while(c!==void 0)}function hf(x,e,n,r,a=30){const c=x.clone();c.name=e;const p=[];for(let N=0;N<c.tracks.length;++N){const H=c.tracks[N],Z=H.getValueSize(),ne=[],re=[];for(let le=0;le<H.times.length;++le){const me=H.times[le]*a;if(!(me<n||me>=r)){ne.push(H.times[le]);for(let pe=0;pe<Z;++pe)re.push(H.values[le*Z+pe])}}ne.length!==0&&(H.times=Hs(ne,H.times.constructor),H.values=Hs(re,H.values.constructor),p.push(H))}c.tracks=p;let A=1/0;for(let N=0;N<c.tracks.length;++N)A>c.tracks[N].times[0]&&(A=c.tracks[N].times[0]);for(let N=0;N<c.tracks.length;++N)c.tracks[N].shift(-1*A);return c.resetDuration(),c}function Do(x,e=0,n=x,r=30){r<=0&&(r=30);const a=n.tracks.length,c=e/r;for(let p=0;p<a;++p){const A=n.tracks[p],N=A.ValueTypeName;if(N==="bool"||N==="string")continue;const H=x.tracks.find(function(Ce){return Ce.name===A.name&&Ce.ValueTypeName===N});if(H===void 0)continue;let Z=0;const ne=A.getValueSize();A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=ne/3);let re=0;const le=H.getValueSize();H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(re=le/3);const me=A.times.length-1;let pe;if(c<=A.times[0]){const Ce=Z,Fe=ne-Z;pe=Br(A.values,Ce,Fe)}else if(c>=A.times[me]){const Ce=me*ne+Z,Fe=Ce+ne-Z;pe=Br(A.values,Ce,Fe)}else{const Ce=A.createInterpolant(),Fe=Z,Re=ne-Z;Ce.evaluate(c),pe=Br(Ce.resultBuffer,Fe,Re)}N==="quaternion"&&new Mo().fromArray(pe).normalize().conjugate().toArray(pe);const de=H.times.length;for(let Ce=0;Ce<de;++Ce){const Fe=Ce*le+re;if(N==="quaternion")Mo.multiplyQuaternionsFlat(H.values,Fe,pe,0,H.values,Fe);else{const Re=le-re*2;for(let De=0;De<Re;++De)H.values[Fe+De]-=pe[De]}}}return x.blendMode=fr,x}var Xu=Object.freeze({__proto__:null,arraySlice:Br,convertArray:Hs,isTypedArray:Fr,getKeyframeOrder:Wo,sortedArray:Aa,flattenJSON:va,subclip:hf,makeClipAdditive:Do});class Sl{constructor(e,n,r,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,a=n[r],c=n[r-1];e:{t:{let p;n:{i:if(!(e<a)){for(let A=r+2;;){if(a===void 0){if(e<c)break i;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===A)break;if(c=a,a=n[++r],e<a)break t}p=n.length;break n}if(!(e>=c)){const A=n[1];e<A&&(r=2,c=A);for(let N=r-2;;){if(c===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===N)break;if(a=c,c=n[--r-1],e>=c)break t}p=r,r=0;break n}break e}for(;r<p;){const A=r+p>>>1;e<n[A]?p=A:r=A+1}if(a=n[r],c=n[r-1],c===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,c,a)}return this.interpolate_(r,c,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,a=this.valueSize,c=e*a;for(let p=0;p!==a;++p)n[p]=r[c+p];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class vy extends Sl{constructor(e,n,r,a){super(e,n,r,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Pn,endingEnd:Pn}}intervalChanged_(e,n,r){const a=this.parameterPositions;let c=e-2,p=e+1,A=a[c],N=a[p];if(A===void 0)switch(this.getSettings_().endingStart){case xi:c=e,A=2*n-r;break;case Ui:c=a.length-2,A=n+a[c]-a[c+1];break;default:c=e,A=r}if(N===void 0)switch(this.getSettings_().endingEnd){case xi:p=e,N=2*r-n;break;case Ui:p=1,N=r+a[1]-a[0];break;default:p=e-1,N=n}const H=(r-n)*.5,Z=this.valueSize;this._weightPrev=H/(n-A),this._weightNext=H/(N-r),this._offsetPrev=c*Z,this._offsetNext=p*Z}interpolate_(e,n,r,a){const c=this.resultBuffer,p=this.sampleValues,A=this.valueSize,N=e*A,H=N-A,Z=this._offsetPrev,ne=this._offsetNext,re=this._weightPrev,le=this._weightNext,me=(r-n)/(a-n),pe=me*me,de=pe*me,Ce=-re*de+2*re*pe-re*me,Fe=(1+re)*de+(-1.5-2*re)*pe+(-.5+re)*me+1,Re=(-1-le)*de+(1.5+le)*pe+.5*me,De=le*de-le*pe;for(let Ve=0;Ve!==A;++Ve)c[Ve]=Ce*p[Z+Ve]+Fe*p[H+Ve]+Re*p[N+Ve]+De*p[ne+Ve];return c}}class Jv extends Sl{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e,n,r,a){const c=this.resultBuffer,p=this.sampleValues,A=this.valueSize,N=e*A,H=N-A,Z=(r-n)/(a-n),ne=1-Z;for(let re=0;re!==A;++re)c[re]=p[H+re]*ne+p[N+re]*Z;return c}}class yy extends Sl{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Tc{constructor(e,n,r,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hs(n,this.TimeBufferType),this.values=Hs(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Hs(e.times,Array),values:Hs(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(r.interpolation=a)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new yy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new vy(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case xn:n=this.InterpolantFactoryMethodDiscrete;break;case Nt:n=this.InterpolantFactoryMethodLinear;break;case an:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xn;case this.InterpolantFactoryMethodLinear:return Nt;case this.InterpolantFactoryMethodSmooth:return an}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,a=n.length;r!==a;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,a=n.length;r!==a;++r)n[r]*=e}return this}trim(e,n){const r=this.times,a=r.length;let c=0,p=a-1;for(;c!==a&&r[c]<e;)++c;for(;p!==-1&&r[p]>n;)--p;if(++p,c!==0||p!==a){c>=p&&(p=Math.max(p,1),c=p-1);const A=this.getValueSize();this.times=Br(r,c,p),this.values=Br(this.values,c*A,p*A)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,a=this.values,c=r.length;c===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let p=null;for(let A=0;A!==c;A++){const N=r[A];if(typeof N=="number"&&isNaN(N)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,A,N),e=!1;break}if(p!==null&&p>N){console.error("THREE.KeyframeTrack: Out of order keys.",this,A,N,p),e=!1;break}p=N}if(a!==void 0&&Fr(a))for(let A=0,N=a.length;A!==N;++A){const H=a[A];if(isNaN(H)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,A,H),e=!1;break}}return e}optimize(){const e=Br(this.times),n=Br(this.values),r=this.getValueSize(),a=this.getInterpolation()===an,c=e.length-1;let p=1;for(let A=1;A<c;++A){let N=!1;const H=e[A],Z=e[A+1];if(H!==Z&&(A!==1||H!==e[0]))if(a)N=!0;else{const ne=A*r,re=ne-r,le=ne+r;for(let me=0;me!==r;++me){const pe=n[ne+me];if(pe!==n[re+me]||pe!==n[le+me]){N=!0;break}}}if(N){if(A!==p){e[p]=e[A];const ne=A*r,re=p*r;for(let le=0;le!==r;++le)n[re+le]=n[ne+le]}++p}}if(c>0){e[p]=e[c];for(let A=c*r,N=p*r,H=0;H!==r;++H)n[N+H]=n[A+H];++p}return p!==e.length?(this.times=Br(e,0,p),this.values=Br(n,0,p*r)):(this.times=e,this.values=n),this}clone(){const e=Br(this.times,0),n=Br(this.values,0),r=this.constructor,a=new r(this.name,e,n);return a.createInterpolant=this.createInterpolant,a}}Tc.prototype.TimeBufferType=Float32Array,Tc.prototype.ValueBufferType=Float32Array,Tc.prototype.DefaultInterpolation=Nt;class df extends Tc{}df.prototype.ValueTypeName="bool",df.prototype.ValueBufferType=Array,df.prototype.DefaultInterpolation=xn,df.prototype.InterpolantFactoryMethodLinear=void 0,df.prototype.InterpolantFactoryMethodSmooth=void 0;class Zv extends Tc{}Zv.prototype.ValueTypeName="color";class kg extends Tc{}kg.prototype.ValueTypeName="number";class xy extends Sl{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e,n,r,a){const c=this.resultBuffer,p=this.sampleValues,A=this.valueSize,N=(r-n)/(a-n);let H=e*A;for(let Z=H+A;H!==Z;H+=4)Mo.slerpFlat(c,0,p,H-A,p,H,N);return c}}class sm extends Tc{InterpolantFactoryMethodLinear(e){return new xy(this.times,this.values,this.getValueSize(),e)}}sm.prototype.ValueTypeName="quaternion",sm.prototype.DefaultInterpolation=Nt,sm.prototype.InterpolantFactoryMethodSmooth=void 0;class ff extends Tc{}ff.prototype.ValueTypeName="string",ff.prototype.ValueBufferType=Array,ff.prototype.DefaultInterpolation=xn,ff.prototype.InterpolantFactoryMethodLinear=void 0,ff.prototype.InterpolantFactoryMethodSmooth=void 0;class Ug extends Tc{}Ug.prototype.ValueTypeName="vector";class Gg{constructor(e,n=-1,r,a=Xi){this.name=e,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=Co(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,a=1/(e.fps||1);for(let p=0,A=r.length;p!==A;++p)n.push(CE(r[p]).scale(a));const c=new this(e.name,e.duration,n,e.blendMode);return c.uuid=e.uuid,c}static toJSON(e){const n=[],r=e.tracks,a={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let c=0,p=r.length;c!==p;++c)n.push(Tc.toJSON(r[c]));return a}static CreateFromMorphTargetSequence(e,n,r,a){const c=n.length,p=[];for(let A=0;A<c;A++){let N=[],H=[];N.push((A+c-1)%c,A,(A+1)%c),H.push(0,1,0);const Z=Wo(N);N=Aa(N,1,Z),H=Aa(H,1,Z),!a&&N[0]===0&&(N.push(c),H.push(H[0])),p.push(new kg(".morphTargetInfluences["+n[A].name+"]",N,H).scale(1/r))}return new this(e,-1,p)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const a=e;r=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<r.length;a++)if(r[a].name===n)return r[a];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const a={},c=/^([\w-]*?)([\d]+)$/;for(let A=0,N=e.length;A<N;A++){const H=e[A],Z=H.name.match(c);if(Z&&Z.length>1){const ne=Z[1];let re=a[ne];re||(a[ne]=re=[]),re.push(H)}}const p=[];for(const A in a)p.push(this.CreateFromMorphTargetSequence(A,a[A],n,r));return p}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(ne,re,le,me,pe){if(le.length!==0){const de=[],Ce=[];va(le,de,Ce,me),de.length!==0&&pe.push(new ne(re,de,Ce))}},a=[],c=e.name||"default",p=e.fps||30,A=e.blendMode;let N=e.length||-1;const H=e.hierarchy||[];for(let ne=0;ne<H.length;ne++){const re=H[ne].keys;if(!(!re||re.length===0))if(re[0].morphTargets){const le={};let me;for(me=0;me<re.length;me++)if(re[me].morphTargets)for(let pe=0;pe<re[me].morphTargets.length;pe++)le[re[me].morphTargets[pe]]=-1;for(const pe in le){const de=[],Ce=[];for(let Fe=0;Fe!==re[me].morphTargets.length;++Fe){const Re=re[me];de.push(Re.time),Ce.push(Re.morphTarget===pe?1:0)}a.push(new kg(".morphTargetInfluence["+pe+"]",de,Ce))}N=le.length*p}else{const le=".bones["+n[ne].name+"]";r(Ug,le+".position",re,"pos",a),r(sm,le+".quaternion",re,"rot",a),r(Ug,le+".scale",re,"scl",a)}}return a.length===0?null:new this(c,N,a,A)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,a=e.length;r!==a;++r){const c=this.tracks[r];n=Math.max(n,c.times[c.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function wE(x){switch(x.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return kg;case"vector":case"vector2":case"vector3":case"vector4":return Ug;case"color":return Zv;case"quaternion":return sm;case"bool":case"boolean":return df;case"string":return ff}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+x)}function CE(x){if(x.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=wE(x.type);if(x.times===void 0){const n=[],r=[];va(x.keys,n,r,"value"),x.times=n,x.values=r}return e.parse!==void 0?e.parse(x):new e(x.name,x.times,x.values,x.interpolation)}const pf={enabled:!1,files:{},add:function(x,e){this.enabled!==!1&&(this.files[x]=e)},get:function(x){if(this.enabled!==!1)return this.files[x]},remove:function(x){delete this.files[x]},clear:function(){this.files={}}};class $v{constructor(e,n,r){const a=this;let c=!1,p=0,A=0,N;const H=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(Z){A++,c===!1&&a.onStart!==void 0&&a.onStart(Z,p,A),c=!0},this.itemEnd=function(Z){p++,a.onProgress!==void 0&&a.onProgress(Z,p,A),p===A&&(c=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(Z){a.onError!==void 0&&a.onError(Z)},this.resolveURL=function(Z){return N?N(Z):Z},this.setURLModifier=function(Z){return N=Z,this},this.addHandler=function(Z,ne){return H.push(Z,ne),this},this.removeHandler=function(Z){const ne=H.indexOf(Z);return ne!==-1&&H.splice(ne,2),this},this.getHandler=function(Z){for(let ne=0,re=H.length;ne<re;ne+=2){const le=H[ne],me=H[ne+1];if(le.global&&(le.lastIndex=0),le.test(Z))return me}return null}}}const Ey=new $v;class Il{constructor(e){this.manager=e!==void 0?e:Ey,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(a,c){r.load(e,a,n,c)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Yu={};class ME extends Error{constructor(e,n){super(e),this.response=n}}class qu extends Il{constructor(e){super(e)}load(e,n,r,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=pf.get(e);if(c!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(c),this.manager.itemEnd(e)},0),c;if(Yu[e]!==void 0){Yu[e].push({onLoad:n,onProgress:r,onError:a});return}Yu[e]=[],Yu[e].push({onLoad:n,onProgress:r,onError:a});const p=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),A=this.mimeType,N=this.responseType;fetch(p).then(H=>{if(H.status===200||H.status===0){if(H.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||H.body===void 0||H.body.getReader===void 0)return H;const Z=Yu[e],ne=H.body.getReader(),re=H.headers.get("Content-Length")||H.headers.get("X-File-Size"),le=re?parseInt(re):0,me=le!==0;let pe=0;const de=new ReadableStream({start(Ce){Fe();function Fe(){ne.read().then(({done:Re,value:De})=>{if(Re)Ce.close();else{pe+=De.byteLength;const Ve=new ProgressEvent("progress",{lengthComputable:me,loaded:pe,total:le});for(let ct=0,bt=Z.length;ct<bt;ct++){const Ne=Z[ct];Ne.onProgress&&Ne.onProgress(Ve)}Ce.enqueue(De),Fe()}})}}});return new Response(de)}else throw new ME(`fetch for "${H.url}" responded with ${H.status}: ${H.statusText}`,H)}).then(H=>{switch(N){case"arraybuffer":return H.arrayBuffer();case"blob":return H.blob();case"document":return H.text().then(Z=>new DOMParser().parseFromString(Z,A));case"json":return H.json();default:if(A===void 0)return H.text();{const ne=/charset="?([^;"\s]*)"?/i.exec(A),re=ne&&ne[1]?ne[1].toLowerCase():void 0,le=new TextDecoder(re);return H.arrayBuffer().then(me=>le.decode(me))}}}).then(H=>{pf.add(e,H);const Z=Yu[e];delete Yu[e];for(let ne=0,re=Z.length;ne<re;ne++){const le=Z[ne];le.onLoad&&le.onLoad(H)}}).catch(H=>{const Z=Yu[e];if(Z===void 0)throw this.manager.itemError(e),H;delete Yu[e];for(let ne=0,re=Z.length;ne<re;ne++){const le=Z[ne];le.onError&&le.onError(H)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class TE extends Il{constructor(e){super(e)}load(e,n,r,a){const c=this,p=new qu(this.manager);p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(e,function(A){try{n(c.parse(JSON.parse(A)))}catch(N){a?a(N):console.error(N),c.manager.itemError(e)}},r,a)}parse(e){const n=[];for(let r=0;r<e.length;r++){const a=Gg.parse(e[r]);n.push(a)}return n}}class SE extends Il{constructor(e){super(e)}load(e,n,r,a){const c=this,p=[],A=new it,N=new qu(this.manager);N.setPath(this.path),N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setWithCredentials(c.withCredentials);let H=0;function Z(ne){N.load(e[ne],function(re){const le=c.parse(re,!0);p[ne]={width:le.width,height:le.height,format:le.format,mipmaps:le.mipmaps},H+=1,H===6&&(le.mipmapCount===1&&(A.minFilter=Ke),A.image=p,A.format=le.format,A.needsUpdate=!0,n&&n(A))},r,a)}if(Array.isArray(e))for(let ne=0,re=e.length;ne<re;++ne)Z(ne);else N.load(e,function(ne){const re=c.parse(ne,!0);if(re.isCubemap){const le=re.mipmaps.length/re.mipmapCount;for(let me=0;me<le;me++){p[me]={mipmaps:[]};for(let pe=0;pe<re.mipmapCount;pe++)p[me].mipmaps.push(re.mipmaps[me*re.mipmapCount+pe]),p[me].format=re.format,p[me].width=re.width,p[me].height=re.height}A.image=p}else A.image.width=re.width,A.image.height=re.height,A.mipmaps=re.mipmaps;re.mipmapCount===1&&(A.minFilter=Ke),A.format=re.format,A.needsUpdate=!0,n&&n(A)},r,a);return A}}class Hg extends Il{constructor(e){super(e)}load(e,n,r,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,p=pf.get(e);if(p!==void 0)return c.manager.itemStart(e),setTimeout(function(){n&&n(p),c.manager.itemEnd(e)},0),p;const A=Fl("img");function N(){Z(),pf.add(e,this),n&&n(this),c.manager.itemEnd(e)}function H(ne){Z(),a&&a(ne),c.manager.itemError(e),c.manager.itemEnd(e)}function Z(){A.removeEventListener("load",N,!1),A.removeEventListener("error",H,!1)}return A.addEventListener("load",N,!1),A.addEventListener("error",H,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(A.crossOrigin=this.crossOrigin),c.manager.itemStart(e),A.src=e,A}}class IE extends Il{constructor(e){super(e)}load(e,n,r,a){const c=new Vc,p=new Hg(this.manager);p.setCrossOrigin(this.crossOrigin),p.setPath(this.path);let A=0;function N(H){p.load(e[H],function(Z){c.images[H]=Z,A++,A===6&&(c.needsUpdate=!0,n&&n(c))},void 0,a)}for(let H=0;H<e.length;++H)N(H);return c}}class RE extends Il{constructor(e){super(e)}load(e,n,r,a){const c=this,p=new Hh,A=new qu(this.manager);return A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(c.withCredentials),A.load(e,function(N){const H=c.parse(N);!H||(H.image!==void 0?p.image=H.image:H.data!==void 0&&(p.image.width=H.width,p.image.height=H.height,p.image.data=H.data),p.wrapS=H.wrapS!==void 0?H.wrapS:Oe,p.wrapT=H.wrapT!==void 0?H.wrapT:Oe,p.magFilter=H.magFilter!==void 0?H.magFilter:Ke,p.minFilter=H.minFilter!==void 0?H.minFilter:Ke,p.anisotropy=H.anisotropy!==void 0?H.anisotropy:1,H.encoding!==void 0&&(p.encoding=H.encoding),H.flipY!==void 0&&(p.flipY=H.flipY),H.format!==void 0&&(p.format=H.format),H.type!==void 0&&(p.type=H.type),H.mipmaps!==void 0&&(p.mipmaps=H.mipmaps,p.minFilter=$t),H.mipmapCount===1&&(p.minFilter=Ke),H.generateMipmaps!==void 0&&(p.generateMipmaps=H.generateMipmaps),p.needsUpdate=!0,n&&n(p,H))},r,a),p}}class BE extends Il{constructor(e){super(e)}load(e,n,r,a){const c=new Ws,p=new Hg(this.manager);return p.setCrossOrigin(this.crossOrigin),p.setPath(this.path),p.load(e,function(A){c.image=A,c.needsUpdate=!0,n!==void 0&&n(c)},r,a),c}}class jh extends ds{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Si(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class by extends jh{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ds.DefaultUp),this.updateMatrix(),this.groundColor=new Si(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const e1=new Gi,_y=new nt,wy=new nt;class t1{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new On(512,512),this.map=null,this.mapPass=null,this.matrix=new Gi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new dl,this._frameExtents=new On(1,1),this._viewportCount=1,this._viewports=[new es(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;_y.setFromMatrixPosition(e.matrixWorld),n.position.copy(_y),wy.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(wy),n.updateMatrixWorld(),e1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(e1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(e1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class LE extends t1{constructor(){super(new Ao(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Pc*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,c=e.distance||n.far;(r!==n.fov||a!==n.aspect||c!==n.far)&&(n.fov=r,n.aspect=a,n.far=c,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Cy extends jh{constructor(e,n,r=0,a=Math.PI/3,c=0,p=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ds.DefaultUp),this.updateMatrix(),this.target=new ds,this.distance=r,this.angle=a,this.penumbra=c,this.decay=p,this.map=null,this.shadow=new LE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const My=new Gi,zg=new nt,n1=new nt;class DE extends t1{constructor(){super(new Ao(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new On(4,2),this._viewportCount=6,this._viewports=[new es(2,1,1,1),new es(0,1,1,1),new es(3,1,1,1),new es(1,1,1,1),new es(3,0,1,1),new es(1,0,1,1)],this._cubeDirections=[new nt(1,0,0),new nt(-1,0,0),new nt(0,0,1),new nt(0,0,-1),new nt(0,1,0),new nt(0,-1,0)],this._cubeUps=[new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,0,1),new nt(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,a=this.matrix,c=e.distance||r.far;c!==r.far&&(r.far=c,r.updateProjectionMatrix()),zg.setFromMatrixPosition(e.matrixWorld),r.position.copy(zg),n1.copy(r.position),n1.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(n1),r.updateMatrixWorld(),a.makeTranslation(-zg.x,-zg.y,-zg.z),My.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(My)}}class Ty extends jh{constructor(e,n,r=0,a=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=a,this.shadow=new DE}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class PE extends t1{constructor(){super(new Su(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Sy extends jh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ds.DefaultUp),this.updateMatrix(),this.target=new ds,this.shadow=new PE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Iy extends jh{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ry extends jh{constructor(e,n,r=10,a=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class By{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new nt)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,a=e.y,c=e.z,p=this.coefficients;return n.copy(p[0]).multiplyScalar(.282095),n.addScaledVector(p[1],.488603*a),n.addScaledVector(p[2],.488603*c),n.addScaledVector(p[3],.488603*r),n.addScaledVector(p[4],1.092548*(r*a)),n.addScaledVector(p[5],1.092548*(a*c)),n.addScaledVector(p[6],.315392*(3*c*c-1)),n.addScaledVector(p[7],1.092548*(r*c)),n.addScaledVector(p[8],.546274*(r*r-a*a)),n}getIrradianceAt(e,n){const r=e.x,a=e.y,c=e.z,p=this.coefficients;return n.copy(p[0]).multiplyScalar(.886227),n.addScaledVector(p[1],1.023328*a),n.addScaledVector(p[2],1.023328*c),n.addScaledVector(p[3],1.023328*r),n.addScaledVector(p[4],.858086*r*a),n.addScaledVector(p[5],.858086*a*c),n.addScaledVector(p[6],.743125*c*c-.247708),n.addScaledVector(p[7],.858086*r*c),n.addScaledVector(p[8],.429043*(r*r-a*a)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let a=0;a<9;a++)r[a].fromArray(e,n+a*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let a=0;a<9;a++)r[a].toArray(e,n+a*3);return e}static getBasisAt(e,n){const r=e.x,a=e.y,c=e.z;n[0]=.282095,n[1]=.488603*a,n[2]=.488603*c,n[3]=.488603*r,n[4]=1.092548*r*a,n[5]=1.092548*a*c,n[6]=.315392*(3*c*c-1),n[7]=1.092548*r*c,n[8]=.546274*(r*r-a*a)}}class gA extends jh{constructor(e=new By,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class AA extends Il{constructor(e){super(e),this.textures={}}load(e,n,r,a){const c=this,p=new qu(c.manager);p.setPath(c.path),p.setRequestHeader(c.requestHeader),p.setWithCredentials(c.withCredentials),p.load(e,function(A){try{n(c.parse(JSON.parse(A)))}catch(N){a?a(N):console.error(N),c.manager.itemError(e)}},r,a)}parse(e){const n=this.textures;function r(c){return n[c]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",c),n[c]}const a=AA.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Si().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==1&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const c in e.uniforms){const p=e.uniforms[c];switch(a.uniforms[c]={},p.type){case"t":a.uniforms[c].value=r(p.value);break;case"c":a.uniforms[c].value=new Si().setHex(p.value);break;case"v2":a.uniforms[c].value=new On().fromArray(p.value);break;case"v3":a.uniforms[c].value=new nt().fromArray(p.value);break;case"v4":a.uniforms[c].value=new es().fromArray(p.value);break;case"m3":a.uniforms[c].value=new No().fromArray(p.value);break;case"m4":a.uniforms[c].value=new Gi().fromArray(p.value);break;default:a.uniforms[c].value=p.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const c in e.extensions)a.extensions[c]=e.extensions[c];if(e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=r(e.map)),e.matcap!==void 0&&(a.matcap=r(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let c=e.normalScale;Array.isArray(c)===!1&&(c=[c,c]),a.normalScale=new On().fromArray(c)}return e.displacementMap!==void 0&&(a.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new On().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=r(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:cf,SpriteMaterial:Xp,RawShaderMaterial:ou,ShaderMaterial:ea,PointsMaterial:$,MeshPhysicalMaterial:nm,MeshStandardMaterial:Qh,MeshPhongMaterial:im,MeshToonMaterial:rm,MeshNormalMaterial:Ku,MeshLambertMaterial:uf,MeshDepthMaterial:_g,MeshDistanceMaterial:wg,MeshBasicMaterial:lo,MeshMatcapMaterial:cn,LineDashedMaterial:fs,LineBasicMaterial:ga,Material:Zo};return new n[e]}}class i1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Ly extends Or{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Dy extends Il{constructor(e){super(e)}load(e,n,r,a){const c=this,p=new qu(c.manager);p.setPath(c.path),p.setRequestHeader(c.requestHeader),p.setWithCredentials(c.withCredentials),p.load(e,function(A){try{n(c.parse(JSON.parse(A)))}catch(N){a?a(N):console.error(N),c.manager.itemError(e)}},r,a)}parse(e){const n={},r={};function a(le,me){if(n[me]!==void 0)return n[me];const de=le.interleavedBuffers[me],Ce=c(le,de.buffer),Fe=ic(de.type,Ce),Re=new Kp(Fe,de.stride);return Re.uuid=de.uuid,n[me]=Re,Re}function c(le,me){if(r[me]!==void 0)return r[me];const de=le.arrayBuffers[me],Ce=new Uint32Array(de).buffer;return r[me]=Ce,Ce}const p=e.isInstancedBufferGeometry?new Ly:new Or,A=e.data.index;if(A!==void 0){const le=ic(A.type,A.array);p.setIndex(new Rs(le,1))}const N=e.data.attributes;for(const le in N){const me=N[le];let pe;if(me.isInterleavedBufferAttribute){const de=a(e.data,me.data);pe=new Uu(de,me.itemSize,me.offset,me.normalized)}else{const de=ic(me.type,me.array),Ce=me.isInstancedBufferAttribute?Cc:Rs;pe=new Ce(de,me.itemSize,me.normalized)}me.name!==void 0&&(pe.name=me.name),me.usage!==void 0&&pe.setUsage(me.usage),me.updateRange!==void 0&&(pe.updateRange.offset=me.updateRange.offset,pe.updateRange.count=me.updateRange.count),p.setAttribute(le,pe)}const H=e.data.morphAttributes;if(H)for(const le in H){const me=H[le],pe=[];for(let de=0,Ce=me.length;de<Ce;de++){const Fe=me[de];let Re;if(Fe.isInterleavedBufferAttribute){const De=a(e.data,Fe.data);Re=new Uu(De,Fe.itemSize,Fe.offset,Fe.normalized)}else{const De=ic(Fe.type,Fe.array);Re=new Rs(De,Fe.itemSize,Fe.normalized)}Fe.name!==void 0&&(Re.name=Fe.name),pe.push(Re)}p.morphAttributes[le]=pe}e.data.morphTargetsRelative&&(p.morphTargetsRelative=!0);const ne=e.data.groups||e.data.drawcalls||e.data.offsets;if(ne!==void 0)for(let le=0,me=ne.length;le!==me;++le){const pe=ne[le];p.addGroup(pe.start,pe.count,pe.materialIndex)}const re=e.data.boundingSphere;if(re!==void 0){const le=new nt;re.center!==void 0&&le.fromArray(re.center),p.boundingSphere=new qo(le,re.radius)}return e.name&&(p.name=e.name),e.userData&&(p.userData=e.userData),p}}class OE extends Il{constructor(e){super(e)}load(e,n,r,a){const c=this,p=this.path===""?i1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||p;const A=new qu(this.manager);A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(N){let H=null;try{H=JSON.parse(N)}catch(ne){a!==void 0&&a(ne),console.error("THREE:ObjectLoader: Can't parse "+e+".",ne.message);return}const Z=H.metadata;if(Z===void 0||Z.type===void 0||Z.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}c.parse(H,n)},r,a)}async loadAsync(e,n){const r=this,a=this.path===""?i1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const c=new qu(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials);const p=await c.loadAsync(e,n),A=JSON.parse(p),N=A.metadata;if(N===void 0||N.type===void 0||N.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(A)}parse(e,n){const r=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),c=this.parseGeometries(e.geometries,a),p=this.parseImages(e.images,function(){n!==void 0&&n(H)}),A=this.parseTextures(e.textures,p),N=this.parseMaterials(e.materials,A),H=this.parseObject(e.object,c,N,A,r),Z=this.parseSkeletons(e.skeletons,H);if(this.bindSkeletons(H,Z),n!==void 0){let ne=!1;for(const re in p)if(p[re].data instanceof HTMLImageElement){ne=!0;break}ne===!1&&n(H)}return H}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),c=await this.parseImagesAsync(e.images),p=this.parseTextures(e.textures,c),A=this.parseMaterials(e.materials,p),N=this.parseObject(e.object,a,A,p,n),H=this.parseSkeletons(e.skeletons,N);return this.bindSkeletons(N,H),N}parseShapes(e){const n={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const c=new el().fromJSON(e[r]);n[c.uuid]=c}return n}parseSkeletons(e,n){const r={},a={};if(n.traverse(function(c){c.isBone&&(a[c.uuid]=c)}),e!==void 0)for(let c=0,p=e.length;c<p;c++){const A=new af().fromJSON(e[c],a);r[A.uuid]=A}return r}parseGeometries(e,n){const r={};if(e!==void 0){const c=new Dy;for(let p=0,A=e.length;p<A;p++){let N;const H=e[p];switch(H.type){case"BufferGeometry":case"InstancedBufferGeometry":N=c.parse(H);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var a=new THREE.LegacyJSONLoader;N=a.parse(H,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:H.type in lf?N=lf[H.type].fromJSON(H,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${H.type}"`)}N.uuid=H.uuid,H.name!==void 0&&(N.name=H.name),N.isBufferGeometry===!0&&H.userData!==void 0&&(N.userData=H.userData),r[H.uuid]=N}}return r}parseMaterials(e,n){const r={},a={};if(e!==void 0){const c=new AA;c.setTextures(n);for(let p=0,A=e.length;p<A;p++){const N=e[p];r[N.uuid]===void 0&&(r[N.uuid]=c.parse(N)),a[N.uuid]=r[N.uuid]}}return a}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const a=e[r],c=Gg.parse(a);n[c.uuid]=c}return n}parseImages(e,n){const r=this,a={};let c;function p(N){return r.manager.itemStart(N),c.load(N,function(){r.manager.itemEnd(N)},void 0,function(){r.manager.itemError(N),r.manager.itemEnd(N)})}function A(N){if(typeof N=="string"){const H=N,Z=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(H)?H:r.resourcePath+H;return p(Z)}else return N.data?{data:ic(N.type,N.data),width:N.width,height:N.height}:null}if(e!==void 0&&e.length>0){const N=new $v(n);c=new Hg(N),c.setCrossOrigin(this.crossOrigin);for(let H=0,Z=e.length;H<Z;H++){const ne=e[H],re=ne.url;if(Array.isArray(re)){const le=[];for(let me=0,pe=re.length;me<pe;me++){const de=re[me],Ce=A(de);Ce!==null&&(Ce instanceof HTMLImageElement?le.push(Ce):le.push(new Hh(Ce.data,Ce.width,Ce.height)))}a[ne.uuid]=new Da(le)}else{const le=A(ne.url);a[ne.uuid]=new Da(le)}}}return a}async parseImagesAsync(e){const n=this,r={};let a;async function c(p){if(typeof p=="string"){const A=p,N=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(A)?A:n.resourcePath+A;return await a.loadAsync(N)}else return p.data?{data:ic(p.type,p.data),width:p.width,height:p.height}:null}if(e!==void 0&&e.length>0){a=new Hg(this.manager),a.setCrossOrigin(this.crossOrigin);for(let p=0,A=e.length;p<A;p++){const N=e[p],H=N.url;if(Array.isArray(H)){const Z=[];for(let ne=0,re=H.length;ne<re;ne++){const le=H[ne],me=await c(le);me!==null&&(me instanceof HTMLImageElement?Z.push(me):Z.push(new Hh(me.data,me.width,me.height)))}r[N.uuid]=new Da(Z)}else{const Z=await c(N.url);r[N.uuid]=new Da(Z)}}}return r}parseTextures(e,n){function r(c,p){return typeof c=="number"?c:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",c),p[c])}const a={};if(e!==void 0)for(let c=0,p=e.length;c<p;c++){const A=e[c];A.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',A.uuid),n[A.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",A.image);const N=n[A.image],H=N.data;let Z;Array.isArray(H)?(Z=new Vc,H.length===6&&(Z.needsUpdate=!0)):(H&&H.data?Z=new Hh:Z=new Ws,H&&(Z.needsUpdate=!0)),Z.source=N,Z.uuid=A.uuid,A.name!==void 0&&(Z.name=A.name),A.mapping!==void 0&&(Z.mapping=r(A.mapping,FE)),A.offset!==void 0&&Z.offset.fromArray(A.offset),A.repeat!==void 0&&Z.repeat.fromArray(A.repeat),A.center!==void 0&&Z.center.fromArray(A.center),A.rotation!==void 0&&(Z.rotation=A.rotation),A.wrap!==void 0&&(Z.wrapS=r(A.wrap[0],Py),Z.wrapT=r(A.wrap[1],Py)),A.format!==void 0&&(Z.format=A.format),A.type!==void 0&&(Z.type=A.type),A.encoding!==void 0&&(Z.encoding=A.encoding),A.minFilter!==void 0&&(Z.minFilter=r(A.minFilter,Oy)),A.magFilter!==void 0&&(Z.magFilter=r(A.magFilter,Oy)),A.anisotropy!==void 0&&(Z.anisotropy=A.anisotropy),A.flipY!==void 0&&(Z.flipY=A.flipY),A.premultiplyAlpha!==void 0&&(Z.premultiplyAlpha=A.premultiplyAlpha),A.unpackAlignment!==void 0&&(Z.unpackAlignment=A.unpackAlignment),A.userData!==void 0&&(Z.userData=A.userData),a[A.uuid]=Z}return a}parseObject(e,n,r,a,c){let p;function A(re){return n[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",re),n[re]}function N(re){if(re!==void 0){if(Array.isArray(re)){const le=[];for(let me=0,pe=re.length;me<pe;me++){const de=re[me];r[de]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",de),le.push(r[de])}return le}return r[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",re),r[re]}}function H(re){return a[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",re),a[re]}let Z,ne;switch(e.type){case"Scene":p=new Lg,e.background!==void 0&&(Number.isInteger(e.background)?p.background=new Si(e.background):p.background=H(e.background)),e.environment!==void 0&&(p.environment=H(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?p.fog=new Jd(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(p.fog=new Wp(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":p=new Ao(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(p.focus=e.focus),e.zoom!==void 0&&(p.zoom=e.zoom),e.filmGauge!==void 0&&(p.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(p.filmOffset=e.filmOffset),e.view!==void 0&&(p.view=Object.assign({},e.view));break;case"OrthographicCamera":p=new Su(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(p.zoom=e.zoom),e.view!==void 0&&(p.view=Object.assign({},e.view));break;case"AmbientLight":p=new Iy(e.color,e.intensity);break;case"DirectionalLight":p=new Sy(e.color,e.intensity);break;case"PointLight":p=new Ty(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":p=new Ry(e.color,e.intensity,e.width,e.height);break;case"SpotLight":p=new Cy(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":p=new by(e.color,e.groundColor,e.intensity);break;case"LightProbe":p=new gA().fromJSON(e);break;case"SkinnedMesh":Z=A(e.geometry),ne=N(e.material),p=new bl(Z,ne),e.bindMode!==void 0&&(p.bindMode=e.bindMode),e.bindMatrix!==void 0&&p.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(p.skeleton=e.skeleton);break;case"Mesh":Z=A(e.geometry),ne=N(e.material),p=new $s(Z,ne);break;case"InstancedMesh":Z=A(e.geometry),ne=N(e.material);const re=e.count,le=e.instanceMatrix,me=e.instanceColor;p=new hA(Z,ne,re),p.instanceMatrix=new Cc(new Float32Array(le.array),16),me!==void 0&&(p.instanceColor=new Cc(new Float32Array(me.array),me.itemSize));break;case"LOD":p=new cA;break;case"Line":p=new f(A(e.geometry),N(e.material));break;case"LineLoop":p=new G(A(e.geometry),N(e.material));break;case"LineSegments":p=new D(A(e.geometry),N(e.material));break;case"PointCloud":case"Points":p=new we(A(e.geometry),N(e.material));break;case"Sprite":p=new aA(N(e.material));break;case"Group":p=new Xl;break;case"Bone":p=new wc;break;default:p=new ds}if(p.uuid=e.uuid,e.name!==void 0&&(p.name=e.name),e.matrix!==void 0?(p.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(p.matrixAutoUpdate=e.matrixAutoUpdate),p.matrixAutoUpdate&&p.matrix.decompose(p.position,p.quaternion,p.scale)):(e.position!==void 0&&p.position.fromArray(e.position),e.rotation!==void 0&&p.rotation.fromArray(e.rotation),e.quaternion!==void 0&&p.quaternion.fromArray(e.quaternion),e.scale!==void 0&&p.scale.fromArray(e.scale)),e.castShadow!==void 0&&(p.castShadow=e.castShadow),e.receiveShadow!==void 0&&(p.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(p.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(p.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(p.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&p.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(p.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(p.visible=e.visible),e.frustumCulled!==void 0&&(p.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(p.renderOrder=e.renderOrder),e.userData!==void 0&&(p.userData=e.userData),e.layers!==void 0&&(p.layers.mask=e.layers),e.children!==void 0){const re=e.children;for(let le=0;le<re.length;le++)p.add(this.parseObject(re[le],n,r,a,c))}if(e.animations!==void 0){const re=e.animations;for(let le=0;le<re.length;le++){const me=re[le];p.animations.push(c[me])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(p.autoUpdate=e.autoUpdate);const re=e.levels;for(let le=0;le<re.length;le++){const me=re[le],pe=p.getObjectByProperty("uuid",me.object);pe!==void 0&&p.addLevel(pe,me.distance,me.hysteresis)}}return p}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const a=n[r.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(a,r.bindMatrix)}})}}const FE={UVMapping:Pe,CubeReflectionMapping:Ye,CubeRefractionMapping:ze,EquirectangularReflectionMapping:He,EquirectangularRefractionMapping:et,CubeUVReflectionMapping:Me},Py={RepeatWrapping:Te,ClampToEdgeWrapping:Oe,MirroredRepeatWrapping:Ze},Oy={NearestFilter:ae,NearestMipmapNearestFilter:ee,NearestMipmapLinearFilter:Ie,LinearFilter:Ke,LinearMipmapNearestFilter:$e,LinearMipmapLinearFilter:$t};class NE extends Il{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,p=pf.get(e);if(p!==void 0)return c.manager.itemStart(e),setTimeout(function(){n&&n(p),c.manager.itemEnd(e)},0),p;const A={};A.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",A.headers=this.requestHeader,fetch(e,A).then(function(N){return N.blob()}).then(function(N){return createImageBitmap(N,Object.assign(c.options,{colorSpaceConversion:"none"}))}).then(function(N){pf.add(e,N),n&&n(N),c.manager.itemEnd(e)}).catch(function(N){a&&a(N),c.manager.itemError(e),c.manager.itemEnd(e)}),c.manager.itemStart(e)}}let vA;class r1{static getContext(){return vA===void 0&&(vA=new(window.AudioContext||window.webkitAudioContext)),vA}static setContext(e){vA=e}}class kE extends Il{constructor(e){super(e)}load(e,n,r,a){const c=this,p=new qu(this.manager);p.setResponseType("arraybuffer"),p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(e,function(A){try{const N=A.slice(0);r1.getContext().decodeAudioData(N,function(Z){n(Z)})}catch(N){a?a(N):console.error(N),c.manager.itemError(e)}},r,a)}}class UE extends gA{constructor(e,n,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const a=new Si().set(e),c=new Si().set(n),p=new nt(a.r,a.g,a.b),A=new nt(c.r,c.g,c.b),N=Math.sqrt(Math.PI),H=N*Math.sqrt(.75);this.sh.coefficients[0].copy(p).add(A).multiplyScalar(N),this.sh.coefficients[1].copy(p).sub(A).multiplyScalar(H)}}class GE extends gA{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const r=new Si().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Fy=new Gi,Ny=new Gi,mf=new Gi;class HE{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ao,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ao,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,mf.copy(e.projectionMatrix);const a=n.eyeSep/2,c=a*n.near/n.focus,p=n.near*Math.tan(al*n.fov*.5)/n.zoom;let A,N;Ny.elements[12]=-a,Fy.elements[12]=a,A=-p*n.aspect+c,N=p*n.aspect+c,mf.elements[0]=2*n.near/(N-A),mf.elements[8]=(N+A)/(N-A),this.cameraL.projectionMatrix.copy(mf),A=-p*n.aspect-c,N=p*n.aspect-c,mf.elements[0]=2*n.near/(N-A),mf.elements[8]=(N+A)/(N-A),this.cameraR.projectionMatrix.copy(mf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ny),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Fy)}}class ky{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Uy(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=Uy();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function Uy(){return(typeof performance>"u"?Date:performance).now()}const gf=new nt,Gy=new Mo,zE=new nt,Af=new nt;class VE extends ds{constructor(){super(),this.type="AudioListener",this.context=r1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ky}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(gf,Gy,zE),Af.set(0,0,-1).applyQuaternion(Gy),n.positionX){const a=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(gf.x,a),n.positionY.linearRampToValueAtTime(gf.y,a),n.positionZ.linearRampToValueAtTime(gf.z,a),n.forwardX.linearRampToValueAtTime(Af.x,a),n.forwardY.linearRampToValueAtTime(Af.y,a),n.forwardZ.linearRampToValueAtTime(Af.z,a),n.upX.linearRampToValueAtTime(r.x,a),n.upY.linearRampToValueAtTime(r.y,a),n.upZ.linearRampToValueAtTime(r.z,a)}else n.setPosition(gf.x,gf.y,gf.z),n.setOrientation(Af.x,Af.y,Af.z,r.x,r.y,r.z)}}class Hy extends ds{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const vf=new nt,zy=new Mo,QE=new nt,yf=new nt;class jE extends Hy{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(vf,zy,QE),yf.set(0,0,1).applyQuaternion(zy);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(vf.x,r),n.positionY.linearRampToValueAtTime(vf.y,r),n.positionZ.linearRampToValueAtTime(vf.z,r),n.orientationX.linearRampToValueAtTime(yf.x,r),n.orientationY.linearRampToValueAtTime(yf.y,r),n.orientationZ.linearRampToValueAtTime(yf.z,r)}else n.setPosition(vf.x,vf.y,vf.z),n.setOrientation(yf.x,yf.y,yf.z)}}class WE{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class Vy{constructor(e,n,r){this.binding=e,this.valueSize=r;let a,c,p;switch(n){case"quaternion":a=this._slerp,c=this._slerpAdditive,p=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":a=this._select,c=this._select,p=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:a=this._lerp,c=this._lerpAdditive,p=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=c,this._setIdentity=p,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,a=this.valueSize,c=e*a+a;let p=this.cumulativeWeight;if(p===0){for(let A=0;A!==a;++A)r[c+A]=r[A];p=n}else{p+=n;const A=n/p;this._mixBufferRegion(r,c,0,A,a)}this.cumulativeWeight=p}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,a=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,a,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,a=e*n+n,c=this.cumulativeWeight,p=this.cumulativeWeightAdditive,A=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1){const N=n*this._origIndex;this._mixBufferRegion(r,a,N,1-c,n)}p>0&&this._mixBufferRegionAdditive(r,a,this._addIndex*n,1,n);for(let N=n,H=n+n;N!==H;++N)if(r[N]!==r[N+n]){A.setValue(r,a);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,a=r*this._origIndex;e.getValue(n,a);for(let c=r,p=a;c!==p;++c)n[c]=n[a+c%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,a,c){if(a>=.5)for(let p=0;p!==c;++p)e[n+p]=e[r+p]}_slerp(e,n,r,a){Mo.slerpFlat(e,n,e,n,e,r,a)}_slerpAdditive(e,n,r,a,c){const p=this._workIndex*c;Mo.multiplyQuaternionsFlat(e,p,e,n,e,r),Mo.slerpFlat(e,n,e,n,e,p,a)}_lerp(e,n,r,a,c){const p=1-a;for(let A=0;A!==c;++A){const N=n+A;e[N]=e[N]*p+e[r+A]*a}}_lerpAdditive(e,n,r,a,c){for(let p=0;p!==c;++p){const A=n+p;e[A]=e[A]+e[r+p]*a}}}const s1="\\[\\]\\.:\\/",KE=new RegExp("["+s1+"]","g"),o1="[^"+s1+"]",XE="[^"+s1.replace("\\.","")+"]",YE=/((?:WC+[\/:])*)/.source.replace("WC",o1),qE=/(WCOD+)?/.source.replace("WCOD",XE),JE=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",o1),ZE=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",o1),$E=new RegExp("^"+YE+qE+JE+ZE+"$"),eb=["material","materials","bones","map"];class tb{constructor(e,n,r){const a=r||Cs.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,a)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,a=this._bindings[r];a!==void 0&&a.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let a=this._targetGroup.nCachedObjects_,c=r.length;a!==c;++a)r[a].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Cs{constructor(e,n,r){this.path=n,this.parsedPath=r||Cs.parseTrackName(n),this.node=Cs.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Cs.Composite(e,n,r):new Cs(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(KE,"")}static parseTrackName(e){const n=$E.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},a=r.nodeName&&r.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const c=r.nodeName.substring(a+1);eb.indexOf(c)!==-1&&(r.nodeName=r.nodeName.substring(0,a),r.objectName=c)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(c){for(let p=0;p<c.length;p++){const A=c[p];if(A.name===n||A.uuid===n)return A;const N=r(A.children);if(N)return N}return null},a=r(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let a=0,c=r.length;a!==c;++a)e[n++]=r[a]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let a=0,c=r.length;a!==c;++a)r[a]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let a=0,c=r.length;a!==c;++a)r[a]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let a=0,c=r.length;a!==c;++a)r[a]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,a=n.propertyName;let c=n.propertyIndex;if(e||(e=Cs.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let H=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let Z=0;Z<e.length;Z++)if(e[Z].name===H){H=Z;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(H!==void 0){if(e[H]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[H]}}const p=e[a];if(p===void 0){const H=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+H+"."+a+" but it wasn't found.",e);return}let A=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?A=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(A=this.Versioning.MatrixWorldNeedsUpdate);let N=this.BindingType.Direct;if(c!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[c]!==void 0&&(c=e.morphTargetDictionary[c])}N=this.BindingType.ArrayElement,this.resolvedProperty=p,this.propertyIndex=c}else p.fromArray!==void 0&&p.toArray!==void 0?(N=this.BindingType.HasFromToArray,this.resolvedProperty=p):Array.isArray(p)?(N=this.BindingType.EntireArray,this.resolvedProperty=p):this.propertyName=a;this.getValue=this.GetterByBindingType[N],this.setValue=this.SetterByBindingTypeAndVersioning[N][A]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Cs.Composite=tb,Cs.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Cs.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Cs.prototype.GetterByBindingType=[Cs.prototype._getValue_direct,Cs.prototype._getValue_array,Cs.prototype._getValue_arrayElement,Cs.prototype._getValue_toArray],Cs.prototype.SetterByBindingTypeAndVersioning=[[Cs.prototype._setValue_direct,Cs.prototype._setValue_direct_setNeedsUpdate,Cs.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Cs.prototype._setValue_array,Cs.prototype._setValue_array_setNeedsUpdate,Cs.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Cs.prototype._setValue_arrayElement,Cs.prototype._setValue_arrayElement_setNeedsUpdate,Cs.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Cs.prototype._setValue_fromArray,Cs.prototype._setValue_fromArray_setNeedsUpdate,Cs.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class nb{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Co(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,a=arguments.length;r!==a;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,c=this._bindings,p=c.length;let A,N=e.length,H=this.nCachedObjects_;for(let Z=0,ne=arguments.length;Z!==ne;++Z){const re=arguments[Z],le=re.uuid;let me=n[le];if(me===void 0){me=N++,n[le]=me,e.push(re);for(let pe=0,de=p;pe!==de;++pe)c[pe].push(new Cs(re,r[pe],a[pe]))}else if(me<H){A=e[me];const pe=--H,de=e[pe];n[de.uuid]=me,e[me]=de,n[le]=pe,e[pe]=re;for(let Ce=0,Fe=p;Ce!==Fe;++Ce){const Re=c[Ce],De=Re[pe];let Ve=Re[me];Re[me]=De,Ve===void 0&&(Ve=new Cs(re,r[Ce],a[Ce])),Re[pe]=Ve}}else e[me]!==A&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=H}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,a=r.length;let c=this.nCachedObjects_;for(let p=0,A=arguments.length;p!==A;++p){const N=arguments[p],H=N.uuid,Z=n[H];if(Z!==void 0&&Z>=c){const ne=c++,re=e[ne];n[re.uuid]=Z,e[Z]=re,n[H]=ne,e[ne]=N;for(let le=0,me=a;le!==me;++le){const pe=r[le],de=pe[ne],Ce=pe[Z];pe[Z]=de,pe[ne]=Ce}}}this.nCachedObjects_=c}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,a=r.length;let c=this.nCachedObjects_,p=e.length;for(let A=0,N=arguments.length;A!==N;++A){const H=arguments[A],Z=H.uuid,ne=n[Z];if(ne!==void 0)if(delete n[Z],ne<c){const re=--c,le=e[re],me=--p,pe=e[me];n[le.uuid]=ne,e[ne]=le,n[pe.uuid]=re,e[re]=pe,e.pop();for(let de=0,Ce=a;de!==Ce;++de){const Fe=r[de],Re=Fe[re],De=Fe[me];Fe[ne]=Re,Fe[re]=De,Fe.pop()}}else{const re=--p,le=e[re];re>0&&(n[le.uuid]=ne),e[ne]=le,e.pop();for(let me=0,pe=a;me!==pe;++me){const de=r[me];de[ne]=de[re],de.pop()}}}this.nCachedObjects_=c}subscribe_(e,n){const r=this._bindingsIndicesByPath;let a=r[e];const c=this._bindings;if(a!==void 0)return c[a];const p=this._paths,A=this._parsedPaths,N=this._objects,H=N.length,Z=this.nCachedObjects_,ne=new Array(H);a=c.length,r[e]=a,p.push(e),A.push(n),c.push(ne);for(let re=Z,le=N.length;re!==le;++re){const me=N[re];ne[re]=new Cs(me,e,n)}return ne}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const a=this._paths,c=this._parsedPaths,p=this._bindings,A=p.length-1,N=p[A],H=e[A];n[H]=r,p[r]=N,p.pop(),c[r]=c[A],c.pop(),a[r]=a[A],a.pop()}}}class ib{constructor(e,n,r=null,a=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=a;const c=n.tracks,p=c.length,A=new Array(p),N={endingStart:Pn,endingEnd:Pn};for(let H=0;H!==p;++H){const Z=c[H].createInterpolant(null);A[H]=Z,Z.settings=N}this._interpolantSettings=N,this._interpolants=A,this._propertyBindings=new Array(p),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=St,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const a=this._clip.duration,c=e._clip.duration,p=c/a,A=a/c;e.warp(1,p,n),this.warp(A,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const a=this._mixer,c=a.time,p=this.timeScale;let A=this._timeScaleInterpolant;A===null&&(A=a._lendControlInterpolant(),this._timeScaleInterpolant=A);const N=A.parameterPositions,H=A.sampleValues;return N[0]=c,N[1]=c+r,H[0]=e/p,H[1]=n/p,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,a){if(!this.enabled){this._updateWeight(e);return}const c=this._startTime;if(c!==null){const N=(e-c)*r;N<0||r===0?n=0:(this._startTime=null,n=r*N)}n*=this._updateTimeScale(e);const p=this._updateTime(n),A=this._updateWeight(e);if(A>0){const N=this._interpolants,H=this._propertyBindings;switch(this.blendMode){case fr:for(let Z=0,ne=N.length;Z!==ne;++Z)N[Z].evaluate(p),H[Z].accumulateAdditive(A);break;case Xi:default:for(let Z=0,ne=N.length;Z!==ne;++Z)N[Z].evaluate(p),H[Z].accumulate(a,A)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const a=r.evaluate(e)[0];n*=a,e>r.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const a=r.evaluate(e)[0];n*=a,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let a=this.time+e,c=this._loopCount;const p=r===wn;if(e===0)return c===-1?a:p&&(c&1)===1?n-a:a;if(r===yt){c===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=n)a=n;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(c===-1&&(e>=0?(c=0,this._setEndings(!0,this.repetitions===0,p)):this._setEndings(this.repetitions===0,!0,p)),a>=n||a<0){const A=Math.floor(a/n);a-=n*A,c+=Math.abs(A);const N=this.repetitions-c;if(N<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?n:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(N===1){const H=e<0;this._setEndings(H,!H,p)}else this._setEndings(!1,!1,p);this._loopCount=c,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:A})}}else this.time=a;if(p&&(c&1)===1)return n-a}return a}_setEndings(e,n,r){const a=this._interpolantSettings;r?(a.endingStart=xi,a.endingEnd=xi):(e?a.endingStart=this.zeroSlopeAtStart?xi:Pn:a.endingStart=Ui,n?a.endingEnd=this.zeroSlopeAtEnd?xi:Pn:a.endingEnd=Ui)}_scheduleFading(e,n,r){const a=this._mixer,c=a.time;let p=this._weightInterpolant;p===null&&(p=a._lendControlInterpolant(),this._weightInterpolant=p);const A=p.parameterPositions,N=p.sampleValues;return A[0]=c,N[0]=n,A[1]=c+e,N[1]=r,this}}const rb=new Float32Array(1);class sb extends ia{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,a=e._clip.tracks,c=a.length,p=e._propertyBindings,A=e._interpolants,N=r.uuid,H=this._bindingsByRootAndName;let Z=H[N];Z===void 0&&(Z={},H[N]=Z);for(let ne=0;ne!==c;++ne){const re=a[ne],le=re.name;let me=Z[le];if(me!==void 0)++me.referenceCount,p[ne]=me;else{if(me=p[ne],me!==void 0){me._cacheIndex===null&&(++me.referenceCount,this._addInactiveBinding(me,N,le));continue}const pe=n&&n._propertyBindings[ne].binding.parsedPath;me=new Vy(Cs.create(r,le,pe),re.ValueTypeName,re.getValueSize()),++me.referenceCount,this._addInactiveBinding(me,N,le),p[ne]=me}A[ne].resultBuffer=me.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,a=e._clip.uuid,c=this._actionsByClip[a];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,a,r)}const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const c=n[r];c.useCount++===0&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const c=n[r];--c.useCount===0&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const a=this._actions,c=this._actionsByClip;let p=c[n];if(p===void 0)p={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,c[n]=p;else{const A=p.knownActions;e._byClipCacheIndex=A.length,A.push(e)}e._cacheIndex=a.length,a.push(e),p.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],a=e._cacheIndex;r._cacheIndex=a,n[a]=r,n.pop(),e._cacheIndex=null;const c=e._clip.uuid,p=this._actionsByClip,A=p[c],N=A.knownActions,H=N[N.length-1],Z=e._byClipCacheIndex;H._byClipCacheIndex=Z,N[Z]=H,N.pop(),e._byClipCacheIndex=null;const ne=A.actionByRoot,re=(e._localRoot||this._root).uuid;delete ne[re],N.length===0&&delete p[c],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const c=n[r];--c.referenceCount===0&&this._removeInactiveBinding(c)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,a=this._nActiveActions++,c=n[a];e._cacheIndex=a,n[a]=e,c._cacheIndex=r,n[r]=c}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,a=--this._nActiveActions,c=n[a];e._cacheIndex=a,n[a]=e,c._cacheIndex=r,n[r]=c}_addInactiveBinding(e,n,r){const a=this._bindingsByRootAndName,c=this._bindings;let p=a[n];p===void 0&&(p={},a[n]=p),p[r]=e,e._cacheIndex=c.length,c.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,a=r.rootNode.uuid,c=r.path,p=this._bindingsByRootAndName,A=p[a],N=n[n.length-1],H=e._cacheIndex;N._cacheIndex=H,n[H]=N,n.pop(),delete A[c],Object.keys(A).length===0&&delete p[a]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,a=this._nActiveBindings++,c=n[a];e._cacheIndex=a,n[a]=e,c._cacheIndex=r,n[r]=c}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,a=--this._nActiveBindings,c=n[a];e._cacheIndex=a,n[a]=e,c._cacheIndex=r,n[r]=c}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new Jv(new Float32Array(2),new Float32Array(2),1,rb),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,a=--this._nActiveControlInterpolants,c=n[a];e.__cacheIndex=a,n[a]=e,c.__cacheIndex=r,n[r]=c}clipAction(e,n,r){const a=n||this._root,c=a.uuid;let p=typeof e=="string"?Gg.findByName(a,e):e;const A=p!==null?p.uuid:e,N=this._actionsByClip[A];let H=null;if(r===void 0&&(p!==null?r=p.blendMode:r=Xi),N!==void 0){const ne=N.actionByRoot[c];if(ne!==void 0&&ne.blendMode===r)return ne;H=N.knownActions[0],p===null&&(p=H._clip)}if(p===null)return null;const Z=new ib(this,p,n,r);return this._bindAction(Z,H),this._addInactiveAction(Z,A,c),Z}existingAction(e,n){const r=n||this._root,a=r.uuid,c=typeof e=="string"?Gg.findByName(r,e):e,p=c?c.uuid:e,A=this._actionsByClip[p];return A!==void 0&&A.actionByRoot[a]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,a=this.time+=e,c=Math.sign(e),p=this._accuIndex^=1;for(let H=0;H!==r;++H)n[H]._update(a,e,c,p);const A=this._bindings,N=this._nActiveBindings;for(let H=0;H!==N;++H)A[H].apply(p);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,a=this._actionsByClip,c=a[r];if(c!==void 0){const p=c.knownActions;for(let A=0,N=p.length;A!==N;++A){const H=p[A];this._deactivateAction(H);const Z=H._cacheIndex,ne=n[n.length-1];H._cacheIndex=null,H._byClipCacheIndex=null,ne._cacheIndex=Z,n[Z]=ne,n.pop(),this._removeInactiveBindingsForAction(H)}delete a[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const p in r){const A=r[p].actionByRoot,N=A[n];N!==void 0&&(this._deactivateAction(N),this._removeInactiveAction(N))}const a=this._bindingsByRootAndName,c=a[n];if(c!==void 0)for(const p in c){const A=c[p];A.restoreOriginalState(),this._removeInactiveBinding(A)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class a1{constructor(e){this.value=e}clone(){return new a1(this.value.clone===void 0?this.value:this.value.clone())}}let ob=0;class ab extends ia{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:ob++}),this.name="",this.usage=Dc,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,a=n.length;r<a;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class lb extends Kp{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class cb{constructor(e,n,r,a,c){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=a,this.count=c,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class ub{constructor(e,n,r=0,a=1/0){this.ray=new Jo(e,n),this.near=r,this.far=a,this.camera=null,this.layers=new ms,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return l1(e,this,r,n),r.sort(Qy),r}intersectObjects(e,n=!0,r=[]){for(let a=0,c=e.length;a<c;a++)l1(e[a],this,r,n);return r.sort(Qy),r}}function Qy(x,e){return x.distance-e.distance}function l1(x,e,n,r){if(x.layers.test(e.layers)&&x.raycast(e,n),r===!0){const a=x.children;for(let c=0,p=a.length;c<p;c++)l1(a[c],e,n,!0)}}class hb{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ns(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class db{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const jy=new On;class fb{constructor(e=new On(1/0,1/0),n=new On(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=jy.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return jy.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Wy=new nt,yA=new nt;class pb{constructor(e=new nt,n=new nt){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){Wy.subVectors(e,this.start),yA.subVectors(this.end,this.start);const r=yA.dot(yA);let c=yA.dot(Wy)/r;return n&&(c=Ns(c,0,1)),c}closestPointToPoint(e,n,r){const a=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(a).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Ky=new nt;class mb extends ds{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Or,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let p=0,A=1,N=32;p<N;p++,A++){const H=p/N*Math.PI*2,Z=A/N*Math.PI*2;a.push(Math.cos(H),Math.sin(H),1,Math.cos(Z),Math.sin(Z),1)}r.setAttribute("position",new Yi(a,3));const c=new ga({fog:!1,toneMapped:!1});this.cone=new D(r,c),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),Ky.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ky),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Wh=new nt,xA=new Gi,c1=new Gi;class gb extends D{constructor(e){const n=Xy(e),r=new Or,a=[],c=[],p=new Si(0,0,1),A=new Si(0,1,0);for(let H=0;H<n.length;H++){const Z=n[H];Z.parent&&Z.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),c.push(p.r,p.g,p.b),c.push(A.r,A.g,A.b))}r.setAttribute("position",new Yi(a,3)),r.setAttribute("color",new Yi(c,3));const N=new ga({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,N),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,a=r.getAttribute("position");c1.copy(this.root.matrixWorld).invert();for(let c=0,p=0;c<n.length;c++){const A=n[c];A.parent&&A.parent.isBone&&(xA.multiplyMatrices(c1,A.matrixWorld),Wh.setFromMatrixPosition(xA),a.setXYZ(p,Wh.x,Wh.y,Wh.z),xA.multiplyMatrices(c1,A.parent.matrixWorld),Wh.setFromMatrixPosition(xA),a.setXYZ(p+1,Wh.x,Wh.y,Wh.z),p+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xy(x){const e=[];x.isBone===!0&&e.push(x);for(let n=0;n<x.children.length;n++)e.push.apply(e,Xy(x.children[n]));return e}class Ab extends $s{constructor(e,n,r){const a=new su(n,4,2),c=new lo({wireframe:!0,fog:!1,toneMapped:!1});super(a,c),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const vb=new nt,Yy=new Si,qy=new Si;class yb extends ds{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const a=new Jl(n);a.rotateY(Math.PI*.5),this.material=new lo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const c=a.getAttribute("position"),p=new Float32Array(c.count*3);a.setAttribute("color",new Rs(p,3)),this.add(new $s(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");Yy.copy(this.light.color),qy.copy(this.light.groundColor);for(let r=0,a=n.count;r<a;r++){const c=r<a/2?Yy:qy;n.setXYZ(r,c.r,c.g,c.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(vb.setFromMatrixPosition(this.light.matrixWorld).negate())}}class xb extends D{constructor(e=10,n=10,r=4473924,a=8947848){r=new Si(r),a=new Si(a);const c=n/2,p=e/n,A=e/2,N=[],H=[];for(let re=0,le=0,me=-A;re<=n;re++,me+=p){N.push(-A,0,me,A,0,me),N.push(me,0,-A,me,0,A);const pe=re===c?r:a;pe.toArray(H,le),le+=3,pe.toArray(H,le),le+=3,pe.toArray(H,le),le+=3,pe.toArray(H,le),le+=3}const Z=new Or;Z.setAttribute("position",new Yi(N,3)),Z.setAttribute("color",new Yi(H,3));const ne=new ga({vertexColors:!0,toneMapped:!1});super(Z,ne),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Eb extends D{constructor(e=10,n=16,r=8,a=64,c=4473924,p=8947848){c=new Si(c),p=new Si(p);const A=[],N=[];if(n>1)for(let ne=0;ne<n;ne++){const re=ne/n*(Math.PI*2),le=Math.sin(re)*e,me=Math.cos(re)*e;A.push(0,0,0),A.push(le,0,me);const pe=ne&1?c:p;N.push(pe.r,pe.g,pe.b),N.push(pe.r,pe.g,pe.b)}for(let ne=0;ne<r;ne++){const re=ne&1?c:p,le=e-e/r*ne;for(let me=0;me<a;me++){let pe=me/a*(Math.PI*2),de=Math.sin(pe)*le,Ce=Math.cos(pe)*le;A.push(de,0,Ce),N.push(re.r,re.g,re.b),pe=(me+1)/a*(Math.PI*2),de=Math.sin(pe)*le,Ce=Math.cos(pe)*le,A.push(de,0,Ce),N.push(re.r,re.g,re.b)}}const H=new Or;H.setAttribute("position",new Yi(A,3)),H.setAttribute("color",new Yi(N,3));const Z=new ga({vertexColors:!0,toneMapped:!1});super(H,Z),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Jy=new nt,EA=new nt,Zy=new nt;class bb extends ds{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let a=new Or;a.setAttribute("position",new Yi([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const c=new ga({fog:!1,toneMapped:!1});this.lightPlane=new f(a,c),this.add(this.lightPlane),a=new Or,a.setAttribute("position",new Yi([0,0,0,0,0,1],3)),this.targetLine=new f(a,c),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Jy.setFromMatrixPosition(this.light.matrixWorld),EA.setFromMatrixPosition(this.light.target.matrixWorld),Zy.subVectors(EA,Jy),this.lightPlane.lookAt(EA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(EA),this.targetLine.scale.z=Zy.length()}}const bA=new nt,Io=new $a;class _b extends D{constructor(e){const n=new Or,r=new ga({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],c=[],p={};A("n1","n2"),A("n2","n4"),A("n4","n3"),A("n3","n1"),A("f1","f2"),A("f2","f4"),A("f4","f3"),A("f3","f1"),A("n1","f1"),A("n2","f2"),A("n3","f3"),A("n4","f4"),A("p","n1"),A("p","n2"),A("p","n3"),A("p","n4"),A("u1","u2"),A("u2","u3"),A("u3","u1"),A("c","t"),A("p","c"),A("cn1","cn2"),A("cn3","cn4"),A("cf1","cf2"),A("cf3","cf4");function A(me,pe){N(me),N(pe)}function N(me){a.push(0,0,0),c.push(0,0,0),p[me]===void 0&&(p[me]=[]),p[me].push(a.length/3-1)}n.setAttribute("position",new Yi(a,3)),n.setAttribute("color",new Yi(c,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=p,this.update();const H=new Si(16755200),Z=new Si(16711680),ne=new Si(43775),re=new Si(16777215),le=new Si(3355443);this.setColors(H,Z,ne,re,le)}setColors(e,n,r,a,c){const A=this.geometry.getAttribute("color");A.setXYZ(0,e.r,e.g,e.b),A.setXYZ(1,e.r,e.g,e.b),A.setXYZ(2,e.r,e.g,e.b),A.setXYZ(3,e.r,e.g,e.b),A.setXYZ(4,e.r,e.g,e.b),A.setXYZ(5,e.r,e.g,e.b),A.setXYZ(6,e.r,e.g,e.b),A.setXYZ(7,e.r,e.g,e.b),A.setXYZ(8,e.r,e.g,e.b),A.setXYZ(9,e.r,e.g,e.b),A.setXYZ(10,e.r,e.g,e.b),A.setXYZ(11,e.r,e.g,e.b),A.setXYZ(12,e.r,e.g,e.b),A.setXYZ(13,e.r,e.g,e.b),A.setXYZ(14,e.r,e.g,e.b),A.setXYZ(15,e.r,e.g,e.b),A.setXYZ(16,e.r,e.g,e.b),A.setXYZ(17,e.r,e.g,e.b),A.setXYZ(18,e.r,e.g,e.b),A.setXYZ(19,e.r,e.g,e.b),A.setXYZ(20,e.r,e.g,e.b),A.setXYZ(21,e.r,e.g,e.b),A.setXYZ(22,e.r,e.g,e.b),A.setXYZ(23,e.r,e.g,e.b),A.setXYZ(24,n.r,n.g,n.b),A.setXYZ(25,n.r,n.g,n.b),A.setXYZ(26,n.r,n.g,n.b),A.setXYZ(27,n.r,n.g,n.b),A.setXYZ(28,n.r,n.g,n.b),A.setXYZ(29,n.r,n.g,n.b),A.setXYZ(30,n.r,n.g,n.b),A.setXYZ(31,n.r,n.g,n.b),A.setXYZ(32,r.r,r.g,r.b),A.setXYZ(33,r.r,r.g,r.b),A.setXYZ(34,r.r,r.g,r.b),A.setXYZ(35,r.r,r.g,r.b),A.setXYZ(36,r.r,r.g,r.b),A.setXYZ(37,r.r,r.g,r.b),A.setXYZ(38,a.r,a.g,a.b),A.setXYZ(39,a.r,a.g,a.b),A.setXYZ(40,c.r,c.g,c.b),A.setXYZ(41,c.r,c.g,c.b),A.setXYZ(42,c.r,c.g,c.b),A.setXYZ(43,c.r,c.g,c.b),A.setXYZ(44,c.r,c.g,c.b),A.setXYZ(45,c.r,c.g,c.b),A.setXYZ(46,c.r,c.g,c.b),A.setXYZ(47,c.r,c.g,c.b),A.setXYZ(48,c.r,c.g,c.b),A.setXYZ(49,c.r,c.g,c.b),A.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,a=1;Io.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Po("c",n,e,Io,0,0,-1),Po("t",n,e,Io,0,0,1),Po("n1",n,e,Io,-r,-a,-1),Po("n2",n,e,Io,r,-a,-1),Po("n3",n,e,Io,-r,a,-1),Po("n4",n,e,Io,r,a,-1),Po("f1",n,e,Io,-r,-a,1),Po("f2",n,e,Io,r,-a,1),Po("f3",n,e,Io,-r,a,1),Po("f4",n,e,Io,r,a,1),Po("u1",n,e,Io,r*.7,a*1.1,-1),Po("u2",n,e,Io,-r*.7,a*1.1,-1),Po("u3",n,e,Io,0,a*2,-1),Po("cf1",n,e,Io,-r,0,1),Po("cf2",n,e,Io,r,0,1),Po("cf3",n,e,Io,0,-a,1),Po("cf4",n,e,Io,0,a,1),Po("cn1",n,e,Io,-r,0,-1),Po("cn2",n,e,Io,r,0,-1),Po("cn3",n,e,Io,0,-a,-1),Po("cn4",n,e,Io,0,a,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Po(x,e,n,r,a,c,p){bA.set(a,c,p).unproject(r);const A=e[x];if(A!==void 0){const N=n.getAttribute("position");for(let H=0,Z=A.length;H<Z;H++)N.setXYZ(A[H],bA.x,bA.y,bA.z)}}const _A=new xa;class wb extends D{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(8*3),c=new Or;c.setIndex(new Rs(r,1)),c.setAttribute("position",new Rs(a,3)),super(c,new ga({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_A.setFromObject(this.object),_A.isEmpty())return;const n=_A.min,r=_A.max,a=this.geometry.attributes.position,c=a.array;c[0]=r.x,c[1]=r.y,c[2]=r.z,c[3]=n.x,c[4]=r.y,c[5]=r.z,c[6]=n.x,c[7]=n.y,c[8]=r.z,c[9]=r.x,c[10]=n.y,c[11]=r.z,c[12]=r.x,c[13]=r.y,c[14]=n.z,c[15]=n.x,c[16]=r.y,c[17]=n.z,c[18]=n.x,c[19]=n.y,c[20]=n.z,c[21]=r.x,c[22]=n.y,c[23]=n.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Cb extends D{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],c=new Or;c.setIndex(new Rs(r,1)),c.setAttribute("position",new Yi(a,3)),super(c,new ga({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Mb extends f{constructor(e,n=1,r=16776960){const a=r,c=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],p=new Or;p.setAttribute("position",new Yi(c,3)),p.computeBoundingSphere(),super(p,new ga({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const A=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],N=new Or;N.setAttribute("position",new Yi(A,3)),N.computeBoundingSphere(),this.add(new $s(N,new lo({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const $y=new nt;let wA,u1;class Tb extends ds{constructor(e=new nt(0,0,1),n=new nt(0,0,0),r=1,a=16776960,c=r*.2,p=c*.2){super(),this.type="ArrowHelper",wA===void 0&&(wA=new Or,wA.setAttribute("position",new Yi([0,0,0,0,1,0],3)),u1=new Mr(0,.5,1,5,1),u1.translate(0,-.5,0)),this.position.copy(n),this.line=new f(wA,new ga({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $s(u1,new lo({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,c,p)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$y.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle($y,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Sb extends D{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Or;a.setAttribute("position",new Yi(n,3)),a.setAttribute("color",new Yi(r,3));const c=new ga({vertexColors:!0,toneMapped:!1});super(a,c),this.type="AxesHelper"}setColors(e,n,r){const a=new Si,c=this.geometry.attributes.color.array;return a.set(e),a.toArray(c,0),a.toArray(c,3),a.set(n),a.toArray(c,6),a.toArray(c,9),a.set(r),a.toArray(c,12),a.toArray(c,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ib{constructor(){this.type="ShapePath",this.color=new Si,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Ri,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,a){return this.currentPath.quadraticCurveTo(e,n,r,a),this}bezierCurveTo(e,n,r,a,c,p){return this.currentPath.bezierCurveTo(e,n,r,a,c,p),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(Ce){const Fe=[];for(let Re=0,De=Ce.length;Re<De;Re++){const Ve=Ce[Re],ct=new el;ct.curves=Ve.curves,Fe.push(ct)}return Fe}function r(Ce,Fe){const Re=Fe.length;let De=!1;for(let Ve=Re-1,ct=0;ct<Re;Ve=ct++){let bt=Fe[Ve],Ne=Fe[ct],dt=Ne.x-bt.x,vt=Ne.y-bt.y;if(Math.abs(vt)>Number.EPSILON){if(vt<0&&(bt=Fe[ct],dt=-dt,Ne=Fe[Ve],vt=-vt),Ce.y<bt.y||Ce.y>Ne.y)continue;if(Ce.y===bt.y){if(Ce.x===bt.x)return!0}else{const Ut=vt*(Ce.x-bt.x)-dt*(Ce.y-bt.y);if(Ut===0)return!0;if(Ut<0)continue;De=!De}}else{if(Ce.y!==bt.y)continue;if(Ne.x<=Ce.x&&Ce.x<=bt.x||bt.x<=Ce.x&&Ce.x<=Ne.x)return!0}}return De}const a=Bi.isClockWise,c=this.subPaths;if(c.length===0)return[];let p,A,N;const H=[];if(c.length===1)return A=c[0],N=new el,N.curves=A.curves,H.push(N),H;let Z=!a(c[0].getPoints());Z=e?!Z:Z;const ne=[],re=[];let le=[],me=0,pe;re[me]=void 0,le[me]=[];for(let Ce=0,Fe=c.length;Ce<Fe;Ce++)A=c[Ce],pe=A.getPoints(),p=a(pe),p=e?!p:p,p?(!Z&&re[me]&&me++,re[me]={s:new el,p:pe},re[me].s.curves=A.curves,Z&&me++,le[me]=[]):le[me].push({h:A,p:pe[0]});if(!re[0])return n(c);if(re.length>1){let Ce=!1,Fe=0;for(let Re=0,De=re.length;Re<De;Re++)ne[Re]=[];for(let Re=0,De=re.length;Re<De;Re++){const Ve=le[Re];for(let ct=0;ct<Ve.length;ct++){const bt=Ve[ct];let Ne=!0;for(let dt=0;dt<re.length;dt++)r(bt.p,re[dt].p)&&(Re!==dt&&Fe++,Ne?(Ne=!1,ne[dt].push(bt)):Ce=!0);Ne&&ne[Re].push(bt)}}Fe>0&&Ce===!1&&(le=ne)}let de;for(let Ce=0,Fe=re.length;Ce<Fe;Ce++){N=re[Ce].s,H.push(N),de=le[Ce];for(let Re=0,De=de.length;Re<De;Re++)N.holes.push(de[Re].h)}return H}}const Ju=Rb();function Rb(){const x=new ArrayBuffer(4),e=new Float32Array(x),n=new Uint32Array(x),r=new Uint32Array(512),a=new Uint32Array(512);for(let N=0;N<256;++N){const H=N-127;H<-27?(r[N]=0,r[N|256]=32768,a[N]=24,a[N|256]=24):H<-14?(r[N]=1024>>-H-14,r[N|256]=1024>>-H-14|32768,a[N]=-H-1,a[N|256]=-H-1):H<=15?(r[N]=H+15<<10,r[N|256]=H+15<<10|32768,a[N]=13,a[N|256]=13):H<128?(r[N]=31744,r[N|256]=64512,a[N]=24,a[N|256]=24):(r[N]=31744,r[N|256]=64512,a[N]=13,a[N|256]=13)}const c=new Uint32Array(2048),p=new Uint32Array(64),A=new Uint32Array(64);for(let N=1;N<1024;++N){let H=N<<13,Z=0;for(;(H&8388608)===0;)H<<=1,Z-=8388608;H&=-8388609,Z+=947912704,c[N]=H|Z}for(let N=1024;N<2048;++N)c[N]=939524096+(N-1024<<13);for(let N=1;N<31;++N)p[N]=N<<23;p[31]=1199570944,p[32]=2147483648;for(let N=33;N<63;++N)p[N]=2147483648+(N-32<<23);p[63]=3347054592;for(let N=1;N<64;++N)N!==32&&(A[N]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:a,mantissaTable:c,exponentTable:p,offsetTable:A}}function Bb(x){Math.abs(x)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),x=Ns(x,-65504,65504),Ju.floatView[0]=x;const e=Ju.uint32View[0],n=e>>23&511;return Ju.baseTable[n]+((e&8388607)>>Ju.shiftTable[n])}function Lb(x){const e=x>>10;return Ju.uint32View[0]=Ju.mantissaTable[Ju.offsetTable[e]+(x&1023)]+Ju.exponentTable[e],Ju.floatView[0]}var Db=Object.freeze({__proto__:null,toHalfFloat:Bb,fromHalfFloat:Lb});function Pb(){console.error("THREE.ImmediateRenderObject has been removed.")}class Ob extends ko{constructor(e,n,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,r),this.samples=4}}class Fb extends cl{constructor(e,n,r,a){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,r,a)}}class Nb extends kl{constructor(e,n,r,a){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,r,a)}}class kb extends Za{constructor(e,n,r,a,c,p){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,r,a,c,p)}}class Ub extends As{constructor(e,n,r,a){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,r,a)}}class Gb extends Ct{constructor(e,n,r,a){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,r,a)}}class Hb extends is{constructor(e,n,r,a,c,p,A){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,r,a,c,p,A)}}class zb extends Mr{constructor(e,n,r,a,c,p,A,N){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,r,a,c,p,A,N)}}class Vb extends eo{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class Qb extends $r{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class jb extends nu{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class Wb extends _r{constructor(e,n,r,a){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,r,a)}}class Kb extends Jl{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class Xb extends _u{constructor(e,n,r,a){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,r,a)}}class Yb extends Tr{constructor(e,n,r,a){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,r,a)}}class qb extends iu{constructor(e,n,r,a,c,p){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,r,a,c,p)}}class Jb extends ru{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class Zb extends su{constructor(e,n,r,a,c,p,A){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,r,a,c,p,A)}}class $b extends Vu{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class e_ extends Qu{constructor(e,n,r,a,c){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,r,a,c)}}class t_ extends ju{constructor(e,n,r,a,c,p){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,r,a,c,p)}}class n_ extends Wu{constructor(e,n,r,a,c){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,r,a,c)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:g}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=g)},"./node_modules/super-three/examples/jsm/libs/ktx-parse.module.js":(S,I,h)=>{h.r(I),h.d(I,{KHR_DF_CHANNEL_RGBSDA_ALPHA:()=>Ue,KHR_DF_CHANNEL_RGBSDA_BLUE:()=>ri,KHR_DF_CHANNEL_RGBSDA_DEPTH:()=>zt,KHR_DF_CHANNEL_RGBSDA_GREEN:()=>tn,KHR_DF_CHANNEL_RGBSDA_RED:()=>bn,KHR_DF_CHANNEL_RGBSDA_STENCIL:()=>ni,KHR_DF_FLAG_ALPHA_PREMULTIPLIED:()=>j,KHR_DF_FLAG_ALPHA_STRAIGHT:()=>J,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT:()=>_,KHR_DF_MODEL_ASTC:()=>P,KHR_DF_MODEL_ETC1:()=>R,KHR_DF_MODEL_ETC1S:()=>Y,KHR_DF_MODEL_ETC2:()=>L,KHR_DF_MODEL_RGBSDA:()=>O,KHR_DF_MODEL_UNSPECIFIED:()=>b,KHR_DF_PRIMARIES_ACES:()=>At,KHR_DF_PRIMARIES_ACESCC:()=>Bt,KHR_DF_PRIMARIES_ADOBERGB:()=>dn,KHR_DF_PRIMARIES_BT2020:()=>je,KHR_DF_PRIMARIES_BT601_EBU:()=>Yt,KHR_DF_PRIMARIES_BT601_SMPTE:()=>Mn,KHR_DF_PRIMARIES_BT709:()=>wt,KHR_DF_PRIMARIES_CIEXYZ:()=>rt,KHR_DF_PRIMARIES_DISPLAYP3:()=>un,KHR_DF_PRIMARIES_NTSC1953:()=>Pt,KHR_DF_PRIMARIES_PAL525:()=>qt,KHR_DF_PRIMARIES_UNSPECIFIED:()=>Gt,KHR_DF_SAMPLE_DATATYPE_EXPONENT:()=>ze,KHR_DF_SAMPLE_DATATYPE_FLOAT:()=>Pe,KHR_DF_SAMPLE_DATATYPE_LINEAR:()=>He,KHR_DF_SAMPLE_DATATYPE_SIGNED:()=>Ye,KHR_DF_TRANSFER_ACESCC:()=>ht,KHR_DF_TRANSFER_ACESCCT:()=>xt,KHR_DF_TRANSFER_ADOBERGB:()=>at,KHR_DF_TRANSFER_BT1886:()=>Q,KHR_DF_TRANSFER_DCIP3:()=>Ae,KHR_DF_TRANSFER_HLG_EOTF:()=>z,KHR_DF_TRANSFER_HLG_OETF:()=>F,KHR_DF_TRANSFER_ITU:()=>xe,KHR_DF_TRANSFER_LINEAR:()=>te,KHR_DF_TRANSFER_NTSC:()=>Ee,KHR_DF_TRANSFER_PAL625_EOTF:()=>Be,KHR_DF_TRANSFER_PAL_OETF:()=>Se,KHR_DF_TRANSFER_PQ_EOTF:()=>X,KHR_DF_TRANSFER_PQ_OETF:()=>fe,KHR_DF_TRANSFER_SLOG:()=>V,KHR_DF_TRANSFER_SLOG2:()=>q,KHR_DF_TRANSFER_SRGB:()=>ue,KHR_DF_TRANSFER_ST240:()=>Ge,KHR_DF_TRANSFER_UNSPECIFIED:()=>U,KHR_DF_VENDORID_KHRONOS:()=>m,KHR_DF_VERSION:()=>w,KHR_SUPERCOMPRESSION_BASISLZ:()=>v,KHR_SUPERCOMPRESSION_NONE:()=>C,KHR_SUPERCOMPRESSION_ZLIB:()=>E,KHR_SUPERCOMPRESSION_ZSTD:()=>y,KTX2Container:()=>cc,VK_FORMAT_A1R5G5B5_UNORM_PACK16:()=>Ie,VK_FORMAT_A2B10G10R10_SINT_PACK32:()=>Oi,VK_FORMAT_A2B10G10R10_SNORM_PACK32:()=>ei,VK_FORMAT_A2B10G10R10_UINT_PACK32:()=>pn,VK_FORMAT_A2B10G10R10_UNORM_PACK32:()=>Xn,VK_FORMAT_A2R10G10B10_SINT_PACK32:()=>Un,VK_FORMAT_A2R10G10B10_SNORM_PACK32:()=>Wt,VK_FORMAT_A2R10G10B10_UINT_PACK32:()=>mn,VK_FORMAT_A2R10G10B10_UNORM_PACK32:()=>nn,VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT:()=>Gl,VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT:()=>ul,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:()=>Ya,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:()=>Fl,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:()=>ic,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:()=>Ul,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:()=>On,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:()=>Vf,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:()=>ac,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:()=>ch,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:()=>No,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:()=>lc,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:()=>Qf,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:()=>md,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:()=>ra,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:()=>mu,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:()=>Nl,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:()=>Ea,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:()=>Ro,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:()=>uh,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:()=>mo,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:()=>cd,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:()=>ld,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:()=>ph,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:()=>Uf,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:()=>ud,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:()=>Mo,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:()=>Gf,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:()=>nc,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:()=>nt,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:()=>hd,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:()=>Hf,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:()=>Au,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:()=>zf,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:()=>dd,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:()=>oc,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:()=>fd,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:()=>lh,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:()=>xa,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:()=>pd,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:()=>pu,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:()=>Xa,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:()=>Is,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:()=>La,VK_FORMAT_B10G11R11_UFLOAT_PACK32:()=>Ia,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:()=>hh,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:()=>Da,VK_FORMAT_B4G4R4A4_UNORM_PACK16:()=>Oe,VK_FORMAT_B5G5R5A1_UNORM_PACK16:()=>se,VK_FORMAT_B5G6R5_UNORM_PACK16:()=>ae,VK_FORMAT_B8G8R8A8_SINT:()=>ut,VK_FORMAT_B8G8R8A8_SNORM:()=>xs,VK_FORMAT_B8G8R8A8_SRGB:()=>_t,VK_FORMAT_B8G8R8A8_UINT:()=>Qe,VK_FORMAT_B8G8R8A8_UNORM:()=>Qr,VK_FORMAT_B8G8R8_SINT:()=>Pi,VK_FORMAT_B8G8R8_SNORM:()=>Dn,VK_FORMAT_B8G8R8_SRGB:()=>Zi,VK_FORMAT_B8G8R8_UINT:()=>bi,VK_FORMAT_B8G8R8_UNORM:()=>Gn,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:()=>Dc,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:()=>rh,VK_FORMAT_BC1_RGB_SRGB_BLOCK:()=>sd,VK_FORMAT_BC1_RGB_UNORM_BLOCK:()=>rd,VK_FORMAT_BC2_SRGB_BLOCK:()=>sh,VK_FORMAT_BC2_UNORM_BLOCK:()=>od,VK_FORMAT_BC3_SRGB_BLOCK:()=>no,VK_FORMAT_BC3_UNORM_BLOCK:()=>Pf,VK_FORMAT_BC4_SNORM_BLOCK:()=>Ff,VK_FORMAT_BC4_UNORM_BLOCK:()=>Of,VK_FORMAT_BC5_SNORM_BLOCK:()=>Nf,VK_FORMAT_BC5_UNORM_BLOCK:()=>oh,VK_FORMAT_BC6H_SFLOAT_BLOCK:()=>ah,VK_FORMAT_BC6H_UFLOAT_BLOCK:()=>kf,VK_FORMAT_BC7_SRGB_BLOCK:()=>ia,VK_FORMAT_BC7_UNORM_BLOCK:()=>du,VK_FORMAT_D16_UNORM:()=>Ba,VK_FORMAT_D16_UNORM_S8_UINT:()=>Ol,VK_FORMAT_D24_UNORM_S8_UINT:()=>qs,VK_FORMAT_D32_SFLOAT:()=>ol,VK_FORMAT_D32_SFLOAT_S8_UINT:()=>Fo,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:()=>Ra,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:()=>Wa,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:()=>ll,VK_FORMAT_EAC_R11_SNORM_BLOCK:()=>fu,VK_FORMAT_EAC_R11_UNORM_BLOCK:()=>Js,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:()=>Pc,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:()=>al,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:()=>Ns,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:()=>Co,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:()=>ad,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:()=>wo,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:()=>Ka,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:()=>dh,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:()=>ko,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:()=>sc,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:()=>cl,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:()=>fh,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:()=>Yo,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:()=>Ws,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:()=>kl,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:()=>es,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:()=>ya,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:()=>so,VK_FORMAT_R10X6_UNORM_PACK16:()=>Oc,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:()=>rc,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:()=>Si,VK_FORMAT_R12X4_UNORM_PACK16:()=>gu,VK_FORMAT_R16G16B16A16_SFLOAT:()=>wn,VK_FORMAT_R16G16B16A16_SINT:()=>St,VK_FORMAT_R16G16B16A16_SNORM:()=>qe,VK_FORMAT_R16G16B16A16_UINT:()=>yt,VK_FORMAT_R16G16B16A16_UNORM:()=>Le,VK_FORMAT_R16G16B16_SFLOAT:()=>_e,VK_FORMAT_R16G16B16_SINT:()=>ge,VK_FORMAT_R16G16B16_SNORM:()=>as,VK_FORMAT_R16G16B16_UINT:()=>ce,VK_FORMAT_R16G16B16_UNORM:()=>to,VK_FORMAT_R16G16_SFLOAT:()=>Rr,VK_FORMAT_R16G16_SINT:()=>pi,VK_FORMAT_R16G16_SNORM:()=>Os,VK_FORMAT_R16G16_UINT:()=>ro,VK_FORMAT_R16G16_UNORM:()=>kr,VK_FORMAT_R16_SFLOAT:()=>er,VK_FORMAT_R16_SINT:()=>zi,VK_FORMAT_R16_SNORM:()=>Ti,VK_FORMAT_R16_UINT:()=>Xr,VK_FORMAT_R16_UNORM:()=>Mi,VK_FORMAT_R32G32B32A32_SFLOAT:()=>Jr,VK_FORMAT_R32G32B32A32_SINT:()=>hs,VK_FORMAT_R32G32B32A32_UINT:()=>Vi,VK_FORMAT_R32G32B32_SFLOAT:()=>ur,VK_FORMAT_R32G32B32_SINT:()=>fr,VK_FORMAT_R32G32B32_UINT:()=>Xi,VK_FORMAT_R32G32_SFLOAT:()=>Ui,VK_FORMAT_R32G32_SINT:()=>xi,VK_FORMAT_R32G32_UINT:()=>Pn,VK_FORMAT_R32_SFLOAT:()=>an,VK_FORMAT_R32_SINT:()=>Nt,VK_FORMAT_R32_UINT:()=>xn,VK_FORMAT_R4G4B4A4_UNORM_PACK16:()=>Te,VK_FORMAT_R4G4_UNORM_PACK8:()=>Me,VK_FORMAT_R5G5B5A1_UNORM_PACK16:()=>ee,VK_FORMAT_R5G6B5_UNORM_PACK16:()=>Ze,VK_FORMAT_R64G64B64A64_SFLOAT:()=>Pl,VK_FORMAT_R64G64B64A64_SINT:()=>sl,VK_FORMAT_R64G64B64A64_UINT:()=>js,VK_FORMAT_R64G64B64_SFLOAT:()=>Qa,VK_FORMAT_R64G64B64_SINT:()=>_o,VK_FORMAT_R64G64B64_UINT:()=>Ds,VK_FORMAT_R64G64_SFLOAT:()=>Fs,VK_FORMAT_R64G64_SINT:()=>Zr,VK_FORMAT_R64G64_UINT:()=>Qs,VK_FORMAT_R64_SFLOAT:()=>po,VK_FORMAT_R64_SINT:()=>Ss,VK_FORMAT_R64_UINT:()=>vr,VK_FORMAT_R8G8B8A8_SINT:()=>Pr,VK_FORMAT_R8G8B8A8_SNORM:()=>Ki,VK_FORMAT_R8G8B8A8_SRGB:()=>ar,VK_FORMAT_R8G8B8A8_UINT:()=>zr,VK_FORMAT_R8G8B8A8_UNORM:()=>Dr,VK_FORMAT_R8G8B8_SINT:()=>Ft,VK_FORMAT_R8G8B8_SNORM:()=>Nn,VK_FORMAT_R8G8B8_SRGB:()=>yn,VK_FORMAT_R8G8B8_UINT:()=>vn,VK_FORMAT_R8G8B8_UNORM:()=>fi,VK_FORMAT_R8G8_SINT:()=>In,VK_FORMAT_R8G8_SNORM:()=>jt,VK_FORMAT_R8G8_SRGB:()=>di,VK_FORMAT_R8G8_UINT:()=>on,VK_FORMAT_R8G8_UNORM:()=>Xt,VK_FORMAT_R8_SINT:()=>Vt,VK_FORMAT_R8_SNORM:()=>Ke,VK_FORMAT_R8_SRGB:()=>$t,VK_FORMAT_R8_UINT:()=>$e,VK_FORMAT_R8_UNORM:()=>We,VK_FORMAT_S8_UINT:()=>tc,VK_FORMAT_UNDEFINED:()=>et,VK_FORMAT_X8_D24_UNORM_PACK32:()=>ja,read:()=>mh,write:()=>gh});var g=h("./node_modules/buffer/index.js").Buffer;const C=0,v=1,y=2,E=3,_=0,m=0,w=2,b=0,O=1,R=160,L=161,P=162,Y=163,J=0,j=1,U=0,te=1,ue=2,xe=3,Ee=4,V=5,q=6,Q=7,F=8,z=9,X=10,fe=11,Ae=12,Se=13,Be=14,Ge=15,ht=16,xt=17,at=18,Gt=0,wt=1,Yt=2,Mn=3,je=4,rt=5,At=6,Bt=7,Pt=8,qt=9,un=10,dn=11,bn=0,tn=1,ri=2,ni=13,zt=14,Ue=15,Pe=128,Ye=64,ze=32,He=16,et=0,Me=1,Te=2,Oe=3,Ze=4,ae=5,ee=6,se=7,Ie=8,We=9,Ke=10,$e=13,Vt=14,$t=15,Xt=16,jt=17,on=20,In=21,di=22,fi=23,Nn=24,vn=27,Ft=28,yn=29,Gn=30,Dn=31,bi=34,Pi=35,Zi=36,Dr=37,Ki=38,zr=41,Pr=42,ar=43,Qr=44,xs=45,Qe=48,ut=49,_t=50,nn=58,Wt=59,mn=62,Un=63,Xn=64,ei=65,pn=68,Oi=69,Mi=70,Ti=71,Xr=74,zi=75,er=76,kr=77,Os=78,ro=81,pi=82,Rr=83,to=84,as=85,ce=88,ge=89,_e=90,Le=91,qe=92,yt=95,St=96,wn=97,xn=98,Nt=99,an=100,Pn=101,xi=102,Ui=103,Xi=104,fr=105,ur=106,Vi=107,hs=108,Jr=109,vr=110,Ss=111,po=112,Qs=113,Zr=114,Fs=115,Ds=116,_o=117,Qa=118,js=119,sl=120,Pl=121,Ia=122,Ra=123,Ba=124,ja=125,ol=126,tc=127,Ol=128,qs=129,Fo=130,rd=131,sd=132,rh=133,Dc=134,od=135,sh=136,Pf=137,no=138,Of=139,Ff=140,oh=141,Nf=142,kf=143,ah=144,du=145,ia=146,wo=147,ad=148,al=149,Pc=150,Co=151,Ns=152,Js=153,fu=154,ll=155,Wa=156,ld=157,cd=158,ud=159,Uf=160,nc=161,Gf=162,Hf=163,hd=164,dd=165,zf=166,lh=167,fd=168,pu=169,pd=170,La=171,Is=172,Vf=173,On=174,No=175,ch=176,md=177,Qf=178,ic=179,Fl=180,Nl=181,mu=182,uh=183,Ro=184,Oc=1000156007,so=1000156008,ya=1000156009,Ka=1000156010,hh=1000156011,gu=1000156017,Si=1000156018,rc=1000156019,dh=1000156020,Da=1000156021,sc=1000054e3,fh=1000054001,Ws=1000054002,es=1000054003,ko=1000054004,cl=1000054005,Yo=1000054006,kl=1000054007,mo=1000066e3,ph=1000066001,Mo=1000066002,nt=1000066003,Au=1000066004,oc=1000066005,xa=1000066006,Xa=1000066007,Ul=1000066008,ac=1000066009,lc=1000066010,Ya=1000066011,ra=1000066012,Ea=1000066013,ul=100034e4,Gl=1000340001;class cc{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class ma{constructor(gr,ts,oo,ls){this._dataView=new DataView(gr.buffer,gr.byteOffset+ts,oo),this._littleEndian=ls,this._offset=0}_nextUint8(){const gr=this._dataView.getUint8(this._offset);return this._offset+=1,gr}_nextUint16(){const gr=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,gr}_nextUint32(){const gr=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,gr}_nextUint64(){const gr=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,gr}_nextInt32(){const gr=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,gr}_skip(gr){return this._offset+=gr,this}_scan(gr,ts=0){const oo=this._offset;let ls=0;for(;this._dataView.getUint8(this._offset)!==ts&&ls<gr;)ls++,this._offset++;return ls<gr&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+oo,ls)}}const Fc=new Uint8Array([0]),Es=[171,75,84,88,32,50,48,187,13,10,26,10];function Uo(Ci){return typeof TextEncoder<"u"?new TextEncoder().encode(Ci):g.from(Ci)}function gd(Ci){return typeof TextDecoder<"u"?new TextDecoder().decode(Ci):g.from(Ci).toString("utf8")}function hl(Ci){let gr=0;for(const ls of Ci)gr+=ls.byteLength;const ts=new Uint8Array(gr);let oo=0;for(const ls of Ci)ts.set(new Uint8Array(ls),oo),oo+=ls.byteLength;return ts}function mh(Ci){const gr=new Uint8Array(Ci.buffer,Ci.byteOffset,Es.length);if(gr[0]!==Es[0]||gr[1]!==Es[1]||gr[2]!==Es[2]||gr[3]!==Es[3]||gr[4]!==Es[4]||gr[5]!==Es[5]||gr[6]!==Es[6]||gr[7]!==Es[7]||gr[8]!==Es[8]||gr[9]!==Es[9]||gr[10]!==Es[10]||gr[11]!==Es[11])throw new Error("Missing KTX 2.0 identifier.");const ts=new cc,oo=17*Uint32Array.BYTES_PER_ELEMENT,ls=new ma(Ci,Es.length,oo,!0);ts.vkFormat=ls._nextUint32(),ts.typeSize=ls._nextUint32(),ts.pixelWidth=ls._nextUint32(),ts.pixelHeight=ls._nextUint32(),ts.pixelDepth=ls._nextUint32(),ts.layerCount=ls._nextUint32(),ts.faceCount=ls._nextUint32();const Jo=ls._nextUint32();ts.supercompressionScheme=ls._nextUint32();const Gi=ls._nextUint32(),oa=ls._nextUint32(),jr=ls._nextUint32(),Nc=ls._nextUint32(),uc=ls._nextUint64(),Go=ls._nextUint64(),Ho=new ma(Ci,Es.length+oo,3*Jo*8,!0);for(let io=0;io<Jo;io++)ts.levels.push({levelData:new Uint8Array(Ci.buffer,Ci.byteOffset+Ho._nextUint64(),Ho._nextUint64()),uncompressedByteLength:Ho._nextUint64()});const br=new ma(Ci,Gi,oa,!0),Pa={vendorId:br._skip(4)._nextUint16(),descriptorType:br._nextUint16(),versionNumber:br._nextUint16(),descriptorBlockSize:br._nextUint16(),colorModel:br._nextUint8(),colorPrimaries:br._nextUint8(),transferFunction:br._nextUint8(),flags:br._nextUint8(),texelBlockDimension:[br._nextUint8(),br._nextUint8(),br._nextUint8(),br._nextUint8()],bytesPlane:[br._nextUint8(),br._nextUint8(),br._nextUint8(),br._nextUint8(),br._nextUint8(),br._nextUint8(),br._nextUint8(),br._nextUint8()],samples:[]},hc=(Pa.descriptorBlockSize/4-6)/4;for(let io=0;io<hc;io++){const _a={bitOffset:br._nextUint16(),bitLength:br._nextUint8(),channelType:br._nextUint8(),samplePosition:[br._nextUint8(),br._nextUint8(),br._nextUint8(),br._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&_a.channelType?(_a.sampleLower=br._nextInt32(),_a.sampleUpper=br._nextInt32()):(_a.sampleLower=br._nextUint32(),_a.sampleUpper=br._nextUint32()),Pa.samples[io]=_a}ts.dataFormatDescriptor.length=0,ts.dataFormatDescriptor.push(Pa);const zo=new ma(Ci,jr,Nc,!0);for(;zo._offset<Nc;){const io=zo._nextUint32(),_a=zo._scan(io),Oa=gd(_a),zl=zo._scan(io-_a.byteLength);ts.keyValue[Oa]=Oa.match(/^ktx/i)?gd(zl):zl,zo._offset%4&&zo._skip(4-zo._offset%4)}if(Go<=0)return ts;const ms=new ma(Ci,uc,Go,!0),Us=ms._nextUint16(),Yr=ms._nextUint16(),gs=ms._nextUint32(),ao=ms._nextUint32(),qa=ms._nextUint32(),Hl=ms._nextUint32(),Ad=[];for(let io=0;io<Jo;io++)Ad.push({imageFlags:ms._nextUint32(),rgbSliceByteOffset:ms._nextUint32(),rgbSliceByteLength:ms._nextUint32(),alphaSliceByteOffset:ms._nextUint32(),alphaSliceByteLength:ms._nextUint32()});const vd=uc+ms._offset,Ah=vd+gs,vh=Ah+ao,yd=vh+qa,jf=new Uint8Array(Ci.buffer,Ci.byteOffset+vd,gs),xd=new Uint8Array(Ci.buffer,Ci.byteOffset+Ah,ao),ds=new Uint8Array(Ci.buffer,Ci.byteOffset+vh,qa),ba=new Uint8Array(Ci.buffer,Ci.byteOffset+yd,Hl);return ts.globalData={endpointCount:Us,selectorCount:Yr,imageDescs:Ad,endpointsData:jf,selectorsData:xd,tablesData:ds,extendedData:ba},ts}function qo(){return(qo=Object.assign||function(Ci){for(var gr=1;gr<arguments.length;gr++){var ts=arguments[gr];for(var oo in ts)Object.prototype.hasOwnProperty.call(ts,oo)&&(Ci[oo]=ts[oo])}return Ci}).apply(this,arguments)}const sa={keepWriter:!1};function gh(Ci,gr={}){gr=qo({},sa,gr);let ts=new ArrayBuffer(0);if(Ci.globalData){const Us=new ArrayBuffer(20+5*Ci.globalData.imageDescs.length*4),Yr=new DataView(Us);Yr.setUint16(0,Ci.globalData.endpointCount,!0),Yr.setUint16(2,Ci.globalData.selectorCount,!0),Yr.setUint32(4,Ci.globalData.endpointsData.byteLength,!0),Yr.setUint32(8,Ci.globalData.selectorsData.byteLength,!0),Yr.setUint32(12,Ci.globalData.tablesData.byteLength,!0),Yr.setUint32(16,Ci.globalData.extendedData.byteLength,!0);for(let gs=0;gs<Ci.globalData.imageDescs.length;gs++){const ao=Ci.globalData.imageDescs[gs];Yr.setUint32(20+5*gs*4+0,ao.imageFlags,!0),Yr.setUint32(20+5*gs*4+4,ao.rgbSliceByteOffset,!0),Yr.setUint32(20+5*gs*4+8,ao.rgbSliceByteLength,!0),Yr.setUint32(20+5*gs*4+12,ao.alphaSliceByteOffset,!0),Yr.setUint32(20+5*gs*4+16,ao.alphaSliceByteLength,!0)}ts=hl([Us,Ci.globalData.endpointsData,Ci.globalData.selectorsData,Ci.globalData.tablesData,Ci.globalData.extendedData])}const oo=[];let ls=Ci.keyValue;gr.keepWriter||(ls=qo({},Ci.keyValue,{KTXwriter:"KTX-Parse v0.3.1"}));for(const Us in ls){const Yr=ls[Us],gs=Uo(Us),ao=typeof Yr=="string"?Uo(Yr):Yr,qa=gs.byteLength+1+ao.byteLength+1,Hl=qa%4?4-qa%4:0;oo.push(hl([new Uint32Array([qa]),gs,Fc,ao,Fc,new Uint8Array(Hl).fill(0)]))}const Jo=hl(oo);if(Ci.dataFormatDescriptor.length!==1||Ci.dataFormatDescriptor[0].descriptorType!==0)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const Gi=Ci.dataFormatDescriptor[0],oa=new ArrayBuffer(28+16*Gi.samples.length),jr=new DataView(oa),Nc=24+16*Gi.samples.length;if(jr.setUint32(0,oa.byteLength,!0),jr.setUint16(4,Gi.vendorId,!0),jr.setUint16(6,Gi.descriptorType,!0),jr.setUint16(8,Gi.versionNumber,!0),jr.setUint16(10,Nc,!0),jr.setUint8(12,Gi.colorModel),jr.setUint8(13,Gi.colorPrimaries),jr.setUint8(14,Gi.transferFunction),jr.setUint8(15,Gi.flags),!Array.isArray(Gi.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");jr.setUint8(16,Gi.texelBlockDimension[0]),jr.setUint8(17,Gi.texelBlockDimension[1]),jr.setUint8(18,Gi.texelBlockDimension[2]),jr.setUint8(19,Gi.texelBlockDimension[3]);for(let Us=0;Us<8;Us++)jr.setUint8(20+Us,Gi.bytesPlane[Us]);for(let Us=0;Us<Gi.samples.length;Us++){const Yr=Gi.samples[Us],gs=28+16*Us;if(Yr.channelID)throw new Error("channelID has been renamed to channelType.");jr.setUint16(gs+0,Yr.bitOffset,!0),jr.setUint8(gs+2,Yr.bitLength),jr.setUint8(gs+3,Yr.channelType),jr.setUint8(gs+4,Yr.samplePosition[0]),jr.setUint8(gs+5,Yr.samplePosition[1]),jr.setUint8(gs+6,Yr.samplePosition[2]),jr.setUint8(gs+7,Yr.samplePosition[3]),64&Yr.channelType?(jr.setInt32(gs+8,Yr.sampleLower,!0),jr.setInt32(gs+12,Yr.sampleUpper,!0)):(jr.setUint32(gs+8,Yr.sampleLower,!0),jr.setUint32(gs+12,Yr.sampleUpper,!0))}const uc=Es.length+68+3*Ci.levels.length*8,Go=uc+oa.byteLength;let Ho=ts.byteLength>0?Go+Jo.byteLength:0;Ho%8&&(Ho+=8-Ho%8);const br=[],Pa=new DataView(new ArrayBuffer(3*Ci.levels.length*8));let hc=(Ho||Go+Jo.byteLength)+ts.byteLength;for(let Us=0;Us<Ci.levels.length;Us++){const Yr=Ci.levels[Us];br.push(Yr.levelData),Pa.setBigUint64(24*Us+0,BigInt(hc),!0),Pa.setBigUint64(24*Us+8,BigInt(Yr.levelData.byteLength),!0),Pa.setBigUint64(24*Us+16,BigInt(Yr.uncompressedByteLength),!0),hc+=Yr.levelData.byteLength}const zo=new ArrayBuffer(68),ms=new DataView(zo);return ms.setUint32(0,Ci.vkFormat,!0),ms.setUint32(4,Ci.typeSize,!0),ms.setUint32(8,Ci.pixelWidth,!0),ms.setUint32(12,Ci.pixelHeight,!0),ms.setUint32(16,Ci.pixelDepth,!0),ms.setUint32(20,Ci.layerCount,!0),ms.setUint32(24,Ci.faceCount,!0),ms.setUint32(28,Ci.levels.length,!0),ms.setUint32(32,Ci.supercompressionScheme,!0),ms.setUint32(36,uc,!0),ms.setUint32(40,oa.byteLength,!0),ms.setUint32(44,Go,!0),ms.setUint32(48,Jo.byteLength,!0),ms.setBigUint64(52,BigInt(ts.byteLength>0?Ho:0),!0),ms.setBigUint64(60,BigInt(ts.byteLength),!0),new Uint8Array(hl([new Uint8Array(Es).buffer,zo,Pa.buffer,oa,Jo,Ho>0?new ArrayBuffer(Ho-(Go+Jo.byteLength)):new ArrayBuffer(0),ts,...br]))}},"./node_modules/super-three/examples/jsm/libs/zstddec.module.js":(S,I,h)=>{h.r(I),h.d(I,{ZSTDDecoder:()=>_});var g=h("./node_modules/buffer/index.js").Buffer;let C,v,y;const E={env:{emscripten_notify_memory_growth:function(w){y=new Uint8Array(v.exports.memory.buffer)}}};class _{init(){return C||(C=typeof fetch<"u"?fetch("data:application/wasm;base64,"+m).then(b=>b.arrayBuffer()).then(b=>WebAssembly.instantiate(b,E)).then(this._init):WebAssembly.instantiate(g.from(m,"base64"),E).then(this._init),C)}_init(b){v=b.instance,E.env.emscripten_notify_memory_growth(0)}decode(b,O=0){if(!v)throw new Error("ZSTDDecoder: Await .init() before decoding.");const R=b.byteLength,L=v.exports.malloc(R);y.set(b,L),O=O||Number(v.exports.ZSTD_findDecompressedSize(L,R));const P=v.exports.malloc(O),Y=v.exports.ZSTD_decompress(P,O,L,R),J=y.slice(P,P+Y);return v.exports.free(L),v.exports.free(P),J}}const m="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"},"./node_modules/super-three/examples/jsm/lights/LightProbeGenerator.js":(S,I,h)=>{h.r(I),h.d(I,{LightProbeGenerator:()=>C});var g=h("./node_modules/super-three/build/three.module.js");class C{static fromCubeTexture(E){let _=0;const m=new g.Vector3,w=new g.Vector3,b=new g.Color,O=[0,0,0,0,0,0,0,0,0],R=new g.SphericalHarmonics3,L=R.coefficients;for(let Y=0;Y<6;Y++){const J=E.image[Y],j=J.width,U=J.height,te=document.createElement("canvas");te.width=j,te.height=U;const ue=te.getContext("2d");ue.drawImage(J,0,0,j,U);const xe=ue.getImageData(0,0,j,U),Ee=xe.data,V=xe.width,q=2/V;for(let Q=0,F=Ee.length;Q<F;Q+=4){b.setRGB(Ee[Q]/255,Ee[Q+1]/255,Ee[Q+2]/255),v(b,E.encoding);const z=Q/4,X=-1+(z%V+.5)*q,fe=1-(Math.floor(z/V)+.5)*q;switch(Y){case 0:m.set(-1,fe,-X);break;case 1:m.set(1,fe,X);break;case 2:m.set(-X,1,-fe);break;case 3:m.set(-X,-1,fe);break;case 4:m.set(-X,fe,1);break;case 5:m.set(X,fe,-1);break}const Ae=m.lengthSq(),Se=4/(Math.sqrt(Ae)*Ae);_+=Se,w.copy(m).normalize(),g.SphericalHarmonics3.getBasisAt(w,O);for(let Be=0;Be<9;Be++)L[Be].x+=O[Be]*b.r*Se,L[Be].y+=O[Be]*b.g*Se,L[Be].z+=O[Be]*b.b*Se}}const P=4*Math.PI/_;for(let Y=0;Y<9;Y++)L[Y].x*=P,L[Y].y*=P,L[Y].z*=P;return new g.LightProbe(R)}static fromCubeRenderTarget(E,_){let m=0;const w=new g.Vector3,b=new g.Vector3,O=new g.Color,R=[0,0,0,0,0,0,0,0,0],L=new g.SphericalHarmonics3,P=L.coefficients;for(let J=0;J<6;J++){const j=_.width,U=new Uint8Array(j*j*4);E.readRenderTargetPixels(_,0,0,j,j,U,J);const te=2/j;for(let ue=0,xe=U.length;ue<xe;ue+=4){O.setRGB(U[ue]/255,U[ue+1]/255,U[ue+2]/255),v(O,_.texture.encoding);const Ee=ue/4,V=-1+(Ee%j+.5)*te,q=1-(Math.floor(Ee/j)+.5)*te;switch(J){case 0:w.set(1,q,-V);break;case 1:w.set(-1,q,V);break;case 2:w.set(V,1,-q);break;case 3:w.set(V,-1,q);break;case 4:w.set(V,q,1);break;case 5:w.set(-V,q,-1);break}const Q=w.lengthSq(),F=4/(Math.sqrt(Q)*Q);m+=F,b.copy(w).normalize(),g.SphericalHarmonics3.getBasisAt(b,R);for(let z=0;z<9;z++)P[z].x+=R[z]*O.r*F,P[z].y+=R[z]*O.g*F,P[z].z+=R[z]*O.b*F}}const Y=4*Math.PI/m;for(let J=0;J<9;J++)P[J].x*=Y,P[J].y*=Y,P[J].z*=Y;return new g.LightProbe(L)}}function v(y,E){switch(E){case g.sRGBEncoding:y.convertSRGBToLinear();break;case g.LinearEncoding:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported encoding.");break}return y}},"./node_modules/super-three/examples/jsm/loaders/DRACOLoader.js":(S,I,h)=>{h.r(I),h.d(I,{DRACOLoader:()=>v});var g=h("./node_modules/super-three/build/three.module.js");const C=new WeakMap;class v extends g.Loader{constructor(_){super(_),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(_){return this.decoderPath=_,this}setDecoderConfig(_){return this.decoderConfig=_,this}setWorkerLimit(_){return this.workerLimit=_,this}load(_,m,w,b){const O=new g.FileLoader(this.manager);O.setPath(this.path),O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setWithCredentials(this.withCredentials),O.load(_,R=>{this.decodeDracoFile(R,m).catch(b)},w,b)}decodeDracoFile(_,m,w,b){const O={attributeIDs:w||this.defaultAttributeIDs,attributeTypes:b||this.defaultAttributeTypes,useUniqueIDs:!!w};return this.decodeGeometry(_,O).then(m)}decodeGeometry(_,m){const w=JSON.stringify(m);if(C.has(_)){const P=C.get(_);if(P.key===w)return P.promise;if(_.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let b;const O=this.workerNextTaskID++,R=_.byteLength,L=this._getWorker(O,R).then(P=>(b=P,new Promise((Y,J)=>{b._callbacks[O]={resolve:Y,reject:J},b.postMessage({type:"decode",id:O,taskConfig:m,buffer:_},[_])}))).then(P=>this._createGeometry(P.geometry));return L.catch(()=>!0).then(()=>{b&&O&&this._releaseTask(b,O)}),C.set(_,{key:w,promise:L}),L}_createGeometry(_){const m=new g.BufferGeometry;_.index&&m.setIndex(new g.BufferAttribute(_.index.array,1));for(let w=0;w<_.attributes.length;w++){const b=_.attributes[w],O=b.name,R=b.array,L=b.itemSize;m.setAttribute(O,new g.BufferAttribute(R,L))}return m}_loadLibrary(_,m){const w=new g.FileLoader(this.manager);return w.setPath(this.decoderPath),w.setResponseType(m),w.setWithCredentials(this.withCredentials),new Promise((b,O)=>{w.load(_,b,void 0,O)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const _=typeof WebAssembly!="object"||this.decoderConfig.type==="js",m=[];return _?m.push(this._loadLibrary("draco_decoder.js","text")):(m.push(this._loadLibrary("draco_wasm_wrapper.js","text")),m.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(m).then(w=>{const b=w[0];_||(this.decoderConfig.wasmBinary=w[1]);const O=y.toString(),R=["/* draco decoder */",b,"","/* worker */",O.substring(O.indexOf("{")+1,O.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([R]))}),this.decoderPending}_getWorker(_,m){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const b=new Worker(this.workerSourceURL);b._callbacks={},b._taskCosts={},b._taskLoad=0,b.postMessage({type:"init",decoderConfig:this.decoderConfig}),b.onmessage=function(O){const R=O.data;switch(R.type){case"decode":b._callbacks[R.id].resolve(R);break;case"error":b._callbacks[R.id].reject(R);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+R.type+'"')}},this.workerPool.push(b)}else this.workerPool.sort(function(b,O){return b._taskLoad>O._taskLoad?-1:1});const w=this.workerPool[this.workerPool.length-1];return w._taskCosts[_]=m,w._taskLoad+=m,w})}_releaseTask(_,m){_._taskLoad-=_._taskCosts[m],delete _._callbacks[m],delete _._taskCosts[m]}debug(){console.log("Task load: ",this.workerPool.map(_=>_._taskLoad))}dispose(){for(let _=0;_<this.workerPool.length;++_)this.workerPool[_].terminate();return this.workerPool.length=0,this}}function y(){let E,_;onmessage=function(R){const L=R.data;switch(L.type){case"init":E=L.decoderConfig,_=new Promise(function(J){E.onModuleLoaded=function(j){J({draco:j})},DracoDecoderModule(E)});break;case"decode":const P=L.buffer,Y=L.taskConfig;_.then(J=>{const j=J.draco,U=new j.Decoder,te=new j.DecoderBuffer;te.Init(new Int8Array(P),P.byteLength);try{const ue=m(j,U,te,Y),xe=ue.attributes.map(Ee=>Ee.array.buffer);ue.index&&xe.push(ue.index.array.buffer),self.postMessage({type:"decode",id:L.id,geometry:ue},xe)}catch(ue){console.error(ue),self.postMessage({type:"error",id:L.id,error:ue.message})}finally{j.destroy(te),j.destroy(U)}});break}};function m(R,L,P,Y){const J=Y.attributeIDs,j=Y.attributeTypes;let U,te;const ue=L.GetEncodedGeometryType(P);if(ue===R.TRIANGULAR_MESH)U=new R.Mesh,te=L.DecodeBufferToMesh(P,U);else if(ue===R.POINT_CLOUD)U=new R.PointCloud,te=L.DecodeBufferToPointCloud(P,U);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!te.ok()||U.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+te.error_msg());const xe={index:null,attributes:[]};for(const Ee in J){const V=self[j[Ee]];let q,Q;if(Y.useUniqueIDs)Q=J[Ee],q=L.GetAttributeByUniqueId(U,Q);else{if(Q=L.GetAttributeId(U,R[J[Ee]]),Q===-1)continue;q=L.GetAttribute(U,Q)}xe.attributes.push(b(R,L,U,Ee,V,q))}return ue===R.TRIANGULAR_MESH&&(xe.index=w(R,L,U)),R.destroy(U),xe}function w(R,L,P){const J=P.num_faces()*3,j=J*4,U=R._malloc(j);L.GetTrianglesUInt32Array(P,j,U);const te=new Uint32Array(R.HEAPF32.buffer,U,J).slice();return R._free(U),{array:te,itemSize:1}}function b(R,L,P,Y,J,j){const U=j.num_components(),ue=P.num_points()*U,xe=ue*J.BYTES_PER_ELEMENT,Ee=O(R,J),V=R._malloc(xe);L.GetAttributeDataArrayForAllPoints(P,j,Ee,xe,V);const q=new J(R.HEAPF32.buffer,V,ue).slice();return R._free(V),{name:Y,array:q,itemSize:U}}function O(R,L){switch(L){case Float32Array:return R.DT_FLOAT32;case Int8Array:return R.DT_INT8;case Int16Array:return R.DT_INT16;case Int32Array:return R.DT_INT32;case Uint8Array:return R.DT_UINT8;case Uint16Array:return R.DT_UINT16;case Uint32Array:return R.DT_UINT32}}}},"./node_modules/super-three/examples/jsm/loaders/GLTFLoader.js":(S,I,h)=>{h.r(I),h.d(I,{GLTFLoader:()=>C});var g=h("./node_modules/super-three/build/three.module.js");class C extends g.Loader{constructor(Ue){super(Ue),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(Pe){return new w(Pe)}),this.register(function(Pe){return new J(Pe)}),this.register(function(Pe){return new j(Pe)}),this.register(function(Pe){return new O(Pe)}),this.register(function(Pe){return new R(Pe)}),this.register(function(Pe){return new L(Pe)}),this.register(function(Pe){return new P(Pe)}),this.register(function(Pe){return new m(Pe)}),this.register(function(Pe){return new Y(Pe)}),this.register(function(Pe){return new b(Pe)}),this.register(function(Pe){return new E(Pe)}),this.register(function(Pe){return new U(Pe)}),this.register(function(Pe){return new te(Pe)})}load(Ue,Pe,Ye,ze){const He=this;let et;this.resourcePath!==""?et=this.resourcePath:this.path!==""?et=this.path:et=g.LoaderUtils.extractUrlBase(Ue),this.manager.itemStart(Ue);const Me=function(Oe){ze?ze(Oe):console.error(Oe),He.manager.itemError(Ue),He.manager.itemEnd(Ue)},Te=new g.FileLoader(this.manager);Te.setPath(this.path),Te.setResponseType("arraybuffer"),Te.setRequestHeader(this.requestHeader),Te.setWithCredentials(this.withCredentials),Te.load(Ue,function(Oe){try{He.parse(Oe,et,function(Ze){Pe(Ze),He.manager.itemEnd(Ue)},Me)}catch(Ze){Me(Ze)}},Ye,Me)}setDRACOLoader(Ue){return this.dracoLoader=Ue,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(Ue){return this.ktx2Loader=Ue,this}setMeshoptDecoder(Ue){return this.meshoptDecoder=Ue,this}register(Ue){return this.pluginCallbacks.indexOf(Ue)===-1&&this.pluginCallbacks.push(Ue),this}unregister(Ue){return this.pluginCallbacks.indexOf(Ue)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(Ue),1),this}parse(Ue,Pe,Ye,ze){let He;const et={},Me={};if(typeof Ue=="string")He=JSON.parse(Ue);else if(Ue instanceof ArrayBuffer)if(g.LoaderUtils.decodeText(new Uint8Array(Ue,0,4))===ue){try{et[y.KHR_BINARY_GLTF]=new V(Ue)}catch(Ze){ze&&ze(Ze);return}He=JSON.parse(et[y.KHR_BINARY_GLTF].content)}else He=JSON.parse(g.LoaderUtils.decodeText(new Uint8Array(Ue)));else He=Ue;if(He.asset===void 0||He.asset.version[0]<2){ze&&ze(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Te=new dn(He,{path:Pe||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Te.fileLoader.setRequestHeader(this.requestHeader);for(let Oe=0;Oe<this.pluginCallbacks.length;Oe++){const Ze=this.pluginCallbacks[Oe](Te);Me[Ze.name]=Ze,et[Ze.name]=!0}if(He.extensionsUsed)for(let Oe=0;Oe<He.extensionsUsed.length;++Oe){const Ze=He.extensionsUsed[Oe],ae=He.extensionsRequired||[];switch(Ze){case y.KHR_MATERIALS_UNLIT:et[Ze]=new _;break;case y.KHR_DRACO_MESH_COMPRESSION:et[Ze]=new q(He,this.dracoLoader);break;case y.KHR_TEXTURE_TRANSFORM:et[Ze]=new Q;break;case y.KHR_MESH_QUANTIZATION:et[Ze]=new F;break;default:ae.indexOf(Ze)>=0&&Me[Ze]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Ze+'".')}}Te.setExtensions(et),Te.setPlugins(Me),Te.parse(Ye,ze)}parseAsync(Ue,Pe){const Ye=this;return new Promise(function(ze,He){Ye.parse(Ue,Pe,ze,He)})}}function v(){let zt={};return{get:function(Ue){return zt[Ue]},add:function(Ue,Pe){zt[Ue]=Pe},remove:function(Ue){delete zt[Ue]},removeAll:function(){zt={}}}}const y={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class E{constructor(Ue){this.parser=Ue,this.name=y.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const Ue=this.parser,Pe=this.parser.json.nodes||[];for(let Ye=0,ze=Pe.length;Ye<ze;Ye++){const He=Pe[Ye];He.extensions&&He.extensions[this.name]&&He.extensions[this.name].light!==void 0&&Ue._addNodeRef(this.cache,He.extensions[this.name].light)}}_loadLight(Ue){const Pe=this.parser,Ye="light:"+Ue;let ze=Pe.cache.get(Ye);if(ze)return ze;const He=Pe.json,Te=((He.extensions&&He.extensions[this.name]||{}).lights||[])[Ue];let Oe;const Ze=new g.Color(16777215);Te.color!==void 0&&Ze.fromArray(Te.color);const ae=Te.range!==void 0?Te.range:0;switch(Te.type){case"directional":Oe=new g.DirectionalLight(Ze),Oe.target.position.set(0,0,-1),Oe.add(Oe.target);break;case"point":Oe=new g.PointLight(Ze),Oe.distance=ae;break;case"spot":Oe=new g.SpotLight(Ze),Oe.distance=ae,Te.spot=Te.spot||{},Te.spot.innerConeAngle=Te.spot.innerConeAngle!==void 0?Te.spot.innerConeAngle:0,Te.spot.outerConeAngle=Te.spot.outerConeAngle!==void 0?Te.spot.outerConeAngle:Math.PI/4,Oe.angle=Te.spot.outerConeAngle,Oe.penumbra=1-Te.spot.innerConeAngle/Te.spot.outerConeAngle,Oe.target.position.set(0,0,-1),Oe.add(Oe.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Te.type)}return Oe.position.set(0,0,0),Oe.decay=2,je(Oe,Te),Te.intensity!==void 0&&(Oe.intensity=Te.intensity),Oe.name=Pe.createUniqueName(Te.name||"light_"+Ue),ze=Promise.resolve(Oe),Pe.cache.add(Ye,ze),ze}getDependency(Ue,Pe){if(Ue==="light")return this._loadLight(Pe)}createNodeAttachment(Ue){const Pe=this,Ye=this.parser,He=Ye.json.nodes[Ue],Me=(He.extensions&&He.extensions[this.name]||{}).light;return Me===void 0?null:this._loadLight(Me).then(function(Te){return Ye._getNodeRef(Pe.cache,Me,Te)})}}class _{constructor(){this.name=y.KHR_MATERIALS_UNLIT}getMaterialType(){return g.MeshBasicMaterial}extendParams(Ue,Pe,Ye){const ze=[];Ue.color=new g.Color(1,1,1),Ue.opacity=1;const He=Pe.pbrMetallicRoughness;if(He){if(Array.isArray(He.baseColorFactor)){const et=He.baseColorFactor;Ue.color.fromArray(et),Ue.opacity=et[3]}He.baseColorTexture!==void 0&&ze.push(Ye.assignTexture(Ue,"map",He.baseColorTexture,g.sRGBEncoding))}return Promise.all(ze)}}class m{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(Ue,Pe){const ze=this.parser.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=ze.extensions[this.name].emissiveStrength;return He!==void 0&&(Pe.emissiveIntensity=He),Promise.resolve()}}class w{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_CLEARCOAT}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];if(et.clearcoatFactor!==void 0&&(Pe.clearcoat=et.clearcoatFactor),et.clearcoatTexture!==void 0&&He.push(Ye.assignTexture(Pe,"clearcoatMap",et.clearcoatTexture)),et.clearcoatRoughnessFactor!==void 0&&(Pe.clearcoatRoughness=et.clearcoatRoughnessFactor),et.clearcoatRoughnessTexture!==void 0&&He.push(Ye.assignTexture(Pe,"clearcoatRoughnessMap",et.clearcoatRoughnessTexture)),et.clearcoatNormalTexture!==void 0&&(He.push(Ye.assignTexture(Pe,"clearcoatNormalMap",et.clearcoatNormalTexture)),et.clearcoatNormalTexture.scale!==void 0)){const Me=et.clearcoatNormalTexture.scale;Pe.clearcoatNormalScale=new g.Vector2(Me,Me)}return Promise.all(He)}}class b{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_IRIDESCENCE}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];return et.iridescenceFactor!==void 0&&(Pe.iridescence=et.iridescenceFactor),et.iridescenceTexture!==void 0&&He.push(Ye.assignTexture(Pe,"iridescenceMap",et.iridescenceTexture)),et.iridescenceIor!==void 0&&(Pe.iridescenceIOR=et.iridescenceIor),Pe.iridescenceThicknessRange===void 0&&(Pe.iridescenceThicknessRange=[100,400]),et.iridescenceThicknessMinimum!==void 0&&(Pe.iridescenceThicknessRange[0]=et.iridescenceThicknessMinimum),et.iridescenceThicknessMaximum!==void 0&&(Pe.iridescenceThicknessRange[1]=et.iridescenceThicknessMaximum),et.iridescenceThicknessTexture!==void 0&&He.push(Ye.assignTexture(Pe,"iridescenceThicknessMap",et.iridescenceThicknessTexture)),Promise.all(He)}}class O{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_SHEEN}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[];Pe.sheenColor=new g.Color(0,0,0),Pe.sheenRoughness=0,Pe.sheen=1;const et=ze.extensions[this.name];return et.sheenColorFactor!==void 0&&Pe.sheenColor.fromArray(et.sheenColorFactor),et.sheenRoughnessFactor!==void 0&&(Pe.sheenRoughness=et.sheenRoughnessFactor),et.sheenColorTexture!==void 0&&He.push(Ye.assignTexture(Pe,"sheenColorMap",et.sheenColorTexture,g.sRGBEncoding)),et.sheenRoughnessTexture!==void 0&&He.push(Ye.assignTexture(Pe,"sheenRoughnessMap",et.sheenRoughnessTexture)),Promise.all(He)}}class R{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_TRANSMISSION}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];return et.transmissionFactor!==void 0&&(Pe.transmission=et.transmissionFactor),et.transmissionTexture!==void 0&&He.push(Ye.assignTexture(Pe,"transmissionMap",et.transmissionTexture)),Promise.all(He)}}class L{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_VOLUME}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];Pe.thickness=et.thicknessFactor!==void 0?et.thicknessFactor:0,et.thicknessTexture!==void 0&&He.push(Ye.assignTexture(Pe,"thicknessMap",et.thicknessTexture)),Pe.attenuationDistance=et.attenuationDistance||1/0;const Me=et.attenuationColor||[1,1,1];return Pe.attenuationColor=new g.Color(Me[0],Me[1],Me[2]),Promise.all(He)}}class P{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_IOR}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const ze=this.parser.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=ze.extensions[this.name];return Pe.ior=He.ior!==void 0?He.ior:1.5,Promise.resolve()}}class Y{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_SPECULAR}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];Pe.specularIntensity=et.specularFactor!==void 0?et.specularFactor:1,et.specularTexture!==void 0&&He.push(Ye.assignTexture(Pe,"specularIntensityMap",et.specularTexture));const Me=et.specularColorFactor||[1,1,1];return Pe.specularColor=new g.Color(Me[0],Me[1],Me[2]),et.specularColorTexture!==void 0&&He.push(Ye.assignTexture(Pe,"specularColorMap",et.specularColorTexture,g.sRGBEncoding)),Promise.all(He)}}class J{constructor(Ue){this.parser=Ue,this.name=y.KHR_TEXTURE_BASISU}loadTexture(Ue){const Pe=this.parser,Ye=Pe.json,ze=Ye.textures[Ue];if(!ze.extensions||!ze.extensions[this.name])return null;const He=ze.extensions[this.name],et=Pe.options.ktx2Loader;if(!et){if(Ye.extensionsRequired&&Ye.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return Pe.loadTextureImage(Ue,He.source,et)}}class j{constructor(Ue){this.parser=Ue,this.name=y.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(Ue){const Pe=this.name,Ye=this.parser,ze=Ye.json,He=ze.textures[Ue];if(!He.extensions||!He.extensions[Pe])return null;const et=He.extensions[Pe],Me=ze.images[et.source];let Te=Ye.textureLoader;if(Me.uri){const Oe=Ye.options.manager.getHandler(Me.uri);Oe!==null&&(Te=Oe)}return this.detectSupport().then(function(Oe){if(Oe)return Ye.loadTextureImage(Ue,et.source,Te);if(ze.extensionsRequired&&ze.extensionsRequired.indexOf(Pe)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Ye.loadTexture(Ue)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(Ue){const Pe=new Image;Pe.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",Pe.onload=Pe.onerror=function(){Ue(Pe.height===1)}})),this.isSupported}}class U{constructor(Ue){this.name=y.EXT_MESHOPT_COMPRESSION,this.parser=Ue}loadBufferView(Ue){const Pe=this.parser.json,Ye=Pe.bufferViews[Ue];if(Ye.extensions&&Ye.extensions[this.name]){const ze=Ye.extensions[this.name],He=this.parser.getDependency("buffer",ze.buffer),et=this.parser.options.meshoptDecoder;if(!et||!et.supported){if(Pe.extensionsRequired&&Pe.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return He.then(function(Me){const Te=ze.byteOffset||0,Oe=ze.byteLength||0,Ze=ze.count,ae=ze.byteStride,ee=new Uint8Array(Me,Te,Oe);return et.decodeGltfBufferAsync?et.decodeGltfBufferAsync(Ze,ae,ee,ze.mode,ze.filter).then(function(se){return se.buffer}):et.ready.then(function(){const se=new ArrayBuffer(Ze*ae);return et.decodeGltfBuffer(new Uint8Array(se),Ze,ae,ee,ze.mode,ze.filter),se})})}else return null}}class te{constructor(Ue){this.name=y.EXT_MESH_GPU_INSTANCING,this.parser=Ue}createNodeMesh(Ue){const Pe=this.parser.json,Ye=Pe.nodes[Ue];if(!Ye.extensions||!Ye.extensions[this.name]||Ye.mesh===void 0)return null;const ze=Pe.meshes[Ye.mesh];for(const Oe of ze.primitives)if(Oe.mode!==Ae.TRIANGLES&&Oe.mode!==Ae.TRIANGLE_STRIP&&Oe.mode!==Ae.TRIANGLE_FAN&&Oe.mode!==void 0)return null;const et=Ye.extensions[this.name].attributes,Me=[],Te={};for(const Oe in et)Me.push(this.parser.getDependency("accessor",et[Oe]).then(Ze=>(Te[Oe]=Ze,Te[Oe])));return Me.length<1?null:(Me.push(this.parser.createNodeMesh(Ue)),Promise.all(Me).then(Oe=>{const Ze=Oe.pop(),ae=Ze.isGroup?Ze.children:[Ze],ee=Oe[0].count,se=[];for(const Ie of ae){const We=new g.Matrix4,Ke=new g.Vector3,$e=new g.Quaternion,Vt=new g.Vector3(1,1,1),$t=new g.InstancedMesh(Ie.geometry,Ie.material,ee);for(let Xt=0;Xt<ee;Xt++)Te.TRANSLATION&&Ke.fromBufferAttribute(Te.TRANSLATION,Xt),Te.ROTATION&&$e.fromBufferAttribute(Te.ROTATION,Xt),Te.SCALE&&Vt.fromBufferAttribute(Te.SCALE,Xt),$t.setMatrixAt(Xt,We.compose(Ke,$e,Vt));for(const Xt in Te)Xt!=="TRANSLATION"&&Xt!=="ROTATION"&&Xt!=="SCALE"&&Ie.geometry.setAttribute(Xt,Te[Xt]);g.Object3D.prototype.copy.call($t,Ie),$t.frustumCulled=!1,this.parser.assignFinalMaterial($t),se.push($t)}return Ze.isGroup?(Ze.clear(),Ze.add(...se),Ze):se[0]}))}}const ue="glTF",xe=12,Ee={JSON:1313821514,BIN:5130562};class V{constructor(Ue){this.name=y.KHR_BINARY_GLTF,this.content=null,this.body=null;const Pe=new DataView(Ue,0,xe);if(this.header={magic:g.LoaderUtils.decodeText(new Uint8Array(Ue.slice(0,4))),version:Pe.getUint32(4,!0),length:Pe.getUint32(8,!0)},this.header.magic!==ue)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const Ye=this.header.length-xe,ze=new DataView(Ue,xe);let He=0;for(;He<Ye;){const et=ze.getUint32(He,!0);He+=4;const Me=ze.getUint32(He,!0);if(He+=4,Me===Ee.JSON){const Te=new Uint8Array(Ue,xe+He,et);this.content=g.LoaderUtils.decodeText(Te)}else if(Me===Ee.BIN){const Te=xe+He;this.body=Ue.slice(Te,Te+et)}He+=et}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class q{constructor(Ue,Pe){if(!Pe)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=y.KHR_DRACO_MESH_COMPRESSION,this.json=Ue,this.dracoLoader=Pe,this.dracoLoader.preload()}decodePrimitive(Ue,Pe){const Ye=this.json,ze=this.dracoLoader,He=Ue.extensions[this.name].bufferView,et=Ue.extensions[this.name].attributes,Me={},Te={},Oe={};for(const Ze in et){const ae=xt[Ze]||Ze.toLowerCase();Me[ae]=et[Ze]}for(const Ze in Ue.attributes){const ae=xt[Ze]||Ze.toLowerCase();if(et[Ze]!==void 0){const ee=Ye.accessors[Ue.attributes[Ze]],se=Se[ee.componentType];Oe[ae]=se.name,Te[ae]=ee.normalized===!0}}return Pe.getDependency("bufferView",He).then(function(Ze){return new Promise(function(ae){ze.decodeDracoFile(Ze,function(ee){for(const se in ee.attributes){const Ie=ee.attributes[se],We=Te[se];We!==void 0&&(Ie.normalized=We)}ae(ee)},Me,Oe)})})}}class Q{constructor(){this.name=y.KHR_TEXTURE_TRANSFORM}extendTexture(Ue,Pe){return Pe.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),Pe.offset===void 0&&Pe.rotation===void 0&&Pe.scale===void 0||(Ue=Ue.clone(),Pe.offset!==void 0&&Ue.offset.fromArray(Pe.offset),Pe.rotation!==void 0&&(Ue.rotation=Pe.rotation),Pe.scale!==void 0&&Ue.repeat.fromArray(Pe.scale),Ue.needsUpdate=!0),Ue}}class F{constructor(){this.name=y.KHR_MESH_QUANTIZATION}}class z extends g.Interpolant{constructor(Ue,Pe,Ye,ze){super(Ue,Pe,Ye,ze)}copySampleValue_(Ue){const Pe=this.resultBuffer,Ye=this.sampleValues,ze=this.valueSize,He=Ue*ze*3+ze;for(let et=0;et!==ze;et++)Pe[et]=Ye[He+et];return Pe}interpolate_(Ue,Pe,Ye,ze){const He=this.resultBuffer,et=this.sampleValues,Me=this.valueSize,Te=Me*2,Oe=Me*3,Ze=ze-Pe,ae=(Ye-Pe)/Ze,ee=ae*ae,se=ee*ae,Ie=Ue*Oe,We=Ie-Oe,Ke=-2*se+3*ee,$e=se-ee,Vt=1-Ke,$t=$e-ee+ae;for(let Xt=0;Xt!==Me;Xt++){const jt=et[We+Xt+Me],on=et[We+Xt+Te]*Ze,In=et[Ie+Xt+Me],di=et[Ie+Xt]*Ze;He[Xt]=Vt*jt+$t*on+Ke*In+$e*di}return He}}const X=new g.Quaternion;class fe extends z{interpolate_(Ue,Pe,Ye,ze){const He=super.interpolate_(Ue,Pe,Ye,ze);return X.fromArray(He).normalize().toArray(He),He}}const Ae={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Se={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Be={9728:g.NearestFilter,9729:g.LinearFilter,9984:g.NearestMipmapNearestFilter,9985:g.LinearMipmapNearestFilter,9986:g.NearestMipmapLinearFilter,9987:g.LinearMipmapLinearFilter},Ge={33071:g.ClampToEdgeWrapping,33648:g.MirroredRepeatWrapping,10497:g.RepeatWrapping},ht={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},at={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Gt={CUBICSPLINE:void 0,LINEAR:g.InterpolateLinear,STEP:g.InterpolateDiscrete},wt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Yt(zt){return zt.DefaultMaterial===void 0&&(zt.DefaultMaterial=new g.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:g.FrontSide})),zt.DefaultMaterial}function Mn(zt,Ue,Pe){for(const Ye in Pe.extensions)zt[Ye]===void 0&&(Ue.userData.gltfExtensions=Ue.userData.gltfExtensions||{},Ue.userData.gltfExtensions[Ye]=Pe.extensions[Ye])}function je(zt,Ue){Ue.extras!==void 0&&(typeof Ue.extras=="object"?Object.assign(zt.userData,Ue.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Ue.extras))}function rt(zt,Ue,Pe){let Ye=!1,ze=!1,He=!1;for(let Oe=0,Ze=Ue.length;Oe<Ze;Oe++){const ae=Ue[Oe];if(ae.POSITION!==void 0&&(Ye=!0),ae.NORMAL!==void 0&&(ze=!0),ae.COLOR_0!==void 0&&(He=!0),Ye&&ze&&He)break}if(!Ye&&!ze&&!He)return Promise.resolve(zt);const et=[],Me=[],Te=[];for(let Oe=0,Ze=Ue.length;Oe<Ze;Oe++){const ae=Ue[Oe];if(Ye){const ee=ae.POSITION!==void 0?Pe.getDependency("accessor",ae.POSITION):zt.attributes.position;et.push(ee)}if(ze){const ee=ae.NORMAL!==void 0?Pe.getDependency("accessor",ae.NORMAL):zt.attributes.normal;Me.push(ee)}if(He){const ee=ae.COLOR_0!==void 0?Pe.getDependency("accessor",ae.COLOR_0):zt.attributes.color;Te.push(ee)}}return Promise.all([Promise.all(et),Promise.all(Me),Promise.all(Te)]).then(function(Oe){const Ze=Oe[0],ae=Oe[1],ee=Oe[2];return Ye&&(zt.morphAttributes.position=Ze),ze&&(zt.morphAttributes.normal=ae),He&&(zt.morphAttributes.color=ee),zt.morphTargetsRelative=!0,zt})}function At(zt,Ue){if(zt.updateMorphTargets(),Ue.weights!==void 0)for(let Pe=0,Ye=Ue.weights.length;Pe<Ye;Pe++)zt.morphTargetInfluences[Pe]=Ue.weights[Pe];if(Ue.extras&&Array.isArray(Ue.extras.targetNames)){const Pe=Ue.extras.targetNames;if(zt.morphTargetInfluences.length===Pe.length){zt.morphTargetDictionary={};for(let Ye=0,ze=Pe.length;Ye<ze;Ye++)zt.morphTargetDictionary[Pe[Ye]]=Ye}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Bt(zt){const Ue=zt.extensions&&zt.extensions[y.KHR_DRACO_MESH_COMPRESSION];let Pe;return Ue?Pe="draco:"+Ue.bufferView+":"+Ue.indices+":"+Pt(Ue.attributes):Pe=zt.indices+":"+Pt(zt.attributes)+":"+zt.mode,Pe}function Pt(zt){let Ue="";const Pe=Object.keys(zt).sort();for(let Ye=0,ze=Pe.length;Ye<ze;Ye++)Ue+=Pe[Ye]+":"+zt[Pe[Ye]]+";";return Ue}function qt(zt){switch(zt){case Int8Array:return .007874015748031496;case Uint8Array:return .00392156862745098;case Int16Array:return 3051850947599719e-20;case Uint16Array:return 15259021896696422e-21;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function un(zt){return zt.search(/\.jpe?g($|\?)/i)>0||zt.search(/^data\:image\/jpeg/)===0?"image/jpeg":zt.search(/\.webp($|\?)/i)>0||zt.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class dn{constructor(Ue={},Pe={}){this.json=Ue,this.extensions={},this.plugins={},this.options=Pe,this.cache=new v,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let Ye=!1,ze=!1,He=-1;typeof navigator<"u"&&(Ye=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,ze=navigator.userAgent.indexOf("Firefox")>-1,He=ze?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||Ye||ze&&He<98?this.textureLoader=new g.TextureLoader(this.options.manager):this.textureLoader=new g.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new g.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(Ue){this.extensions=Ue}setPlugins(Ue){this.plugins=Ue}parse(Ue,Pe){const Ye=this,ze=this.json,He=this.extensions;this.cache.removeAll(),this._invokeAll(function(et){return et._markDefs&&et._markDefs()}),Promise.all(this._invokeAll(function(et){return et.beforeRoot&&et.beforeRoot()})).then(function(){return Promise.all([Ye.getDependencies("scene"),Ye.getDependencies("animation"),Ye.getDependencies("camera")])}).then(function(et){const Me={scene:et[0][ze.scene||0],scenes:et[0],animations:et[1],cameras:et[2],asset:ze.asset,parser:Ye,userData:{}};Mn(He,Me,ze),je(Me,ze),Promise.all(Ye._invokeAll(function(Te){return Te.afterRoot&&Te.afterRoot(Me)})).then(function(){Ue(Me)})}).catch(Pe)}_markDefs(){const Ue=this.json.nodes||[],Pe=this.json.skins||[],Ye=this.json.meshes||[];for(let ze=0,He=Pe.length;ze<He;ze++){const et=Pe[ze].joints;for(let Me=0,Te=et.length;Me<Te;Me++)Ue[et[Me]].isBone=!0}for(let ze=0,He=Ue.length;ze<He;ze++){const et=Ue[ze];et.mesh!==void 0&&(this._addNodeRef(this.meshCache,et.mesh),et.skin!==void 0&&(Ye[et.mesh].isSkinnedMesh=!0)),et.camera!==void 0&&this._addNodeRef(this.cameraCache,et.camera)}}_addNodeRef(Ue,Pe){Pe!==void 0&&(Ue.refs[Pe]===void 0&&(Ue.refs[Pe]=Ue.uses[Pe]=0),Ue.refs[Pe]++)}_getNodeRef(Ue,Pe,Ye){if(Ue.refs[Pe]<=1)return Ye;const ze=Ye.clone(),He=(et,Me)=>{const Te=this.associations.get(et);Te!=null&&this.associations.set(Me,Te);for(const[Oe,Ze]of et.children.entries())He(Ze,Me.children[Oe])};return He(Ye,ze),ze.name+="_instance_"+Ue.uses[Pe]++,ze}_invokeOne(Ue){const Pe=Object.values(this.plugins);Pe.push(this);for(let Ye=0;Ye<Pe.length;Ye++){const ze=Ue(Pe[Ye]);if(ze)return ze}return null}_invokeAll(Ue){const Pe=Object.values(this.plugins);Pe.unshift(this);const Ye=[];for(let ze=0;ze<Pe.length;ze++){const He=Ue(Pe[ze]);He&&Ye.push(He)}return Ye}getDependency(Ue,Pe){const Ye=Ue+":"+Pe;let ze=this.cache.get(Ye);if(!ze){switch(Ue){case"scene":ze=this.loadScene(Pe);break;case"node":ze=this.loadNode(Pe);break;case"mesh":ze=this._invokeOne(function(He){return He.loadMesh&&He.loadMesh(Pe)});break;case"accessor":ze=this.loadAccessor(Pe);break;case"bufferView":ze=this._invokeOne(function(He){return He.loadBufferView&&He.loadBufferView(Pe)});break;case"buffer":ze=this.loadBuffer(Pe);break;case"material":ze=this._invokeOne(function(He){return He.loadMaterial&&He.loadMaterial(Pe)});break;case"texture":ze=this._invokeOne(function(He){return He.loadTexture&&He.loadTexture(Pe)});break;case"skin":ze=this.loadSkin(Pe);break;case"animation":ze=this._invokeOne(function(He){return He.loadAnimation&&He.loadAnimation(Pe)});break;case"camera":ze=this.loadCamera(Pe);break;default:if(ze=this._invokeOne(function(He){return He!=this&&He.getDependency&&He.getDependency(Ue,Pe)}),!ze)throw new Error("Unknown type: "+Ue);break}this.cache.add(Ye,ze)}return ze}getDependencies(Ue){let Pe=this.cache.get(Ue);if(!Pe){const Ye=this,ze=this.json[Ue+(Ue==="mesh"?"es":"s")]||[];Pe=Promise.all(ze.map(function(He,et){return Ye.getDependency(Ue,et)})),this.cache.add(Ue,Pe)}return Pe}loadBuffer(Ue){const Pe=this.json.buffers[Ue],Ye=this.fileLoader;if(Pe.type&&Pe.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+Pe.type+" buffer type is not supported.");if(Pe.uri===void 0&&Ue===0)return Promise.resolve(this.extensions[y.KHR_BINARY_GLTF].body);const ze=this.options;return new Promise(function(He,et){Ye.load(g.LoaderUtils.resolveURL(Pe.uri,ze.path),He,void 0,function(){et(new Error('THREE.GLTFLoader: Failed to load buffer "'+Pe.uri+'".'))})})}loadBufferView(Ue){const Pe=this.json.bufferViews[Ue];return this.getDependency("buffer",Pe.buffer).then(function(Ye){const ze=Pe.byteLength||0,He=Pe.byteOffset||0;return Ye.slice(He,He+ze)})}loadAccessor(Ue){const Pe=this,Ye=this.json,ze=this.json.accessors[Ue];if(ze.bufferView===void 0&&ze.sparse===void 0){const et=ht[ze.type],Me=Se[ze.componentType],Te=ze.normalized===!0,Oe=new Me(ze.count*et);return Promise.resolve(new g.BufferAttribute(Oe,et,Te))}const He=[];return ze.bufferView!==void 0?He.push(this.getDependency("bufferView",ze.bufferView)):He.push(null),ze.sparse!==void 0&&(He.push(this.getDependency("bufferView",ze.sparse.indices.bufferView)),He.push(this.getDependency("bufferView",ze.sparse.values.bufferView))),Promise.all(He).then(function(et){const Me=et[0],Te=ht[ze.type],Oe=Se[ze.componentType],Ze=Oe.BYTES_PER_ELEMENT,ae=Ze*Te,ee=ze.byteOffset||0,se=ze.bufferView!==void 0?Ye.bufferViews[ze.bufferView].byteStride:void 0,Ie=ze.normalized===!0;let We,Ke;if(se&&se!==ae){const $e=Math.floor(ee/se),Vt="InterleavedBuffer:"+ze.bufferView+":"+ze.componentType+":"+$e+":"+ze.count;let $t=Pe.cache.get(Vt);$t||(We=new Oe(Me,$e*se,ze.count*se/Ze),$t=new g.InterleavedBuffer(We,se/Ze),Pe.cache.add(Vt,$t)),Ke=new g.InterleavedBufferAttribute($t,Te,ee%se/Ze,Ie)}else Me===null?We=new Oe(ze.count*Te):We=new Oe(Me,ee,ze.count*Te),Ke=new g.BufferAttribute(We,Te,Ie);if(ze.sparse!==void 0){const $e=ht.SCALAR,Vt=Se[ze.sparse.indices.componentType],$t=ze.sparse.indices.byteOffset||0,Xt=ze.sparse.values.byteOffset||0,jt=new Vt(et[1],$t,ze.sparse.count*$e),on=new Oe(et[2],Xt,ze.sparse.count*Te);Me!==null&&(Ke=new g.BufferAttribute(Ke.array.slice(),Ke.itemSize,Ke.normalized));for(let In=0,di=jt.length;In<di;In++){const fi=jt[In];if(Ke.setX(fi,on[In*Te]),Te>=2&&Ke.setY(fi,on[In*Te+1]),Te>=3&&Ke.setZ(fi,on[In*Te+2]),Te>=4&&Ke.setW(fi,on[In*Te+3]),Te>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Ke})}loadTexture(Ue){const Pe=this.json,Ye=this.options,He=Pe.textures[Ue].source,et=Pe.images[He];let Me=this.textureLoader;if(et.uri){const Te=Ye.manager.getHandler(et.uri);Te!==null&&(Me=Te)}return this.loadTextureImage(Ue,He,Me)}loadTextureImage(Ue,Pe,Ye){const ze=this,He=this.json,et=He.textures[Ue],Me=He.images[Pe],Te=(Me.uri||Me.bufferView)+":"+et.sampler;if(this.textureCache[Te])return this.textureCache[Te];const Oe=this.loadImageSource(Pe,Ye).then(function(Ze){Ze.flipY=!1,Ze.name=et.name||Me.name||"";const ee=(He.samplers||{})[et.sampler]||{};return Ze.magFilter=Be[ee.magFilter]||g.LinearFilter,Ze.minFilter=Be[ee.minFilter]||g.LinearMipmapLinearFilter,Ze.wrapS=Ge[ee.wrapS]||g.RepeatWrapping,Ze.wrapT=Ge[ee.wrapT]||g.RepeatWrapping,ze.associations.set(Ze,{textures:Ue}),Ze}).catch(function(){return null});return this.textureCache[Te]=Oe,Oe}loadImageSource(Ue,Pe){const Ye=this,ze=this.json,He=this.options;if(this.sourceCache[Ue]!==void 0)return this.sourceCache[Ue].then(ae=>ae.clone());const et=ze.images[Ue],Me=self.URL||self.webkitURL;let Te=et.uri||"",Oe=!1;if(et.bufferView!==void 0)Te=Ye.getDependency("bufferView",et.bufferView).then(function(ae){Oe=!0;const ee=new Blob([ae],{type:et.mimeType});return Te=Me.createObjectURL(ee),Te});else if(et.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+Ue+" is missing URI and bufferView");const Ze=Promise.resolve(Te).then(function(ae){return new Promise(function(ee,se){let Ie=ee;Pe.isImageBitmapLoader===!0&&(Ie=function(We){const Ke=new g.Texture(We);Ke.needsUpdate=!0,ee(Ke)}),Pe.load(g.LoaderUtils.resolveURL(ae,He.path),Ie,void 0,se)})}).then(function(ae){return Oe===!0&&Me.revokeObjectURL(Te),ae.userData.mimeType=et.mimeType||un(et.uri),ae}).catch(function(ae){throw console.error("THREE.GLTFLoader: Couldn't load texture",Te),ae});return this.sourceCache[Ue]=Ze,Ze}assignTexture(Ue,Pe,Ye,ze){const He=this;return this.getDependency("texture",Ye.index).then(function(et){if(!et)return null;if(Ye.texCoord!==void 0&&Ye.texCoord!=0&&!(Pe==="aoMap"&&Ye.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+Ye.texCoord+" for texture "+Pe+" not yet supported."),He.extensions[y.KHR_TEXTURE_TRANSFORM]){const Me=Ye.extensions!==void 0?Ye.extensions[y.KHR_TEXTURE_TRANSFORM]:void 0;if(Me){const Te=He.associations.get(et);et=He.extensions[y.KHR_TEXTURE_TRANSFORM].extendTexture(et,Me),He.associations.set(et,Te)}}return ze!==void 0&&(et.encoding=ze),Ue[Pe]=et,et})}assignFinalMaterial(Ue){const Pe=Ue.geometry;let Ye=Ue.material;const ze=Pe.attributes.tangent===void 0,He=Pe.attributes.color!==void 0,et=Pe.attributes.normal===void 0;if(Ue.isPoints){const Me="PointsMaterial:"+Ye.uuid;let Te=this.cache.get(Me);Te||(Te=new g.PointsMaterial,g.Material.prototype.copy.call(Te,Ye),Te.color.copy(Ye.color),Te.map=Ye.map,Te.sizeAttenuation=!1,this.cache.add(Me,Te)),Ye=Te}else if(Ue.isLine){const Me="LineBasicMaterial:"+Ye.uuid;let Te=this.cache.get(Me);Te||(Te=new g.LineBasicMaterial,g.Material.prototype.copy.call(Te,Ye),Te.color.copy(Ye.color),this.cache.add(Me,Te)),Ye=Te}if(ze||He||et){let Me="ClonedMaterial:"+Ye.uuid+":";ze&&(Me+="derivative-tangents:"),He&&(Me+="vertex-colors:"),et&&(Me+="flat-shading:");let Te=this.cache.get(Me);Te||(Te=Ye.clone(),He&&(Te.vertexColors=!0),et&&(Te.flatShading=!0),ze&&(Te.normalScale&&(Te.normalScale.y*=-1),Te.clearcoatNormalScale&&(Te.clearcoatNormalScale.y*=-1)),this.cache.add(Me,Te),this.associations.set(Te,this.associations.get(Ye))),Ye=Te}Ye.aoMap&&Pe.attributes.uv2===void 0&&Pe.attributes.uv!==void 0&&Pe.setAttribute("uv2",Pe.attributes.uv),Ue.material=Ye}getMaterialType(){return g.MeshStandardMaterial}loadMaterial(Ue){const Pe=this,Ye=this.json,ze=this.extensions,He=Ye.materials[Ue];let et;const Me={},Te=He.extensions||{},Oe=[];if(Te[y.KHR_MATERIALS_UNLIT]){const ae=ze[y.KHR_MATERIALS_UNLIT];et=ae.getMaterialType(),Oe.push(ae.extendParams(Me,He,Pe))}else{const ae=He.pbrMetallicRoughness||{};if(Me.color=new g.Color(1,1,1),Me.opacity=1,Array.isArray(ae.baseColorFactor)){const ee=ae.baseColorFactor;Me.color.fromArray(ee),Me.opacity=ee[3]}ae.baseColorTexture!==void 0&&Oe.push(Pe.assignTexture(Me,"map",ae.baseColorTexture,g.sRGBEncoding)),Me.metalness=ae.metallicFactor!==void 0?ae.metallicFactor:1,Me.roughness=ae.roughnessFactor!==void 0?ae.roughnessFactor:1,ae.metallicRoughnessTexture!==void 0&&(Oe.push(Pe.assignTexture(Me,"metalnessMap",ae.metallicRoughnessTexture)),Oe.push(Pe.assignTexture(Me,"roughnessMap",ae.metallicRoughnessTexture))),et=this._invokeOne(function(ee){return ee.getMaterialType&&ee.getMaterialType(Ue)}),Oe.push(Promise.all(this._invokeAll(function(ee){return ee.extendMaterialParams&&ee.extendMaterialParams(Ue,Me)})))}He.doubleSided===!0&&(Me.side=g.DoubleSide);const Ze=He.alphaMode||wt.OPAQUE;if(Ze===wt.BLEND?(Me.transparent=!0,Me.depthWrite=!1):(Me.transparent=!1,Ze===wt.MASK&&(Me.alphaTest=He.alphaCutoff!==void 0?He.alphaCutoff:.5)),He.normalTexture!==void 0&&et!==g.MeshBasicMaterial&&(Oe.push(Pe.assignTexture(Me,"normalMap",He.normalTexture)),Me.normalScale=new g.Vector2(1,1),He.normalTexture.scale!==void 0)){const ae=He.normalTexture.scale;Me.normalScale.set(ae,ae)}return He.occlusionTexture!==void 0&&et!==g.MeshBasicMaterial&&(Oe.push(Pe.assignTexture(Me,"aoMap",He.occlusionTexture)),He.occlusionTexture.strength!==void 0&&(Me.aoMapIntensity=He.occlusionTexture.strength)),He.emissiveFactor!==void 0&&et!==g.MeshBasicMaterial&&(Me.emissive=new g.Color().fromArray(He.emissiveFactor)),He.emissiveTexture!==void 0&&et!==g.MeshBasicMaterial&&Oe.push(Pe.assignTexture(Me,"emissiveMap",He.emissiveTexture,g.sRGBEncoding)),Promise.all(Oe).then(function(){const ae=new et(Me);return He.name&&(ae.name=He.name),je(ae,He),Pe.associations.set(ae,{materials:Ue}),He.extensions&&Mn(ze,ae,He),ae})}createUniqueName(Ue){const Pe=g.PropertyBinding.sanitizeNodeName(Ue||"");let Ye=Pe;for(let ze=1;this.nodeNamesUsed[Ye];++ze)Ye=Pe+"_"+ze;return this.nodeNamesUsed[Ye]=!0,Ye}loadGeometries(Ue){const Pe=this,Ye=this.extensions,ze=this.primitiveCache;function He(Me){return Ye[y.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Me,Pe).then(function(Te){return ri(Te,Me,Pe)})}const et=[];for(let Me=0,Te=Ue.length;Me<Te;Me++){const Oe=Ue[Me],Ze=Bt(Oe),ae=ze[Ze];if(ae)et.push(ae.promise);else{let ee;Oe.extensions&&Oe.extensions[y.KHR_DRACO_MESH_COMPRESSION]?ee=He(Oe):ee=ri(new g.BufferGeometry,Oe,Pe),ze[Ze]={primitive:Oe,promise:ee},et.push(ee)}}return Promise.all(et)}loadMesh(Ue){const Pe=this,Ye=this.json,ze=this.extensions,He=Ye.meshes[Ue],et=He.primitives,Me=[];for(let Te=0,Oe=et.length;Te<Oe;Te++){const Ze=et[Te].material===void 0?Yt(this.cache):this.getDependency("material",et[Te].material);Me.push(Ze)}return Me.push(Pe.loadGeometries(et)),Promise.all(Me).then(function(Te){const Oe=Te.slice(0,Te.length-1),Ze=Te[Te.length-1],ae=[];for(let se=0,Ie=Ze.length;se<Ie;se++){const We=Ze[se],Ke=et[se];let $e;const Vt=Oe[se];if(Ke.mode===Ae.TRIANGLES||Ke.mode===Ae.TRIANGLE_STRIP||Ke.mode===Ae.TRIANGLE_FAN||Ke.mode===void 0)$e=He.isSkinnedMesh===!0?new g.SkinnedMesh(We,Vt):new g.Mesh(We,Vt),$e.isSkinnedMesh===!0&&!$e.geometry.attributes.skinWeight.normalized&&$e.normalizeSkinWeights(),Ke.mode===Ae.TRIANGLE_STRIP?$e.geometry=ni($e.geometry,g.TriangleStripDrawMode):Ke.mode===Ae.TRIANGLE_FAN&&($e.geometry=ni($e.geometry,g.TriangleFanDrawMode));else if(Ke.mode===Ae.LINES)$e=new g.LineSegments(We,Vt);else if(Ke.mode===Ae.LINE_STRIP)$e=new g.Line(We,Vt);else if(Ke.mode===Ae.LINE_LOOP)$e=new g.LineLoop(We,Vt);else if(Ke.mode===Ae.POINTS)$e=new g.Points(We,Vt);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Ke.mode);Object.keys($e.geometry.morphAttributes).length>0&&At($e,He),$e.name=Pe.createUniqueName(He.name||"mesh_"+Ue),je($e,He),Ke.extensions&&Mn(ze,$e,Ke),Pe.assignFinalMaterial($e),ae.push($e)}for(let se=0,Ie=ae.length;se<Ie;se++)Pe.associations.set(ae[se],{meshes:Ue,primitives:se});if(ae.length===1)return ae[0];const ee=new g.Group;Pe.associations.set(ee,{meshes:Ue});for(let se=0,Ie=ae.length;se<Ie;se++)ee.add(ae[se]);return ee})}loadCamera(Ue){let Pe;const Ye=this.json.cameras[Ue],ze=Ye[Ye.type];if(!ze){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Ye.type==="perspective"?Pe=new g.PerspectiveCamera(g.MathUtils.radToDeg(ze.yfov),ze.aspectRatio||1,ze.znear||1,ze.zfar||2e6):Ye.type==="orthographic"&&(Pe=new g.OrthographicCamera(-ze.xmag,ze.xmag,ze.ymag,-ze.ymag,ze.znear,ze.zfar)),Ye.name&&(Pe.name=this.createUniqueName(Ye.name)),je(Pe,Ye),Promise.resolve(Pe)}loadSkin(Ue){const Pe=this.json.skins[Ue],Ye=[];for(let ze=0,He=Pe.joints.length;ze<He;ze++)Ye.push(this.getDependency("node",Pe.joints[ze]));return Pe.inverseBindMatrices!==void 0?Ye.push(this.getDependency("accessor",Pe.inverseBindMatrices)):Ye.push(null),Promise.all(Ye).then(function(ze){const He=ze.pop(),et=ze,Me=[],Te=[];for(let Oe=0,Ze=et.length;Oe<Ze;Oe++){const ae=et[Oe];if(ae){Me.push(ae);const ee=new g.Matrix4;He!==null&&ee.fromArray(He.array,Oe*16),Te.push(ee)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Pe.joints[Oe])}return new g.Skeleton(Me,Te)})}loadAnimation(Ue){const Ye=this.json.animations[Ue],ze=[],He=[],et=[],Me=[],Te=[];for(let Oe=0,Ze=Ye.channels.length;Oe<Ze;Oe++){const ae=Ye.channels[Oe],ee=Ye.samplers[ae.sampler],se=ae.target,Ie=se.node,We=Ye.parameters!==void 0?Ye.parameters[ee.input]:ee.input,Ke=Ye.parameters!==void 0?Ye.parameters[ee.output]:ee.output;ze.push(this.getDependency("node",Ie)),He.push(this.getDependency("accessor",We)),et.push(this.getDependency("accessor",Ke)),Me.push(ee),Te.push(se)}return Promise.all([Promise.all(ze),Promise.all(He),Promise.all(et),Promise.all(Me),Promise.all(Te)]).then(function(Oe){const Ze=Oe[0],ae=Oe[1],ee=Oe[2],se=Oe[3],Ie=Oe[4],We=[];for(let $e=0,Vt=Ze.length;$e<Vt;$e++){const $t=Ze[$e],Xt=ae[$e],jt=ee[$e],on=se[$e],In=Ie[$e];if($t===void 0)continue;$t.updateMatrix();let di;switch(at[In.path]){case at.weights:di=g.NumberKeyframeTrack;break;case at.rotation:di=g.QuaternionKeyframeTrack;break;case at.position:case at.scale:default:di=g.VectorKeyframeTrack;break}const fi=$t.name?$t.name:$t.uuid,Nn=on.interpolation!==void 0?Gt[on.interpolation]:g.InterpolateLinear,vn=[];at[In.path]===at.weights?$t.traverse(function(yn){yn.morphTargetInfluences&&vn.push(yn.name?yn.name:yn.uuid)}):vn.push(fi);let Ft=jt.array;if(jt.normalized){const yn=qt(Ft.constructor),Gn=new Float32Array(Ft.length);for(let Dn=0,bi=Ft.length;Dn<bi;Dn++)Gn[Dn]=Ft[Dn]*yn;Ft=Gn}for(let yn=0,Gn=vn.length;yn<Gn;yn++){const Dn=new di(vn[yn]+"."+at[In.path],Xt.array,Ft,Nn);on.interpolation==="CUBICSPLINE"&&(Dn.createInterpolant=function(Pi){const Zi=this instanceof g.QuaternionKeyframeTrack?fe:z;return new Zi(this.times,this.values,this.getValueSize()/3,Pi)},Dn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),We.push(Dn)}}const Ke=Ye.name?Ye.name:"animation_"+Ue;return new g.AnimationClip(Ke,void 0,We)})}createNodeMesh(Ue){const Pe=this.json,Ye=this,ze=Pe.nodes[Ue];return ze.mesh===void 0?null:Ye.getDependency("mesh",ze.mesh).then(function(He){const et=Ye._getNodeRef(Ye.meshCache,ze.mesh,He);return ze.weights!==void 0&&et.traverse(function(Me){if(!!Me.isMesh)for(let Te=0,Oe=ze.weights.length;Te<Oe;Te++)Me.morphTargetInfluences[Te]=ze.weights[Te]}),et})}loadNode(Ue){const Pe=this.json,Ye=this.extensions,ze=this,He=Pe.nodes[Ue],et=He.name?ze.createUniqueName(He.name):"";return function(){const Me=[],Te=ze._invokeOne(function(Oe){return Oe.createNodeMesh&&Oe.createNodeMesh(Ue)});return Te&&Me.push(Te),He.camera!==void 0&&Me.push(ze.getDependency("camera",He.camera).then(function(Oe){return ze._getNodeRef(ze.cameraCache,He.camera,Oe)})),ze._invokeAll(function(Oe){return Oe.createNodeAttachment&&Oe.createNodeAttachment(Ue)}).forEach(function(Oe){Me.push(Oe)}),Promise.all(Me)}().then(function(Me){let Te;if(He.isBone===!0?Te=new g.Bone:Me.length>1?Te=new g.Group:Me.length===1?Te=Me[0]:Te=new g.Object3D,Te!==Me[0])for(let Oe=0,Ze=Me.length;Oe<Ze;Oe++)Te.add(Me[Oe]);if(He.name&&(Te.userData.name=He.name,Te.name=et),je(Te,He),He.extensions&&Mn(Ye,Te,He),He.matrix!==void 0){const Oe=new g.Matrix4;Oe.fromArray(He.matrix),Te.applyMatrix4(Oe)}else He.translation!==void 0&&Te.position.fromArray(He.translation),He.rotation!==void 0&&Te.quaternion.fromArray(He.rotation),He.scale!==void 0&&Te.scale.fromArray(He.scale);return ze.associations.has(Te)||ze.associations.set(Te,{}),ze.associations.get(Te).nodes=Ue,Te})}loadScene(Ue){const Pe=this.json,Ye=this.extensions,ze=this.json.scenes[Ue],He=this,et=new g.Group;ze.name&&(et.name=He.createUniqueName(ze.name)),je(et,ze),ze.extensions&&Mn(Ye,et,ze);const Me=ze.nodes||[],Te=[];for(let Oe=0,Ze=Me.length;Oe<Ze;Oe++)Te.push(bn(Me[Oe],et,Pe,He));return Promise.all(Te).then(function(){const Oe=Ze=>{const ae=new Map;for(const[ee,se]of He.associations)(ee instanceof g.Material||ee instanceof g.Texture)&&ae.set(ee,se);return Ze.traverse(ee=>{const se=He.associations.get(ee);se!=null&&ae.set(ee,se)}),ae};return He.associations=Oe(et),et})}}function bn(zt,Ue,Pe,Ye){const ze=Pe.nodes[zt];return Ye.getDependency("node",zt).then(function(He){return ze.skin===void 0?He:Ye.getDependency("skin",ze.skin).then(function(et){return He.traverse(function(Me){!Me.isSkinnedMesh||Me.bind(et,Me.matrixWorld)}),He})}).then(function(He){Ue.add(He);const et=[];if(ze.children){const Me=ze.children;for(let Te=0,Oe=Me.length;Te<Oe;Te++){const Ze=Me[Te];et.push(bn(Ze,He,Pe,Ye))}}return Promise.all(et)})}function tn(zt,Ue,Pe){const Ye=Ue.attributes,ze=new g.Box3;if(Ye.POSITION!==void 0){const Me=Pe.json.accessors[Ye.POSITION],Te=Me.min,Oe=Me.max;if(Te!==void 0&&Oe!==void 0){if(ze.set(new g.Vector3(Te[0],Te[1],Te[2]),new g.Vector3(Oe[0],Oe[1],Oe[2])),Me.normalized){const Ze=qt(Se[Me.componentType]);ze.min.multiplyScalar(Ze),ze.max.multiplyScalar(Ze)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const He=Ue.targets;if(He!==void 0){const Me=new g.Vector3,Te=new g.Vector3;for(let Oe=0,Ze=He.length;Oe<Ze;Oe++){const ae=He[Oe];if(ae.POSITION!==void 0){const ee=Pe.json.accessors[ae.POSITION],se=ee.min,Ie=ee.max;if(se!==void 0&&Ie!==void 0){if(Te.setX(Math.max(Math.abs(se[0]),Math.abs(Ie[0]))),Te.setY(Math.max(Math.abs(se[1]),Math.abs(Ie[1]))),Te.setZ(Math.max(Math.abs(se[2]),Math.abs(Ie[2]))),ee.normalized){const We=qt(Se[ee.componentType]);Te.multiplyScalar(We)}Me.max(Te)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}ze.expandByVector(Me)}zt.boundingBox=ze;const et=new g.Sphere;ze.getCenter(et.center),et.radius=ze.min.distanceTo(ze.max)/2,zt.boundingSphere=et}function ri(zt,Ue,Pe){const Ye=Ue.attributes,ze=[];function He(et,Me){return Pe.getDependency("accessor",et).then(function(Te){zt.setAttribute(Me,Te)})}for(const et in Ye){const Me=xt[et]||et.toLowerCase();Me in zt.attributes||ze.push(He(Ye[et],Me))}if(Ue.indices!==void 0&&!zt.index){const et=Pe.getDependency("accessor",Ue.indices).then(function(Me){zt.setIndex(Me)});ze.push(et)}return je(zt,Ue),tn(zt,Ue,Pe),Promise.all(ze).then(function(){return Ue.targets!==void 0?rt(zt,Ue.targets,Pe):zt})}function ni(zt,Ue){let Pe=zt.getIndex();if(Pe===null){const et=[],Me=zt.getAttribute("position");if(Me!==void 0){for(let Te=0;Te<Me.count;Te++)et.push(Te);zt.setIndex(et),Pe=zt.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),zt}const Ye=Pe.count-2,ze=[];if(Ue===g.TriangleFanDrawMode)for(let et=1;et<=Ye;et++)ze.push(Pe.getX(0)),ze.push(Pe.getX(et)),ze.push(Pe.getX(et+1));else for(let et=0;et<Ye;et++)et%2===0?(ze.push(Pe.getX(et)),ze.push(Pe.getX(et+1)),ze.push(Pe.getX(et+2))):(ze.push(Pe.getX(et+2)),ze.push(Pe.getX(et+1)),ze.push(Pe.getX(et)));ze.length/3!==Ye&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const He=zt.clone();return He.setIndex(ze),He}},"./node_modules/super-three/examples/jsm/loaders/KTX2Loader.js":(S,I,h)=>{h.r(I),h.d(I,{KTX2Loader:()=>w});var g=h("./node_modules/super-three/build/three.module.js"),C=h("./node_modules/super-three/examples/jsm/utils/WorkerPool.js"),v=h("./node_modules/super-three/examples/jsm/libs/ktx-parse.module.js"),y=h("./node_modules/super-three/examples/jsm/libs/zstddec.module.js");const E=new WeakMap;let _=0,m;class w extends g.Loader{constructor(Y){super(Y),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new C.WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(Y){return this.transcoderPath=Y,this}setWorkerLimit(Y){return this.workerPool.setWorkerLimit(Y),this}detectSupport(Y){return this.workerConfig={astcSupported:Y.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:Y.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:Y.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:Y.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:Y.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:Y.extensions.has("WEBGL_compressed_texture_pvrtc")||Y.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},Y.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const Y=new g.FileLoader(this.manager);Y.setPath(this.transcoderPath),Y.setWithCredentials(this.withCredentials);const J=Y.loadAsync("basis_transcoder.js"),j=new g.FileLoader(this.manager);j.setPath(this.transcoderPath),j.setResponseType("arraybuffer"),j.setWithCredentials(this.withCredentials);const U=j.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([J,U]).then(([te,ue])=>{const xe=w.BasisWorker.toString(),Ee=["/* constants */","let _EngineFormat = "+JSON.stringify(w.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(w.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(w.BasisFormat),"/* basis_transcoder.js */",te,"/* worker */",xe.substring(xe.indexOf("{")+1,xe.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Ee])),this.transcoderBinary=ue,this.workerPool.setWorkerCreator(()=>{const V=new Worker(this.workerSourceURL),q=this.transcoderBinary.slice(0);return V.postMessage({type:"init",config:this.workerConfig,transcoderBinary:q},[q]),V})}),_>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_++}return this.transcoderPending}load(Y,J,j,U){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const te=new g.FileLoader(this.manager);te.setResponseType("arraybuffer"),te.setWithCredentials(this.withCredentials),te.load(Y,ue=>{if(E.has(ue))return E.get(ue).promise.then(J).catch(U);this._createTexture(ue).then(xe=>J?J(xe):null).catch(U)},j,U)}_createTextureFrom(Y,J){const{mipmaps:j,width:U,height:te,format:ue,type:xe,error:Ee,dfdTransferFn:V,dfdFlags:q}=Y;if(xe==="error")return Promise.reject(Ee);const Q=J.layerCount>1?new g.CompressedArrayTexture(j,U,te,J.layerCount,ue,g.UnsignedByteType):new g.CompressedTexture(j,U,te,ue,g.UnsignedByteType);return Q.minFilter=j.length===1?g.LinearFilter:g.LinearMipmapLinearFilter,Q.magFilter=g.LinearFilter,Q.generateMipmaps=!1,Q.needsUpdate=!0,Q.encoding=V===v.KHR_DF_TRANSFER_SRGB?g.sRGBEncoding:g.LinearEncoding,Q.premultiplyAlpha=!!(q&v.KHR_DF_FLAG_ALPHA_PREMULTIPLIED),Q}async _createTexture(Y,J={}){const j=(0,v.read)(new Uint8Array(Y));if(j.vkFormat!==v.VK_FORMAT_UNDEFINED)return L(j);const U=J,te=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:Y,taskConfig:U},[Y])).then(ue=>this._createTextureFrom(ue.data,j));return E.set(Y,{promise:te}),te}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_--,this}}w.BasisFormat={ETC1S:0,UASTC_4x4:1},w.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},w.EngineFormat={RGBAFormat:g.RGBAFormat,RGBA_ASTC_4x4_Format:g.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:g.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:g.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:g.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:g.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:g.RGB_ETC1_Format,RGB_ETC2_Format:g.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:g.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:g.RGB_S3TC_DXT1_Format},w.BasisWorker=function(){let P,Y,J;const j=_EngineFormat,U=_TranscoderFormat,te=_BasisFormat;self.addEventListener("message",function(X){const fe=X.data;switch(fe.type){case"init":P=fe.config,ue(fe.transcoderBinary);break;case"transcode":Y.then(()=>{try{const{width:Ae,height:Se,hasAlpha:Be,mipmaps:Ge,format:ht,dfdTransferFn:xt,dfdFlags:at}=xe(fe.buffer),Gt=[];for(let wt=0;wt<Ge.length;++wt)Gt.push(Ge[wt].data.buffer);self.postMessage({type:"transcode",id:fe.id,width:Ae,height:Se,hasAlpha:Be,mipmaps:Ge,format:ht,dfdTransferFn:xt,dfdFlags:at},Gt)}catch(Ae){console.error(Ae),self.postMessage({type:"error",id:fe.id,error:Ae.message})}});break}});function ue(X){Y=new Promise(fe=>{J={wasmBinary:X,onRuntimeInitialized:fe},BASIS(J)}).then(()=>{J.initializeBasis(),J.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function xe(X){const fe=new J.KTX2File(new Uint8Array(X));function Ae(){fe.close(),fe.delete()}if(!fe.isValid())throw Ae(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const Se=fe.isUASTC()?te.UASTC_4x4:te.ETC1S,Be=fe.getWidth(),Ge=fe.getHeight(),ht=fe.getLayers()||1,xt=fe.getLevels(),at=fe.getHasAlpha(),Gt=fe.getDFDTransferFunc(),wt=fe.getDFDFlags(),{transcoderFormat:Yt,engineFormat:Mn}=Q(Se,Be,Ge,at);if(!Be||!Ge||!xt)throw Ae(),new Error("THREE.KTX2Loader:	Invalid texture");if(!fe.startTranscoding())throw Ae(),new Error("THREE.KTX2Loader: .startTranscoding failed");const je=[];for(let rt=0;rt<xt;rt++){const At=[];let Bt,Pt;for(let qt=0;qt<ht;qt++){const un=fe.getImageLevelInfo(rt,qt,0);Bt=un.origWidth,Pt=un.origHeight;const dn=new Uint8Array(fe.getImageTranscodedSizeInBytes(rt,qt,0,Yt));if(!fe.transcodeImage(dn,rt,qt,0,Yt,0,-1,-1))throw Ae(),new Error("THREE.KTX2Loader: .transcodeImage failed.");At.push(dn)}je.push({data:z(At),width:Bt,height:Pt})}return Ae(),{width:Be,height:Ge,hasAlpha:at,mipmaps:je,format:Mn,dfdTransferFn:Gt,dfdFlags:wt}}const Ee=[{if:"astcSupported",basisFormat:[te.UASTC_4x4],transcoderFormat:[U.ASTC_4x4,U.ASTC_4x4],engineFormat:[j.RGBA_ASTC_4x4_Format,j.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[U.BC7_M5,U.BC7_M5],engineFormat:[j.RGBA_BPTC_Format,j.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[U.BC1,U.BC3],engineFormat:[j.RGB_S3TC_DXT1_Format,j.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[U.ETC1,U.ETC2],engineFormat:[j.RGB_ETC2_Format,j.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[U.ETC1],engineFormat:[j.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[U.PVRTC1_4_RGB,U.PVRTC1_4_RGBA],engineFormat:[j.RGB_PVRTC_4BPPV1_Format,j.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],V=Ee.sort(function(X,fe){return X.priorityETC1S-fe.priorityETC1S}),q=Ee.sort(function(X,fe){return X.priorityUASTC-fe.priorityUASTC});function Q(X,fe,Ae,Se){let Be,Ge;const ht=X===te.ETC1S?V:q;for(let xt=0;xt<ht.length;xt++){const at=ht[xt];if(!!P[at.if]&&!!at.basisFormat.includes(X)&&!(Se&&at.transcoderFormat.length<2)&&!(at.needsPowerOfTwo&&!(F(fe)&&F(Ae))))return Be=at.transcoderFormat[Se?1:0],Ge=at.engineFormat[Se?1:0],{transcoderFormat:Be,engineFormat:Ge}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),Be=U.RGBA32,Ge=j.RGBAFormat,{transcoderFormat:Be,engineFormat:Ge}}function F(X){return X<=2?!0:(X&X-1)===0&&X!==0}function z(X){let fe=0;for(const Be of X)fe+=Be.byteLength;const Ae=new Uint8Array(fe);let Se=0;for(const Be of X)Ae.set(Be,Se),Se+=Be.byteLength;return Ae}};const b={[v.VK_FORMAT_R32G32B32A32_SFLOAT]:g.RGBAFormat,[v.VK_FORMAT_R16G16B16A16_SFLOAT]:g.RGBAFormat,[v.VK_FORMAT_R8G8B8A8_UNORM]:g.RGBAFormat,[v.VK_FORMAT_R8G8B8A8_SRGB]:g.RGBAFormat,[v.VK_FORMAT_R32G32_SFLOAT]:g.RGFormat,[v.VK_FORMAT_R16G16_SFLOAT]:g.RGFormat,[v.VK_FORMAT_R8G8_UNORM]:g.RGFormat,[v.VK_FORMAT_R8G8_SRGB]:g.RGFormat,[v.VK_FORMAT_R32_SFLOAT]:g.RedFormat,[v.VK_FORMAT_R16_SFLOAT]:g.RedFormat,[v.VK_FORMAT_R8_SRGB]:g.RedFormat,[v.VK_FORMAT_R8_UNORM]:g.RedFormat},O={[v.VK_FORMAT_R32G32B32A32_SFLOAT]:g.FloatType,[v.VK_FORMAT_R16G16B16A16_SFLOAT]:g.HalfFloatType,[v.VK_FORMAT_R8G8B8A8_UNORM]:g.UnsignedByteType,[v.VK_FORMAT_R8G8B8A8_SRGB]:g.UnsignedByteType,[v.VK_FORMAT_R32G32_SFLOAT]:g.FloatType,[v.VK_FORMAT_R16G16_SFLOAT]:g.HalfFloatType,[v.VK_FORMAT_R8G8_UNORM]:g.UnsignedByteType,[v.VK_FORMAT_R8G8_SRGB]:g.UnsignedByteType,[v.VK_FORMAT_R32_SFLOAT]:g.FloatType,[v.VK_FORMAT_R16_SFLOAT]:g.HalfFloatType,[v.VK_FORMAT_R8_SRGB]:g.UnsignedByteType,[v.VK_FORMAT_R8_UNORM]:g.UnsignedByteType},R={[v.VK_FORMAT_R8G8B8A8_SRGB]:g.sRGBEncoding,[v.VK_FORMAT_R8G8_SRGB]:g.sRGBEncoding,[v.VK_FORMAT_R8_SRGB]:g.sRGBEncoding};async function L(P){const{vkFormat:Y,pixelWidth:J,pixelHeight:j,pixelDepth:U}=P;if(b[Y]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const te=P.levels[0];let ue,xe;if(P.supercompressionScheme===v.KHR_SUPERCOMPRESSION_NONE)ue=te.levelData;else if(P.supercompressionScheme===v.KHR_SUPERCOMPRESSION_ZSTD)m||(m=new Promise(async V=>{const q=new y.ZSTDDecoder;await q.init(),V(q)})),ue=(await m).decode(te.levelData,te.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");O[Y]===g.FloatType?xe=new Float32Array(ue.buffer,ue.byteOffset,ue.byteLength/Float32Array.BYTES_PER_ELEMENT):O[Y]===g.HalfFloatType?xe=new Uint16Array(ue.buffer,ue.byteOffset,ue.byteLength/Uint16Array.BYTES_PER_ELEMENT):xe=ue;const Ee=U===0?new g.DataTexture(xe,J,j):new g.Data3DTexture(xe,J,j,U);return Ee.type=O[Y],Ee.format=b[Y],Ee.encoding=R[Y]||g.LinearEncoding,Ee.needsUpdate=!0,Promise.resolve(Ee)}},"./node_modules/super-three/examples/jsm/loaders/MTLLoader.js":(S,I,h)=>{h.r(I),h.d(I,{MTLLoader:()=>C});var g=h("./node_modules/super-three/build/three.module.js");class C extends g.Loader{constructor(E){super(E)}load(E,_,m,w){const b=this,O=this.path===""?g.LoaderUtils.extractUrlBase(E):this.path,R=new g.FileLoader(this.manager);R.setPath(this.path),R.setRequestHeader(this.requestHeader),R.setWithCredentials(this.withCredentials),R.load(E,function(L){try{_(b.parse(L,O))}catch(P){w?w(P):console.error(P),b.manager.itemError(E)}},m,w)}setMaterialOptions(E){return this.materialOptions=E,this}parse(E,_){const m=E.split(`
`);let w={};const b=/\s+/,O={};for(let L=0;L<m.length;L++){let P=m[L];if(P=P.trim(),P.length===0||P.charAt(0)==="#")continue;const Y=P.indexOf(" ");let J=Y>=0?P.substring(0,Y):P;J=J.toLowerCase();let j=Y>=0?P.substring(Y+1):"";if(j=j.trim(),J==="newmtl")w={name:j},O[j]=w;else if(J==="ka"||J==="kd"||J==="ks"||J==="ke"){const U=j.split(b,3);w[J]=[parseFloat(U[0]),parseFloat(U[1]),parseFloat(U[2])]}else w[J]=j}const R=new v(this.resourcePath||_,this.materialOptions);return R.setCrossOrigin(this.crossOrigin),R.setManager(this.manager),R.setMaterials(O),R}}class v{constructor(E="",_={}){this.baseUrl=E,this.options=_,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:g.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:g.RepeatWrapping}setCrossOrigin(E){return this.crossOrigin=E,this}setManager(E){this.manager=E}setMaterials(E){this.materialsInfo=this.convert(E),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(E){if(!this.options)return E;const _={};for(const m in E){const w=E[m],b={};_[m]=b;for(const O in w){let R=!0,L=w[O];const P=O.toLowerCase();switch(P){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(L=[L[0]/255,L[1]/255,L[2]/255]),this.options&&this.options.ignoreZeroRGBs&&L[0]===0&&L[1]===0&&L[2]===0&&(R=!1);break}R&&(b[P]=L)}}return _}preload(){for(const E in this.materialsInfo)this.create(E)}getIndex(E){return this.nameLookup[E]}getAsArray(){let E=0;for(const _ in this.materialsInfo)this.materialsArray[E]=this.create(_),this.nameLookup[_]=E,E++;return this.materialsArray}create(E){return this.materials[E]===void 0&&this.createMaterial_(E),this.materials[E]}createMaterial_(E){const _=this,m=this.materialsInfo[E],w={name:E,side:this.side};function b(R,L){return typeof L!="string"||L===""?"":/^https?:\/\//i.test(L)?L:R+L}function O(R,L){if(w[R])return;const P=_.getTextureParams(L,w),Y=_.loadTexture(b(_.baseUrl,P.url));Y.repeat.copy(P.scale),Y.offset.copy(P.offset),Y.wrapS=_.wrap,Y.wrapT=_.wrap,(R==="map"||R==="emissiveMap")&&(Y.encoding=g.sRGBEncoding),w[R]=Y}for(const R in m){const L=m[R];let P;if(L!=="")switch(R.toLowerCase()){case"kd":w.color=new g.Color().fromArray(L).convertSRGBToLinear();break;case"ks":w.specular=new g.Color().fromArray(L).convertSRGBToLinear();break;case"ke":w.emissive=new g.Color().fromArray(L).convertSRGBToLinear();break;case"map_kd":O("map",L);break;case"map_ks":O("specularMap",L);break;case"map_ke":O("emissiveMap",L);break;case"norm":O("normalMap",L);break;case"map_bump":case"bump":O("bumpMap",L);break;case"map_d":O("alphaMap",L),w.transparent=!0;break;case"ns":w.shininess=parseFloat(L);break;case"d":P=parseFloat(L),P<1&&(w.opacity=P,w.transparent=!0);break;case"tr":P=parseFloat(L),this.options&&this.options.invertTrProperty&&(P=1-P),P>0&&(w.opacity=1-P,w.transparent=!0);break}}return this.materials[E]=new g.MeshPhongMaterial(w),this.materials[E]}getTextureParams(E,_){const m={scale:new g.Vector2(1,1),offset:new g.Vector2(0,0)},w=E.split(/\s+/);let b;return b=w.indexOf("-bm"),b>=0&&(_.bumpScale=parseFloat(w[b+1]),w.splice(b,2)),b=w.indexOf("-s"),b>=0&&(m.scale.set(parseFloat(w[b+1]),parseFloat(w[b+2])),w.splice(b,4)),b=w.indexOf("-o"),b>=0&&(m.offset.set(parseFloat(w[b+1]),parseFloat(w[b+2])),w.splice(b,4)),m.url=w.join(" ").trim(),m}loadTexture(E,_,m,w,b){const O=this.manager!==void 0?this.manager:g.DefaultLoadingManager;let R=O.getHandler(E);R===null&&(R=new g.TextureLoader(O)),R.setCrossOrigin&&R.setCrossOrigin(this.crossOrigin);const L=R.load(E,m,w,b);return _!==void 0&&(L.mapping=_),L}}},"./node_modules/super-three/examples/jsm/loaders/OBJLoader.js":(S,I,h)=>{h.r(I),h.d(I,{OBJLoader:()=>Y});var g=h("./node_modules/super-three/build/three.module.js");const C=/^[og]\s*(.+)?/,v=/^mtllib /,y=/^usemtl /,E=/^usemap /,_=/\s+/,m=new g.Vector3,w=new g.Vector3,b=new g.Vector3,O=new g.Vector3,R=new g.Vector3,L=new g.Color;function P(){const J={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(j,U){if(this.object&&this.object.fromDeclaration===!1){this.object.name=j,this.object.fromDeclaration=U!==!1;return}const te=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:j||"",fromDeclaration:U!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(ue,xe){const Ee=this._finalize(!1);Ee&&(Ee.inherited||Ee.groupCount<=0)&&this.materials.splice(Ee.index,1);const V={index:this.materials.length,name:ue||"",mtllib:Array.isArray(xe)&&xe.length>0?xe[xe.length-1]:"",smooth:Ee!==void 0?Ee.smooth:this.smooth,groupStart:Ee!==void 0?Ee.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(q){const Q={index:typeof q=="number"?q:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return Q.clone=this.clone.bind(Q),Q}};return this.materials.push(V),V},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(ue){const xe=this.currentMaterial();if(xe&&xe.groupEnd===-1&&(xe.groupEnd=this.geometry.vertices.length/3,xe.groupCount=xe.groupEnd-xe.groupStart,xe.inherited=!1),ue&&this.materials.length>1)for(let Ee=this.materials.length-1;Ee>=0;Ee--)this.materials[Ee].groupCount<=0&&this.materials.splice(Ee,1);return ue&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),xe}},te&&te.name&&typeof te.clone=="function"){const ue=te.clone(0);ue.inherited=!0,this.object.materials.push(ue)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(j,U){const te=parseInt(j,10);return(te>=0?te-1:te+U/3)*3},parseNormalIndex:function(j,U){const te=parseInt(j,10);return(te>=0?te-1:te+U/3)*3},parseUVIndex:function(j,U){const te=parseInt(j,10);return(te>=0?te-1:te+U/2)*2},addVertex:function(j,U,te){const ue=this.vertices,xe=this.object.geometry.vertices;xe.push(ue[j+0],ue[j+1],ue[j+2]),xe.push(ue[U+0],ue[U+1],ue[U+2]),xe.push(ue[te+0],ue[te+1],ue[te+2])},addVertexPoint:function(j){const U=this.vertices;this.object.geometry.vertices.push(U[j+0],U[j+1],U[j+2])},addVertexLine:function(j){const U=this.vertices;this.object.geometry.vertices.push(U[j+0],U[j+1],U[j+2])},addNormal:function(j,U,te){const ue=this.normals,xe=this.object.geometry.normals;xe.push(ue[j+0],ue[j+1],ue[j+2]),xe.push(ue[U+0],ue[U+1],ue[U+2]),xe.push(ue[te+0],ue[te+1],ue[te+2])},addFaceNormal:function(j,U,te){const ue=this.vertices,xe=this.object.geometry.normals;m.fromArray(ue,j),w.fromArray(ue,U),b.fromArray(ue,te),R.subVectors(b,w),O.subVectors(m,w),R.cross(O),R.normalize(),xe.push(R.x,R.y,R.z),xe.push(R.x,R.y,R.z),xe.push(R.x,R.y,R.z)},addColor:function(j,U,te){const ue=this.colors,xe=this.object.geometry.colors;ue[j]!==void 0&&xe.push(ue[j+0],ue[j+1],ue[j+2]),ue[U]!==void 0&&xe.push(ue[U+0],ue[U+1],ue[U+2]),ue[te]!==void 0&&xe.push(ue[te+0],ue[te+1],ue[te+2])},addUV:function(j,U,te){const ue=this.uvs,xe=this.object.geometry.uvs;xe.push(ue[j+0],ue[j+1]),xe.push(ue[U+0],ue[U+1]),xe.push(ue[te+0],ue[te+1])},addDefaultUV:function(){const j=this.object.geometry.uvs;j.push(0,0),j.push(0,0),j.push(0,0)},addUVLine:function(j){const U=this.uvs;this.object.geometry.uvs.push(U[j+0],U[j+1])},addFace:function(j,U,te,ue,xe,Ee,V,q,Q){const F=this.vertices.length;let z=this.parseVertexIndex(j,F),X=this.parseVertexIndex(U,F),fe=this.parseVertexIndex(te,F);if(this.addVertex(z,X,fe),this.addColor(z,X,fe),V!==void 0&&V!==""){const Ae=this.normals.length;z=this.parseNormalIndex(V,Ae),X=this.parseNormalIndex(q,Ae),fe=this.parseNormalIndex(Q,Ae),this.addNormal(z,X,fe)}else this.addFaceNormal(z,X,fe);if(ue!==void 0&&ue!==""){const Ae=this.uvs.length;z=this.parseUVIndex(ue,Ae),X=this.parseUVIndex(xe,Ae),fe=this.parseUVIndex(Ee,Ae),this.addUV(z,X,fe),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(j){this.object.geometry.type="Points";const U=this.vertices.length;for(let te=0,ue=j.length;te<ue;te++){const xe=this.parseVertexIndex(j[te],U);this.addVertexPoint(xe),this.addColor(xe)}},addLineGeometry:function(j,U){this.object.geometry.type="Line";const te=this.vertices.length,ue=this.uvs.length;for(let xe=0,Ee=j.length;xe<Ee;xe++)this.addVertexLine(this.parseVertexIndex(j[xe],te));for(let xe=0,Ee=U.length;xe<Ee;xe++)this.addUVLine(this.parseUVIndex(U[xe],ue))}};return J.startObject("",!1),J}class Y extends g.Loader{constructor(j){super(j),this.materials=null}load(j,U,te,ue){const xe=this,Ee=new g.FileLoader(this.manager);Ee.setPath(this.path),Ee.setRequestHeader(this.requestHeader),Ee.setWithCredentials(this.withCredentials),Ee.load(j,function(V){try{U(xe.parse(V))}catch(q){ue?ue(q):console.error(q),xe.manager.itemError(j)}},te,ue)}setMaterials(j){return this.materials=j,this}parse(j){const U=new P;j.indexOf(`\r
`)!==-1&&(j=j.replace(/\r\n/g,`
`)),j.indexOf(`\\
`)!==-1&&(j=j.replace(/\\\n/g,""));const te=j.split(`
`);let ue=[];for(let V=0,q=te.length;V<q;V++){const Q=te[V].trimStart();if(Q.length===0)continue;const F=Q.charAt(0);if(F!=="#")if(F==="v"){const z=Q.split(_);switch(z[0]){case"v":U.vertices.push(parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3])),z.length>=7?(L.setRGB(parseFloat(z[4]),parseFloat(z[5]),parseFloat(z[6])).convertSRGBToLinear(),U.colors.push(L.r,L.g,L.b)):U.colors.push(void 0,void 0,void 0);break;case"vn":U.normals.push(parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3]));break;case"vt":U.uvs.push(parseFloat(z[1]),parseFloat(z[2]));break}}else if(F==="f"){const X=Q.slice(1).trim().split(_),fe=[];for(let Se=0,Be=X.length;Se<Be;Se++){const Ge=X[Se];if(Ge.length>0){const ht=Ge.split("/");fe.push(ht)}}const Ae=fe[0];for(let Se=1,Be=fe.length-1;Se<Be;Se++){const Ge=fe[Se],ht=fe[Se+1];U.addFace(Ae[0],Ge[0],ht[0],Ae[1],Ge[1],ht[1],Ae[2],Ge[2],ht[2])}}else if(F==="l"){const z=Q.substring(1).trim().split(" ");let X=[];const fe=[];if(Q.indexOf("/")===-1)X=z;else for(let Ae=0,Se=z.length;Ae<Se;Ae++){const Be=z[Ae].split("/");Be[0]!==""&&X.push(Be[0]),Be[1]!==""&&fe.push(Be[1])}U.addLineGeometry(X,fe)}else if(F==="p"){const X=Q.slice(1).trim().split(" ");U.addPointGeometry(X)}else if((ue=C.exec(Q))!==null){const z=(" "+ue[0].slice(1).trim()).slice(1);U.startObject(z)}else if(y.test(Q))U.object.startMaterial(Q.substring(7).trim(),U.materialLibraries);else if(v.test(Q))U.materialLibraries.push(Q.substring(7).trim());else if(E.test(Q))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(F==="s"){if(ue=Q.split(" "),ue.length>1){const X=ue[1].trim().toLowerCase();U.object.smooth=X!=="0"&&X!=="off"}else U.object.smooth=!0;const z=U.object.currentMaterial();z&&(z.smooth=U.object.smooth)}else{if(Q==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+Q+'"')}}U.finalize();const xe=new g.Group;if(xe.materialLibraries=[].concat(U.materialLibraries),!(U.objects.length===1&&U.objects[0].geometry.vertices.length===0)===!0)for(let V=0,q=U.objects.length;V<q;V++){const Q=U.objects[V],F=Q.geometry,z=Q.materials,X=F.type==="Line",fe=F.type==="Points";let Ae=!1;if(F.vertices.length===0)continue;const Se=new g.BufferGeometry;Se.setAttribute("position",new g.Float32BufferAttribute(F.vertices,3)),F.normals.length>0&&Se.setAttribute("normal",new g.Float32BufferAttribute(F.normals,3)),F.colors.length>0&&(Ae=!0,Se.setAttribute("color",new g.Float32BufferAttribute(F.colors,3))),F.hasUVIndices===!0&&Se.setAttribute("uv",new g.Float32BufferAttribute(F.uvs,2));const Be=[];for(let ht=0,xt=z.length;ht<xt;ht++){const at=z[ht],Gt=at.name+"_"+at.smooth+"_"+Ae;let wt=U.materials[Gt];if(this.materials!==null){if(wt=this.materials.create(at.name),X&&wt&&!(wt instanceof g.LineBasicMaterial)){const Yt=new g.LineBasicMaterial;g.Material.prototype.copy.call(Yt,wt),Yt.color.copy(wt.color),wt=Yt}else if(fe&&wt&&!(wt instanceof g.PointsMaterial)){const Yt=new g.PointsMaterial({size:10,sizeAttenuation:!1});g.Material.prototype.copy.call(Yt,wt),Yt.color.copy(wt.color),Yt.map=wt.map,wt=Yt}}wt===void 0&&(X?wt=new g.LineBasicMaterial:fe?wt=new g.PointsMaterial({size:1,sizeAttenuation:!1}):wt=new g.MeshPhongMaterial,wt.name=at.name,wt.flatShading=!at.smooth,wt.vertexColors=Ae,U.materials[Gt]=wt),Be.push(wt)}let Ge;if(Be.length>1){for(let ht=0,xt=z.length;ht<xt;ht++){const at=z[ht];Se.addGroup(at.groupStart,at.groupCount,ht)}X?Ge=new g.LineSegments(Se,Be):fe?Ge=new g.Points(Se,Be):Ge=new g.Mesh(Se,Be)}else X?Ge=new g.LineSegments(Se,Be[0]):fe?Ge=new g.Points(Se,Be[0]):Ge=new g.Mesh(Se,Be[0]);Ge.name=Q.name,xe.add(Ge)}else if(U.vertices.length>0){const V=new g.PointsMaterial({size:1,sizeAttenuation:!1}),q=new g.BufferGeometry;q.setAttribute("position",new g.Float32BufferAttribute(U.vertices,3)),U.colors.length>0&&U.colors[0]!==void 0&&(q.setAttribute("color",new g.Float32BufferAttribute(U.colors,3)),V.vertexColors=!0);const Q=new g.Points(q,V);xe.add(Q)}return xe}}},"./node_modules/super-three/examples/jsm/utils/BufferGeometryUtils.js":(S,I,h)=>{h.r(I),h.d(I,{computeMikkTSpaceTangents:()=>v,computeMorphedAttributes:()=>P,computeTangents:()=>C,deepCloneAttribute:()=>_,deinterleaveAttribute:()=>w,deinterleaveGeometry:()=>b,estimateBytesUsed:()=>O,interleaveAttributes:()=>m,mergeBufferAttributes:()=>E,mergeBufferGeometries:()=>y,mergeGroups:()=>Y,mergeVertices:()=>R,toCreasedNormals:()=>J,toTrianglesDrawMode:()=>L});var g=h("./node_modules/super-three/build/three.module.js");function C(){throw new Error("BufferGeometryUtils: computeTangents renamed to computeMikkTSpaceTangents.")}function v(j,U,te=!0){if(!U||!U.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!j.hasAttribute("position")||!j.hasAttribute("normal")||!j.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function ue(V){if(V.normalized||V.isInterleavedBufferAttribute){const q=new Float32Array(V.getCount()*V.itemSize);for(let Q=0,F=0;Q<V.getCount();Q++)q[F++]=V.getX(Q),q[F++]=V.getY(Q),V.itemSize>2&&(q[F++]=V.getZ(Q));return q}return V.array instanceof Float32Array?V.array:new Float32Array(V.array)}const xe=j.index?j.toNonIndexed():j,Ee=U.generateTangents(ue(xe.attributes.position),ue(xe.attributes.normal),ue(xe.attributes.uv));if(te)for(let V=3;V<Ee.length;V+=4)Ee[V]*=-1;return xe.setAttribute("tangent",new g.BufferAttribute(Ee,4)),j!==xe&&j.copy(xe),j}function y(j,U=!1){const te=j[0].index!==null,ue=new Set(Object.keys(j[0].attributes)),xe=new Set(Object.keys(j[0].morphAttributes)),Ee={},V={},q=j[0].morphTargetsRelative,Q=new g.BufferGeometry;let F=0;for(let z=0;z<j.length;++z){const X=j[z];let fe=0;if(te!==(X.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const Ae in X.attributes){if(!ue.has(Ae))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+'. All geometries must have compatible attributes; make sure "'+Ae+'" attribute exists among all geometries, or in none of them.'),null;Ee[Ae]===void 0&&(Ee[Ae]=[]),Ee[Ae].push(X.attributes[Ae]),fe++}if(fe!==ue.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+". Make sure all geometries have the same number of attributes."),null;if(q!==X.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const Ae in X.morphAttributes){if(!xe.has(Ae))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+".  .morphAttributes must be consistent throughout all geometries."),null;V[Ae]===void 0&&(V[Ae]=[]),V[Ae].push(X.morphAttributes[Ae])}if(U){let Ae;if(te)Ae=X.index.count;else if(X.attributes.position!==void 0)Ae=X.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+". The geometry must have either an index or a position attribute"),null;Q.addGroup(F,Ae,z),F+=Ae}}if(te){let z=0;const X=[];for(let fe=0;fe<j.length;++fe){const Ae=j[fe].index;for(let Se=0;Se<Ae.count;++Se)X.push(Ae.getX(Se)+z);z+=j[fe].attributes.position.count}Q.setIndex(X)}for(const z in Ee){const X=E(Ee[z]);if(!X)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+z+" attribute."),null;Q.setAttribute(z,X)}for(const z in V){const X=V[z][0].length;if(X===0)break;Q.morphAttributes=Q.morphAttributes||{},Q.morphAttributes[z]=[];for(let fe=0;fe<X;++fe){const Ae=[];for(let Be=0;Be<V[z].length;++Be)Ae.push(V[z][Be][fe]);const Se=E(Ae);if(!Se)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+z+" morphAttribute."),null;Q.morphAttributes[z].push(Se)}}return Q}function E(j){let U,te,ue,xe=0;for(let q=0;q<j.length;++q){const Q=j[q];if(Q.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(U===void 0&&(U=Q.array.constructor),U!==Q.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(te===void 0&&(te=Q.itemSize),te!==Q.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(ue===void 0&&(ue=Q.normalized),ue!==Q.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;xe+=Q.array.length}const Ee=new U(xe);let V=0;for(let q=0;q<j.length;++q)Ee.set(j[q].array,V),V+=j[q].array.length;return new g.BufferAttribute(Ee,te,ue)}function _(j){return j.isInstancedInterleavedBufferAttribute||j.isInterleavedBufferAttribute?w(j):j.isInstancedBufferAttribute?new g.InstancedBufferAttribute().copy(j):new g.BufferAttribute().copy(j)}function m(j){let U,te=0,ue=0;for(let F=0,z=j.length;F<z;++F){const X=j[F];if(U===void 0&&(U=X.array.constructor),U!==X.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;te+=X.array.length,ue+=X.itemSize}const xe=new g.InterleavedBuffer(new U(te),ue);let Ee=0;const V=[],q=["getX","getY","getZ","getW"],Q=["setX","setY","setZ","setW"];for(let F=0,z=j.length;F<z;F++){const X=j[F],fe=X.itemSize,Ae=X.count,Se=new g.InterleavedBufferAttribute(xe,fe,Ee,X.normalized);V.push(Se),Ee+=fe;for(let Be=0;Be<Ae;Be++)for(let Ge=0;Ge<fe;Ge++)Se[Q[Ge]](Be,X[q[Ge]](Be))}return V}function w(j){const U=j.data.array.constructor,te=j.count,ue=j.itemSize,xe=j.normalized,Ee=new U(te*ue);let V;j.isInstancedInterleavedBufferAttribute?V=new g.InstancedBufferAttribute(Ee,ue,xe,j.meshPerAttribute):V=new g.BufferAttribute(Ee,ue,xe);for(let q=0;q<te;q++)V.setX(q,j.getX(q)),ue>=2&&V.setY(q,j.getY(q)),ue>=3&&V.setZ(q,j.getZ(q)),ue>=4&&V.setW(q,j.getW(q));return V}function b(j){const U=j.attributes,te=j.morphTargets,ue=new Map;for(const xe in U){const Ee=U[xe];Ee.isInterleavedBufferAttribute&&(ue.has(Ee)||ue.set(Ee,w(Ee)),U[xe]=ue.get(Ee))}for(const xe in te){const Ee=te[xe];Ee.isInterleavedBufferAttribute&&(ue.has(Ee)||ue.set(Ee,w(Ee)),te[xe]=ue.get(Ee))}}function O(j){let U=0;for(const ue in j.attributes){const xe=j.getAttribute(ue);U+=xe.count*xe.itemSize*xe.array.BYTES_PER_ELEMENT}const te=j.getIndex();return U+=te?te.count*te.itemSize*te.array.BYTES_PER_ELEMENT:0,U}function R(j,U=1e-4){U=Math.max(U,Number.EPSILON);const te={},ue=j.getIndex(),xe=j.getAttribute("position"),Ee=ue?ue.count:xe.count;let V=0;const q=Object.keys(j.attributes),Q={},F={},z=[],X=["getX","getY","getZ","getW"],fe=["setX","setY","setZ","setW"];for(let Ge=0,ht=q.length;Ge<ht;Ge++){const xt=q[Ge],at=j.attributes[xt];Q[xt]=new g.BufferAttribute(new at.array.constructor(at.count*at.itemSize),at.itemSize,at.normalized);const Gt=j.morphAttributes[xt];Gt&&(F[xt]=new g.BufferAttribute(new Gt.array.constructor(Gt.count*Gt.itemSize),Gt.itemSize,Gt.normalized))}const Ae=Math.log10(1/U),Se=Math.pow(10,Ae);for(let Ge=0;Ge<Ee;Ge++){const ht=ue?ue.getX(Ge):Ge;let xt="";for(let at=0,Gt=q.length;at<Gt;at++){const wt=q[at],Yt=j.getAttribute(wt),Mn=Yt.itemSize;for(let je=0;je<Mn;je++)xt+=`${~~(Yt[X[je]](ht)*Se)},`}if(xt in te)z.push(te[xt]);else{for(let at=0,Gt=q.length;at<Gt;at++){const wt=q[at],Yt=j.getAttribute(wt),Mn=j.morphAttributes[wt],je=Yt.itemSize,rt=Q[wt],At=F[wt];for(let Bt=0;Bt<je;Bt++){const Pt=X[Bt],qt=fe[Bt];if(rt[qt](V,Yt[Pt](ht)),Mn)for(let un=0,dn=Mn.length;un<dn;un++)At[un][qt](V,Mn[un][Pt](ht))}}te[xt]=V,z.push(V),V++}}const Be=j.clone();for(const Ge in j.attributes){const ht=Q[Ge];if(Be.setAttribute(Ge,new g.BufferAttribute(ht.array.slice(0,V*ht.itemSize),ht.itemSize,ht.normalized)),Ge in F)for(let xt=0;xt<F[Ge].length;xt++){const at=F[Ge][xt];Be.morphAttributes[Ge][xt]=new g.BufferAttribute(at.array.slice(0,V*at.itemSize),at.itemSize,at.normalized)}}return Be.setIndex(z),Be}function L(j,U){if(U===g.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),j;if(U===g.TriangleFanDrawMode||U===g.TriangleStripDrawMode){let te=j.getIndex();if(te===null){const V=[],q=j.getAttribute("position");if(q!==void 0){for(let Q=0;Q<q.count;Q++)V.push(Q);j.setIndex(V),te=j.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),j}const ue=te.count-2,xe=[];if(U===g.TriangleFanDrawMode)for(let V=1;V<=ue;V++)xe.push(te.getX(0)),xe.push(te.getX(V)),xe.push(te.getX(V+1));else for(let V=0;V<ue;V++)V%2===0?(xe.push(te.getX(V)),xe.push(te.getX(V+1)),xe.push(te.getX(V+2))):(xe.push(te.getX(V+2)),xe.push(te.getX(V+1)),xe.push(te.getX(V)));xe.length/3!==ue&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const Ee=j.clone();return Ee.setIndex(xe),Ee.clearGroups(),Ee}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",U),j}function P(j){if(j.geometry.isBufferGeometry!==!0)return console.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;const U=new g.Vector3,te=new g.Vector3,ue=new g.Vector3,xe=new g.Vector3,Ee=new g.Vector3,V=new g.Vector3,q=new g.Vector3,Q=new g.Vector3,F=new g.Vector3;function z(ni,zt,Ue,Pe,Ye,ze,He,et){U.fromBufferAttribute(zt,Ye),te.fromBufferAttribute(zt,ze),ue.fromBufferAttribute(zt,He);const Me=ni.morphTargetInfluences;if(Ue&&Me){q.set(0,0,0),Q.set(0,0,0),F.set(0,0,0);for(let Te=0,Oe=Ue.length;Te<Oe;Te++){const Ze=Me[Te],ae=Ue[Te];Ze!==0&&(xe.fromBufferAttribute(ae,Ye),Ee.fromBufferAttribute(ae,ze),V.fromBufferAttribute(ae,He),Pe?(q.addScaledVector(xe,Ze),Q.addScaledVector(Ee,Ze),F.addScaledVector(V,Ze)):(q.addScaledVector(xe.sub(U),Ze),Q.addScaledVector(Ee.sub(te),Ze),F.addScaledVector(V.sub(ue),Ze)))}U.add(q),te.add(Q),ue.add(F)}ni.isSkinnedMesh&&(ni.boneTransform(Ye,U),ni.boneTransform(ze,te),ni.boneTransform(He,ue)),et[Ye*3+0]=U.x,et[Ye*3+1]=U.y,et[Ye*3+2]=U.z,et[ze*3+0]=te.x,et[ze*3+1]=te.y,et[ze*3+2]=te.z,et[He*3+0]=ue.x,et[He*3+1]=ue.y,et[He*3+2]=ue.z}const X=j.geometry,fe=j.material;let Ae,Se,Be;const Ge=X.index,ht=X.attributes.position,xt=X.morphAttributes.position,at=X.morphTargetsRelative,Gt=X.attributes.normal,wt=X.morphAttributes.position,Yt=X.groups,Mn=X.drawRange;let je,rt,At,Bt,Pt,qt,un;const dn=new Float32Array(ht.count*ht.itemSize),bn=new Float32Array(Gt.count*Gt.itemSize);if(Ge!==null)if(Array.isArray(fe))for(je=0,At=Yt.length;je<At;je++)for(Pt=Yt[je],qt=Math.max(Pt.start,Mn.start),un=Math.min(Pt.start+Pt.count,Mn.start+Mn.count),rt=qt,Bt=un;rt<Bt;rt+=3)Ae=Ge.getX(rt),Se=Ge.getX(rt+1),Be=Ge.getX(rt+2),z(j,ht,xt,at,Ae,Se,Be,dn),z(j,Gt,wt,at,Ae,Se,Be,bn);else for(qt=Math.max(0,Mn.start),un=Math.min(Ge.count,Mn.start+Mn.count),je=qt,At=un;je<At;je+=3)Ae=Ge.getX(je),Se=Ge.getX(je+1),Be=Ge.getX(je+2),z(j,ht,xt,at,Ae,Se,Be,dn),z(j,Gt,wt,at,Ae,Se,Be,bn);else if(Array.isArray(fe))for(je=0,At=Yt.length;je<At;je++)for(Pt=Yt[je],qt=Math.max(Pt.start,Mn.start),un=Math.min(Pt.start+Pt.count,Mn.start+Mn.count),rt=qt,Bt=un;rt<Bt;rt+=3)Ae=rt,Se=rt+1,Be=rt+2,z(j,ht,xt,at,Ae,Se,Be,dn),z(j,Gt,wt,at,Ae,Se,Be,bn);else for(qt=Math.max(0,Mn.start),un=Math.min(ht.count,Mn.start+Mn.count),je=qt,At=un;je<At;je+=3)Ae=je,Se=je+1,Be=je+2,z(j,ht,xt,at,Ae,Se,Be,dn),z(j,Gt,wt,at,Ae,Se,Be,bn);const tn=new g.Float32BufferAttribute(dn,3),ri=new g.Float32BufferAttribute(bn,3);return{positionAttribute:ht,normalAttribute:Gt,morphedPositionAttribute:tn,morphedNormalAttribute:ri}}function Y(j){if(j.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),j;let U=j.groups;if(U=U.sort((V,q)=>V.materialIndex!==q.materialIndex?V.materialIndex-q.materialIndex:V.start-q.start),j.getIndex()===null){const V=j.getAttribute("position"),q=[];for(let Q=0;Q<V.count;Q+=3)q.push(Q,Q+1,Q+2);j.setIndex(q)}const te=j.getIndex(),ue=[];for(let V=0;V<U.length;V++){const q=U[V],Q=q.start,F=Q+q.count;for(let z=Q;z<F;z++)ue.push(te.getX(z))}j.dispose(),j.setIndex(ue);let xe=0;for(let V=0;V<U.length;V++){const q=U[V];q.start=xe,xe+=q.count}let Ee=U[0];j.groups=[Ee];for(let V=1;V<U.length;V++){const q=U[V];Ee.materialIndex===q.materialIndex?Ee.count+=q.count:(Ee=q,j.groups.push(Ee))}return j}function J(j,U=Math.PI/3){const te=Math.cos(U),ue=(1+1e-10)*100,xe=[new g.Vector3,new g.Vector3,new g.Vector3],Ee=new g.Vector3,V=new g.Vector3,q=new g.Vector3,Q=new g.Vector3;function F(Be){const Ge=~~(Be.x*ue),ht=~~(Be.y*ue),xt=~~(Be.z*ue);return`${Ge},${ht},${xt}`}const z=j.toNonIndexed(),X=z.attributes.position,fe={};for(let Be=0,Ge=X.count/3;Be<Ge;Be++){const ht=3*Be,xt=xe[0].fromBufferAttribute(X,ht+0),at=xe[1].fromBufferAttribute(X,ht+1),Gt=xe[2].fromBufferAttribute(X,ht+2);Ee.subVectors(Gt,at),V.subVectors(xt,at);const wt=new g.Vector3().crossVectors(Ee,V).normalize();for(let Yt=0;Yt<3;Yt++){const Mn=xe[Yt],je=F(Mn);je in fe||(fe[je]=[]),fe[je].push(wt)}}const Ae=new Float32Array(X.count*3),Se=new g.BufferAttribute(Ae,3,!1);for(let Be=0,Ge=X.count/3;Be<Ge;Be++){const ht=3*Be,xt=xe[0].fromBufferAttribute(X,ht+0),at=xe[1].fromBufferAttribute(X,ht+1),Gt=xe[2].fromBufferAttribute(X,ht+2);Ee.subVectors(Gt,at),V.subVectors(xt,at),q.crossVectors(Ee,V).normalize();for(let wt=0;wt<3;wt++){const Yt=xe[wt],Mn=F(Yt),je=fe[Mn];Q.set(0,0,0);for(let rt=0,At=je.length;rt<At;rt++){const Bt=je[rt];q.dot(Bt)>te&&Q.add(Bt)}Q.normalize(),Se.setXYZ(ht+wt,Q.x,Q.y,Q.z)}}return z.setAttribute("normal",Se),z}},"./node_modules/super-three/examples/jsm/utils/WorkerPool.js":(S,I,h)=>{h.r(I),h.d(I,{WorkerPool:()=>g});class g{constructor(v=4){this.pool=v,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(v){if(!this.workers[v]){const y=this.workerCreator();y.addEventListener("message",this._onMessage.bind(this,v)),this.workers[v]=y}}_getIdleWorker(){for(let v=0;v<this.pool;v++)if(!(this.workerStatus&1<<v))return v;return-1}_onMessage(v,y){const E=this.workersResolve[v];if(E&&E(y),this.queue.length){const{resolve:_,msg:m,transfer:w}=this.queue.shift();this.workersResolve[v]=_,this.workers[v].postMessage(m,w)}else this.workerStatus^=1<<v}setWorkerCreator(v){this.workerCreator=v}setWorkerLimit(v){this.pool=v}postMessage(v,y){return new Promise(E=>{const _=this._getIdleWorker();_!==-1?(this._initWorker(_),this.workerStatus|=1<<_,this.workersResolve[_]=E,this.workers[_].postMessage(v,y)):this.queue.push({resolve:E,msg:v,transfer:y})})}dispose(){this.workers.forEach(v=>v.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}},"./package.json":S=>{S.exports=JSON.parse('{"name":"aframe","version":"1.4.2","description":"A web framework for building virtual reality experiences.","homepage":"https://aframe.io/","main":"dist/aframe-master.js","scripts":{"dev":"cross-env INSPECTOR_VERSION=dev webpack serve --port 8080","dist":"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"webpack --config webpack.config.js","dist:min":"webpack --config webpack.prod.config.js","docs":"markserv --dir docs --port 9001","preghpages":"node ./scripts/preghpages.js","ghpages":"ghpages -p gh-pages/","lint":"semistandard -v | snazzy","lint:fix":"semistandard --fix","precommit":"npm run lint","prepush":"node scripts/testOnlyCheck.js","prerelease":"node scripts/release.js 1.4.1 1.4.2","start":"npm run dev","start:https":"npm run dev -- --server-type https","test":"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"mocha --ui tdd tests/node"},"repository":"aframevr/aframe","license":"MIT","files":["dist/*","docs/**/*","src/**/*","vendor/**/*"],"dependencies":{"buffer":"^6.0.3","custom-event-polyfill":"^1.0.6","debug":"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","@ungap/custom-elements":"^1.1.0","load-bmfont":"^1.2.3","object-assign":"^4.0.1","present":"0.0.6","promise-polyfill":"^3.1.0","super-animejs":"^3.1.0","super-three":"^0.147.1","three-bmfont-text":"dmarcos/three-bmfont-text#21d017046216e318362c48abd1a48bddfb6e0733","webvr-polyfill":"^0.10.12"},"devDependencies":{"@babel/core":"^7.17.10","babel-loader":"^8.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","chai-shallow-deep-equal":"^1.4.0","chalk":"^1.1.3","cross-env":"^7.0.3","css-loader":"^6.7.1","ghpages":"0.0.8","git-rev":"^0.2.1","glob":"^8.0.3","husky":"^0.11.7","jsdom":"^20.0.0","karma":"^6.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sinon-chai":"^2.0.2","karma-webpack":"^5.0.0","markserv":"github:sukima/markserv#feature/fix-broken-websoketio-link","mocha":"^10.0.0","replace-in-file":"^2.5.3","semistandard":"^9.0.0","shelljs":"^0.7.7","shx":"^0.2.2","sinon":"<12.0.0","sinon-chai":"^3.7.0","snazzy":"^5.0.0","style-loader":"^3.3.1","too-wordy":"ngokevin/too-wordy","webpack":"^5.73.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.11.0","webpack-merge":"^5.8.0","write-good":"^1.0.8"},"link":true,"semistandard":{"ignore":["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},"keywords":["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","quest","meta","web-components","webvr","webxr"],"engines":{"node":">= 4.6.0","npm":">= 2.15.9"}}')}},d={};function k(S){var I=d[S];if(I!==void 0)return I.exports;var h=d[S]={id:S,exports:{}};return W[S].call(h.exports,h,h.exports,k),h.exports}k.m=W,k.n=S=>{var I=S&&S.__esModule?()=>S.default:()=>S;return k.d(I,{a:I}),I},k.d=(S,I)=>{for(var h in I)k.o(I,h)&&!k.o(S,h)&&Object.defineProperty(S,h,{enumerable:!0,get:I[h]})},k.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),k.o=(S,I)=>Object.prototype.hasOwnProperty.call(S,I),k.r=S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})},k.b=document.baseURI||self.location.href,k.nc=void 0;var K=k("./src/index.js");return K})())})(hS);function BA(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}(function u(T,W,d){function k(I,h){if(!W[I]){if(!T[I]){var g=typeof BA=="function"&&BA;if(!h&&g)return g(I,!0);if(K)return K(I,!0);var C=new Error("Cannot find module '"+I+"'");throw C.code="MODULE_NOT_FOUND",C}var v=W[I]={exports:{}};T[I][0].call(v.exports,function(y){var E=T[I][1][y];return k(E||y)},v,v.exports,u,T,W,d)}return W[I].exports}for(var K=typeof BA=="function"&&BA,S=0;S<d.length;S++)k(d[S]);return k})({1:[function(u,T,W){u("./")},{"./":2}],2:[function(u,T,W){u("./src/controls"),u("./src/loaders"),u("./src/misc"),u("./src/pathfinding"),u("./src/primitives")},{"./src/controls":14,"./src/loaders":24,"./src/misc":29,"./src/pathfinding":32,"./src/primitives":39}],3:[function(u,T,W){T.exports=THREE.ColladaLoader=function(d){this.manager=d!==void 0?d:THREE.DefaultLoadingManager},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"anonymous",load:function(d,k,K,S){var I=this,h=I.path===void 0?THREE.LoaderUtils.extractUrlBase(d):I.path,g=new THREE.FileLoader(I.manager);g.setPath(I.path),g.load(d,function(C){k(I.parse(C,h))},K,S)},setPath:function(d){return this.path=d,this},setResourcePath:function(d){return this.resourcePath=d,this},options:{set convertUpAxis(d){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(d){return this.crossOrigin=d,this},parse:function(d,k){function K(Me,Te){for(var Oe=[],Ze=Me.childNodes,ae=0,ee=Ze.length;ae<ee;ae++){var se=Ze[ae];se.nodeName===Te&&Oe.push(se)}return Oe}function S(Me){if(Me.length===0)return[];for(var Te=Me.trim().split(/\s+/),Oe=new Array(Te.length),Ze=0,ae=Te.length;Ze<ae;Ze++)Oe[Ze]=Te[Ze];return Oe}function I(Me){if(Me.length===0)return[];for(var Te=Me.trim().split(/\s+/),Oe=new Array(Te.length),Ze=0,ae=Te.length;Ze<ae;Ze++)Oe[Ze]=parseFloat(Te[Ze]);return Oe}function h(Me){if(Me.length===0)return[];for(var Te=Me.trim().split(/\s+/),Oe=new Array(Te.length),Ze=0,ae=Te.length;Ze<ae;Ze++)Oe[Ze]=parseInt(Te[Ze]);return Oe}function g(Me){return Me.substring(1)}function C(){return"three_default_"+ze++}function v(Me){return Object.keys(Me).length===0}function y(Me,Te,Oe,Ze){var ae=K(Me,Te)[0];if(ae!==void 0)for(var ee=K(ae,Oe),se=0;se<ee.length;se++)Ze(ee[se])}function E(Me,Te){for(var Oe in Me)Me[Oe].build=Te(Me[Oe])}function _(Me,Te){return Me.build!==void 0||(Me.build=Te(Me)),Me.build}function m(Me){var Te=[],Oe=Me.channels,Ze=Me.samplers,ae=Me.sources;for(var ee in Oe)if(Oe.hasOwnProperty(ee)){var se=Oe[ee],Ie=Ze[se.sampler],We=Ie.inputs.INPUT,Ke=Ie.inputs.OUTPUT;(function($e,Vt){for(var $t=$e.keyframes,Xt=$e.name,jt=[],on=[],In=[],di=[],fi=0,Nn=$t.length;fi<Nn;fi++){var vn=$t[fi],Ft=vn.time,yn=vn.value;un.fromArray(yn).transpose(),un.decompose(Bt,qt,Pt),jt.push(Ft),on.push(Bt.x,Bt.y,Bt.z),In.push(qt.x,qt.y,qt.z,qt.w),di.push(Pt.x,Pt.y,Pt.z)}on.length>0&&Vt.push(new THREE.VectorKeyframeTrack(Xt+".position",jt,on)),In.length>0&&Vt.push(new THREE.QuaternionKeyframeTrack(Xt+".quaternion",jt,In)),di.length>0&&Vt.push(new THREE.VectorKeyframeTrack(Xt+".scale",jt,di))})(function($e,Vt,$t){var Xt,jt,on,In,di,fi,Nn=He.nodes[$e.id],vn=je(Nn.id),Ft=Nn.transforms[$e.sid],yn=Nn.matrix.clone().transpose(),Gn={};switch(Ft){case"matrix":for(on=0,In=Vt.array.length;on<In;on++)if(Xt=Vt.array[on],jt=on*$t.stride,Gn[Xt]===void 0&&(Gn[Xt]={}),$e.arraySyntax===!0){var Dn=$t.array[jt],bi=$e.indices[0]+4*$e.indices[1];Gn[Xt][bi]=Dn}else for(di=0,fi=$t.stride;di<fi;di++)Gn[Xt][di]=$t.array[jt+di];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Ft)}var Pi=function(Zi,Dr){var Ki=[];for(var zr in Zi)Ki.push({time:parseFloat(zr),value:Zi[zr]});Ki.sort(function(ar,Qr){return ar.time-Qr.time});for(var Pr=0;Pr<16;Pr++)(function(ar,Qr,xs){var Qe,ut,_t,nn=!0;for(ut=0,_t=ar.length;ut<_t;ut++)(Qe=ar[ut]).value[Qr]===void 0?Qe.value[Qr]=null:nn=!1;if(nn===!0)for(ut=0,_t=ar.length;ut<_t;ut++)(Qe=ar[ut]).value[Qr]=xs;else(function(Wt,mn){for(var Un,Xn,ei=0,pn=Wt.length;ei<pn;ei++){var Oi=Wt[ei];if(Oi.value[mn]===null){if(Un=function(Mi,Ti,Xr){for(;Ti>=0;){var zi=Mi[Ti];if(zi.value[Xr]!==null)return zi;Ti--}return null}(Wt,ei,mn),Xn=function(Mi,Ti,Xr){for(;Ti<Mi.length;){var zi=Mi[Ti];if(zi.value[Xr]!==null)return zi;Ti++}return null}(Wt,ei,mn),Un===null){Oi.value[mn]=Xn.value[mn];continue}if(Xn===null){Oi.value[mn]=Un.value[mn];continue}(function(Mi,Ti,Xr,zi){if(Xr.time-Ti.time==0)return void(Mi.value[zi]=Ti.value[zi]);Mi.value[zi]=(Mi.time-Ti.time)*(Xr.value[zi]-Ti.value[zi])/(Xr.time-Ti.time)+Ti.value[zi]})(Oi,Un,Xn,mn)}}})(ar,Qr)})(Ki,Pr,Dr.elements[Pr]);return Ki}(Gn,yn);return{name:vn.uuid,keyframes:Pi}}(se,ae[We],ae[Ke]),Te)}return Te}function w(Me){return _(He.animations[Me],m)}function b(Me){for(var Te=[],Oe=Me.name,Ze=Me.end-Me.start||-1,ae=Me.animations,ee=0,se=ae.length;ee<se;ee++)for(var Ie=w(ae[ee]),We=0,Ke=Ie.length;We<Ke;We++)Te.push(Ie[We]);return new THREE.AnimationClip(Oe,Ze,Te)}function O(Me){return _(He.clips[Me],b)}function R(Me){var Te={id:Me.id},Oe=He.geometries[Te.id];return Me.skin!==void 0&&(Te.skin=function(Ze){function ae(Zi,Dr){return Dr.weight-Zi.weight}var ee,se,Ie,We={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},Ke=Ze.sources,$e=Ze.vertexWeights,Vt=$e.vcount,$t=$e.v,Xt=$e.inputs.JOINT.offset,jt=$e.inputs.WEIGHT.offset,on=Ze.sources[Ze.joints.inputs.JOINT],In=Ze.sources[Ze.joints.inputs.INV_BIND_MATRIX],di=Ke[$e.inputs.WEIGHT.id].array,fi=0;for(ee=0,Ie=Vt.length;ee<Ie;ee++){var Nn=Vt[ee],vn=[];for(se=0;se<Nn;se++){var Ft=$t[fi+Xt],yn=$t[fi+jt],Gn=di[yn];vn.push({index:Ft,weight:Gn}),fi+=2}for(vn.sort(ae),se=0;se<4;se++){var Dn=vn[se];Dn!==void 0?(We.indices.array.push(Dn.index),We.weights.array.push(Dn.weight)):(We.indices.array.push(0),We.weights.array.push(0))}}for(Ze.bindShapeMatrix?We.bindMatrix=new THREE.Matrix4().fromArray(Ze.bindShapeMatrix).transpose():We.bindMatrix=new THREE.Matrix4().identity(),ee=0,Ie=on.array.length;ee<Ie;ee++){var bi=on.array[ee],Pi=new THREE.Matrix4().fromArray(In.array,ee*In.stride).transpose();We.joints.push({name:bi,boneInverse:Pi})}return We}(Me.skin),Oe.sources.skinIndices=Te.skin.indices,Oe.sources.skinWeights=Te.skin.weights),Te}function L(Me){return _(He.controllers[Me],R)}function P(Me){return Me.build!==void 0?Me.build:Me.init_from}function Y(Me){var Te=He.images[Me];return Te!==void 0?_(Te,P):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",Me),null)}function J(Me){for(var Te={},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"color":Te[ae.nodeName]=I(ae.textContent);break;case"float":Te[ae.nodeName]=parseFloat(ae.textContent);break;case"texture":Te[ae.nodeName]={id:ae.getAttribute("texture"),extra:function(ee){for(var se={technique:{}},Ie=0,We=ee.childNodes.length;Ie<We;Ie++){var Ke=ee.childNodes[Ie];if(Ke.nodeType===1)switch(Ke.nodeName){case"extra":(function($e,Vt){for(var $t=0,Xt=$e.childNodes.length;$t<Xt;$t++){var jt=$e.childNodes[$t];if(jt.nodeType===1)switch(jt.nodeName){case"technique":(function(on,In){for(var di=0,fi=on.childNodes.length;di<fi;di++){var Nn=on.childNodes[di];if(Nn.nodeType===1)switch(Nn.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":In.technique[Nn.nodeName]=parseFloat(Nn.textContent);break;case"wrapU":case"wrapV":Nn.textContent.toUpperCase()==="TRUE"?In.technique[Nn.nodeName]=1:Nn.textContent.toUpperCase()==="FALSE"?In.technique[Nn.nodeName]=0:In.technique[Nn.nodeName]=parseInt(Nn.textContent)}}})(jt,Vt)}}})(Ke,se)}}return se}(ae)}}}return Te}function j(Me){return Me}function U(Me){function Te($t){var Xt=Ze.profile.samplers[$t.id],jt=null;if(Xt!==void 0?jt=Y(Ze.profile.surfaces[Xt.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),jt=Y($t.id)),jt!==null){var on=function(Nn){var vn,Ft=Nn.slice(2+(Nn.lastIndexOf(".")-1>>>0));switch(Ft=Ft.toLowerCase()){case"tga":vn=Ue;break;default:vn=zt}return vn}(jt);if(on!==void 0){var In=on.load(jt),di=$t.extra;if(di!==void 0&&di.technique!==void 0&&v(di.technique)===!1){var fi=di.technique;In.wrapS=fi.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,In.wrapT=fi.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,In.offset.set(fi.offsetU||0,fi.offsetV||0),In.repeat.set(fi.repeatU||1,fi.repeatV||1)}else In.wrapS=THREE.RepeatWrapping,In.wrapT=THREE.RepeatWrapping;return In}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",jt),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",$t.id),null}var Oe,Ze=function($t){return _(He.effects[$t],j)}(Me.url),ae=Ze.profile.technique,ee=Ze.profile.extra;switch(ae.type){case"phong":case"blinn":Oe=new THREE.MeshPhongMaterial;break;case"lambert":Oe=new THREE.MeshLambertMaterial;break;default:Oe=new THREE.MeshBasicMaterial}Oe.name=Me.name;var se=ae.parameters;for(var Ie in se){var We=se[Ie];switch(Ie){case"diffuse":We.color&&Oe.color.fromArray(We.color),We.texture&&(Oe.map=Te(We.texture));break;case"specular":We.color&&Oe.specular&&Oe.specular.fromArray(We.color),We.texture&&(Oe.specularMap=Te(We.texture));break;case"bump":We.texture&&(Oe.normalMap=Te(We.texture));break;case"ambient":We.texture&&(Oe.lightMap=Te(We.texture));break;case"shininess":We.float&&Oe.shininess&&(Oe.shininess=We.float);break;case"emission":We.color&&Oe.emissive&&Oe.emissive.fromArray(We.color),We.texture&&(Oe.emissiveMap=Te(We.texture))}}var Ke=se.transparent,$e=se.transparency;if($e===void 0&&Ke&&($e={float:1}),Ke===void 0&&$e&&(Ke={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Ke&&$e)if(Ke.data.texture)Oe.transparent=!0;else{var Vt=Ke.data.color;switch(Ke.opaque){case"A_ONE":Oe.opacity=Vt[3]*$e.float;break;case"RGB_ZERO":Oe.opacity=1-Vt[0]*$e.float;break;case"A_ZERO":Oe.opacity=1-Vt[3]*$e.float;break;case"RGB_ONE":Oe.opacity=Vt[0]*$e.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Ke.opaque)}Oe.opacity<1&&(Oe.transparent=!0)}return ee!==void 0&&ee.technique!==void 0&&ee.technique.double_sided===1&&(Oe.side=THREE.DoubleSide),Oe}function te(Me){return _(He.materials[Me],U)}function ue(Me){var Te;switch(Me.optics.technique){case"perspective":Te=new THREE.PerspectiveCamera(Me.optics.parameters.yfov,Me.optics.parameters.aspect_ratio,Me.optics.parameters.znear,Me.optics.parameters.zfar);break;case"orthographic":var Oe=Me.optics.parameters.ymag,Ze=Me.optics.parameters.xmag,ae=Me.optics.parameters.aspect_ratio;Ze=Ze===void 0?Oe*ae:Ze,Oe=Oe===void 0?Ze/ae:Oe,Ze*=.5,Oe*=.5,Te=new THREE.OrthographicCamera(-Ze,Ze,Oe,-Oe,Me.optics.parameters.znear,Me.optics.parameters.zfar);break;default:Te=new THREE.PerspectiveCamera}return Te.name=Me.name,Te}function xe(Me){var Te=He.cameras[Me];return Te!==void 0?_(Te,ue):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",Me),null)}function Ee(Me){var Te;switch(Me.technique){case"directional":Te=new THREE.DirectionalLight;break;case"point":Te=new THREE.PointLight;break;case"spot":Te=new THREE.SpotLight;break;case"ambient":Te=new THREE.AmbientLight}return Me.parameters.color&&Te.color.copy(Me.parameters.color),Me.parameters.distance&&(Te.distance=Me.parameters.distance),Te}function V(Me){var Te=He.lights[Me];return Te!==void 0?_(Te,Ee):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",Me),null)}function q(Me){for(var Te={array:[],stride:3},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"float_array":Te.array=I(Ze.textContent);break;case"Name_array":Te.array=S(Ze.textContent);break;case"technique_common":var ae=K(Ze,"accessor")[0];ae!==void 0&&(Te.stride=parseInt(ae.getAttribute("stride")))}}return Te}function Q(Me){for(var Te=0,Oe=0,Ze=Me.length;Oe<Ze;Oe++)Me[Oe].hasUV===!0&&Te++;Te>0&&Te<Me.length&&(Me.uvsNeedsFix=!0)}function F(Me){var Te={},Oe=Me.sources,Ze=Me.vertices,ae=Me.primitives;if(ae.length===0)return{};var ee=function(We){for(var Ke={},$e=0;$e<We.length;$e++){var Vt=We[$e];Ke[Vt.type]===void 0&&(Ke[Vt.type]=[]),Ke[Vt.type].push(Vt)}return Ke}(ae);for(var se in ee){var Ie=ee[se];Q(Ie),Te[se]=function(We,Ke,$e){for(var Vt={},$t={array:[],stride:0},Xt={array:[],stride:0},jt={array:[],stride:0},on={array:[],stride:0},In={array:[],stride:0},di={array:[],stride:4},fi={array:[],stride:4},Nn=new THREE.BufferGeometry,vn=[],Ft=0,yn=0;yn<We.length;yn++){var Gn=We[yn],Dn=Gn.inputs,bi=0;switch(Gn.type){case"lines":case"linestrips":bi=2*Gn.count;break;case"triangles":bi=3*Gn.count;break;case"polylist":for(var Pi=0;Pi<Gn.count;Pi++){var Zi=Gn.vcount[Pi];switch(Zi){case 3:bi+=3;break;case 4:bi+=6;break;default:bi+=3*(Zi-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",Gn.type)}Nn.addGroup(Ft,bi,yn),Ft+=bi,Gn.material&&vn.push(Gn.material);for(var Dr in Dn){var Ki=Dn[Dr];switch(Dr){case"VERTEX":for(var zr in $e){var Pr=$e[zr];switch(zr){case"POSITION":var ar=$t.array.length;if(z(Gn,Ke[Pr],Ki.offset,$t.array),$t.stride=Ke[Pr].stride,Ke.skinWeights&&Ke.skinIndices&&(z(Gn,Ke.skinIndices,Ki.offset,di.array),z(Gn,Ke.skinWeights,Ki.offset,fi.array)),Gn.hasUV===!1&&We.uvsNeedsFix===!0)for(var bi=($t.array.length-ar)/$t.stride,Qr=0;Qr<bi;Qr++)jt.array.push(0,0);break;case"NORMAL":z(Gn,Ke[Pr],Ki.offset,Xt.array),Xt.stride=Ke[Pr].stride;break;case"COLOR":z(Gn,Ke[Pr],Ki.offset,In.array),In.stride=Ke[Pr].stride;break;case"TEXCOORD":z(Gn,Ke[Pr],Ki.offset,jt.array),jt.stride=Ke[Pr].stride;break;case"TEXCOORD1":z(Gn,Ke[Pr],Ki.offset,on.array),jt.stride=Ke[Pr].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',zr)}}break;case"NORMAL":z(Gn,Ke[Ki.id],Ki.offset,Xt.array),Xt.stride=Ke[Ki.id].stride;break;case"COLOR":z(Gn,Ke[Ki.id],Ki.offset,In.array),In.stride=Ke[Ki.id].stride;break;case"TEXCOORD":z(Gn,Ke[Ki.id],Ki.offset,jt.array),jt.stride=Ke[Ki.id].stride;break;case"TEXCOORD1":z(Gn,Ke[Ki.id],Ki.offset,on.array),on.stride=Ke[Ki.id].stride}}}return $t.array.length>0&&Nn.addAttribute("position",new THREE.Float32BufferAttribute($t.array,$t.stride)),Xt.array.length>0&&Nn.addAttribute("normal",new THREE.Float32BufferAttribute(Xt.array,Xt.stride)),In.array.length>0&&Nn.addAttribute("color",new THREE.Float32BufferAttribute(In.array,In.stride)),jt.array.length>0&&Nn.addAttribute("uv",new THREE.Float32BufferAttribute(jt.array,jt.stride)),on.array.length>0&&Nn.addAttribute("uv2",new THREE.Float32BufferAttribute(on.array,on.stride)),di.array.length>0&&Nn.addAttribute("skinIndex",new THREE.Float32BufferAttribute(di.array,di.stride)),fi.array.length>0&&Nn.addAttribute("skinWeight",new THREE.Float32BufferAttribute(fi.array,fi.stride)),Vt.data=Nn,Vt.type=We[0].type,Vt.materialKeys=vn,Vt}(Ie,Oe,Ze)}return Te}function z(Me,Te,Oe,Ze){function ae(vn){for(var Ft=ee[vn+Oe]*Ke,yn=Ft+Ke;Ft<yn;Ft++)Ze.push(We[Ft])}var ee=Me.p,se=Me.stride,Ie=Me.vcount,We=Te.array,Ke=Te.stride;if(Me.vcount!==void 0)for(var $e=0,Vt=0,$t=Ie.length;Vt<$t;Vt++){var Xt=Ie[Vt];if(Xt===4){var jt=$e+1*se,on=$e+2*se,In=$e+3*se;ae(Nn=$e+0*se),ae(jt),ae(In),ae(jt),ae(on),ae(In)}else if(Xt===3){var jt=$e+1*se,on=$e+2*se;ae(Nn=$e+0*se),ae(jt),ae(on)}else if(Xt>4)for(var di=1,fi=Xt-2;di<=fi;di++){var Nn=$e+0*se,jt=$e+se*di,on=$e+se*(di+1);ae(Nn),ae(jt),ae(on)}$e+=se*Xt}else for(var Vt=0,$t=ee.length;Vt<$t;Vt+=se)ae(Vt)}function X(Me){return _(He.geometries[Me],F)}function fe(Me){return Me.build!==void 0?Me.build:Me}function Ae(Me){for(var Te={sid:Me.getAttribute("sid"),name:Me.getAttribute("name")||"",attachments:[],transforms:[]},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"attachment_full":Te.attachments.push(function(ae){for(var ee={joint:ae.getAttribute("joint").split("/").pop(),transforms:[],links:[]},se=0;se<ae.childNodes.length;se++){var Ie=ae.childNodes[se];if(Ie.nodeType===1)switch(Ie.nodeName){case"link":ee.links.push(Ae(Ie));break;case"matrix":case"translate":case"rotate":ee.transforms.push(Se(Ie))}}return ee}(Ze));break;case"matrix":case"translate":case"rotate":Te.transforms.push(Se(Ze))}}return Te}function Se(Me){var Te={type:Me.nodeName},Oe=I(Me.textContent);switch(Te.type){case"matrix":Te.obj=new THREE.Matrix4,Te.obj.fromArray(Oe).transpose();break;case"translate":Te.obj=new THREE.Vector3,Te.obj.fromArray(Oe);break;case"rotate":Te.obj=new THREE.Vector3,Te.obj.fromArray(Oe),Te.angle=THREE.MathUtils.degToRad(Oe[3])}return Te}function Be(Me){return Me.build!==void 0?Me.build:Me}function Ge(Me){for(var Te={name:Me.getAttribute("name")||"",type:Me.getAttribute("type"),id:Me.getAttribute("id"),sid:Me.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"node":Te.nodes.push(Ze.getAttribute("id")),Ge(Ze);break;case"instance_camera":Te.instanceCameras.push(g(Ze.getAttribute("url")));break;case"instance_controller":Te.instanceControllers.push(ht(Ze));break;case"instance_light":Te.instanceLights.push(g(Ze.getAttribute("url")));break;case"instance_geometry":Te.instanceGeometries.push(ht(Ze));break;case"instance_node":Te.instanceNodes.push(g(Ze.getAttribute("url")));break;case"matrix":ae=I(Ze.textContent),Te.matrix.multiply(un.fromArray(ae).transpose()),Te.transforms[Ze.getAttribute("sid")]=Ze.nodeName;break;case"translate":ae=I(Ze.textContent),dn.fromArray(ae),Te.matrix.multiply(un.makeTranslation(dn.x,dn.y,dn.z)),Te.transforms[Ze.getAttribute("sid")]=Ze.nodeName;break;case"rotate":var ae=I(Ze.textContent),ee=THREE.MathUtils.degToRad(ae[3]);Te.matrix.multiply(un.makeRotationAxis(dn.fromArray(ae),ee)),Te.transforms[Ze.getAttribute("sid")]=Ze.nodeName;break;case"scale":ae=I(Ze.textContent),Te.matrix.scale(dn.fromArray(ae)),Te.transforms[Ze.getAttribute("sid")]=Ze.nodeName;break;case"extra":break;default:console.log(Ze)}}return Mn(Te.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",Te.id):He.nodes[Te.id]=Te,Te}function ht(Me){for(var Te={id:g(Me.getAttribute("url")),materials:{},skeletons:[]},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];switch(Ze.nodeName){case"bind_material":for(var ae=Ze.getElementsByTagName("instance_material"),ee=0;ee<ae.length;ee++){var se=ae[ee],Ie=se.getAttribute("symbol"),We=se.getAttribute("target");Te.materials[Ie]=g(We)}break;case"skeleton":Te.skeletons.push(g(Ze.textContent))}}return Te}function xt(Me,Te){var Oe,Ze,ae=[],ee=[];for(Oe=0;Oe<Me.length;Oe++){var se=Me[Oe];if(Mn(se))at(je(se),Te,ae);else if(function($t){return He.visualScenes[$t]!==void 0}(se))for(var Ie=He.visualScenes[se].children,We=0;We<Ie.length;We++){var Ke=Ie[We];Ke.type==="JOINT"&&at(je(Ke.id),Te,ae)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",se)}for(Oe=0;Oe<Te.length;Oe++)for(We=0;We<ae.length;We++)if((Ze=ae[We]).bone.name===Te[Oe].name){ee[Oe]=Ze,Ze.processed=!0;break}for(Oe=0;Oe<ae.length;Oe++)(Ze=ae[Oe]).processed===!1&&(ee.push(Ze),Ze.processed=!0);var $e=[],Vt=[];for(Oe=0;Oe<ee.length;Oe++)Ze=ee[Oe],$e.push(Ze.bone),Vt.push(Ze.boneInverse);return new THREE.Skeleton($e,Vt)}function at(Me,Te,Oe){Me.traverse(function(Ze){if(Ze.isBone===!0){for(var ae,ee=0;ee<Te.length;ee++){var se=Te[ee];if(se.name===Ze.name){ae=se.boneInverse;break}}ae===void 0&&(ae=new THREE.Matrix4),Oe.push({bone:Ze,boneInverse:ae,processed:!1})}})}function Gt(Me){for(var Te=[],Oe=Me.matrix,Ze=Me.nodes,ae=Me.type,ee=Me.instanceCameras,se=Me.instanceControllers,Ie=Me.instanceLights,We=Me.instanceGeometries,Ke=Me.instanceNodes,$e=0,Vt=Ze.length;$e<Vt;$e++)Te.push(je(Ze[$e]));for(var $e=0,Vt=ee.length;$e<Vt;$e++){var $t=xe(ee[$e]);$t!==null&&Te.push($t.clone())}for(var $e=0,Vt=se.length;$e<Vt;$e++)for(var Xt=L((Nn=se[$e]).id),jt=Yt(vn=X(Xt.id),Nn.materials),on=xt(Nn.skeletons,Xt.skin.joints),In=0,di=jt.length;In<di;In++)(Ft=jt[In]).isSkinnedMesh&&(Ft.bind(on,Xt.skin.bindMatrix),Ft.normalizeSkinWeights()),Te.push(Ft);for(var $e=0,Vt=Ie.length;$e<Vt;$e++){var fi=V(Ie[$e]);fi!==null&&Te.push(fi.clone())}for(var $e=0,Vt=We.length;$e<Vt;$e++)for(var Nn=We[$e],vn=X(Nn.id),In=0,di=(jt=Yt(vn,Nn.materials)).length;In<di;In++)Te.push(jt[In]);for(var $e=0,Vt=Ke.length;$e<Vt;$e++)Te.push(je(Ke[$e]).clone());var Ft;if(Ze.length===0&&Te.length===1)Ft=Te[0];else for(Ft=ae==="JOINT"?new THREE.Bone:new THREE.Group,$e=0;$e<Te.length;$e++)Ft.add(Te[$e]);return Ft.name===""&&(Ft.name=ae==="JOINT"?Me.sid:Me.name),Ft.matrix.copy(Oe),Ft.matrix.decompose(Ft.position,Ft.quaternion,Ft.scale),Ft}function wt(Me,Te){for(var Oe=[],Ze=0,ae=Me.length;Ze<ae;Ze++){var ee=Te[Me[Ze]];ee===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",Me[Ze]),Oe.push(bn)):Oe.push(te(ee))}return Oe}function Yt(Me,Te){var Oe=[];for(var Ze in Me){var ae=Me[Ze],ee=wt(ae.materialKeys,Te);ee.length===0&&(Ze==="lines"||Ze==="linestrips"?ee.push(new THREE.LineBasicMaterial):ee.push(new THREE.MeshPhongMaterial));var se=ae.data.attributes.skinIndex!==void 0;if(se)for(var Ie=0,We=ee.length;Ie<We;Ie++)ee[Ie].skinning=!0;var Ke,$e=ee.length===1?ee[0]:ee;switch(Ze){case"lines":Ke=new THREE.LineSegments(ae.data,$e);break;case"linestrips":Ke=new THREE.Line(ae.data,$e);break;case"triangles":case"polylist":Ke=se?new THREE.SkinnedMesh(ae.data,$e):new THREE.Mesh(ae.data,$e)}Oe.push(Ke)}return Oe}function Mn(Me){return He.nodes[Me]!==void 0}function je(Me){return _(He.nodes[Me],Gt)}function rt(Me){var Te=new THREE.Group;Te.name=Me.name;for(var Oe=Me.children,Ze=0;Ze<Oe.length;Ze++){var ae=Oe[Ze];Te.add(je(ae.id))}return Te}function At(Me){return _(He.visualScenes[Me],rt)}var Bt=new THREE.Vector3,Pt=new THREE.Vector3,qt=new THREE.Quaternion,un=new THREE.Matrix4,dn=new THREE.Vector3,bn=new THREE.MeshBasicMaterial({color:16711935});if(d.length===0)return{scene:new THREE.Scene};var tn=K(new DOMParser().parseFromString(d,"application/xml"),"COLLADA")[0],ri=tn.getAttribute("version");console.log("THREE.ColladaLoader: File version",ri);var ni=function(Me){return{unit:function(Te){return Te!==void 0&&Te.hasAttribute("meter")===!0?parseFloat(Te.getAttribute("meter")):1}(K(Me,"unit")[0]),upAxis:function(Te){return Te!==void 0?Te.textContent:"Y_UP"}(K(Me,"up_axis")[0])}}(K(tn,"asset")[0]),zt=new THREE.TextureLoader(this.manager);zt.setPath(this.resourcePath||k).setCrossOrigin(this.crossOrigin);var Ue;THREE.TGALoader&&(Ue=new THREE.TGALoader(this.manager)).setPath(this.resourcePath||k);var Pe=[],Ye={},ze=0,He={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};y(tn,"library_animations","animation",function(Me){for(var Te={sources:{},samplers:{},channels:{}},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1){var ee;switch(ae.nodeName){case"source":ee=ae.getAttribute("id"),Te.sources[ee]=q(ae);break;case"sampler":ee=ae.getAttribute("id"),Te.samplers[ee]=function(se){for(var Ie={inputs:{}},We=0,Ke=se.childNodes.length;We<Ke;We++){var $e=se.childNodes[We];if($e.nodeType===1)switch($e.nodeName){case"input":var Vt=g($e.getAttribute("source")),$t=$e.getAttribute("semantic");Ie.inputs[$t]=Vt}}return Ie}(ae);break;case"channel":ee=ae.getAttribute("target"),Te.channels[ee]=function(se){var Ie={},We=se.getAttribute("target").split("/"),Ke=We.shift(),$e=We.shift(),Vt=$e.indexOf("(")!==-1,$t=$e.indexOf(".")!==-1;if($t)We=$e.split("."),$e=We.shift(),Ie.member=We.shift();else if(Vt){var Xt=$e.split("(");$e=Xt.shift();for(var jt=0;jt<Xt.length;jt++)Xt[jt]=parseInt(Xt[jt].replace(/\)/,""));Ie.indices=Xt}return Ie.id=Ke,Ie.sid=$e,Ie.arraySyntax=Vt,Ie.memberSyntax=$t,Ie.sampler=g(se.getAttribute("source")),Ie}(ae);break;default:console.log(ae)}}}He.animations[Me.getAttribute("id")]=Te}),y(tn,"library_animation_clips","animation_clip",function(Me){for(var Te={name:Me.getAttribute("id")||"default",start:parseFloat(Me.getAttribute("start")||0),end:parseFloat(Me.getAttribute("end")||0),animations:[]},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"instance_animation":Te.animations.push(g(ae.getAttribute("url")))}}He.clips[Me.getAttribute("id")]=Te}),y(tn,"library_controllers","controller",function(Me){for(var Te={},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"skin":Te.id=g(ae.getAttribute("source")),Te.skin=function(ee){for(var se={sources:{}},Ie=0,We=ee.childNodes.length;Ie<We;Ie++){var Ke=ee.childNodes[Ie];if(Ke.nodeType===1)switch(Ke.nodeName){case"bind_shape_matrix":se.bindShapeMatrix=I(Ke.textContent);break;case"source":var $e=Ke.getAttribute("id");se.sources[$e]=q(Ke);break;case"joints":se.joints=function(Vt){for(var $t={inputs:{}},Xt=0,jt=Vt.childNodes.length;Xt<jt;Xt++){var on=Vt.childNodes[Xt];if(on.nodeType===1)switch(on.nodeName){case"input":var In=on.getAttribute("semantic"),di=g(on.getAttribute("source"));$t.inputs[In]=di}}return $t}(Ke);break;case"vertex_weights":se.vertexWeights=function(Vt){for(var $t={inputs:{}},Xt=0,jt=Vt.childNodes.length;Xt<jt;Xt++){var on=Vt.childNodes[Xt];if(on.nodeType===1)switch(on.nodeName){case"input":var In=on.getAttribute("semantic"),di=g(on.getAttribute("source")),fi=parseInt(on.getAttribute("offset"));$t.inputs[In]={id:di,offset:fi};break;case"vcount":$t.vcount=h(on.textContent);break;case"v":$t.v=h(on.textContent)}}return $t}(Ke)}}return se}(ae);break;case"morph":Te.id=g(ae.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}He.controllers[Me.getAttribute("id")]=Te}),y(tn,"library_images","image",function(Me){var Te={init_from:K(Me,"init_from")[0].textContent};He.images[Me.getAttribute("id")]=Te}),y(tn,"library_effects","effect",function(Me){for(var Te={},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"profile_COMMON":Te.profile=function(ee){for(var se={surfaces:{},samplers:{}},Ie=0,We=ee.childNodes.length;Ie<We;Ie++){var Ke=ee.childNodes[Ie];if(Ke.nodeType===1)switch(Ke.nodeName){case"newparam":(function($e,Vt){for(var $t=$e.getAttribute("sid"),Xt=0,jt=$e.childNodes.length;Xt<jt;Xt++){var on=$e.childNodes[Xt];if(on.nodeType===1)switch(on.nodeName){case"surface":Vt.surfaces[$t]=function(In){for(var di={},fi=0,Nn=In.childNodes.length;fi<Nn;fi++){var vn=In.childNodes[fi];if(vn.nodeType===1)switch(vn.nodeName){case"init_from":di.init_from=vn.textContent}}return di}(on);break;case"sampler2D":Vt.samplers[$t]=function(In){for(var di={},fi=0,Nn=In.childNodes.length;fi<Nn;fi++){var vn=In.childNodes[fi];if(vn.nodeType===1)switch(vn.nodeName){case"source":di.source=vn.textContent}}return di}(on)}}})(Ke,se);break;case"technique":se.technique=function($e){for(var Vt={},$t=0,Xt=$e.childNodes.length;$t<Xt;$t++){var jt=$e.childNodes[$t];if(jt.nodeType===1)switch(jt.nodeName){case"constant":case"lambert":case"blinn":case"phong":Vt.type=jt.nodeName,Vt.parameters=function(on){for(var In={},di=0,fi=on.childNodes.length;di<fi;di++){var Nn=on.childNodes[di];if(Nn.nodeType===1)switch(Nn.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":In[Nn.nodeName]=J(Nn);break;case"transparent":In[Nn.nodeName]={opaque:Nn.getAttribute("opaque"),data:J(Nn)}}}return In}(jt)}}return Vt}(Ke);break;case"extra":se.extra=function($e){for(var Vt={},$t=0,Xt=$e.childNodes.length;$t<Xt;$t++){var jt=$e.childNodes[$t];if(jt.nodeType===1)switch(jt.nodeName){case"technique":Vt.technique=function(on){for(var In={},di=0,fi=on.childNodes.length;di<fi;di++){var Nn=on.childNodes[di];if(Nn.nodeType===1)switch(Nn.nodeName){case"double_sided":In[Nn.nodeName]=parseInt(Nn.textContent)}}return In}(jt)}}return Vt}(Ke)}}return se}(ae)}}He.effects[Me.getAttribute("id")]=Te}),y(tn,"library_materials","material",function(Me){for(var Te={name:Me.getAttribute("name")},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"instance_effect":Te.url=g(ae.getAttribute("url"))}}He.materials[Me.getAttribute("id")]=Te}),y(tn,"library_cameras","camera",function(Me){for(var Te={name:Me.getAttribute("name")},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"optics":Te.optics=function(ee){for(var se=0;se<ee.childNodes.length;se++){var Ie=ee.childNodes[se];switch(Ie.nodeName){case"technique_common":return function(We){for(var Ke={},$e=0;$e<We.childNodes.length;$e++){var Vt=We.childNodes[$e];switch(Vt.nodeName){case"perspective":case"orthographic":Ke.technique=Vt.nodeName,Ke.parameters=function($t){for(var Xt={},jt=0;jt<$t.childNodes.length;jt++){var on=$t.childNodes[jt];switch(on.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":Xt[on.nodeName]=parseFloat(on.textContent)}}return Xt}(Vt)}}return Ke}(Ie)}}return{}}(ae)}}He.cameras[Me.getAttribute("id")]=Te}),y(tn,"library_lights","light",function(Me){for(var Te={},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"technique_common":Te=function(ee){for(var se={},Ie=0,We=ee.childNodes.length;Ie<We;Ie++){var Ke=ee.childNodes[Ie];if(Ke.nodeType===1)switch(Ke.nodeName){case"directional":case"point":case"spot":case"ambient":se.technique=Ke.nodeName,se.parameters=function($e){for(var Vt={},$t=0,Xt=$e.childNodes.length;$t<Xt;$t++){var jt=$e.childNodes[$t];if(jt.nodeType===1)switch(jt.nodeName){case"color":var on=I(jt.textContent);Vt.color=new THREE.Color().fromArray(on);break;case"falloff_angle":Vt.falloffAngle=parseFloat(jt.textContent);break;case"quadratic_attenuation":var In=parseFloat(jt.textContent);Vt.distance=In?Math.sqrt(1/In):0}}return Vt}(Ke)}}return se}(ae)}}He.lights[Me.getAttribute("id")]=Te}),y(tn,"library_geometries","geometry",function(Me){var Te={name:Me.getAttribute("name"),sources:{},vertices:{},primitives:[]},Oe=K(Me,"mesh")[0];if(Oe!==void 0){for(var Ze=0;Ze<Oe.childNodes.length;Ze++){var ae=Oe.childNodes[Ze];if(ae.nodeType===1){var ee=ae.getAttribute("id");switch(ae.nodeName){case"source":Te.sources[ee]=q(ae);break;case"vertices":Te.vertices=function(se){for(var Ie={},We=0;We<se.childNodes.length;We++){var Ke=se.childNodes[We];Ke.nodeType===1&&(Ie[Ke.getAttribute("semantic")]=g(Ke.getAttribute("source")))}return Ie}(ae);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",ae.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":Te.primitives.push(function(se){for(var Ie={type:se.nodeName,material:se.getAttribute("material"),count:parseInt(se.getAttribute("count")),inputs:{},stride:0,hasUV:!1},We=0,Ke=se.childNodes.length;We<Ke;We++){var $e=se.childNodes[We];if($e.nodeType===1)switch($e.nodeName){case"input":var Vt=g($e.getAttribute("source")),$t=$e.getAttribute("semantic"),Xt=parseInt($e.getAttribute("offset")),jt=parseInt($e.getAttribute("set")),on=jt>0?$t+jt:$t;Ie.inputs[on]={id:Vt,offset:Xt},Ie.stride=Math.max(Ie.stride,Xt+1),$t==="TEXCOORD"&&(Ie.hasUV=!0);break;case"vcount":Ie.vcount=h($e.textContent);break;case"p":Ie.p=h($e.textContent)}}return Ie}(ae));break;default:console.log(ae)}}}He.geometries[Me.getAttribute("id")]=Te}}),y(tn,"library_nodes","node",Ge),y(tn,"library_visual_scenes","visual_scene",function(Me){var Te={name:Me.getAttribute("name"),children:[]};(function(ae){for(var ee=ae.getElementsByTagName("node"),se=0;se<ee.length;se++){var Ie=ee[se];Ie.hasAttribute("id")===!1&&Ie.setAttribute("id",C())}})(Me);for(var Oe=K(Me,"node"),Ze=0;Ze<Oe.length;Ze++)Te.children.push(Ge(Oe[Ze]));He.visualScenes[Me.getAttribute("id")]=Te}),y(tn,"library_kinematics_models","kinematics_model",function(Me){for(var Te={name:Me.getAttribute("name")||"",joints:{},links:[]},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"technique_common":(function(ae,ee){for(var se=0;se<ae.childNodes.length;se++){var Ie=ae.childNodes[se];if(Ie.nodeType===1)switch(Ie.nodeName){case"joint":ee.joints[Ie.getAttribute("sid")]=function(We){for(var Ke,$e=0;$e<We.childNodes.length;$e++){var Vt=We.childNodes[$e];if(Vt.nodeType===1)switch(Vt.nodeName){case"prismatic":case"revolute":Ke=function($t,Xt){for(var Xt={sid:$t.getAttribute("sid"),name:$t.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:$t.nodeName,static:!1,zeroPosition:0,middlePosition:0},jt=0;jt<$t.childNodes.length;jt++){var on=$t.childNodes[jt];if(on.nodeType===1)switch(on.nodeName){case"axis":var In=I(on.textContent);Xt.axis.fromArray(In);break;case"limits":var di=on.getElementsByTagName("max")[0],fi=on.getElementsByTagName("min")[0];Xt.limits.max=parseFloat(di.textContent),Xt.limits.min=parseFloat(fi.textContent)}}return Xt.limits.min>=Xt.limits.max&&(Xt.static=!0),Xt.middlePosition=(Xt.limits.min+Xt.limits.max)/2,Xt}(Vt)}}return Ke}(Ie);break;case"link":ee.links.push(Ae(Ie))}}})(Ze,Te)}}He.kinematicsModels[Me.getAttribute("id")]=Te}),y(tn,"library_physics_models","physics_model",function(Me){for(var Te={name:Me.getAttribute("name")||"",rigidBodies:{}},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"rigid_body":Te.rigidBodies[Ze.getAttribute("name")]={},function(ae,ee){for(var se=0;se<ae.childNodes.length;se++){var Ie=ae.childNodes[se];if(Ie.nodeType===1)switch(Ie.nodeName){case"technique_common":(function(We,Ke){for(var $e=0;$e<We.childNodes.length;$e++){var Vt=We.childNodes[$e];if(Vt.nodeType===1)switch(Vt.nodeName){case"inertia":Ke.inertia=I(Vt.textContent);break;case"mass":Ke.mass=I(Vt.textContent)[0]}}})(Ie,ee)}}}(Ze,Te.rigidBodies[Ze.getAttribute("name")])}}He.physicsModels[Me.getAttribute("id")]=Te}),y(tn,"scene","instance_kinematics_scene",function(Me){for(var Te={bindJointAxis:[]},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"bind_joint_axis":Te.bindJointAxis.push(function(ae){for(var ee={target:ae.getAttribute("target").split("/").pop()},se=0;se<ae.childNodes.length;se++){var Ie=ae.childNodes[se];if(Ie.nodeType===1)switch(Ie.nodeName){case"axis":var We=Ie.getElementsByTagName("param")[0];ee.axis=We.textContent;var Ke=ee.axis.split("inst_").pop().split("axis")[0];ee.jointIndex=Ke.substr(0,Ke.length-1)}}return ee}(Ze))}}He.kinematicsScenes[g(Me.getAttribute("url"))]=Te}),E(He.animations,m),E(He.clips,b),E(He.controllers,R),E(He.images,P),E(He.effects,j),E(He.materials,U),E(He.cameras,ue),E(He.lights,Ee),E(He.geometries,F),E(He.visualScenes,rt),function(){var Me=He.clips;if(v(Me)===!0){if(v(He.animations)===!1){var Te=[];for(var Oe in He.animations)for(var Ze=w(Oe),ae=0,ee=Ze.length;ae<ee;ae++)Te.push(Ze[ae]);Pe.push(new THREE.AnimationClip("default",-1,Te))}}else for(var Oe in Me)Pe.push(O(Oe))}(),function(){function Me(on,In){var di=In.getAttribute("name"),fi=ae.joints[on];se.traverse(function(Nn){Nn.name===di&&(We[on]={object:Nn,transforms:function(vn){for(var Ft=[],yn=tn.querySelector('[id="'+vn.id+'"]'),Gn=0;Gn<yn.childNodes.length;Gn++){var Dn=yn.childNodes[Gn];if(Dn.nodeType===1)switch(Dn.nodeName){case"matrix":var Pi=I(Dn.textContent),bi=new THREE.Matrix4().fromArray(Pi).transpose();Ft.push({sid:Dn.getAttribute("sid"),type:Dn.nodeName,obj:bi});break;case"translate":case"scale":var Pi=I(Dn.textContent),Zi=new THREE.Vector3().fromArray(Pi);Ft.push({sid:Dn.getAttribute("sid"),type:Dn.nodeName,obj:Zi});break;case"rotate":var Pi=I(Dn.textContent),Zi=new THREE.Vector3().fromArray(Pi),Dr=THREE.MathUtils.degToRad(Pi[3]);Ft.push({sid:Dn.getAttribute("sid"),type:Dn.nodeName,obj:Zi,angle:Dr})}}return Ft}(In),joint:fi,position:fi.zeroPosition})})}var Te=Object.keys(He.kinematicsModels)[0],Oe=Object.keys(He.kinematicsScenes)[0],Ze=Object.keys(He.visualScenes)[0];if(Te!==void 0&&Oe!==void 0){for(var ae=function(on){return _(He.kinematicsModels[on],fe)}(Te),ee=function(on){return _(He.kinematicsScenes[on],Be)}(Oe),se=At(Ze),Ie=ee.bindJointAxis,We={},Ke=0,$e=Ie.length;Ke<$e;Ke++){var Vt=Ie[Ke],$t=tn.querySelector('[sid="'+Vt.target+'"]');if($t){var Xt=$t.parentElement;Me(Vt.jointIndex,Xt)}}var jt=new THREE.Matrix4;Ye={joints:ae&&ae.joints,getJointValue:function(on){var In=We[on];if(In)return In.position;console.warn("THREE.ColladaLoader: Joint "+on+" doesn't exist.")},setJointValue:function(on,In){var di=We[on];if(di){var fi=di.joint;if(In>fi.limits.max||In<fi.limits.min)console.warn("THREE.ColladaLoader: Joint "+on+" value "+In+" outside of limits (min: "+fi.limits.min+", max: "+fi.limits.max+").");else if(fi.static)console.warn("THREE.ColladaLoader: Joint "+on+" is static.");else{var Nn=di.object,vn=fi.axis,Ft=di.transforms;un.identity();for(var yn=0;yn<Ft.length;yn++){var Gn=Ft[yn];if(Gn.sid&&Gn.sid.indexOf(on)!==-1)switch(fi.type){case"revolute":un.multiply(jt.makeRotationAxis(vn,THREE.MathUtils.degToRad(In)));break;case"prismatic":un.multiply(jt.makeTranslation(vn.x*In,vn.y*In,vn.z*In));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+fi.type)}else switch(Gn.type){case"matrix":un.multiply(Gn.obj);break;case"translate":un.multiply(jt.makeTranslation(Gn.obj.x,Gn.obj.y,Gn.obj.z));break;case"scale":un.scale(Gn.obj);break;case"rotate":un.multiply(jt.makeRotationAxis(Gn.obj,Gn.angle))}}Nn.matrix.copy(un),Nn.matrix.decompose(Nn.position,Nn.quaternion,Nn.scale),We[on].position=In}}else console.log("THREE.ColladaLoader: "+on+" does not exist.")}}}}();var et=function(Me){return At(g(K(Me,"instance_visual_scene")[0].getAttribute("url")))}(K(tn,"scene")[0]);return ni.upAxis==="Z_UP"&&et.quaternion.setFromEuler(new THREE.Euler(-Math.PI/2,0,0)),et.scale.multiplyScalar(ni.unit),{animations:Pe,kinematics:Ye,library:He,scene:et}}}},{}],4:[function(u,T,W){var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},k=typeof Symbol=="function"&&d(Symbol.iterator)==="symbol"?function(K){return K===void 0?"undefined":d(K)}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":K===void 0?"undefined":d(K)};T.exports=THREE.FBXLoader=function(){function K(V){this.manager=V!==void 0?V:THREE.DefaultLoadingManager}function S(V){this.textureLoader=V}function I(){}function h(){}function g(){}function C(){}function v(V,q){this.dv=new DataView(V),this.offset=0,this.littleEndian=q===void 0||q}function y(){}function E(V){var q=V.match(/FBXVersion: (\d+)/);if(q)return parseInt(q[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function _(V){return V/46186158e3}function m(V,q,Q,F){var z;switch(F.mappingType){case"ByPolygonVertex":z=V;break;case"ByPolygon":z=q;break;case"ByVertice":z=Q;break;case"AllSame":z=F.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+F.mappingType)}F.referenceType==="IndexToDirect"&&(z=F.indices[z]);var X=z*F.dataSize,fe=X+F.dataSize;return function(Ae,Se,Be,Ge){for(var ht=Be,xt=0;ht<Ge;ht++,xt++)Ae[xt]=Se[ht];return Ae}(j,F.buffer,X,fe)}function w(V){var q=new THREE.Matrix4;xe.set(0,0,0),Ee.identity();var Q=b(V.eulerOrder?V.eulerOrder:0);if(V.translation&&xe.fromArray(V.translation),V.rotationOffset&&xe.add(ue.fromArray(V.rotationOffset)),V.rotation&&((F=V.rotation.map(THREE.MathUtils.degToRad)).push(Q),Ee.makeRotationFromEuler(te.fromArray(F))),V.preRotation&&((F=V.preRotation.map(THREE.MathUtils.degToRad)).push(Q),U.makeRotationFromEuler(te.fromArray(F)),Ee.premultiply(U)),V.postRotation){var F=V.postRotation.map(THREE.MathUtils.degToRad);F.push(Q),U.makeRotationFromEuler(te.fromArray(F)),U.getInverse(U),Ee.multiply(U)}return V.scale&&q.scale(ue.fromArray(V.scale)),q.setPosition(xe),q.multiply(Ee),q}function b(V){var q=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return V===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),q[0]):q[V]}function O(V){return V.split(",").map(function(q){return parseFloat(q)})}function R(V,q,Q){return q===void 0&&(q=0),Q===void 0&&(Q=V.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(V,q,Q))}function L(V,q,Q){return V.slice(0,q).concat(Q).concat(V.slice(q))}var P,Y,J;K.prototype={constructor:K,crossOrigin:"anonymous",load:function(V,q,Q,F){var z=this,X=THREE.LoaderUtils.extractUrlBase(V),fe=new THREE.FileLoader(this.manager);fe.setResponseType("arraybuffer"),fe.load(V,function(Ae){try{var Se=z.parse(Ae,X);q(Se)}catch(Be){setTimeout(function(){F&&F(Be),z.manager.itemError(V)},0)}},Q,F)},setCrossOrigin:function(V){return this.crossOrigin=V,this},parse:function(V,q){if(function(F){var z="Kaydara FBX Binary  \0";return F.byteLength>=z.length&&z===R(F,0,z.length)}(V))P=new C().parse(V);else{var Q=R(V);if(!function(F){function z(Se){var Be=F[Se-1];return F=F.slice(fe+Se),fe++,Be}for(var X=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],fe=0,Ae=0;Ae<X.length;++Ae)if(z(1)===X[Ae])return!1;return!0}(Q))throw new Error("THREE.FBXLoader: Unknown format.");if(E(Q)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+E(Q));P=new g().parse(Q)}return new S(new THREE.TextureLoader(this.manager).setPath(q).setCrossOrigin(this.crossOrigin)).parse(P)}},S.prototype={constructor:S,parse:function(){Y=this.parseConnections();var V=this.parseImages(),q=this.parseTextures(V),Q=this.parseMaterials(q),F=this.parseDeformers(),z=new I().parse(F);return this.parseScene(F,z,Q),J},parseConnections:function(){var V=new Map;return"Connections"in P&&P.Connections.connections.forEach(function(q){var Q=q[0],F=q[1],z=q[2];V.has(Q)||V.set(Q,{parents:[],children:[]});var X={ID:F,relationship:z};V.get(Q).parents.push(X),V.has(F)||V.set(F,{parents:[],children:[]});var fe={ID:Q,relationship:z};V.get(F).children.push(fe)}),V},parseImages:function(){var V={},q={};if("Video"in P.Objects){var Q=P.Objects.Video;for(var F in Q){var z=Q[F];if(V[Se=parseInt(F)]=z.RelativeFilename||z.Filename,"Content"in z){var X=z.Content instanceof ArrayBuffer&&z.Content.byteLength>0,fe=typeof z.Content=="string"&&z.Content!=="";if(X||fe){var Ae=this.parseImage(Q[F]);q[z.RelativeFilename||z.Filename]=Ae}}}}for(var Se in V){var Be=V[Se];q[Be]!==void 0?V[Se]=q[Be]:V[Se]=V[Se].split("\\").pop()}return V},parseImage:function(V){var q,Q=V.Content,F=V.RelativeFilename||V.Filename,z=F.slice(F.lastIndexOf(".")+1).toLowerCase();switch(z){case"bmp":q="image/bmp";break;case"jpg":case"jpeg":q="image/jpeg";break;case"png":q="image/png";break;case"tif":q="image/tiff";break;case"tga":if(typeof THREE.TGALoader!="function")return void console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");THREE.Loader.Handlers.get(".tga")===null&&THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),q="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+z+'" is not supported.')}if(typeof Q=="string")return"data:"+q+";base64,"+Q;var X=new Uint8Array(Q);return window.URL.createObjectURL(new Blob([X],{type:q}))},parseTextures:function(V){var q=new Map;if("Texture"in P.Objects){var Q=P.Objects.Texture;for(var F in Q){var z=this.parseTexture(Q[F],V);q.set(parseInt(F),z)}}return q},parseTexture:function(V,q){var Q=this.loadTexture(V,q);Q.ID=V.id,Q.name=V.attrName;var F=V.WrapModeU,z=V.WrapModeV,X=F!==void 0?F.value:0,fe=z!==void 0?z.value:0;if(Q.wrapS=X===0?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,Q.wrapT=fe===0?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in V){var Ae=V.Scaling.value;Q.repeat.x=Ae[0],Q.repeat.y=Ae[1]}return Q},loadTexture:function(V,q){var Q,F=this.textureLoader.path,z=Y.get(V.id).children;z!==void 0&&z.length>0&&q[z[0].ID]!==void 0&&((Q=q[z[0].ID]).indexOf("blob:")!==0&&Q.indexOf("data:")!==0||this.textureLoader.setPath(void 0));var X,fe=V.FileName.slice(-3).toLowerCase();if(fe==="tga"){var Ae=THREE.Loader.Handlers.get(".tga");Ae===null?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",Q),X=new THREE.Texture):X=Ae.load(Q)}else fe==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",Q),X=new THREE.Texture):X=this.textureLoader.load(Q);return this.textureLoader.setPath(F),X},parseMaterials:function(V){var q=new Map;if("Material"in P.Objects){var Q=P.Objects.Material;for(var F in Q){var z=this.parseMaterial(Q[F],V);z!==null&&q.set(parseInt(F),z)}}return q},parseMaterial:function(V,q){var Q=V.id,F=V.attrName,z=V.ShadingModel;if((z===void 0?"undefined":k(z))==="object"&&(z=z.value),!Y.has(Q))return null;var X,fe=this.parseParameters(V,q,Q);switch(z.toLowerCase()){case"phong":X=new THREE.MeshPhongMaterial;break;case"lambert":X=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',z),X=new THREE.MeshPhongMaterial({color:3342591})}return X.setValues(fe),X.name=F,X},parseParameters:function(V,q,Q){var F={};V.BumpFactor&&(F.bumpScale=V.BumpFactor.value),V.Diffuse?F.color=new THREE.Color().fromArray(V.Diffuse.value):V.DiffuseColor&&V.DiffuseColor.type==="Color"&&(F.color=new THREE.Color().fromArray(V.DiffuseColor.value)),V.DisplacementFactor&&(F.displacementScale=V.DisplacementFactor.value),V.Emissive?F.emissive=new THREE.Color().fromArray(V.Emissive.value):V.EmissiveColor&&V.EmissiveColor.type==="Color"&&(F.emissive=new THREE.Color().fromArray(V.EmissiveColor.value)),V.EmissiveFactor&&(F.emissiveIntensity=parseFloat(V.EmissiveFactor.value)),V.Opacity&&(F.opacity=parseFloat(V.Opacity.value)),F.opacity<1&&(F.transparent=!0),V.ReflectionFactor&&(F.reflectivity=V.ReflectionFactor.value),V.Shininess&&(F.shininess=V.Shininess.value),V.Specular?F.specular=new THREE.Color().fromArray(V.Specular.value):V.SpecularColor&&V.SpecularColor.type==="Color"&&(F.specular=new THREE.Color().fromArray(V.SpecularColor.value));var z=this;return Y.get(Q).children.forEach(function(X){var fe=X.relationship;switch(fe){case"Bump":F.bumpMap=z.getTexture(q,X.ID);break;case"DiffuseColor":F.map=z.getTexture(q,X.ID);break;case"DisplacementColor":F.displacementMap=z.getTexture(q,X.ID);break;case"EmissiveColor":F.emissiveMap=z.getTexture(q,X.ID);break;case"NormalMap":F.normalMap=z.getTexture(q,X.ID);break;case"ReflectionColor":F.envMap=z.getTexture(q,X.ID),F.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":F.specularMap=z.getTexture(q,X.ID);break;case"TransparentColor":F.alphaMap=z.getTexture(q,X.ID),F.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",fe)}}),F},getTexture:function(V,q){return"LayeredTexture"in P.Objects&&q in P.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),q=Y.get(q).children[0].ID),V.get(q)},parseDeformers:function(){var V={},q={};if("Deformer"in P.Objects){var Q=P.Objects.Deformer;for(var F in Q){var z=Q[F],X=Y.get(parseInt(F));if(z.attrType==="Skin"){var fe=this.parseSkeleton(X,Q);fe.ID=F,X.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),fe.geometryID=X.parents[0].ID,V[F]=fe}else if(z.attrType==="BlendShape"){var Ae={id:F};Ae.rawTargets=this.parseMorphTargets(X,Q),Ae.id=F,X.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),q[F]=Ae}}}return{skeletons:V,morphTargets:q}},parseSkeleton:function(V,q){var Q=[];return V.children.forEach(function(F){var z=q[F.ID];if(z.attrType==="Cluster"){var X={ID:F.ID,indices:[],weights:[],transform:new THREE.Matrix4().fromArray(z.Transform.a),transformLink:new THREE.Matrix4().fromArray(z.TransformLink.a),linkMode:z.Mode};"Indexes"in z&&(X.indices=z.Indexes.a,X.weights=z.Weights.a),Q.push(X)}}),{rawBones:Q,bones:[]}},parseMorphTargets:function(V,q){for(var Q=[],F=0;F<V.children.length;F++){if(F===8){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var z=V.children[F],X=q[z.ID],fe={name:X.attrName,initialWeight:X.DeformPercent,id:X.id,fullWeights:X.FullWeights.a};if(X.attrType!=="BlendShapeChannel")return;Y.get(parseInt(z.ID)).children.forEach(function(Ae){Ae.relationship===void 0&&(fe.geoID=Ae.ID)}),Q.push(fe)}return Q},parseScene:function(V,q,Q){J=new THREE.Group;var F=this.parseModels(V.skeletons,q,Q),z=P.Objects.Model,X=this;F.forEach(function(Ae){var Se=z[Ae.ID];X.setLookAtProperties(Ae,Se),Y.get(Ae.ID).parents.forEach(function(Be){var Ge=F.get(Be.ID);Ge!==void 0&&Ge.add(Ae)}),Ae.parent===null&&J.add(Ae)}),this.bindSkeleton(V.skeletons,q,F),this.createAmbientLight(),this.setupMorphMaterials();var fe=new h().parse();J.children.length===1&&J.children[0].isGroup&&(J.children[0].animations=fe,J=J.children[0]),J.animations=fe},parseModels:function(V,q,Q){var F=new Map,z=P.Objects.Model;for(var X in z){var fe=parseInt(X),Ae=z[X],Se=Y.get(fe),Be=this.buildSkeleton(Se,V,fe,Ae.attrName);if(!Be){switch(Ae.attrType){case"Camera":Be=this.createCamera(Se);break;case"Light":Be=this.createLight(Se);break;case"Mesh":Be=this.createMesh(Se,q,Q);break;case"NurbsCurve":Be=this.createCurve(Se,q);break;case"LimbNode":case"Null":default:Be=new THREE.Group}Be.name=THREE.PropertyBinding.sanitizeNodeName(Ae.attrName),Be.ID=fe}this.setModelTransforms(Be,Ae),F.set(fe,Be)}return F},buildSkeleton:function(V,q,Q,F){var z=null;return V.parents.forEach(function(X){for(var fe in q){var Ae=q[fe];Ae.rawBones.forEach(function(Se,Be){if(Se.ID===X.ID){var Ge=z;(z=new THREE.Bone).matrixWorld.copy(Se.transformLink),z.name=THREE.PropertyBinding.sanitizeNodeName(F),z.ID=Q,Ae.bones[Be]=z,Ge!==null&&z.add(Ge)}})}}),z},createCamera:function(V){var q,Q;if(V.children.forEach(function(ht){var xt=P.Objects.NodeAttribute[ht.ID];xt!==void 0&&(Q=xt)}),Q===void 0)q=new THREE.Object3D;else{var F=0;Q.CameraProjectionType!==void 0&&Q.CameraProjectionType.value===1&&(F=1);var z=1;Q.NearPlane!==void 0&&(z=Q.NearPlane.value/1e3);var X=1e3;Q.FarPlane!==void 0&&(X=Q.FarPlane.value/1e3);var fe=window.innerWidth,Ae=window.innerHeight;Q.AspectWidth!==void 0&&Q.AspectHeight!==void 0&&(fe=Q.AspectWidth.value,Ae=Q.AspectHeight.value);var Se=fe/Ae,Be=45;Q.FieldOfView!==void 0&&(Be=Q.FieldOfView.value);var Ge=Q.FocalLength?Q.FocalLength.value:null;switch(F){case 0:q=new THREE.PerspectiveCamera(Be,Se,z,X),Ge!==null&&q.setFocalLength(Ge);break;case 1:q=new THREE.OrthographicCamera(-fe/2,fe/2,Ae/2,-Ae/2,z,X);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+F+"."),q=new THREE.Object3D}}return q},createLight:function(V){var q,Q;if(V.children.forEach(function(Be){var Ge=P.Objects.NodeAttribute[Be.ID];Ge!==void 0&&(Q=Ge)}),Q===void 0)q=new THREE.Object3D;else{var F;F=Q.LightType===void 0?0:Q.LightType.value;var z=16777215;Q.Color!==void 0&&(z=new THREE.Color().fromArray(Q.Color.value));var X=Q.Intensity===void 0?1:Q.Intensity.value/100;Q.CastLightOnObject!==void 0&&Q.CastLightOnObject.value===0&&(X=0);var fe=0;switch(Q.FarAttenuationEnd!==void 0&&(fe=Q.EnableFarAttenuation!==void 0&&Q.EnableFarAttenuation.value===0?0:Q.FarAttenuationEnd.value),F){case 0:q=new THREE.PointLight(z,X,fe,1);break;case 1:q=new THREE.DirectionalLight(z,X);break;case 2:var Ae=Math.PI/3;Q.InnerAngle!==void 0&&(Ae=THREE.MathUtils.degToRad(Q.InnerAngle.value));var Se=0;Q.OuterAngle!==void 0&&(Se=THREE.MathUtils.degToRad(Q.OuterAngle.value),Se=Math.max(Se,1)),q=new THREE.SpotLight(z,X,fe,Ae,Se,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+Q.LightType.value+", defaulting to a THREE.PointLight."),q=new THREE.PointLight(z,X)}Q.CastShadows!==void 0&&Q.CastShadows.value===1&&(q.castShadow=!0)}return q},createMesh:function(V,q,Q){var F,z=null,X=null,fe=[];return V.children.forEach(function(Ae){q.has(Ae.ID)&&(z=q.get(Ae.ID)),Q.has(Ae.ID)&&fe.push(Q.get(Ae.ID))}),fe.length>1?X=fe:fe.length>0?X=fe[0]:(X=new THREE.MeshPhongMaterial({color:13421772}),fe.push(X)),"color"in z.attributes&&fe.forEach(function(Ae){Ae.vertexColors=THREE.VertexColors}),z.FBX_Deformer?(fe.forEach(function(Ae){Ae.skinning=!0}),F=new THREE.SkinnedMesh(z,X)):F=new THREE.Mesh(z,X),F},createCurve:function(V,q){var Q=V.children.reduce(function(z,X){return q.has(X.ID)&&(z=q.get(X.ID)),z},null),F=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(Q,F)},setModelTransforms:function(V,q){var Q={};"RotationOrder"in q&&(Q.eulerOrder=parseInt(q.RotationOrder.value)),"Lcl_Translation"in q&&(Q.translation=q.Lcl_Translation.value),"RotationOffset"in q&&(Q.rotationOffset=q.RotationOffset.value),"Lcl_Rotation"in q&&(Q.rotation=q.Lcl_Rotation.value),"PreRotation"in q&&(Q.preRotation=q.PreRotation.value),"PostRotation"in q&&(Q.postRotation=q.PostRotation.value),"Lcl_Scaling"in q&&(Q.scale=q.Lcl_Scaling.value);var F=w(Q);V.applyMatrix(F)},setLookAtProperties:function(V,q){"LookAtProperty"in q&&Y.get(V.ID).children.forEach(function(Q){if(Q.relationship==="LookAtProperty"){var F=P.Objects.Model[Q.ID];if("Lcl_Translation"in F){var z=F.Lcl_Translation.value;V.target!==void 0?(V.target.position.fromArray(z),J.add(V.target)):V.lookAt(new THREE.Vector3().fromArray(z))}}})},bindSkeleton:function(V,q,Q){var F=this.parsePoseNodes();for(var z in V){var X=V[z];Y.get(parseInt(X.ID)).parents.forEach(function(fe){if(q.has(fe.ID)){var Ae=fe.ID;Y.get(Ae).parents.forEach(function(Se){Q.has(Se.ID)&&Q.get(Se.ID).bind(new THREE.Skeleton(X.bones),F[Se.ID])})}})}},parsePoseNodes:function(){var V={};if("Pose"in P.Objects){var q=P.Objects.Pose;for(var Q in q)if(q[Q].attrType==="BindPose"){var F=q[Q].PoseNode;Array.isArray(F)?F.forEach(function(z){V[z.Node]=new THREE.Matrix4().fromArray(z.Matrix.a)}):V[F.Node]=new THREE.Matrix4().fromArray(F.Matrix.a)}}return V},createAmbientLight:function(){if("GlobalSettings"in P&&"AmbientColor"in P.GlobalSettings){var V=P.GlobalSettings.AmbientColor.value,q=V[0],Q=V[1],F=V[2];if(q!==0||Q!==0||F!==0){var z=new THREE.Color(q,Q,F);J.add(new THREE.AmbientLight(z,1))}}},setupMorphMaterials:function(){J.traverse(function(V){if(V.isMesh&&(V.geometry.morphAttributes.position||V.geometry.morphAttributes.normal)){var q=V.uuid,Q=V.material.uuid,F=!1;J.traverse(function(z){z.isMesh&&z.material.uuid===Q&&z.uuid!==q&&(F=!0)}),F===!0&&(V.material=V.material.clone()),V.material.morphTargets=!0}})}},I.prototype={constructor:I,parse:function(V){var q=new Map;if("Geometry"in P.Objects){var Q=P.Objects.Geometry;for(var F in Q){var z=Y.get(parseInt(F)),X=this.parseGeometry(z,Q[F],V);q.set(parseInt(F),X)}}return q},parseGeometry:function(V,q,Q){switch(q.attrType){case"Mesh":return this.parseMeshGeometry(V,q,Q);case"NurbsCurve":return this.parseNurbsGeometry(q)}},parseMeshGeometry:function(V,q,Q){var F=Q.skeletons,z=Q.morphTargets,X=V.parents.map(function(ht){return P.Objects.Model[ht.ID]});if(X.length!==0){var fe=V.children.reduce(function(ht,xt){return F[xt.ID]!==void 0&&(ht=F[xt.ID]),ht},null),Ae=V.children.reduce(function(ht,xt){return z[xt.ID]!==void 0&&(ht=z[xt.ID]),ht},null),Se=X[0],Be={};"RotationOrder"in Se&&(Be.eulerOrder=Se.RotationOrder.value),"GeometricTranslation"in Se&&(Be.translation=Se.GeometricTranslation.value),"GeometricRotation"in Se&&(Be.rotation=Se.GeometricRotation.value),"GeometricScaling"in Se&&(Be.scale=Se.GeometricScaling.value);var Ge=w(Be);return this.genGeometry(q,fe,Ae,Ge)}},genGeometry:function(V,q,Q,F){var z=new THREE.BufferGeometry;V.attrName&&(z.name=V.attrName);var X=this.parseGeoNode(V,q),fe=this.genBuffers(X),Ae=new THREE.Float32BufferAttribute(fe.vertex,3);if(F.applyToBufferAttribute(Ae),z.addAttribute("position",Ae),fe.colors.length>0&&z.addAttribute("color",new THREE.Float32BufferAttribute(fe.colors,3)),q&&(z.addAttribute("skinIndex",new THREE.Uint16BufferAttribute(fe.weightsIndices,4)),z.addAttribute("skinWeight",new THREE.Float32BufferAttribute(fe.vertexWeights,4)),z.FBX_Deformer=q),fe.normal.length>0){var Se=new THREE.Float32BufferAttribute(fe.normal,3);new THREE.Matrix3().getNormalMatrix(F).applyToBufferAttribute(Se),z.addAttribute("normal",Se)}if(fe.uvs.forEach(function(at,Gt){var wt="uv"+(Gt+1).toString();Gt===0&&(wt="uv"),z.addAttribute(wt,new THREE.Float32BufferAttribute(fe.uvs[Gt],2))}),X.material&&X.material.mappingType!=="AllSame"){var Be=fe.materialIndex[0],Ge=0;if(fe.materialIndex.forEach(function(at,Gt){at!==Be&&(z.addGroup(Ge,Gt-Ge,Be),Be=at,Ge=Gt)}),z.groups.length>0){var ht=z.groups[z.groups.length-1],xt=ht.start+ht.count;xt!==fe.materialIndex.length&&z.addGroup(xt,fe.materialIndex.length-xt,Be)}z.groups.length===0&&z.addGroup(0,fe.materialIndex.length,fe.materialIndex[0])}return this.addMorphTargets(z,V,Q,F),z},parseGeoNode:function(V,q){var Q={};if(Q.vertexPositions=V.Vertices!==void 0?V.Vertices.a:[],Q.vertexIndices=V.PolygonVertexIndex!==void 0?V.PolygonVertexIndex.a:[],V.LayerElementColor&&(Q.color=this.parseVertexColors(V.LayerElementColor[0])),V.LayerElementMaterial&&(Q.material=this.parseMaterialIndices(V.LayerElementMaterial[0])),V.LayerElementNormal&&(Q.normal=this.parseNormals(V.LayerElementNormal[0])),V.LayerElementUV){Q.uv=[];for(var F=0;V.LayerElementUV[F];)Q.uv.push(this.parseUVs(V.LayerElementUV[F])),F++}return Q.weightTable={},q!==null&&(Q.skeleton=q,q.rawBones.forEach(function(z,X){z.indices.forEach(function(fe,Ae){Q.weightTable[fe]===void 0&&(Q.weightTable[fe]=[]),Q.weightTable[fe].push({id:X,weight:z.weights[Ae]})})})),Q},genBuffers:function(V){var q={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},Q=0,F=0,z=!1,X=[],fe=[],Ae=[],Se=[],Be=[],Ge=[],ht=this;return V.vertexIndices.forEach(function(xt,at){var Gt=!1;xt<0&&(xt^=-1,Gt=!0);var wt=[],Yt=[];if(X.push(3*xt,3*xt+1,3*xt+2),V.color&&(At=m(at,Q,xt,V.color),Ae.push(At[0],At[1],At[2])),V.skeleton){if(V.weightTable[xt]!==void 0&&V.weightTable[xt].forEach(function(Pt){Yt.push(Pt.weight),wt.push(Pt.id)}),Yt.length>4){z||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),z=!0);var Mn=[0,0,0,0],je=[0,0,0,0];Yt.forEach(function(Pt,qt){var un=Pt,dn=wt[qt];je.forEach(function(bn,tn,ri){if(un>bn){ri[tn]=un,un=bn;var ni=Mn[tn];Mn[tn]=dn,dn=ni}})}),wt=Mn,Yt=je}for(;Yt.length<4;)Yt.push(0),wt.push(0);for(var rt=0;rt<4;++rt)Be.push(Yt[rt]),Ge.push(wt[rt])}if(V.normal){var At=m(at,Q,xt,V.normal);fe.push(At[0],At[1],At[2])}if(V.material&&V.material.mappingType!=="AllSame")var Bt=m(at,Q,xt,V.material)[0];V.uv&&V.uv.forEach(function(Pt,qt){var un=m(at,Q,xt,Pt);Se[qt]===void 0&&(Se[qt]=[]),Se[qt].push(un[0]),Se[qt].push(un[1])}),F++,Gt&&(ht.genFace(q,V,X,Bt,fe,Ae,Se,Be,Ge,F),Q++,F=0,X=[],fe=[],Ae=[],Se=[],Be=[],Ge=[])}),q},genFace:function(V,q,Q,F,z,X,fe,Ae,Se,Be){for(var Ge=2;Ge<Be;Ge++)V.vertex.push(q.vertexPositions[Q[0]]),V.vertex.push(q.vertexPositions[Q[1]]),V.vertex.push(q.vertexPositions[Q[2]]),V.vertex.push(q.vertexPositions[Q[3*(Ge-1)]]),V.vertex.push(q.vertexPositions[Q[3*(Ge-1)+1]]),V.vertex.push(q.vertexPositions[Q[3*(Ge-1)+2]]),V.vertex.push(q.vertexPositions[Q[3*Ge]]),V.vertex.push(q.vertexPositions[Q[3*Ge+1]]),V.vertex.push(q.vertexPositions[Q[3*Ge+2]]),q.skeleton&&(V.vertexWeights.push(Ae[0]),V.vertexWeights.push(Ae[1]),V.vertexWeights.push(Ae[2]),V.vertexWeights.push(Ae[3]),V.vertexWeights.push(Ae[4*(Ge-1)]),V.vertexWeights.push(Ae[4*(Ge-1)+1]),V.vertexWeights.push(Ae[4*(Ge-1)+2]),V.vertexWeights.push(Ae[4*(Ge-1)+3]),V.vertexWeights.push(Ae[4*Ge]),V.vertexWeights.push(Ae[4*Ge+1]),V.vertexWeights.push(Ae[4*Ge+2]),V.vertexWeights.push(Ae[4*Ge+3]),V.weightsIndices.push(Se[0]),V.weightsIndices.push(Se[1]),V.weightsIndices.push(Se[2]),V.weightsIndices.push(Se[3]),V.weightsIndices.push(Se[4*(Ge-1)]),V.weightsIndices.push(Se[4*(Ge-1)+1]),V.weightsIndices.push(Se[4*(Ge-1)+2]),V.weightsIndices.push(Se[4*(Ge-1)+3]),V.weightsIndices.push(Se[4*Ge]),V.weightsIndices.push(Se[4*Ge+1]),V.weightsIndices.push(Se[4*Ge+2]),V.weightsIndices.push(Se[4*Ge+3])),q.color&&(V.colors.push(X[0]),V.colors.push(X[1]),V.colors.push(X[2]),V.colors.push(X[3*(Ge-1)]),V.colors.push(X[3*(Ge-1)+1]),V.colors.push(X[3*(Ge-1)+2]),V.colors.push(X[3*Ge]),V.colors.push(X[3*Ge+1]),V.colors.push(X[3*Ge+2])),q.material&&q.material.mappingType!=="AllSame"&&(V.materialIndex.push(F),V.materialIndex.push(F),V.materialIndex.push(F)),q.normal&&(V.normal.push(z[0]),V.normal.push(z[1]),V.normal.push(z[2]),V.normal.push(z[3*(Ge-1)]),V.normal.push(z[3*(Ge-1)+1]),V.normal.push(z[3*(Ge-1)+2]),V.normal.push(z[3*Ge]),V.normal.push(z[3*Ge+1]),V.normal.push(z[3*Ge+2])),q.uv&&q.uv.forEach(function(ht,xt){V.uvs[xt]===void 0&&(V.uvs[xt]=[]),V.uvs[xt].push(fe[xt][0]),V.uvs[xt].push(fe[xt][1]),V.uvs[xt].push(fe[xt][2*(Ge-1)]),V.uvs[xt].push(fe[xt][2*(Ge-1)+1]),V.uvs[xt].push(fe[xt][2*Ge]),V.uvs[xt].push(fe[xt][2*Ge+1])})},addMorphTargets:function(V,q,Q,F){if(Q!==null){V.morphAttributes.position=[],V.morphAttributes.normal=[];var z=this;Q.rawTargets.forEach(function(X){var fe=P.Objects.Geometry[X.geoID];fe!==void 0&&z.genMorphGeometry(V,q,fe,F)})}},genMorphGeometry:function(V,q,Q,F){var z=new THREE.BufferGeometry;Q.attrName&&(z.name=Q.attrName);for(var X=q.PolygonVertexIndex!==void 0?q.PolygonVertexIndex.a:[],fe=q.Vertices!==void 0?q.Vertices.a.slice():[],Ae=Q.Vertices!==void 0?Q.Vertices.a:[],Se=Q.Indexes!==void 0?Q.Indexes.a:[],Be=0;Be<Se.length;Be++){var Ge=3*Se[Be];fe[Ge]+=Ae[3*Be],fe[Ge+1]+=Ae[3*Be+1],fe[Ge+2]+=Ae[3*Be+2]}var ht={vertexIndices:X,vertexPositions:fe},xt=this.genBuffers(ht),at=new THREE.Float32BufferAttribute(xt.vertex,3);at.name=Q.attrName,F.applyToBufferAttribute(at),V.morphAttributes.position.push(at)},parseNormals:function(V){var q=V.MappingInformationType,Q=V.ReferenceInformationType,F=V.Normals.a,z=[];return Q==="IndexToDirect"&&("NormalIndex"in V?z=V.NormalIndex.a:"NormalsIndex"in V&&(z=V.NormalsIndex.a)),{dataSize:3,buffer:F,indices:z,mappingType:q,referenceType:Q}},parseUVs:function(V){var q=V.MappingInformationType,Q=V.ReferenceInformationType,F=V.UV.a,z=[];return Q==="IndexToDirect"&&(z=V.UVIndex.a),{dataSize:2,buffer:F,indices:z,mappingType:q,referenceType:Q}},parseVertexColors:function(V){var q=V.MappingInformationType,Q=V.ReferenceInformationType,F=V.Colors.a,z=[];return Q==="IndexToDirect"&&(z=V.ColorIndex.a),{dataSize:4,buffer:F,indices:z,mappingType:q,referenceType:Q}},parseMaterialIndices:function(V){var q=V.MappingInformationType,Q=V.ReferenceInformationType;if(q==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:Q};for(var F=V.Materials.a,z=[],X=0;X<F.length;++X)z.push(X);return{dataSize:1,buffer:F,indices:z,mappingType:q,referenceType:Q}},parseNurbsGeometry:function(V){if(THREE.NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var q=parseInt(V.Order);if(isNaN(q))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",V.Order,V.id),new THREE.BufferGeometry;for(var Q=q-1,F=V.KnotVector.a,z=[],X=V.Points.a,fe=0,Ae=X.length;fe<Ae;fe+=4)z.push(new THREE.Vector4().fromArray(X,fe));var Se,Be;if(V.Form==="Closed")z.push(z[0]);else if(V.Form==="Periodic")for(Se=Q,Be=F.length-1-Se,fe=0;fe<Q;++fe)z.push(z[fe]);var Ge=new THREE.NURBSCurve(Q,F,z,Se,Be).getPoints(7*z.length),ht=new Float32Array(3*Ge.length);Ge.forEach(function(at,Gt){at.toArray(ht,3*Gt)});var xt=new THREE.BufferGeometry;return xt.addAttribute("position",new THREE.BufferAttribute(ht,3)),xt}},h.prototype={constructor:h,parse:function(){var V=[],q=this.parseClips();if(q===void 0)return V;for(var Q in q){var F=q[Q],z=this.addClip(F);V.push(z)}return V},parseClips:function(){if(P.Objects.AnimationCurve!==void 0){var V=this.parseAnimationCurveNodes();this.parseAnimationCurves(V);var q=this.parseAnimationLayers(V);return this.parseAnimStacks(q)}},parseAnimationCurveNodes:function(){var V=P.Objects.AnimationCurveNode,q=new Map;for(var Q in V){var F=V[Q];if(F.attrName.match(/S|R|T|DeformPercent/)!==null){var z={id:F.id,attr:F.attrName,curves:{}};q.set(z.id,z)}}return q},parseAnimationCurves:function(V){var q=P.Objects.AnimationCurve;for(var Q in q){var F={id:q[Q].id,times:q[Q].KeyTime.a.map(_),values:q[Q].KeyValueFloat.a},z=Y.get(F.id);if(z!==void 0){var X=z.parents[0].ID,fe=z.parents[0].relationship;fe.match(/X/)?V.get(X).curves.x=F:fe.match(/Y/)?V.get(X).curves.y=F:fe.match(/Z/)?V.get(X).curves.z=F:fe.match(/d|DeformPercent/)&&V.has(X)&&(V.get(X).curves.morph=F)}}},parseAnimationLayers:function(V){var q=P.Objects.AnimationLayer,Q=new Map;for(var F in q){var z=[],X=Y.get(parseInt(F));if(X!==void 0){var fe=this;X.children.forEach(function(Ae,Se){if(V.has(Ae.ID)){var Be=V.get(Ae.ID);if(Be.curves.x!==void 0||Be.curves.y!==void 0||Be.curves.z!==void 0){if(z[Se]===void 0){Y.get(Ae.ID).parents.forEach(function(Yt){Yt.relationship!==void 0&&(wt=Yt.ID)});var Ge=P.Objects.Model[wt.toString()],ht={modelName:THREE.PropertyBinding.sanitizeNodeName(Ge.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1],transform:fe.getModelAnimTransform(Ge)};"PreRotation"in Ge&&(ht.preRotations=Ge.PreRotation.value),"PostRotation"in Ge&&(ht.postRotations=Ge.PostRotation.value),z[Se]=ht}z[Se][Be.attr]=Be}else if(Be.curves.morph!==void 0){if(z[Se]===void 0){var xt;Y.get(Ae.ID).parents.forEach(function(je){je.relationship!==void 0&&(xt=je.ID)});var at=Y.get(xt).parents[0].ID,Gt=Y.get(at).parents[0].ID,wt=Y.get(Gt).parents[0].ID,Ge=P.Objects.Model[wt],ht={modelName:THREE.PropertyBinding.sanitizeNodeName(Ge.attrName),morphName:P.Objects.Deformer[xt].attrName};z[Se]=ht}z[Se][Be.attr]=Be}}}),Q.set(parseInt(F),z)}}return Q},getModelAnimTransform:function(V){var q={};return"RotationOrder"in V&&(q.eulerOrder=parseInt(V.RotationOrder.value)),"Lcl_Translation"in V&&(q.translation=V.Lcl_Translation.value),"RotationOffset"in V&&(q.rotationOffset=V.RotationOffset.value),"Lcl_Rotation"in V&&(q.rotation=V.Lcl_Rotation.value),"PreRotation"in V&&(q.preRotation=V.PreRotation.value),"PostRotation"in V&&(q.postRotation=V.PostRotation.value),"Lcl_Scaling"in V&&(q.scale=V.Lcl_Scaling.value),w(q)},parseAnimStacks:function(V){var q=P.Objects.AnimationStack,Q={};for(var F in q){var z=Y.get(parseInt(F)).children;z.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var X=V.get(z[0].ID);Q[F]={name:q[F].attrName,layer:X}}return Q},addClip:function(V){var q=[],Q=this;return V.layer.forEach(function(F){q=q.concat(Q.generateTracks(F))}),new THREE.AnimationClip(V.name,-1,q)},generateTracks:function(V){var q=[],Q=new THREE.Vector3,F=new THREE.Quaternion,z=new THREE.Vector3;if(V.transform&&V.transform.decompose(Q,F,z),Q=Q.toArray(),F=new THREE.Euler().setFromQuaternion(F).toArray(),z=z.toArray(),V.T!==void 0&&Object.keys(V.T.curves).length>0){var X=this.generateVectorTrack(V.modelName,V.T.curves,Q,"position");X!==void 0&&q.push(X)}if(V.R!==void 0&&Object.keys(V.R.curves).length>0){var fe=this.generateRotationTrack(V.modelName,V.R.curves,F,V.preRotations,V.postRotations);fe!==void 0&&q.push(fe)}if(V.S!==void 0&&Object.keys(V.S.curves).length>0){var Ae=this.generateVectorTrack(V.modelName,V.S.curves,z,"scale");Ae!==void 0&&q.push(Ae)}if(V.DeformPercent!==void 0){var Se=this.generateMorphTrack(V);Se!==void 0&&q.push(Se)}return q},generateVectorTrack:function(V,q,Q,F){var z=this.getTimesForAllAxes(q),X=this.getKeyframeTrackValues(z,q,Q);return new THREE.VectorKeyframeTrack(V+"."+F,z,X)},generateRotationTrack:function(V,q,Q,F,z){q.x!==void 0&&(this.interpolateRotations(q.x),q.x.values=q.x.values.map(THREE.MathUtils.degToRad)),q.y!==void 0&&(this.interpolateRotations(q.y),q.y.values=q.y.values.map(THREE.MathUtils.degToRad)),q.z!==void 0&&(this.interpolateRotations(q.z),q.z.values=q.z.values.map(THREE.MathUtils.degToRad));var X=this.getTimesForAllAxes(q),fe=this.getKeyframeTrackValues(X,q,Q);F!==void 0&&((F=F.map(THREE.MathUtils.degToRad)).push("ZYX"),F=new THREE.Euler().fromArray(F),F=new THREE.Quaternion().setFromEuler(F)),z!==void 0&&((z=z.map(THREE.MathUtils.degToRad)).push("ZYX"),z=new THREE.Euler().fromArray(z),z=new THREE.Quaternion().setFromEuler(z).inverse());for(var Ae=new THREE.Quaternion,Se=new THREE.Euler,Be=[],Ge=0;Ge<fe.length;Ge+=3)Se.set(fe[Ge],fe[Ge+1],fe[Ge+2],"ZYX"),Ae.setFromEuler(Se),F!==void 0&&Ae.premultiply(F),z!==void 0&&Ae.multiply(z),Ae.toArray(Be,Ge/3*4);return new THREE.QuaternionKeyframeTrack(V+".quaternion",X,Be)},generateMorphTrack:function(V){var q=V.DeformPercent.curves.morph,Q=q.values.map(function(z){return z/100}),F=J.getObjectByName(V.modelName).morphTargetDictionary[V.morphName];return new THREE.NumberKeyframeTrack(V.modelName+".morphTargetInfluences["+F+"]",q.times,Q)},getTimesForAllAxes:function(V){var q=[];return V.x!==void 0&&(q=q.concat(V.x.times)),V.y!==void 0&&(q=q.concat(V.y.times)),V.z!==void 0&&(q=q.concat(V.z.times)),q=q.sort(function(Q,F){return Q-F}).filter(function(Q,F,z){return z.indexOf(Q)==F})},getKeyframeTrackValues:function(V,q,Q){var F=Q,z=[],X=-1,fe=-1,Ae=-1;return V.forEach(function(Se){if(q.x&&(X=q.x.times.indexOf(Se)),q.y&&(fe=q.y.times.indexOf(Se)),q.z&&(Ae=q.z.times.indexOf(Se)),X!==-1){var Be=q.x.values[X];z.push(Be),F[0]=Be}else z.push(F[0]);if(fe!==-1){var Ge=q.y.values[fe];z.push(Ge),F[1]=Ge}else z.push(F[1]);if(Ae!==-1){var ht=q.z.values[Ae];z.push(ht),F[2]=ht}else z.push(F[2])}),z},interpolateRotations:function(V){for(var q=1;q<V.values.length;q++){var Q=V.values[q-1],F=V.values[q]-Q,z=Math.abs(F);if(z>=180){for(var X=z/180,fe=F/X,Ae=Q+fe,Se=V.times[q-1],Be=(V.times[q]-Se)/X,Ge=Se+Be,ht=[],xt=[];Ge<V.times[q];)ht.push(Ge),Ge+=Be,xt.push(Ae),Ae+=fe;V.times=L(V.times,q,ht),V.values=L(V.values,q,xt)}}}},g.prototype={constructor:g,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(V){this.nodeStack.push(V),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(V,q){this.currentProp=V,this.currentPropName=q},parse:function(V){this.currentIndent=0,console.log("FBXTree: ",y),this.allNodes=new y,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var q=this,Q=V.split(/[\r\n]+/);return Q.forEach(function(F,z){var X=F.match(/^[\s\t]*;/),fe=F.match(/^[\s\t]*$/);if(!X&&!fe){var Ae=F.match("^\\t{"+q.currentIndent+"}(\\w+):(.*){",""),Se=F.match("^\\t{"+q.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),Be=F.match("^\\t{"+(q.currentIndent-1)+"}}");Ae?q.parseNodeBegin(F,Ae):Se?q.parseNodeProperty(F,Se,Q[++z]):Be?q.popStack():F.match(/^[^\s\t}]/)&&q.parseNodePropertyContinued(F)}}),this.allNodes},parseNodeBegin:function(V,q){var Q=q[1].trim().replace(/^"/,"").replace(/"$/,""),F=q[2].split(",").map(function(Ae){return Ae.trim().replace(/^"/,"").replace(/"$/,"")}),z={name:Q},X=this.parseNodeAttr(F),fe=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(Q,z):Q in fe?(Q==="PoseNode"?fe.PoseNode.push(z):fe[Q].id!==void 0&&(fe[Q]={},fe[Q][fe[Q].id]=fe[Q]),X.id!==""&&(fe[Q][X.id]=z)):typeof X.id=="number"?(fe[Q]={},fe[Q][X.id]=z):Q!=="Properties70"&&(fe[Q]=Q==="PoseNode"?[z]:z),typeof X.id=="number"&&(z.id=X.id),X.name!==""&&(z.attrName=X.name),X.type!==""&&(z.attrType=X.type),this.pushStack(z)},parseNodeAttr:function(V){var q=V[0];V[0]!==""&&(q=parseInt(V[0]),isNaN(q)&&(q=V[0]));var Q="",F="";return V.length>1&&(Q=V[1].replace(/^(\w+)::/,""),F=V[2]),{id:q,name:Q,type:F}},parseNodeProperty:function(V,q,Q){var F=q[1].replace(/^"/,"").replace(/"$/,"").trim(),z=q[2].replace(/^"/,"").replace(/"$/,"").trim();F==="Content"&&z===","&&(z=Q.replace(/"/g,"").replace(/,$/,"").trim());var X=this.getCurrentNode();if(X.name!=="Properties70"){if(F==="C"){var fe=z.split(",").slice(1),Ae=parseInt(fe[0]),Se=parseInt(fe[1]),Be=z.split(",").slice(3);F="connections",function(Ge,ht){for(var xt=0,at=Ge.length,Gt=ht.length;xt<Gt;xt++,at++)Ge[at]=ht[xt]}(z=[Ae,Se],Be=Be.map(function(Ge){return Ge.trim().replace(/^"/,"")})),X[F]===void 0&&(X[F]=[])}F==="Node"&&(X.id=z),F in X&&Array.isArray(X[F])?X[F].push(z):F!=="a"?X[F]=z:X.a=z,this.setCurrentProp(X,F),F==="a"&&z.slice(-1)!==","&&(X.a=O(z))}else this.parseNodeSpecialProperty(V,F,z)},parseNodePropertyContinued:function(V){var q=this.getCurrentNode();q.a+=V,V.slice(-1)!==","&&(q.a=O(q.a))},parseNodeSpecialProperty:function(V,q,Q){var F=Q.split('",').map(function(Be){return Be.trim().replace(/^\"/,"").replace(/\s/,"_")}),z=F[0],X=F[1],fe=F[2],Ae=F[3],Se=F[4];switch(X){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":Se=parseFloat(Se);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":Se=O(Se)}this.getPrevNode()[z]={type:X,type2:fe,flag:Ae,value:Se},this.setCurrentProp(this.getPrevNode(),z)}},C.prototype={constructor:C,parse:function(V){var q=new v(V);q.skip(23);var Q=q.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+Q);for(var F=new y;!this.endOfContent(q);){var z=this.parseNode(q,Q);z!==null&&F.add(z.name,z)}return F},endOfContent:function(V){return V.size()%16==0?(V.getOffset()+160+16&-16)>=V.size():V.getOffset()+160+16>=V.size()},parseNode:function(V,q){var Q={},F=q>=7500?V.getUint64():V.getUint32(),z=q>=7500?V.getUint64():V.getUint32(),X=(q>=7500?V.getUint64():V.getUint32(),V.getUint8()),fe=V.getString(X);if(F===0)return null;for(var Ae=[],Se=0;Se<z;Se++)Ae.push(this.parseProperty(V));var Be=Ae.length>0?Ae[0]:"",Ge=Ae.length>1?Ae[1]:"",ht=Ae.length>2?Ae[2]:"";for(Q.singleProperty=z===1&&V.getOffset()===F;F>V.getOffset();){var xt=this.parseNode(V,q);xt!==null&&this.parseSubNode(fe,Q,xt)}return Q.propertyList=Ae,typeof Be=="number"&&(Q.id=Be),Ge!==""&&(Q.attrName=Ge),ht!==""&&(Q.attrType=ht),fe!==""&&(Q.name=fe),Q},parseSubNode:function(V,q,Q){if(Q.singleProperty===!0){var F=Q.propertyList[0];Array.isArray(F)?(q[Q.name]=Q,Q.a=F):q[Q.name]=F}else if(V==="Connections"&&Q.name==="C"){var z=[];Q.propertyList.forEach(function(Ge,ht){ht!==0&&z.push(Ge)}),q.connections===void 0&&(q.connections=[]),q.connections.push(z)}else if(Q.name==="Properties70")Object.keys(Q).forEach(function(Ge){q[Ge]=Q[Ge]});else if(V==="Properties70"&&Q.name==="P"){var X,fe=Q.propertyList[0],Ae=Q.propertyList[1],Se=Q.propertyList[2],Be=Q.propertyList[3];fe.indexOf("Lcl ")===0&&(fe=fe.replace("Lcl ","Lcl_")),Ae.indexOf("Lcl ")===0&&(Ae=Ae.replace("Lcl ","Lcl_")),X=Ae==="Color"||Ae==="ColorRGB"||Ae==="Vector"||Ae==="Vector3D"||Ae.indexOf("Lcl_")===0?[Q.propertyList[4],Q.propertyList[5],Q.propertyList[6]]:Q.propertyList[4],q[fe]={type:Ae,type2:Se,flag:Be,value:X}}else q[Q.name]===void 0?typeof Q.id=="number"?(q[Q.name]={},q[Q.name][Q.id]=Q):q[Q.name]=Q:Q.name==="PoseNode"?(Array.isArray(q[Q.name])||(q[Q.name]=[q[Q.name]]),q[Q.name].push(Q)):q[Q.name][Q.id]===void 0&&(q[Q.name][Q.id]=Q)},parseProperty:function(V){var q=V.getString(1);switch(q){case"C":return V.getBoolean();case"D":return V.getFloat64();case"F":return V.getFloat32();case"I":return V.getInt32();case"L":return V.getInt64();case"R":return Q=V.getUint32(),V.getArrayBuffer(Q);case"S":var Q=V.getUint32();return V.getString(Q);case"Y":return V.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var F=V.getUint32(),z=V.getUint32(),X=V.getUint32();if(z===0)switch(q){case"b":case"c":return V.getBooleanArray(F);case"d":return V.getFloat64Array(F);case"f":return V.getFloat32Array(F);case"i":return V.getInt32Array(F);case"l":return V.getInt64Array(F)}typeof Zlib>"u"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var fe=new v(new Zlib.Inflate(new Uint8Array(V.getArrayBuffer(X))).decompress().buffer);switch(q){case"b":case"c":return fe.getBooleanArray(F);case"d":return fe.getFloat64Array(F);case"f":return fe.getFloat32Array(F);case"i":return fe.getInt32Array(F);case"l":return fe.getInt64Array(F)}default:throw new Error("THREE.FBXLoader: Unknown property type "+q)}}},v.prototype={constructor:v,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(V){this.offset+=V},getBoolean:function(){return(1&this.getUint8())==1},getBooleanArray:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getBoolean());return q},getUint8:function(){var V=this.dv.getUint8(this.offset);return this.offset+=1,V},getInt16:function(){var V=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,V},getInt32:function(){var V=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,V},getInt32Array:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getInt32());return q},getUint32:function(){var V=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,V},getInt64:function(){var V,q;return this.littleEndian?(V=this.getUint32(),q=this.getUint32()):(q=this.getUint32(),V=this.getUint32()),2147483648&q?(q=4294967295&~q,(V=4294967295&~V)===4294967295&&(q=q+1&4294967295),V=V+1&4294967295,-(4294967296*q+V)):4294967296*q+V},getInt64Array:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getInt64());return q},getUint64:function(){var V,q;return this.littleEndian?(V=this.getUint32(),q=this.getUint32()):(q=this.getUint32(),V=this.getUint32()),4294967296*q+V},getFloat32:function(){var V=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,V},getFloat32Array:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getFloat32());return q},getFloat64:function(){var V=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,V},getFloat64Array:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getFloat64());return q},getArrayBuffer:function(V){var q=this.dv.buffer.slice(this.offset,this.offset+V);return this.offset+=V,q},getString:function(V){for(var q=[],Q=0;Q<V;Q++)q[Q]=this.getUint8();var F=q.indexOf(0);return F>=0&&(q=q.slice(0,F)),THREE.LoaderUtils.decodeText(new Uint8Array(q))}},y.prototype={constructor:y,add:function(V,q){this[V]=q}};var j=[],U=new THREE.Matrix4,te=new THREE.Euler,ue=new THREE.Vector3,xe=new THREE.Vector3,Ee=new THREE.Matrix4;return K}()},{}],5:[function(u,T,W){T.exports=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})},{}],6:[function(u,T,W){T.exports=function(d,k,K){this.type=d,this.index=k,this.pressed=K.pressed,this.value=K.value}},{}],7:[function(u,T,W){function d(K){var S=document.getElementById(K),I=S.parentNode;try{I&&I.removeChild(S)}catch{}}function k(K,S,I){return new I(function(h,g){var C=S.timeout||5e3,v="script_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),y=function(m,w){var b=document.createElement("script");return b.type="text/javascript",b.async=!0,b.id=w,b.src=m,b}(K,v),E=setTimeout(function(){g(new Error("Script request to "+K+" timed out")),d(v)},C),_=function(m){clearTimeout(m)};y.addEventListener("load",function(m){h({ok:!0}),_(E),d(v)}),y.addEventListener("error",function(m){g(new Error("Script request to "+K+" failed "+m)),_(E),d(v)}),function(m){var w=document.getElementsByTagName("script")[0];w.parentNode.insertBefore(m,w)}(y)})}T.exports=function(K){return K=K||{},function(S,I){return I=I||{},k(S,I,K.Promise||Promise)}}},{}],8:[function(u,T,W){(function(d){function k(Y,J){return String(Y).indexOf(J)!==-1}function K(Y,J,j){_!==J&&E!==J&&y!==J||Object.keys(j).forEach(function(U){Y[U]=j[U]})}function S(Y){var J="keyCode"in Y?Y.keyCode:"which"in Y?Y.which:0,j=function(){if(P||"keyLocation"in Y){var te=P?Y.location:Y.keyLocation;if(te&&J in b[te])return b[te][J]}return"keyIdentifier"in Y&&Y.keyIdentifier in w?w[Y.keyIdentifier]:J in m?m[J]:null}();if(!j)return null;var U=function(){var te=O[j.code];return te?Y.shiftKey&&"shiftKey"in te?te.shiftKey:te.key:j.code}();return{code:j.code,key:U,location:j.location,keyCap:j.keyCap}}var I="KeyboardEvent"in d;I||(d.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),"DOM_KEY_LOCATION_STANDARD"in d.KeyboardEvent||(d.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0),"DOM_KEY_LOCATION_LEFT"in d.KeyboardEvent||(d.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1),"DOM_KEY_LOCATION_RIGHT"in d.KeyboardEvent||(d.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2),"DOM_KEY_LOCATION_NUMPAD"in d.KeyboardEvent||(d.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3);var h=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,g=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,C=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,v=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD,y=k(navigator.platform,"Win")?"win":k(navigator.platform,"Mac")?"mac":k(navigator.platform,"CrOS")?"cros":k(navigator.platform,"Linux")?"linux":k(navigator.userAgent,"iPad")||k(navigator.platform,"iPod")||k(navigator.platform,"iPhone")?"ios":"",E=k(navigator.userAgent,"Chrome/")?"chrome":k(navigator.vendor,"Apple")?"safari":k(navigator.userAgent,"MSIE")?"ie":k(navigator.userAgent,"Gecko/")?"moz":k(navigator.userAgent,"Opera/")?"opera":"",_=E+"-"+y,m={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:g},92:{code:"OSRight",location:C},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:v},97:{code:"Numpad1",keyCap:"1",location:v},98:{code:"Numpad2",keyCap:"2",location:v},99:{code:"Numpad3",keyCap:"3",location:v},100:{code:"Numpad4",keyCap:"4",location:v},101:{code:"Numpad5",keyCap:"5",location:v},102:{code:"Numpad6",keyCap:"6",location:v},103:{code:"Numpad7",keyCap:"7",location:v},104:{code:"Numpad8",keyCap:"8",location:v},105:{code:"Numpad9",keyCap:"9",location:v},106:{code:"NumpadMultiply",keyCap:"*",location:v},107:{code:"NumpadAdd",keyCap:"+",location:v},108:{code:"NumpadComma",keyCap:",",location:v},109:{code:"NumpadSubtract",keyCap:"-",location:v},110:{code:"NumpadDecimal",keyCap:".",location:v},111:{code:"NumpadDivide",keyCap:"/",location:v},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:v},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:g},161:{code:"ShiftRight",location:C},162:{code:"ControlLeft",location:g},163:{code:"ControlRight",location:C},164:{code:"AltLeft",location:g},165:{code:"AltRight",location:C},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};K(m,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:v},189:{code:"NumpadSubtract",keyCap:"-",location:v}}),K(m,"moz-mac",{12:{code:"NumLock",location:v},173:{code:"Minus",keyCap:"-"}}),K(m,"moz-win",{173:{code:"Minus",keyCap:"-"}}),K(m,"chrome-mac",{93:{code:"OSRight",location:C}}),K(m,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),K(m,"ios",{10:{code:"Enter",location:h}}),K(m,"safari-mac",{91:{code:"OSLeft",location:g},93:{code:"OSRight",location:C},229:{code:"KeyQ",keyCap:"Q"}});var w={};y==="cros"&&(w["U+00A0"]={code:"ShiftLeft",location:g},w["U+00A1"]={code:"ShiftRight",location:C},w["U+00A2"]={code:"ControlLeft",location:g},w["U+00A3"]={code:"ControlRight",location:C},w["U+00A4"]={code:"AltLeft",location:g},w["U+00A5"]={code:"AltRight",location:C}),_==="chrome-mac"&&(w["U+0010"]={code:"ContextMenu"}),_==="safari-mac"&&(w["U+0010"]={code:"ContextMenu"}),y==="ios"&&(w["U+0010"]={code:"Function"},w["U+001C"]={code:"ArrowLeft"},w["U+001D"]={code:"ArrowRight"},w["U+001E"]={code:"ArrowUp"},w["U+001F"]={code:"ArrowDown"},w["U+0001"]={code:"Home"},w["U+0004"]={code:"End"},w["U+000B"]={code:"PageUp"},w["U+000C"]={code:"PageDown"});var b=[];b[g]={16:{code:"ShiftLeft",location:g},17:{code:"ControlLeft",location:g},18:{code:"AltLeft",location:g}},b[C]={16:{code:"ShiftRight",location:C},17:{code:"ControlRight",location:C},18:{code:"AltRight",location:C}},b[v]={13:{code:"NumpadEnter",location:v}},K(b[v],"moz",{109:{code:"NumpadSubtract",location:v},107:{code:"NumpadAdd",location:v}}),K(b[g],"moz-mac",{224:{code:"OSLeft",location:g}}),K(b[C],"moz-mac",{224:{code:"OSRight",location:C}}),K(b[C],"moz-win",{91:{code:"OSRight",location:C}}),K(b[C],"mac",{93:{code:"OSRight",location:C}}),K(b[v],"chrome-mac",{12:{code:"NumLock",location:v}}),K(b[v],"safari-mac",{12:{code:"NumLock",location:v},187:{code:"NumpadAdd",location:v},189:{code:"NumpadSubtract",location:v},190:{code:"NumpadDecimal",location:v},191:{code:"NumpadDivide",location:v}});var O={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};K(O,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var R={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},L=function(Y,J){var j={};return Object.keys(Y).forEach(function(U){var te=Y[U];J in te&&(j[te[J]]=te)}),j}(m,"code");try{var P=I&&"location"in new KeyboardEvent("")}catch{}"KeyboardEvent"in d&&"defineProperty"in Object&&function(){function Y(j,U,te){U in j||Object.defineProperty(j,U,te)}if(Y(KeyboardEvent.prototype,"code",{get:function(){var j=S(this);return j?j.code:""}}),"key"in KeyboardEvent.prototype){var J=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var j=J.get.call(this);return R.hasOwnProperty(j)?R[j]:j}})}Y(KeyboardEvent.prototype,"key",{get:function(){var j=S(this);return j&&"key"in j?j.key:"Unidentified"}}),Y(KeyboardEvent.prototype,"location",{get:function(){var j=S(this);return j&&"location"in j?j.location:h}}),Y(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in d.KeyboardEvent||(d.KeyboardEvent.queryKeyCap=function(Y,J){if(Y=String(Y),!L.hasOwnProperty(Y))return"Undefined";if(J&&String(J).toLowerCase()!=="en-us")throw Error("Unsupported locale");var j=L[Y];return j.keyCap||j.code||"Undefined"}),d.identifyKey=function(Y){if(!("code"in Y)){var J=S(Y);Y.code=J?J.code:"",Y.key=J&&"key"in J?J.key:"Unidentified",Y.location="location"in Y?Y.location:"keyLocation"in Y?Y.keyLocation:J&&"location"in J?J.location:h,Y.locale=""}}})(window)},{}],9:[function(u,T,W){(function(d,k){typeof W=="object"&&typeof T=="object"?T.exports=k():typeof W=="object"?W.nipplejs=k():d.nipplejs=k()})(window,function(){return function(d){function k(S){if(K[S])return K[S].exports;var I=K[S]={i:S,l:!1,exports:{}};return d[S].call(I.exports,I,I.exports,k),I.l=!0,I.exports}var K={};return k.m=d,k.c=K,k.d=function(S,I,h){k.o(S,I)||Object.defineProperty(S,I,{enumerable:!0,get:h})},k.r=function(S){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})},k.t=function(S,I){if(1&I&&(S=k(S)),8&I||4&I&&typeof S=="object"&&S&&S.__esModule)return S;var h=Object.create(null);if(k.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:S}),2&I&&typeof S!="string")for(var g in S)k.d(h,g,function(C){return S[C]}.bind(null,g));return h},k.n=function(S){var I=S&&S.__esModule?function(){return S.default}:function(){return S};return k.d(I,"a",I),I},k.o=function(S,I){return Object.prototype.hasOwnProperty.call(S,I)},k.p="",k(k.s=0)}([function(d,k,K){function S(){}function I(F,z){return this.identifier=z.identifier,this.position=z.position,this.frontPosition=z.frontPosition,this.collection=F,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(z),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=I.id,I.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function h(F,z){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=F,this.id=h.id,h.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},this.config(z),this.options.mode!=="static"&&this.options.mode!=="semi"||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);var X=getComputedStyle(this.options.zone.parentElement);return X&&X.display==="flex"&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function g(F){var z=this;z.ids={},z.index=0,z.collections=[],z.scroll=O(),z.config(F),z.prepareCollections();var X=function(){var Ae;z.collections.forEach(function(Se){Se.forEach(function(Be){Ae=Be.el.getBoundingClientRect(),Be.position={x:z.scroll.x+Ae.left,y:z.scroll.y+Ae.top}})})};m(window,"resize",function(){_(X)});var fe=function(){z.scroll=O()};return m(window,"scroll",function(){_(fe)}),z.collections}K.r(k);var C,v=function(F,z){var X=z.x-F.x,fe=z.y-F.y;return Math.sqrt(X*X+fe*fe)},y=function(F){return F*(Math.PI/180)},E=new Map,_=function(F){E.has(F)&&clearTimeout(E.get(F)),E.set(F,setTimeout(F,100))},m=function(F,z,X){for(var fe,Ae=z.split(/[ ,]+/g),Se=0;Se<Ae.length;Se+=1)fe=Ae[Se],F.addEventListener?F.addEventListener(fe,X,!1):F.attachEvent&&F.attachEvent(fe,X)},w=function(F,z,X){for(var fe,Ae=z.split(/[ ,]+/g),Se=0;Se<Ae.length;Se+=1)fe=Ae[Se],F.removeEventListener?F.removeEventListener(fe,X):F.detachEvent&&F.detachEvent(fe,X)},b=function(F){return F.preventDefault(),F.type.match(/^touch/)?F.changedTouches:F},O=function(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},R=function(F,z){z.top||z.right||z.bottom||z.left?(F.style.top=z.top,F.style.right=z.right,F.style.bottom=z.bottom,F.style.left=z.left):(F.style.left=z.x+"px",F.style.top=z.y+"px")},L=function(F,z,X){var fe=P(F);for(var Ae in fe)if(fe.hasOwnProperty(Ae))if(typeof z=="string")fe[Ae]=z+" "+X;else{for(var Se="",Be=0,Ge=z.length;Be<Ge;Be+=1)Se+=z[Be]+" "+X+", ";fe[Ae]=Se.slice(0,-2)}return fe},P=function(F){var z={};return z[F]="",["webkit","Moz","o"].forEach(function(X){z[X+F.charAt(0).toUpperCase()+F.slice(1)]=""}),z},Y=function(F,z){for(var X in z)z.hasOwnProperty(X)&&(F[X]=z[X]);return F},J=function(F,z){if(F.length)for(var X=0,fe=F.length;X<fe;X+=1)z(F[X]);else z(F)},j="ontouchstart"in window,U=!!window.PointerEvent,te=!!window.MSPointerEvent,ue={start:"mousedown",move:"mousemove",end:"mouseup"},xe={};U?C={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:te?C={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:j?(C={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},xe=ue):C=ue,S.prototype.on=function(F,z){var X,fe=F.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var Ae=0;Ae<fe.length;Ae+=1)X=fe[Ae],this._handlers_[X]=this._handlers_[X]||[],this._handlers_[X].push(z);return this},S.prototype.off=function(F,z){return this._handlers_=this._handlers_||{},F===void 0?this._handlers_={}:z===void 0?this._handlers_[F]=null:this._handlers_[F]&&this._handlers_[F].indexOf(z)>=0&&this._handlers_[F].splice(this._handlers_[F].indexOf(z),1),this},S.prototype.trigger=function(F,z){var X,fe=this,Ae=F.split(/[ ,]+/g);fe._handlers_=fe._handlers_||{};for(var Se=0;Se<Ae.length;Se+=1)X=Ae[Se],fe._handlers_[X]&&fe._handlers_[X].length&&fe._handlers_[X].forEach(function(Be){Be.call(fe,{type:X,target:fe},z)})},S.prototype.config=function(F){this.options=this.defaults||{},F&&(this.options=function(z,X){var fe={};for(var Ae in z)z.hasOwnProperty(Ae)&&X.hasOwnProperty(Ae)?fe[Ae]=X[Ae]:z.hasOwnProperty(Ae)&&(fe[Ae]=z[Ae]);return fe}(this.options,F))},S.prototype.bindEvt=function(F,z){var X=this;return X._domHandlers_=X._domHandlers_||{},X._domHandlers_[z]=function(){typeof X["on"+z]=="function"?X["on"+z].apply(X,arguments):console.warn('[WARNING] : Missing "on'+z+'" handler.')},m(F,C[z],X._domHandlers_[z]),xe[z]&&m(F,xe[z],X._domHandlers_[z]),X},S.prototype.unbindEvt=function(F,z){return this._domHandlers_=this._domHandlers_||{},w(F,C[z],this._domHandlers_[z]),xe[z]&&w(F,xe[z],this._domHandlers_[z]),delete this._domHandlers_[z],this};var Ee=S;I.prototype=new Ee,I.constructor=I,I.id=0,I.prototype.buildEl=function(F){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},I.prototype.stylize=function(){if(this.options.dataOnly)return this;var F=this.options.fadeTime+"ms",z=function(Ae,Se){var Be=P("borderRadius");for(var Ge in Be)Be.hasOwnProperty(Ge)&&(Be[Ge]="50%");return Be}(),X=L("transition","opacity",F),fe={};return fe.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},fe.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},fe.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},Y(fe.el,X),this.options.shape==="circle"&&Y(fe.back,z),Y(fe.front,z),this.applyStyles(fe),this},I.prototype.applyStyles=function(F){for(var z in this.ui)if(this.ui.hasOwnProperty(z))for(var X in F[z])this.ui[z].style[X]=F[z][X];return this},I.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},I.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},I.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},I.prototype.show=function(F){var z=this;return z.options.dataOnly||(clearTimeout(z.removeTimeout),clearTimeout(z.showTimeout),clearTimeout(z.restTimeout),z.addToDom(),z.restCallback(),setTimeout(function(){z.ui.el.style.opacity=1},0),z.showTimeout=setTimeout(function(){z.trigger("shown",z.instance),typeof F=="function"&&F.call(this)},z.options.fadeTime)),z},I.prototype.hide=function(F){var z=this;if(z.options.dataOnly)return z;if(z.ui.el.style.opacity=z.options.restOpacity,clearTimeout(z.removeTimeout),clearTimeout(z.showTimeout),clearTimeout(z.restTimeout),z.removeTimeout=setTimeout(function(){var Ae=z.options.mode==="dynamic"?"none":"block";z.ui.el.style.display=Ae,typeof F=="function"&&F.call(z),z.trigger("hidden",z.instance)},z.options.fadeTime),z.options.restJoystick){var X=z.options.restJoystick,fe={};fe.x=X===!0||X.x!==!1?0:z.instance.frontPosition.x,fe.y=X===!0||X.y!==!1?0:z.instance.frontPosition.y,z.setPosition(F,fe)}return z},I.prototype.setPosition=function(F,z){var X=this;X.frontPosition={x:z.x,y:z.y};var fe=X.options.fadeTime+"ms",Ae={};Ae.front=L("transition",["transform"],fe);var Se={front:{}};Se.front={transform:"translate("+X.frontPosition.x+"px,"+X.frontPosition.y+"px)"},X.applyStyles(Ae),X.applyStyles(Se),X.restTimeout=setTimeout(function(){typeof F=="function"&&F.call(X),X.restCallback()},X.options.fadeTime)},I.prototype.restCallback=function(){var F={};F.front=L("transition","none",""),this.applyStyles(F),this.trigger("rested",this.instance)},I.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},I.prototype.computeDirection=function(F){var z,X,fe,Ae=F.angle.radian,Se=Math.PI/4,Be=Math.PI/2;if(Ae>Se&&Ae<3*Se&&!F.lockX?z="up":Ae>-Se&&Ae<=Se&&!F.lockY?z="left":Ae>3*-Se&&Ae<=-Se&&!F.lockX?z="down":F.lockY||(z="right"),F.lockY||(X=Ae>-Be&&Ae<Be?"left":"right"),F.lockX||(fe=Ae>0?"up":"down"),F.force>this.options.threshold){var Ge,ht={};for(Ge in this.direction)this.direction.hasOwnProperty(Ge)&&(ht[Ge]=this.direction[Ge]);var xt={};for(Ge in this.direction={x:X,y:fe,angle:z},F.direction=this.direction,ht)ht[Ge]===this.direction[Ge]&&(xt[Ge]=!0);if(xt.x&&xt.y&&xt.angle)return F;xt.x&&xt.y||this.trigger("plain",F),xt.x||this.trigger("plain:"+X,F),xt.y||this.trigger("plain:"+fe,F),xt.angle||this.trigger("dir dir:"+z,F)}else this.resetDirection();return F};var V=I;h.prototype=new Ee,h.constructor=h,h.id=0,h.prototype.prepareNipples=function(){var F=this.nipples;F.on=this.on.bind(this),F.off=this.off.bind(this),F.options=this.options,F.destroy=this.destroy.bind(this),F.ids=this.ids,F.id=this.id,F.processOnMove=this.processOnMove.bind(this),F.processOnEnd=this.processOnEnd.bind(this),F.get=function(z){if(z===void 0)return F[0];for(var X=0,fe=F.length;X<fe;X+=1)if(F[X].identifier===z)return F[X];return!1}},h.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},h.prototype.begin=function(){var F=this.options;if(F.mode==="static"){var z=this.createNipple(F.position,this.manager.getIdentifier());z.add(),this.idles.push(z)}},h.prototype.createNipple=function(F,z){var X=this.manager.scroll,fe={},Ae=this.options,Se=this.parentIsFlex?X.x:X.x+this.box.left,Be=this.parentIsFlex?X.y:X.y+this.box.top;if(F.x&&F.y)fe={x:F.x-Se,y:F.y-Be};else if(F.top||F.right||F.bottom||F.left){var Ge=document.createElement("DIV");Ge.style.display="hidden",Ge.style.top=F.top,Ge.style.right=F.right,Ge.style.bottom=F.bottom,Ge.style.left=F.left,Ge.style.position="absolute",Ae.zone.appendChild(Ge);var ht=Ge.getBoundingClientRect();Ae.zone.removeChild(Ge),fe=F,F={x:ht.left+X.x,y:ht.top+X.y}}var xt=new V(this,{color:Ae.color,size:Ae.size,threshold:Ae.threshold,fadeTime:Ae.fadeTime,dataOnly:Ae.dataOnly,restJoystick:Ae.restJoystick,restOpacity:Ae.restOpacity,mode:Ae.mode,identifier:z,position:F,zone:Ae.zone,frontPosition:{x:0,y:0},shape:Ae.shape});return Ae.dataOnly||(R(xt.ui.el,fe),R(xt.ui.front,xt.frontPosition)),this.nipples.push(xt),this.trigger("added "+xt.identifier+":added",xt),this.manager.trigger("added "+xt.identifier+":added",xt),this.bindNipple(xt),xt},h.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},h.prototype.bindNipple=function(F){var z,X=this,fe=function(Ae,Se){z=Ae.type+" "+Se.id+":"+Ae.type,X.trigger(z,Se)};F.on("destroyed",X.onDestroyed.bind(X)),F.on("shown hidden rested dir plain",fe),F.on("dir:up dir:right dir:down dir:left",fe),F.on("plain:up plain:right plain:down plain:left",fe)},h.prototype.pressureFn=function(F,z,X){var fe=this,Ae=0;clearInterval(fe.pressureIntervals[X]),fe.pressureIntervals[X]=setInterval(function(){var Se=F.force||F.pressure||F.webkitForce||0;Se!==Ae&&(z.trigger("pressure",Se),fe.trigger("pressure "+z.identifier+":pressure",Se),Ae=Se)}.bind(fe),100)},h.prototype.onstart=function(F){var z=this,X=z.options,fe=F;return F=b(F),z.updateBox(),J(F,function(Ae){z.actives.length<X.maxNumberOfNipples?z.processOnStart(Ae):fe.type.match(/^touch/)&&(Object.keys(z.manager.ids).forEach(function(Se){if(Object.values(fe.touches).findIndex(function(Ge){return Ge.identifier===Se})<0){var Be=[F[0]];Be.identifier=Se,z.processOnEnd(Be)}}),z.actives.length<X.maxNumberOfNipples&&z.processOnStart(Ae))}),z.manager.bindDocument(),!1},h.prototype.processOnStart=function(F){var z,X=this,fe=X.options,Ae=X.manager.getIdentifier(F),Se=F.force||F.pressure||F.webkitForce||0,Be={x:F.pageX,y:F.pageY},Ge=X.getOrCreate(Ae,Be);Ge.identifier!==Ae&&X.manager.removeIdentifier(Ge.identifier),Ge.identifier=Ae;var ht=function(xt){xt.trigger("start",xt),X.trigger("start "+xt.id+":start",xt),xt.show(),Se>0&&X.pressureFn(F,xt,xt.identifier),X.processOnMove(F)};if((z=X.idles.indexOf(Ge))>=0&&X.idles.splice(z,1),X.actives.push(Ge),X.ids.push(Ge.identifier),fe.mode!=="semi")ht(Ge);else{if(!(v(Be,Ge.position)<=fe.catchDistance))return Ge.destroy(),void X.processOnStart(F);ht(Ge)}return Ge},h.prototype.getOrCreate=function(F,z){var X,fe=this.options;return/(semi|static)/.test(fe.mode)?(X=this.idles[0])?(this.idles.splice(0,1),X):fe.mode==="semi"?this.createNipple(z,F):(console.warn("Coudln't find the needed nipple."),!1):X=this.createNipple(z,F)},h.prototype.processOnMove=function(F){var z=this.options,X=this.manager.getIdentifier(F),fe=this.nipples.get(X),Ae=this.manager.scroll;if(function(Ue){return isNaN(Ue.buttons)?Ue.pressure!==0:Ue.buttons!==0}(F)){if(!fe)return console.error("Found zombie joystick with ID "+X),void this.manager.removeIdentifier(X);if(z.dynamicPage){var Se=fe.el.getBoundingClientRect();fe.position={x:Ae.x+Se.left,y:Ae.y+Se.top}}fe.identifier=X;var Be=fe.options.size/2,Ge={x:F.pageX,y:F.pageY};z.lockX&&(Ge.y=fe.position.y),z.lockY&&(Ge.x=fe.position.x);var ht,xt,at,Gt,wt,Yt,Mn,je,rt,At,Bt=v(Ge,fe.position),Pt=(ht=Ge,xt=fe.position,at=xt.x-ht.x,Gt=xt.y-ht.y,function(Ue){return Ue*(180/Math.PI)}(Math.atan2(Gt,at))),qt=y(Pt),un=Bt/Be,dn={distance:Bt,position:Ge};if(fe.options.shape==="circle"?(wt=Math.min(Bt,Be),Mn=fe.position,je=wt,At={x:0,y:0},rt=y(rt=Pt),At.x=Mn.x-je*Math.cos(rt),At.y=Mn.y-je*Math.sin(rt),Yt=At):(Yt=function(Ue,Pe,Ye){return{x:Math.min(Math.max(Ue.x,Pe.x-Ye),Pe.x+Ye),y:Math.min(Math.max(Ue.y,Pe.y-Ye),Pe.y+Ye)}}(Ge,fe.position,Be),wt=v(Yt,fe.position)),z.follow){if(Bt>Be){var bn=Ge.x-Yt.x,tn=Ge.y-Yt.y;fe.position.x+=bn,fe.position.y+=tn,fe.el.style.top=fe.position.y-(this.box.top+Ae.y)+"px",fe.el.style.left=fe.position.x-(this.box.left+Ae.x)+"px",Bt=v(Ge,fe.position)}}else Ge=Yt,Bt=wt;var ri=Ge.x-fe.position.x,ni=Ge.y-fe.position.y;fe.frontPosition={x:ri,y:ni},z.dataOnly||(fe.ui.front.style.transform="translate("+ri+"px,"+ni+"px)");var zt={identifier:fe.identifier,position:Ge,force:un,pressure:F.force||F.pressure||F.webkitForce||0,distance:Bt,angle:{radian:qt,degree:Pt},vector:{x:ri/Be,y:-ni/Be},raw:dn,instance:fe,lockX:z.lockX,lockY:z.lockY};(zt=fe.computeDirection(zt)).angle={radian:y(180-Pt),degree:180-Pt},fe.trigger("move",zt),this.trigger("move "+fe.id+":move",zt)}else this.processOnEnd(F)},h.prototype.processOnEnd=function(F){var z=this,X=z.options,fe=z.manager.getIdentifier(F),Ae=z.nipples.get(fe),Se=z.manager.removeIdentifier(Ae.identifier);Ae&&(X.dataOnly||Ae.hide(function(){X.mode==="dynamic"&&(Ae.trigger("removed",Ae),z.trigger("removed "+Ae.id+":removed",Ae),z.manager.trigger("removed "+Ae.id+":removed",Ae),Ae.destroy())}),clearInterval(z.pressureIntervals[Ae.identifier]),Ae.resetDirection(),Ae.trigger("end",Ae),z.trigger("end "+Ae.id+":end",Ae),z.ids.indexOf(Ae.identifier)>=0&&z.ids.splice(z.ids.indexOf(Ae.identifier),1),z.actives.indexOf(Ae)>=0&&z.actives.splice(z.actives.indexOf(Ae),1),/(semi|static)/.test(X.mode)?z.idles.push(Ae):z.nipples.indexOf(Ae)>=0&&z.nipples.splice(z.nipples.indexOf(Ae),1),z.manager.unbindDocument(),/(semi|static)/.test(X.mode)&&(z.manager.ids[Se.id]=Se.identifier))},h.prototype.onDestroyed=function(F,z){this.nipples.indexOf(z)>=0&&this.nipples.splice(this.nipples.indexOf(z),1),this.actives.indexOf(z)>=0&&this.actives.splice(this.actives.indexOf(z),1),this.idles.indexOf(z)>=0&&this.idles.splice(this.idles.indexOf(z),1),this.ids.indexOf(z.identifier)>=0&&this.ids.splice(this.ids.indexOf(z.identifier),1),this.manager.removeIdentifier(z.identifier),this.manager.unbindDocument()},h.prototype.destroy=function(){for(var F in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(z){z.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(F)&&clearInterval(this.pressureIntervals[F]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var q=h;g.prototype=new Ee,g.constructor=g,g.prototype.prepareCollections=function(){var F=this;F.collections.create=F.create.bind(F),F.collections.on=F.on.bind(F),F.collections.off=F.off.bind(F),F.collections.destroy=F.destroy.bind(F),F.collections.get=function(z){var X;return F.collections.every(function(fe){return!(X=fe.get(z))}),X}},g.prototype.create=function(F){return this.createCollection(F)},g.prototype.createCollection=function(F){var z=new q(this,F);return this.bindCollection(z),this.collections.push(z),z},g.prototype.bindCollection=function(F){var z,X=this,fe=function(Ae,Se){z=Ae.type+" "+Se.id+":"+Ae.type,X.trigger(z,Se)};F.on("destroyed",X.onDestroyed.bind(X)),F.on("shown hidden rested dir plain",fe),F.on("dir:up dir:right dir:down dir:left",fe),F.on("plain:up plain:right plain:down plain:left",fe)},g.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},g.prototype.unbindDocument=function(F){Object.keys(this.ids).length&&F!==!0||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},g.prototype.getIdentifier=function(F){var z;return F?(z=F.identifier===void 0?F.pointerId:F.identifier)===void 0&&(z=this.latest||0):z=this.index,this.ids[z]===void 0&&(this.ids[z]=this.index,this.index+=1),this.latest=z,this.ids[z]},g.prototype.removeIdentifier=function(F){var z={};for(var X in this.ids)if(this.ids[X]===F){z.id=X,z.identifier=this.ids[X],delete this.ids[X];break}return z},g.prototype.onmove=function(F){return this.onAny("move",F),!1},g.prototype.onend=function(F){return this.onAny("end",F),!1},g.prototype.oncancel=function(F){return this.onAny("end",F),!1},g.prototype.onAny=function(F,z){var X,fe=this,Ae="processOn"+F.charAt(0).toUpperCase()+F.slice(1);return z=b(z),J(z,function(Se){X=fe.getIdentifier(Se),J(fe.collections,function(Be,Ge,ht){ht.ids.indexOf(Ge)>=0&&(ht[Ae](Be),Be._found_=!0)}.bind(null,Se,X)),Se._found_||fe.removeIdentifier(X)}),!1},g.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(F){F.destroy()}),this.off()},g.prototype.onDestroyed=function(F,z){if(this.collections.indexOf(z)<0)return!1;this.collections.splice(this.collections.indexOf(z),1)};var Q=new g;k.default={create:function(F){return Q.create(F)},factory:Q}}]).default})},{}],10:[function(u,T,W){var d=u("three");class k{static roundNumber(C,v){const y=Math.pow(10,v);return Math.round(C*y)/y}static sample(C){return C[Math.floor(Math.random()*C.length)]}static distanceToSquared(C,v){var y=C.x-v.x,E=C.y-v.y,_=C.z-v.z;return y*y+E*E+_*_}static isPointInPoly(C,v){for(var y=!1,E=-1,_=C.length,m=_-1;++E<_;m=E)(C[E].z<=v.z&&v.z<C[m].z||C[m].z<=v.z&&v.z<C[E].z)&&v.x<(C[m].x-C[E].x)*(v.z-C[E].z)/(C[m].z-C[E].z)+C[E].x&&(y=!y);return y}static isVectorInPolygon(C,v,y){var E=1e5,_=-1e5,m=[];return v.vertexIds.forEach(w=>{E=Math.min(y[w].y,E),_=Math.max(y[w].y,_),m.push(y[w])}),!!(C.y<_+.5&&C.y>E-.5&&this.isPointInPoly(m,C))}static triarea2(C,v,y){return(y.x-C.x)*(v.z-C.z)-(v.x-C.x)*(y.z-C.z)}static vequal(C,v){return this.distanceToSquared(C,v)<1e-5}static mergeVertices(C,v=1e-4){v=Math.max(v,Number.EPSILON);for(var y={},E=C.getIndex(),_=C.getAttribute("position"),m=E?E.count:_.count,w=0,b=[],O=[],R=Math.log10(1/v),L=Math.pow(10,R),P=0;P<m;P++){var Y=E?E.getX(P):P,J="";J+=~~(_.getX(Y)*L)+",",J+=~~(_.getY(Y)*L)+",",(J+=~~(_.getZ(Y)*L)+",")in y?b.push(y[J]):(O.push(_.getX(Y)),O.push(_.getY(Y)),O.push(_.getZ(Y)),y[J]=w,b.push(w),w++)}const j=new d.BufferAttribute(new Float32Array(O),_.itemSize,_.normalized),U=new d.BufferGeometry;return U.setAttribute("position",j),U.setIndex(b),U}}class K{constructor(C){this.content=[],this.scoreFunction=C}push(C){this.content.push(C),this.sinkDown(this.content.length-1)}pop(){const C=this.content[0],v=this.content.pop();return this.content.length>0&&(this.content[0]=v,this.bubbleUp(0)),C}remove(C){const v=this.content.indexOf(C),y=this.content.pop();v!==this.content.length-1&&(this.content[v]=y,this.scoreFunction(y)<this.scoreFunction(C)?this.sinkDown(v):this.bubbleUp(v))}size(){return this.content.length}rescoreElement(C){this.sinkDown(this.content.indexOf(C))}sinkDown(C){const v=this.content[C];for(;C>0;){const y=(C+1>>1)-1,E=this.content[y];if(!(this.scoreFunction(v)<this.scoreFunction(E)))break;this.content[y]=v,this.content[C]=E,C=y}}bubbleUp(C){const v=this.content.length,y=this.content[C],E=this.scoreFunction(y);for(;;){const _=C+1<<1,m=_-1;let w,b=null;if(m<v&&(w=this.scoreFunction(this.content[m]))<E&&(b=m),_<v&&this.scoreFunction(this.content[_])<(b===null?E:w)&&(b=_),b===null)break;this.content[C]=this.content[b],this.content[b]=y,C=b}}}class S{constructor(){this.portals=[]}push(C,v){v===void 0&&(v=C),this.portals.push({left:C,right:v})}stringPull(){const C=this.portals,v=[];let y,E,_,m=0,w=0,b=0;y=C[0].left,E=C[0].left,_=C[0].right,v.push(y);for(let O=1;O<C.length;O++){const R=C[O].left,L=C[O].right;if(k.triarea2(y,_,L)<=0){if(!(k.vequal(y,_)||k.triarea2(y,E,L)>0)){v.push(E),E=y=E,_=y,w=m=w,b=m,O=m;continue}_=L,b=O}if(k.triarea2(y,E,R)>=0){if(!(k.vequal(y,E)||k.triarea2(y,_,R)<0)){v.push(_),E=y=_,_=y,w=m=b,b=m,O=m;continue}E=R,w=O}}return v.length!==0&&k.vequal(v[v.length-1],C[C.length-1].left)||v.push(C[C.length-1].left),this.path=v,v}}class I{constructor(){this.zones={}}static createZone(C,v=1e-4){return class{static buildZone(y,E){const _=this._buildNavigationMesh(y,E),m={};_.vertices.forEach(b=>{b.x=k.roundNumber(b.x,2),b.y=k.roundNumber(b.y,2),b.z=k.roundNumber(b.z,2)}),m.vertices=_.vertices;const w=this._buildPolygonGroups(_);return m.groups=new Array(w.length),w.forEach((b,O)=>{const R=new Map;b.forEach((P,Y)=>{R.set(P,Y)});const L=new Array(b.length);b.forEach((P,Y)=>{const J=[];P.neighbours.forEach(te=>J.push(R.get(te)));const j=[];P.neighbours.forEach(te=>j.push(this._getSharedVerticesInOrder(P,te)));const U=new d.Vector3(0,0,0);U.add(m.vertices[P.vertexIds[0]]),U.add(m.vertices[P.vertexIds[1]]),U.add(m.vertices[P.vertexIds[2]]),U.divideScalar(3),U.x=k.roundNumber(U.x,2),U.y=k.roundNumber(U.y,2),U.z=k.roundNumber(U.z,2),L[Y]={id:Y,neighbours:J,vertexIds:P.vertexIds,centroid:U,portals:j}}),m.groups[O]=L}),m}static _buildNavigationMesh(y,E){return y=k.mergeVertices(y,E),this._buildPolygonsFromGeometry(y)}static _spreadGroupId(y){let E=new Set([y]);for(;E.size>0;){const _=E;E=new Set,_.forEach(m=>{m.group=y.group,m.neighbours.forEach(w=>{w.group===void 0&&E.add(w)})})}}static _buildPolygonGroups(y){const E=[];return y.polygons.forEach(_=>{_.group!==void 0?E[_.group].push(_):(_.group=E.length,this._spreadGroupId(_),E.push([_]))}),E}static _buildPolygonNeighbours(y,E){const _=new Set,m=E[y.vertexIds[1]],w=E[y.vertexIds[2]];return E[y.vertexIds[0]].forEach(b=>{b!==y&&(m.includes(b)||w.includes(b))&&_.add(b)}),m.forEach(b=>{b!==y&&w.includes(b)&&_.add(b)}),_}static _buildPolygonsFromGeometry(y){const E=[],_=[],m=y.attributes.position,w=y.index,b=[];for(let O=0;O<m.count;O++)_.push(new d.Vector3().fromBufferAttribute(m,O)),b[O]=[];for(let O=0;O<y.index.count;O+=3){const R=w.getX(O),L=w.getX(O+1),P=w.getX(O+2),Y={vertexIds:[R,L,P],neighbours:null};E.push(Y),b[R].push(Y),b[L].push(Y),b[P].push(Y)}return E.forEach(O=>{O.neighbours=this._buildPolygonNeighbours(O,b)}),{polygons:E,vertices:_}}static _getSharedVerticesInOrder(y,E){const _=y.vertexIds,m=_[0],w=_[1],b=_[2],O=E.vertexIds,R=O.includes(m),L=O.includes(w),P=O.includes(b);return R&&L&&P?Array.from(_):R&&L?[m,w]:L&&P?[w,b]:R&&P?[b,m]:(console.warn("Error processing navigation mesh neighbors; neighbors with <2 shared vertices found."),[])}}.buildZone(C,v)}setZoneData(C,v){this.zones[C]=v}getRandomNode(C,v,y,E){if(!this.zones[C])return new d.Vector3;y=y||null,E=E||0;const _=[];return this.zones[C].groups[v].forEach(m=>{y&&E?k.distanceToSquared(y,m.centroid)<E*E&&_.push(m.centroid):_.push(m.centroid)}),k.sample(_)||new d.Vector3}getClosestNode(C,v,y,E=!1){const _=this.zones[v].vertices;let m=null,w=1/0;return this.zones[v].groups[y].forEach(b=>{const O=k.distanceToSquared(b.centroid,C);O<w&&(!E||k.isVectorInPolygon(C,b,_))&&(m=b,w=O)}),m}findPath(C,v,y,E){const _=this.zones[y].groups[E],m=this.zones[y].vertices,w=this.getClosestNode(C,y,E,!0),b=this.getClosestNode(v,y,E,!0);if(!w||!b)return null;const O=class{static init(Y){for(let J=0;J<Y.length;J++){const j=Y[J];j.f=0,j.g=0,j.h=0,j.cost=1,j.visited=!1,j.closed=!1,j.parent=null}}static cleanUp(Y){for(let J=0;J<Y.length;J++){const j=Y[J];delete j.f,delete j.g,delete j.h,delete j.cost,delete j.visited,delete j.closed,delete j.parent}}static heap(){return new K(function(Y){return Y.f})}static search(Y,J,j){this.init(Y);const U=this.heap();for(U.push(J);U.size()>0;){const te=U.pop();if(te===j){let xe=te;const Ee=[];for(;xe.parent;)Ee.push(xe),xe=xe.parent;return this.cleanUp(Ee),Ee.reverse()}te.closed=!0;const ue=this.neighbours(Y,te);for(let xe=0,Ee=ue.length;xe<Ee;xe++){const V=ue[xe];if(V.closed)continue;const q=te.g+V.cost,Q=V.visited;if(!Q||q<V.g){if(V.visited=!0,V.parent=te,!V.centroid||!j.centroid)throw new Error("Unexpected state");V.h=V.h||this.heuristic(V.centroid,j.centroid),V.g=q,V.f=V.g+V.h,Q?U.rescoreElement(V):U.push(V)}}}return[]}static heuristic(Y,J){return k.distanceToSquared(Y,J)}static neighbours(Y,J){const j=[];for(let U=0;U<J.neighbours.length;U++)j.push(Y[J.neighbours[U]]);return j}}.search(_,w,b),R=function(Y,J){for(var j=0;j<Y.neighbours.length;j++)if(Y.neighbours[j]===J.id)return Y.portals[j]},L=new S;L.push(C);for(let Y=0;Y<O.length;Y++){const J=O[Y],j=O[Y+1];if(j){const U=R(J,j);L.push(m[U[0]],m[U[1]])}}L.push(v),L.stringPull();const P=L.path.map(Y=>new d.Vector3(Y.x,Y.y,Y.z));return P.shift(),P}}I.prototype.getGroup=function(){const g=new d.Plane;return function(C,v,y=!1){if(!this.zones[C])return null;let E=null,_=Math.pow(50,2);const m=this.zones[C];for(let w=0;w<m.groups.length;w++){const b=m.groups[w];for(const O of b){if(y&&(g.setFromCoplanarPoints(m.vertices[O.vertexIds[0]],m.vertices[O.vertexIds[1]],m.vertices[O.vertexIds[2]]),Math.abs(g.distanceToPoint(v))<.01)&&k.isPointInPoly([m.vertices[O.vertexIds[0]],m.vertices[O.vertexIds[1]],m.vertices[O.vertexIds[2]]],v))return w;const R=k.distanceToSquared(O.centroid,v);R<_&&(E=w,_=R)}}return E}}(),I.prototype.clampStep=function(){const g=new d.Vector3,C=new d.Plane,v=new d.Triangle,y=new d.Vector3;let E,_,m=new d.Vector3;return function(w,b,O,R,L,P){const Y=this.zones[R].vertices,J=this.zones[R].groups[L],j=[O],U={};U[O.id]=0,E=void 0,m.set(0,0,0),_=1/0,C.setFromCoplanarPoints(Y[O.vertexIds[0]],Y[O.vertexIds[1]],Y[O.vertexIds[2]]),C.projectPoint(b,g),y.copy(g);for(let te=j.pop();te;te=j.pop()){v.set(Y[te.vertexIds[0]],Y[te.vertexIds[1]],Y[te.vertexIds[2]]),v.closestPointToPoint(y,g),g.distanceToSquared(y)<_&&(E=te,m.copy(g),_=g.distanceToSquared(y));const ue=U[te.id];if(!(ue>2))for(let xe=0;xe<te.neighbours.length;xe++){const Ee=J[te.neighbours[xe]];Ee.id in U||(j.push(Ee),U[Ee.id]=ue+1)}}return P.copy(m),E}}();const h={PLAYER:new d.Color(15631215).convertSRGBToLinear().getHex(),TARGET:new d.Color(14469912).convertSRGBToLinear().getHex(),PATH:new d.Color(41903).convertSRGBToLinear().getHex(),WAYPOINT:new d.Color(41903).convertSRGBToLinear().getHex(),CLAMPED_STEP:new d.Color(14472114).convertSRGBToLinear().getHex(),CLOSEST_NODE:new d.Color(4417387).convertSRGBToLinear().getHex()};W.Pathfinding=I,W.PathfindingHelper=class extends d.Object3D{constructor(){super(),this._playerMarker=new d.Mesh(new d.SphereBufferGeometry(.25,32,32),new d.MeshBasicMaterial({color:h.PLAYER})),this._targetMarker=new d.Mesh(new d.BoxBufferGeometry(.3,.3,.3),new d.MeshBasicMaterial({color:h.TARGET})),this._nodeMarker=new d.Mesh(new d.BoxBufferGeometry(.1,.8,.1),new d.MeshBasicMaterial({color:h.CLOSEST_NODE})),this._stepMarker=new d.Mesh(new d.BoxBufferGeometry(.1,1,.1),new d.MeshBasicMaterial({color:h.CLAMPED_STEP})),this._pathMarker=new d.Object3D,this._pathLineMaterial=new d.LineBasicMaterial({color:h.PATH,linewidth:2}),this._pathPointMaterial=new d.MeshBasicMaterial({color:h.WAYPOINT}),this._pathPointGeometry=new d.SphereBufferGeometry(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(g=>{g.visible=!1,this.add(g)})}setPath(g){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);g=[this._playerMarker.position].concat(g);const C=new d.BufferGeometry;C.setAttribute("position",new d.BufferAttribute(new Float32Array(3*g.length),3));for(let v=0;v<g.length;v++)C.attributes.position.setXYZ(v,g[v].x,g[v].y+.2,g[v].z);this._pathMarker.add(new d.Line(C,this._pathLineMaterial));for(let v=0;v<g.length-1;v++){const y=new d.Mesh(this._pathPointGeometry,this._pathPointMaterial);y.position.copy(g[v]),y.position.y+=.2,this._pathMarker.add(y)}return this._pathMarker.visible=!0,this}setPlayerPosition(g){return this._playerMarker.position.copy(g),this._playerMarker.visible=!0,this}setTargetPosition(g){return this._targetMarker.position.copy(g),this._targetMarker.visible=!0,this}setNodePosition(g){return this._nodeMarker.position.copy(g),this._nodeMarker.visible=!0,this}setStepPosition(g){return this._stepMarker.position.copy(g),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(g=>{g.visible=!1}),this}}},{three:11}],11:[function(u,T,W){(function(d,k){typeof W=="object"&&T!==void 0?k(W):(d=typeof globalThis<"u"?globalThis:d||self,k(d.THREE={}))})(this,function(d){function k(){}function K(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?Uc.getDataURL(s):s.data?{data:Array.prototype.slice.call(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}function S(s,t,i,o,l){for(let f=0,B=s.length-3;f<=B;f+=3){bu.fromArray(s,f);const M=l.x*Math.abs(bu.x)+l.y*Math.abs(bu.y)+l.z*Math.abs(bu.z),D=t.dot(bu),G=i.dot(bu),$=o.dot(bu);if(Math.max(-Math.max(D,G,$),Math.min(D,G,$))>M)return!1}return!0}function I(){Object.defineProperty(this,"id",{value:tv++}),this.uuid=qi.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=I.DefaultUp.clone();const s=new Je,t=new wu,i=new To,o=new Je(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:s},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ir},normalMatrix:{value:new cs}}),this.matrix=new ir,this.matrixWorld=new ir,this.matrixAutoUpdate=I.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Im,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}function h(){Object.defineProperty(this,"id",{value:av++}),this.uuid=qi.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Wa,this.side=Ns,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=pd,this.blendDst=La,this.blendEquation=nc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Fl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Yi,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jf,this.stencilZFail=Jf,this.stencilZPass=Jf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function g(s,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?s+6*(t-s)*i:i<.5?t:i<2/3?s+6*(t-s)*(2/3-i):s}function C(s){return s<.04045?.0773993808*s:Math.pow(.9478672986*s+.0521327014,2.4)}function v(s){return s<.0031308?12.92*s:1.055*Math.pow(s,.41666)-.055}function y(s,t,i){if(Array.isArray(s))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=s,this.itemSize=t,this.count=s!==void 0?s.length/t:0,this.normalized=i===!0,this.usage=yh,this.updateRange={offset:0,count:-1},this.version=0}function E(s,t,i){y.call(this,new Int8Array(s),t,i)}function _(s,t,i){y.call(this,new Uint8Array(s),t,i)}function m(s,t,i){y.call(this,new Uint8ClampedArray(s),t,i)}function w(s,t,i){y.call(this,new Int16Array(s),t,i)}function b(s,t,i){y.call(this,new Uint16Array(s),t,i)}function O(s,t,i){y.call(this,new Int32Array(s),t,i)}function R(s,t,i){y.call(this,new Uint32Array(s),t,i)}function L(s,t,i){y.call(this,new Uint16Array(s),t,i)}function P(s,t,i){y.call(this,new Float32Array(s),t,i)}function Y(s,t,i){y.call(this,new Float64Array(s),t,i)}function J(s){if(s.length===0)return-1/0;let t=s[0];for(let i=1,o=s.length;i<o;++i)s[i]>t&&(t=s[i]);return t}function j(s,t){return new lv[s](t)}function U(){Object.defineProperty(this,"id",{value:cv++}),this.uuid=qi.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function te(s=new U,t=new xc){I.call(this),this.type="Mesh",this.geometry=s,this.material=t,this.updateMorphTargets()}function ue(s,t,i,o,l,f,B,M,D,G,$,ie){Qc.fromBufferAttribute(l,G),jc.fromBufferAttribute(l,$),Wc.fromBufferAttribute(l,ie);const oe=s.morphTargetInfluences;if(t.morphTargets&&f&&oe){rp.set(0,0,0),sp.set(0,0,0),op.set(0,0,0);for(let ye=0,we=f.length;ye<we;ye++){const be=oe[ye],ke=f[ye];be!==0&&(Nm.fromBufferAttribute(ke,G),km.fromBufferAttribute(ke,$),Um.fromBufferAttribute(ke,ie),B?(rp.addScaledVector(Nm,be),sp.addScaledVector(km,be),op.addScaledVector(Um,be)):(rp.addScaledVector(Nm.sub(Qc),be),sp.addScaledVector(km.sub(jc),be),op.addScaledVector(Um.sub(Wc),be)))}Qc.add(rp),jc.add(sp),Wc.add(op)}s.isSkinnedMesh&&t.skinning&&(s.boneTransform(G,Qc),s.boneTransform($,jc),s.boneTransform(ie,Wc));const he=function(ye,we,be,ke,Xe,it,lt,pt){if((we.side===Js?ke.intersectTriangle(lt,it,Xe,!0,pt):ke.intersectTriangle(Xe,it,lt,we.side!==fu,pt))===null)return null;up.copy(pt),up.applyMatrix4(ye.matrixWorld);const mt=be.ray.origin.distanceTo(up);return mt<be.near||mt>be.far?null:{distance:mt,point:up.clone(),object:ye}}(s,t,i,o,Qc,jc,Wc,Gm);if(he){M&&(ap.fromBufferAttribute(M,G),lp.fromBufferAttribute(M,$),cp.fromBufferAttribute(M,ie),he.uv=vo.getUV(Gm,Qc,jc,Wc,ap,lp,cp,new Qn)),D&&(ap.fromBufferAttribute(D,G),lp.fromBufferAttribute(D,$),cp.fromBufferAttribute(D,ie),he.uv2=vo.getUV(Gm,Qc,jc,Wc,ap,lp,cp,new Qn));const ye={a:G,b:$,c:ie,normal:new Je,materialIndex:0};vo.getNormal(Qc,jc,Wc,ye.normal),he.face=ye}return he}function xe(s){const t={};for(const i in s){t[i]={};for(const o in s[i]){const l=s[i][o];l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?t[i][o]=l.clone():Array.isArray(l)?t[i][o]=l.slice():t[i][o]=l}}return t}function Ee(s){const t={};for(let i=0;i<s.length;i++){const o=xe(s[i]);for(const l in o)t[l]=o[l]}return t}function V(s){h.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=uv,this.fragmentShader=hv,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,s!==void 0&&(s.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(s))}function q(){I.call(this),this.type="Camera",this.matrixWorldInverse=new ir,this.projectionMatrix=new ir,this.projectionMatrixInverse=new ir}function Q(s=50,t=1,i=.1,o=2e3){q.call(this),this.type="PerspectiveCamera",this.fov=s,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function F(){function s(f,B){o(f,B),l=t.requestAnimationFrame(s)}let t=null,i=!1,o=null,l=null;return{start:function(){i!==!0&&o!==null&&(l=t.requestAnimationFrame(s),i=!0)},stop:function(){t.cancelAnimationFrame(l),i=!1},setAnimationLoop:function(f){o=f},setContext:function(f){t=f}}}function z(s,t){const i=t.isWebGL2,o=new WeakMap;return{get:function(l){return l.isInterleavedBufferAttribute&&(l=l.data),o.get(l)},remove:function(l){l.isInterleavedBufferAttribute&&(l=l.data);const f=o.get(l);f&&(s.deleteBuffer(f.buffer),o.delete(l))},update:function(l,f){if(l.isGLBufferAttribute){const M=o.get(l);return void((!M||M.version<l.version)&&o.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const B=o.get(l);B===void 0?o.set(l,function(M,D){const G=M.array,$=M.usage,ie=s.createBuffer();s.bindBuffer(D,ie),s.bufferData(D,G,$),M.onUploadCallback();let oe=s.FLOAT;return G instanceof Float32Array?oe=s.FLOAT:G instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):G instanceof Uint16Array?M.isFloat16BufferAttribute?i?oe=s.HALF_FLOAT:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):oe=s.UNSIGNED_SHORT:G instanceof Int16Array?oe=s.SHORT:G instanceof Uint32Array?oe=s.UNSIGNED_INT:G instanceof Int32Array?oe=s.INT:G instanceof Int8Array?oe=s.BYTE:G instanceof Uint8Array&&(oe=s.UNSIGNED_BYTE),{buffer:ie,type:oe,bytesPerElement:G.BYTES_PER_ELEMENT,version:M.version}}(l,f)):B.version<l.version&&(function(M,D,G){const $=D.array,ie=D.updateRange;s.bindBuffer(G,M),ie.count===-1?s.bufferSubData(G,0,$):(i?s.bufferSubData(G,ie.offset*$.BYTES_PER_ELEMENT,$,ie.offset,ie.count):s.bufferSubData(G,ie.offset*$.BYTES_PER_ELEMENT,$.subarray(ie.offset,ie.offset+ie.count)),ie.count=-1)}(B.buffer,l,f),B.version=l.version)}}}function X(s,t,i,o){function l(lt){return o.isWebGL2?s.bindVertexArray(lt):we.bindVertexArrayOES(lt)}function f(lt){return o.isWebGL2?s.deleteVertexArray(lt):we.deleteVertexArrayOES(lt)}function B(lt){const pt=[],mt=[],ot=[];for(let kt=0;kt<ye;kt++)pt[kt]=0,mt[kt]=0,ot[kt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:pt,enabledAttributes:mt,attributeDivisors:ot,object:lt,attributes:{},index:null}}function M(){const lt=it.newAttributes;for(let pt=0,mt=lt.length;pt<mt;pt++)lt[pt]=0}function D(lt){G(lt,0)}function G(lt,pt){const mt=it.newAttributes,ot=it.enabledAttributes,kt=it.attributeDivisors;mt[lt]=1,ot[lt]===0&&(s.enableVertexAttribArray(lt),ot[lt]=1),kt[lt]!==pt&&((o.isWebGL2?s:t.get("ANGLE_instanced_arrays"))[o.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](lt,pt),kt[lt]=pt)}function $(){const lt=it.newAttributes,pt=it.enabledAttributes;for(let mt=0,ot=pt.length;mt<ot;mt++)pt[mt]!==lt[mt]&&(s.disableVertexAttribArray(mt),pt[mt]=0)}function ie(lt,pt,mt,ot,kt,gt){o.isWebGL2!==!0||mt!==s.INT&&mt!==s.UNSIGNED_INT?s.vertexAttribPointer(lt,pt,mt,ot,kt,gt):s.vertexAttribIPointer(lt,pt,mt,kt,gt)}function oe(){he(),it!==Xe&&l((it=Xe).object)}function he(){Xe.geometry=null,Xe.program=null,Xe.wireframe=!1}const ye=s.getParameter(s.MAX_VERTEX_ATTRIBS),we=o.isWebGL2?null:t.get("OES_vertex_array_object"),be=o.isWebGL2||we!==null,ke={},Xe=B(null);let it=Xe;return{setup:function(lt,pt,mt,ot,kt){let gt=!1;if(be){const Ht=function(Zt,Qt,en){const Wn=en.wireframe===!0;let ii=ke[Zt.id];ii===void 0&&(ii={},ke[Zt.id]=ii);let lr=ii[Qt.id];lr===void 0&&(lr={},ii[Qt.id]=lr);let oi=lr[Wn];return oi===void 0&&(oi=B(o.isWebGL2?s.createVertexArray():we.createVertexArrayOES()),lr[Wn]=oi),oi}(ot,mt,pt);it!==Ht&&l((it=Ht).object),(gt=function(Zt,Qt){const en=it.attributes,Wn=Zt.attributes;let ii=0;for(const lr in Wn){const oi=en[lr],qn=Wn[lr];if(oi===void 0||oi.attribute!==qn||oi.data!==qn.data)return!0;ii++}return it.attributesNum!==ii||it.index!==Qt}(ot,kt))&&function(Zt,Qt){const en={},Wn=Zt.attributes;let ii=0;for(const lr in Wn){const oi=Wn[lr],qn={};qn.attribute=oi,oi.data&&(qn.data=oi.data),en[lr]=qn,ii++}it.attributes=en,it.attributesNum=ii,it.index=Qt}(ot,kt)}else{const Ht=pt.wireframe===!0;it.geometry===ot.id&&it.program===mt.id&&it.wireframe===Ht||(it.geometry=ot.id,it.program=mt.id,it.wireframe=Ht,gt=!0)}lt.isInstancedMesh===!0&&(gt=!0),kt!==null&&i.update(kt,s.ELEMENT_ARRAY_BUFFER),gt&&(function(Ht,Zt,Qt,en){if(o.isWebGL2===!1&&(Ht.isInstancedMesh||en.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;M();const Wn=en.attributes,ii=Qt.getAttributes(),lr=Zt.defaultAttributeValues;for(const oi in ii){const qn=ii[oi];if(qn>=0){const $i=Wn[oi];if($i!==void 0){const Ji=$i.normalized,qr=$i.itemSize,Tt=i.get($i);if(Tt===void 0)continue;const Mt=Tt.buffer,Yn=Tt.type,Cn=Tt.bytesPerElement;if($i.isInterleavedBufferAttribute){const zn=$i.data,hr=zn.stride,Fn=$i.offset;zn&&zn.isInstancedInterleavedBuffer?(G(qn,zn.meshPerAttribute),en._maxInstanceCount===void 0&&(en._maxInstanceCount=zn.meshPerAttribute*zn.count)):D(qn),s.bindBuffer(s.ARRAY_BUFFER,Mt),ie(qn,qr,Yn,Ji,hr*Cn,Fn*Cn)}else $i.isInstancedBufferAttribute?(G(qn,$i.meshPerAttribute),en._maxInstanceCount===void 0&&(en._maxInstanceCount=$i.meshPerAttribute*$i.count)):D(qn),s.bindBuffer(s.ARRAY_BUFFER,Mt),ie(qn,qr,Yn,Ji,0,0)}else if(oi==="instanceMatrix"){const Ji=i.get(Ht.instanceMatrix);if(Ji===void 0)continue;const qr=Ji.buffer,Tt=Ji.type;G(qn+0,1),G(qn+1,1),G(qn+2,1),G(qn+3,1),s.bindBuffer(s.ARRAY_BUFFER,qr),s.vertexAttribPointer(qn+0,4,Tt,!1,64,0),s.vertexAttribPointer(qn+1,4,Tt,!1,64,16),s.vertexAttribPointer(qn+2,4,Tt,!1,64,32),s.vertexAttribPointer(qn+3,4,Tt,!1,64,48)}else if(oi==="instanceColor"){const Ji=i.get(Ht.instanceColor);if(Ji===void 0)continue;const qr=Ji.buffer,Tt=Ji.type;G(qn,1),s.bindBuffer(s.ARRAY_BUFFER,qr),s.vertexAttribPointer(qn,3,Tt,!1,12,0)}else if(lr!==void 0){const Ji=lr[oi];if(Ji!==void 0)switch(Ji.length){case 2:s.vertexAttrib2fv(qn,Ji);break;case 3:s.vertexAttrib3fv(qn,Ji);break;case 4:s.vertexAttrib4fv(qn,Ji);break;default:s.vertexAttrib1fv(qn,Ji)}}}}$()}(lt,pt,mt,ot),kt!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,i.get(kt).buffer))},reset:oe,resetDefaultState:he,dispose:function(){oe();for(const lt in ke){const pt=ke[lt];for(const mt in pt){const ot=pt[mt];for(const kt in ot)f(ot[kt].object),delete ot[kt];delete pt[mt]}delete ke[lt]}},releaseStatesOfGeometry:function(lt){if(ke[lt.id]===void 0)return;const pt=ke[lt.id];for(const mt in pt){const ot=pt[mt];for(const kt in ot)f(ot[kt].object),delete ot[kt];delete pt[mt]}delete ke[lt.id]},releaseStatesOfProgram:function(lt){for(const pt in ke){const mt=ke[pt];if(mt[lt.id]===void 0)continue;const ot=mt[lt.id];for(const kt in ot)f(ot[kt].object),delete ot[kt];delete mt[lt.id]}},initAttributes:M,enableAttribute:D,disableUnusedAttributes:$}}function fe(s,t){return s[0]-t[0]}function Ae(s,t){return Math.abs(t[1])-Math.abs(s[1])}function Se(s,t,i){const o=s[0];if(o<=0||o>0)return s;const l=t*i;let f=w0[l];if(f===void 0&&(f=new Float32Array(l),w0[l]=f),t!==0){o.toArray(f,0);for(let B=1,M=0;B!==t;++B)M+=i,s[B].toArray(f,M)}return f}function Be(s,t){if(s.length!==t.length)return!1;for(let i=0,o=s.length;i<o;i++)if(s[i]!==t[i])return!1;return!0}function Ge(s,t){for(let i=0,o=t.length;i<o;i++)s[i]=t[i]}function ht(s,t){let i=C0[t];i===void 0&&(i=new Int32Array(t),C0[t]=i);for(let o=0;o!==t;++o)i[o]=s.allocateTextureUnit();return i}function xt(s,t){const i=this.cache;i[0]!==t&&(s.uniform1f(this.addr,t),i[0]=t)}function at(s,t){const i=this.cache;if(t.x!==void 0)i[0]===t.x&&i[1]===t.y||(s.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Be(i,t))return;s.uniform2fv(this.addr,t),Ge(i,t)}}function Gt(s,t){const i=this.cache;if(t.x!==void 0)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(s.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(s.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Be(i,t))return;s.uniform3fv(this.addr,t),Ge(i,t)}}function wt(s,t){const i=this.cache;if(t.x!==void 0)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(s.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Be(i,t))return;s.uniform4fv(this.addr,t),Ge(i,t)}}function Yt(s,t){const i=this.cache,o=t.elements;if(o===void 0){if(Be(i,t))return;s.uniformMatrix2fv(this.addr,!1,t),Ge(i,t)}else{if(Be(i,o))return;S0.set(o),s.uniformMatrix2fv(this.addr,!1,S0),Ge(i,o)}}function Mn(s,t){const i=this.cache,o=t.elements;if(o===void 0){if(Be(i,t))return;s.uniformMatrix3fv(this.addr,!1,t),Ge(i,t)}else{if(Be(i,o))return;T0.set(o),s.uniformMatrix3fv(this.addr,!1,T0),Ge(i,o)}}function je(s,t){const i=this.cache,o=t.elements;if(o===void 0){if(Be(i,t))return;s.uniformMatrix4fv(this.addr,!1,t),Ge(i,t)}else{if(Be(i,o))return;M0.set(o),s.uniformMatrix4fv(this.addr,!1,M0),Ge(i,o)}}function rt(s,t){const i=this.cache;i[0]!==t&&(s.uniform1i(this.addr,t),i[0]=t)}function At(s,t){const i=this.cache;Be(i,t)||(s.uniform2iv(this.addr,t),Ge(i,t))}function Bt(s,t){const i=this.cache;Be(i,t)||(s.uniform3iv(this.addr,t),Ge(i,t))}function Pt(s,t){const i=this.cache;Be(i,t)||(s.uniform4iv(this.addr,t),Ge(i,t))}function qt(s,t){const i=this.cache;i[0]!==t&&(s.uniform1ui(this.addr,t),i[0]=t)}function un(s,t){const i=this.cache;Be(i,t)||(s.uniform2uiv(this.addr,t),Ge(i,t))}function dn(s,t){const i=this.cache;Be(i,t)||(s.uniform3uiv(this.addr,t),Ge(i,t))}function bn(s,t){const i=this.cache;Be(i,t)||(s.uniform4uiv(this.addr,t),Ge(i,t))}function tn(s,t,i){const o=this.cache,l=i.allocateTextureUnit();o[0]!==l&&(s.uniform1i(this.addr,l),o[0]=l),i.safeSetTexture2D(t||b0,l)}function ri(s,t,i){const o=this.cache,l=i.allocateTextureUnit();o[0]!==l&&(s.uniform1i(this.addr,l),o[0]=l),i.setTexture3D(t||fv,l)}function ni(s,t,i){const o=this.cache,l=i.allocateTextureUnit();o[0]!==l&&(s.uniform1i(this.addr,l),o[0]=l),i.safeSetTextureCube(t||_0,l)}function zt(s,t,i){const o=this.cache,l=i.allocateTextureUnit();o[0]!==l&&(s.uniform1i(this.addr,l),o[0]=l),i.setTexture2DArray(t||dv,l)}function Ue(s,t){s.uniform1fv(this.addr,t)}function Pe(s,t){const i=Se(t,this.size,2);s.uniform2fv(this.addr,i)}function Ye(s,t){const i=Se(t,this.size,3);s.uniform3fv(this.addr,i)}function ze(s,t){const i=Se(t,this.size,4);s.uniform4fv(this.addr,i)}function He(s,t){const i=Se(t,this.size,4);s.uniformMatrix2fv(this.addr,!1,i)}function et(s,t){const i=Se(t,this.size,9);s.uniformMatrix3fv(this.addr,!1,i)}function Me(s,t){const i=Se(t,this.size,16);s.uniformMatrix4fv(this.addr,!1,i)}function Te(s,t){s.uniform1iv(this.addr,t)}function Oe(s,t){s.uniform2iv(this.addr,t)}function Ze(s,t){s.uniform3iv(this.addr,t)}function ae(s,t){s.uniform4iv(this.addr,t)}function ee(s,t){s.uniform1uiv(this.addr,t)}function se(s,t){s.uniform2uiv(this.addr,t)}function Ie(s,t){s.uniform3uiv(this.addr,t)}function We(s,t){s.uniform4uiv(this.addr,t)}function Ke(s,t,i){const o=t.length,l=ht(i,o);s.uniform1iv(this.addr,l);for(let f=0;f!==o;++f)i.safeSetTexture2D(t[f]||b0,l[f])}function $e(s,t,i){const o=t.length,l=ht(i,o);s.uniform1iv(this.addr,l);for(let f=0;f!==o;++f)i.safeSetTextureCube(t[f]||_0,l[f])}function Vt(s,t,i){this.id=s,this.addr=i,this.cache=[],this.setValue=function(o){switch(o){case 5126:return xt;case 35664:return at;case 35665:return Gt;case 35666:return wt;case 35674:return Yt;case 35675:return Mn;case 35676:return je;case 5124:case 35670:return rt;case 35667:case 35671:return At;case 35668:case 35672:return Bt;case 35669:case 35673:return Pt;case 5125:return qt;case 36294:return un;case 36295:return dn;case 36296:return bn;case 35678:case 36198:case 36298:case 36306:case 35682:return tn;case 35679:case 36299:case 36307:return ri;case 35680:case 36300:case 36308:case 36293:return ni;case 36289:case 36303:case 36311:case 36292:return zt}}(t.type)}function $t(s,t,i){this.id=s,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(o){switch(o){case 5126:return Ue;case 35664:return Pe;case 35665:return Ye;case 35666:return ze;case 35674:return He;case 35675:return et;case 35676:return Me;case 5124:case 35670:return Te;case 35667:case 35671:return Oe;case 35668:case 35672:return Ze;case 35669:case 35673:return ae;case 5125:return ee;case 36294:return se;case 36295:return Ie;case 36296:return We;case 35678:case 36198:case 36298:case 36306:case 35682:return Ke;case 35680:case 36300:case 36308:case 36293:return $e}}(t.type)}function Xt(s){this.id=s,this.seq=[],this.map={}}function jt(s,t){s.seq.push(t),s.map[t.id]=t}function on(s,t,i){const o=s.name,l=o.length;for(Vm.lastIndex=0;;){const f=Vm.exec(o),B=Vm.lastIndex;let M=f[1];const D=f[2]==="]",G=f[3];if(D&&(M|=0),G===void 0||G==="["&&B+2===l){jt(i,G===void 0?new Vt(M,s,t):new $t(M,s,t));break}{let $=i.map[M];$===void 0&&jt(i,$=new Xt(M)),i=$}}}function In(s,t){this.seq=[],this.map={};const i=s.getProgramParameter(t,s.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const l=s.getActiveUniform(t,o);on(l,s.getUniformLocation(t,l.name),this)}}function di(s,t,i){const o=s.createShader(t);return s.shaderSource(o,i),s.compileShader(o),o}function fi(s){switch(s){case lo:return["Linear","( value )"];case Zs:return["sRGB","( value )"];case Rs:return["RGBE","( value )"];case _m:return["RGBM","( value, 7.0 )"];case wm:return["RGBM","( value, 16.0 )"];case Cm:return["RGBD","( value, 256.0 )"];case yu:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case u0:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",s),["Linear","( value )"]}}function Nn(s,t,i){const o=s.getShaderParameter(t,s.COMPILE_STATUS),l=s.getShaderInfoLog(t).trim();return o&&l===""?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+i+`
`+l+function(f){const B=f.split(`
`);for(let M=0;M<B.length;M++)B[M]=M+1+": "+B[M];return B.join(`
`)}(s.getShaderSource(t))}function vn(s,t){const i=fi(t);return"vec4 "+s+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Ft(s){return s!==""}function yn(s,t){return s.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Gn(s,t){return s.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Dn(s){return s.replace(mv,bi)}function bi(s,t){const i=ns[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return Dn(i)}function Pi(s){return s.replace(Av,Dr).replace(gv,Zi)}function Zi(s,t,i,o){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Dr(s,t,i,o)}function Dr(s,t,i,o){let l="";for(let f=parseInt(t);f<parseInt(i);f++)l+=o.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return l}function Ki(s){let t="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?t+=`
#define HIGH_PRECISION`:s.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function zr(s,t,i,o){const l=s.getContext(),f=i.defines;let B=i.vertexShader,M=i.fragmentShader;const D=function(gt){let Ht="SHADOWMAP_TYPE_BASIC";return gt.shadowMapType===al?Ht="SHADOWMAP_TYPE_PCF":gt.shadowMapType===Pc?Ht="SHADOWMAP_TYPE_PCF_SOFT":gt.shadowMapType===Co&&(Ht="SHADOWMAP_TYPE_VSM"),Ht}(i),G=function(gt){let Ht="ENVMAP_TYPE_CUBE";if(gt.envMap)switch(gt.envMapMode){case Da:case sc:Ht="ENVMAP_TYPE_CUBE";break;case es:case ko:Ht="ENVMAP_TYPE_CUBE_UV"}return Ht}(i),$=function(gt){let Ht="ENVMAP_MODE_REFLECTION";if(gt.envMap)switch(gt.envMapMode){case sc:case ko:Ht="ENVMAP_MODE_REFRACTION"}return Ht}(i),ie=function(gt){let Ht="ENVMAP_BLENDING_NONE";if(gt.envMap)switch(gt.combine){case Oc:Ht="ENVMAP_BLENDING_MULTIPLY";break;case so:Ht="ENVMAP_BLENDING_MIX";break;case ya:Ht="ENVMAP_BLENDING_ADD"}return Ht}(i),oe=s.gammaFactor>0?s.gammaFactor:1,he=i.isWebGL2?"":function(gt){return[gt.extensionDerivatives||gt.envMapCubeUV||gt.bumpMap||gt.tangentSpaceNormalMap||gt.clearcoatNormalMap||gt.flatShading||gt.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(gt.extensionFragDepth||gt.logarithmicDepthBuffer)&&gt.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",gt.extensionDrawBuffers&&gt.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(gt.extensionShaderTextureLOD||gt.envMap)&&gt.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ft).join(`
`)}(i),ye=function(gt){const Ht=[];for(const Zt in gt){const Qt=gt[Zt];Qt!==!1&&Ht.push("#define "+Zt+" "+Qt)}return Ht.join(`
`)}(f),we=l.createProgram();let be,ke,Xe=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?((be=[ye].filter(Ft).join(`
`)).length>0&&(be+=`
`),(ke=[he,ye].filter(Ft).join(`
`)).length>0&&(ke+=`
`)):(be=[Ki(i),"#define SHADER_NAME "+i.shaderName,ye,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+oe,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+$:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+D:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ft).join(`
`),ke=[he,Ki(i),"#define SHADER_NAME "+i.shaderName,ye,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+oe,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+G:"",i.envMap?"#define "+$:"",i.envMap?"#define "+ie:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+D:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Ka?"#define TONE_MAPPING":"",i.toneMapping!==Ka?ns.tonemapping_pars_fragment:"",i.toneMapping!==Ka?function(gt,Ht){let Zt;switch(Ht){case hh:Zt="Linear";break;case gu:Zt="Reinhard";break;case Si:Zt="OptimizedCineon";break;case rc:Zt="ACESFilmic";break;case dh:Zt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",Ht),Zt="Linear"}return"vec3 "+gt+"( vec3 color ) { return "+Zt+"ToneMapping( color ); }"}("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",ns.encodings_pars_fragment,i.map?vn("mapTexelToLinear",i.mapEncoding):"",i.matcap?vn("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?vn("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?vn("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?vn("lightMapTexelToLinear",i.lightMapEncoding):"",function(gt,Ht){const Zt=fi(Ht);return"vec4 "+gt+"( vec4 value ) { return LinearTo"+Zt[0]+Zt[1]+"; }"}("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(Ft).join(`
`)),B=Gn(B=yn(B=Dn(B),i),i),M=Gn(M=yn(M=Dn(M),i),i),B=Pi(B),M=Pi(M),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(Xe=`#version 300 es
`,be=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+be,ke=["#define varying in",i.glslVersion===wa?"":"out highp vec4 pc_fragColor;",i.glslVersion===wa?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ke);const it=Xe+be+B,lt=Xe+ke+M,pt=di(l,l.VERTEX_SHADER,it),mt=di(l,l.FRAGMENT_SHADER,lt);if(l.attachShader(we,pt),l.attachShader(we,mt),i.index0AttributeName!==void 0?l.bindAttribLocation(we,0,i.index0AttributeName):i.morphTargets===!0&&l.bindAttribLocation(we,0,"position"),l.linkProgram(we),s.debug.checkShaderErrors){const gt=l.getProgramInfoLog(we).trim(),Ht=l.getShaderInfoLog(pt).trim(),Zt=l.getShaderInfoLog(mt).trim();let Qt=!0,en=!0;if(l.getProgramParameter(we,l.LINK_STATUS)===!1){Qt=!1;const Wn=Nn(l,pt,"vertex"),ii=Nn(l,mt,"fragment");console.error("THREE.WebGLProgram: shader error: ",l.getError(),"gl.VALIDATE_STATUS",l.getProgramParameter(we,l.VALIDATE_STATUS),"gl.getProgramInfoLog",gt,Wn,ii)}else gt!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",gt):Ht!==""&&Zt!==""||(en=!1);en&&(this.diagnostics={runnable:Qt,programLog:gt,vertexShader:{log:Ht,prefix:be},fragmentShader:{log:Zt,prefix:ke}})}l.deleteShader(pt),l.deleteShader(mt);let ot;this.getUniforms=function(){return ot===void 0&&(ot=new In(l,we)),ot};let kt;return this.getAttributes=function(){return kt===void 0&&(kt=function(gt,Ht){const Zt={},Qt=gt.getProgramParameter(Ht,gt.ACTIVE_ATTRIBUTES);for(let en=0;en<Qt;en++){const Wn=gt.getActiveAttrib(Ht,en).name;Zt[Wn]=gt.getAttribLocation(Ht,Wn)}return Zt}(l,we)),kt},this.destroy=function(){o.releaseStatesOfProgram(this),l.deleteProgram(we),this.program=void 0},this.name=i.shaderName,this.id=pv++,this.cacheKey=t,this.usedTimes=1,this.program=we,this.vertexShader=pt,this.fragmentShader=mt,this}function Pr(s,t,i,o,l,f){function B(be){let ke;return be&&be.isTexture?ke=be.encoding:be&&be.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ke=be.texture.encoding):ke=lo,ke}const M=[],D=o.isWebGL2,G=o.logarithmicDepthBuffer,$=o.floatVertexTextures,ie=o.maxVertexUniforms,oe=o.vertexTextures;let he=o.precision;const ye={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},we=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];return{getParameters:function(be,ke,Xe,it,lt){const pt=it.fog,mt=be.isMeshStandardMaterial?it.environment:null,ot=t.get(be.envMap||mt),kt=ye[be.type],gt=lt.isSkinnedMesh?function(en){const Wn=en.skeleton.bones;if($)return 1024;{const ii=ie,lr=Math.floor((ii-20)/4),oi=Math.min(lr,Wn.length);return oi<Wn.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Wn.length+" bones. This GPU supports "+oi+"."),0):oi}}(lt):0;be.precision!==null&&(he=o.getMaxPrecision(be.precision))!==be.precision&&console.warn("THREE.WebGLProgram.getParameters:",be.precision,"not supported, using",he,"instead.");let Ht,Zt;if(kt){const en=gl[kt];Ht=en.vertexShader,Zt=en.fragmentShader}else Ht=be.vertexShader,Zt=be.fragmentShader;const Qt=s.getRenderTarget();return{isWebGL2:D,shaderID:kt,shaderName:be.type,vertexShader:Ht,fragmentShader:Zt,defines:be.defines,isRawShaderMaterial:be.isRawShaderMaterial===!0,glslVersion:be.glslVersion,precision:he,instancing:lt.isInstancedMesh===!0,instancingColor:lt.isInstancedMesh===!0&&lt.instanceColor!==null,supportsVertexTextures:oe,outputEncoding:Qt!==null?B(Qt.texture):s.outputEncoding,map:!!be.map,mapEncoding:B(be.map),matcap:!!be.matcap,matcapEncoding:B(be.matcap),envMap:!!ot,envMapMode:ot&&ot.mapping,envMapEncoding:B(ot),envMapCubeUV:!!ot&&(ot.mapping===es||ot.mapping===ko),lightMap:!!be.lightMap,lightMapEncoding:B(be.lightMap),aoMap:!!be.aoMap,emissiveMap:!!be.emissiveMap,emissiveMapEncoding:B(be.emissiveMap),bumpMap:!!be.bumpMap,normalMap:!!be.normalMap,objectSpaceNormalMap:be.normalMapType===qf,tangentSpaceNormalMap:be.normalMapType===xu,clearcoatMap:!!be.clearcoatMap,clearcoatRoughnessMap:!!be.clearcoatRoughnessMap,clearcoatNormalMap:!!be.clearcoatNormalMap,displacementMap:!!be.displacementMap,roughnessMap:!!be.roughnessMap,metalnessMap:!!be.metalnessMap,specularMap:!!be.specularMap,alphaMap:!!be.alphaMap,gradientMap:!!be.gradientMap,sheen:!!be.sheen,transmissionMap:!!be.transmissionMap,combine:be.combine,vertexTangents:be.normalMap&&be.vertexTangents,vertexColors:be.vertexColors,vertexAlphas:be.vertexColors===!0&&lt.geometry.attributes.color&&lt.geometry.attributes.color.itemSize===4,vertexUvs:!!(be.map||be.bumpMap||be.normalMap||be.specularMap||be.alphaMap||be.emissiveMap||be.roughnessMap||be.metalnessMap||be.clearcoatMap||be.clearcoatRoughnessMap||be.clearcoatNormalMap||be.displacementMap||be.transmissionMap),uvsVertexOnly:!(be.map||be.bumpMap||be.normalMap||be.specularMap||be.alphaMap||be.emissiveMap||be.roughnessMap||be.metalnessMap||be.clearcoatNormalMap||be.transmissionMap||!be.displacementMap),fog:!!pt,useFog:be.fog,fogExp2:pt&&pt.isFogExp2,flatShading:!!be.flatShading,sizeAttenuation:be.sizeAttenuation,logarithmicDepthBuffer:G,skinning:be.skinning&&gt>0,maxBones:gt,useVertexTexture:$,morphTargets:be.morphTargets,morphNormals:be.morphNormals,numDirLights:ke.directional.length,numPointLights:ke.point.length,numSpotLights:ke.spot.length,numRectAreaLights:ke.rectArea.length,numHemiLights:ke.hemi.length,numDirLightShadows:ke.directionalShadowMap.length,numPointLightShadows:ke.pointShadowMap.length,numSpotLightShadows:ke.spotShadowMap.length,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:be.dithering,shadowMapEnabled:s.shadowMap.enabled&&Xe.length>0,shadowMapType:s.shadowMap.type,toneMapping:be.toneMapped?s.toneMapping:Ka,physicallyCorrectLights:s.physicallyCorrectLights,premultipliedAlpha:be.premultipliedAlpha,alphaTest:be.alphaTest,doubleSided:be.side===fu,flipSided:be.side===Js,depthPacking:be.depthPacking!==void 0&&be.depthPacking,index0AttributeName:be.index0AttributeName,extensionDerivatives:be.extensions&&be.extensions.derivatives,extensionFragDepth:be.extensions&&be.extensions.fragDepth,extensionDrawBuffers:be.extensions&&be.extensions.drawBuffers,extensionShaderTextureLOD:be.extensions&&be.extensions.shaderTextureLOD,rendererExtensionFragDepth:D||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:D||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:D||i.has("EXT_shader_texture_lod"),customProgramCacheKey:be.customProgramCacheKey()}},getProgramCacheKey:function(be){const ke=[];if(be.shaderID?ke.push(be.shaderID):(ke.push(be.fragmentShader),ke.push(be.vertexShader)),be.defines!==void 0)for(const Xe in be.defines)ke.push(Xe),ke.push(be.defines[Xe]);if(be.isRawShaderMaterial===!1){for(let Xe=0;Xe<we.length;Xe++)ke.push(be[we[Xe]]);ke.push(s.outputEncoding),ke.push(s.gammaFactor)}return ke.push(be.customProgramCacheKey),ke.join()},getUniforms:function(be){const ke=ye[be.type];let Xe;if(ke){const it=gl[ke];Xe=E0.clone(it.uniforms)}else Xe=be.uniforms;return Xe},acquireProgram:function(be,ke){let Xe;for(let it=0,lt=M.length;it<lt;it++){const pt=M[it];if(pt.cacheKey===ke){++(Xe=pt).usedTimes;break}}return Xe===void 0&&(Xe=new zr(s,ke,be,l),M.push(Xe)),Xe},releaseProgram:function(be){if(--be.usedTimes==0){const ke=M.indexOf(be);M[ke]=M[M.length-1],M.pop(),be.destroy()}},programs:M}}function ar(s){function t(M,D,G,$,ie,oe){let he=i[o];const ye=s.get(G);return he===void 0?(he={id:M.id,object:M,geometry:D,material:G,program:ye.program||B,groupOrder:$,renderOrder:M.renderOrder,z:ie,group:oe},i[o]=he):(he.id=M.id,he.object=M,he.geometry=D,he.material=G,he.program=ye.program||B,he.groupOrder=$,he.renderOrder=M.renderOrder,he.z=ie,he.group=oe),o++,he}const i=[];let o=0;const l=[],f=[],B={id:-1};return{opaque:l,transparent:f,init:function(){o=0,l.length=0,f.length=0},push:function(M,D,G,$,ie,oe){const he=t(M,D,G,$,ie,oe);(G.transparent===!0?f:l).push(he)},unshift:function(M,D,G,$,ie,oe){const he=t(M,D,G,$,ie,oe);(G.transparent===!0?f:l).unshift(he)},finish:function(){for(let M=o,D=i.length;M<D;M++){const G=i[M];if(G.id===null)break;G.id=null,G.object=null,G.geometry=null,G.material=null,G.program=null,G.group=null}},sort:function(M,D){l.length>1&&l.sort(M||function(G,$){return G.groupOrder!==$.groupOrder?G.groupOrder-$.groupOrder:G.renderOrder!==$.renderOrder?G.renderOrder-$.renderOrder:G.program!==$.program?G.program.id-$.program.id:G.material.id!==$.material.id?G.material.id-$.material.id:G.z!==$.z?G.z-$.z:G.id-$.id}),f.length>1&&f.sort(D||function(G,$){return G.groupOrder!==$.groupOrder?G.groupOrder-$.groupOrder:G.renderOrder!==$.renderOrder?G.renderOrder-$.renderOrder:G.z!==$.z?$.z-G.z:G.id-$.id})}}}function Qr(s,t){return(t.castShadow?1:0)-(s.castShadow?1:0)}function xs(s,t){const i=new function(){const D={};return{get:function(G){if(D[G.id]!==void 0)return D[G.id];let $;switch(G.type){case"DirectionalLight":$={direction:new Je,color:new Fi};break;case"SpotLight":$={position:new Je,direction:new Je,color:new Fi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":$={position:new Je,color:new Fi,distance:0,decay:0};break;case"HemisphereLight":$={direction:new Je,skyColor:new Fi,groundColor:new Fi};break;case"RectAreaLight":$={color:new Fi,position:new Je,halfWidth:new Je,halfHeight:new Je}}return D[G.id]=$,$}}},o=function(){const D={};return{get:function(G){if(D[G.id]!==void 0)return D[G.id];let $;switch(G.type){case"DirectionalLight":case"SpotLight":$={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn};break;case"PointLight":$={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn,shadowCameraNear:1,shadowCameraFar:1e3}}return D[G.id]=$,$}}}(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let D=0;D<9;D++)l.probe.push(new Je);const f=new Je,B=new ir,M=new ir;return{setup:function(D){let G=0,$=0,ie=0;for(let pt=0;pt<9;pt++)l.probe[pt].set(0,0,0);let oe=0,he=0,ye=0,we=0,be=0,ke=0,Xe=0,it=0;D.sort(Qr);for(let pt=0,mt=D.length;pt<mt;pt++){const ot=D[pt],kt=ot.color,gt=ot.intensity,Ht=ot.distance,Zt=ot.shadow&&ot.shadow.map?ot.shadow.map.texture:null;if(ot.isAmbientLight)G+=kt.r*gt,$+=kt.g*gt,ie+=kt.b*gt;else if(ot.isLightProbe)for(let Qt=0;Qt<9;Qt++)l.probe[Qt].addScaledVector(ot.sh.coefficients[Qt],gt);else if(ot.isDirectionalLight){const Qt=i.get(ot);if(Qt.color.copy(ot.color).multiplyScalar(ot.intensity),ot.castShadow){const en=ot.shadow,Wn=o.get(ot);Wn.shadowBias=en.bias,Wn.shadowNormalBias=en.normalBias,Wn.shadowRadius=en.radius,Wn.shadowMapSize=en.mapSize,l.directionalShadow[oe]=Wn,l.directionalShadowMap[oe]=Zt,l.directionalShadowMatrix[oe]=ot.shadow.matrix,ke++}l.directional[oe]=Qt,oe++}else if(ot.isSpotLight){const Qt=i.get(ot);if(Qt.position.setFromMatrixPosition(ot.matrixWorld),Qt.color.copy(kt).multiplyScalar(gt),Qt.distance=Ht,Qt.coneCos=Math.cos(ot.angle),Qt.penumbraCos=Math.cos(ot.angle*(1-ot.penumbra)),Qt.decay=ot.decay,ot.castShadow){const en=ot.shadow,Wn=o.get(ot);Wn.shadowBias=en.bias,Wn.shadowNormalBias=en.normalBias,Wn.shadowRadius=en.radius,Wn.shadowMapSize=en.mapSize,l.spotShadow[ye]=Wn,l.spotShadowMap[ye]=Zt,l.spotShadowMatrix[ye]=ot.shadow.matrix,it++}l.spot[ye]=Qt,ye++}else if(ot.isRectAreaLight){const Qt=i.get(ot);Qt.color.copy(kt).multiplyScalar(gt),Qt.halfWidth.set(.5*ot.width,0,0),Qt.halfHeight.set(0,.5*ot.height,0),l.rectArea[we]=Qt,we++}else if(ot.isPointLight){const Qt=i.get(ot);if(Qt.color.copy(ot.color).multiplyScalar(ot.intensity),Qt.distance=ot.distance,Qt.decay=ot.decay,ot.castShadow){const en=ot.shadow,Wn=o.get(ot);Wn.shadowBias=en.bias,Wn.shadowNormalBias=en.normalBias,Wn.shadowRadius=en.radius,Wn.shadowMapSize=en.mapSize,Wn.shadowCameraNear=en.camera.near,Wn.shadowCameraFar=en.camera.far,l.pointShadow[he]=Wn,l.pointShadowMap[he]=Zt,l.pointShadowMatrix[he]=ot.shadow.matrix,Xe++}l.point[he]=Qt,he++}else if(ot.isHemisphereLight){const Qt=i.get(ot);Qt.skyColor.copy(ot.color).multiplyScalar(gt),Qt.groundColor.copy(ot.groundColor).multiplyScalar(gt),l.hemi[be]=Qt,be++}}we>0&&(t.isWebGL2||s.has("OES_texture_float_linear")===!0?(l.rectAreaLTC1=Ei.LTC_FLOAT_1,l.rectAreaLTC2=Ei.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(l.rectAreaLTC1=Ei.LTC_HALF_1,l.rectAreaLTC2=Ei.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=G,l.ambient[1]=$,l.ambient[2]=ie;const lt=l.hash;lt.directionalLength===oe&&lt.pointLength===he&&lt.spotLength===ye&&lt.rectAreaLength===we&&lt.hemiLength===be&&lt.numDirectionalShadows===ke&&lt.numPointShadows===Xe&&lt.numSpotShadows===it||(l.directional.length=oe,l.spot.length=ye,l.rectArea.length=we,l.point.length=he,l.hemi.length=be,l.directionalShadow.length=ke,l.directionalShadowMap.length=ke,l.pointShadow.length=Xe,l.pointShadowMap.length=Xe,l.spotShadow.length=it,l.spotShadowMap.length=it,l.directionalShadowMatrix.length=ke,l.pointShadowMatrix.length=Xe,l.spotShadowMatrix.length=it,lt.directionalLength=oe,lt.pointLength=he,lt.spotLength=ye,lt.rectAreaLength=we,lt.hemiLength=be,lt.numDirectionalShadows=ke,lt.numPointShadows=Xe,lt.numSpotShadows=it,l.version=vv++)},setupView:function(D,G){let $=0,ie=0,oe=0,he=0,ye=0;const we=G.matrixWorldInverse;for(let be=0,ke=D.length;be<ke;be++){const Xe=D[be];if(Xe.isDirectionalLight){const it=l.directional[$];it.direction.setFromMatrixPosition(Xe.matrixWorld),f.setFromMatrixPosition(Xe.target.matrixWorld),it.direction.sub(f),it.direction.transformDirection(we),$++}else if(Xe.isSpotLight){const it=l.spot[oe];it.position.setFromMatrixPosition(Xe.matrixWorld),it.position.applyMatrix4(we),it.direction.setFromMatrixPosition(Xe.matrixWorld),f.setFromMatrixPosition(Xe.target.matrixWorld),it.direction.sub(f),it.direction.transformDirection(we),oe++}else if(Xe.isRectAreaLight){const it=l.rectArea[he];it.position.setFromMatrixPosition(Xe.matrixWorld),it.position.applyMatrix4(we),M.identity(),B.copy(Xe.matrixWorld),B.premultiply(we),M.extractRotation(B),it.halfWidth.set(.5*Xe.width,0,0),it.halfHeight.set(0,.5*Xe.height,0),it.halfWidth.applyMatrix4(M),it.halfHeight.applyMatrix4(M),he++}else if(Xe.isPointLight){const it=l.point[ie];it.position.setFromMatrixPosition(Xe.matrixWorld),it.position.applyMatrix4(we),ie++}else if(Xe.isHemisphereLight){const it=l.hemi[ye];it.direction.setFromMatrixPosition(Xe.matrixWorld),it.direction.transformDirection(we),it.direction.normalize(),ye++}}},state:l}}function Qe(s,t){const i=new xs(s,t),o=[],l=[];return{init:function(){o.length=0,l.length=0},state:{lightsArray:o,shadowsArray:l,lights:i},setupLights:function(){i.setup(o)},setupLightsView:function(f){i.setupView(o,f)},pushLight:function(f){o.push(f)},pushShadow:function(f){l.push(f)}}}function ut(s,t,i){function o(pt,mt,ot){const kt=pt<<0|mt<<1|ot<<2;let gt=ie[kt];return gt===void 0&&(gt=new pp({depthPacking:Yf,morphTargets:pt,skinning:mt}),ie[kt]=gt),gt}function l(pt,mt,ot){const kt=pt<<0|mt<<1|ot<<2;let gt=oe[kt];return gt===void 0&&(gt=new mp({morphTargets:pt,skinning:mt}),oe[kt]=gt),gt}function f(pt,mt,ot,kt,gt,Ht,Zt){let Qt=null,en=o,Wn=pt.customDepthMaterial;if(kt.isPointLight===!0&&(en=l,Wn=pt.customDistanceMaterial),Wn===void 0){let ii=!1;ot.morphTargets===!0&&(ii=mt.morphAttributes&&mt.morphAttributes.position&&mt.morphAttributes.position.length>0);let lr=!1;pt.isSkinnedMesh===!0&&(ot.skinning===!0?lr=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",pt)),Qt=en(ii,lr,pt.isInstancedMesh===!0)}else Qt=Wn;if(s.localClippingEnabled&&ot.clipShadows===!0&&ot.clippingPlanes.length!==0){const ii=Qt.uuid,lr=ot.uuid;let oi=he[ii];oi===void 0&&(oi={},he[ii]=oi);let qn=oi[lr];qn===void 0&&(qn=Qt.clone(),oi[lr]=qn),Qt=qn}return Qt.visible=ot.visible,Qt.wireframe=ot.wireframe,Qt.side=Zt===Co?ot.shadowSide!==null?ot.shadowSide:ot.side:ot.shadowSide!==null?ot.shadowSide:we[ot.side],Qt.clipShadows=ot.clipShadows,Qt.clippingPlanes=ot.clippingPlanes,Qt.clipIntersection=ot.clipIntersection,Qt.wireframeLinewidth=ot.wireframeLinewidth,Qt.linewidth=ot.linewidth,kt.isPointLight===!0&&Qt.isMeshDistanceMaterial===!0&&(Qt.referencePosition.setFromMatrixPosition(kt.matrixWorld),Qt.nearDistance=gt,Qt.farDistance=Ht),Qt}function B(pt,mt,ot,kt,gt){if(pt.visible===!1)return;if(pt.layers.test(mt.layers)&&(pt.isMesh||pt.isLine||pt.isPoints)&&(pt.castShadow||pt.receiveShadow&&gt===Co)&&(!pt.frustumCulled||M.intersectsObject(pt))){pt.modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,pt.matrixWorld);const Zt=t.update(pt),Qt=pt.material;if(Array.isArray(Qt)){const en=Zt.groups;for(let Wn=0,ii=en.length;Wn<ii;Wn++){const lr=en[Wn],oi=Qt[lr.materialIndex];if(oi&&oi.visible){const qn=f(pt,Zt,oi,kt,ot.near,ot.far,gt);s.renderBufferDirect(ot,null,Zt,qn,pt,lr)}}}else if(Qt.visible){const en=f(pt,Zt,Qt,kt,ot.near,ot.far,gt);s.renderBufferDirect(ot,null,Zt,en,pt,null)}}const Ht=pt.children;for(let Zt=0,Qt=Ht.length;Zt<Qt;Zt++)B(Ht[Zt],mt,ot,kt,gt)}let M=new Cd;const D=new Qn,G=new Qn,$=new os,ie=[],oe=[],he={},ye=i.maxTextureSize,we={0:Js,1:Ns,2:fu},be=new V({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qn},radius:{value:4}},vertexShader:xv,fragmentShader:yv}),ke=be.clone();ke.defines.HORIZONTAL_PASS=1;const Xe=new U;Xe.setAttribute("position",new y(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const it=new te(Xe,be),lt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=al,this.render=function(pt,mt,ot){if(lt.enabled===!1||lt.autoUpdate===!1&&lt.needsUpdate===!1||pt.length===0)return;const kt=s.getRenderTarget(),gt=s.getActiveCubeFace(),Ht=s.getActiveMipmapLevel(),Zt=s.state;Zt.setBlending(ll),Zt.buffers.color.setClear(1,1,1,1),Zt.buffers.depth.setTest(!0),Zt.setScissorTest(!1);for(let Qt=0,en=pt.length;Qt<en;Qt++){const Wn=pt[Qt],ii=Wn.shadow;if(ii===void 0){console.warn("THREE.WebGLShadowMap:",Wn,"has no shadow.");continue}if(ii.autoUpdate===!1&&ii.needsUpdate===!1)continue;D.copy(ii.mapSize);const lr=ii.getFrameExtents();if(D.multiply(lr),G.copy(ii.mapSize),(D.x>ye||D.y>ye)&&(D.x>ye&&(G.x=Math.floor(ye/lr.x),D.x=G.x*lr.x,ii.mapSize.x=G.x),D.y>ye&&(G.y=Math.floor(ye/lr.y),D.y=G.y*lr.y,ii.mapSize.y=G.y)),ii.map===null&&!ii.isPointLightShadow&&this.type===Co){const qn={minFilter:nt,magFilter:nt,format:Uo};ii.map=new aa(D.x,D.y,qn),ii.map.texture.name=Wn.name+".shadowMap",ii.mapPass=new aa(D.x,D.y,qn),ii.camera.updateProjectionMatrix()}if(ii.map===null){const qn={minFilter:mo,magFilter:mo,format:Uo};ii.map=new aa(D.x,D.y,qn),ii.map.texture.name=Wn.name+".shadowMap",ii.camera.updateProjectionMatrix()}s.setRenderTarget(ii.map),s.clear();const oi=ii.getViewportCount();for(let qn=0;qn<oi;qn++){const $i=ii.getViewport(qn);$.set(G.x*$i.x,G.y*$i.y,G.x*$i.z,G.y*$i.w),Zt.viewport($),ii.updateMatrices(Wn,qn),M=ii.getFrustum(),B(mt,ot,ii.camera,Wn,this.type)}ii.isPointLightShadow||this.type!==Co||function(qn,$i){const Ji=t.update(it);be.uniforms.shadow_pass.value=qn.map.texture,be.uniforms.resolution.value=qn.mapSize,be.uniforms.radius.value=qn.radius,s.setRenderTarget(qn.mapPass),s.clear(),s.renderBufferDirect($i,null,Ji,be,it,null),ke.uniforms.shadow_pass.value=qn.mapPass.texture,ke.uniforms.resolution.value=qn.mapSize,ke.uniforms.radius.value=qn.radius,s.setRenderTarget(qn.map),s.clear(),s.renderBufferDirect($i,null,Ji,ke,it,null)}(ii,ot),ii.needsUpdate=!1}lt.needsUpdate=!1,s.setRenderTarget(kt,gt,Ht)}}function _t(s,t,i,o,l,f,B){function M(Tt,Mt){return lr?new OffscreenCanvas(Tt,Mt):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function D(Tt,Mt,Yn,Cn){let zn=1;if((Tt.width>Cn||Tt.height>Cn)&&(zn=Cn/Math.max(Tt.width,Tt.height)),zn<1||Mt===!0){if(typeof HTMLImageElement<"u"&&Tt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Tt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Tt instanceof ImageBitmap){const hr=Mt?qi.floorPowerOfTwo:Math.floor,Fn=hr(zn*Tt.width),jn=hr(zn*Tt.height);ii===void 0&&(ii=M(Fn,jn));const Sn=Yn?M(Fn,jn):ii;return Sn.width=Fn,Sn.height=jn,Sn.getContext("2d").drawImage(Tt,0,0,Fn,jn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Tt.width+"x"+Tt.height+") to ("+Fn+"x"+jn+")."),Sn}return"data"in Tt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Tt.width+"x"+Tt.height+")."),Tt}return Tt}function G(Tt){return qi.isPowerOfTwo(Tt.width)&&qi.isPowerOfTwo(Tt.height)}function $(Tt,Mt){return Tt.generateMipmaps&&Mt&&Tt.minFilter!==mo&&Tt.minFilter!==nt}function ie(Tt,Mt,Yn,Cn){s.generateMipmap(Tt),o.get(Mt).__maxMipLevel=Math.log2(Math.max(Yn,Cn))}function oe(Tt,Mt,Yn){if(gt===!1)return Mt;if(Tt!==null){if(s[Tt]!==void 0)return s[Tt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Tt+"'")}let Cn=Mt;return Mt===s.RED&&(Yn===s.FLOAT&&(Cn=s.R32F),Yn===s.HALF_FLOAT&&(Cn=s.R16F),Yn===s.UNSIGNED_BYTE&&(Cn=s.R8)),Mt===s.RGB&&(Yn===s.FLOAT&&(Cn=s.RGB32F),Yn===s.HALF_FLOAT&&(Cn=s.RGB16F),Yn===s.UNSIGNED_BYTE&&(Cn=s.RGB8)),Mt===s.RGBA&&(Yn===s.FLOAT&&(Cn=s.RGBA32F),Yn===s.HALF_FLOAT&&(Cn=s.RGBA16F),Yn===s.UNSIGNED_BYTE&&(Cn=s.RGBA8)),Cn!==s.R16F&&Cn!==s.R32F&&Cn!==s.RGBA16F&&Cn!==s.RGBA32F||t.get("EXT_color_buffer_float"),Cn}function he(Tt){return Tt===mo||Tt===ph||Tt===Mo?s.NEAREST:s.LINEAR}function ye(Tt){const Mt=Tt.target;Mt.removeEventListener("dispose",ye),function(Yn){const Cn=o.get(Yn);Cn.__webglInit!==void 0&&(s.deleteTexture(Cn.__webglTexture),o.remove(Yn))}(Mt),Mt.isVideoTexture&&Wn.delete(Mt),B.memory.textures--}function we(Tt){const Mt=Tt.target;Mt.removeEventListener("dispose",we),function(Yn){const Cn=Yn.texture,zn=o.get(Yn),hr=o.get(Cn);if(!!Yn){if(hr.__webglTexture!==void 0&&s.deleteTexture(hr.__webglTexture),Yn.depthTexture&&Yn.depthTexture.dispose(),Yn.isWebGLCubeRenderTarget)for(let Fn=0;Fn<6;Fn++)s.deleteFramebuffer(zn.__webglFramebuffer[Fn]),zn.__webglDepthbuffer&&s.deleteRenderbuffer(zn.__webglDepthbuffer[Fn]);else s.deleteFramebuffer(zn.__webglFramebuffer),zn.__webglDepthbuffer&&s.deleteRenderbuffer(zn.__webglDepthbuffer),zn.__webglMultisampledFramebuffer&&s.deleteFramebuffer(zn.__webglMultisampledFramebuffer),zn.__webglColorRenderbuffer&&s.deleteRenderbuffer(zn.__webglColorRenderbuffer),zn.__webglDepthRenderbuffer&&s.deleteRenderbuffer(zn.__webglDepthRenderbuffer);o.remove(Cn),o.remove(Yn)}}(Mt),B.memory.textures--}function be(Tt,Mt){const Yn=o.get(Tt);if(Tt.isVideoTexture&&function(Cn){const zn=B.render.frame;Wn.get(Cn)!==zn&&(Wn.set(Cn,zn),Cn.update())}(Tt),Tt.version>0&&Yn.__version!==Tt.version){const Cn=Tt.image;if(Cn===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(Cn.complete!==!1)return void lt(Yn,Tt,Mt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(s.TEXTURE0+Mt),i.bindTexture(s.TEXTURE_2D,Yn.__webglTexture)}function ke(Tt,Mt){const Yn=o.get(Tt);Tt.version>0&&Yn.__version!==Tt.version?function(Cn,zn,hr){if(zn.image.length!==6)return;it(Cn,zn),i.activeTexture(s.TEXTURE0+hr),i.bindTexture(s.TEXTURE_CUBE_MAP,Cn.__webglTexture),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,zn.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,zn.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,zn.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const Fn=zn&&(zn.isCompressedTexture||zn.image[0].isCompressedTexture),jn=zn.image[0]&&zn.image[0].isDataTexture,Sn=[];for(let Ct=0;Ct<6;Ct++)Sn[Ct]=Fn||jn?jn?zn.image[Ct].image:zn.image[Ct]:D(zn.image[Ct],!1,!0,Zt);const Ii=Sn[0],vi=G(Ii)||gt,pr=f.convert(zn.format),Ri=f.convert(zn.type),_r=oe(zn.internalFormat,pr,Ri);Xe(s.TEXTURE_CUBE_MAP,zn,vi);let As;if(Fn){for(let Ct=0;Ct<6;Ct++){As=Sn[Ct].mipmaps;for(let Mr=0;Mr<As.length;Mr++){const is=As[Mr];zn.format!==Uo&&zn.format!==Es?pr!==null?i.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Mr,_r,is.width,is.height,0,is.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Mr,_r,is.width,is.height,0,pr,Ri,is.data)}}Cn.__maxMipLevel=As.length-1}else{As=zn.mipmaps;for(let Ct=0;Ct<6;Ct++)if(jn){i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,_r,Sn[Ct].width,Sn[Ct].height,0,pr,Ri,Sn[Ct].data);for(let Mr=0;Mr<As.length;Mr++){const is=As[Mr].image[Ct].image;i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Mr+1,_r,is.width,is.height,0,pr,Ri,is.data)}}else{i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,_r,pr,Ri,Sn[Ct]);for(let Mr=0;Mr<As.length;Mr++){const is=As[Mr];i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Mr+1,_r,pr,Ri,is.image[Ct])}}Cn.__maxMipLevel=As.length}$(zn,vi)&&ie(s.TEXTURE_CUBE_MAP,zn,Ii.width,Ii.height),Cn.__version=zn.version,zn.onUpdate&&zn.onUpdate(zn)}(Yn,Tt,Mt):(i.activeTexture(s.TEXTURE0+Mt),i.bindTexture(s.TEXTURE_CUBE_MAP,Yn.__webglTexture))}function Xe(Tt,Mt,Yn){if(Yn?(s.texParameteri(Tt,s.TEXTURE_WRAP_S,qn[Mt.wrapS]),s.texParameteri(Tt,s.TEXTURE_WRAP_T,qn[Mt.wrapT]),Tt!==s.TEXTURE_3D&&Tt!==s.TEXTURE_2D_ARRAY||s.texParameteri(Tt,s.TEXTURE_WRAP_R,qn[Mt.wrapR]),s.texParameteri(Tt,s.TEXTURE_MAG_FILTER,$i[Mt.magFilter]),s.texParameteri(Tt,s.TEXTURE_MIN_FILTER,$i[Mt.minFilter])):(s.texParameteri(Tt,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(Tt,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),Tt!==s.TEXTURE_3D&&Tt!==s.TEXTURE_2D_ARRAY||s.texParameteri(Tt,s.TEXTURE_WRAP_R,s.CLAMP_TO_EDGE),Mt.wrapS===Yo&&Mt.wrapT===Yo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(Tt,s.TEXTURE_MAG_FILTER,he(Mt.magFilter)),s.texParameteri(Tt,s.TEXTURE_MIN_FILTER,he(Mt.minFilter)),Mt.minFilter!==mo&&Mt.minFilter!==nt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const Cn=t.get("EXT_texture_filter_anisotropic");if(Mt.type===ra&&t.has("OES_texture_float_linear")===!1||gt===!1&&Mt.type===Ea&&t.has("OES_texture_half_float_linear")===!1)return;(Mt.anisotropy>1||o.get(Mt).__currentAnisotropy)&&(s.texParameterf(Tt,Cn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Mt.anisotropy,l.getMaxAnisotropy())),o.get(Mt).__currentAnisotropy=Mt.anisotropy)}}function it(Tt,Mt){Tt.__webglInit===void 0&&(Tt.__webglInit=!0,Mt.addEventListener("dispose",ye),Tt.__webglTexture=s.createTexture(),B.memory.textures++)}function lt(Tt,Mt,Yn){let Cn=s.TEXTURE_2D;Mt.isDataTexture2DArray&&(Cn=s.TEXTURE_2D_ARRAY),Mt.isDataTexture3D&&(Cn=s.TEXTURE_3D),it(Tt,Mt),i.activeTexture(s.TEXTURE0+Yn),i.bindTexture(Cn,Tt.__webglTexture),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Mt.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Mt.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Mt.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const zn=function(Ri){return!gt&&(Ri.wrapS!==Yo||Ri.wrapT!==Yo||Ri.minFilter!==mo&&Ri.minFilter!==nt)}(Mt)&&G(Mt.image)===!1,hr=D(Mt.image,zn,!1,Qt),Fn=G(hr)||gt,jn=f.convert(Mt.format);let Sn=f.convert(Mt.type),Ii=oe(Mt.internalFormat,jn,Sn);Xe(Cn,Mt,Fn);let vi;const pr=Mt.mipmaps;if(Mt.isDepthTexture)Ii=s.DEPTH_COMPONENT,gt?Ii=Mt.type===ra?s.DEPTH_COMPONENT32F:Mt.type===Ya?s.DEPTH_COMPONENT24:Mt.type===ma?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT16:Mt.type===ra&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Mt.format===qo&&Ii===s.DEPTH_COMPONENT&&Mt.type!==ac&&Mt.type!==Ya&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Mt.type=ac,Sn=f.convert(Mt.type)),Mt.format===sa&&Ii===s.DEPTH_COMPONENT&&(Ii=s.DEPTH_STENCIL,Mt.type!==ma&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Mt.type=ma,Sn=f.convert(Mt.type))),i.texImage2D(s.TEXTURE_2D,0,Ii,hr.width,hr.height,0,jn,Sn,null);else if(Mt.isDataTexture)if(pr.length>0&&Fn){for(let Ri=0,_r=pr.length;Ri<_r;Ri++)vi=pr[Ri],i.texImage2D(s.TEXTURE_2D,Ri,Ii,vi.width,vi.height,0,jn,Sn,vi.data);Mt.generateMipmaps=!1,Tt.__maxMipLevel=pr.length-1}else i.texImage2D(s.TEXTURE_2D,0,Ii,hr.width,hr.height,0,jn,Sn,hr.data),Tt.__maxMipLevel=0;else if(Mt.isCompressedTexture){for(let Ri=0,_r=pr.length;Ri<_r;Ri++)vi=pr[Ri],Mt.format!==Uo&&Mt.format!==Es?jn!==null?i.compressedTexImage2D(s.TEXTURE_2D,Ri,Ii,vi.width,vi.height,0,vi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(s.TEXTURE_2D,Ri,Ii,vi.width,vi.height,0,jn,Sn,vi.data);Tt.__maxMipLevel=pr.length-1}else if(Mt.isDataTexture2DArray)i.texImage3D(s.TEXTURE_2D_ARRAY,0,Ii,hr.width,hr.height,hr.depth,0,jn,Sn,hr.data),Tt.__maxMipLevel=0;else if(Mt.isDataTexture3D)i.texImage3D(s.TEXTURE_3D,0,Ii,hr.width,hr.height,hr.depth,0,jn,Sn,hr.data),Tt.__maxMipLevel=0;else if(pr.length>0&&Fn){for(let Ri=0,_r=pr.length;Ri<_r;Ri++)vi=pr[Ri],i.texImage2D(s.TEXTURE_2D,Ri,Ii,jn,Sn,vi);Mt.generateMipmaps=!1,Tt.__maxMipLevel=pr.length-1}else i.texImage2D(s.TEXTURE_2D,0,Ii,jn,Sn,hr),Tt.__maxMipLevel=0;$(Mt,Fn)&&ie(Cn,Mt,hr.width,hr.height),Tt.__version=Mt.version,Mt.onUpdate&&Mt.onUpdate(Mt)}function pt(Tt,Mt,Yn,Cn){const zn=Mt.texture,hr=f.convert(zn.format),Fn=f.convert(zn.type),jn=oe(zn.internalFormat,hr,Fn);Cn===s.TEXTURE_3D||Cn===s.TEXTURE_2D_ARRAY?i.texImage3D(Cn,0,jn,Mt.width,Mt.height,Mt.depth,0,hr,Fn,null):i.texImage2D(Cn,0,jn,Mt.width,Mt.height,0,hr,Fn,null),i.bindFramebuffer(s.FRAMEBUFFER,Tt),s.framebufferTexture2D(s.FRAMEBUFFER,Yn,Cn,o.get(zn).__webglTexture,0),i.bindFramebuffer(s.FRAMEBUFFER,null)}function mt(Tt,Mt,Yn){if(s.bindRenderbuffer(s.RENDERBUFFER,Tt),Mt.depthBuffer&&!Mt.stencilBuffer){let Cn=s.DEPTH_COMPONENT16;if(Yn){const zn=Mt.depthTexture;zn&&zn.isDepthTexture&&(zn.type===ra?Cn=s.DEPTH_COMPONENT32F:zn.type===Ya&&(Cn=s.DEPTH_COMPONENT24));const hr=kt(Mt);s.renderbufferStorageMultisample(s.RENDERBUFFER,hr,Cn,Mt.width,Mt.height)}else s.renderbufferStorage(s.RENDERBUFFER,Cn,Mt.width,Mt.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,Tt)}else if(Mt.depthBuffer&&Mt.stencilBuffer){if(Yn){const Cn=kt(Mt);s.renderbufferStorageMultisample(s.RENDERBUFFER,Cn,s.DEPTH24_STENCIL8,Mt.width,Mt.height)}else s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,Mt.width,Mt.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,Tt)}else{const Cn=Mt.texture,zn=f.convert(Cn.format),hr=f.convert(Cn.type),Fn=oe(Cn.internalFormat,zn,hr);if(Yn){const jn=kt(Mt);s.renderbufferStorageMultisample(s.RENDERBUFFER,jn,Fn,Mt.width,Mt.height)}else s.renderbufferStorage(s.RENDERBUFFER,Fn,Mt.width,Mt.height)}s.bindRenderbuffer(s.RENDERBUFFER,null)}function ot(Tt){const Mt=o.get(Tt),Yn=Tt.isWebGLCubeRenderTarget===!0;if(Tt.depthTexture){if(Yn)throw new Error("target.depthTexture not supported in Cube render targets");(function(Cn,zn){if(zn&&zn.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(s.FRAMEBUFFER,Cn),!zn.depthTexture||!zn.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");o.get(zn.depthTexture).__webglTexture&&zn.depthTexture.image.width===zn.width&&zn.depthTexture.image.height===zn.height||(zn.depthTexture.image.width=zn.width,zn.depthTexture.image.height=zn.height,zn.depthTexture.needsUpdate=!0),be(zn.depthTexture,0);const hr=o.get(zn.depthTexture).__webglTexture;if(zn.depthTexture.format===qo)s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,hr,0);else{if(zn.depthTexture.format!==sa)throw new Error("Unknown depthTexture format");s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,hr,0)}})(Mt.__webglFramebuffer,Tt)}else if(Yn){Mt.__webglDepthbuffer=[];for(let Cn=0;Cn<6;Cn++)i.bindFramebuffer(s.FRAMEBUFFER,Mt.__webglFramebuffer[Cn]),Mt.__webglDepthbuffer[Cn]=s.createRenderbuffer(),mt(Mt.__webglDepthbuffer[Cn],Tt,!1)}else i.bindFramebuffer(s.FRAMEBUFFER,Mt.__webglFramebuffer),Mt.__webglDepthbuffer=s.createRenderbuffer(),mt(Mt.__webglDepthbuffer,Tt,!1);i.bindFramebuffer(s.FRAMEBUFFER,null)}function kt(Tt){return gt&&Tt.isWebGLMultisampleRenderTarget?Math.min(en,Tt.samples):0}const gt=l.isWebGL2,Ht=l.maxTextures,Zt=l.maxCubemapSize,Qt=l.maxTextureSize,en=l.maxSamples,Wn=new WeakMap;let ii,lr=!1;try{lr=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}let oi=0;const qn={[cl]:s.REPEAT,[Yo]:s.CLAMP_TO_EDGE,[kl]:s.MIRRORED_REPEAT},$i={[mo]:s.NEAREST,[ph]:s.NEAREST_MIPMAP_NEAREST,[Mo]:s.NEAREST_MIPMAP_LINEAR,[nt]:s.LINEAR,[Au]:s.LINEAR_MIPMAP_NEAREST,[oc]:s.LINEAR_MIPMAP_LINEAR};let Ji=!1,qr=!1;this.allocateTextureUnit=function(){const Tt=oi;return Tt>=Ht&&console.warn("THREE.WebGLTextures: Trying to use "+Tt+" texture units while this GPU supports only "+Ht),oi+=1,Tt},this.resetTextureUnits=function(){oi=0},this.setTexture2D=be,this.setTexture2DArray=function(Tt,Mt){const Yn=o.get(Tt);Tt.version>0&&Yn.__version!==Tt.version?lt(Yn,Tt,Mt):(i.activeTexture(s.TEXTURE0+Mt),i.bindTexture(s.TEXTURE_2D_ARRAY,Yn.__webglTexture))},this.setTexture3D=function(Tt,Mt){const Yn=o.get(Tt);Tt.version>0&&Yn.__version!==Tt.version?lt(Yn,Tt,Mt):(i.activeTexture(s.TEXTURE0+Mt),i.bindTexture(s.TEXTURE_3D,Yn.__webglTexture))},this.setTextureCube=ke,this.setupRenderTarget=function(Tt){const Mt=Tt.texture,Yn=o.get(Tt),Cn=o.get(Mt);Tt.addEventListener("dispose",we),Cn.__webglTexture=s.createTexture(),Cn.__version=Mt.version,B.memory.textures++;const zn=Tt.isWebGLCubeRenderTarget===!0,hr=Tt.isWebGLMultisampleRenderTarget===!0,Fn=Mt.isDataTexture3D||Mt.isDataTexture2DArray,jn=G(Tt)||gt;if(!gt||Mt.format!==Es||Mt.type!==ra&&Mt.type!==Ea||(Mt.format=Uo,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),zn){Yn.__webglFramebuffer=[];for(let Sn=0;Sn<6;Sn++)Yn.__webglFramebuffer[Sn]=s.createFramebuffer()}else if(Yn.__webglFramebuffer=s.createFramebuffer(),hr)if(gt){Yn.__webglMultisampledFramebuffer=s.createFramebuffer(),Yn.__webglColorRenderbuffer=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,Yn.__webglColorRenderbuffer);const Sn=f.convert(Mt.format),Ii=f.convert(Mt.type),vi=oe(Mt.internalFormat,Sn,Ii),pr=kt(Tt);s.renderbufferStorageMultisample(s.RENDERBUFFER,pr,vi,Tt.width,Tt.height),i.bindFramebuffer(s.FRAMEBUFFER,Yn.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,Yn.__webglColorRenderbuffer),s.bindRenderbuffer(s.RENDERBUFFER,null),Tt.depthBuffer&&(Yn.__webglDepthRenderbuffer=s.createRenderbuffer(),mt(Yn.__webglDepthRenderbuffer,Tt,!0)),i.bindFramebuffer(s.FRAMEBUFFER,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(zn){i.bindTexture(s.TEXTURE_CUBE_MAP,Cn.__webglTexture),Xe(s.TEXTURE_CUBE_MAP,Mt,jn);for(let Sn=0;Sn<6;Sn++)pt(Yn.__webglFramebuffer[Sn],Tt,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Sn);$(Mt,jn)&&ie(s.TEXTURE_CUBE_MAP,Mt,Tt.width,Tt.height),i.bindTexture(s.TEXTURE_CUBE_MAP,null)}else{let Sn=s.TEXTURE_2D;Fn&&(gt?Sn=Mt.isDataTexture3D?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),i.bindTexture(Sn,Cn.__webglTexture),Xe(Sn,Mt,jn),pt(Yn.__webglFramebuffer,Tt,s.COLOR_ATTACHMENT0,Sn),$(Mt,jn)&&ie(s.TEXTURE_2D,Mt,Tt.width,Tt.height),i.bindTexture(s.TEXTURE_2D,null)}Tt.depthBuffer&&ot(Tt)},this.updateRenderTargetMipmap=function(Tt){const Mt=Tt.texture;if($(Mt,G(Tt)||gt)){const Yn=Tt.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:s.TEXTURE_2D,Cn=o.get(Mt).__webglTexture;i.bindTexture(Yn,Cn),ie(Yn,Mt,Tt.width,Tt.height),i.bindTexture(Yn,null)}},this.updateMultisampleRenderTarget=function(Tt){if(Tt.isWebGLMultisampleRenderTarget)if(gt){const Mt=o.get(Tt);i.bindFramebuffer(s.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),i.bindFramebuffer(s.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);const Yn=Tt.width,Cn=Tt.height;let zn=s.COLOR_BUFFER_BIT;Tt.depthBuffer&&(zn|=s.DEPTH_BUFFER_BIT),Tt.stencilBuffer&&(zn|=s.STENCIL_BUFFER_BIT),s.blitFramebuffer(0,0,Yn,Cn,0,0,Yn,Cn,zn,s.NEAREST),i.bindFramebuffer(s.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(Tt,Mt){Tt&&Tt.isWebGLRenderTarget&&(Ji===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ji=!0),Tt=Tt.texture),be(Tt,Mt)},this.safeSetTextureCube=function(Tt,Mt){Tt&&Tt.isWebGLCubeRenderTarget&&(qr===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),qr=!0),Tt=Tt.texture),ke(Tt,Mt)}}function nn(s,t,i){const o=i.isWebGL2;return{convert:function(l){let f;if(l===xa)return s.UNSIGNED_BYTE;if(l===ul)return s.UNSIGNED_SHORT_4_4_4_4;if(l===Gl)return s.UNSIGNED_SHORT_5_5_5_1;if(l===cc)return s.UNSIGNED_SHORT_5_6_5;if(l===Xa)return s.BYTE;if(l===Ul)return s.SHORT;if(l===ac)return s.UNSIGNED_SHORT;if(l===lc)return s.INT;if(l===Ya)return s.UNSIGNED_INT;if(l===ra)return s.FLOAT;if(l===Ea)return o?s.HALF_FLOAT:(f=t.get("OES_texture_half_float"))!==null?f.HALF_FLOAT_OES:null;if(l===Fc)return s.ALPHA;if(l===Es)return s.RGB;if(l===Uo)return s.RGBA;if(l===gd)return s.LUMINANCE;if(l===hl)return s.LUMINANCE_ALPHA;if(l===qo)return s.DEPTH_COMPONENT;if(l===sa)return s.DEPTH_STENCIL;if(l===gh)return s.RED;if(l===Ci)return s.RED_INTEGER;if(l===gr)return s.RG;if(l===ts)return s.RG_INTEGER;if(l===oo)return s.RGB_INTEGER;if(l===ls)return s.RGBA_INTEGER;if(l===Jo||l===Gi||l===oa||l===jr){if((f=t.get("WEBGL_compressed_texture_s3tc"))===null)return null;if(l===Jo)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===Gi)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===oa)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===jr)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(l===Nc||l===uc||l===Go||l===Ho){if((f=t.get("WEBGL_compressed_texture_pvrtc"))===null)return null;if(l===Nc)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===uc)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===Go)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===Ho)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(l===br)return(f=t.get("WEBGL_compressed_texture_etc1"))!==null?f.COMPRESSED_RGB_ETC1_WEBGL:null;if((l===Pa||l===hc)&&(f=t.get("WEBGL_compressed_texture_etc"))!==null){if(l===Pa)return f.COMPRESSED_RGB8_ETC2;if(l===hc)return f.COMPRESSED_RGBA8_ETC2_EAC}return l===zo||l===ms||l===Us||l===Yr||l===gs||l===ao||l===qa||l===Hl||l===Ad||l===vd||l===Ah||l===vh||l===yd||l===jf||l===ds||l===ba||l===io||l===_a||l===Oa||l===zl||l===vu||l===bm||l===Wf||l===Kf||l===Xf||l===Fa||l===c0||l===Zo?(f=t.get("WEBGL_compressed_texture_astc"))!==null?l:null:l===xd?(f=t.get("EXT_texture_compression_bptc"))!==null?l:null:l===ma?o?s.UNSIGNED_INT_24_8:(f=t.get("WEBGL_depth_texture"))!==null?f.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Wt(){this._targetRay=null,this._grip=null,this._hand=null}function mn(s,t){function i(gt){const Ht=ye.get(gt.inputSource);Ht&&Ht.dispatchEvent({type:gt.type,data:gt.inputSource})}function o(){ye.forEach(function(gt,Ht){gt.disconnect(Ht)}),ye.clear(),it=null,lt=null,M.bindXRFramebuffer(null),s.setRenderTarget(s.getRenderTarget()),kt.stop(),B.isPresenting=!1,B.dispatchEvent({type:"sessionend"})}function l(gt){const Ht=D.inputSources;for(let Zt=0;Zt<he.length;Zt++)ye.set(Ht[Zt],he[Zt]);for(let Zt=0;Zt<gt.removed.length;Zt++){const Qt=gt.removed[Zt],en=ye.get(Qt);en&&(en.dispatchEvent({type:"disconnected",data:Qt}),ye.delete(Qt))}for(let Zt=0;Zt<gt.added.length;Zt++){const Qt=gt.added[Zt],en=ye.get(Qt);en&&en.dispatchEvent({type:"connected",data:Qt})}}function f(gt,Ht){Ht===null?gt.matrixWorld.copy(gt.matrix):gt.matrixWorld.multiplyMatrices(Ht.matrixWorld,gt.matrix),gt.matrixWorldInverse.copy(gt.matrixWorld).invert()}const B=this,M=s.state;let D=null,G=1,$=null,ie="local-floor",oe=null;const he=[],ye=new Map,we=new Q;we.layers.enable(1),we.viewport=new os;const be=new Q;be.layers.enable(2),be.viewport=new os;const ke=[we,be],Xe=new Qm;Xe.layers.enable(1),Xe.layers.enable(2);let it=null,lt=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(gt){let Ht=he[gt];return Ht===void 0&&(Ht=new Wt,he[gt]=Ht),Ht.getTargetRaySpace()},this.getControllerGrip=function(gt){let Ht=he[gt];return Ht===void 0&&(Ht=new Wt,he[gt]=Ht),Ht.getGripSpace()},this.getHand=function(gt){let Ht=he[gt];return Ht===void 0&&(Ht=new Wt,he[gt]=Ht),Ht.getHandSpace()},this.setFramebufferScaleFactor=function(gt){G=gt,B.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(gt){ie=gt,B.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return $},this.getSession=function(){return D},this.setSession=async function(gt){if((D=gt)!==null){D.addEventListener("select",i),D.addEventListener("selectstart",i),D.addEventListener("selectend",i),D.addEventListener("squeeze",i),D.addEventListener("squeezestart",i),D.addEventListener("squeezeend",i),D.addEventListener("end",o),D.addEventListener("inputsourceschange",l);const Ht=t.getContextAttributes();Ht.xrCompatible!==!0&&await t.makeXRCompatible();const Zt={antialias:Ht.antialias,alpha:Ht.alpha,depth:Ht.depth,stencil:Ht.stencil,framebufferScaleFactor:G},Qt=new XRWebGLLayer(D,t,Zt);D.updateRenderState({baseLayer:Qt}),$=await D.requestReferenceSpace(ie),kt.setContext(D),kt.start(),B.isPresenting=!0,B.dispatchEvent({type:"sessionstart"})}};const pt=new Je,mt=new Je;this.getCamera=function(gt){Xe.near=be.near=we.near=gt.near,Xe.far=be.far=we.far=gt.far,it===Xe.near&&lt===Xe.far||(D.updateRenderState({depthNear:Xe.near,depthFar:Xe.far}),it=Xe.near,lt=Xe.far);const Ht=gt.parent,Zt=Xe.cameras;f(Xe,Ht);for(let en=0;en<Zt.length;en++)f(Zt[en],Ht);gt.matrixWorld.copy(Xe.matrixWorld),gt.matrix.copy(Xe.matrix),gt.matrix.decompose(gt.position,gt.quaternion,gt.scale);const Qt=gt.children;for(let en=0,Wn=Qt.length;en<Wn;en++)Qt[en].updateMatrixWorld(!0);return Zt.length===2?function(en,Wn,ii){pt.setFromMatrixPosition(Wn.matrixWorld),mt.setFromMatrixPosition(ii.matrixWorld);const lr=pt.distanceTo(mt),oi=Wn.projectionMatrix.elements,qn=ii.projectionMatrix.elements,$i=oi[14]/(oi[10]-1),Ji=oi[14]/(oi[10]+1),qr=(oi[9]+1)/oi[5],Tt=(oi[9]-1)/oi[5],Mt=(oi[8]-1)/oi[0],Yn=(qn[8]+1)/qn[0],Cn=$i*Mt,zn=$i*Yn,hr=lr/(-Mt+Yn),Fn=hr*-Mt;Wn.matrixWorld.decompose(en.position,en.quaternion,en.scale),en.translateX(Fn),en.translateZ(hr),en.matrixWorld.compose(en.position,en.quaternion,en.scale),en.matrixWorldInverse.copy(en.matrixWorld).invert();const jn=$i+hr,Sn=Ji+hr,Ii=Cn-Fn,vi=zn+(lr-Fn),pr=qr*Ji/Sn*jn,Ri=Tt*Ji/Sn*jn;en.projectionMatrix.makePerspective(Ii,vi,pr,Ri,jn,Sn)}(Xe,we,be):Xe.projectionMatrix.copy(we.projectionMatrix),Xe};let ot=null;const kt=new F;kt.setAnimationLoop(function(gt,Ht){if((oe=Ht.getViewerPose($))!==null){const Qt=oe.views,en=D.renderState.baseLayer;M.bindXRFramebuffer(en.framebuffer);let Wn=!1;Qt.length!==Xe.cameras.length&&(Xe.cameras.length=0,Wn=!0);for(let ii=0;ii<Qt.length;ii++){const lr=Qt[ii],oi=en.getViewport(lr),qn=ke[ii];qn.matrix.fromArray(lr.transform.matrix),qn.projectionMatrix.fromArray(lr.projectionMatrix),qn.viewport.set(oi.x,oi.y,oi.width,oi.height),ii===0&&Xe.matrix.copy(qn.matrix),Wn===!0&&Xe.cameras.push(qn)}}const Zt=D.inputSources;for(let Qt=0;Qt<he.length;Qt++){const en=he[Qt],Wn=Zt[Qt];en.update(Wn,Ht,$)}ot&&ot(gt,Ht)}),this.setAnimationLoop=function(gt){ot=gt},this.dispose=function(){}}function Un(s){function t(o,l){o.opacity.value=l.opacity,l.color&&o.diffuse.value.copy(l.color),l.emissive&&o.emissive.value.copy(l.emissive).multiplyScalar(l.emissiveIntensity),l.map&&(o.map.value=l.map),l.alphaMap&&(o.alphaMap.value=l.alphaMap),l.specularMap&&(o.specularMap.value=l.specularMap);const f=s.get(l).envMap;if(f){o.envMap.value=f,o.flipEnvMap.value=f.isCubeTexture&&f._needsFlipEnvMap?-1:1,o.reflectivity.value=l.reflectivity,o.refractionRatio.value=l.refractionRatio;const D=s.get(f).__maxMipLevel;D!==void 0&&(o.maxMipLevel.value=D)}l.lightMap&&(o.lightMap.value=l.lightMap,o.lightMapIntensity.value=l.lightMapIntensity),l.aoMap&&(o.aoMap.value=l.aoMap,o.aoMapIntensity.value=l.aoMapIntensity);let B;l.map?B=l.map:l.specularMap?B=l.specularMap:l.displacementMap?B=l.displacementMap:l.normalMap?B=l.normalMap:l.bumpMap?B=l.bumpMap:l.roughnessMap?B=l.roughnessMap:l.metalnessMap?B=l.metalnessMap:l.alphaMap?B=l.alphaMap:l.emissiveMap?B=l.emissiveMap:l.clearcoatMap?B=l.clearcoatMap:l.clearcoatNormalMap?B=l.clearcoatNormalMap:l.clearcoatRoughnessMap&&(B=l.clearcoatRoughnessMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),o.uvTransform.value.copy(B.matrix));let M;l.aoMap?M=l.aoMap:l.lightMap&&(M=l.lightMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),o.uv2Transform.value.copy(M.matrix))}function i(o,l){o.roughness.value=l.roughness,o.metalness.value=l.metalness,l.roughnessMap&&(o.roughnessMap.value=l.roughnessMap),l.metalnessMap&&(o.metalnessMap.value=l.metalnessMap),l.emissiveMap&&(o.emissiveMap.value=l.emissiveMap),l.bumpMap&&(o.bumpMap.value=l.bumpMap,o.bumpScale.value=l.bumpScale,l.side===Js&&(o.bumpScale.value*=-1)),l.normalMap&&(o.normalMap.value=l.normalMap,o.normalScale.value.copy(l.normalScale),l.side===Js&&o.normalScale.value.negate()),l.displacementMap&&(o.displacementMap.value=l.displacementMap,o.displacementScale.value=l.displacementScale,o.displacementBias.value=l.displacementBias),s.get(l).envMap&&(o.envMapIntensity.value=l.envMapIntensity)}return{refreshFogUniforms:function(o,l){o.fogColor.value.copy(l.color),l.isFog?(o.fogNear.value=l.near,o.fogFar.value=l.far):l.isFogExp2&&(o.fogDensity.value=l.density)},refreshMaterialUniforms:function(o,l,f,B){l.isMeshBasicMaterial?t(o,l):l.isMeshLambertMaterial?(t(o,l),function(M,D){D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap)}(o,l)):l.isMeshToonMaterial?(t(o,l),function(M,D){D.gradientMap&&(M.gradientMap.value=D.gradientMap),D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,D.side===Js&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),D.side===Js&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isMeshPhongMaterial?(t(o,l),function(M,D){M.specular.value.copy(D.specular),M.shininess.value=Math.max(D.shininess,1e-4),D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,D.side===Js&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),D.side===Js&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isMeshStandardMaterial?(t(o,l),l.isMeshPhysicalMaterial?function(M,D){i(M,D),M.reflectivity.value=D.reflectivity,M.clearcoat.value=D.clearcoat,M.clearcoatRoughness.value=D.clearcoatRoughness,D.sheen&&M.sheen.value.copy(D.sheen),D.clearcoatMap&&(M.clearcoatMap.value=D.clearcoatMap),D.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=D.clearcoatRoughnessMap),D.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(D.clearcoatNormalScale),M.clearcoatNormalMap.value=D.clearcoatNormalMap,D.side===Js&&M.clearcoatNormalScale.value.negate()),M.transmission.value=D.transmission,D.transmissionMap&&(M.transmissionMap.value=D.transmissionMap)}(o,l):i(o,l)):l.isMeshMatcapMaterial?(t(o,l),function(M,D){D.matcap&&(M.matcap.value=D.matcap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,D.side===Js&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),D.side===Js&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isMeshDepthMaterial?(t(o,l),function(M,D){D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isMeshDistanceMaterial?(t(o,l),function(M,D){D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias),M.referencePosition.value.copy(D.referencePosition),M.nearDistance.value=D.nearDistance,M.farDistance.value=D.farDistance}(o,l)):l.isMeshNormalMaterial?(t(o,l),function(M,D){D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,D.side===Js&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),D.side===Js&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isLineBasicMaterial?(function(M,D){M.diffuse.value.copy(D.color),M.opacity.value=D.opacity}(o,l),l.isLineDashedMaterial&&function(M,D){M.dashSize.value=D.dashSize,M.totalSize.value=D.dashSize+D.gapSize,M.scale.value=D.scale}(o,l)):l.isPointsMaterial?function(M,D,G,$){M.diffuse.value.copy(D.color),M.opacity.value=D.opacity,M.size.value=D.size*G,M.scale.value=.5*$,D.map&&(M.map.value=D.map),D.alphaMap&&(M.alphaMap.value=D.alphaMap);let ie;D.map?ie=D.map:D.alphaMap&&(ie=D.alphaMap),ie!==void 0&&(ie.matrixAutoUpdate===!0&&ie.updateMatrix(),M.uvTransform.value.copy(ie.matrix))}(o,l,f,B):l.isSpriteMaterial?function(M,D){M.diffuse.value.copy(D.color),M.opacity.value=D.opacity,M.rotation.value=D.rotation,D.map&&(M.map.value=D.map),D.alphaMap&&(M.alphaMap.value=D.alphaMap);let G;D.map?G=D.map:D.alphaMap&&(G=D.alphaMap),G!==void 0&&(G.matrixAutoUpdate===!0&&G.updateMatrix(),M.uvTransform.value.copy(G.matrix))}(o,l):l.isShadowMaterial?(o.color.value.copy(l.color),o.opacity.value=l.opacity):l.isShaderMaterial&&(l.uniformsNeedUpdate=!1)}}}function Xn(s){function t(){return oi===null?Cn:1}function i(ve,Rt){for(let Et=0;Et<ve.length;Et++){const Ot=ve[Et],It=we.getContext(Ot,Rt);if(It!==null)return It}return null}function o(){Mr=new function(ve){function Rt(Ot){if(Et[Ot]!==void 0)return Et[Ot];let It;switch(Ot){case"WEBGL_depth_texture":It=ve.getExtension("WEBGL_depth_texture")||ve.getExtension("MOZ_WEBGL_depth_texture")||ve.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":It=ve.getExtension("EXT_texture_filter_anisotropic")||ve.getExtension("MOZ_EXT_texture_filter_anisotropic")||ve.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":It=ve.getExtension("WEBGL_compressed_texture_s3tc")||ve.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ve.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":It=ve.getExtension("WEBGL_compressed_texture_pvrtc")||ve.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:It=ve.getExtension(Ot)}return Et[Ot]=It,It}const Et={};return{has:function(Ot){return Rt(Ot)!==null},init:function(Ot){Ot.isWebGL2?Rt("EXT_color_buffer_float"):(Rt("WEBGL_depth_texture"),Rt("OES_texture_float"),Rt("OES_texture_half_float"),Rt("OES_texture_half_float_linear"),Rt("OES_standard_derivatives"),Rt("OES_element_index_uint"),Rt("OES_vertex_array_object"),Rt("ANGLE_instanced_arrays")),Rt("OES_texture_float_linear"),Rt("EXT_color_buffer_half_float")},get:function(Ot){const It=Rt(Ot);return It===null&&console.warn("THREE.WebGLRenderer: "+Ot+" extension not supported."),It}}}(Ct),is=new function(ve,Rt,Et){function Ot(Ur){if(Ur==="highp"){if(ve.getShaderPrecisionFormat(ve.VERTEX_SHADER,ve.HIGH_FLOAT).precision>0&&ve.getShaderPrecisionFormat(ve.FRAGMENT_SHADER,ve.HIGH_FLOAT).precision>0)return"highp";Ur="mediump"}return Ur==="mediump"&&ve.getShaderPrecisionFormat(ve.VERTEX_SHADER,ve.MEDIUM_FLOAT).precision>0&&ve.getShaderPrecisionFormat(ve.FRAGMENT_SHADER,ve.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let It;const En=typeof WebGL2RenderingContext<"u"&&ve instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&ve instanceof WebGL2ComputeRenderingContext;let Kn=Et.precision!==void 0?Et.precision:"highp";const ti=Ot(Kn);ti!==Kn&&(console.warn("THREE.WebGLRenderer:",Kn,"not supported, using",ti,"instead."),Kn=ti);const Jn=Et.logarithmicDepthBuffer===!0,Vn=ve.getParameter(ve.MAX_TEXTURE_IMAGE_UNITS),ai=ve.getParameter(ve.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ci=ve.getParameter(ve.MAX_TEXTURE_SIZE),tr=ve.getParameter(ve.MAX_CUBE_MAP_TEXTURE_SIZE),wr=ve.getParameter(ve.MAX_VERTEX_ATTRIBS),rr=ve.getParameter(ve.MAX_VERTEX_UNIFORM_VECTORS),Ni=ve.getParameter(ve.MAX_VARYING_VECTORS),nr=ve.getParameter(ve.MAX_FRAGMENT_UNIFORM_VECTORS),Bi=ai>0,sr=En||Rt.has("OES_texture_float");return{isWebGL2:En,getMaxAnisotropy:function(){if(It!==void 0)return It;if(Rt.has("EXT_texture_filter_anisotropic")===!0){const Ur=Rt.get("EXT_texture_filter_anisotropic");It=ve.getParameter(Ur.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else It=0;return It},getMaxPrecision:Ot,precision:Kn,logarithmicDepthBuffer:Jn,maxTextures:Vn,maxVertexTextures:ai,maxTextureSize:ci,maxCubemapSize:tr,maxAttributes:wr,maxVertexUniforms:rr,maxVaryings:Ni,maxFragmentUniforms:nr,vertexTextures:Bi,floatFragmentTextures:sr,floatVertexTextures:Bi&&sr,maxSamples:En?ve.getParameter(ve.MAX_SAMPLES):0}}(Ct,Mr,s),Mr.init(is),Ml=new nn(Ct,Mr,is),Tr=new function(ve,Rt,Et){function Ot(cn,fs,Br){const Hs=new Uint8Array(4),Fr=ve.createTexture();ve.bindTexture(cn,Fr),ve.texParameteri(cn,ve.TEXTURE_MIN_FILTER,ve.NEAREST),ve.texParameteri(cn,ve.TEXTURE_MAG_FILTER,ve.NEAREST);for(let Wo=0;Wo<Br;Wo++)ve.texImage2D(fs+Wo,0,ve.RGBA,1,1,0,ve.RGBA,ve.UNSIGNED_BYTE,Hs);return Fr}function It(cn){Ni[cn]!==!0&&(ve.enable(cn),Ni[cn]=!0)}function En(cn){Ni[cn]!==!1&&(ve.disable(cn),Ni[cn]=!1)}function Kn(cn,fs,Br,Hs,Fr,Wo,Aa,va){if(cn!==ll){if(Ur===!1&&(It(ve.BLEND),Ur=!0),cn===Uf)Fr=Fr||fs,Wo=Wo||Br,Aa=Aa||Hs,fs===Eo&&Fr===Jl||(ve.blendEquationSeparate(Ku[fs],Ku[Fr]),Eo=fs,Jl=Fr),Br===tu&&Hs===nu&&Wo===iu&&Aa===ru||(ve.blendFuncSeparate(uf[Br],uf[Hs],uf[Wo],uf[Aa]),tu=Br,nu=Hs,iu=Wo,ru=Aa),$r=cn,em=null;else if(cn!==$r||va!==em){if(Eo===nc&&Jl===nc||(ve.blendEquation(ve.FUNC_ADD),Eo=nc,Jl=nc),va)switch(cn){case Wa:ve.blendFuncSeparate(ve.ONE,ve.ONE_MINUS_SRC_ALPHA,ve.ONE,ve.ONE_MINUS_SRC_ALPHA);break;case ld:ve.blendFunc(ve.ONE,ve.ONE);break;case cd:ve.blendFuncSeparate(ve.ZERO,ve.ZERO,ve.ONE_MINUS_SRC_COLOR,ve.ONE_MINUS_SRC_ALPHA);break;case ud:ve.blendFuncSeparate(ve.ZERO,ve.SRC_COLOR,ve.ZERO,ve.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",cn)}else switch(cn){case Wa:ve.blendFuncSeparate(ve.SRC_ALPHA,ve.ONE_MINUS_SRC_ALPHA,ve.ONE,ve.ONE_MINUS_SRC_ALPHA);break;case ld:ve.blendFunc(ve.SRC_ALPHA,ve.ONE);break;case cd:ve.blendFunc(ve.ZERO,ve.ONE_MINUS_SRC_COLOR);break;case ud:ve.blendFunc(ve.ZERO,ve.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",cn)}tu=null,nu=null,iu=null,ru=null,$r=cn,em=va}}else Ur===!0&&(En(ve.BLEND),Ur=!1)}function ti(cn){su!==cn&&(cn?ve.frontFace(ve.CW):ve.frontFace(ve.CCW),su=cn)}function Jn(cn){cn!==ia?(It(ve.CULL_FACE),cn!==Vu&&(cn===wo?ve.cullFace(ve.BACK):cn===ad?ve.cullFace(ve.FRONT):ve.cullFace(ve.FRONT_AND_BACK))):En(ve.CULL_FACE),Vu=cn}function Vn(cn,fs,Br){cn?(It(ve.POLYGON_OFFSET_FILL),ju===fs&&Wu===Br||(ve.polygonOffset(fs,Br),ju=fs,Wu=Br)):En(ve.POLYGON_OFFSET_FILL)}function ai(cn){cn===void 0&&(cn=ve.TEXTURE0+mA-1),ou!==cn&&(ve.activeTexture(cn),ou=cn)}const ci=Et.isWebGL2,tr=new function(){let cn=!1;const fs=new os;let Br=null;const Hs=new os(0,0,0,0);return{setMask:function(Fr){Br===Fr||cn||(ve.colorMask(Fr,Fr,Fr,Fr),Br=Fr)},setLocked:function(Fr){cn=Fr},setClear:function(Fr,Wo,Aa,va,hf){hf===!0&&(Fr*=va,Wo*=va,Aa*=va),fs.set(Fr,Wo,Aa,va),Hs.equals(fs)===!1&&(ve.clearColor(Fr,Wo,Aa,va),Hs.copy(fs))},reset:function(){cn=!1,Br=null,Hs.set(-1,0,0,0)}}},wr=new function(){let cn=!1,fs=null,Br=null,Hs=null;return{setTest:function(Fr){Fr?It(ve.DEPTH_TEST):En(ve.DEPTH_TEST)},setMask:function(Fr){fs===Fr||cn||(ve.depthMask(Fr),fs=Fr)},setFunc:function(Fr){if(Br!==Fr){if(Fr)switch(Fr){case md:ve.depthFunc(ve.NEVER);break;case Qf:ve.depthFunc(ve.ALWAYS);break;case ic:ve.depthFunc(ve.LESS);break;case Fl:ve.depthFunc(ve.LEQUAL);break;case Nl:ve.depthFunc(ve.EQUAL);break;case mu:ve.depthFunc(ve.GEQUAL);break;case uh:ve.depthFunc(ve.GREATER);break;case Ro:ve.depthFunc(ve.NOTEQUAL);break;default:ve.depthFunc(ve.LEQUAL)}else ve.depthFunc(ve.LEQUAL);Br=Fr}},setLocked:function(Fr){cn=Fr},setClear:function(Fr){Hs!==Fr&&(ve.clearDepth(Fr),Hs=Fr)},reset:function(){cn=!1,fs=null,Br=null,Hs=null}}},rr=new function(){let cn=!1,fs=null,Br=null,Hs=null,Fr=null,Wo=null,Aa=null,va=null,hf=null;return{setTest:function(Do){cn||(Do?It(ve.STENCIL_TEST):En(ve.STENCIL_TEST))},setMask:function(Do){fs===Do||cn||(ve.stencilMask(Do),fs=Do)},setFunc:function(Do,Xu,Sl){Br===Do&&Hs===Xu&&Fr===Sl||(ve.stencilFunc(Do,Xu,Sl),Br=Do,Hs=Xu,Fr=Sl)},setOp:function(Do,Xu,Sl){Wo===Do&&Aa===Xu&&va===Sl||(ve.stencilOp(Do,Xu,Sl),Wo=Do,Aa=Xu,va=Sl)},setLocked:function(Do){cn=Do},setClear:function(Do){hf!==Do&&(ve.clearStencil(Do),hf=Do)},reset:function(){cn=!1,fs=null,Br=null,Hs=null,Fr=null,Wo=null,Aa=null,va=null,hf=null}}};let Ni={},nr=null,Bi={},sr=null,Ur=!1,$r=null,Eo=null,tu=null,nu=null,Jl=null,iu=null,ru=null,em=!1,su=null,Vu=null,Qu=null,ju=null,Wu=null;const mA=ve.getParameter(ve.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let tm=!1,lf=0;const cf=ve.getParameter(ve.VERSION);cf.indexOf("WebGL")!==-1?(lf=parseFloat(/^WebGL (\d)/.exec(cf)[1]),tm=lf>=1):cf.indexOf("OpenGL ES")!==-1&&(lf=parseFloat(/^OpenGL ES (\d)/.exec(cf)[1]),tm=lf>=2);let ou=null,Qh={};const nm=new os(0,0,ve.canvas.width,ve.canvas.height),im=new os(0,0,ve.canvas.width,ve.canvas.height),rm={};rm[ve.TEXTURE_2D]=Ot(ve.TEXTURE_2D,ve.TEXTURE_2D,1),rm[ve.TEXTURE_CUBE_MAP]=Ot(ve.TEXTURE_CUBE_MAP,ve.TEXTURE_CUBE_MAP_POSITIVE_X,6),tr.setClear(0,0,0,1),wr.setClear(1),rr.setClear(0),It(ve.DEPTH_TEST),wr.setFunc(Fl),ti(!1),Jn(wo),It(ve.CULL_FACE),Kn(ll);const Ku={[nc]:ve.FUNC_ADD,[Gf]:ve.FUNC_SUBTRACT,[Hf]:ve.FUNC_REVERSE_SUBTRACT};if(ci)Ku[hd]=ve.MIN,Ku[dd]=ve.MAX;else{const cn=Rt.get("EXT_blend_minmax");cn!==null&&(Ku[hd]=cn.MIN_EXT,Ku[dd]=cn.MAX_EXT)}const uf={[zf]:ve.ZERO,[lh]:ve.ONE,[fd]:ve.SRC_COLOR,[pd]:ve.SRC_ALPHA,[ch]:ve.SRC_ALPHA_SATURATE,[On]:ve.DST_COLOR,[Is]:ve.DST_ALPHA,[pu]:ve.ONE_MINUS_SRC_COLOR,[La]:ve.ONE_MINUS_SRC_ALPHA,[No]:ve.ONE_MINUS_DST_COLOR,[Vf]:ve.ONE_MINUS_DST_ALPHA};return{buffers:{color:tr,depth:wr,stencil:rr},enable:It,disable:En,bindFramebuffer:function(cn,fs){fs===null&&nr!==null&&(fs=nr),Bi[cn]!==fs&&(ve.bindFramebuffer(cn,fs),Bi[cn]=fs)},bindXRFramebuffer:function(cn){cn!==nr&&(ve.bindFramebuffer(ve.FRAMEBUFFER,cn),nr=cn)},useProgram:function(cn){return sr!==cn&&(ve.useProgram(cn),sr=cn,!0)},setBlending:Kn,setMaterial:function(cn,fs){cn.side===fu?En(ve.CULL_FACE):It(ve.CULL_FACE);let Br=cn.side===Js;fs&&(Br=!Br),ti(Br),cn.blending===Wa&&cn.transparent===!1?Kn(ll):Kn(cn.blending,cn.blendEquation,cn.blendSrc,cn.blendDst,cn.blendEquationAlpha,cn.blendSrcAlpha,cn.blendDstAlpha,cn.premultipliedAlpha),wr.setFunc(cn.depthFunc),wr.setTest(cn.depthTest),wr.setMask(cn.depthWrite),tr.setMask(cn.colorWrite);const Hs=cn.stencilWrite;rr.setTest(Hs),Hs&&(rr.setMask(cn.stencilWriteMask),rr.setFunc(cn.stencilFunc,cn.stencilRef,cn.stencilFuncMask),rr.setOp(cn.stencilFail,cn.stencilZFail,cn.stencilZPass)),Vn(cn.polygonOffset,cn.polygonOffsetFactor,cn.polygonOffsetUnits),cn.alphaToCoverage===!0?It(ve.SAMPLE_ALPHA_TO_COVERAGE):En(ve.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ti,setCullFace:Jn,setLineWidth:function(cn){cn!==Qu&&(tm&&ve.lineWidth(cn),Qu=cn)},setPolygonOffset:Vn,setScissorTest:function(cn){cn?It(ve.SCISSOR_TEST):En(ve.SCISSOR_TEST)},activeTexture:ai,bindTexture:function(cn,fs){ou===null&&ai();let Br=Qh[ou];Br===void 0&&(Br={type:void 0,texture:void 0},Qh[ou]=Br),Br.type===cn&&Br.texture===fs||(ve.bindTexture(cn,fs||rm[cn]),Br.type=cn,Br.texture=fs)},unbindTexture:function(){const cn=Qh[ou];cn!==void 0&&cn.type!==void 0&&(ve.bindTexture(cn.type,null),cn.type=void 0,cn.texture=void 0)},compressedTexImage2D:function(){try{ve.compressedTexImage2D.apply(ve,arguments)}catch(cn){console.error("THREE.WebGLState:",cn)}},texImage2D:function(){try{ve.texImage2D.apply(ve,arguments)}catch(cn){console.error("THREE.WebGLState:",cn)}},texImage3D:function(){try{ve.texImage3D.apply(ve,arguments)}catch(cn){console.error("THREE.WebGLState:",cn)}},scissor:function(cn){nm.equals(cn)===!1&&(ve.scissor(cn.x,cn.y,cn.z,cn.w),nm.copy(cn))},viewport:function(cn){im.equals(cn)===!1&&(ve.viewport(cn.x,cn.y,cn.z,cn.w),im.copy(cn))},reset:function(){ve.disable(ve.BLEND),ve.disable(ve.CULL_FACE),ve.disable(ve.DEPTH_TEST),ve.disable(ve.POLYGON_OFFSET_FILL),ve.disable(ve.SCISSOR_TEST),ve.disable(ve.STENCIL_TEST),ve.disable(ve.SAMPLE_ALPHA_TO_COVERAGE),ve.blendEquation(ve.FUNC_ADD),ve.blendFunc(ve.ONE,ve.ZERO),ve.blendFuncSeparate(ve.ONE,ve.ZERO,ve.ONE,ve.ZERO),ve.colorMask(!0,!0,!0,!0),ve.clearColor(0,0,0,0),ve.depthMask(!0),ve.depthFunc(ve.LESS),ve.clearDepth(1),ve.stencilMask(4294967295),ve.stencilFunc(ve.ALWAYS,0,4294967295),ve.stencilOp(ve.KEEP,ve.KEEP,ve.KEEP),ve.clearStencil(0),ve.cullFace(ve.BACK),ve.frontFace(ve.CCW),ve.polygonOffset(0,0),ve.activeTexture(ve.TEXTURE0),ve.bindFramebuffer(ve.FRAMEBUFFER,null),ci===!0&&(ve.bindFramebuffer(ve.DRAW_FRAMEBUFFER,null),ve.bindFramebuffer(ve.READ_FRAMEBUFFER,null)),ve.useProgram(null),ve.lineWidth(1),ve.scissor(0,0,ve.canvas.width,ve.canvas.height),ve.viewport(0,0,ve.canvas.width,ve.canvas.height),Ni={},ou=null,Qh={},nr=null,Bi={},sr=null,Ur=!1,$r=null,Eo=null,tu=null,nu=null,Jl=null,iu=null,ru=null,em=!1,su=null,Vu=null,Qu=null,ju=null,Wu=null,nm.set(0,0,ve.canvas.width,ve.canvas.height),im.set(0,0,ve.canvas.width,ve.canvas.height),tr.reset(),wr.reset(),rr.reset()}}}(Ct,Mr,is),eo=new function(ve){const Rt={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:Rt,programs:null,autoReset:!0,reset:function(){Rt.frame++,Rt.calls=0,Rt.triangles=0,Rt.points=0,Rt.lines=0},update:function(Et,Ot,It){switch(Rt.calls++,Ot){case ve.TRIANGLES:Rt.triangles+=It*(Et/3);break;case ve.LINES:Rt.lines+=It*(Et/2);break;case ve.LINE_STRIP:Rt.lines+=It*(Et-1);break;case ve.LINE_LOOP:Rt.lines+=It*Et;break;case ve.POINTS:Rt.points+=It*Et;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ot)}}}}(Ct),vs=new function(){let ve=new WeakMap;return{get:function(Rt){let Et=ve.get(Rt);return Et===void 0&&(Et={},ve.set(Rt,Et)),Et},remove:function(Rt){ve.delete(Rt)},update:function(Rt,Et,Ot){ve.get(Rt)[Et]=Ot},dispose:function(){ve=new WeakMap}}},Lo=new _t(Ct,Mr,Tr,vs,is,Ml,eo),_l=new function(ve){function Rt(It,En){return En===fh?It.mapping=Da:En===Ws&&(It.mapping=sc),It}function Et(It){const En=It.target;En.removeEventListener("dispose",Et);const Kn=Ot.get(En);Kn!==void 0&&(Ot.delete(En),Kn.dispose())}let Ot=new WeakMap;return{get:function(It){if(It&&It.isTexture){const En=It.mapping;if(En===fh||En===Ws){if(Ot.has(It))return Rt(Ot.get(It).texture,It.mapping);{const Kn=It.image;if(Kn&&Kn.height>0){const ti=ve.getRenderTarget(),Jn=new dp(Kn.height/2);return Jn.fromEquirectangularTexture(ve,It),Ot.set(It,Jn),ve.setRenderTarget(ti),It.addEventListener("dispose",Et),Rt(Jn.texture,It.mapping)}return null}}}return It},dispose:function(){Ot=new WeakMap}}}(en),wl=new z(Ct,is),Ma=new X(Ct,Mr,wl,is),Zp=new function(ve,Rt,Et,Ot){function It(Jn){const Vn=Jn.target;Vn.index!==null&&Rt.remove(Vn.index);for(const ci in Vn.attributes)Rt.remove(Vn.attributes[ci]);Vn.removeEventListener("dispose",It),delete Kn[Vn.id];const ai=ti.get(Vn);ai&&(Rt.remove(ai),ti.delete(Vn)),Ot.releaseStatesOfGeometry(Vn),Vn.isInstancedBufferGeometry===!0&&delete Vn._maxInstanceCount,Et.memory.geometries--}function En(Jn){const Vn=[],ai=Jn.index,ci=Jn.attributes.position;let tr=0;if(ai!==null){const Ni=ai.array;tr=ai.version;for(let nr=0,Bi=Ni.length;nr<Bi;nr+=3){const sr=Ni[nr+0],Ur=Ni[nr+1],$r=Ni[nr+2];Vn.push(sr,Ur,Ur,$r,$r,sr)}}else{const Ni=ci.array;tr=ci.version;for(let nr=0,Bi=Ni.length/3-1;nr<Bi;nr+=3){const sr=nr+0,Ur=nr+1,$r=nr+2;Vn.push(sr,Ur,Ur,$r,$r,sr)}}const wr=new(J(Vn)>65535?R:b)(Vn,1);wr.version=tr;const rr=ti.get(Jn);rr&&Rt.remove(rr),ti.set(Jn,wr)}const Kn={},ti=new WeakMap;return{get:function(Jn,Vn){return Kn[Vn.id]===!0||(Vn.addEventListener("dispose",It),Kn[Vn.id]=!0,Et.memory.geometries++),Vn},update:function(Jn){const Vn=Jn.attributes;for(const ci in Vn)Rt.update(Vn[ci],ve.ARRAY_BUFFER);const ai=Jn.morphAttributes;for(const ci in ai){const tr=ai[ci];for(let wr=0,rr=tr.length;wr<rr;wr++)Rt.update(tr[wr],ve.ARRAY_BUFFER)}},getWireframeAttribute:function(Jn){const Vn=ti.get(Jn);if(Vn){const ai=Jn.index;ai!==null&&Vn.version<ai.version&&En(Jn)}else En(Jn);return ti.get(Jn)}}}(Ct,wl,eo,Ma),el=new function(ve,Rt,Et,Ot){function It(Kn){const ti=Kn.target;ti.removeEventListener("dispose",It),Et.remove(ti.instanceMatrix),ti.instanceColor!==null&&Et.remove(ti.instanceColor)}let En=new WeakMap;return{update:function(Kn){const ti=Ot.render.frame,Jn=Kn.geometry,Vn=Rt.get(Kn,Jn);return En.get(Vn)!==ti&&(Rt.update(Vn),En.set(Vn,ti)),Kn.isInstancedMesh&&(Kn.hasEventListener("dispose",It)===!1&&Kn.addEventListener("dispose",It),Et.update(Kn.instanceMatrix,ve.ARRAY_BUFFER),Kn.instanceColor!==null&&Et.update(Kn.instanceColor,ve.ARRAY_BUFFER)),Vn},dispose:function(){En=new WeakMap}}}(Ct,Zp,wl,eo),dA=new function(ve){const Rt={},Et=new Float32Array(8),Ot=[];for(let It=0;It<8;It++)Ot[It]=[It,0];return{update:function(It,En,Kn,ti){const Jn=It.morphTargetInfluences,Vn=Jn===void 0?0:Jn.length;let ai=Rt[En.id];if(ai===void 0){ai=[];for(let Ni=0;Ni<Vn;Ni++)ai[Ni]=[Ni,0];Rt[En.id]=ai}for(let Ni=0;Ni<Vn;Ni++){const nr=ai[Ni];nr[0]=Ni,nr[1]=Jn[Ni]}ai.sort(Ae);for(let Ni=0;Ni<8;Ni++)Ni<Vn&&ai[Ni][1]?(Ot[Ni][0]=ai[Ni][0],Ot[Ni][1]=ai[Ni][1]):(Ot[Ni][0]=Number.MAX_SAFE_INTEGER,Ot[Ni][1]=0);Ot.sort(fe);const ci=Kn.morphTargets&&En.morphAttributes.position,tr=Kn.morphNormals&&En.morphAttributes.normal;let wr=0;for(let Ni=0;Ni<8;Ni++){const nr=Ot[Ni],Bi=nr[0],sr=nr[1];Bi!==Number.MAX_SAFE_INTEGER&&sr?(ci&&En.getAttribute("morphTarget"+Ni)!==ci[Bi]&&En.setAttribute("morphTarget"+Ni,ci[Bi]),tr&&En.getAttribute("morphNormal"+Ni)!==tr[Bi]&&En.setAttribute("morphNormal"+Ni,tr[Bi]),Et[Ni]=sr,wr+=sr):(ci&&En.hasAttribute("morphTarget"+Ni)===!0&&En.deleteAttribute("morphTarget"+Ni),tr&&En.hasAttribute("morphNormal"+Ni)===!0&&En.deleteAttribute("morphNormal"+Ni),Et[Ni]=0)}const rr=En.morphTargetsRelative?1:1-wr;ti.getUniforms().setValue(ve,"morphTargetBaseInfluence",rr),ti.getUniforms().setValue(ve,"morphTargetInfluences",Et)}}}(Ct),Mc=new function(ve){function Rt(){ai.value!==It&&(ai.value=It,ai.needsUpdate=En>0),Ot.numPlanes=En,Ot.numIntersection=0}function Et(ci,tr,wr,rr){const Ni=ci!==null?ci.length:0;let nr=null;if(Ni!==0){if(nr=ai.value,rr!==!0||nr===null){const Bi=wr+4*Ni,sr=tr.matrixWorldInverse;Vn.getNormalMatrix(sr),(nr===null||nr.length<Bi)&&(nr=new Float32Array(Bi));for(let Ur=0,$r=wr;Ur!==Ni;++Ur,$r+=4)Jn.copy(ci[Ur]).applyMatrix4(sr,Vn),Jn.normal.toArray(nr,$r),nr[$r+3]=Jn.constant}ai.value=nr,ai.needsUpdate=!0}return Ot.numPlanes=Ni,Ot.numIntersection=0,nr}const Ot=this;let It=null,En=0,Kn=!1,ti=!1;const Jn=new fl,Vn=new cs,ai={value:null,needsUpdate:!1};this.uniform=ai,this.numPlanes=0,this.numIntersection=0,this.init=function(ci,tr,wr){const rr=ci.length!==0||tr||En!==0||Kn;return Kn=tr,It=Et(ci,wr,0),En=ci.length,rr},this.beginShadows=function(){ti=!0,Et(null)},this.endShadows=function(){ti=!1,Rt()},this.setState=function(ci,tr,wr){const rr=ci.clippingPlanes,Ni=ci.clipIntersection,nr=ci.clipShadows,Bi=ve.get(ci);if(!Kn||rr===null||rr.length===0||ti&&!nr)ti?Et(null):Rt();else{const sr=ti?0:En,Ur=4*sr;let $r=Bi.clippingState||null;ai.value=$r,$r=Et(rr,tr,Ur,wr);for(let Eo=0;Eo!==Ur;++Eo)$r[Eo]=It[Eo];Bi.clippingState=$r,this.numIntersection=Ni?this.numPlanes:0,this.numPlanes+=sr}}}(vs),Hu=new Pr(en,_l,Mr,is,Ma,Mc),$p=new Un(vs),ql=new function(ve){let Rt=new WeakMap;return{get:function(Et,Ot){let It;return Rt.has(Et)===!1?(It=new ar(ve),Rt.set(Et,[It])):Ot>=Rt.get(Et).length?(It=new ar(ve),Rt.get(Et).push(It)):It=Rt.get(Et)[Ot],It},dispose:function(){Rt=new WeakMap}}}(vs),$c=new function(ve,Rt){let Et=new WeakMap;return{get:function(Ot,It=0){let En;return Et.has(Ot)===!1?(En=new Qe(ve,Rt),Et.set(Ot,[En])):It>=Et.get(Ot).length?(En=new Qe(ve,Rt),Et.get(Ot).push(En)):En=Et.get(Ot)[It],En},dispose:function(){Et=new WeakMap}}}(Mr,is),eu=new function(ve,Rt,Et,Ot,It){function En(wr,rr){Et.buffers.color.setClear(wr.r,wr.g,wr.b,rr,It)}const Kn=new Fi(0);let ti,Jn,Vn=0,ai=null,ci=0,tr=null;return{getClearColor:function(){return Kn},setClearColor:function(wr,rr=1){Kn.set(wr),En(Kn,Vn=rr)},getClearAlpha:function(){return Vn},setClearAlpha:function(wr){En(Kn,Vn=wr)},render:function(wr,rr,Ni,nr){let Bi=rr.isScene===!0?rr.background:null;Bi&&Bi.isTexture&&(Bi=Rt.get(Bi));const sr=ve.xr,Ur=sr.getSession&&sr.getSession();Ur&&Ur.environmentBlendMode==="additive"&&(Bi=null),Bi===null?En(Kn,Vn):Bi&&Bi.isColor&&(En(Bi,1),nr=!0),(ve.autoClear||nr)&&ve.clear(ve.autoClearColor,ve.autoClearDepth,ve.autoClearStencil),Bi&&(Bi.isCubeTexture||Bi.mapping===es)?(Jn===void 0&&((Jn=new te(new Cu(1,1,1),new V({name:"BackgroundCubeMaterial",uniforms:xe(gl.cube.uniforms),vertexShader:gl.cube.vertexShader,fragmentShader:gl.cube.fragmentShader,side:Js,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Jn.geometry.deleteAttribute("uv"),Jn.onBeforeRender=function($r,Eo,tu){this.matrixWorld.copyPosition(tu.matrixWorld)},Object.defineProperty(Jn.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Ot.update(Jn)),Jn.material.uniforms.envMap.value=Bi,Jn.material.uniforms.flipEnvMap.value=Bi.isCubeTexture&&Bi._needsFlipEnvMap?-1:1,ai===Bi&&ci===Bi.version&&tr===ve.toneMapping||(Jn.material.needsUpdate=!0,ai=Bi,ci=Bi.version,tr=ve.toneMapping),wr.unshift(Jn,Jn.geometry,Jn.material,0,0,null)):Bi&&Bi.isTexture&&(ti===void 0&&((ti=new te(new Md(2,2),new V({name:"BackgroundMaterial",uniforms:xe(gl.background.uniforms),vertexShader:gl.background.vertexShader,fragmentShader:gl.background.fragmentShader,side:Ns,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(ti.material,"map",{get:function(){return this.uniforms.t2D.value}}),Ot.update(ti)),ti.material.uniforms.t2D.value=Bi,Bi.matrixAutoUpdate===!0&&Bi.updateMatrix(),ti.material.uniforms.uvTransform.value.copy(Bi.matrix),ai===Bi&&ci===Bi.version&&tr===ve.toneMapping||(ti.material.needsUpdate=!0,ai=Bi,ci=Bi.version,tr=ve.toneMapping),wr.unshift(ti,ti.geometry,ti.material,0,0,null))}}}(en,_l,Tr,el,pt),Cl=new ut(en,el,is),fA=new function(ve,Rt,Et,Ot){const It=Ot.isWebGL2;let En;this.setMode=function(Kn){En=Kn},this.render=function(Kn,ti){ve.drawArrays(En,Kn,ti),Et.update(ti,En,1)},this.renderInstances=function(Kn,ti,Jn){if(Jn===0)return;let Vn,ai;if(It)Vn=ve,ai="drawArraysInstanced";else if(Vn=Rt.get("ANGLE_instanced_arrays"),ai="drawArraysInstancedANGLE",Vn===null)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Vn[ai](En,Kn,ti,Jn),Et.update(ti,En,Jn)}}(Ct,Mr,eo,is),pA=new function(ve,Rt,Et,Ot){const It=Ot.isWebGL2;let En,Kn,ti;this.setMode=function(Jn){En=Jn},this.setIndex=function(Jn){Kn=Jn.type,ti=Jn.bytesPerElement},this.render=function(Jn,Vn){ve.drawElements(En,Vn,Kn,Jn*ti),Et.update(Vn,En,1)},this.renderInstances=function(Jn,Vn,ai){if(ai===0)return;let ci,tr;if(It)ci=ve,tr="drawElementsInstanced";else if(ci=Rt.get("ANGLE_instanced_arrays"),tr="drawElementsInstancedANGLE",ci===null)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");ci[tr](En,Vn,Kn,Jn*ti,ai),Et.update(Vn,En,ai)}}(Ct,Mr,eo,is),eo.programs=Hu.programs,en.capabilities=is,en.extensions=Mr,en.properties=vs,en.renderLists=ql,en.shadowMap=Cl,en.state=Tr,en.info=eo}function l(ve){ve.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Wn=!0}function f(){console.log("THREE.WebGLRenderer: Context Restored."),Wn=!1;const ve=eo.autoReset,Rt=Cl.enabled,Et=Cl.autoUpdate,Ot=Cl.needsUpdate,It=Cl.type;o(),eo.autoReset=ve,Cl.enabled=Rt,Cl.autoUpdate=Et,Cl.needsUpdate=Ot,Cl.type=It}function B(ve){const Rt=ve.target;Rt.removeEventListener("dispose",B),function(Et){(function(Ot){const It=vs.get(Ot).programs;It!==void 0&&It.forEach(function(En){Hu.releaseProgram(En)})})(Et),vs.remove(Et)}(Rt)}function M(){zu.stop()}function D(){zu.start()}function G(ve,Rt,Et,Ot){if(ve.visible===!1)return;if(ve.layers.test(Rt.layers)){if(ve.isGroup)Et=ve.renderOrder;else if(ve.isLOD)ve.autoUpdate===!0&&ve.update(Rt);else if(ve.isLight)Ht.pushLight(ve),ve.castShadow&&Ht.pushShadow(ve);else if(ve.isSprite){if(!ve.frustumCulled||Ii.intersectsSprite(ve)){Ot&&_r.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(Ri);const En=el.update(ve),Kn=ve.material;Kn.visible&&gt.push(ve,En,Kn,Et,_r.z,null)}}else if(ve.isImmediateRenderObject)Ot&&_r.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(Ri),gt.push(ve,null,ve.material,Et,_r.z,null);else if((ve.isMesh||ve.isLine||ve.isPoints)&&(ve.isSkinnedMesh&&ve.skeleton.frame!==eo.render.frame&&(ve.skeleton.update(),ve.skeleton.frame=eo.render.frame),!ve.frustumCulled||Ii.intersectsObject(ve))){Ot&&_r.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(Ri);const En=el.update(ve),Kn=ve.material;if(Array.isArray(Kn)){const ti=En.groups;for(let Jn=0,Vn=ti.length;Jn<Vn;Jn++){const ai=ti[Jn],ci=Kn[ai.materialIndex];ci&&ci.visible&&gt.push(ve,En,ci,Et,_r.z,ai)}}else Kn.visible&&gt.push(ve,En,Kn,Et,_r.z,null)}}const It=ve.children;for(let En=0,Kn=It.length;En<Kn;En++)G(It[En],Rt,Et,Ot)}function $(ve,Rt,Et){const Ot=Rt.isScene===!0?Rt.overrideMaterial:null;for(let It=0,En=ve.length;It<En;It++){const Kn=ve[It],ti=Kn.object,Jn=Kn.geometry,Vn=Ot===null?Kn.material:Ot,ai=Kn.group;if(Et.isArrayCamera){const ci=Et.cameras;for(let tr=0,wr=ci.length;tr<wr;tr++){const rr=ci[tr];ti.layers.test(rr.layers)&&(Tr.viewport(Ji.copy(rr.viewport)),Ht.setupLightsView(rr),ie(ti,Rt,rr,Jn,Vn,ai))}}else ie(ti,Rt,Et,Jn,Vn,ai)}}function ie(ve,Rt,Et,Ot,It,En){if(ve.onBeforeRender(en,Rt,Et,Ot,It,En),ve.modelViewMatrix.multiplyMatrices(Et.matrixWorldInverse,ve.matrixWorld),ve.normalMatrix.getNormalMatrix(ve.modelViewMatrix),ve.isImmediateRenderObject){const Kn=ye(Et,Rt,It,ve);Tr.setMaterial(It),Ma.reset(),function(ti,Jn){ti.render(function(Vn){en.renderBufferImmediate(Vn,Jn)})}(ve,Kn)}else en.renderBufferDirect(Et,Rt,Ot,It,ve,En);ve.onAfterRender(en,Rt,Et,Ot,It,En)}function oe(ve,Rt,Et){Rt.isScene!==!0&&(Rt=As);const Ot=vs.get(ve),It=Ht.state.lights,En=Ht.state.shadowsArray,Kn=It.state.version,ti=Hu.getParameters(ve,It.state,En,Rt,Et),Jn=Hu.getProgramCacheKey(ti);let Vn=Ot.programs;Ot.environment=ve.isMeshStandardMaterial?Rt.environment:null,Ot.fog=Rt.fog,Ot.envMap=_l.get(ve.envMap||Ot.environment),Vn===void 0&&(ve.addEventListener("dispose",B),Vn=new Map,Ot.programs=Vn);let ai=Vn.get(Jn);if(ai!==void 0){if(Ot.currentProgram===ai&&Ot.lightsStateVersion===Kn)return he(ve,ti),ai}else ti.uniforms=Hu.getUniforms(ve),ve.onBeforeCompile(ti,en),ai=Hu.acquireProgram(ti,Jn),Vn.set(Jn,ai),Ot.uniforms=ti.uniforms;const ci=Ot.uniforms;(ve.isShaderMaterial||ve.isRawShaderMaterial)&&ve.clipping!==!0||(ci.clippingPlanes=Mc.uniform),he(ve,ti),Ot.needsLights=function(rr){return rr.isMeshLambertMaterial||rr.isMeshToonMaterial||rr.isMeshPhongMaterial||rr.isMeshStandardMaterial||rr.isShadowMaterial||rr.isShaderMaterial&&rr.lights===!0}(ve),Ot.lightsStateVersion=Kn,Ot.needsLights&&(ci.ambientLightColor.value=It.state.ambient,ci.lightProbe.value=It.state.probe,ci.directionalLights.value=It.state.directional,ci.directionalLightShadows.value=It.state.directionalShadow,ci.spotLights.value=It.state.spot,ci.spotLightShadows.value=It.state.spotShadow,ci.rectAreaLights.value=It.state.rectArea,ci.ltc_1.value=It.state.rectAreaLTC1,ci.ltc_2.value=It.state.rectAreaLTC2,ci.pointLights.value=It.state.point,ci.pointLightShadows.value=It.state.pointShadow,ci.hemisphereLights.value=It.state.hemi,ci.directionalShadowMap.value=It.state.directionalShadowMap,ci.directionalShadowMatrix.value=It.state.directionalShadowMatrix,ci.spotShadowMap.value=It.state.spotShadowMap,ci.spotShadowMatrix.value=It.state.spotShadowMatrix,ci.pointShadowMap.value=It.state.pointShadowMap,ci.pointShadowMatrix.value=It.state.pointShadowMatrix);const tr=ai.getUniforms(),wr=In.seqWithValue(tr.seq,ci);return Ot.currentProgram=ai,Ot.uniformsList=wr,ai}function he(ve,Rt){const Et=vs.get(ve);Et.outputEncoding=Rt.outputEncoding,Et.instancing=Rt.instancing,Et.numClippingPlanes=Rt.numClippingPlanes,Et.numIntersection=Rt.numClipIntersection,Et.vertexAlphas=Rt.vertexAlphas}function ye(ve,Rt,Et,Ot){Rt.isScene!==!0&&(Rt=As),Lo.resetTextureUnits();const It=Rt.fog,En=Et.isMeshStandardMaterial?Rt.environment:null,Kn=oi===null?en.outputEncoding:oi.texture.encoding,ti=_l.get(Et.envMap||En),Jn=Et.vertexColors===!0&&Ot.geometry.attributes.color&&Ot.geometry.attributes.color.itemSize===4,Vn=vs.get(Et),ai=Ht.state.lights;if(vi===!0&&(pr===!0||ve!==$i)){const sr=ve===$i&&Et.id===qn;Mc.setState(Et,ve,sr)}let ci=!1;Et.version===Vn.__version?Vn.needsLights&&Vn.lightsStateVersion!==ai.state.version||Vn.outputEncoding!==Kn||Ot.isInstancedMesh&&Vn.instancing===!1?ci=!0:Ot.isInstancedMesh||Vn.instancing!==!0?Vn.envMap!==ti||Et.fog&&Vn.fog!==It?ci=!0:Vn.numClippingPlanes===void 0||Vn.numClippingPlanes===Mc.numPlanes&&Vn.numIntersection===Mc.numIntersection?Vn.vertexAlphas!==Jn&&(ci=!0):ci=!0:ci=!0:(ci=!0,Vn.__version=Et.version);let tr=Vn.currentProgram;ci===!0&&(tr=oe(Et,Rt,Ot));let wr=!1,rr=!1,Ni=!1;const nr=tr.getUniforms(),Bi=Vn.uniforms;if(Tr.useProgram(tr.program)&&(wr=!0,rr=!0,Ni=!0),Et.id!==qn&&(qn=Et.id,rr=!0),wr||$i!==ve){if(nr.setValue(Ct,"projectionMatrix",ve.projectionMatrix),is.logarithmicDepthBuffer&&nr.setValue(Ct,"logDepthBufFC",2/(Math.log(ve.far+1)/Math.LN2)),$i!==ve&&($i=ve,rr=!0,Ni=!0),Et.isShaderMaterial||Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshStandardMaterial||Et.envMap){const sr=nr.map.cameraPosition;sr!==void 0&&sr.setValue(Ct,_r.setFromMatrixPosition(ve.matrixWorld))}(Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshLambertMaterial||Et.isMeshBasicMaterial||Et.isMeshStandardMaterial||Et.isShaderMaterial)&&nr.setValue(Ct,"isOrthographic",ve.isOrthographicCamera===!0),(Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshLambertMaterial||Et.isMeshBasicMaterial||Et.isMeshStandardMaterial||Et.isShaderMaterial||Et.isShadowMaterial||Et.skinning)&&nr.setValue(Ct,"viewMatrix",ve.matrixWorldInverse)}if(Et.skinning){nr.setOptional(Ct,Ot,"bindMatrix"),nr.setOptional(Ct,Ot,"bindMatrixInverse");const sr=Ot.skeleton;if(sr){const Ur=sr.bones;if(is.floatVertexTextures){if(sr.boneTexture===null){let $r=Math.sqrt(4*Ur.length);$r=qi.ceilPowerOfTwo($r),$r=Math.max($r,4);const Eo=new Float32Array($r*$r*4);Eo.set(sr.boneMatrices);const tu=new Bh(Eo,$r,$r,Uo,ra);sr.boneMatrices=Eo,sr.boneTexture=tu,sr.boneTextureSize=$r}nr.setValue(Ct,"boneTexture",sr.boneTexture,Lo),nr.setValue(Ct,"boneTextureSize",sr.boneTextureSize)}else nr.setOptional(Ct,sr,"boneMatrices")}}return(rr||Vn.receiveShadow!==Ot.receiveShadow)&&(Vn.receiveShadow=Ot.receiveShadow,nr.setValue(Ct,"receiveShadow",Ot.receiveShadow)),rr&&(nr.setValue(Ct,"toneMappingExposure",en.toneMappingExposure),Vn.needsLights&&function(sr,Ur){sr.ambientLightColor.needsUpdate=Ur,sr.lightProbe.needsUpdate=Ur,sr.directionalLights.needsUpdate=Ur,sr.directionalLightShadows.needsUpdate=Ur,sr.pointLights.needsUpdate=Ur,sr.pointLightShadows.needsUpdate=Ur,sr.spotLights.needsUpdate=Ur,sr.spotLightShadows.needsUpdate=Ur,sr.rectAreaLights.needsUpdate=Ur,sr.hemisphereLights.needsUpdate=Ur}(Bi,Ni),It&&Et.fog&&$p.refreshFogUniforms(Bi,It),$p.refreshMaterialUniforms(Bi,Et,Cn,Yn),In.upload(Ct,Vn.uniformsList,Bi,Lo)),Et.isShaderMaterial&&Et.uniformsNeedUpdate===!0&&(In.upload(Ct,Vn.uniformsList,Bi,Lo),Et.uniformsNeedUpdate=!1),Et.isSpriteMaterial&&nr.setValue(Ct,"center",Ot.center),nr.setValue(Ct,"modelViewMatrix",Ot.modelViewMatrix),nr.setValue(Ct,"normalMatrix",Ot.normalMatrix),nr.setValue(Ct,"modelMatrix",Ot.matrixWorld),tr}const we=(s=s||{}).canvas!==void 0?s.canvas:function(){const ve=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return ve.style.display="block",ve}(),be=s.context!==void 0?s.context:null,ke=s.alpha!==void 0&&s.alpha,Xe=s.depth===void 0||s.depth,it=s.stencil===void 0||s.stencil,lt=s.antialias!==void 0&&s.antialias,pt=s.premultipliedAlpha===void 0||s.premultipliedAlpha,mt=s.preserveDrawingBuffer!==void 0&&s.preserveDrawingBuffer,ot=s.powerPreference!==void 0?s.powerPreference:"default",kt=s.failIfMajorPerformanceCaveat!==void 0&&s.failIfMajorPerformanceCaveat;let gt=null,Ht=null;const Zt=[],Qt=[];this.domElement=we,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=lo,this.physicallyCorrectLights=!1,this.toneMapping=Ka,this.toneMappingExposure=1;const en=this;let Wn=!1,ii=0,lr=0,oi=null,qn=-1,$i=null;const Ji=new os,qr=new os;let Tt=null,Mt=we.width,Yn=we.height,Cn=1,zn=null,hr=null;const Fn=new os(0,0,Mt,Yn),jn=new os(0,0,Mt,Yn);let Sn=!1;const Ii=new Cd;let vi=!1,pr=!1;const Ri=new ir,_r=new Je,As={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ct=be;try{const ve={alpha:ke,depth:Xe,stencil:it,antialias:lt,premultipliedAlpha:pt,preserveDrawingBuffer:mt,powerPreference:ot,failIfMajorPerformanceCaveat:kt};if(we.addEventListener("webglcontextlost",l,!1),we.addEventListener("webglcontextrestored",f,!1),Ct===null){const Rt=["webgl2","webgl","experimental-webgl"];if(en.isWebGL1Renderer===!0&&Rt.shift(),(Ct=i(Rt,ve))===null)throw i(Rt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Ct.getShaderPrecisionFormat===void 0&&(Ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ve){throw console.error("THREE.WebGLRenderer: "+ve.message),ve}let Mr,is,Tr,eo,vs,Lo,_l,wl,Zp,el,Hu,$p,ql,$c,Mc,Cl,eu,dA,fA,pA,Ml,Ma;o();const Tl=new mn(en,Ct);this.xr=Tl,this.getContext=function(){return Ct},this.getContextAttributes=function(){return Ct.getContextAttributes()},this.forceContextLoss=function(){const ve=Mr.get("WEBGL_lose_context");ve&&ve.loseContext()},this.forceContextRestore=function(){const ve=Mr.get("WEBGL_lose_context");ve&&ve.restoreContext()},this.getPixelRatio=function(){return Cn},this.setPixelRatio=function(ve){ve!==void 0&&(Cn=ve,this.setSize(Mt,Yn,!1))},this.getSize=function(ve){return ve===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),ve=new Qn),ve.set(Mt,Yn)},this.setSize=function(ve,Rt,Et){Tl.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Mt=ve,Yn=Rt,we.width=Math.floor(ve*Cn),we.height=Math.floor(Rt*Cn),Et!==!1&&(we.style.width=ve+"px",we.style.height=Rt+"px"),this.setViewport(0,0,ve,Rt))},this.getDrawingBufferSize=function(ve){return ve===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),ve=new Qn),ve.set(Mt*Cn,Yn*Cn).floor()},this.setDrawingBufferSize=function(ve,Rt,Et){Mt=ve,Yn=Rt,Cn=Et,we.width=Math.floor(ve*Et),we.height=Math.floor(Rt*Et),this.setViewport(0,0,ve,Rt)},this.getCurrentViewport=function(ve){return ve===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),ve=new os),ve.copy(Ji)},this.getViewport=function(ve){return ve.copy(Fn)},this.setViewport=function(ve,Rt,Et,Ot){ve.isVector4?Fn.set(ve.x,ve.y,ve.z,ve.w):Fn.set(ve,Rt,Et,Ot),Tr.viewport(Ji.copy(Fn).multiplyScalar(Cn).floor())},this.getScissor=function(ve){return ve.copy(jn)},this.setScissor=function(ve,Rt,Et,Ot){ve.isVector4?jn.set(ve.x,ve.y,ve.z,ve.w):jn.set(ve,Rt,Et,Ot),Tr.scissor(qr.copy(jn).multiplyScalar(Cn).floor())},this.getScissorTest=function(){return Sn},this.setScissorTest=function(ve){Tr.setScissorTest(Sn=ve)},this.setOpaqueSort=function(ve){zn=ve},this.setTransparentSort=function(ve){hr=ve},this.getClearColor=function(ve){return ve===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),ve=new Fi),ve.copy(eu.getClearColor())},this.setClearColor=function(){eu.setClearColor.apply(eu,arguments)},this.getClearAlpha=function(){return eu.getClearAlpha()},this.setClearAlpha=function(){eu.setClearAlpha.apply(eu,arguments)},this.clear=function(ve,Rt,Et){let Ot=0;(ve===void 0||ve)&&(Ot|=Ct.COLOR_BUFFER_BIT),(Rt===void 0||Rt)&&(Ot|=Ct.DEPTH_BUFFER_BIT),(Et===void 0||Et)&&(Ot|=Ct.STENCIL_BUFFER_BIT),Ct.clear(Ot)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){we.removeEventListener("webglcontextlost",l,!1),we.removeEventListener("webglcontextrestored",f,!1),ql.dispose(),$c.dispose(),vs.dispose(),_l.dispose(),el.dispose(),Ma.dispose(),Tl.dispose(),Tl.removeEventListener("sessionstart",M),Tl.removeEventListener("sessionend",D),zu.stop()},this.renderBufferImmediate=function(ve,Rt){Ma.initAttributes();const Et=vs.get(ve);ve.hasPositions&&!Et.position&&(Et.position=Ct.createBuffer()),ve.hasNormals&&!Et.normal&&(Et.normal=Ct.createBuffer()),ve.hasUvs&&!Et.uv&&(Et.uv=Ct.createBuffer()),ve.hasColors&&!Et.color&&(Et.color=Ct.createBuffer());const Ot=Rt.getAttributes();ve.hasPositions&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,Et.position),Ct.bufferData(Ct.ARRAY_BUFFER,ve.positionArray,Ct.DYNAMIC_DRAW),Ma.enableAttribute(Ot.position),Ct.vertexAttribPointer(Ot.position,3,Ct.FLOAT,!1,0,0)),ve.hasNormals&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,Et.normal),Ct.bufferData(Ct.ARRAY_BUFFER,ve.normalArray,Ct.DYNAMIC_DRAW),Ma.enableAttribute(Ot.normal),Ct.vertexAttribPointer(Ot.normal,3,Ct.FLOAT,!1,0,0)),ve.hasUvs&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,Et.uv),Ct.bufferData(Ct.ARRAY_BUFFER,ve.uvArray,Ct.DYNAMIC_DRAW),Ma.enableAttribute(Ot.uv),Ct.vertexAttribPointer(Ot.uv,2,Ct.FLOAT,!1,0,0)),ve.hasColors&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,Et.color),Ct.bufferData(Ct.ARRAY_BUFFER,ve.colorArray,Ct.DYNAMIC_DRAW),Ma.enableAttribute(Ot.color),Ct.vertexAttribPointer(Ot.color,3,Ct.FLOAT,!1,0,0)),Ma.disableUnusedAttributes(),Ct.drawArrays(Ct.TRIANGLES,0,ve.count),ve.count=0},this.renderBufferDirect=function(ve,Rt,Et,Ot,It,En){Rt===null&&(Rt=As);const Kn=It.isMesh&&It.matrixWorld.determinant()<0,ti=ye(ve,Rt,Ot,It);Tr.setMaterial(Ot,Kn);let Jn=Et.index;const Vn=Et.attributes.position;if(Jn===null){if(Vn===void 0||Vn.count===0)return}else if(Jn.count===0)return;let ai=1;Ot.wireframe===!0&&(Jn=Zp.getWireframeAttribute(Et),ai=2),(Ot.morphTargets||Ot.morphNormals)&&dA.update(It,Et,Ot,ti),Ma.setup(It,Ot,ti,Et,Jn);let ci,tr=fA;Jn!==null&&(ci=wl.get(Jn),(tr=pA).setIndex(ci));const wr=Jn!==null?Jn.count:Vn.count,rr=Et.drawRange.start*ai,Ni=Et.drawRange.count*ai,nr=En!==null?En.start*ai:0,Bi=En!==null?En.count*ai:1/0,sr=Math.max(rr,nr),Ur=Math.min(wr,rr+Ni,nr+Bi)-1,$r=Math.max(0,Ur-sr+1);if($r!==0){if(It.isMesh)Ot.wireframe===!0?(Tr.setLineWidth(Ot.wireframeLinewidth*t()),tr.setMode(Ct.LINES)):tr.setMode(Ct.TRIANGLES);else if(It.isLine){let Eo=Ot.linewidth;Eo===void 0&&(Eo=1),Tr.setLineWidth(Eo*t()),It.isLineSegments?tr.setMode(Ct.LINES):It.isLineLoop?tr.setMode(Ct.LINE_LOOP):tr.setMode(Ct.LINE_STRIP)}else It.isPoints?tr.setMode(Ct.POINTS):It.isSprite&&tr.setMode(Ct.TRIANGLES);if(It.isInstancedMesh)tr.renderInstances(sr,$r,It.count);else if(Et.isInstancedBufferGeometry){const Eo=Math.min(Et.instanceCount,Et._maxInstanceCount);tr.renderInstances(sr,$r,Eo)}else tr.render(sr,$r)}},this.compile=function(ve,Rt){(Ht=$c.get(ve)).init(),ve.traverseVisible(function(Et){Et.isLight&&Et.layers.test(Rt.layers)&&(Ht.pushLight(Et),Et.castShadow&&Ht.pushShadow(Et))}),Ht.setupLights(),ve.traverse(function(Et){const Ot=Et.material;if(Ot)if(Array.isArray(Ot))for(let It=0;It<Ot.length;It++)oe(Ot[It],ve,Et);else oe(Ot,ve,Et)})};let Ng=null;const zu=new F;zu.setAnimationLoop(function(ve){Ng&&Ng(ve)}),typeof window<"u"&&zu.setContext(window),this.setAnimationLoop=function(ve){Ng=ve,Tl.setAnimationLoop(ve),ve===null?zu.stop():zu.start()},Tl.addEventListener("sessionstart",M),Tl.addEventListener("sessionend",D),this.render=function(ve,Rt){let Et,Ot;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Et=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Ot=arguments[3]),Rt!==void 0&&Rt.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(Wn===!0)return;ve.autoUpdate===!0&&ve.updateMatrixWorld(),Rt.parent===null&&Rt.updateMatrixWorld(),Tl.enabled===!0&&Tl.isPresenting===!0&&(Rt=Tl.getCamera(Rt)),ve.isScene===!0&&ve.onBeforeRender(en,ve,Rt,Et||oi),(Ht=$c.get(ve,Qt.length)).init(),Qt.push(Ht),Ri.multiplyMatrices(Rt.projectionMatrix,Rt.matrixWorldInverse),Ii.setFromProjectionMatrix(Ri),pr=this.localClippingEnabled,vi=Mc.init(this.clippingPlanes,pr,Rt),(gt=ql.get(ve,Zt.length)).init(),Zt.push(gt),G(ve,Rt,0,en.sortObjects),gt.finish(),en.sortObjects===!0&&gt.sort(zn,hr),vi===!0&&Mc.beginShadows();const It=Ht.state.shadowsArray;Cl.render(It,ve,Rt),Ht.setupLights(),Ht.setupLightsView(Rt),vi===!0&&Mc.endShadows(),this.info.autoReset===!0&&this.info.reset(),Et!==void 0&&this.setRenderTarget(Et),eu.render(gt,ve,Rt,Ot);const En=gt.opaque,Kn=gt.transparent;En.length>0&&$(En,ve,Rt),Kn.length>0&&$(Kn,ve,Rt),oi!==null&&(Lo.updateRenderTargetMipmap(oi),Lo.updateMultisampleRenderTarget(oi)),ve.isScene===!0&&ve.onAfterRender(en,ve,Rt),Tr.buffers.depth.setTest(!0),Tr.buffers.depth.setMask(!0),Tr.buffers.color.setMask(!0),Tr.setPolygonOffset(!1),Ma.resetDefaultState(),qn=-1,$i=null,Qt.pop(),Ht=Qt.length>0?Qt[Qt.length-1]:null,Zt.pop(),gt=Zt.length>0?Zt[Zt.length-1]:null},this.getActiveCubeFace=function(){return ii},this.getActiveMipmapLevel=function(){return lr},this.getRenderTarget=function(){return oi},this.setRenderTarget=function(ve,Rt=0,Et=0){oi=ve,ii=Rt,lr=Et,ve&&vs.get(ve).__webglFramebuffer===void 0&&Lo.setupRenderTarget(ve);let Ot=null,It=!1,En=!1;if(ve){const Kn=ve.texture;(Kn.isDataTexture3D||Kn.isDataTexture2DArray)&&(En=!0);const ti=vs.get(ve).__webglFramebuffer;ve.isWebGLCubeRenderTarget?(Ot=ti[Rt],It=!0):Ot=ve.isWebGLMultisampleRenderTarget?vs.get(ve).__webglMultisampledFramebuffer:ti,Ji.copy(ve.viewport),qr.copy(ve.scissor),Tt=ve.scissorTest}else Ji.copy(Fn).multiplyScalar(Cn).floor(),qr.copy(jn).multiplyScalar(Cn).floor(),Tt=Sn;if(Tr.bindFramebuffer(Ct.FRAMEBUFFER,Ot),Tr.viewport(Ji),Tr.scissor(qr),Tr.setScissorTest(Tt),It){const Kn=vs.get(ve.texture);Ct.framebufferTexture2D(Ct.FRAMEBUFFER,Ct.COLOR_ATTACHMENT0,Ct.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Kn.__webglTexture,Et)}else if(En){const Kn=vs.get(ve.texture),ti=Rt||0;Ct.framebufferTextureLayer(Ct.FRAMEBUFFER,Ct.COLOR_ATTACHMENT0,Kn.__webglTexture,Et||0,ti)}},this.readRenderTargetPixels=function(ve,Rt,Et,Ot,It,En,Kn){if(!ve||!ve.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ti=vs.get(ve).__webglFramebuffer;if(ve.isWebGLCubeRenderTarget&&Kn!==void 0&&(ti=ti[Kn]),ti){Tr.bindFramebuffer(Ct.FRAMEBUFFER,ti);try{const Jn=ve.texture,Vn=Jn.format,ai=Jn.type;if(Vn!==Uo&&Ml.convert(Vn)!==Ct.getParameter(Ct.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ci=ai===Ea&&(Mr.has("EXT_color_buffer_half_float")||is.isWebGL2&&Mr.has("EXT_color_buffer_float"));if(!(ai===xa||Ml.convert(ai)===Ct.getParameter(Ct.IMPLEMENTATION_COLOR_READ_TYPE)||ai===ra&&(is.isWebGL2||Mr.has("OES_texture_float")||Mr.has("WEBGL_color_buffer_float"))||ci))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ct.checkFramebufferStatus(Ct.FRAMEBUFFER)===Ct.FRAMEBUFFER_COMPLETE?Rt>=0&&Rt<=ve.width-Ot&&Et>=0&&Et<=ve.height-It&&Ct.readPixels(Rt,Et,Ot,It,Ml.convert(Vn),Ml.convert(ai),En):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Jn=oi!==null?vs.get(oi).__webglFramebuffer:null;Tr.bindFramebuffer(Ct.FRAMEBUFFER,Jn)}}},this.copyFramebufferToTexture=function(ve,Rt,Et=0){const Ot=Math.pow(2,-Et),It=Math.floor(Rt.image.width*Ot),En=Math.floor(Rt.image.height*Ot),Kn=Ml.convert(Rt.format);Lo.setTexture2D(Rt,0),Ct.copyTexImage2D(Ct.TEXTURE_2D,Et,Kn,ve.x,ve.y,It,En,0),Tr.unbindTexture()},this.copyTextureToTexture=function(ve,Rt,Et,Ot=0){const It=Rt.image.width,En=Rt.image.height,Kn=Ml.convert(Et.format),ti=Ml.convert(Et.type);Lo.setTexture2D(Et,0),Ct.pixelStorei(Ct.UNPACK_FLIP_Y_WEBGL,Et.flipY),Ct.pixelStorei(Ct.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Et.premultiplyAlpha),Ct.pixelStorei(Ct.UNPACK_ALIGNMENT,Et.unpackAlignment),Rt.isDataTexture?Ct.texSubImage2D(Ct.TEXTURE_2D,Ot,ve.x,ve.y,It,En,Kn,ti,Rt.image.data):Rt.isCompressedTexture?Ct.compressedTexSubImage2D(Ct.TEXTURE_2D,Ot,ve.x,ve.y,Rt.mipmaps[0].width,Rt.mipmaps[0].height,Kn,Rt.mipmaps[0].data):Ct.texSubImage2D(Ct.TEXTURE_2D,Ot,ve.x,ve.y,Kn,ti,Rt.image),Ot===0&&Et.generateMipmaps&&Ct.generateMipmap(Ct.TEXTURE_2D),Tr.unbindTexture()},this.copyTextureToTexture3D=function(ve,Rt,Et,Ot,It=0){if(en.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:En,height:Kn,data:ti}=Et.image,Jn=Ml.convert(Ot.format),Vn=Ml.convert(Ot.type);let ai;if(Ot.isDataTexture3D)Lo.setTexture3D(Ot,0),ai=Ct.TEXTURE_3D;else{if(!Ot.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Lo.setTexture2DArray(Ot,0),ai=Ct.TEXTURE_2D_ARRAY}Ct.pixelStorei(Ct.UNPACK_FLIP_Y_WEBGL,Ot.flipY),Ct.pixelStorei(Ct.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ot.premultiplyAlpha),Ct.pixelStorei(Ct.UNPACK_ALIGNMENT,Ot.unpackAlignment);const ci=Ct.getParameter(Ct.UNPACK_ROW_LENGTH),tr=Ct.getParameter(Ct.UNPACK_IMAGE_HEIGHT),wr=Ct.getParameter(Ct.UNPACK_SKIP_PIXELS),rr=Ct.getParameter(Ct.UNPACK_SKIP_ROWS),Ni=Ct.getParameter(Ct.UNPACK_SKIP_IMAGES);Ct.pixelStorei(Ct.UNPACK_ROW_LENGTH,En),Ct.pixelStorei(Ct.UNPACK_IMAGE_HEIGHT,Kn),Ct.pixelStorei(Ct.UNPACK_SKIP_PIXELS,ve.min.x),Ct.pixelStorei(Ct.UNPACK_SKIP_ROWS,ve.min.y),Ct.pixelStorei(Ct.UNPACK_SKIP_IMAGES,ve.min.z),Ct.texSubImage3D(ai,It,Rt.x,Rt.y,Rt.z,ve.max.x-ve.min.x+1,ve.max.y-ve.min.y+1,ve.max.z-ve.min.z+1,Jn,Vn,ti),Ct.pixelStorei(Ct.UNPACK_ROW_LENGTH,ci),Ct.pixelStorei(Ct.UNPACK_IMAGE_HEIGHT,tr),Ct.pixelStorei(Ct.UNPACK_SKIP_PIXELS,wr),Ct.pixelStorei(Ct.UNPACK_SKIP_ROWS,rr),Ct.pixelStorei(Ct.UNPACK_SKIP_IMAGES,Ni),It===0&&Ot.generateMipmaps&&Ct.generateMipmap(ai),Tr.unbindTexture()},this.initTexture=function(ve){Lo.setTexture2D(ve,0),Tr.unbindTexture()},this.resetState=function(){ii=0,lr=0,oi=null,Tr.reset(),Ma.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ei(s,t){this.array=s,this.stride=t,this.count=s!==void 0?s.length/t:0,this.usage=yh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=qi.generateUUID()}function pn(s,t,i,o){this.name="",this.data=s,this.itemSize=t,this.offset=i,this.normalized=o===!0}function Oi(s,t,i,o,l,f){Ld.subVectors(s,i).addScalar(.5).multiply(o),l!==void 0?(vp.x=f*Ld.x-l*Ld.y,vp.y=l*Ld.x+f*Ld.y):vp.copy(Ld),s.copy(t),s.x+=vp.x,s.y+=vp.y,s.applyMatrix4(Ev)}function Mi(s,t){te.call(this,s,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ir,this.bindMatrixInverse=new ir}function Ti(){I.call(this),this.type="Bone"}function Xr(s,t,i){te.call(this,s,t),this.instanceMatrix=new y(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}function zi(s=new U,t=new ta){I.call(this),this.type="Line",this.geometry=s,this.material=t,this.updateMorphTargets()}function er(s,t){zi.call(this,s,t),this.type="LineSegments"}function kr(s=new U,t=new Tu){I.call(this),this.type="Points",this.geometry=s,this.material=t,this.updateMorphTargets()}function Os(s,t,i,o,l,f,B){const M=$m.distanceSqToPoint(s);if(M<i){const D=new Je;$m.closestPointToPoint(s,D),D.applyMatrix4(o);const G=l.ray.origin.distanceTo(D);if(G<l.near||G>l.far)return;f.push({distance:G,distanceToRay:Math.sqrt(M),point:D,index:t,face:null,object:B})}}function ro(s,t,i,o,l){let f,B;if(l===function(M,D,G,$){let ie=0;for(let oe=D,he=G-$;oe<G;oe+=$)ie+=(M[he]-M[oe])*(M[oe+1]+M[he+1]),he=oe;return ie}(s,t,i,o)>0)for(f=t;f<i;f+=o)B=Nt(f,s[f],s[f+1],B);else for(f=i-o;f>=t;f-=o)B=Nt(f,s[f],s[f+1],B);return B&&Le(B,B.next)&&(an(B),B=B.next),B}function pi(s,t){if(!s)return s;t||(t=s);let i,o=s;do if(i=!1,o.steiner||!Le(o,o.next)&&_e(o.prev,o,o.next)!==0)o=o.next;else{if(an(o),(o=t=o.prev)===o.next)break;i=!0}while(i||o!==t);return t}function Rr(s,t,i,o,l,f,B){if(!s)return;!B&&f&&function($,ie,oe,he){let ye=$;do ye.z===null&&(ye.z=ce(ye.x,ye.y,ie,oe,he)),ye.prevZ=ye.prev,ye.nextZ=ye.next,ye=ye.next;while(ye!==$);ye.prevZ.nextZ=null,ye.prevZ=null,function(we){let be,ke,Xe,it,lt,pt,mt,ot,kt=1;do{for(ke=we,we=null,lt=null,pt=0;ke;){for(pt++,Xe=ke,mt=0,be=0;be<kt&&(mt++,Xe=Xe.nextZ);be++);for(ot=kt;mt>0||ot>0&&Xe;)mt!==0&&(ot===0||!Xe||ke.z<=Xe.z)?(it=ke,ke=ke.nextZ,mt--):(it=Xe,Xe=Xe.nextZ,ot--),lt?lt.nextZ=it:we=it,it.prevZ=lt,lt=it;ke=Xe}lt.nextZ=null,kt*=2}while(pt>1)}(ye)}(s,o,l,f);let M,D,G=s;for(;s.prev!==s.next;)if(M=s.prev,D=s.next,f?function($,ie,oe,he){const ye=$.prev,we=$,be=$.next;if(_e(ye,we,be)>=0)return!1;const ke=ye.x<we.x?ye.x<be.x?ye.x:be.x:we.x<be.x?we.x:be.x,Xe=ye.y<we.y?ye.y<be.y?ye.y:be.y:we.y<be.y?we.y:be.y,it=ye.x>we.x?ye.x>be.x?ye.x:be.x:we.x>be.x?we.x:be.x,lt=ye.y>we.y?ye.y>be.y?ye.y:be.y:we.y>be.y?we.y:be.y,pt=ce(ke,Xe,ie,oe,he),mt=ce(it,lt,ie,oe,he);let ot=$.prevZ,kt=$.nextZ;for(;ot&&ot.z>=pt&&kt&&kt.z<=mt;){if(ot!==$.prev&&ot!==$.next&&ge(ye.x,ye.y,we.x,we.y,be.x,be.y,ot.x,ot.y)&&_e(ot.prev,ot,ot.next)>=0||(ot=ot.prevZ,kt!==$.prev&&kt!==$.next&&ge(ye.x,ye.y,we.x,we.y,be.x,be.y,kt.x,kt.y)&&_e(kt.prev,kt,kt.next)>=0))return!1;kt=kt.nextZ}for(;ot&&ot.z>=pt;){if(ot!==$.prev&&ot!==$.next&&ge(ye.x,ye.y,we.x,we.y,be.x,be.y,ot.x,ot.y)&&_e(ot.prev,ot,ot.next)>=0)return!1;ot=ot.prevZ}for(;kt&&kt.z<=mt;){if(kt!==$.prev&&kt!==$.next&&ge(ye.x,ye.y,we.x,we.y,be.x,be.y,kt.x,kt.y)&&_e(kt.prev,kt,kt.next)>=0)return!1;kt=kt.nextZ}return!0}(s,o,l,f):function($){const ie=$.prev,oe=$,he=$.next;if(_e(ie,oe,he)>=0)return!1;let ye=$.next.next;for(;ye!==$.prev;){if(ge(ie.x,ie.y,oe.x,oe.y,he.x,he.y,ye.x,ye.y)&&_e(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}(s))t.push(M.i/i),t.push(s.i/i),t.push(D.i/i),an(s),s=D.next,G=D.next;else if((s=D)===G){B?B===1?Rr(s=function($,ie,oe){let he=$;do{const ye=he.prev,we=he.next.next;!Le(ye,we)&&qe(ye,he,he.next,we)&&wn(ye,we)&&wn(we,ye)&&(ie.push(ye.i/oe),ie.push(he.i/oe),ie.push(we.i/oe),an(he),an(he.next),he=$=we),he=he.next}while(he!==$);return pi(he)}(pi(s),t,i),t,i,o,l,f,2):B===2&&function($,ie,oe,he,ye,we){let be=$;do{let ke=be.next.next;for(;ke!==be.prev;){if(be.i!==ke.i&&function(Xe,it){return Xe.next.i!==it.i&&Xe.prev.i!==it.i&&!function(lt,pt){let mt=lt;do{if(mt.i!==lt.i&&mt.next.i!==lt.i&&mt.i!==pt.i&&mt.next.i!==pt.i&&qe(mt,mt.next,lt,pt))return!0;mt=mt.next}while(mt!==lt);return!1}(Xe,it)&&(wn(Xe,it)&&wn(it,Xe)&&function(lt,pt){let mt=lt,ot=!1;const kt=(lt.x+pt.x)/2,gt=(lt.y+pt.y)/2;do mt.y>gt!=mt.next.y>gt&&mt.next.y!==mt.y&&kt<(mt.next.x-mt.x)*(gt-mt.y)/(mt.next.y-mt.y)+mt.x&&(ot=!ot),mt=mt.next;while(mt!==lt);return ot}(Xe,it)&&(_e(Xe.prev,Xe,it.prev)||_e(Xe,it.prev,it))||Le(Xe,it)&&_e(Xe.prev,Xe,Xe.next)>0&&_e(it.prev,it,it.next)>0)}(be,ke)){let Xe=xn(be,ke);return be=pi(be,be.next),Xe=pi(Xe,Xe.next),Rr(be,ie,oe,he,ye,we),void Rr(Xe,ie,oe,he,ye,we)}ke=ke.next}be=be.next}while(be!==$)}(s,t,i,o,l,f):Rr(pi(s),t,i,o,l,f,1);break}}function to(s,t,i,o){const l=[];let f,B,M;for(f=0,B=t.length;f<B;f++)(M=ro(s,t[f]*o,f<B-1?t[f+1]*o:s.length,o,!1))===M.next&&(M.steiner=!0),l.push(function(D){let G=D,$=D;do(G.x<$.x||G.x===$.x&&G.y<$.y)&&($=G),G=G.next;while(G!==D);return $}(M));for(l.sort(as),f=0;f<l.length;f++)(function(D,G){if(G=function($,ie){let oe=ie;const he=$.x,ye=$.y;let we,be=-1/0;do{if(ye<=oe.y&&ye>=oe.next.y&&oe.next.y!==oe.y){const mt=oe.x+(ye-oe.y)*(oe.next.x-oe.x)/(oe.next.y-oe.y);if(mt<=he&&mt>be){if(be=mt,mt===he){if(ye===oe.y)return oe;if(ye===oe.next.y)return oe.next}we=oe.x<oe.next.x?oe:oe.next}}oe=oe.next}while(oe!==ie);if(!we)return null;if(he===be)return we;const ke=we,Xe=we.x,it=we.y;let lt,pt=1/0;oe=we;do he>=oe.x&&oe.x>=Xe&&he!==oe.x&&ge(ye<it?he:be,ye,Xe,it,ye<it?be:he,ye,oe.x,oe.y)&&(lt=Math.abs(ye-oe.y)/(he-oe.x),wn(oe,$)&&(lt<pt||lt===pt&&(oe.x>we.x||oe.x===we.x&&function(mt,ot){return _e(mt.prev,mt,ot.prev)<0&&_e(ot.next,mt,mt.next)<0}(we,oe)))&&(we=oe,pt=lt)),oe=oe.next;while(oe!==ke);return we}(D,G)){const $=xn(G,D);pi(G,G.next),pi($,$.next)}})(l[f],i),i=pi(i,i.next);return i}function as(s,t){return s.x-t.x}function ce(s,t,i,o,l){return s=32767*(s-i)*l,t=32767*(t-o)*l,s=16711935&(s|s<<8),s=252645135&(s|s<<4),s=858993459&(s|s<<2),s=1431655765&(s|s<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),s|t<<1}function ge(s,t,i,o,l,f,B,M){return(l-B)*(t-M)-(s-B)*(f-M)>=0&&(s-B)*(o-M)-(i-B)*(t-M)>=0&&(i-B)*(f-M)-(l-B)*(o-M)>=0}function _e(s,t,i){return(t.y-s.y)*(i.x-t.x)-(t.x-s.x)*(i.y-t.y)}function Le(s,t){return s.x===t.x&&s.y===t.y}function qe(s,t,i,o){const l=St(_e(s,t,i)),f=St(_e(s,t,o)),B=St(_e(i,o,s)),M=St(_e(i,o,t));return l!==f&&B!==M||!(l!==0||!yt(s,i,t))||!(f!==0||!yt(s,o,t))||!(B!==0||!yt(i,s,o))||!(M!==0||!yt(i,t,o))}function yt(s,t,i){return t.x<=Math.max(s.x,i.x)&&t.x>=Math.min(s.x,i.x)&&t.y<=Math.max(s.y,i.y)&&t.y>=Math.min(s.y,i.y)}function St(s){return s>0?1:s<0?-1:0}function wn(s,t){return _e(s.prev,s,s.next)<0?_e(s,t,s.next)>=0&&_e(s,s.prev,t)>=0:_e(s,t,s.prev)<0||_e(s,s.next,t)<0}function xn(s,t){const i=new Pn(s.i,s.x,s.y),o=new Pn(t.i,t.x,t.y),l=s.next,f=t.prev;return s.next=t,t.prev=s,i.next=l,l.prev=i,o.next=i,i.prev=o,f.next=o,o.prev=f,o}function Nt(s,t,i,o){const l=new Pn(s,t,i);return o?(l.next=o.next,l.prev=o,o.next.prev=l,o.next=l):(l.prev=l,l.next=l),l}function an(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Pn(s,t,i){this.i=s,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xi(s){const t=s.length;t>2&&s[t-1].equals(s[0])&&s.pop()}function Ui(s,t){for(let i=0;i<t.length;i++)s.push(t[i].x),s.push(t[i].y)}function Xi(s,t,i){U.call(this),this.type="ParametricGeometry",this.parameters={func:s,slices:t,stacks:i};const o=[],l=[],f=[],B=[],M=new Je,D=new Je,G=new Je,$=new Je,ie=new Je;s.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const oe=t+1;for(let he=0;he<=i;he++){const ye=he/i;for(let we=0;we<=t;we++){const be=we/t;s(be,ye,D),l.push(D.x,D.y,D.z),be-1e-5>=0?(s(be-1e-5,ye,G),$.subVectors(D,G)):(s(be+1e-5,ye,G),$.subVectors(G,D)),ye-1e-5>=0?(s(be,ye-1e-5,G),ie.subVectors(D,G)):(s(be,ye+1e-5,G),ie.subVectors(G,D)),M.crossVectors($,ie).normalize(),f.push(M.x,M.y,M.z),B.push(be,ye)}}for(let he=0;he<i;he++)for(let ye=0;ye<t;ye++){const we=he*oe+ye,be=he*oe+ye+1,ke=(he+1)*oe+ye+1,Xe=(he+1)*oe+ye;o.push(we,be,Xe),o.push(be,ke,Xe)}this.setIndex(o),this.setAttribute("position",new P(l,3)),this.setAttribute("normal",new P(f,3)),this.setAttribute("uv",new P(B,2))}function fr(s){h.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(s)}function ur(s){fr.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=qi.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(s)}function Vi(s,t,i,o){this.parameterPositions=s,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function hs(s,t,i,o){Vi.call(this,s,t,i,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Jr(s,t,i,o){Vi.call(this,s,t,i,o)}function vr(s,t,i,o){Vi.call(this,s,t,i,o)}function Ss(s,t,i,o){Vi.call(this,s,t,i,o)}function po(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zd;case"vector":case"vector2":case"vector3":case"vector4":return Vd;case"color":return tg;case"quaternion":return Oh;case"bool":case"boolean":return Lu;case"string":return Du}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(s.type);if(s.times===void 0){const i=[],o=[];Xs.flattenJSON(s.keys,i,o,"value"),s.times=i,s.values=o}return t.parse!==void 0?t.parse(s):new t(s.name,s.times,s.values,s.interpolation)}function Qs(s,t,i){const o=this;let l=!1,f=0,B=0,M;const D=[];this.onStart=void 0,this.onLoad=s,this.onProgress=t,this.onError=i,this.itemStart=function(G){B++,l===!1&&o.onStart!==void 0&&o.onStart(G,f,B),l=!0},this.itemEnd=function(G){f++,o.onProgress!==void 0&&o.onProgress(G,f,B),f===B&&(l=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(G){o.onError!==void 0&&o.onError(G)},this.resolveURL=function(G){return M?M(G):G},this.setURLModifier=function(G){return M=G,this},this.addHandler=function(G,$){return D.push(G,$),this},this.removeHandler=function(G){const $=D.indexOf(G);return $!==-1&&D.splice($,2),this},this.getHandler=function(G){for(let $=0,ie=D.length;$<ie;$+=2){const oe=D[$],he=D[$+1];if(oe.global&&(oe.lastIndex=0),oe.test(G))return he}return null}}function Zr(s){this.manager=s!==void 0?s:P0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}function Fs(s){Zr.call(this,s)}function Ds(s){Zr.call(this,s)}function _o(s){Zr.call(this,s)}function Qa(s){Zr.call(this,s)}function js(){this.type="Curve",this.arcLengthDivisions=200}function sl(){function s(f,B,M,D){t=f,i=M,o=-3*f+3*B-2*M-D,l=2*f-2*B+M+D}let t=0,i=0,o=0,l=0;return{initCatmullRom:function(f,B,M,D,G){s(B,M,G*(M-f),G*(D-B))},initNonuniformCatmullRom:function(f,B,M,D,G,$,ie){let oe=(B-f)/G-(M-f)/(G+$)+(M-B)/$,he=(M-B)/$-(D-B)/($+ie)+(D-M)/ie;s(B,M,oe*=$,he*=$)},calc:function(f){const B=f*f;return t+i*f+o*B+l*(B*f)}}}function Pl(s,t,i,o,l){const f=.5*(o-t),B=.5*(l-i),M=s*s;return(2*i-2*o+f+B)*(s*M)+(-3*i+3*o-2*f-B)*M+f*s+i}function Ia(s,t,i,o){return function(l,f){const B=1-l;return B*B*f}(s,t)+function(l,f){return 2*(1-l)*l*f}(s,i)+function(l,f){return l*l*f}(s,o)}function Ra(s,t,i,o,l){return function(f,B){const M=1-f;return M*M*M*B}(s,t)+function(f,B){const M=1-f;return 3*M*M*f*B}(s,i)+function(f,B){return 3*(1-f)*f*f*B}(s,o)+function(f,B){return f*f*f*B}(s,l)}function Ba(){U.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function ja(s,t,i,o){typeof i=="number"&&(o=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),y.call(this,s,t,i),this.meshPerAttribute=o||1}function ol(s){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Zr.call(this,s),this.options={premultiplyAlpha:"none"}}function tc(s,t,i){const o=Array.from(s),l=t/i.resolution,f=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*l,B=[];let M=0,D=0;for(let G=0;G<o.length;G++){const $=o[G];if($===`
`)M=0,D-=f;else{const ie=function(oe,he,ye,we,be){const ke=be.glyphs[oe]||be.glyphs["?"];if(!ke)return void console.error('THREE.Font: character "'+oe+'" does not exists in font family '+be.familyName+".");const Xe=new zp;let it,lt,pt,mt,ot,kt,gt,Ht;if(ke.o){const Zt=ke._cachedOutline||(ke._cachedOutline=ke.o.split(" "));for(let Qt=0,en=Zt.length;Qt<en;)switch(Zt[Qt++]){case"m":it=Zt[Qt++]*he+ye,lt=Zt[Qt++]*he+we,Xe.moveTo(it,lt);break;case"l":it=Zt[Qt++]*he+ye,lt=Zt[Qt++]*he+we,Xe.lineTo(it,lt);break;case"q":pt=Zt[Qt++]*he+ye,mt=Zt[Qt++]*he+we,ot=Zt[Qt++]*he+ye,kt=Zt[Qt++]*he+we,Xe.quadraticCurveTo(ot,kt,pt,mt);break;case"b":pt=Zt[Qt++]*he+ye,mt=Zt[Qt++]*he+we,ot=Zt[Qt++]*he+ye,kt=Zt[Qt++]*he+we,gt=Zt[Qt++]*he+ye,Ht=Zt[Qt++]*he+we,Xe.bezierCurveTo(ot,kt,gt,Ht,pt,mt)}}return{offsetX:ke.ha*he,path:Xe}}($,l,M,D,i);M+=ie.offsetX,B.push(ie.path)}}return B}function Ol(){return(typeof performance>"u"?Date:performance).now()}function qs(s,t,i){const o=i||Fo.parseTrackName(t);this._targetGroup=s,this._bindings=s.subscribe_(t,o)}function Fo(s,t,i){this.path=t,this.parsedPath=i||Fo.parseTrackName(t),this.node=Fo.findNode(s,this.parsedPath.nodeName)||s,this.rootNode=s}function rd(s,t,i){ei.call(this,s,t),this.meshPerAttribute=i||1}function sd(s,t,i,o,l){this.buffer=s,this.type=t,this.itemSize=i,this.elementSize=o,this.count=l,this.version=0}function rh(s,t,i=0,o=1/0){this.ray=new Ql(s,t),this.near=i,this.far=o,this.camera=null,this.layers=new Im,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Dc(s,t){return s.distance-t.distance}function od(s,t,i,o){if(s.layers.test(t.layers)&&s.raycast(t,i),o===!0){const l=s.children;for(let f=0,B=l.length;f<B;f++)od(l[f],t,i,!0)}}function sh(s){I.call(this),this.material=s,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}function Pf(s){const t=[];s&&s.isBone&&t.push(s);for(let i=0;i<s.children.length;i++)t.push.apply(t,Pf(s.children[i]));return t}function no(s,t,i,o,l,f,B){bc.set(l,f,B).unproject(o);const M=t[s];if(M!==void 0){const D=i.getAttribute("position");for(let G=0,$=M.length;G<$;G++)D.setXYZ(M[G],bc.x,bc.y,bc.z)}}function Of(s){const t=Math.max(s.r,s.g,s.b),i=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return s.multiplyScalar(Math.pow(2,-i)),(i+128)/255}function Ff(s){const t=new aa(3*El,3*El,s);return t.texture.mapping=es,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function oh(s,t,i,o,l){s.viewport.set(t,i,o,l),s.scissor.set(t,i,o,l)}function Nf(){const s=new Qn(1,1);return new Bu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:s},inputEncoding:{value:bl[lo]},outputEncoding:{value:bl[lo]}},vertexShader:ah(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${du()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ll,depthTest:!1,depthWrite:!1})}function kf(){return new Bu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:bl[lo]},outputEncoding:{value:bl[lo]}},vertexShader:ah(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${du()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ll,depthTest:!1,depthWrite:!1})}function ah(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function du(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}const ia=0,wo=1,ad=2,al=1,Pc=2,Co=3,Ns=0,Js=1,fu=2,ll=0,Wa=1,ld=2,cd=3,ud=4,Uf=5,nc=100,Gf=101,Hf=102,hd=103,dd=104,zf=200,lh=201,fd=202,pu=203,pd=204,La=205,Is=206,Vf=207,On=208,No=209,ch=210,md=0,Qf=1,ic=2,Fl=3,Nl=4,mu=5,uh=6,Ro=7,Oc=0,so=1,ya=2,Ka=0,hh=1,gu=2,Si=3,rc=4,dh=5,Da=301,sc=302,fh=303,Ws=304,es=306,ko=307,cl=1e3,Yo=1001,kl=1002,mo=1003,ph=1004,Mo=1005,nt=1006,Au=1007,oc=1008,xa=1009,Xa=1010,Ul=1011,ac=1012,lc=1013,Ya=1014,ra=1015,Ea=1016,ul=1017,Gl=1018,cc=1019,ma=1020,Fc=1021,Es=1022,Uo=1023,gd=1024,hl=1025,mh=Uo,qo=1026,sa=1027,gh=1028,Ci=1029,gr=1030,ts=1031,oo=1032,ls=1033,Jo=33776,Gi=33777,oa=33778,jr=33779,Nc=35840,uc=35841,Go=35842,Ho=35843,br=36196,Pa=37492,hc=37496,zo=37808,ms=37809,Us=37810,Yr=37811,gs=37812,ao=37813,qa=37814,Hl=37815,Ad=37816,vd=37817,Ah=37818,vh=37819,yd=37820,jf=37821,xd=36492,ds=37840,ba=37841,io=37842,_a=37843,Oa=37844,zl=37845,vu=37846,bm=37847,Wf=37848,Kf=37849,Xf=37850,Fa=37851,c0=37852,Zo=37853,lo=3e3,Zs=3001,yu=3007,Rs=3002,u0=3003,_m=3004,wm=3005,Cm=3006,Yf=3201,xu=0,qf=1,Jf=7680,Yi=519,yh=35044,Eu=35048,wa="300 es";Object.assign(k.prototype,{addEventListener:function(s,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[s]===void 0&&(i[s]=[]),i[s].indexOf(t)===-1&&i[s].push(t)},hasEventListener:function(s,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[s]!==void 0&&i[s].indexOf(t)!==-1},removeEventListener:function(s,t){if(this._listeners===void 0)return;const i=this._listeners[s];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}},dispatchEvent:function(s){if(this._listeners===void 0)return;const t=this._listeners[s.type];if(t!==void 0){s.target=this;const i=t.slice(0);for(let o=0,l=i.length;o<l;o++)i[o].call(this,s);s.target=null}}});const Bo=[];for(let s=0;s<256;s++)Bo[s]=(s<16?"0":"")+s.toString(16);let kc=1234567;const qi={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const s=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return(Bo[255&s]+Bo[s>>8&255]+Bo[s>>16&255]+Bo[s>>24&255]+"-"+Bo[255&t]+Bo[t>>8&255]+"-"+Bo[t>>16&15|64]+Bo[t>>24&255]+"-"+Bo[63&i|128]+Bo[i>>8&255]+"-"+Bo[i>>16&255]+Bo[i>>24&255]+Bo[255&o]+Bo[o>>8&255]+Bo[o>>16&255]+Bo[o>>24&255]).toUpperCase()},clamp:function(s,t,i){return Math.max(t,Math.min(i,s))},euclideanModulo:function(s,t){return(s%t+t)%t},mapLinear:function(s,t,i,o,l){return o+(s-t)*(l-o)/(i-t)},inverseLerp:function(s,t,i){return s!==t?(i-s)/(t-s):0},lerp:function(s,t,i){return(1-i)*s+i*t},damp:function(s,t,i,o){return qi.lerp(s,t,1-Math.exp(-i*o))},pingpong:function(s,t=1){return t-Math.abs(qi.euclideanModulo(s,2*t)-t)},smoothstep:function(s,t,i){return s<=t?0:s>=i?1:(s=(s-t)/(i-t))*s*(3-2*s)},smootherstep:function(s,t,i){return s<=t?0:s>=i?1:(s=(s-t)/(i-t))*s*s*(s*(6*s-15)+10)},randInt:function(s,t){return s+Math.floor(Math.random()*(t-s+1))},randFloat:function(s,t){return s+Math.random()*(t-s)},randFloatSpread:function(s){return s*(.5-Math.random())},seededRandom:function(s){return s!==void 0&&(kc=s%2147483647),((kc=16807*kc%2147483647)-1)/2147483646},degToRad:function(s){return s*qi.DEG2RAD},radToDeg:function(s){return s*qi.RAD2DEG},isPowerOfTwo:function(s){return(s&s-1)==0&&s!==0},ceilPowerOfTwo:function(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},floorPowerOfTwo:function(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},setQuaternionFromProperEuler:function(s,t,i,o,l){const f=Math.cos,B=Math.sin,M=f(i/2),D=B(i/2),G=f((t+o)/2),$=B((t+o)/2),ie=f((t-o)/2),oe=B((t-o)/2),he=f((o-t)/2),ye=B((o-t)/2);switch(l){case"XYX":s.set(M*$,D*ie,D*oe,M*G);break;case"YZY":s.set(D*oe,M*$,D*ie,M*G);break;case"ZXZ":s.set(D*ie,D*oe,M*$,M*G);break;case"XZX":s.set(M*$,D*ye,D*he,M*G);break;case"YXY":s.set(D*he,M*$,D*ye,M*G);break;case"ZYZ":s.set(D*ye,D*he,M*$,M*G);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+l)}}};class Qn{constructor(t=0,i=0){this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,o=this.y,l=t.elements;return this.x=l[0]*i+l[3]*o+l[6],this.y=l[1]*i+l[4]*o+l[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}clampLength(t,i){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(i,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,o=this.y-t.y;return i*i+o*o}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,o){return this.x=t.x+(i.x-t.x)*o,this.y=t.y+(i.y-t.y)*o,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i,o){return o!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const o=Math.cos(i),l=Math.sin(i),f=this.x-t.x,B=this.y-t.y;return this.x=f*o-B*l+t.x,this.y=f*l+B*o+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Qn.prototype.isVector2=!0;class cs{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,i,o,l,f,B,M,D,G){const $=this.elements;return $[0]=t,$[1]=l,$[2]=M,$[3]=i,$[4]=f,$[5]=D,$[6]=o,$[7]=B,$[8]=G,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,o=t.elements;return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],this}extractBasis(t,i,o){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const o=t.elements,l=i.elements,f=this.elements,B=o[0],M=o[3],D=o[6],G=o[1],$=o[4],ie=o[7],oe=o[2],he=o[5],ye=o[8],we=l[0],be=l[3],ke=l[6],Xe=l[1],it=l[4],lt=l[7],pt=l[2],mt=l[5],ot=l[8];return f[0]=B*we+M*Xe+D*pt,f[3]=B*be+M*it+D*mt,f[6]=B*ke+M*lt+D*ot,f[1]=G*we+$*Xe+ie*pt,f[4]=G*be+$*it+ie*mt,f[7]=G*ke+$*lt+ie*ot,f[2]=oe*we+he*Xe+ye*pt,f[5]=oe*be+he*it+ye*mt,f[8]=oe*ke+he*lt+ye*ot,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],o=t[1],l=t[2],f=t[3],B=t[4],M=t[5],D=t[6],G=t[7],$=t[8];return i*B*$-i*M*G-o*f*$+o*M*D+l*f*G-l*B*D}invert(){const t=this.elements,i=t[0],o=t[1],l=t[2],f=t[3],B=t[4],M=t[5],D=t[6],G=t[7],$=t[8],ie=$*B-M*G,oe=M*D-$*f,he=G*f-B*D,ye=i*ie+o*oe+l*he;if(ye===0)return this.set(0,0,0,0,0,0,0,0,0);const we=1/ye;return t[0]=ie*we,t[1]=(l*G-$*o)*we,t[2]=(M*o-l*B)*we,t[3]=oe*we,t[4]=($*i-l*D)*we,t[5]=(l*f-M*i)*we,t[6]=he*we,t[7]=(o*D-G*i)*we,t[8]=(B*i-o*f)*we,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,o,l,f,B,M){const D=Math.cos(f),G=Math.sin(f);return this.set(o*D,o*G,-o*(D*B+G*M)+B+t,-l*G,l*D,-l*(-G*B+D*M)+M+i,0,0,1),this}scale(t,i){const o=this.elements;return o[0]*=t,o[3]*=t,o[6]*=t,o[1]*=i,o[4]*=i,o[7]*=i,this}rotate(t){const i=Math.cos(t),o=Math.sin(t),l=this.elements,f=l[0],B=l[3],M=l[6],D=l[1],G=l[4],$=l[7];return l[0]=i*f+o*D,l[3]=i*B+o*G,l[6]=i*M+o*$,l[1]=-o*f+i*D,l[4]=-o*B+i*G,l[7]=-o*M+i*$,this}translate(t,i){const o=this.elements;return o[0]+=t*o[2],o[3]+=t*o[5],o[6]+=t*o[8],o[1]+=i*o[2],o[4]+=i*o[5],o[7]+=i*o[8],this}equals(t){const i=this.elements,o=t.elements;for(let l=0;l<9;l++)if(i[l]!==o[l])return!1;return!0}fromArray(t,i=0){for(let o=0;o<9;o++)this.elements[o]=t[o+i];return this}toArray(t=[],i=0){const o=this.elements;return t[i]=o[0],t[i+1]=o[1],t[i+2]=o[2],t[i+3]=o[3],t[i+4]=o[4],t[i+5]=o[5],t[i+6]=o[6],t[i+7]=o[7],t[i+8]=o[8],t}clone(){return new this.constructor().fromArray(this.elements)}}cs.prototype.isMatrix3=!0;let Or;const Uc={getDataURL:function(s){if(/^data:/i.test(s.src)||typeof HTMLCanvasElement>"u")return s.src;let t;if(s instanceof HTMLCanvasElement)t=s;else{Or===void 0&&(Or=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Or.width=s.width,Or.height=s.height;const i=Or.getContext("2d");s instanceof ImageData?i.putImageData(s,0,0):i.drawImage(s,0,0,s.width,s.height),t=Or}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",s),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}};let xh=0;class go extends k{constructor(t=go.DEFAULT_IMAGE,i=go.DEFAULT_MAPPING,o=Yo,l=Yo,f=nt,B=oc,M=Uo,D=xa,G=1,$=lo){super(),Object.defineProperty(this,"id",{value:xh++}),this.uuid=qi.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=i,this.wrapS=o,this.wrapT=l,this.magFilter=f,this.minFilter=B,this.anisotropy=G,this.format=M,this.internalFormat=null,this.type=D,this.offset=new Qn(0,0),this.repeat=new Qn(1,1),this.center=new Qn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=$,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const o={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const l=this.image;if(l.uuid===void 0&&(l.uuid=qi.generateUUID()),!i&&t.images[l.uuid]===void 0){let f;if(Array.isArray(l)){f=[];for(let B=0,M=l.length;B<M;B++)l[B].isDataTexture?f.push(K(l[B].image)):f.push(K(l[B]))}else f=K(l);t.images[l.uuid]={uuid:l.uuid,url:f}}o.image=l.uuid}return i||(t.textures[this.uuid]=o),o}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==300)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case cl:t.x=t.x-Math.floor(t.x);break;case Yo:t.x=t.x<0?0:1;break;case kl:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case cl:t.y=t.y-Math.floor(t.y);break;case Yo:t.y=t.y<0?0:1;break;case kl:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&this.version++}}go.DEFAULT_IMAGE=void 0,go.DEFAULT_MAPPING=300,go.prototype.isTexture=!0;class os{constructor(t=0,i=0,o=0,l=1){this.x=t,this.y=i,this.z=o,this.w=l}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,o,l){return this.x=t,this.y=i,this.z=o,this.w=l,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,o=this.y,l=this.z,f=this.w,B=t.elements;return this.x=B[0]*i+B[4]*o+B[8]*l+B[12]*f,this.y=B[1]*i+B[5]*o+B[9]*l+B[13]*f,this.z=B[2]*i+B[6]*o+B[10]*l+B[14]*f,this.w=B[3]*i+B[7]*o+B[11]*l+B[15]*f,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,o,l,f;const B=t.elements,M=B[0],D=B[4],G=B[8],$=B[1],ie=B[5],oe=B[9],he=B[2],ye=B[6],we=B[10];if(Math.abs(D-$)<.01&&Math.abs(G-he)<.01&&Math.abs(oe-ye)<.01){if(Math.abs(D+$)<.1&&Math.abs(G+he)<.1&&Math.abs(oe+ye)<.1&&Math.abs(M+ie+we-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const ke=(M+1)/2,Xe=(ie+1)/2,it=(we+1)/2,lt=(D+$)/4,pt=(G+he)/4,mt=(oe+ye)/4;return ke>Xe&&ke>it?ke<.01?(o=0,l=.707106781,f=.707106781):(l=lt/(o=Math.sqrt(ke)),f=pt/o):Xe>it?Xe<.01?(o=.707106781,l=0,f=.707106781):(o=lt/(l=Math.sqrt(Xe)),f=mt/l):it<.01?(o=.707106781,l=.707106781,f=0):(o=pt/(f=Math.sqrt(it)),l=mt/f),this.set(o,l,f,i),this}let be=Math.sqrt((ye-oe)*(ye-oe)+(G-he)*(G-he)+($-D)*($-D));return Math.abs(be)<.001&&(be=1),this.x=(ye-oe)/be,this.y=(G-he)/be,this.z=($-D)/be,this.w=Math.acos((M+ie+we-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(i,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,o){return this.x=t.x+(i.x-t.x)*o,this.y=t.y+(i.y-t.y)*o,this.z=t.z+(i.z-t.z)*o,this.w=t.w+(i.w-t.w)*o,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i,o){return o!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}os.prototype.isVector4=!0;class aa extends k{constructor(t,i,o){super(),this.width=t,this.height=i,this.depth=1,this.scissor=new os(0,0,t,i),this.scissorTest=!1,this.viewport=new os(0,0,t,i),o=o||{},this.texture=new go(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=1,this.texture.generateMipmaps=o.generateMipmaps!==void 0&&o.generateMipmaps,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:nt,this.depthBuffer=o.depthBuffer===void 0||o.depthBuffer,this.stencilBuffer=o.stencilBuffer!==void 0&&o.stencilBuffer,this.depthTexture=o.depthTexture!==void 0?o.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,i,o=1){this.width===t&&this.height===i&&this.depth===o||(this.width=t,this.height=i,this.depth=o,this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=o,this.dispose()),this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}aa.prototype.isWebGLRenderTarget=!0;class dc extends aa{constructor(t,i,o){super(t,i,o),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}dc.prototype.isWebGLMultisampleRenderTarget=!0;class To{constructor(t=0,i=0,o=0,l=1){this._x=t,this._y=i,this._z=o,this._w=l}static slerp(t,i,o,l){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),o.slerpQuaternions(t,i,l)}static slerpFlat(t,i,o,l,f,B,M){let D=o[l+0],G=o[l+1],$=o[l+2],ie=o[l+3];const oe=f[B+0],he=f[B+1],ye=f[B+2],we=f[B+3];if(M===0)return t[i+0]=D,t[i+1]=G,t[i+2]=$,void(t[i+3]=ie);if(M===1)return t[i+0]=oe,t[i+1]=he,t[i+2]=ye,void(t[i+3]=we);if(ie!==we||D!==oe||G!==he||$!==ye){let be=1-M;const ke=D*oe+G*he+$*ye+ie*we,Xe=ke>=0?1:-1,it=1-ke*ke;if(it>Number.EPSILON){const pt=Math.sqrt(it),mt=Math.atan2(pt,ke*Xe);be=Math.sin(be*mt)/pt,M=Math.sin(M*mt)/pt}const lt=M*Xe;if(D=D*be+oe*lt,G=G*be+he*lt,$=$*be+ye*lt,ie=ie*be+we*lt,be===1-M){const pt=1/Math.sqrt(D*D+G*G+$*$+ie*ie);D*=pt,G*=pt,$*=pt,ie*=pt}}t[i]=D,t[i+1]=G,t[i+2]=$,t[i+3]=ie}static multiplyQuaternionsFlat(t,i,o,l,f,B){const M=o[l],D=o[l+1],G=o[l+2],$=o[l+3],ie=f[B],oe=f[B+1],he=f[B+2],ye=f[B+3];return t[i]=M*ye+$*ie+D*he-G*oe,t[i+1]=D*ye+$*oe+G*ie-M*he,t[i+2]=G*ye+$*he+M*oe-D*ie,t[i+3]=$*ye-M*ie-D*oe-G*he,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,o,l){return this._x=t,this._y=i,this._z=o,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const o=t._x,l=t._y,f=t._z,B=t._order,M=Math.cos,D=Math.sin,G=M(o/2),$=M(l/2),ie=M(f/2),oe=D(o/2),he=D(l/2),ye=D(f/2);switch(B){case"XYZ":this._x=oe*$*ie+G*he*ye,this._y=G*he*ie-oe*$*ye,this._z=G*$*ye+oe*he*ie,this._w=G*$*ie-oe*he*ye;break;case"YXZ":this._x=oe*$*ie+G*he*ye,this._y=G*he*ie-oe*$*ye,this._z=G*$*ye-oe*he*ie,this._w=G*$*ie+oe*he*ye;break;case"ZXY":this._x=oe*$*ie-G*he*ye,this._y=G*he*ie+oe*$*ye,this._z=G*$*ye+oe*he*ie,this._w=G*$*ie-oe*he*ye;break;case"ZYX":this._x=oe*$*ie-G*he*ye,this._y=G*he*ie+oe*$*ye,this._z=G*$*ye-oe*he*ie,this._w=G*$*ie+oe*he*ye;break;case"YZX":this._x=oe*$*ie+G*he*ye,this._y=G*he*ie+oe*$*ye,this._z=G*$*ye-oe*he*ie,this._w=G*$*ie-oe*he*ye;break;case"XZY":this._x=oe*$*ie-G*he*ye,this._y=G*he*ie-oe*$*ye,this._z=G*$*ye+oe*he*ie,this._w=G*$*ie+oe*he*ye;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+B)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const o=i/2,l=Math.sin(o);return this._x=t.x*l,this._y=t.y*l,this._z=t.z*l,this._w=Math.cos(o),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,o=i[0],l=i[4],f=i[8],B=i[1],M=i[5],D=i[9],G=i[2],$=i[6],ie=i[10],oe=o+M+ie;if(oe>0){const he=.5/Math.sqrt(oe+1);this._w=.25/he,this._x=($-D)*he,this._y=(f-G)*he,this._z=(B-l)*he}else if(o>M&&o>ie){const he=2*Math.sqrt(1+o-M-ie);this._w=($-D)/he,this._x=.25*he,this._y=(l+B)/he,this._z=(f+G)/he}else if(M>ie){const he=2*Math.sqrt(1+M-o-ie);this._w=(f-G)/he,this._x=(l+B)/he,this._y=.25*he,this._z=(D+$)/he}else{const he=2*Math.sqrt(1+ie-o-M);this._w=(B-l)/he,this._x=(f+G)/he,this._y=(D+$)/he,this._z=.25*he}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let o=t.dot(i)+1;return o<Number.EPSILON?(o=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=o):(this._x=0,this._y=-t.z,this._z=t.y,this._w=o)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=o),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(qi.clamp(this.dot(t),-1,1)))}rotateTowards(t,i){const o=this.angleTo(t);if(o===0)return this;const l=Math.min(1,i/o);return this.slerp(t,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,i){return i!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const o=t._x,l=t._y,f=t._z,B=t._w,M=i._x,D=i._y,G=i._z,$=i._w;return this._x=o*$+B*M+l*G-f*D,this._y=l*$+B*D+f*M-o*G,this._z=f*$+B*G+o*D-l*M,this._w=B*$-o*M-l*D-f*G,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const o=this._x,l=this._y,f=this._z,B=this._w;let M=B*t._w+o*t._x+l*t._y+f*t._z;if(M<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,M=-M):this.copy(t),M>=1)return this._w=B,this._x=o,this._y=l,this._z=f,this;const D=1-M*M;if(D<=Number.EPSILON){const he=1-i;return this._w=he*B+i*this._w,this._x=he*o+i*this._x,this._y=he*l+i*this._y,this._z=he*f+i*this._z,this.normalize(),this._onChangeCallback(),this}const G=Math.sqrt(D),$=Math.atan2(G,M),ie=Math.sin((1-i)*$)/G,oe=Math.sin(i*$)/G;return this._w=B*ie+this._w*oe,this._x=o*ie+this._x*oe,this._y=l*ie+this._y*oe,this._z=f*ie+this._z*oe,this._onChangeCallback(),this}slerpQuaternions(t,i,o){this.copy(t).slerp(i,o)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}To.prototype.isQuaternion=!0;class Je{constructor(t=0,i=0,o=0){this.x=t,this.y=i,this.z=o}set(t,i,o){return o===void 0&&(o=this.z),this.x=t,this.y=i,this.z=o,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t,i){return i!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(bd.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(bd.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,o=this.y,l=this.z,f=t.elements;return this.x=f[0]*i+f[3]*o+f[6]*l,this.y=f[1]*i+f[4]*o+f[7]*l,this.z=f[2]*i+f[5]*o+f[8]*l,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,o=this.y,l=this.z,f=t.elements,B=1/(f[3]*i+f[7]*o+f[11]*l+f[15]);return this.x=(f[0]*i+f[4]*o+f[8]*l+f[12])*B,this.y=(f[1]*i+f[5]*o+f[9]*l+f[13])*B,this.z=(f[2]*i+f[6]*o+f[10]*l+f[14])*B,this}applyQuaternion(t){const i=this.x,o=this.y,l=this.z,f=t.x,B=t.y,M=t.z,D=t.w,G=D*i+B*l-M*o,$=D*o+M*i-f*l,ie=D*l+f*o-B*i,oe=-f*i-B*o-M*l;return this.x=G*D+oe*-f+$*-M-ie*-B,this.y=$*D+oe*-B+ie*-f-G*-M,this.z=ie*D+oe*-M+G*-B-$*-f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,o=this.y,l=this.z,f=t.elements;return this.x=f[0]*i+f[4]*o+f[8]*l,this.y=f[1]*i+f[5]*o+f[9]*l,this.z=f[2]*i+f[6]*o+f[10]*l,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(i,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,o){return this.x=t.x+(i.x-t.x)*o,this.y=t.y+(i.y-t.y)*o,this.z=t.z+(i.z-t.z)*o,this}cross(t,i){return i!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)}crossVectors(t,i){const o=t.x,l=t.y,f=t.z,B=i.x,M=i.y,D=i.z;return this.x=l*D-f*M,this.y=f*B-o*D,this.z=o*M-l*B,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const o=t.dot(this)/i;return this.copy(t).multiplyScalar(o)}projectOnPlane(t){return Ed.copy(this).projectOnVector(t),this.sub(Ed)}reflect(t){return this.sub(Ed.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const o=this.dot(t)/i;return Math.acos(qi.clamp(o,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,o=this.y-t.y,l=this.z-t.z;return i*i+o*o+l*l}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,o){const l=Math.sin(i)*t;return this.x=l*Math.sin(o),this.y=Math.cos(i)*t,this.z=l*Math.cos(o),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,o){return this.x=t*Math.sin(i),this.y=o,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),o=this.setFromMatrixColumn(t,1).length(),l=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=o,this.z=l,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,4*i)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,3*i)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i,o){return o!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Je.prototype.isVector3=!0;const Ed=new Je,bd=new To;class $o{constructor(t=new Je(1/0,1/0,1/0),i=new Je(-1/0,-1/0,-1/0)){this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){let i=1/0,o=1/0,l=1/0,f=-1/0,B=-1/0,M=-1/0;for(let D=0,G=t.length;D<G;D+=3){const $=t[D],ie=t[D+1],oe=t[D+2];$<i&&(i=$),ie<o&&(o=ie),oe<l&&(l=oe),$>f&&(f=$),ie>B&&(B=ie),oe>M&&(M=oe)}return this.min.set(i,o,l),this.max.set(f,B,M),this}setFromBufferAttribute(t){let i=1/0,o=1/0,l=1/0,f=-1/0,B=-1/0,M=-1/0;for(let D=0,G=t.count;D<G;D++){const $=t.getX(D),ie=t.getY(D),oe=t.getZ(D);$<i&&(i=$),ie<o&&(o=ie),oe<l&&(l=oe),$>f&&(f=$),ie>B&&(B=ie),oe>M&&(M=oe)}return this.min.set(i,o,l),this.max.set(f,B,M),this}setFromPoints(t){this.makeEmpty();for(let i=0,o=t.length;i<o;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const o=Gc.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return t===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Je),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Je),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const i=t.geometry;i!==void 0&&(i.boundingBox===null&&i.computeBoundingBox(),Eh.copy(i.boundingBox),Eh.applyMatrix4(t.matrixWorld),this.union(Eh));const o=t.children;for(let l=0,f=o.length;l<f;l++)this.expandByObject(o[l]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),i=new Je),i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Gc),Gc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,o;return t.normal.x>0?(i=t.normal.x*this.min.x,o=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,o=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,o+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,o+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,o+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,o+=t.normal.z*this.min.z),i<=-t.constant&&o>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Za),mc.subVectors(this.max,Za),fc.subVectors(t.a,Za),Hc.subVectors(t.b,Za),pc.subVectors(t.c,Za),$s.subVectors(Hc,fc),zc.subVectors(pc,Hc),Vl.subVectors(fc,pc);let i=[0,-$s.z,$s.y,0,-zc.z,zc.y,0,-Vl.z,Vl.y,$s.z,0,-$s.x,zc.z,0,-zc.x,Vl.z,0,-Vl.x,-$s.y,$s.x,0,-zc.y,zc.x,0,-Vl.y,Vl.x,0];return!!S(i,fc,Hc,pc,mc)&&(i=[1,0,0,0,1,0,0,0,1],!!S(i,fc,Hc,pc,mc)&&(Vo.crossVectors($s,zc),i=[Vo.x,Vo.y,Vo.z],S(i,fc,Hc,pc,mc)))}clampPoint(t,i){return i===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),i=new Je),i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Gc.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Gc).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Ja[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ja[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ja[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ja[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ja[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ja[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ja[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ja[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ja),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}$o.prototype.isBox3=!0;const Ja=[new Je,new Je,new Je,new Je,new Je,new Je,new Je,new Je],Gc=new Je,Eh=new $o,fc=new Je,Hc=new Je,pc=new Je,$s=new Je,zc=new Je,Vl=new Je,Za=new Je,mc=new Je,Vo=new Je,bu=new Je,h0=new $o,Mm=new Je,Tm=new Je,Sm=new Je;class ea{constructor(t=new Je,i=-1){this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const o=this.center;i!==void 0?o.copy(i):h0.setFromPoints(t).getCenter(o);let l=0;for(let f=0,B=t.length;f<B;f++)l=Math.max(l,o.distanceToSquared(t[f]));return this.radius=Math.sqrt(l),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const o=this.center.distanceToSquared(t);return i===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),i=new Je),i.copy(t),o>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return t===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new $o),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Sm.subVectors(t,this.center);const i=Sm.lengthSq();if(i>this.radius*this.radius){const o=Math.sqrt(i),l=.5*(o-this.radius);this.center.add(Sm.multiplyScalar(l/o)),this.radius+=l}return this}union(t){return Tm.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(Mm.copy(t.center).add(Tm)),this.expandByPoint(Mm.copy(t.center).sub(Tm)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const $a=new Je,Ao=new Je,gc=new Je,Na=new Je,Zf=new Je,Vc=new Je,$f=new Je;class Ql{constructor(t=new Je,i=new Je(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i===void 0&&(console.warn("THREE.Ray: .at() target is now required"),i=new Je),i.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,$a)),this}closestPointToPoint(t,i){i===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),i=new Je),i.subVectors(t,this.origin);const o=i.dot(this.direction);return o<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(o).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=$a.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):($a.copy(this.direction).multiplyScalar(i).add(this.origin),$a.distanceToSquared(t))}distanceSqToSegment(t,i,o,l){Ao.copy(t).add(i).multiplyScalar(.5),gc.copy(i).sub(t).normalize(),Na.copy(this.origin).sub(Ao);const f=.5*t.distanceTo(i),B=-this.direction.dot(gc),M=Na.dot(this.direction),D=-Na.dot(gc),G=Na.lengthSq(),$=Math.abs(1-B*B);let ie,oe,he,ye;if($>0)if(ie=B*D-M,oe=B*M-D,ye=f*$,ie>=0)if(oe>=-ye)if(oe<=ye){const we=1/$;he=(ie*=we)*(ie+B*(oe*=we)+2*M)+oe*(B*ie+oe+2*D)+G}else oe=f,he=-(ie=Math.max(0,-(B*oe+M)))*ie+oe*(oe+2*D)+G;else oe=-f,he=-(ie=Math.max(0,-(B*oe+M)))*ie+oe*(oe+2*D)+G;else oe<=-ye?he=-(ie=Math.max(0,-(-B*f+M)))*ie+(oe=ie>0?-f:Math.min(Math.max(-f,-D),f))*(oe+2*D)+G:oe<=ye?(ie=0,he=(oe=Math.min(Math.max(-f,-D),f))*(oe+2*D)+G):he=-(ie=Math.max(0,-(B*f+M)))*ie+(oe=ie>0?f:Math.min(Math.max(-f,-D),f))*(oe+2*D)+G;else oe=B>0?-f:f,he=-(ie=Math.max(0,-(B*oe+M)))*ie+oe*(oe+2*D)+G;return o&&o.copy(this.direction).multiplyScalar(ie).add(this.origin),l&&l.copy(gc).multiplyScalar(oe).add(Ao),he}intersectSphere(t,i){$a.subVectors(t.center,this.origin);const o=$a.dot(this.direction),l=$a.dot($a)-o*o,f=t.radius*t.radius;if(l>f)return null;const B=Math.sqrt(f-l),M=o-B,D=o+B;return M<0&&D<0?null:M<0?this.at(D,i):this.at(M,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const o=-(this.origin.dot(t.normal)+t.constant)/i;return o>=0?o:null}intersectPlane(t,i){const o=this.distanceToPlane(t);return o===null?null:this.at(o,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0?!0:t.normal.dot(this.direction)*i<0}intersectBox(t,i){let o,l,f,B,M,D;const G=1/this.direction.x,$=1/this.direction.y,ie=1/this.direction.z,oe=this.origin;return G>=0?(o=(t.min.x-oe.x)*G,l=(t.max.x-oe.x)*G):(o=(t.max.x-oe.x)*G,l=(t.min.x-oe.x)*G),$>=0?(f=(t.min.y-oe.y)*$,B=(t.max.y-oe.y)*$):(f=(t.max.y-oe.y)*$,B=(t.min.y-oe.y)*$),o>B||f>l?null:((f>o||o!=o)&&(o=f),(B<l||l!=l)&&(l=B),ie>=0?(M=(t.min.z-oe.z)*ie,D=(t.max.z-oe.z)*ie):(M=(t.max.z-oe.z)*ie,D=(t.min.z-oe.z)*ie),o>D||M>l?null:((M>o||o!=o)&&(o=M),(D<l||l!=l)&&(l=D),l<0?null:this.at(o>=0?o:l,i)))}intersectsBox(t){return this.intersectBox(t,$a)!==null}intersectTriangle(t,i,o,l,f){Zf.subVectors(i,t),Vc.subVectors(o,t),$f.crossVectors(Zf,Vc);let B,M=this.direction.dot($f);if(M>0){if(l)return null;B=1}else{if(!(M<0))return null;B=-1,M=-M}Na.subVectors(this.origin,t);const D=B*this.direction.dot(Vc.crossVectors(Na,Vc));if(D<0)return null;const G=B*this.direction.dot(Zf.cross(Na));if(G<0||D+G>M)return null;const $=-B*Na.dot($f);return $<0?null:this.at($/M,f)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ir{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,i,o,l,f,B,M,D,G,$,ie,oe,he,ye,we,be){const ke=this.elements;return ke[0]=t,ke[4]=i,ke[8]=o,ke[12]=l,ke[1]=f,ke[5]=B,ke[9]=M,ke[13]=D,ke[2]=G,ke[6]=$,ke[10]=ie,ke[14]=oe,ke[3]=he,ke[7]=ye,ke[11]=we,ke[15]=be,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ir().fromArray(this.elements)}copy(t){const i=this.elements,o=t.elements;return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],this}copyPosition(t){const i=this.elements,o=t.elements;return i[12]=o[12],i[13]=o[13],i[14]=o[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,o){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}makeBasis(t,i,o){return this.set(t.x,i.x,o.x,0,t.y,i.y,o.y,0,t.z,i.z,o.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,o=t.elements,l=1/bh.setFromMatrixColumn(t,0).length(),f=1/bh.setFromMatrixColumn(t,1).length(),B=1/bh.setFromMatrixColumn(t,2).length();return i[0]=o[0]*l,i[1]=o[1]*l,i[2]=o[2]*l,i[3]=0,i[4]=o[4]*f,i[5]=o[5]*f,i[6]=o[6]*f,i[7]=0,i[8]=o[8]*B,i[9]=o[9]*B,i[10]=o[10]*B,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const i=this.elements,o=t.x,l=t.y,f=t.z,B=Math.cos(o),M=Math.sin(o),D=Math.cos(l),G=Math.sin(l),$=Math.cos(f),ie=Math.sin(f);if(t.order==="XYZ"){const oe=B*$,he=B*ie,ye=M*$,we=M*ie;i[0]=D*$,i[4]=-D*ie,i[8]=G,i[1]=he+ye*G,i[5]=oe-we*G,i[9]=-M*D,i[2]=we-oe*G,i[6]=ye+he*G,i[10]=B*D}else if(t.order==="YXZ"){const oe=D*$,he=D*ie,ye=G*$,we=G*ie;i[0]=oe+we*M,i[4]=ye*M-he,i[8]=B*G,i[1]=B*ie,i[5]=B*$,i[9]=-M,i[2]=he*M-ye,i[6]=we+oe*M,i[10]=B*D}else if(t.order==="ZXY"){const oe=D*$,he=D*ie,ye=G*$,we=G*ie;i[0]=oe-we*M,i[4]=-B*ie,i[8]=ye+he*M,i[1]=he+ye*M,i[5]=B*$,i[9]=we-oe*M,i[2]=-B*G,i[6]=M,i[10]=B*D}else if(t.order==="ZYX"){const oe=B*$,he=B*ie,ye=M*$,we=M*ie;i[0]=D*$,i[4]=ye*G-he,i[8]=oe*G+we,i[1]=D*ie,i[5]=we*G+oe,i[9]=he*G-ye,i[2]=-G,i[6]=M*D,i[10]=B*D}else if(t.order==="YZX"){const oe=B*D,he=B*G,ye=M*D,we=M*G;i[0]=D*$,i[4]=we-oe*ie,i[8]=ye*ie+he,i[1]=ie,i[5]=B*$,i[9]=-M*$,i[2]=-G*$,i[6]=he*ie+ye,i[10]=oe-we*ie}else if(t.order==="XZY"){const oe=B*D,he=B*G,ye=M*D,we=M*G;i[0]=D*$,i[4]=-ie,i[8]=G*$,i[1]=oe*ie+we,i[5]=B*$,i[9]=he*ie-ye,i[2]=ye*ie-he,i[6]=M*$,i[10]=we*ie+oe}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(_h,t,ep)}lookAt(t,i,o){const l=this.elements;return ka.subVectors(t,i),ka.lengthSq()===0&&(ka.z=1),ka.normalize(),dl.crossVectors(o,ka),dl.lengthSq()===0&&(Math.abs(o.z)===1?ka.x+=1e-4:ka.z+=1e-4,ka.normalize(),dl.crossVectors(o,ka)),dl.normalize(),wh.crossVectors(ka,dl),l[0]=dl.x,l[4]=wh.x,l[8]=ka.x,l[1]=dl.y,l[5]=wh.y,l[9]=ka.y,l[2]=dl.z,l[6]=wh.z,l[10]=ka.z,this}multiply(t,i){return i!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const o=t.elements,l=i.elements,f=this.elements,B=o[0],M=o[4],D=o[8],G=o[12],$=o[1],ie=o[5],oe=o[9],he=o[13],ye=o[2],we=o[6],be=o[10],ke=o[14],Xe=o[3],it=o[7],lt=o[11],pt=o[15],mt=l[0],ot=l[4],kt=l[8],gt=l[12],Ht=l[1],Zt=l[5],Qt=l[9],en=l[13],Wn=l[2],ii=l[6],lr=l[10],oi=l[14],qn=l[3],$i=l[7],Ji=l[11],qr=l[15];return f[0]=B*mt+M*Ht+D*Wn+G*qn,f[4]=B*ot+M*Zt+D*ii+G*$i,f[8]=B*kt+M*Qt+D*lr+G*Ji,f[12]=B*gt+M*en+D*oi+G*qr,f[1]=$*mt+ie*Ht+oe*Wn+he*qn,f[5]=$*ot+ie*Zt+oe*ii+he*$i,f[9]=$*kt+ie*Qt+oe*lr+he*Ji,f[13]=$*gt+ie*en+oe*oi+he*qr,f[2]=ye*mt+we*Ht+be*Wn+ke*qn,f[6]=ye*ot+we*Zt+be*ii+ke*$i,f[10]=ye*kt+we*Qt+be*lr+ke*Ji,f[14]=ye*gt+we*en+be*oi+ke*qr,f[3]=Xe*mt+it*Ht+lt*Wn+pt*qn,f[7]=Xe*ot+it*Zt+lt*ii+pt*$i,f[11]=Xe*kt+it*Qt+lt*lr+pt*Ji,f[15]=Xe*gt+it*en+lt*oi+pt*qr,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],o=t[4],l=t[8],f=t[12],B=t[1],M=t[5],D=t[9],G=t[13],$=t[2],ie=t[6],oe=t[10],he=t[14];return t[3]*(+f*D*ie-l*G*ie-f*M*oe+o*G*oe+l*M*he-o*D*he)+t[7]*(+i*D*he-i*G*oe+f*B*oe-l*B*he+l*G*$-f*D*$)+t[11]*(+i*G*ie-i*M*he-f*B*ie+o*B*he+f*M*$-o*G*$)+t[15]*(-l*M*$-i*D*ie+i*M*oe+l*B*ie-o*B*oe+o*D*$)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,o){const l=this.elements;return t.isVector3?(l[12]=t.x,l[13]=t.y,l[14]=t.z):(l[12]=t,l[13]=i,l[14]=o),this}invert(){const t=this.elements,i=t[0],o=t[1],l=t[2],f=t[3],B=t[4],M=t[5],D=t[6],G=t[7],$=t[8],ie=t[9],oe=t[10],he=t[11],ye=t[12],we=t[13],be=t[14],ke=t[15],Xe=ie*be*G-we*oe*G+we*D*he-M*be*he-ie*D*ke+M*oe*ke,it=ye*oe*G-$*be*G-ye*D*he+B*be*he+$*D*ke-B*oe*ke,lt=$*we*G-ye*ie*G+ye*M*he-B*we*he-$*M*ke+B*ie*ke,pt=ye*ie*D-$*we*D-ye*M*oe+B*we*oe+$*M*be-B*ie*be,mt=i*Xe+o*it+l*lt+f*pt;if(mt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ot=1/mt;return t[0]=Xe*ot,t[1]=(we*oe*f-ie*be*f-we*l*he+o*be*he+ie*l*ke-o*oe*ke)*ot,t[2]=(M*be*f-we*D*f+we*l*G-o*be*G-M*l*ke+o*D*ke)*ot,t[3]=(ie*D*f-M*oe*f-ie*l*G+o*oe*G+M*l*he-o*D*he)*ot,t[4]=it*ot,t[5]=($*be*f-ye*oe*f+ye*l*he-i*be*he-$*l*ke+i*oe*ke)*ot,t[6]=(ye*D*f-B*be*f-ye*l*G+i*be*G+B*l*ke-i*D*ke)*ot,t[7]=(B*oe*f-$*D*f+$*l*G-i*oe*G-B*l*he+i*D*he)*ot,t[8]=lt*ot,t[9]=(ye*ie*f-$*we*f-ye*o*he+i*we*he+$*o*ke-i*ie*ke)*ot,t[10]=(B*we*f-ye*M*f+ye*o*G-i*we*G-B*o*ke+i*M*ke)*ot,t[11]=($*M*f-B*ie*f-$*o*G+i*ie*G+B*o*he-i*M*he)*ot,t[12]=pt*ot,t[13]=($*we*l-ye*ie*l+ye*o*oe-i*we*oe-$*o*be+i*ie*be)*ot,t[14]=(ye*M*l-B*we*l-ye*o*D+i*we*D+B*o*be-i*M*be)*ot,t[15]=(B*ie*l-$*M*l+$*o*D-i*ie*D-B*o*oe+i*M*oe)*ot,this}scale(t){const i=this.elements,o=t.x,l=t.y,f=t.z;return i[0]*=o,i[4]*=l,i[8]*=f,i[1]*=o,i[5]*=l,i[9]*=f,i[2]*=o,i[6]*=l,i[10]*=f,i[3]*=o,i[7]*=l,i[11]*=f,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],l=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,o,l))}makeTranslation(t,i,o){return this.set(1,0,0,t,0,1,0,i,0,0,1,o,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),o=Math.sin(t);return this.set(1,0,0,0,0,i,-o,0,0,o,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),o=Math.sin(t);return this.set(i,0,o,0,0,1,0,0,-o,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),o=Math.sin(t);return this.set(i,-o,0,0,o,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const o=Math.cos(i),l=Math.sin(i),f=1-o,B=t.x,M=t.y,D=t.z,G=f*B,$=f*M;return this.set(G*B+o,G*M-l*D,G*D+l*M,0,G*M+l*D,$*M+o,$*D-l*B,0,G*D-l*M,$*D+l*B,f*D*D+o,0,0,0,0,1),this}makeScale(t,i,o){return this.set(t,0,0,0,0,i,0,0,0,0,o,0,0,0,0,1),this}makeShear(t,i,o){return this.set(1,i,o,0,t,1,o,0,t,i,1,0,0,0,0,1),this}compose(t,i,o){const l=this.elements,f=i._x,B=i._y,M=i._z,D=i._w,G=f+f,$=B+B,ie=M+M,oe=f*G,he=f*$,ye=f*ie,we=B*$,be=B*ie,ke=M*ie,Xe=D*G,it=D*$,lt=D*ie,pt=o.x,mt=o.y,ot=o.z;return l[0]=(1-(we+ke))*pt,l[1]=(he+lt)*pt,l[2]=(ye-it)*pt,l[3]=0,l[4]=(he-lt)*mt,l[5]=(1-(oe+ke))*mt,l[6]=(be+Xe)*mt,l[7]=0,l[8]=(ye+it)*ot,l[9]=(be-Xe)*ot,l[10]=(1-(oe+we))*ot,l[11]=0,l[12]=t.x,l[13]=t.y,l[14]=t.z,l[15]=1,this}decompose(t,i,o){const l=this.elements;let f=bh.set(l[0],l[1],l[2]).length();const B=bh.set(l[4],l[5],l[6]).length(),M=bh.set(l[8],l[9],l[10]).length();this.determinant()<0&&(f=-f),t.x=l[12],t.y=l[13],t.z=l[14],Qo.copy(this);const D=1/f,G=1/B,$=1/M;return Qo.elements[0]*=D,Qo.elements[1]*=D,Qo.elements[2]*=D,Qo.elements[4]*=G,Qo.elements[5]*=G,Qo.elements[6]*=G,Qo.elements[8]*=$,Qo.elements[9]*=$,Qo.elements[10]*=$,i.setFromRotationMatrix(Qo),o.x=f,o.y=B,o.z=M,this}makePerspective(t,i,o,l,f,B){B===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const M=this.elements,D=2*f/(i-t),G=2*f/(o-l),$=(i+t)/(i-t),ie=(o+l)/(o-l),oe=-(B+f)/(B-f),he=-2*B*f/(B-f);return M[0]=D,M[4]=0,M[8]=$,M[12]=0,M[1]=0,M[5]=G,M[9]=ie,M[13]=0,M[2]=0,M[6]=0,M[10]=oe,M[14]=he,M[3]=0,M[7]=0,M[11]=-1,M[15]=0,this}makeOrthographic(t,i,o,l,f,B){const M=this.elements,D=1/(i-t),G=1/(o-l),$=1/(B-f),ie=(i+t)*D,oe=(o+l)*G,he=(B+f)*$;return M[0]=2*D,M[4]=0,M[8]=0,M[12]=-ie,M[1]=0,M[5]=2*G,M[9]=0,M[13]=-oe,M[2]=0,M[6]=0,M[10]=-2*$,M[14]=-he,M[3]=0,M[7]=0,M[11]=0,M[15]=1,this}equals(t){const i=this.elements,o=t.elements;for(let l=0;l<16;l++)if(i[l]!==o[l])return!1;return!0}fromArray(t,i=0){for(let o=0;o<16;o++)this.elements[o]=t[o+i];return this}toArray(t=[],i=0){const o=this.elements;return t[i]=o[0],t[i+1]=o[1],t[i+2]=o[2],t[i+3]=o[3],t[i+4]=o[4],t[i+5]=o[5],t[i+6]=o[6],t[i+7]=o[7],t[i+8]=o[8],t[i+9]=o[9],t[i+10]=o[10],t[i+11]=o[11],t[i+12]=o[12],t[i+13]=o[13],t[i+14]=o[14],t[i+15]=o[15],t}}ir.prototype.isMatrix4=!0;const bh=new Je,Qo=new ir,_h=new Je(0,0,0),ep=new Je(1,1,1),dl=new Je,wh=new Je,ka=new Je,_u=new ir,d0=new To;class wu{constructor(t=0,i=0,o=0,l=wu.DefaultOrder){this._x=t,this._y=i,this._z=o,this._order=l}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,o,l){return this._x=t,this._y=i,this._z=o,this._order=l||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i,o){const l=qi.clamp,f=t.elements,B=f[0],M=f[4],D=f[8],G=f[1],$=f[5],ie=f[9],oe=f[2],he=f[6],ye=f[10];switch(i=i||this._order){case"XYZ":this._y=Math.asin(l(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(-ie,ye),this._z=Math.atan2(-M,B)):(this._x=Math.atan2(he,$),this._z=0);break;case"YXZ":this._x=Math.asin(-l(ie,-1,1)),Math.abs(ie)<.9999999?(this._y=Math.atan2(D,ye),this._z=Math.atan2(G,$)):(this._y=Math.atan2(-oe,B),this._z=0);break;case"ZXY":this._x=Math.asin(l(he,-1,1)),Math.abs(he)<.9999999?(this._y=Math.atan2(-oe,ye),this._z=Math.atan2(-M,$)):(this._y=0,this._z=Math.atan2(G,B));break;case"ZYX":this._y=Math.asin(-l(oe,-1,1)),Math.abs(oe)<.9999999?(this._x=Math.atan2(he,ye),this._z=Math.atan2(G,B)):(this._x=0,this._z=Math.atan2(-M,$));break;case"YZX":this._z=Math.asin(l(G,-1,1)),Math.abs(G)<.9999999?(this._x=Math.atan2(-ie,$),this._y=Math.atan2(-oe,B)):(this._x=0,this._y=Math.atan2(D,ye));break;case"XZY":this._z=Math.asin(-l(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(he,$),this._y=Math.atan2(D,B)):(this._x=Math.atan2(-ie,ye),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,o!==!1&&this._onChangeCallback(),this}setFromQuaternion(t,i,o){return _u.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_u,i,o)}setFromVector3(t,i){return this.set(t.x,t.y,t.z,i||this._order)}reorder(t){return d0.setFromEuler(this),this.setFromQuaternion(d0,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Je(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}wu.prototype.isEuler=!0,wu.DefaultOrder="XYZ",wu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Im{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!=0}}let tv=0;const f0=new Je,Ch=new To,Ac=new ir,tp=new Je,_d=new Je,nv=new Je,iv=new To,p0=new Je(1,0,0),m0=new Je(0,1,0),g0=new Je(0,0,1),rv={type:"added"},A0={type:"removed"};I.DefaultUp=new Je(0,1,0),I.DefaultMatrixAutoUpdate=!0,I.prototype=Object.assign(Object.create(k.prototype),{constructor:I,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(s){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(s),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(s){return this.quaternion.premultiply(s),this},setRotationFromAxisAngle:function(s,t){this.quaternion.setFromAxisAngle(s,t)},setRotationFromEuler:function(s){this.quaternion.setFromEuler(s,!0)},setRotationFromMatrix:function(s){this.quaternion.setFromRotationMatrix(s)},setRotationFromQuaternion:function(s){this.quaternion.copy(s)},rotateOnAxis:function(s,t){return Ch.setFromAxisAngle(s,t),this.quaternion.multiply(Ch),this},rotateOnWorldAxis:function(s,t){return Ch.setFromAxisAngle(s,t),this.quaternion.premultiply(Ch),this},rotateX:function(s){return this.rotateOnAxis(p0,s)},rotateY:function(s){return this.rotateOnAxis(m0,s)},rotateZ:function(s){return this.rotateOnAxis(g0,s)},translateOnAxis:function(s,t){return f0.copy(s).applyQuaternion(this.quaternion),this.position.add(f0.multiplyScalar(t)),this},translateX:function(s){return this.translateOnAxis(p0,s)},translateY:function(s){return this.translateOnAxis(m0,s)},translateZ:function(s){return this.translateOnAxis(g0,s)},localToWorld:function(s){return s.applyMatrix4(this.matrixWorld)},worldToLocal:function(s){return s.applyMatrix4(Ac.copy(this.matrixWorld).invert())},lookAt:function(s,t,i){s.isVector3?tp.copy(s):tp.set(s,t,i);const o=this.parent;this.updateWorldMatrix(!0,!1),_d.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ac.lookAt(_d,tp,this.up):Ac.lookAt(tp,_d,this.up),this.quaternion.setFromRotationMatrix(Ac),o&&(Ac.extractRotation(o.matrixWorld),Ch.setFromRotationMatrix(Ac),this.quaternion.premultiply(Ch.invert()))},add:function(s){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return s===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",s),this):(s&&s.isObject3D?(s.parent!==null&&s.parent.remove(s),s.parent=this,this.children.push(s),s.dispatchEvent(rv)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",s),this)},remove:function(s){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(s);return t!==-1&&(s.parent=null,this.children.splice(t,1),s.dispatchEvent(A0)),this},clear:function(){for(let s=0;s<this.children.length;s++){const t=this.children[s];t.parent=null,t.dispatchEvent(A0)}return this.children.length=0,this},attach:function(s){return this.updateWorldMatrix(!0,!1),Ac.copy(this.matrixWorld).invert(),s.parent!==null&&(s.parent.updateWorldMatrix(!0,!1),Ac.multiply(s.parent.matrixWorld)),s.applyMatrix4(Ac),this.add(s),s.updateWorldMatrix(!1,!0),this},getObjectById:function(s){return this.getObjectByProperty("id",s)},getObjectByName:function(s){return this.getObjectByProperty("name",s)},getObjectByProperty:function(s,t){if(this[s]===t)return this;for(let i=0,o=this.children.length;i<o;i++){const l=this.children[i].getObjectByProperty(s,t);if(l!==void 0)return l}},getWorldPosition:function(s){return s===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),s=new Je),this.updateWorldMatrix(!0,!1),s.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(s){return s===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),s=new To),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_d,s,nv),s},getWorldScale:function(s){return s===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),s=new Je),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_d,iv,s),s},getWorldDirection:function(s){s===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),s=new Je),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return s.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(s){s(this);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverse(s)},traverseVisible:function(s){if(this.visible===!1)return;s(this);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverseVisible(s)},traverseAncestors:function(s){const t=this.parent;t!==null&&(s(t),t.traverseAncestors(s))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(s){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||s)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,s=!0);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].updateMatrixWorld(s)},updateWorldMatrix:function(s,t){const i=this.parent;if(s===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const o=this.children;for(let l=0,f=o.length;l<f;l++)o[l].updateWorldMatrix(!1,!0)}},toJSON:function(s){function t(B,M){return B[M.uuid]===void 0&&(B[M.uuid]=M.toJSON(s)),M.uuid}function i(B){const M=[];for(const D in B){const G=B[D];delete G.metadata,M.push(G)}return M}const o=s===void 0||typeof s=="string",l={};o&&(s={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},l.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const f={};if(f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.castShadow===!0&&(f.castShadow=!0),this.receiveShadow===!0&&(f.receiveShadow=!0),this.visible===!1&&(f.visible=!1),this.frustumCulled===!1&&(f.frustumCulled=!1),this.renderOrder!==0&&(f.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(f.userData=this.userData),f.layers=this.layers.mask,f.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(f.matrixAutoUpdate=!1),this.isInstancedMesh&&(f.type="InstancedMesh",f.count=this.count,f.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(f.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){f.geometry=t(s.geometries,this.geometry);const B=this.geometry.parameters;if(B!==void 0&&B.shapes!==void 0){const M=B.shapes;if(Array.isArray(M))for(let D=0,G=M.length;D<G;D++){const $=M[D];t(s.shapes,$)}else t(s.shapes,M)}}if(this.isSkinnedMesh&&(f.bindMode=this.bindMode,f.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(t(s.skeletons,this.skeleton),f.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const B=[];for(let M=0,D=this.material.length;M<D;M++)B.push(t(s.materials,this.material[M]));f.material=B}else f.material=t(s.materials,this.material);if(this.children.length>0){f.children=[];for(let B=0;B<this.children.length;B++)f.children.push(this.children[B].toJSON(s).object)}if(this.animations.length>0){f.animations=[];for(let B=0;B<this.animations.length;B++){const M=this.animations[B];f.animations.push(t(s.animations,M))}}if(o){const B=i(s.geometries),M=i(s.materials),D=i(s.textures),G=i(s.images),$=i(s.shapes),ie=i(s.skeletons),oe=i(s.animations);B.length>0&&(l.geometries=B),M.length>0&&(l.materials=M),D.length>0&&(l.textures=D),G.length>0&&(l.images=G),$.length>0&&(l.shapes=$),ie.length>0&&(l.skeletons=ie),oe.length>0&&(l.animations=oe)}return l.object=f,l},clone:function(s){return new this.constructor().copy(this,s)},copy:function(s,t=!0){if(this.name=s.name,this.up.copy(s.up),this.position.copy(s.position),this.rotation.order=s.rotation.order,this.quaternion.copy(s.quaternion),this.scale.copy(s.scale),this.matrix.copy(s.matrix),this.matrixWorld.copy(s.matrixWorld),this.matrixAutoUpdate=s.matrixAutoUpdate,this.matrixWorldNeedsUpdate=s.matrixWorldNeedsUpdate,this.layers.mask=s.layers.mask,this.visible=s.visible,this.castShadow=s.castShadow,this.receiveShadow=s.receiveShadow,this.frustumCulled=s.frustumCulled,this.renderOrder=s.renderOrder,this.userData=JSON.parse(JSON.stringify(s.userData)),t===!0)for(let i=0;i<s.children.length;i++){const o=s.children[i];this.add(o.clone())}return this}});const Rm=new Je,sv=new Je,ov=new cs;class fl{constructor(t=new Je(1,0,0),i=0){this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,o,l){return this.normal.set(t,i,o),this.constant=l,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,o){const l=Rm.subVectors(o,i).cross(sv.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(l,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),i=new Je),i.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,i){i===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new Je);const o=t.delta(Rm),l=this.normal.dot(o);if(l===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;const f=-(t.start.dot(this.normal)+this.constant)/l;return f<0||f>1?null:i.copy(o).multiplyScalar(f).add(t.start)}intersectsLine(t){const i=this.distanceToPoint(t.start),o=this.distanceToPoint(t.end);return i<0&&o>0||o<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Je),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const o=i||ov.getNormalMatrix(t),l=this.coplanarPoint(Rm).applyMatrix4(t),f=this.normal.applyMatrix3(o).normalize();return this.constant=-l.dot(f),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}fl.prototype.isPlane=!0;const pl=new Je,vc=new Je,Bm=new Je,yc=new Je,Mh=new Je,Th=new Je,v0=new Je,Lm=new Je,Dm=new Je,Pm=new Je;class vo{constructor(t=new Je,i=new Je,o=new Je){this.a=t,this.b=i,this.c=o}static getNormal(t,i,o,l){l===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),l=new Je),l.subVectors(o,i),pl.subVectors(t,i),l.cross(pl);const f=l.lengthSq();return f>0?l.multiplyScalar(1/Math.sqrt(f)):l.set(0,0,0)}static getBarycoord(t,i,o,l,f){pl.subVectors(l,i),vc.subVectors(o,i),Bm.subVectors(t,i);const B=pl.dot(pl),M=pl.dot(vc),D=pl.dot(Bm),G=vc.dot(vc),$=vc.dot(Bm),ie=B*G-M*M;if(f===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),f=new Je),ie===0)return f.set(-2,-1,-1);const oe=1/ie,he=(G*D-M*$)*oe,ye=(B*$-M*D)*oe;return f.set(1-he-ye,ye,he)}static containsPoint(t,i,o,l){return this.getBarycoord(t,i,o,l,yc),yc.x>=0&&yc.y>=0&&yc.x+yc.y<=1}static getUV(t,i,o,l,f,B,M,D){return this.getBarycoord(t,i,o,l,yc),D.set(0,0),D.addScaledVector(f,yc.x),D.addScaledVector(B,yc.y),D.addScaledVector(M,yc.z),D}static isFrontFacing(t,i,o,l){return pl.subVectors(o,i),vc.subVectors(t,i),pl.cross(vc).dot(l)<0}set(t,i,o){return this.a.copy(t),this.b.copy(i),this.c.copy(o),this}setFromPointsAndIndices(t,i,o,l){return this.a.copy(t[i]),this.b.copy(t[o]),this.c.copy(t[l]),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return pl.subVectors(this.c,this.b),vc.subVectors(this.a,this.b),.5*pl.cross(vc).length()}getMidpoint(t){return t===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Je),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return vo.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new fl),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return vo.getBarycoord(t,this.a,this.b,this.c,i)}getUV(t,i,o,l,f){return vo.getUV(t,this.a,this.b,this.c,i,o,l,f)}containsPoint(t){return vo.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return vo.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){i===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),i=new Je);const o=this.a,l=this.b,f=this.c;let B,M;Mh.subVectors(l,o),Th.subVectors(f,o),Lm.subVectors(t,o);const D=Mh.dot(Lm),G=Th.dot(Lm);if(D<=0&&G<=0)return i.copy(o);Dm.subVectors(t,l);const $=Mh.dot(Dm),ie=Th.dot(Dm);if($>=0&&ie<=$)return i.copy(l);const oe=D*ie-$*G;if(oe<=0&&D>=0&&$<=0)return B=D/(D-$),i.copy(o).addScaledVector(Mh,B);Pm.subVectors(t,f);const he=Mh.dot(Pm),ye=Th.dot(Pm);if(ye>=0&&he<=ye)return i.copy(f);const we=he*G-D*ye;if(we<=0&&G>=0&&ye<=0)return M=G/(G-ye),i.copy(o).addScaledVector(Th,M);const be=$*ye-he*ie;if(be<=0&&ie-$>=0&&he-ye>=0)return v0.subVectors(f,l),M=(ie-$)/(ie-$+(he-ye)),i.copy(l).addScaledVector(v0,M);const ke=1/(be+we+oe);return B=we*ke,M=oe*ke,i.copy(o).addScaledVector(Mh,B).addScaledVector(Th,M)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let av=0;h.prototype=Object.assign(Object.create(k.prototype),{constructor:h,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(s){if(s!==void 0)for(const t in s){const i=s[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===1;continue}const o=this[t];o!==void 0?o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(s){function t(l){const f=[];for(const B in l){const M=l[B];delete M.metadata,f.push(M)}return f}const i=s===void 0||typeof s=="string";i&&(s={textures:{},images:{}});const o={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.color&&this.color.isColor&&(o.color=this.color.getHex()),this.roughness!==void 0&&(o.roughness=this.roughness),this.metalness!==void 0&&(o.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(o.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(o.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(o.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(o.specular=this.specular.getHex()),this.shininess!==void 0&&(o.shininess=this.shininess),this.clearcoat!==void 0&&(o.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(o.clearcoatMap=this.clearcoatMap.toJSON(s).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(o.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(s).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(o.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(s).uuid,o.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(o.map=this.map.toJSON(s).uuid),this.matcap&&this.matcap.isTexture&&(o.matcap=this.matcap.toJSON(s).uuid),this.alphaMap&&this.alphaMap.isTexture&&(o.alphaMap=this.alphaMap.toJSON(s).uuid),this.lightMap&&this.lightMap.isTexture&&(o.lightMap=this.lightMap.toJSON(s).uuid,o.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(o.aoMap=this.aoMap.toJSON(s).uuid,o.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(o.bumpMap=this.bumpMap.toJSON(s).uuid,o.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(o.normalMap=this.normalMap.toJSON(s).uuid,o.normalMapType=this.normalMapType,o.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(o.displacementMap=this.displacementMap.toJSON(s).uuid,o.displacementScale=this.displacementScale,o.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(o.roughnessMap=this.roughnessMap.toJSON(s).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(o.metalnessMap=this.metalnessMap.toJSON(s).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(o.emissiveMap=this.emissiveMap.toJSON(s).uuid),this.specularMap&&this.specularMap.isTexture&&(o.specularMap=this.specularMap.toJSON(s).uuid),this.envMap&&this.envMap.isTexture&&(o.envMap=this.envMap.toJSON(s).uuid,o.reflectivity=this.reflectivity,o.refractionRatio=this.refractionRatio,this.combine!==void 0&&(o.combine=this.combine),this.envMapIntensity!==void 0&&(o.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(o.gradientMap=this.gradientMap.toJSON(s).uuid),this.size!==void 0&&(o.size=this.size),this.shadowSide!==null&&(o.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(o.sizeAttenuation=this.sizeAttenuation),this.blending!==Wa&&(o.blending=this.blending),this.side!==Ns&&(o.side=this.side),this.vertexColors&&(o.vertexColors=!0),this.opacity<1&&(o.opacity=this.opacity),this.transparent===!0&&(o.transparent=this.transparent),o.depthFunc=this.depthFunc,o.depthTest=this.depthTest,o.depthWrite=this.depthWrite,o.colorWrite=this.colorWrite,o.stencilWrite=this.stencilWrite,o.stencilWriteMask=this.stencilWriteMask,o.stencilFunc=this.stencilFunc,o.stencilRef=this.stencilRef,o.stencilFuncMask=this.stencilFuncMask,o.stencilFail=this.stencilFail,o.stencilZFail=this.stencilZFail,o.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(o.rotation=this.rotation),this.polygonOffset===!0&&(o.polygonOffset=!0),this.polygonOffsetFactor!==0&&(o.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(o.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(o.linewidth=this.linewidth),this.dashSize!==void 0&&(o.dashSize=this.dashSize),this.gapSize!==void 0&&(o.gapSize=this.gapSize),this.scale!==void 0&&(o.scale=this.scale),this.dithering===!0&&(o.dithering=!0),this.alphaTest>0&&(o.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(o.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(o.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(o.wireframe=this.wireframe),this.wireframeLinewidth>1&&(o.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(o.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(o.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(o.morphTargets=!0),this.morphNormals===!0&&(o.morphNormals=!0),this.skinning===!0&&(o.skinning=!0),this.flatShading===!0&&(o.flatShading=this.flatShading),this.visible===!1&&(o.visible=!1),this.toneMapped===!1&&(o.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(o.userData=this.userData),i){const l=t(s.textures),f=t(s.images);l.length>0&&(o.textures=l),f.length>0&&(o.images=f)}return o},clone:function(){return new this.constructor().copy(this)},copy:function(s){this.name=s.name,this.fog=s.fog,this.blending=s.blending,this.side=s.side,this.vertexColors=s.vertexColors,this.opacity=s.opacity,this.transparent=s.transparent,this.blendSrc=s.blendSrc,this.blendDst=s.blendDst,this.blendEquation=s.blendEquation,this.blendSrcAlpha=s.blendSrcAlpha,this.blendDstAlpha=s.blendDstAlpha,this.blendEquationAlpha=s.blendEquationAlpha,this.depthFunc=s.depthFunc,this.depthTest=s.depthTest,this.depthWrite=s.depthWrite,this.stencilWriteMask=s.stencilWriteMask,this.stencilFunc=s.stencilFunc,this.stencilRef=s.stencilRef,this.stencilFuncMask=s.stencilFuncMask,this.stencilFail=s.stencilFail,this.stencilZFail=s.stencilZFail,this.stencilZPass=s.stencilZPass,this.stencilWrite=s.stencilWrite;const t=s.clippingPlanes;let i=null;if(t!==null){const o=t.length;i=new Array(o);for(let l=0;l!==o;++l)i[l]=t[l].clone()}return this.clippingPlanes=i,this.clipIntersection=s.clipIntersection,this.clipShadows=s.clipShadows,this.shadowSide=s.shadowSide,this.colorWrite=s.colorWrite,this.precision=s.precision,this.polygonOffset=s.polygonOffset,this.polygonOffsetFactor=s.polygonOffsetFactor,this.polygonOffsetUnits=s.polygonOffsetUnits,this.dithering=s.dithering,this.alphaTest=s.alphaTest,this.alphaToCoverage=s.alphaToCoverage,this.premultipliedAlpha=s.premultipliedAlpha,this.visible=s.visible,this.toneMapped=s.toneMapped,this.userData=JSON.parse(JSON.stringify(s.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(h.prototype,"needsUpdate",{set:function(s){s===!0&&this.version++}});const y0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ml={h:0,s:0,l:0},np={h:0,s:0,l:0};class Fi{constructor(t,i,o){return i===void 0&&o===void 0?this.set(t):this.setRGB(t,i,o)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,i,o){return this.r=t,this.g=i,this.b=o,this}setHSL(t,i,o){if(t=qi.euclideanModulo(t,1),i=qi.clamp(i,0,1),o=qi.clamp(o,0,1),i===0)this.r=this.g=this.b=o;else{const l=o<=.5?o*(1+i):o+i-o*i,f=2*o-l;this.r=g(f,l,t+1/3),this.g=g(f,l,t),this.b=g(f,l,t-1/3)}return this}setStyle(t){function i(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let l;const f=o[1],B=o[2];switch(f){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(B))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,i(l[4]),this;if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(B))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,i(l[4]),this;break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(B)){const M=parseFloat(l[1])/360,D=parseInt(l[2],10)/100,G=parseInt(l[3],10)/100;return i(l[4]),this.setHSL(M,D,G)}}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const l=o[1],f=l.length;if(f===3)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(f===6)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const i=y0[t];return i!==void 0?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,i=2){return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}copyLinearToGamma(t,i=2){const o=i>0?1/i:1;return this.r=Math.pow(t.r,o),this.g=Math.pow(t.g,o),this.b=Math.pow(t.b,o),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=C(t.r),this.g=C(t.g),this.b=C(t.b),this}copyLinearToSRGB(t){return this.r=v(t.r),this.g=v(t.g),this.b=v(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const i=this.r,o=this.g,l=this.b,f=Math.max(i,o,l),B=Math.min(i,o,l);let M,D;const G=(B+f)/2;if(B===f)M=0,D=0;else{const $=f-B;switch(D=G<=.5?$/(f+B):$/(2-f-B),f){case i:M=(o-l)/$+(o<l?6:0);break;case o:M=(l-i)/$+2;break;case l:M=(i-o)/$+4}M/=6}return t.h=M,t.s=D,t.l=G,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,i,o){return this.getHSL(ml),ml.h+=t,ml.s+=i,ml.l+=o,this.setHSL(ml.h,ml.s,ml.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,o){return this.r=t.r+(i.r-t.r)*o,this.g=t.g+(i.g-t.g)*o,this.b=t.b+(i.b-t.b)*o,this}lerpHSL(t,i){this.getHSL(ml),t.getHSL(np);const o=qi.lerp(ml.h,np.h,i),l=qi.lerp(ml.s,np.s,i),f=qi.lerp(ml.l,np.l,i);return this.setHSL(o,l,f),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Fi.NAMES=y0,Fi.prototype.isColor=!0,Fi.prototype.r=1,Fi.prototype.g=1,Fi.prototype.b=1;class xc extends h{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new Fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this}}xc.prototype.isMeshBasicMaterial=!0;const Ks=new Je,ip=new Qn;Object.defineProperty(y.prototype,"needsUpdate",{set:function(s){s===!0&&this.version++}}),Object.assign(y.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(s){return this.usage=s,this},copy:function(s){return this.name=s.name,this.array=new s.array.constructor(s.array),this.itemSize=s.itemSize,this.count=s.count,this.normalized=s.normalized,this.usage=s.usage,this},copyAt:function(s,t,i){s*=this.itemSize,i*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[s+o]=t.array[i+o];return this},copyArray:function(s){return this.array.set(s),this},copyColorsArray:function(s){const t=this.array;let i=0;for(let o=0,l=s.length;o<l;o++){let f=s[o];f===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),f=new Fi),t[i++]=f.r,t[i++]=f.g,t[i++]=f.b}return this},copyVector2sArray:function(s){const t=this.array;let i=0;for(let o=0,l=s.length;o<l;o++){let f=s[o];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),f=new Qn),t[i++]=f.x,t[i++]=f.y}return this},copyVector3sArray:function(s){const t=this.array;let i=0;for(let o=0,l=s.length;o<l;o++){let f=s[o];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),f=new Je),t[i++]=f.x,t[i++]=f.y,t[i++]=f.z}return this},copyVector4sArray:function(s){const t=this.array;let i=0;for(let o=0,l=s.length;o<l;o++){let f=s[o];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),f=new os),t[i++]=f.x,t[i++]=f.y,t[i++]=f.z,t[i++]=f.w}return this},applyMatrix3:function(s){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)ip.fromBufferAttribute(this,t),ip.applyMatrix3(s),this.setXY(t,ip.x,ip.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ks.fromBufferAttribute(this,t),Ks.applyMatrix3(s),this.setXYZ(t,Ks.x,Ks.y,Ks.z);return this},applyMatrix4:function(s){for(let t=0,i=this.count;t<i;t++)Ks.x=this.getX(t),Ks.y=this.getY(t),Ks.z=this.getZ(t),Ks.applyMatrix4(s),this.setXYZ(t,Ks.x,Ks.y,Ks.z);return this},applyNormalMatrix:function(s){for(let t=0,i=this.count;t<i;t++)Ks.x=this.getX(t),Ks.y=this.getY(t),Ks.z=this.getZ(t),Ks.applyNormalMatrix(s),this.setXYZ(t,Ks.x,Ks.y,Ks.z);return this},transformDirection:function(s){for(let t=0,i=this.count;t<i;t++)Ks.x=this.getX(t),Ks.y=this.getY(t),Ks.z=this.getZ(t),Ks.transformDirection(s),this.setXYZ(t,Ks.x,Ks.y,Ks.z);return this},set:function(s,t=0){return this.array.set(s,t),this},getX:function(s){return this.array[s*this.itemSize]},setX:function(s,t){return this.array[s*this.itemSize]=t,this},getY:function(s){return this.array[s*this.itemSize+1]},setY:function(s,t){return this.array[s*this.itemSize+1]=t,this},getZ:function(s){return this.array[s*this.itemSize+2]},setZ:function(s,t){return this.array[s*this.itemSize+2]=t,this},getW:function(s){return this.array[s*this.itemSize+3]},setW:function(s,t){return this.array[s*this.itemSize+3]=t,this},setXY:function(s,t,i){return s*=this.itemSize,this.array[s+0]=t,this.array[s+1]=i,this},setXYZ:function(s,t,i,o){return s*=this.itemSize,this.array[s+0]=t,this.array[s+1]=i,this.array[s+2]=o,this},setXYZW:function(s,t,i,o,l){return s*=this.itemSize,this.array[s+0]=t,this.array[s+1]=i,this.array[s+2]=o,this.array[s+3]=l,this},onUpload:function(s){return this.onUploadCallback=s,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){const s={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(s.name=this.name),this.usage!==yh&&(s.usage=this.usage),this.updateRange.offset===0&&this.updateRange.count===-1||(s.updateRange=this.updateRange),s}}),(E.prototype=Object.create(y.prototype)).constructor=E,(_.prototype=Object.create(y.prototype)).constructor=_,(m.prototype=Object.create(y.prototype)).constructor=m,(w.prototype=Object.create(y.prototype)).constructor=w,(b.prototype=Object.create(y.prototype)).constructor=b,(O.prototype=Object.create(y.prototype)).constructor=O,(R.prototype=Object.create(y.prototype)).constructor=R,(L.prototype=Object.create(y.prototype)).constructor=L,L.prototype.isFloat16BufferAttribute=!0,(P.prototype=Object.create(y.prototype)).constructor=P,(Y.prototype=Object.create(y.prototype)).constructor=Y;const lv={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};let cv=0;const jl=new ir,Om=new I,Sh=new Je,Ua=new $o,wd=new $o,jo=new Je;U.prototype=Object.assign(Object.create(k.prototype),{constructor:U,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(s){return Array.isArray(s)?this.index=new(J(s)>65535?R:b)(s,1):this.index=s,this},getAttribute:function(s){return this.attributes[s]},setAttribute:function(s,t){return this.attributes[s]=t,this},deleteAttribute:function(s){return delete this.attributes[s],this},hasAttribute:function(s){return this.attributes[s]!==void 0},addGroup:function(s,t,i=0){this.groups.push({start:s,count:t,materialIndex:i})},clearGroups:function(){this.groups=[]},setDrawRange:function(s,t){this.drawRange.start=s,this.drawRange.count=t},applyMatrix4:function(s){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(s),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const l=new cs().getNormalMatrix(s);i.applyNormalMatrix(l),i.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(s),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(s){return jl.makeRotationX(s),this.applyMatrix4(jl),this},rotateY:function(s){return jl.makeRotationY(s),this.applyMatrix4(jl),this},rotateZ:function(s){return jl.makeRotationZ(s),this.applyMatrix4(jl),this},translate:function(s,t,i){return jl.makeTranslation(s,t,i),this.applyMatrix4(jl),this},scale:function(s,t,i){return jl.makeScale(s,t,i),this.applyMatrix4(jl),this},lookAt:function(s){return Om.lookAt(s),Om.updateMatrix(),this.applyMatrix4(Om.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sh).negate(),this.translate(Sh.x,Sh.y,Sh.z),this},setFromPoints:function(s){const t=[];for(let i=0,o=s.length;i<o;i++){const l=s[i];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new P(t,3)),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new $o);const s=this.attributes.position,t=this.morphAttributes.position;if(s&&s.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Je(-1/0,-1/0,-1/0),new Je(1/0,1/0,1/0));if(s!==void 0){if(this.boundingBox.setFromBufferAttribute(s),t)for(let i=0,o=t.length;i<o;i++){const l=t[i];Ua.setFromBufferAttribute(l),this.morphTargetsRelative?(jo.addVectors(this.boundingBox.min,Ua.min),this.boundingBox.expandByPoint(jo),jo.addVectors(this.boundingBox.max,Ua.max),this.boundingBox.expandByPoint(jo)):(this.boundingBox.expandByPoint(Ua.min),this.boundingBox.expandByPoint(Ua.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new ea);const s=this.attributes.position,t=this.morphAttributes.position;if(s&&s.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Je,1/0);if(s){const i=this.boundingSphere.center;if(Ua.setFromBufferAttribute(s),t)for(let l=0,f=t.length;l<f;l++){const B=t[l];wd.setFromBufferAttribute(B),this.morphTargetsRelative?(jo.addVectors(Ua.min,wd.min),Ua.expandByPoint(jo),jo.addVectors(Ua.max,wd.max),Ua.expandByPoint(jo)):(Ua.expandByPoint(wd.min),Ua.expandByPoint(wd.max))}Ua.getCenter(i);let o=0;for(let l=0,f=s.count;l<f;l++)jo.fromBufferAttribute(s,l),o=Math.max(o,i.distanceToSquared(jo));if(t)for(let l=0,f=t.length;l<f;l++){const B=t[l],M=this.morphTargetsRelative;for(let D=0,G=B.count;D<G;D++)jo.fromBufferAttribute(B,D),M&&(Sh.fromBufferAttribute(s,D),jo.add(Sh)),o=Math.max(o,i.distanceToSquared(jo))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){function s(gt,Ht,Zt){oe.fromArray(f,3*gt),he.fromArray(f,3*Ht),ye.fromArray(f,3*Zt),we.fromArray(M,2*gt),be.fromArray(M,2*Ht),ke.fromArray(M,2*Zt),he.sub(oe),ye.sub(oe),be.sub(we),ke.sub(we);const Qt=1/(be.x*ke.y-ke.x*be.y);isFinite(Qt)&&(Xe.copy(he).multiplyScalar(ke.y).addScaledVector(ye,-be.y).multiplyScalar(Qt),it.copy(ye).multiplyScalar(be.x).addScaledVector(he,-ke.x).multiplyScalar(Qt),$[gt].add(Xe),$[Ht].add(Xe),$[Zt].add(Xe),ie[gt].add(it),ie[Ht].add(it),ie[Zt].add(it))}function t(gt){ot.fromArray(B,3*gt),kt.copy(ot);const Ht=$[gt];pt.copy(Ht),pt.sub(ot.multiplyScalar(ot.dot(Ht))).normalize(),mt.crossVectors(kt,Ht);const Zt=mt.dot(ie[gt])<0?-1:1;G[4*gt]=pt.x,G[4*gt+1]=pt.y,G[4*gt+2]=pt.z,G[4*gt+3]=Zt}const i=this.index,o=this.attributes;if(i===null||o.position===void 0||o.normal===void 0||o.uv===void 0)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const l=i.array,f=o.position.array,B=o.normal.array,M=o.uv.array,D=f.length/3;o.tangent===void 0&&this.setAttribute("tangent",new y(new Float32Array(4*D),4));const G=o.tangent.array,$=[],ie=[];for(let gt=0;gt<D;gt++)$[gt]=new Je,ie[gt]=new Je;const oe=new Je,he=new Je,ye=new Je,we=new Qn,be=new Qn,ke=new Qn,Xe=new Je,it=new Je;let lt=this.groups;lt.length===0&&(lt=[{start:0,count:l.length}]);for(let gt=0,Ht=lt.length;gt<Ht;++gt){const Zt=lt[gt],Qt=Zt.start;for(let en=Qt,Wn=Qt+Zt.count;en<Wn;en+=3)s(l[en+0],l[en+1],l[en+2])}const pt=new Je,mt=new Je,ot=new Je,kt=new Je;for(let gt=0,Ht=lt.length;gt<Ht;++gt){const Zt=lt[gt],Qt=Zt.start;for(let en=Qt,Wn=Qt+Zt.count;en<Wn;en+=3)t(l[en+0]),t(l[en+1]),t(l[en+2])}},computeVertexNormals:function(){const s=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new y(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let ie=0,oe=i.count;ie<oe;ie++)i.setXYZ(ie,0,0,0);const o=new Je,l=new Je,f=new Je,B=new Je,M=new Je,D=new Je,G=new Je,$=new Je;if(s)for(let ie=0,oe=s.count;ie<oe;ie+=3){const he=s.getX(ie+0),ye=s.getX(ie+1),we=s.getX(ie+2);o.fromBufferAttribute(t,he),l.fromBufferAttribute(t,ye),f.fromBufferAttribute(t,we),G.subVectors(f,l),$.subVectors(o,l),G.cross($),B.fromBufferAttribute(i,he),M.fromBufferAttribute(i,ye),D.fromBufferAttribute(i,we),B.add(G),M.add(G),D.add(G),i.setXYZ(he,B.x,B.y,B.z),i.setXYZ(ye,M.x,M.y,M.z),i.setXYZ(we,D.x,D.y,D.z)}else for(let ie=0,oe=t.count;ie<oe;ie+=3)o.fromBufferAttribute(t,ie+0),l.fromBufferAttribute(t,ie+1),f.fromBufferAttribute(t,ie+2),G.subVectors(f,l),$.subVectors(o,l),G.cross($),i.setXYZ(ie+0,G.x,G.y,G.z),i.setXYZ(ie+1,G.x,G.y,G.z),i.setXYZ(ie+2,G.x,G.y,G.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(s,t){if(!s||!s.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",s);t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const o in i){if(s.attributes[o]===void 0)continue;const l=i[o].array,f=s.attributes[o],B=f.array,M=f.itemSize*t,D=Math.min(B.length,l.length-M);for(let G=0,$=M;G<D;G++,$++)l[$]=B[G]}return this},normalizeNormals:function(){const s=this.attributes.normal;for(let t=0,i=s.count;t<i;t++)jo.fromBufferAttribute(s,t),jo.normalize(),s.setXYZ(t,jo.x,jo.y,jo.z)},toNonIndexed:function(){function s(B,M){const D=B.array,G=B.itemSize,$=B.normalized,ie=new D.constructor(M.length*G);let oe=0,he=0;for(let ye=0,we=M.length;ye<we;ye++){oe=M[ye]*G;for(let be=0;be<G;be++)ie[he++]=D[oe++]}return new y(ie,G,$)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new U,i=this.index.array,o=this.attributes;for(const B in o){const M=s(o[B],i);t.setAttribute(B,M)}const l=this.morphAttributes;for(const B in l){const M=[],D=l[B];for(let G=0,$=D.length;G<$;G++){const ie=s(D[G],i);M.push(ie)}t.morphAttributes[B]=M}t.morphTargetsRelative=this.morphTargetsRelative;const f=this.groups;for(let B=0,M=f.length;B<M;B++){const D=f[B];t.addGroup(D.start,D.count,D.materialIndex)}return t},toJSON:function(){const s={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),Object.keys(this.userData).length>0&&(s.userData=this.userData),this.parameters!==void 0){const M=this.parameters;for(const D in M)M[D]!==void 0&&(s[D]=M[D]);return s}s.data={attributes:{}};const t=this.index;t!==null&&(s.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const M in i){const D=i[M];s.data.attributes[M]=D.toJSON(s.data)}const o={};let l=!1;for(const M in this.morphAttributes){const D=this.morphAttributes[M],G=[];for(let $=0,ie=D.length;$<ie;$++){const oe=D[$];G.push(oe.toJSON(s.data))}G.length>0&&(o[M]=G,l=!0)}l&&(s.data.morphAttributes=o,s.data.morphTargetsRelative=this.morphTargetsRelative);const f=this.groups;f.length>0&&(s.data.groups=JSON.parse(JSON.stringify(f)));const B=this.boundingSphere;return B!==null&&(s.data.boundingSphere={center:B.center.toArray(),radius:B.radius}),s},clone:function(){return new U().copy(this)},copy:function(s){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=s.name;const i=s.index;i!==null&&this.setIndex(i.clone(t));const o=s.attributes;for(const D in o){const G=o[D];this.setAttribute(D,G.clone(t))}const l=s.morphAttributes;for(const D in l){const G=[],$=l[D];for(let ie=0,oe=$.length;ie<oe;ie++)G.push($[ie].clone(t));this.morphAttributes[D]=G}this.morphTargetsRelative=s.morphTargetsRelative;const f=s.groups;for(let D=0,G=f.length;D<G;D++){const $=f[D];this.addGroup($.start,$.count,$.materialIndex)}const B=s.boundingBox;B!==null&&(this.boundingBox=B.clone());const M=s.boundingSphere;return M!==null&&(this.boundingSphere=M.clone()),this.drawRange.start=s.drawRange.start,this.drawRange.count=s.drawRange.count,this.userData=s.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const x0=new ir,Ih=new Ql,Fm=new ea,Qc=new Je,jc=new Je,Wc=new Je,Nm=new Je,km=new Je,Um=new Je,rp=new Je,sp=new Je,op=new Je,ap=new Qn,lp=new Qn,cp=new Qn,Gm=new Je,up=new Je;te.prototype=Object.assign(Object.create(I.prototype),{constructor:te,isMesh:!0,copy:function(s){return I.prototype.copy.call(this,s),s.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=s.morphTargetInfluences.slice()),s.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},s.morphTargetDictionary)),this.material=s.material,this.geometry=s.geometry,this},updateMorphTargets:function(){const s=this.geometry;if(s.isBufferGeometry){const t=s.morphAttributes,i=Object.keys(t);if(i.length>0){const o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,f=o.length;l<f;l++){const B=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=l}}}}else{const t=s.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(s,t){const i=this.geometry,o=this.material,l=this.matrixWorld;if(o===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Fm.copy(i.boundingSphere),Fm.applyMatrix4(l),s.ray.intersectsSphere(Fm)===!1)||(x0.copy(l).invert(),Ih.copy(s.ray).applyMatrix4(x0),i.boundingBox!==null&&Ih.intersectsBox(i.boundingBox)===!1))return;let f;if(i.isBufferGeometry){const B=i.index,M=i.attributes.position,D=i.morphAttributes.position,G=i.morphTargetsRelative,$=i.attributes.uv,ie=i.attributes.uv2,oe=i.groups,he=i.drawRange;if(B!==null)if(Array.isArray(o))for(let ye=0,we=oe.length;ye<we;ye++){const be=oe[ye],ke=o[be.materialIndex];for(let Xe=Math.max(be.start,he.start),it=Math.min(be.start+be.count,he.start+he.count);Xe<it;Xe+=3){const lt=B.getX(Xe),pt=B.getX(Xe+1),mt=B.getX(Xe+2);(f=ue(this,ke,s,Ih,M,D,G,$,ie,lt,pt,mt))&&(f.faceIndex=Math.floor(Xe/3),f.face.materialIndex=be.materialIndex,t.push(f))}}else for(let ye=Math.max(0,he.start),we=Math.min(B.count,he.start+he.count);ye<we;ye+=3){const be=B.getX(ye),ke=B.getX(ye+1),Xe=B.getX(ye+2);(f=ue(this,o,s,Ih,M,D,G,$,ie,be,ke,Xe))&&(f.faceIndex=Math.floor(ye/3),t.push(f))}else if(M!==void 0)if(Array.isArray(o))for(let ye=0,we=oe.length;ye<we;ye++){const be=oe[ye],ke=o[be.materialIndex];for(let Xe=Math.max(be.start,he.start),it=Math.min(be.start+be.count,he.start+he.count);Xe<it;Xe+=3)(f=ue(this,ke,s,Ih,M,D,G,$,ie,Xe,Xe+1,Xe+2))&&(f.faceIndex=Math.floor(Xe/3),f.face.materialIndex=be.materialIndex,t.push(f))}else for(let ye=Math.max(0,he.start),we=Math.min(M.count,he.start+he.count);ye<we;ye+=3)(f=ue(this,o,s,Ih,M,D,G,$,ie,ye,ye+1,ye+2))&&(f.faceIndex=Math.floor(ye/3),t.push(f))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class Cu extends U{constructor(t=1,i=1,o=1,l=1,f=1,B=1){function M(we,be,ke,Xe,it,lt,pt,mt,ot,kt,gt){const Ht=lt/ot,Zt=pt/kt,Qt=lt/2,en=pt/2,Wn=mt/2,ii=ot+1,lr=kt+1;let oi=0,qn=0;const $i=new Je;for(let Ji=0;Ji<lr;Ji++){const qr=Ji*Zt-en;for(let Tt=0;Tt<ii;Tt++){const Mt=Tt*Ht-Qt;$i[we]=Mt*Xe,$i[be]=qr*it,$i[ke]=Wn,$.push($i.x,$i.y,$i.z),$i[we]=0,$i[be]=0,$i[ke]=mt>0?1:-1,ie.push($i.x,$i.y,$i.z),oe.push(Tt/ot),oe.push(1-Ji/kt),oi+=1}}for(let Ji=0;Ji<kt;Ji++)for(let qr=0;qr<ot;qr++){const Tt=he+qr+ii*Ji,Mt=he+qr+ii*(Ji+1),Yn=he+(qr+1)+ii*(Ji+1),Cn=he+(qr+1)+ii*Ji;G.push(Tt,Mt,Cn),G.push(Mt,Yn,Cn),qn+=6}D.addGroup(ye,qn,gt),ye+=qn,he+=oi}super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:o,widthSegments:l,heightSegments:f,depthSegments:B};const D=this;l=Math.floor(l),f=Math.floor(f);const G=[],$=[],ie=[],oe=[];let he=0,ye=0;M("z","y","x",-1,-1,o,i,t,B=Math.floor(B),f,0),M("z","y","x",1,-1,o,i,-t,B,f,1),M("x","z","y",1,1,t,o,i,l,B,2),M("x","z","y",1,-1,t,o,-i,l,B,3),M("x","y","z",1,-1,t,i,o,l,f,4),M("x","y","z",-1,-1,t,i,-o,l,f,5),this.setIndex(G),this.setAttribute("position",new P($,3)),this.setAttribute("normal",new P(ie,3)),this.setAttribute("uv",new P(oe,2))}}const E0={clone:xe,merge:Ee};var uv=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hv=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;(V.prototype=Object.create(h.prototype)).constructor=V,V.prototype.isShaderMaterial=!0,V.prototype.copy=function(s){return h.prototype.copy.call(this,s),this.fragmentShader=s.fragmentShader,this.vertexShader=s.vertexShader,this.uniforms=xe(s.uniforms),this.defines=Object.assign({},s.defines),this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.lights=s.lights,this.clipping=s.clipping,this.skinning=s.skinning,this.morphTargets=s.morphTargets,this.morphNormals=s.morphNormals,this.extensions=Object.assign({},s.extensions),this.glslVersion=s.glslVersion,this},V.prototype.toJSON=function(s){const t=h.prototype.toJSON.call(this,s);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const l=this.uniforms[o].value;l&&l.isTexture?t.uniforms[o]={type:"t",value:l.toJSON(s).uuid}:l&&l.isColor?t.uniforms[o]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[o]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[o]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[o]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[o]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[o]={type:"m4",value:l.toArray()}:t.uniforms[o]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},q.prototype=Object.assign(Object.create(I.prototype),{constructor:q,isCamera:!0,copy:function(s,t){return I.prototype.copy.call(this,s,t),this.matrixWorldInverse.copy(s.matrixWorldInverse),this.projectionMatrix.copy(s.projectionMatrix),this.projectionMatrixInverse.copy(s.projectionMatrixInverse),this},getWorldDirection:function(s){s===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),s=new Je),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return s.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(s){I.prototype.updateMatrixWorld.call(this,s),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(s,t){I.prototype.updateWorldMatrix.call(this,s,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}}),Q.prototype=Object.assign(Object.create(q.prototype),{constructor:Q,isPerspectiveCamera:!0,copy:function(s,t){return q.prototype.copy.call(this,s,t),this.fov=s.fov,this.zoom=s.zoom,this.near=s.near,this.far=s.far,this.focus=s.focus,this.aspect=s.aspect,this.view=s.view===null?null:Object.assign({},s.view),this.filmGauge=s.filmGauge,this.filmOffset=s.filmOffset,this},setFocalLength:function(s){const t=.5*this.getFilmHeight()/s;this.fov=2*qi.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const s=Math.tan(.5*qi.DEG2RAD*this.fov);return .5*this.getFilmHeight()/s},getEffectiveFOV:function(){return 2*qi.RAD2DEG*Math.atan(Math.tan(.5*qi.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(s,t,i,o,l,f){this.aspect=s/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=s,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=o,this.view.width=l,this.view.height=f,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const s=this.near;let t=s*Math.tan(.5*qi.DEG2RAD*this.fov)/this.zoom,i=2*t,o=this.aspect*i,l=-.5*o;const f=this.view;if(this.view!==null&&this.view.enabled){const M=f.fullWidth,D=f.fullHeight;l+=f.offsetX*o/M,t-=f.offsetY*i/D,o*=f.width/M,i*=f.height/D}const B=this.filmOffset;B!==0&&(l+=s*B/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-i,s,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(s){const t=I.prototype.toJSON.call(this,s);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});class hp extends I{constructor(t,i,o){if(super(),this.type="CubeCamera",o.isWebGLCubeRenderTarget!==!0)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=o;const l=new Q(90,1,t,i);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Je(1,0,0)),this.add(l);const f=new Q(90,1,t,i);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new Je(-1,0,0)),this.add(f);const B=new Q(90,1,t,i);B.layers=this.layers,B.up.set(0,0,1),B.lookAt(new Je(0,1,0)),this.add(B);const M=new Q(90,1,t,i);M.layers=this.layers,M.up.set(0,0,-1),M.lookAt(new Je(0,-1,0)),this.add(M);const D=new Q(90,1,t,i);D.layers=this.layers,D.up.set(0,-1,0),D.lookAt(new Je(0,0,1)),this.add(D);const G=new Q(90,1,t,i);G.layers=this.layers,G.up.set(0,-1,0),G.lookAt(new Je(0,0,-1)),this.add(G)}update(t,i){this.parent===null&&this.updateMatrixWorld();const o=this.renderTarget,[l,f,B,M,D,G]=this.children,$=t.xr.enabled,ie=t.getRenderTarget();t.xr.enabled=!1;const oe=o.texture.generateMipmaps;o.texture.generateMipmaps=!1,t.setRenderTarget(o,0),t.render(i,l),t.setRenderTarget(o,1),t.render(i,f),t.setRenderTarget(o,2),t.render(i,B),t.setRenderTarget(o,3),t.render(i,M),t.setRenderTarget(o,4),t.render(i,D),o.texture.generateMipmaps=oe,t.setRenderTarget(o,5),t.render(i,G),t.setRenderTarget(ie),t.xr.enabled=$}}class Rh extends go{constructor(t,i,o,l,f,B,M,D,G,$){super(t=t!==void 0?t:[],i=i!==void 0?i:Da,o,l,f,B,M=M!==void 0?M:Es,D,G,$),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Rh.prototype.isCubeTexture=!0;class dp extends aa{constructor(t,i,o){Number.isInteger(i)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),i=o),super(t,t,i),i=i||{},this.texture=new Rh(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=i.generateMipmaps!==void 0&&i.generateMipmaps,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:nt,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.format=Uo,this.texture.encoding=i.encoding,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const o={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},l=new Cu(5,5,5),f=new V({name:"CubemapFromEquirect",uniforms:xe(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,side:Js,blending:ll});f.uniforms.tEquirect.value=i;const B=new te(l,f),M=i.minFilter;return i.minFilter===oc&&(i.minFilter=nt),new hp(1,10,this).update(t,B),i.minFilter=M,B.geometry.dispose(),B.material.dispose(),this}clear(t,i,o,l){const f=t.getRenderTarget();for(let B=0;B<6;B++)t.setRenderTarget(this,B),t.clear(i,o,l);t.setRenderTarget(f)}}dp.prototype.isWebGLCubeRenderTarget=!0;class Bh extends go{constructor(t,i,o,l,f,B,M,D,G,$,ie,oe){super(null,B,M,D,G,$,l,f,ie,oe),this.image={data:t||null,width:i||1,height:o||1},this.magFilter=G!==void 0?G:mo,this.minFilter=$!==void 0?$:mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Bh.prototype.isDataTexture=!0;const Lh=new ea,fp=new Je;class Cd{constructor(t=new fl,i=new fl,o=new fl,l=new fl,f=new fl,B=new fl){this.planes=[t,i,o,l,f,B]}set(t,i,o,l,f,B){const M=this.planes;return M[0].copy(t),M[1].copy(i),M[2].copy(o),M[3].copy(l),M[4].copy(f),M[5].copy(B),this}copy(t){const i=this.planes;for(let o=0;o<6;o++)i[o].copy(t.planes[o]);return this}setFromProjectionMatrix(t){const i=this.planes,o=t.elements,l=o[0],f=o[1],B=o[2],M=o[3],D=o[4],G=o[5],$=o[6],ie=o[7],oe=o[8],he=o[9],ye=o[10],we=o[11],be=o[12],ke=o[13],Xe=o[14],it=o[15];return i[0].setComponents(M-l,ie-D,we-oe,it-be).normalize(),i[1].setComponents(M+l,ie+D,we+oe,it+be).normalize(),i[2].setComponents(M+f,ie+G,we+he,it+ke).normalize(),i[3].setComponents(M-f,ie-G,we-he,it-ke).normalize(),i[4].setComponents(M-B,ie-$,we-ye,it-Xe).normalize(),i[5].setComponents(M+B,ie+$,we+ye,it+Xe).normalize(),this}intersectsObject(t){const i=t.geometry;return i.boundingSphere===null&&i.computeBoundingSphere(),Lh.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Lh)}intersectsSprite(t){return Lh.center.set(0,0,0),Lh.radius=.7071067811865476,Lh.applyMatrix4(t.matrixWorld),this.intersectsSphere(Lh)}intersectsSphere(t){const i=this.planes,o=t.center,l=-t.radius;for(let f=0;f<6;f++)if(i[f].distanceToPoint(o)<l)return!1;return!0}intersectsBox(t){const i=this.planes;for(let o=0;o<6;o++){const l=i[o];if(fp.x=l.normal.x>0?t.max.x:t.min.x,fp.y=l.normal.y>0?t.max.y:t.min.y,fp.z=l.normal.z>0?t.max.z:t.min.z,l.distanceToPoint(fp)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let o=0;o<6;o++)if(i[o].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Md extends U{constructor(t=1,i=1,o=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:o,heightSegments:l};const f=t/2,B=i/2,M=Math.floor(o),D=Math.floor(l),G=M+1,$=D+1,ie=t/M,oe=i/D,he=[],ye=[],we=[],be=[];for(let ke=0;ke<$;ke++){const Xe=ke*oe-B;for(let it=0;it<G;it++){const lt=it*ie-f;ye.push(lt,-Xe,0),we.push(0,0,1),be.push(it/M),be.push(1-ke/D)}}for(let ke=0;ke<D;ke++)for(let Xe=0;Xe<M;Xe++){const it=Xe+G*ke,lt=Xe+G*(ke+1),pt=Xe+1+G*(ke+1),mt=Xe+1+G*ke;he.push(it,lt,mt),he.push(lt,pt,mt)}this.setIndex(he),this.setAttribute("position",new P(ye,3)),this.setAttribute("normal",new P(we,3)),this.setAttribute("uv",new P(be,2))}}const ns={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex:`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common:`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(		0, 1,		0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
							f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
							f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(	1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,	1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,	1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmissionmap_fragment:`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,transmissionmap_pars_fragment:`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},Ei={common:{diffuse:{value:new Fi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new cs},uv2Transform:{value:new cs},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new cs}},sprite:{diffuse:{value:new Fi(15658734)},opacity:{value:1},center:{value:new Qn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new cs}}},gl={basic:{uniforms:Ee([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.fog]),vertexShader:ns.meshbasic_vert,fragmentShader:ns.meshbasic_frag},lambert:{uniforms:Ee([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.fog,Ei.lights,{emissive:{value:new Fi(0)}}]),vertexShader:ns.meshlambert_vert,fragmentShader:ns.meshlambert_frag},phong:{uniforms:Ee([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.fog,Ei.lights,{emissive:{value:new Fi(0)},specular:{value:new Fi(1118481)},shininess:{value:30}}]),vertexShader:ns.meshphong_vert,fragmentShader:ns.meshphong_frag},standard:{uniforms:Ee([Ei.common,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.roughnessmap,Ei.metalnessmap,Ei.fog,Ei.lights,{emissive:{value:new Fi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ns.meshphysical_vert,fragmentShader:ns.meshphysical_frag},toon:{uniforms:Ee([Ei.common,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.gradientmap,Ei.fog,Ei.lights,{emissive:{value:new Fi(0)}}]),vertexShader:ns.meshtoon_vert,fragmentShader:ns.meshtoon_frag},matcap:{uniforms:Ee([Ei.common,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.fog,{matcap:{value:null}}]),vertexShader:ns.meshmatcap_vert,fragmentShader:ns.meshmatcap_frag},points:{uniforms:Ee([Ei.points,Ei.fog]),vertexShader:ns.points_vert,fragmentShader:ns.points_frag},dashed:{uniforms:Ee([Ei.common,Ei.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ns.linedashed_vert,fragmentShader:ns.linedashed_frag},depth:{uniforms:Ee([Ei.common,Ei.displacementmap]),vertexShader:ns.depth_vert,fragmentShader:ns.depth_frag},normal:{uniforms:Ee([Ei.common,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,{opacity:{value:1}}]),vertexShader:ns.normal_vert,fragmentShader:ns.normal_frag},sprite:{uniforms:Ee([Ei.sprite,Ei.fog]),vertexShader:ns.sprite_vert,fragmentShader:ns.sprite_frag},background:{uniforms:{uvTransform:{value:new cs},t2D:{value:null}},vertexShader:ns.background_vert,fragmentShader:ns.background_frag},cube:{uniforms:Ee([Ei.envmap,{opacity:{value:1}}]),vertexShader:ns.cube_vert,fragmentShader:ns.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ns.equirect_vert,fragmentShader:ns.equirect_frag},distanceRGBA:{uniforms:Ee([Ei.common,Ei.displacementmap,{referencePosition:{value:new Je},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ns.distanceRGBA_vert,fragmentShader:ns.distanceRGBA_frag},shadow:{uniforms:Ee([Ei.lights,Ei.fog,{color:{value:new Fi(0)},opacity:{value:1}}]),vertexShader:ns.shadow_vert,fragmentShader:ns.shadow_frag}};gl.physical={uniforms:Ee([gl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Qn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Fi(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ns.meshphysical_vert,fragmentShader:ns.meshphysical_frag};class Hm extends go{constructor(t=null,i=1,o=1,l=1){super(null),this.image={data:t,width:i,height:o,depth:l},this.magFilter=mo,this.minFilter=mo,this.wrapR=Yo,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Hm.prototype.isDataTexture2DArray=!0;class zm extends go{constructor(t=null,i=1,o=1,l=1){super(null),this.image={data:t,width:i,height:o,depth:l},this.magFilter=mo,this.minFilter=mo,this.wrapR=Yo,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}zm.prototype.isDataTexture3D=!0;const b0=new go,dv=new Hm,fv=new zm,_0=new Rh,w0=[],C0=[],M0=new Float32Array(16),T0=new Float32Array(9),S0=new Float32Array(4);$t.prototype.updateCache=function(s){const t=this.cache;s instanceof Float32Array&&t.length!==s.length&&(this.cache=new Float32Array(s.length)),Ge(t,s)},Xt.prototype.setValue=function(s,t,i){const o=this.seq;for(let l=0,f=o.length;l!==f;++l){const B=o[l];B.setValue(s,t[B.id],i)}};const Vm=/(\w+)(\])?(\[|\.)?/g;In.prototype.setValue=function(s,t,i,o){const l=this.map[t];l!==void 0&&l.setValue(s,i,o)},In.prototype.setOptional=function(s,t,i){const o=t[i];o!==void 0&&this.setValue(s,i,o)},In.upload=function(s,t,i,o){for(let l=0,f=t.length;l!==f;++l){const B=t[l],M=i[B.id];M.needsUpdate!==!1&&B.setValue(s,M.value,o)}},In.seqWithValue=function(s,t){const i=[];for(let o=0,l=s.length;o!==l;++o){const f=s[o];f.id in t&&i.push(f)}return i};let pv=0;const mv=/^[ \t]*#include +<([\w\d./]+)>/gm,gv=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Av=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;let vv=0;class pp extends h{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}pp.prototype.isMeshDepthMaterial=!0;class mp extends h{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Je,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}mp.prototype.isMeshDistanceMaterial=!0;var yv=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,xv=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;class Qm extends Q{constructor(t=[]){super(),this.cameras=t}}Qm.prototype.isArrayCamera=!0;class Mu extends I{constructor(){super(),this.type="Group"}}Mu.prototype.isGroup=!0,Object.assign(Wt.prototype,{constructor:Wt,getHandSpace:function(){return this._hand===null&&(this._hand=new Mu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Mu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Mu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(s){return this._targetRay!==null&&this._targetRay.dispatchEvent(s),this._grip!==null&&this._grip.dispatchEvent(s),this._hand!==null&&this._hand.dispatchEvent(s),this},disconnect:function(s){return this.dispatchEvent({type:"disconnected",data:s}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(s,t,i){let o=null,l=null,f=null;const B=this._targetRay,M=this._grip,D=this._hand;if(s&&t.session.visibilityState!=="visible-blurred")if(B!==null&&(o=t.getPose(s.targetRaySpace,i))!==null&&(B.matrix.fromArray(o.transform.matrix),B.matrix.decompose(B.position,B.rotation,B.scale)),D&&s.hand){f=!0;for(const oe of s.hand.values()){const he=t.getJointPose(oe,i);if(D.joints[oe.jointName]===void 0){const we=new Mu;we.matrixAutoUpdate=!1,we.visible=!1,D.joints[oe.jointName]=we,D.add(we)}const ye=D.joints[oe.jointName];he!==null&&(ye.matrix.fromArray(he.transform.matrix),ye.matrix.decompose(ye.position,ye.rotation,ye.scale),ye.jointRadius=he.radius),ye.visible=he!==null}const G=D.joints["index-finger-tip"],$=D.joints["thumb-tip"],ie=G.position.distanceTo($.position);D.inputState.pinching&&ie>.025?(D.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:s.handedness,target:this})):!D.inputState.pinching&&ie<=.015&&(D.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:s.handedness,target:this}))}else M!==null&&s.gripSpace&&(l=t.getPose(s.gripSpace,i))!==null&&(M.matrix.fromArray(l.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale));return B!==null&&(B.visible=o!==null),M!==null&&(M.visible=l!==null),D!==null&&(D.visible=f!==null),this}}),Object.assign(mn.prototype,k.prototype);class I0 extends Xn{}I0.prototype.isWebGL1Renderer=!0;class Td{constructor(t,i=25e-5){this.name="",this.color=new Fi(t),this.density=i}clone(){return new Td(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Td.prototype.isFogExp2=!0;class Sd{constructor(t,i=1,o=1e3){this.name="",this.color=new Fi(t),this.near=i,this.far=o}clone(){return new Sd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Sd.prototype.isFog=!0;class gp extends I{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.background!==null&&(i.object.background=this.background.toJSON(t)),this.environment!==null&&(i.object.environment=this.environment.toJSON(t)),this.fog!==null&&(i.object.fog=this.fog.toJSON()),i}}gp.prototype.isScene=!0,Object.defineProperty(ei.prototype,"needsUpdate",{set:function(s){s===!0&&this.version++}}),Object.assign(ei.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(s){return this.usage=s,this},copy:function(s){return this.array=new s.array.constructor(s.array),this.count=s.count,this.stride=s.stride,this.usage=s.usage,this},copyAt:function(s,t,i){s*=this.stride,i*=t.stride;for(let o=0,l=this.stride;o<l;o++)this.array[s+o]=t.array[i+o];return this},set:function(s,t=0){return this.array.set(s,t),this},clone:function(s){s.arrayBuffers===void 0&&(s.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qi.generateUUID()),s.arrayBuffers[this.array.buffer._uuid]===void 0&&(s.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new ei(new this.array.constructor(s.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(s){return this.onUploadCallback=s,this},toJSON:function(s){return s.arrayBuffers===void 0&&(s.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qi.generateUUID()),s.arrayBuffers[this.array.buffer._uuid]===void 0&&(s.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const So=new Je;Object.defineProperties(pn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(s){this.data.needsUpdate=s}}}),Object.assign(pn.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(s){for(let t=0,i=this.data.count;t<i;t++)So.x=this.getX(t),So.y=this.getY(t),So.z=this.getZ(t),So.applyMatrix4(s),this.setXYZ(t,So.x,So.y,So.z);return this},applyNormalMatrix:function(s){for(let t=0,i=this.count;t<i;t++)So.x=this.getX(t),So.y=this.getY(t),So.z=this.getZ(t),So.applyNormalMatrix(s),this.setXYZ(t,So.x,So.y,So.z);return this},transformDirection:function(s){for(let t=0,i=this.count;t<i;t++)So.x=this.getX(t),So.y=this.getY(t),So.z=this.getZ(t),So.transformDirection(s),this.setXYZ(t,So.x,So.y,So.z);return this},setX:function(s,t){return this.data.array[s*this.data.stride+this.offset]=t,this},setY:function(s,t){return this.data.array[s*this.data.stride+this.offset+1]=t,this},setZ:function(s,t){return this.data.array[s*this.data.stride+this.offset+2]=t,this},setW:function(s,t){return this.data.array[s*this.data.stride+this.offset+3]=t,this},getX:function(s){return this.data.array[s*this.data.stride+this.offset]},getY:function(s){return this.data.array[s*this.data.stride+this.offset+1]},getZ:function(s){return this.data.array[s*this.data.stride+this.offset+2]},getW:function(s){return this.data.array[s*this.data.stride+this.offset+3]},setXY:function(s,t,i){return s=s*this.data.stride+this.offset,this.data.array[s+0]=t,this.data.array[s+1]=i,this},setXYZ:function(s,t,i,o){return s=s*this.data.stride+this.offset,this.data.array[s+0]=t,this.data.array[s+1]=i,this.data.array[s+2]=o,this},setXYZW:function(s,t,i,o,l){return s=s*this.data.stride+this.offset,this.data.array[s+0]=t,this.data.array[s+1]=i,this.data.array[s+2]=o,this.data.array[s+3]=l,this},clone:function(s){if(s===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return new y(new this.array.constructor(t),this.itemSize,this.normalized)}return s.interleavedBuffers===void 0&&(s.interleavedBuffers={}),s.interleavedBuffers[this.data.uuid]===void 0&&(s.interleavedBuffers[this.data.uuid]=this.data.clone(s)),new pn(s.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(s){if(s===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return s.interleavedBuffers===void 0&&(s.interleavedBuffers={}),s.interleavedBuffers[this.data.uuid]===void 0&&(s.interleavedBuffers[this.data.uuid]=this.data.toJSON(s)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class jm extends h{constructor(t){super(),this.type="SpriteMaterial",this.color=new Fi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}jm.prototype.isSpriteMaterial=!0;let Id;const Ap=new Je,Rd=new Je,Bd=new Je,Ld=new Qn,vp=new Qn,Ev=new ir,Wm=new Je,yp=new Je,Km=new Je,bv=new Qn,R0=new Qn,_v=new Qn;class Xm extends I{constructor(t){if(super(),this.type="Sprite",Id===void 0){Id=new U;const i=new ei(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Id.setIndex([0,1,2,0,2,3]),Id.setAttribute("position",new pn(i,3,0,!1)),Id.setAttribute("uv",new pn(i,2,3,!1))}this.geometry=Id,this.material=t!==void 0?t:new jm,this.center=new Qn(.5,.5)}raycast(t,i){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Rd.setFromMatrixScale(this.matrixWorld),Ev.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Bd.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Rd.multiplyScalar(-Bd.z);const o=this.material.rotation;let l,f;o!==0&&(f=Math.cos(o),l=Math.sin(o));const B=this.center;Oi(Wm.set(-.5,-.5,0),Bd,B,Rd,l,f),Oi(yp.set(.5,-.5,0),Bd,B,Rd,l,f),Oi(Km.set(.5,.5,0),Bd,B,Rd,l,f),bv.set(0,0),R0.set(1,0),_v.set(1,1);let M=t.ray.intersectTriangle(Wm,yp,Km,!1,Ap);if(M===null&&(Oi(yp.set(-.5,.5,0),Bd,B,Rd,l,f),R0.set(0,1),(M=t.ray.intersectTriangle(Wm,Km,yp,!1,Ap))===null))return;const D=t.ray.origin.distanceTo(Ap);D<t.near||D>t.far||i.push({distance:D,point:Ap.clone(),uv:vo.getUV(Ap,Wm,yp,Km,bv,R0,_v,new Qn),face:null,object:this})}copy(t){return super.copy(t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}Xm.prototype.isSprite=!0;const Ym=new Je,wv=new Je;class Cv extends I{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const i=t.levels;for(let o=0,l=i.length;o<l;o++){const f=i[o];this.addLevel(f.object.clone(),f.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,i=0){i=Math.abs(i);const o=this.levels;let l;for(l=0;l<o.length&&!(i<o[l].distance);l++);return o.splice(l,0,{distance:i,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const i=this.levels;if(i.length>0){let o,l;for(o=1,l=i.length;o<l&&!(t<i[o].distance);o++);return i[o-1].object}return null}raycast(t,i){if(this.levels.length>0){Ym.setFromMatrixPosition(this.matrixWorld);const o=t.ray.origin.distanceTo(Ym);this.getObjectForDistance(o).raycast(t,i)}}update(t){const i=this.levels;if(i.length>1){Ym.setFromMatrixPosition(t.matrixWorld),wv.setFromMatrixPosition(this.matrixWorld);const o=Ym.distanceTo(wv)/t.zoom;i[0].object.visible=!0;let l,f;for(l=1,f=i.length;l<f&&o>=i[l].distance;l++)i[l-1].object.visible=!1,i[l].object.visible=!0;for(this._currentLevel=l-1;l<f;l++)i[l].object.visible=!1}}toJSON(t){const i=super.toJSON(t);this.autoUpdate===!1&&(i.object.autoUpdate=!1),i.object.levels=[];const o=this.levels;for(let l=0,f=o.length;l<f;l++){const B=o[l];i.object.levels.push({object:B.object.uuid,distance:B.distance})}return i}}const Mv=new Je,Tv=new os,Sv=new os,gy=new Je,Iv=new ir;Mi.prototype=Object.assign(Object.create(te.prototype),{constructor:Mi,isSkinnedMesh:!0,copy:function(s){return te.prototype.copy.call(this,s),this.bindMode=s.bindMode,this.bindMatrix.copy(s.bindMatrix),this.bindMatrixInverse.copy(s.bindMatrixInverse),this.skeleton=s.skeleton,this},bind:function(s,t){this.skeleton=s,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const s=new os,t=this.geometry.attributes.skinWeight;for(let i=0,o=t.count;i<o;i++){s.x=t.getX(i),s.y=t.getY(i),s.z=t.getZ(i),s.w=t.getW(i);const l=1/s.manhattanLength();l!==1/0?s.multiplyScalar(l):s.set(1,0,0,0),t.setXYZW(i,s.x,s.y,s.z,s.w)}},updateMatrixWorld:function(s){te.prototype.updateMatrixWorld.call(this,s),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(s,t){const i=this.skeleton,o=this.geometry;Tv.fromBufferAttribute(o.attributes.skinIndex,s),Sv.fromBufferAttribute(o.attributes.skinWeight,s),Mv.fromBufferAttribute(o.attributes.position,s).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let l=0;l<4;l++){const f=Sv.getComponent(l);if(f!==0){const B=Tv.getComponent(l);Iv.multiplyMatrices(i.bones[B].matrixWorld,i.boneInverses[B]),t.addScaledVector(gy.copy(Mv).applyMatrix4(Iv),f)}}return t.applyMatrix4(this.bindMatrixInverse)}}),Ti.prototype=Object.assign(Object.create(I.prototype),{constructor:Ti,isBone:!0});const Rv=new ir,Ay=new ir;class qm{constructor(t=[],i=[]){this.uuid=qi.generateUUID(),this.bones=t.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),i.length===0)this.calculateInverses();else if(t.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let o=0,l=this.bones.length;o<l;o++)this.boneInverses.push(new ir)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,i=this.bones.length;t<i;t++){const o=new ir;this.bones[t]&&o.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(o)}}pose(){for(let t=0,i=this.bones.length;t<i;t++){const o=this.bones[t];o&&o.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,i=this.bones.length;t<i;t++){const o=this.bones[t];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}}update(){const t=this.bones,i=this.boneInverses,o=this.boneMatrices,l=this.boneTexture;for(let f=0,B=t.length;f<B;f++){const M=t[f]?t[f].matrixWorld:Ay;Rv.multiplyMatrices(M,i[f]),Rv.toArray(o,16*f)}l!==null&&(l.needsUpdate=!0)}clone(){return new qm(this.bones,this.boneInverses)}getBoneByName(t){for(let i=0,o=this.bones.length;i<o;i++){const l=this.bones[i];if(l.name===t)return l}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,i){this.uuid=t.uuid;for(let o=0,l=t.bones.length;o<l;o++){const f=t.bones[o];let B=i[f];B===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),B=new Ti),this.bones.push(B),this.boneInverses.push(new ir().fromArray(t.boneInverses[o]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const i=this.bones,o=this.boneInverses;for(let l=0,f=i.length;l<f;l++){const B=i[l];t.bones.push(B.uuid);const M=o[l];t.boneInverses.push(M.toArray())}return t}}const Bv=new ir,Lv=new ir,Jm=[],xp=new te;Xr.prototype=Object.assign(Object.create(te.prototype),{constructor:Xr,isInstancedMesh:!0,copy:function(s){return te.prototype.copy.call(this,s),this.instanceMatrix.copy(s.instanceMatrix),s.instanceColor!==null&&(this.instanceColor=s.instanceColor.clone()),this.count=s.count,this},getColorAt:function(s,t){t.fromArray(this.instanceColor.array,3*s)},getMatrixAt:function(s,t){t.fromArray(this.instanceMatrix.array,16*s)},raycast:function(s,t){const i=this.matrixWorld,o=this.count;if(xp.geometry=this.geometry,xp.material=this.material,xp.material!==void 0)for(let l=0;l<o;l++){this.getMatrixAt(l,Bv),Lv.multiplyMatrices(i,Bv),xp.matrixWorld=Lv,xp.raycast(s,Jm);for(let f=0,B=Jm.length;f<B;f++){const M=Jm[f];M.instanceId=l,M.object=this,t.push(M)}Jm.length=0}},setColorAt:function(s,t){this.instanceColor===null&&(this.instanceColor=new y(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*s)},setMatrixAt:function(s,t){t.toArray(this.instanceMatrix.array,16*s)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class ta extends h{constructor(t){super(),this.type="LineBasicMaterial",this.color=new Fi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this}}ta.prototype.isLineBasicMaterial=!0;const Dv=new Je,Pv=new Je,Wr=new ir,gi=new Ql,Ca=new ea;zi.prototype=Object.assign(Object.create(I.prototype),{constructor:zi,isLine:!0,copy:function(s){return I.prototype.copy.call(this,s),this.material=s.material,this.geometry=s.geometry,this},computeLineDistances:function(){const s=this.geometry;if(s.isBufferGeometry)if(s.index===null){const t=s.attributes.position,i=[0];for(let o=1,l=t.count;o<l;o++)Dv.fromBufferAttribute(t,o-1),Pv.fromBufferAttribute(t,o),i[o]=i[o-1],i[o]+=Dv.distanceTo(Pv);s.setAttribute("lineDistance",new P(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else s.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(s,t){const i=this.geometry,o=this.matrixWorld,l=s.params.Line.threshold,f=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ca.copy(i.boundingSphere),Ca.applyMatrix4(o),Ca.radius+=l,s.ray.intersectsSphere(Ca)===!1)return;Wr.copy(o).invert(),gi.copy(s.ray).applyMatrix4(Wr);const B=l/((this.scale.x+this.scale.y+this.scale.z)/3),M=B*B,D=new Je,G=new Je,$=new Je,ie=new Je,oe=this.isLineSegments?2:1;if(i.isBufferGeometry){const he=i.index,ye=i.attributes.position;if(he!==null)for(let we=Math.max(0,f.start),be=Math.min(he.count,f.start+f.count)-1;we<be;we+=oe){const ke=he.getX(we),Xe=he.getX(we+1);if(D.fromBufferAttribute(ye,ke),G.fromBufferAttribute(ye,Xe),gi.distanceSqToSegment(D,G,ie,$)>M)continue;ie.applyMatrix4(this.matrixWorld);const it=s.ray.origin.distanceTo(ie);it<s.near||it>s.far||t.push({distance:it,point:$.clone().applyMatrix4(this.matrixWorld),index:we,face:null,faceIndex:null,object:this})}else for(let we=Math.max(0,f.start),be=Math.min(ye.count,f.start+f.count)-1;we<be;we+=oe){if(D.fromBufferAttribute(ye,we),G.fromBufferAttribute(ye,we+1),gi.distanceSqToSegment(D,G,ie,$)>M)continue;ie.applyMatrix4(this.matrixWorld);const ke=s.ray.origin.distanceTo(ie);ke<s.near||ke>s.far||t.push({distance:ke,point:$.clone().applyMatrix4(this.matrixWorld),index:we,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const s=this.geometry;if(s.isBufferGeometry){const t=s.morphAttributes,i=Object.keys(t);if(i.length>0){const o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,f=o.length;l<f;l++){const B=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=l}}}}else{const t=s.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Dd=new Je,B0=new Je;er.prototype=Object.assign(Object.create(zi.prototype),{constructor:er,isLineSegments:!0,computeLineDistances:function(){const s=this.geometry;if(s.isBufferGeometry)if(s.index===null){const t=s.attributes.position,i=[];for(let o=0,l=t.count;o<l;o+=2)Dd.fromBufferAttribute(t,o),B0.fromBufferAttribute(t,o+1),i[o]=o===0?0:i[o-1],i[o+1]=i[o]+Dd.distanceTo(B0);s.setAttribute("lineDistance",new P(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else s.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});class Zm extends zi{constructor(t,i){super(t,i),this.type="LineLoop"}}Zm.prototype.isLineLoop=!0;class Tu extends h{constructor(t){super(),this.type="PointsMaterial",this.color=new Fi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this}}Tu.prototype.isPointsMaterial=!0;const L0=new ir,$m=new Ql,Ep=new ea,Su=new Je;kr.prototype=Object.assign(Object.create(I.prototype),{constructor:kr,isPoints:!0,copy:function(s){return I.prototype.copy.call(this,s),this.material=s.material,this.geometry=s.geometry,this},raycast:function(s,t){const i=this.geometry,o=this.matrixWorld,l=s.params.Points.threshold,f=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ep.copy(i.boundingSphere),Ep.applyMatrix4(o),Ep.radius+=l,s.ray.intersectsSphere(Ep)===!1)return;L0.copy(o).invert(),$m.copy(s.ray).applyMatrix4(L0);const B=l/((this.scale.x+this.scale.y+this.scale.z)/3),M=B*B;if(i.isBufferGeometry){const D=i.index,G=i.attributes.position;if(D!==null)for(let $=Math.max(0,f.start),ie=Math.min(D.count,f.start+f.count);$<ie;$++){const oe=D.getX($);Su.fromBufferAttribute(G,oe),Os(Su,oe,M,o,s,t,this)}else for(let $=Math.max(0,f.start),ie=Math.min(G.count,f.start+f.count);$<ie;$++)Su.fromBufferAttribute(G,$),Os(Su,$,M,o,s,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const s=this.geometry;if(s.isBufferGeometry){const t=s.morphAttributes,i=Object.keys(t);if(i.length>0){const o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,f=o.length;l<f;l++){const B=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=l}}}}else{const t=s.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});class Iu extends go{constructor(t,i,o,l,f,B,M,D,G){function $(){ie.needsUpdate=!0,t.requestVideoFrameCallback($)}super(t,i,o,l,f,B,M,D,G),this.format=M!==void 0?M:Es,this.minFilter=B!==void 0?B:nt,this.magFilter=f!==void 0?f:nt,this.generateMipmaps=!1;const ie=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback($)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!("requestVideoFrameCallback"in t)&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Iu.prototype.isVideoTexture=!0;class bp extends go{constructor(t,i,o,l,f,B,M,D,G,$,ie,oe){super(null,B,M,D,G,$,l,f,ie,oe),this.image={width:i,height:o},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}bp.prototype.isCompressedTexture=!0;class Kc extends go{constructor(t,i,o,l,f,B,M,D,G){super(t,i,o,l,f,B,M,D,G),this.needsUpdate=!0}}Kc.prototype.isCanvasTexture=!0;class _p extends go{constructor(t,i,o,l,f,B,M,D,G,$){if(($=$!==void 0?$:qo)!==qo&&$!==sa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");o===void 0&&$===qo&&(o=ac),o===void 0&&$===sa&&(o=ma),super(null,l,f,B,M,D,$,o,G),this.image={width:t,height:i},this.magFilter=M!==void 0?M:mo,this.minFilter=D!==void 0?D:mo,this.flipY=!1,this.generateMipmaps=!1}}_p.prototype.isDepthTexture=!0;class Pd extends U{constructor(t=1,i=8,o=0,l=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:i,thetaStart:o,thetaLength:l},i=Math.max(3,i);const f=[],B=[],M=[],D=[],G=new Je,$=new Qn;B.push(0,0,0),M.push(0,0,1),D.push(.5,.5);for(let ie=0,oe=3;ie<=i;ie++,oe+=3){const he=o+ie/i*l;G.x=t*Math.cos(he),G.y=t*Math.sin(he),B.push(G.x,G.y,G.z),M.push(0,0,1),$.x=(B[oe]/t+1)/2,$.y=(B[oe+1]/t+1)/2,D.push($.x,$.y)}for(let ie=1;ie<=i;ie++)f.push(ie,ie+1,0);this.setIndex(f),this.setAttribute("position",new P(B,3)),this.setAttribute("normal",new P(M,3)),this.setAttribute("uv",new P(D,2))}}class Xc extends U{constructor(t=1,i=1,o=1,l=8,f=1,B=!1,M=0,D=2*Math.PI){function G(it){const lt=we,pt=new Qn,mt=new Je;let ot=0;const kt=it===!0?t:i,gt=it===!0?1:-1;for(let Zt=1;Zt<=l;Zt++)oe.push(0,ke*gt,0),he.push(0,gt,0),ye.push(.5,.5),we++;const Ht=we;for(let Zt=0;Zt<=l;Zt++){const Qt=Zt/l*D+M,en=Math.cos(Qt),Wn=Math.sin(Qt);mt.x=kt*Wn,mt.y=ke*gt,mt.z=kt*en,oe.push(mt.x,mt.y,mt.z),he.push(0,gt,0),pt.x=.5*en+.5,pt.y=.5*Wn*gt+.5,ye.push(pt.x,pt.y),we++}for(let Zt=0;Zt<l;Zt++){const Qt=lt+Zt,en=Ht+Zt;it===!0?ie.push(en,en+1,Qt):ie.push(en+1,en,Qt),ot+=3}$.addGroup(Xe,ot,it===!0?1:2),Xe+=ot}super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:i,height:o,radialSegments:l,heightSegments:f,openEnded:B,thetaStart:M,thetaLength:D};const $=this;l=Math.floor(l),f=Math.floor(f);const ie=[],oe=[],he=[],ye=[];let we=0;const be=[],ke=o/2;let Xe=0;(function(){const it=new Je,lt=new Je;let pt=0;const mt=(i-t)/o;for(let ot=0;ot<=f;ot++){const kt=[],gt=ot/f,Ht=gt*(i-t)+t;for(let Zt=0;Zt<=l;Zt++){const Qt=Zt/l,en=Qt*D+M,Wn=Math.sin(en),ii=Math.cos(en);lt.x=Ht*Wn,lt.y=-gt*o+ke,lt.z=Ht*ii,oe.push(lt.x,lt.y,lt.z),it.set(Wn,mt,ii).normalize(),he.push(it.x,it.y,it.z),ye.push(Qt,1-gt),kt.push(we++)}be.push(kt)}for(let ot=0;ot<l;ot++)for(let kt=0;kt<f;kt++){const gt=be[kt][ot],Ht=be[kt+1][ot],Zt=be[kt+1][ot+1],Qt=be[kt][ot+1];ie.push(gt,Ht,Qt),ie.push(Ht,Zt,Qt),pt+=6}$.addGroup(Xe,pt,0),Xe+=pt})(),B===!1&&(t>0&&G(!0),i>0&&G(!1)),this.setIndex(ie),this.setAttribute("position",new P(oe,3)),this.setAttribute("normal",new P(he,3)),this.setAttribute("uv",new P(ye,2))}}class Wl extends Xc{constructor(t=1,i=1,o=8,l=1,f=!1,B=0,M=2*Math.PI){super(0,t,i,o,l,f,B,M),this.type="ConeGeometry",this.parameters={radius:t,height:i,radialSegments:o,heightSegments:l,openEnded:f,thetaStart:B,thetaLength:M}}}class Ga extends U{constructor(t,i,o=1,l=0){function f(ie){G.push(ie.x,ie.y,ie.z)}function B(ie,oe){const he=3*ie;oe.x=t[he+0],oe.y=t[he+1],oe.z=t[he+2]}function M(ie,oe,he,ye){ye<0&&ie.x===1&&($[oe]=ie.x-1),he.x===0&&he.z===0&&($[oe]=ye/2/Math.PI+.5)}function D(ie){return Math.atan2(ie.z,-ie.x)}super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:i,radius:o,detail:l};const G=[],$=[];(function(ie){const oe=new Je,he=new Je,ye=new Je;for(let we=0;we<i.length;we+=3)B(i[we+0],oe),B(i[we+1],he),B(i[we+2],ye),function(be,ke,Xe,it){const lt=it+1,pt=[];for(let mt=0;mt<=lt;mt++){pt[mt]=[];const ot=be.clone().lerp(Xe,mt/lt),kt=ke.clone().lerp(Xe,mt/lt),gt=lt-mt;for(let Ht=0;Ht<=gt;Ht++)pt[mt][Ht]=Ht===0&&mt===lt?ot:ot.clone().lerp(kt,Ht/gt)}for(let mt=0;mt<lt;mt++)for(let ot=0;ot<2*(lt-mt)-1;ot++){const kt=Math.floor(ot/2);ot%2==0?(f(pt[mt][kt+1]),f(pt[mt+1][kt]),f(pt[mt][kt])):(f(pt[mt][kt+1]),f(pt[mt+1][kt+1]),f(pt[mt+1][kt]))}}(oe,he,ye,ie)})(l),function(ie){const oe=new Je;for(let he=0;he<G.length;he+=3)oe.x=G[he+0],oe.y=G[he+1],oe.z=G[he+2],oe.normalize().multiplyScalar(ie),G[he+0]=oe.x,G[he+1]=oe.y,G[he+2]=oe.z}(o),function(){const ie=new Je;for(let oe=0;oe<G.length;oe+=3){ie.x=G[oe+0],ie.y=G[oe+1],ie.z=G[oe+2];const he=D(ie)/2/Math.PI+.5,ye=function(we){return Math.atan2(-we.y,Math.sqrt(we.x*we.x+we.z*we.z))}(ie)/Math.PI+.5;$.push(he,1-ye)}(function(){const oe=new Je,he=new Je,ye=new Je,we=new Je,be=new Qn,ke=new Qn,Xe=new Qn;for(let it=0,lt=0;it<G.length;it+=9,lt+=6){oe.set(G[it+0],G[it+1],G[it+2]),he.set(G[it+3],G[it+4],G[it+5]),ye.set(G[it+6],G[it+7],G[it+8]),be.set($[lt+0],$[lt+1]),ke.set($[lt+2],$[lt+3]),Xe.set($[lt+4],$[lt+5]),we.copy(oe).add(he).add(ye).divideScalar(3);const pt=D(we);M(be,lt+0,oe,pt),M(ke,lt+2,he,pt),M(Xe,lt+4,ye,pt)}})(),function(){for(let oe=0;oe<$.length;oe+=6){const he=$[oe+0],ye=$[oe+2],we=$[oe+4],be=Math.max(he,ye,we),ke=Math.min(he,ye,we);be>.9&&ke<.1&&(he<.2&&($[oe+0]+=1),ye<.2&&($[oe+2]+=1),we<.2&&($[oe+4]+=1))}}()}(),this.setAttribute("position",new P(G,3)),this.setAttribute("normal",new P(G.slice(),3)),this.setAttribute("uv",new P($,2)),l===0?this.computeVertexNormals():this.normalizeNormals()}}class Od extends Ga{constructor(t=1,i=0){const o=(1+Math.sqrt(5))/2,l=1/o;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-l,-o,0,-l,o,0,l,-o,0,l,o,-l,-o,0,-l,o,0,l,-o,0,l,o,0,-o,0,-l,o,0,-l,-o,0,l,o,0,l],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,i),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:i}}}const Dh=new Je,wp=new Je,Cp=new Je,Ru=new vo;class eg extends U{constructor(t,i){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:i},i=i!==void 0?i:1,t.isGeometry===!0)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const o=Math.pow(10,4),l=Math.cos(qi.DEG2RAD*i),f=t.getIndex(),B=t.getAttribute("position"),M=f?f.count:B.count,D=[0,0,0],G=["a","b","c"],$=new Array(3),ie={},oe=[];for(let he=0;he<M;he+=3){f?(D[0]=f.getX(he),D[1]=f.getX(he+1),D[2]=f.getX(he+2)):(D[0]=he,D[1]=he+1,D[2]=he+2);const{a:ye,b:we,c:be}=Ru;if(ye.fromBufferAttribute(B,D[0]),we.fromBufferAttribute(B,D[1]),be.fromBufferAttribute(B,D[2]),Ru.getNormal(Cp),$[0]=`${Math.round(ye.x*o)},${Math.round(ye.y*o)},${Math.round(ye.z*o)}`,$[1]=`${Math.round(we.x*o)},${Math.round(we.y*o)},${Math.round(we.z*o)}`,$[2]=`${Math.round(be.x*o)},${Math.round(be.y*o)},${Math.round(be.z*o)}`,$[0]!==$[1]&&$[1]!==$[2]&&$[2]!==$[0])for(let ke=0;ke<3;ke++){const Xe=(ke+1)%3,it=$[ke],lt=$[Xe],pt=Ru[G[ke]],mt=Ru[G[Xe]],ot=`${it}_${lt}`,kt=`${lt}_${it}`;kt in ie&&ie[kt]?(Cp.dot(ie[kt].normal)<=l&&(oe.push(pt.x,pt.y,pt.z),oe.push(mt.x,mt.y,mt.z)),ie[kt]=null):ot in ie||(ie[ot]={index0:D[ke],index1:D[Xe],normal:Cp.clone()})}}for(const he in ie)if(ie[he]){const{index0:ye,index1:we}=ie[he];Dh.fromBufferAttribute(B,ye),wp.fromBufferAttribute(B,we),oe.push(Dh.x,Dh.y,Dh.z),oe.push(wp.x,wp.y,wp.z)}this.setAttribute("position",new P(oe,3))}}const D0={triangulate:function(s,t,i){i=i||2;const o=t&&t.length,l=o?t[0]*i:s.length;let f=ro(s,0,l,i,!0);const B=[];if(!f||f.next===f.prev)return B;let M,D,G,$,ie,oe,he;if(o&&(f=to(s,t,f,i)),s.length>80*i){M=G=s[0],D=$=s[1];for(let ye=i;ye<l;ye+=i)ie=s[ye],oe=s[ye+1],ie<M&&(M=ie),oe<D&&(D=oe),ie>G&&(G=ie),oe>$&&($=oe);he=(he=Math.max(G-M,$-D))!==0?1/he:0}return Rr(f,B,i,M,D,he),B}},Kl={area:function(s){const t=s.length;let i=0;for(let o=t-1,l=0;l<t;o=l++)i+=s[o].x*s[l].y-s[l].x*s[o].y;return .5*i},isClockWise:function(s){return Kl.area(s)<0},triangulateShape:function(s,t){const i=[],o=[],l=[];xi(s),Ui(i,s);let f=s.length;t.forEach(xi);for(let M=0;M<t.length;M++)o.push(f),f+=t[M].length,Ui(i,t[M]);const B=D0.triangulate(i,o);for(let M=0;M<B.length;M+=3)l.push(B.slice(M,M+3));return l}};class Al extends U{constructor(t,i){function o(M){function D(Fn,jn,Sn){return jn||console.error("THREE.ExtrudeGeometry: vec does not exist"),jn.clone().multiplyScalar(Sn).add(Fn)}function G(Fn,jn,Sn){let Ii,vi,pr;const Ri=Fn.x-jn.x,_r=Fn.y-jn.y,As=Sn.x-Fn.x,Ct=Sn.y-Fn.y,Mr=Ri*Ri+_r*_r,is=Ri*Ct-_r*As;if(Math.abs(is)>Number.EPSILON){const Tr=Math.sqrt(Mr),eo=Math.sqrt(As*As+Ct*Ct),vs=jn.x-_r/Tr,Lo=jn.y+Ri/Tr,_l=((Sn.x-Ct/eo-vs)*Ct-(Sn.y+As/eo-Lo)*As)/(Ri*Ct-_r*As),wl=(Ii=vs+Ri*_l-Fn.x)*Ii+(vi=Lo+_r*_l-Fn.y)*vi;if(wl<=2)return new Qn(Ii,vi);pr=Math.sqrt(wl/2)}else{let Tr=!1;Ri>Number.EPSILON?As>Number.EPSILON&&(Tr=!0):Ri<-Number.EPSILON?As<-Number.EPSILON&&(Tr=!0):Math.sign(_r)===Math.sign(Ct)&&(Tr=!0),Tr?(Ii=-_r,vi=Ri,pr=Math.sqrt(Mr)):(Ii=Ri,vi=_r,pr=Math.sqrt(Mr/2))}return new Qn(Ii/pr,vi/pr)}function $(Fn,jn){let Sn=Fn.length;for(;--Sn>=0;){const Ii=Sn;let vi=Sn-1;vi<0&&(vi=Fn.length-1);for(let pr=0,Ri=ke+2*ot;pr<Ri;pr++){const _r=qr*pr,As=qr*(pr+1);(function(Ct,Mr,is,Tr){he(Ct),he(Mr),he(Tr),he(Mr),he(is),he(Tr);const eo=f.length/3,vs=gt.generateSideWallUV(l,f,eo-6,eo-3,eo-2,eo-1);ye(vs[0]),ye(vs[1]),ye(vs[3]),ye(vs[1]),ye(vs[2]),ye(vs[3])})(jn+Ii+_r,jn+vi+_r,jn+vi+As,jn+Ii+As)}}}function ie(Fn,jn,Sn){we.push(Fn),we.push(jn),we.push(Sn)}function oe(Fn,jn,Sn){he(Fn),he(jn),he(Sn);const Ii=f.length/3,vi=gt.generateTopUV(l,f,Ii-3,Ii-2,Ii-1);ye(vi[0]),ye(vi[1]),ye(vi[2])}function he(Fn){f.push(we[3*Fn+0]),f.push(we[3*Fn+1]),f.push(we[3*Fn+2])}function ye(Fn){B.push(Fn.x),B.push(Fn.y)}const we=[],be=i.curveSegments!==void 0?i.curveSegments:12,ke=i.steps!==void 0?i.steps:1;let Xe=i.depth!==void 0?i.depth:100,it=i.bevelEnabled===void 0||i.bevelEnabled,lt=i.bevelThickness!==void 0?i.bevelThickness:6,pt=i.bevelSize!==void 0?i.bevelSize:lt-2,mt=i.bevelOffset!==void 0?i.bevelOffset:0,ot=i.bevelSegments!==void 0?i.bevelSegments:3;const kt=i.extrudePath,gt=i.UVGenerator!==void 0?i.UVGenerator:Ov;i.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Xe=i.amount);let Ht,Zt,Qt,en,Wn,ii=!1;kt&&(Ht=kt.getSpacedPoints(ke),ii=!0,it=!1,Zt=kt.computeFrenetFrames(ke,!1),Qt=new Je,en=new Je,Wn=new Je),it||(ot=0,lt=0,pt=0,mt=0);const lr=M.extractPoints(be);let oi=lr.shape;const qn=lr.holes;if(!Kl.isClockWise(oi)){oi=oi.reverse();for(let Fn=0,jn=qn.length;Fn<jn;Fn++){const Sn=qn[Fn];Kl.isClockWise(Sn)&&(qn[Fn]=Sn.reverse())}}const $i=Kl.triangulateShape(oi,qn),Ji=oi;for(let Fn=0,jn=qn.length;Fn<jn;Fn++){const Sn=qn[Fn];oi=oi.concat(Sn)}const qr=oi.length,Tt=$i.length,Mt=[];for(let Fn=0,jn=Ji.length,Sn=jn-1,Ii=Fn+1;Fn<jn;Fn++,Sn++,Ii++)Sn===jn&&(Sn=0),Ii===jn&&(Ii=0),Mt[Fn]=G(Ji[Fn],Ji[Sn],Ji[Ii]);const Yn=[];let Cn,zn=Mt.concat();for(let Fn=0,jn=qn.length;Fn<jn;Fn++){const Sn=qn[Fn];Cn=[];for(let Ii=0,vi=Sn.length,pr=vi-1,Ri=Ii+1;Ii<vi;Ii++,pr++,Ri++)pr===vi&&(pr=0),Ri===vi&&(Ri=0),Cn[Ii]=G(Sn[Ii],Sn[pr],Sn[Ri]);Yn.push(Cn),zn=zn.concat(Cn)}for(let Fn=0;Fn<ot;Fn++){const jn=Fn/ot,Sn=lt*Math.cos(jn*Math.PI/2),Ii=pt*Math.sin(jn*Math.PI/2)+mt;for(let vi=0,pr=Ji.length;vi<pr;vi++){const Ri=D(Ji[vi],Mt[vi],Ii);ie(Ri.x,Ri.y,-Sn)}for(let vi=0,pr=qn.length;vi<pr;vi++){const Ri=qn[vi];Cn=Yn[vi];for(let _r=0,As=Ri.length;_r<As;_r++){const Ct=D(Ri[_r],Cn[_r],Ii);ie(Ct.x,Ct.y,-Sn)}}}const hr=pt+mt;for(let Fn=0;Fn<qr;Fn++){const jn=it?D(oi[Fn],zn[Fn],hr):oi[Fn];ii?(en.copy(Zt.normals[0]).multiplyScalar(jn.x),Qt.copy(Zt.binormals[0]).multiplyScalar(jn.y),Wn.copy(Ht[0]).add(en).add(Qt),ie(Wn.x,Wn.y,Wn.z)):ie(jn.x,jn.y,0)}for(let Fn=1;Fn<=ke;Fn++)for(let jn=0;jn<qr;jn++){const Sn=it?D(oi[jn],zn[jn],hr):oi[jn];ii?(en.copy(Zt.normals[Fn]).multiplyScalar(Sn.x),Qt.copy(Zt.binormals[Fn]).multiplyScalar(Sn.y),Wn.copy(Ht[Fn]).add(en).add(Qt),ie(Wn.x,Wn.y,Wn.z)):ie(Sn.x,Sn.y,Xe/ke*Fn)}for(let Fn=ot-1;Fn>=0;Fn--){const jn=Fn/ot,Sn=lt*Math.cos(jn*Math.PI/2),Ii=pt*Math.sin(jn*Math.PI/2)+mt;for(let vi=0,pr=Ji.length;vi<pr;vi++){const Ri=D(Ji[vi],Mt[vi],Ii);ie(Ri.x,Ri.y,Xe+Sn)}for(let vi=0,pr=qn.length;vi<pr;vi++){const Ri=qn[vi];Cn=Yn[vi];for(let _r=0,As=Ri.length;_r<As;_r++){const Ct=D(Ri[_r],Cn[_r],Ii);ii?ie(Ct.x,Ct.y+Ht[ke-1].y,Ht[ke-1].x+Sn):ie(Ct.x,Ct.y,Xe+Sn)}}}(function(){const Fn=f.length/3;if(it){let jn=0,Sn=qr*jn;for(let Ii=0;Ii<Tt;Ii++){const vi=$i[Ii];oe(vi[2]+Sn,vi[1]+Sn,vi[0]+Sn)}Sn=qr*(jn=ke+2*ot);for(let Ii=0;Ii<Tt;Ii++){const vi=$i[Ii];oe(vi[0]+Sn,vi[1]+Sn,vi[2]+Sn)}}else{for(let jn=0;jn<Tt;jn++){const Sn=$i[jn];oe(Sn[2],Sn[1],Sn[0])}for(let jn=0;jn<Tt;jn++){const Sn=$i[jn];oe(Sn[0]+qr*ke,Sn[1]+qr*ke,Sn[2]+qr*ke)}}l.addGroup(Fn,f.length/3-Fn,0)})(),function(){const Fn=f.length/3;let jn=0;$(Ji,jn),jn+=Ji.length;for(let Sn=0,Ii=qn.length;Sn<Ii;Sn++){const vi=qn[Sn];$(vi,jn),jn+=vi.length}l.addGroup(Fn,f.length/3-Fn,1)}()}super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:i};const l=this,f=[],B=[];for(let M=0,D=(t=Array.isArray(t)?t:[t]).length;M<D;M++)o(t[M]);this.setAttribute("position",new P(f,3)),this.setAttribute("uv",new P(B,2)),this.computeVertexNormals()}toJSON(){const t=U.prototype.toJSON.call(this);return function(i,o,l){if(l.shapes=[],Array.isArray(i))for(let f=0,B=i.length;f<B;f++){const M=i[f];l.shapes.push(M.uuid)}else l.shapes.push(i.uuid);return o.extrudePath!==void 0&&(l.options.extrudePath=o.extrudePath.toJSON()),l}(this.parameters.shapes,this.parameters.options,t)}}const Ov={generateTopUV:function(s,t,i,o,l){const f=t[3*i],B=t[3*i+1],M=t[3*o],D=t[3*o+1],G=t[3*l],$=t[3*l+1];return[new Qn(f,B),new Qn(M,D),new Qn(G,$)]},generateSideWallUV:function(s,t,i,o,l,f){const B=t[3*i],M=t[3*i+1],D=t[3*i+2],G=t[3*o],$=t[3*o+1],ie=t[3*o+2],oe=t[3*l],he=t[3*l+1],ye=t[3*l+2],we=t[3*f],be=t[3*f+1],ke=t[3*f+2];return Math.abs(M-$)<.01?[new Qn(B,1-D),new Qn(G,1-ie),new Qn(oe,1-ye),new Qn(we,1-ke)]:[new Qn(M,1-D),new Qn($,1-ie),new Qn(he,1-ye),new Qn(be,1-ke)]}};class Mp extends Ga{constructor(t=1,i=0){const o=(1+Math.sqrt(5))/2;super([-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,i),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:i}}}class Tp extends U{constructor(t,i=12,o=0,l=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:i,phiStart:o,phiLength:l},i=Math.floor(i),l=qi.clamp(l,0,2*Math.PI);const f=[],B=[],M=[],D=1/i,G=new Je,$=new Qn;for(let ie=0;ie<=i;ie++){const oe=o+ie*D*l,he=Math.sin(oe),ye=Math.cos(oe);for(let we=0;we<=t.length-1;we++)G.x=t[we].x*he,G.y=t[we].y,G.z=t[we].x*ye,B.push(G.x,G.y,G.z),$.x=ie/i,$.y=we/(t.length-1),M.push($.x,$.y)}for(let ie=0;ie<i;ie++)for(let oe=0;oe<t.length-1;oe++){const he=oe+ie*t.length,ye=he,we=he+t.length,be=he+t.length+1,ke=he+1;f.push(ye,we,ke),f.push(we,be,ke)}if(this.setIndex(f),this.setAttribute("position",new P(B,3)),this.setAttribute("uv",new P(M,2)),this.computeVertexNormals(),l===2*Math.PI){const ie=this.attributes.normal.array,oe=new Je,he=new Je,ye=new Je,we=i*t.length*3;for(let be=0,ke=0;be<t.length;be++,ke+=3)oe.x=ie[ke+0],oe.y=ie[ke+1],oe.z=ie[ke+2],he.x=ie[we+ke+0],he.y=ie[we+ke+1],he.z=ie[we+ke+2],ye.addVectors(oe,he).normalize(),ie[ke+0]=ie[we+ke+0]=ye.x,ie[ke+1]=ie[we+ke+1]=ye.y,ie[ke+2]=ie[we+ke+2]=ye.z}}}class Fd extends Ga{constructor(t=1,i=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,i),this.type="OctahedronGeometry",this.parameters={radius:t,detail:i}}}(Xi.prototype=Object.create(U.prototype)).constructor=Xi;class Sp extends U{constructor(t=.5,i=1,o=8,l=1,f=0,B=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:i,thetaSegments:o,phiSegments:l,thetaStart:f,thetaLength:B},o=Math.max(3,o);const M=[],D=[],G=[],$=[];let ie=t;const oe=(i-t)/(l=Math.max(1,l)),he=new Je,ye=new Qn;for(let we=0;we<=l;we++){for(let be=0;be<=o;be++){const ke=f+be/o*B;he.x=ie*Math.cos(ke),he.y=ie*Math.sin(ke),D.push(he.x,he.y,he.z),G.push(0,0,1),ye.x=(he.x/i+1)/2,ye.y=(he.y/i+1)/2,$.push(ye.x,ye.y)}ie+=oe}for(let we=0;we<l;we++){const be=we*(o+1);for(let ke=0;ke<o;ke++){const Xe=ke+be,it=Xe,lt=Xe+o+1,pt=Xe+o+2,mt=Xe+1;M.push(it,lt,mt),M.push(lt,pt,mt)}}this.setIndex(M),this.setAttribute("position",new P(D,3)),this.setAttribute("normal",new P(G,3)),this.setAttribute("uv",new P($,2))}}class Nd extends U{constructor(t,i=12){function o($){const ie=f.length/3,oe=$.extractPoints(i);let he=oe.shape;const ye=oe.holes;Kl.isClockWise(he)===!1&&(he=he.reverse());for(let be=0,ke=ye.length;be<ke;be++){const Xe=ye[be];Kl.isClockWise(Xe)===!0&&(ye[be]=Xe.reverse())}const we=Kl.triangulateShape(he,ye);for(let be=0,ke=ye.length;be<ke;be++){const Xe=ye[be];he=he.concat(Xe)}for(let be=0,ke=he.length;be<ke;be++){const Xe=he[be];f.push(Xe.x,Xe.y,0),B.push(0,0,1),M.push(Xe.x,Xe.y)}for(let be=0,ke=we.length;be<ke;be++){const Xe=we[be],it=Xe[0]+ie,lt=Xe[1]+ie,pt=Xe[2]+ie;l.push(it,lt,pt),G+=3}}super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:i};const l=[],f=[],B=[],M=[];let D=0,G=0;if(Array.isArray(t)===!1)o(t);else for(let $=0;$<t.length;$++)o(t[$]),this.addGroup(D,G,$),D+=G,G=0;this.setIndex(l),this.setAttribute("position",new P(f,3)),this.setAttribute("normal",new P(B,3)),this.setAttribute("uv",new P(M,2))}toJSON(){const t=U.prototype.toJSON.call(this);return function(i,o){if(o.shapes=[],Array.isArray(i))for(let l=0,f=i.length;l<f;l++){const B=i[l];o.shapes.push(B.uuid)}else o.shapes.push(i.uuid);return o}(this.parameters.shapes,t)}}class kd extends U{constructor(t=1,i=8,o=6,l=0,f=2*Math.PI,B=0,M=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:i,heightSegments:o,phiStart:l,phiLength:f,thetaStart:B,thetaLength:M},i=Math.max(3,Math.floor(i)),o=Math.max(2,Math.floor(o));const D=Math.min(B+M,Math.PI);let G=0;const $=[],ie=new Je,oe=new Je,he=[],ye=[],we=[],be=[];for(let ke=0;ke<=o;ke++){const Xe=[],it=ke/o;let lt=0;ke==0&&B==0?lt=.5/i:ke==o&&D==Math.PI&&(lt=-.5/i);for(let pt=0;pt<=i;pt++){const mt=pt/i;ie.x=-t*Math.cos(l+mt*f)*Math.sin(B+it*M),ie.y=t*Math.cos(B+it*M),ie.z=t*Math.sin(l+mt*f)*Math.sin(B+it*M),ye.push(ie.x,ie.y,ie.z),oe.copy(ie).normalize(),we.push(oe.x,oe.y,oe.z),be.push(mt+lt,1-it),Xe.push(G++)}$.push(Xe)}for(let ke=0;ke<o;ke++)for(let Xe=0;Xe<i;Xe++){const it=$[ke][Xe+1],lt=$[ke][Xe],pt=$[ke+1][Xe],mt=$[ke+1][Xe+1];(ke!==0||B>0)&&he.push(it,lt,mt),(ke!==o-1||D<Math.PI)&&he.push(lt,pt,mt)}this.setIndex(he),this.setAttribute("position",new P(ye,3)),this.setAttribute("normal",new P(we,3)),this.setAttribute("uv",new P(be,2))}}class Ip extends Ga{constructor(t=1,i=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,i),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:i}}}class Rp extends Al{constructor(t,i={}){const o=i.font;if(!o||!o.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new U;const l=o.generateShapes(t,i.size);i.depth=i.height!==void 0?i.height:50,i.bevelThickness===void 0&&(i.bevelThickness=10),i.bevelSize===void 0&&(i.bevelSize=8),i.bevelEnabled===void 0&&(i.bevelEnabled=!1),super(l,i),this.type="TextGeometry"}}class Ud extends U{constructor(t=1,i=.4,o=8,l=6,f=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:i,radialSegments:o,tubularSegments:l,arc:f},o=Math.floor(o),l=Math.floor(l);const B=[],M=[],D=[],G=[],$=new Je,ie=new Je,oe=new Je;for(let he=0;he<=o;he++)for(let ye=0;ye<=l;ye++){const we=ye/l*f,be=he/o*Math.PI*2;ie.x=(t+i*Math.cos(be))*Math.cos(we),ie.y=(t+i*Math.cos(be))*Math.sin(we),ie.z=i*Math.sin(be),M.push(ie.x,ie.y,ie.z),$.x=t*Math.cos(we),$.y=t*Math.sin(we),oe.subVectors(ie,$).normalize(),D.push(oe.x,oe.y,oe.z),G.push(ye/l),G.push(he/o)}for(let he=1;he<=o;he++)for(let ye=1;ye<=l;ye++){const we=(l+1)*he+ye-1,be=(l+1)*(he-1)+ye-1,ke=(l+1)*(he-1)+ye,Xe=(l+1)*he+ye;B.push(we,be,Xe),B.push(be,ke,Xe)}this.setIndex(B),this.setAttribute("position",new P(M,3)),this.setAttribute("normal",new P(D,3)),this.setAttribute("uv",new P(G,2))}}class Gd extends U{constructor(t=1,i=.4,o=64,l=8,f=2,B=3){function M(it,lt,pt,mt,ot){const kt=Math.cos(it),gt=Math.sin(it),Ht=pt/lt*it,Zt=Math.cos(Ht);ot.x=mt*(2+Zt)*.5*kt,ot.y=mt*(2+Zt)*gt*.5,ot.z=mt*Math.sin(Ht)*.5}super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:i,tubularSegments:o,radialSegments:l,p:f,q:B},o=Math.floor(o),l=Math.floor(l);const D=[],G=[],$=[],ie=[],oe=new Je,he=new Je,ye=new Je,we=new Je,be=new Je,ke=new Je,Xe=new Je;for(let it=0;it<=o;++it){const lt=it/o*f*Math.PI*2;M(lt,f,B,t,ye),M(lt+.01,f,B,t,we),ke.subVectors(we,ye),Xe.addVectors(we,ye),be.crossVectors(ke,Xe),Xe.crossVectors(be,ke),be.normalize(),Xe.normalize();for(let pt=0;pt<=l;++pt){const mt=pt/l*Math.PI*2,ot=-i*Math.cos(mt),kt=i*Math.sin(mt);oe.x=ye.x+(ot*Xe.x+kt*be.x),oe.y=ye.y+(ot*Xe.y+kt*be.y),oe.z=ye.z+(ot*Xe.z+kt*be.z),G.push(oe.x,oe.y,oe.z),he.subVectors(oe,ye).normalize(),$.push(he.x,he.y,he.z),ie.push(it/o),ie.push(pt/l)}}for(let it=1;it<=o;it++)for(let lt=1;lt<=l;lt++){const pt=(l+1)*(it-1)+(lt-1),mt=(l+1)*it+(lt-1),ot=(l+1)*it+lt,kt=(l+1)*(it-1)+lt;D.push(pt,mt,kt),D.push(mt,ot,kt)}this.setIndex(D),this.setAttribute("position",new P(G,3)),this.setAttribute("normal",new P($,3)),this.setAttribute("uv",new P(ie,2))}}class Hd extends U{constructor(t,i=64,o=1,l=8,f=!1){function B(be){ie=t.getPointAt(be/i,ie);const ke=M.normals[be],Xe=M.binormals[be];for(let it=0;it<=l;it++){const lt=it/l*Math.PI*2,pt=Math.sin(lt),mt=-Math.cos(lt);G.x=mt*ke.x+pt*Xe.x,G.y=mt*ke.y+pt*Xe.y,G.z=mt*ke.z+pt*Xe.z,G.normalize(),he.push(G.x,G.y,G.z),D.x=ie.x+o*G.x,D.y=ie.y+o*G.y,D.z=ie.z+o*G.z,oe.push(D.x,D.y,D.z)}}super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:i,radius:o,radialSegments:l,closed:f};const M=t.computeFrenetFrames(i,f);this.tangents=M.tangents,this.normals=M.normals,this.binormals=M.binormals;const D=new Je,G=new Je,$=new Qn;let ie=new Je;const oe=[],he=[],ye=[],we=[];(function(){for(let be=0;be<i;be++)B(be);B(f===!1?i:0),function(){for(let be=0;be<=i;be++)for(let ke=0;ke<=l;ke++)$.x=be/i,$.y=ke/l,ye.push($.x,$.y)}(),function(){for(let be=1;be<=i;be++)for(let ke=1;ke<=l;ke++){const Xe=(l+1)*(be-1)+(ke-1),it=(l+1)*be+(ke-1),lt=(l+1)*be+ke,pt=(l+1)*(be-1)+ke;we.push(Xe,it,pt),we.push(it,lt,pt)}}()})(),this.setIndex(we),this.setAttribute("position",new P(oe,3)),this.setAttribute("normal",new P(he,3)),this.setAttribute("uv",new P(ye,2))}toJSON(){const t=U.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class Bp extends U{constructor(t){if(super(),this.type="WireframeGeometry",t.isGeometry===!0)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const i=[],o=[0,0],l={},f=new Je;if(t.index!==null){const B=t.attributes.position,M=t.index;let D=t.groups;D.length===0&&(D=[{start:0,count:M.count,materialIndex:0}]);for(let G=0,$=D.length;G<$;++G){const ie=D[G],oe=ie.start;for(let he=oe,ye=oe+ie.count;he<ye;he+=3)for(let we=0;we<3;we++){const be=M.getX(he+we),ke=M.getX(he+(we+1)%3);o[0]=Math.min(be,ke),o[1]=Math.max(be,ke);const Xe=o[0]+","+o[1];l[Xe]===void 0&&(l[Xe]={index1:o[0],index2:o[1]})}}for(const G in l){const $=l[G];f.fromBufferAttribute(B,$.index1),i.push(f.x,f.y,f.z),f.fromBufferAttribute(B,$.index2),i.push(f.x,f.y,f.z)}}else{const B=t.attributes.position;for(let M=0,D=B.count/3;M<D;M++)for(let G=0;G<3;G++){const $=3*M+G;f.fromBufferAttribute(B,$),i.push(f.x,f.y,f.z);const ie=3*M+(G+1)%3;f.fromBufferAttribute(B,ie),i.push(f.x,f.y,f.z)}}this.setAttribute("position",new P(i,3))}}var la=Object.freeze({__proto__:null,BoxGeometry:Cu,BoxBufferGeometry:Cu,CircleGeometry:Pd,CircleBufferGeometry:Pd,ConeGeometry:Wl,ConeBufferGeometry:Wl,CylinderGeometry:Xc,CylinderBufferGeometry:Xc,DodecahedronGeometry:Od,DodecahedronBufferGeometry:Od,EdgesGeometry:eg,ExtrudeGeometry:Al,ExtrudeBufferGeometry:Al,IcosahedronGeometry:Mp,IcosahedronBufferGeometry:Mp,LatheGeometry:Tp,LatheBufferGeometry:Tp,OctahedronGeometry:Fd,OctahedronBufferGeometry:Fd,ParametricGeometry:Xi,ParametricBufferGeometry:Xi,PlaneGeometry:Md,PlaneBufferGeometry:Md,PolyhedronGeometry:Ga,PolyhedronBufferGeometry:Ga,RingGeometry:Sp,RingBufferGeometry:Sp,ShapeGeometry:Nd,ShapeBufferGeometry:Nd,SphereGeometry:kd,SphereBufferGeometry:kd,TetrahedronGeometry:Ip,TetrahedronBufferGeometry:Ip,TextGeometry:Rp,TextBufferGeometry:Rp,TorusGeometry:Ud,TorusBufferGeometry:Ud,TorusKnotGeometry:Gd,TorusKnotBufferGeometry:Gd,TubeGeometry:Hd,TubeBufferGeometry:Hd,WireframeGeometry:Bp});class Lp extends h{constructor(t){super(),this.type="ShadowMaterial",this.color=new Fi(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}Lp.prototype.isShadowMaterial=!0;class Bu extends V{constructor(t){super(t),this.type="RawShaderMaterial"}}Bu.prototype.isRawShaderMaterial=!0,(fr.prototype=Object.create(h.prototype)).constructor=fr,fr.prototype.isMeshStandardMaterial=!0,fr.prototype.copy=function(s){return h.prototype.copy.call(this,s),this.defines={STANDARD:""},this.color.copy(s.color),this.roughness=s.roughness,this.metalness=s.metalness,this.map=s.map,this.lightMap=s.lightMap,this.lightMapIntensity=s.lightMapIntensity,this.aoMap=s.aoMap,this.aoMapIntensity=s.aoMapIntensity,this.emissive.copy(s.emissive),this.emissiveMap=s.emissiveMap,this.emissiveIntensity=s.emissiveIntensity,this.bumpMap=s.bumpMap,this.bumpScale=s.bumpScale,this.normalMap=s.normalMap,this.normalMapType=s.normalMapType,this.normalScale.copy(s.normalScale),this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.roughnessMap=s.roughnessMap,this.metalnessMap=s.metalnessMap,this.alphaMap=s.alphaMap,this.envMap=s.envMap,this.envMapIntensity=s.envMapIntensity,this.refractionRatio=s.refractionRatio,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.wireframeLinecap=s.wireframeLinecap,this.wireframeLinejoin=s.wireframeLinejoin,this.skinning=s.skinning,this.morphTargets=s.morphTargets,this.morphNormals=s.morphNormals,this.flatShading=s.flatShading,this.vertexTangents=s.vertexTangents,this},(ur.prototype=Object.create(fr.prototype)).constructor=ur,ur.prototype.isMeshPhysicalMaterial=!0,ur.prototype.copy=function(s){return fr.prototype.copy.call(this,s),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=s.clearcoat,this.clearcoatMap=s.clearcoatMap,this.clearcoatRoughness=s.clearcoatRoughness,this.clearcoatRoughnessMap=s.clearcoatRoughnessMap,this.clearcoatNormalMap=s.clearcoatNormalMap,this.clearcoatNormalScale.copy(s.clearcoatNormalScale),this.reflectivity=s.reflectivity,s.sheen?this.sheen=(this.sheen||new Fi).copy(s.sheen):this.sheen=null,this.transmission=s.transmission,this.transmissionMap=s.transmissionMap,this};class Dp extends h{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new Fi(16777215),this.specular=new Fi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}Dp.prototype.isMeshPhongMaterial=!0;class Pp extends h{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}Pp.prototype.isMeshToonMaterial=!0;class Yc extends h{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}Yc.prototype.isMeshNormalMaterial=!0;class yo extends h{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new Fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}yo.prototype.isMeshLambertMaterial=!0;class xo extends h{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}xo.prototype.isMeshMatcapMaterial=!0;class Ph extends ta{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}Ph.prototype.isLineDashedMaterial=!0;var Fv=Object.freeze({__proto__:null,ShadowMaterial:Lp,SpriteMaterial:jm,RawShaderMaterial:Bu,ShaderMaterial:V,PointsMaterial:Tu,MeshPhysicalMaterial:ur,MeshStandardMaterial:fr,MeshPhongMaterial:Dp,MeshToonMaterial:Pp,MeshNormalMaterial:Yc,MeshLambertMaterial:yo,MeshDepthMaterial:pp,MeshDistanceMaterial:mp,MeshBasicMaterial:xc,MeshMatcapMaterial:xo,LineDashedMaterial:Ph,LineBasicMaterial:ta,Material:h});const Xs={arraySlice:function(s,t,i){return Xs.isTypedArray(s)?new s.constructor(s.subarray(t,i!==void 0?i:s.length)):s.slice(t,i)},convertArray:function(s,t,i){return!s||!i&&s.constructor===t?s:typeof t.BYTES_PER_ELEMENT=="number"?new t(s):Array.prototype.slice.call(s)},isTypedArray:function(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)},getKeyframeOrder:function(s){const t=s.length,i=new Array(t);for(let o=0;o!==t;++o)i[o]=o;return i.sort(function(o,l){return s[o]-s[l]}),i},sortedArray:function(s,t,i){const o=s.length,l=new s.constructor(o);for(let f=0,B=0;B!==o;++f){const M=i[f]*t;for(let D=0;D!==t;++D)l[B++]=s[M+D]}return l},flattenJSON:function(s,t,i,o){let l=1,f=s[0];for(;f!==void 0&&f[o]===void 0;)f=s[l++];if(f===void 0)return;let B=f[o];if(B!==void 0)if(Array.isArray(B))do(B=f[o])!==void 0&&(t.push(f.time),i.push.apply(i,B)),f=s[l++];while(f!==void 0);else if(B.toArray!==void 0)do(B=f[o])!==void 0&&(t.push(f.time),B.toArray(i,i.length)),f=s[l++];while(f!==void 0);else do(B=f[o])!==void 0&&(t.push(f.time),i.push(B)),f=s[l++];while(f!==void 0)},subclip:function(s,t,i,o,l=30){const f=s.clone();f.name=t;const B=[];for(let D=0;D<f.tracks.length;++D){const G=f.tracks[D],$=G.getValueSize(),ie=[],oe=[];for(let he=0;he<G.times.length;++he){const ye=G.times[he]*l;if(!(ye<i||ye>=o)){ie.push(G.times[he]);for(let we=0;we<$;++we)oe.push(G.values[he*$+we])}}ie.length!==0&&(G.times=Xs.convertArray(ie,G.times.constructor),G.values=Xs.convertArray(oe,G.values.constructor),B.push(G))}f.tracks=B;let M=1/0;for(let D=0;D<f.tracks.length;++D)M>f.tracks[D].times[0]&&(M=f.tracks[D].times[0]);for(let D=0;D<f.tracks.length;++D)f.tracks[D].shift(-1*M);return f.resetDuration(),f},makeClipAdditive:function(s,t=0,i=s,o=30){o<=0&&(o=30);const l=i.tracks.length,f=t/o;for(let B=0;B<l;++B){const M=i.tracks[B],D=M.ValueTypeName;if(D==="bool"||D==="string")continue;const G=s.tracks.find(function(ke){return ke.name===M.name&&ke.ValueTypeName===D});if(G===void 0)continue;let $=0;const ie=M.getValueSize();M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&($=ie/3);let oe=0;const he=G.getValueSize();G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(oe=he/3);const ye=M.times.length-1;let we;if(f<=M.times[0]){const ke=$,Xe=ie-$;we=Xs.arraySlice(M.values,ke,Xe)}else if(f>=M.times[ye]){const ke=ye*ie+$,Xe=ke+ie-$;we=Xs.arraySlice(M.values,ke,Xe)}else{const ke=M.createInterpolant(),Xe=$,it=ie-$;ke.evaluate(f),we=Xs.arraySlice(ke.resultBuffer,Xe,it)}D==="quaternion"&&new To().fromArray(we).normalize().conjugate().toArray(we);const be=G.times.length;for(let ke=0;ke<be;++ke){const Xe=ke*he+oe;if(D==="quaternion")To.multiplyQuaternionsFlat(G.values,Xe,we,0,G.values,Xe);else{const it=he-2*oe;for(let lt=0;lt<it;++lt)G.values[Xe+lt]-=we[lt]}}}return s.blendMode=2501,s}};Object.assign(Vi.prototype,{evaluate:function(s){const t=this.parameterPositions;let i=this._cachedIndex,o=t[i],l=t[i-1];e:{t:{let f;n:{i:if(!(s<o)){for(let B=i+2;;){if(o===void 0){if(s<l)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,l)}if(i===B)break;if(l=o,o=t[++i],s<o)break t}f=t.length;break n}if(s>=l)break e;{const B=t[1];s<B&&(i=2,l=B);for(let M=i-2;;){if(l===void 0)return this._cachedIndex=0,this.beforeStart_(0,s,o);if(i===M)break;if(o=l,l=t[--i-1],s>=l)break t}f=i,i=0}}for(;i<f;){const B=i+f>>>1;s<t[B]?f=B:i=B+1}if(o=t[i],(l=t[i-1])===void 0)return this._cachedIndex=0,this.beforeStart_(0,s,o);if(o===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,l,s)}this._cachedIndex=i,this.intervalChanged_(i,l,o)}return this.interpolate_(i,l,s,o)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(s){const t=this.resultBuffer,i=this.sampleValues,o=this.valueSize,l=s*o;for(let f=0;f!==o;++f)t[f]=i[l+f];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Vi.prototype,{beforeStart_:Vi.prototype.copySampleValue_,afterEnd_:Vi.prototype.copySampleValue_}),hs.prototype=Object.assign(Object.create(Vi.prototype),{constructor:hs,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(s,t,i){const o=this.parameterPositions;let l=s-2,f=s+1,B=o[l],M=o[f];if(B===void 0)switch(this.getSettings_().endingStart){case 2401:l=s,B=2*t-i;break;case 2402:B=t+o[l=o.length-2]-o[l+1];break;default:l=s,B=i}if(M===void 0)switch(this.getSettings_().endingEnd){case 2401:f=s,M=2*i-t;break;case 2402:f=1,M=i+o[1]-o[0];break;default:f=s-1,M=t}const D=.5*(i-t),G=this.valueSize;this._weightPrev=D/(t-B),this._weightNext=D/(M-i),this._offsetPrev=l*G,this._offsetNext=f*G},interpolate_:function(s,t,i,o){const l=this.resultBuffer,f=this.sampleValues,B=this.valueSize,M=s*B,D=M-B,G=this._offsetPrev,$=this._offsetNext,ie=this._weightPrev,oe=this._weightNext,he=(i-t)/(o-t),ye=he*he,we=ye*he,be=-ie*we+2*ie*ye-ie*he,ke=(1+ie)*we+(-1.5-2*ie)*ye+(-.5+ie)*he+1,Xe=(-1-oe)*we+(1.5+oe)*ye+.5*he,it=oe*we-oe*ye;for(let lt=0;lt!==B;++lt)l[lt]=be*f[G+lt]+ke*f[D+lt]+Xe*f[M+lt]+it*f[$+lt];return l}}),Jr.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Jr,interpolate_:function(s,t,i,o){const l=this.resultBuffer,f=this.sampleValues,B=this.valueSize,M=s*B,D=M-B,G=(i-t)/(o-t),$=1-G;for(let ie=0;ie!==B;++ie)l[ie]=f[D+ie]*$+f[M+ie]*G;return l}}),vr.prototype=Object.assign(Object.create(Vi.prototype),{constructor:vr,interpolate_:function(s){return this.copySampleValue_(s-1)}});class vl{constructor(t,i,o,l){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Xs.convertArray(i,this.TimeBufferType),this.values=Xs.convertArray(o,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(t){const i=t.constructor;let o;if(i.toJSON!==this.toJSON)o=i.toJSON(t);else{o={name:t.name,times:Xs.convertArray(t.times,Array),values:Xs.convertArray(t.values,Array)};const l=t.getInterpolation();l!==t.DefaultInterpolation&&(o.interpolation=l)}return o.type=t.ValueTypeName,o}InterpolantFactoryMethodDiscrete(t){return new vr(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Jr(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new hs(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let i;switch(t){case 2300:i=this.InterpolantFactoryMethodDiscrete;break;case 2301:i=this.InterpolantFactoryMethodLinear;break;case 2302:i=this.InterpolantFactoryMethodSmooth}if(i===void 0){const o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0){if(t===this.DefaultInterpolation)throw new Error(o);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const i=this.times;for(let o=0,l=i.length;o!==l;++o)i[o]+=t}return this}scale(t){if(t!==1){const i=this.times;for(let o=0,l=i.length;o!==l;++o)i[o]*=t}return this}trim(t,i){const o=this.times,l=o.length;let f=0,B=l-1;for(;f!==l&&o[f]<t;)++f;for(;B!==-1&&o[B]>i;)--B;if(++B,f!==0||B!==l){f>=B&&(f=(B=Math.max(B,1))-1);const M=this.getValueSize();this.times=Xs.arraySlice(o,f,B),this.values=Xs.arraySlice(this.values,f*M,B*M)}return this}validate(){let t=!0;const i=this.getValueSize();i-Math.floor(i)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const o=this.times,l=this.values,f=o.length;f===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let B=null;for(let M=0;M!==f;M++){const D=o[M];if(typeof D=="number"&&isNaN(D)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,M,D),t=!1;break}if(B!==null&&B>D){console.error("THREE.KeyframeTrack: Out of order keys.",this,M,D,B),t=!1;break}B=D}if(l!==void 0&&Xs.isTypedArray(l))for(let M=0,D=l.length;M!==D;++M){const G=l[M];if(isNaN(G)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,M,G),t=!1;break}}return t}optimize(){const t=Xs.arraySlice(this.times),i=Xs.arraySlice(this.values),o=this.getValueSize(),l=this.getInterpolation()===2302,f=t.length-1;let B=1;for(let M=1;M<f;++M){let D=!1;const G=t[M];if(G!==t[M+1]&&(M!==1||G!==t[0]))if(l)D=!0;else{const $=M*o,ie=$-o,oe=$+o;for(let he=0;he!==o;++he){const ye=i[$+he];if(ye!==i[ie+he]||ye!==i[oe+he]){D=!0;break}}}if(D){if(M!==B){t[B]=t[M];const $=M*o,ie=B*o;for(let oe=0;oe!==o;++oe)i[ie+oe]=i[$+oe]}++B}}if(f>0){t[B]=t[f];for(let M=f*o,D=B*o,G=0;G!==o;++G)i[D+G]=i[M+G];++B}return B!==t.length?(this.times=Xs.arraySlice(t,0,B),this.values=Xs.arraySlice(i,0,B*o)):(this.times=t,this.values=i),this}clone(){const t=Xs.arraySlice(this.times,0),i=Xs.arraySlice(this.values,0),o=new this.constructor(this.name,t,i);return o.createInterpolant=this.createInterpolant,o}}vl.prototype.TimeBufferType=Float32Array,vl.prototype.ValueBufferType=Float32Array,vl.prototype.DefaultInterpolation=2301;class Lu extends vl{}Lu.prototype.ValueTypeName="bool",Lu.prototype.ValueBufferType=Array,Lu.prototype.DefaultInterpolation=2300,Lu.prototype.InterpolantFactoryMethodLinear=void 0,Lu.prototype.InterpolantFactoryMethodSmooth=void 0;class tg extends vl{}tg.prototype.ValueTypeName="color";class zd extends vl{}zd.prototype.ValueTypeName="number",Ss.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Ss,interpolate_:function(s,t,i,o){const l=this.resultBuffer,f=this.sampleValues,B=this.valueSize,M=(i-t)/(o-t);let D=s*B;for(let G=D+B;D!==G;D+=4)To.slerpFlat(l,0,f,D-B,f,D,M);return l}});class Oh extends vl{InterpolantFactoryMethodLinear(t){return new Ss(this.times,this.values,this.getValueSize(),t)}}Oh.prototype.ValueTypeName="quaternion",Oh.prototype.DefaultInterpolation=2301,Oh.prototype.InterpolantFactoryMethodSmooth=void 0;class Du extends vl{}Du.prototype.ValueTypeName="string",Du.prototype.ValueBufferType=Array,Du.prototype.DefaultInterpolation=2300,Du.prototype.InterpolantFactoryMethodLinear=void 0,Du.prototype.InterpolantFactoryMethodSmooth=void 0;class Vd extends vl{}Vd.prototype.ValueTypeName="vector";class Qd{constructor(t,i=-1,o,l=2500){this.name=t,this.tracks=o,this.duration=i,this.blendMode=l,this.uuid=qi.generateUUID(),this.duration<0&&this.resetDuration()}static parse(t){const i=[],o=t.tracks,l=1/(t.fps||1);for(let B=0,M=o.length;B!==M;++B)i.push(po(o[B]).scale(l));const f=new this(t.name,t.duration,i,t.blendMode);return f.uuid=t.uuid,f}static toJSON(t){const i=[],o=t.tracks,l={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode};for(let f=0,B=o.length;f!==B;++f)i.push(vl.toJSON(o[f]));return l}static CreateFromMorphTargetSequence(t,i,o,l){const f=i.length,B=[];for(let M=0;M<f;M++){let D=[],G=[];D.push((M+f-1)%f,M,(M+1)%f),G.push(0,1,0);const $=Xs.getKeyframeOrder(D);D=Xs.sortedArray(D,1,$),G=Xs.sortedArray(G,1,$),l||D[0]!==0||(D.push(f),G.push(G[0])),B.push(new zd(".morphTargetInfluences["+i[M].name+"]",D,G).scale(1/o))}return new this(t,-1,B)}static findByName(t,i){let o=t;if(!Array.isArray(t)){const l=t;o=l.geometry&&l.geometry.animations||l.animations}for(let l=0;l<o.length;l++)if(o[l].name===i)return o[l];return null}static CreateClipsFromMorphTargetSequences(t,i,o){const l={},f=/^([\w-]*?)([\d]+)$/;for(let M=0,D=t.length;M<D;M++){const G=t[M],$=G.name.match(f);if($&&$.length>1){const ie=$[1];let oe=l[ie];oe||(l[ie]=oe=[]),oe.push(G)}}const B=[];for(const M in l)B.push(this.CreateFromMorphTargetSequence(M,l[M],i,o));return B}static parseAnimation(t,i){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const o=function($,ie,oe,he,ye){if(oe.length!==0){const we=[],be=[];Xs.flattenJSON(oe,we,be,he),we.length!==0&&ye.push(new $(ie,we,be))}},l=[],f=t.name||"default",B=t.fps||30,M=t.blendMode;let D=t.length||-1;const G=t.hierarchy||[];for(let $=0;$<G.length;$++){const ie=G[$].keys;if(ie&&ie.length!==0)if(ie[0].morphTargets){const oe={};let he;for(he=0;he<ie.length;he++)if(ie[he].morphTargets)for(let ye=0;ye<ie[he].morphTargets.length;ye++)oe[ie[he].morphTargets[ye]]=-1;for(const ye in oe){const we=[],be=[];for(let ke=0;ke!==ie[he].morphTargets.length;++ke){const Xe=ie[he];we.push(Xe.time),be.push(Xe.morphTarget===ye?1:0)}l.push(new zd(".morphTargetInfluence["+ye+"]",we,be))}D=oe.length*(B||1)}else{const oe=".bones["+i[$].name+"]";o(Vd,oe+".position",ie,"pos",l),o(Oh,oe+".quaternion",ie,"rot",l),o(Vd,oe+".scale",ie,"scl",l)}}return l.length===0?null:new this(f,D,l,M)}resetDuration(){let t=0;for(let i=0,o=this.tracks.length;i!==o;++i){const l=this.tracks[i];t=Math.max(t,l.times[l.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}const Pu={enabled:!1,files:{},add:function(s,t){this.enabled!==!1&&(this.files[s]=t)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}},P0=new Qs;Object.assign(Zr.prototype,{load:function(){},loadAsync:function(s,t){const i=this;return new Promise(function(o,l){i.load(s,o,t,l)})},parse:function(){},setCrossOrigin:function(s){return this.crossOrigin=s,this},setWithCredentials:function(s){return this.withCredentials=s,this},setPath:function(s){return this.path=s,this},setResourcePath:function(s){return this.resourcePath=s,this},setRequestHeader:function(s){return this.requestHeader=s,this}});const yl={};Fs.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Fs,load:function(s,t,i,o){s===void 0&&(s=""),this.path!==void 0&&(s=this.path+s),s=this.manager.resolveURL(s);const l=this,f=Pu.get(s);if(f!==void 0)return l.manager.itemStart(s),setTimeout(function(){t&&t(f),l.manager.itemEnd(s)},0),f;if(yl[s]!==void 0)return void yl[s].push({onLoad:t,onProgress:i,onError:o});const B=s.match(/^data:(.*?)(;base64)?,(.*)$/);let M;if(B){const D=B[1],G=!!B[2];let $=B[3];$=decodeURIComponent($),G&&($=atob($));try{let ie;const oe=(this.responseType||"").toLowerCase();switch(oe){case"arraybuffer":case"blob":const he=new Uint8Array($.length);for(let we=0;we<$.length;we++)he[we]=$.charCodeAt(we);ie=oe==="blob"?new Blob([he.buffer],{type:D}):he.buffer;break;case"document":ie=new DOMParser().parseFromString($,D);break;case"json":ie=JSON.parse($);break;default:ie=$}setTimeout(function(){t&&t(ie),l.manager.itemEnd(s)},0)}catch(ie){setTimeout(function(){o&&o(ie),l.manager.itemError(s),l.manager.itemEnd(s)},0)}}else{yl[s]=[],yl[s].push({onLoad:t,onProgress:i,onError:o}),(M=new XMLHttpRequest).open("GET",s,!0),M.addEventListener("load",function(D){const G=this.response,$=yl[s];if(delete yl[s],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Pu.add(s,G);for(let ie=0,oe=$.length;ie<oe;ie++){const he=$[ie];he.onLoad&&he.onLoad(G)}l.manager.itemEnd(s)}else{for(let ie=0,oe=$.length;ie<oe;ie++){const he=$[ie];he.onError&&he.onError(D)}l.manager.itemError(s),l.manager.itemEnd(s)}},!1),M.addEventListener("progress",function(D){const G=yl[s];for(let $=0,ie=G.length;$<ie;$++){const oe=G[$];oe.onProgress&&oe.onProgress(D)}},!1),M.addEventListener("error",function(D){const G=yl[s];delete yl[s];for(let $=0,ie=G.length;$<ie;$++){const oe=G[$];oe.onError&&oe.onError(D)}l.manager.itemError(s),l.manager.itemEnd(s)},!1),M.addEventListener("abort",function(D){const G=yl[s];delete yl[s];for(let $=0,ie=G.length;$<ie;$++){const oe=G[$];oe.onError&&oe.onError(D)}l.manager.itemError(s),l.manager.itemEnd(s)},!1),this.responseType!==void 0&&(M.responseType=this.responseType),this.withCredentials!==void 0&&(M.withCredentials=this.withCredentials),M.overrideMimeType&&M.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const D in this.requestHeader)M.setRequestHeader(D,this.requestHeader[D]);M.send(null)}return l.manager.itemStart(s),M},setResponseType:function(s){return this.responseType=s,this},setMimeType:function(s){return this.mimeType=s,this}});class Nv extends Zr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=new Fs(this.manager);B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(t,function(M){try{i(f.parse(JSON.parse(M)))}catch(D){l?l(D):console.error(D),f.manager.itemError(t)}},o,l)}parse(t){const i=[];for(let o=0;o<t.length;o++){const l=Qd.parse(t[o]);i.push(l)}return i}}Ds.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Ds,load:function(s,t,i,o){function l($){D.load(s[$],function(ie){const oe=f.parse(ie,!0);B[$]={width:oe.width,height:oe.height,format:oe.format,mipmaps:oe.mipmaps},(G+=1)===6&&(oe.mipmapCount===1&&(M.minFilter=nt),M.image=B,M.format=oe.format,M.needsUpdate=!0,t&&t(M))},i,o)}const f=this,B=[],M=new bp,D=new Fs(this.manager);D.setPath(this.path),D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setWithCredentials(f.withCredentials);let G=0;if(Array.isArray(s))for(let $=0,ie=s.length;$<ie;++$)l($);else D.load(s,function($){const ie=f.parse($,!0);if(ie.isCubemap){const oe=ie.mipmaps.length/ie.mipmapCount;for(let he=0;he<oe;he++){B[he]={mipmaps:[]};for(let ye=0;ye<ie.mipmapCount;ye++)B[he].mipmaps.push(ie.mipmaps[he*ie.mipmapCount+ye]),B[he].format=ie.format,B[he].width=ie.width,B[he].height=ie.height}M.image=B}else M.image.width=ie.width,M.image.height=ie.height,M.mipmaps=ie.mipmaps;ie.mipmapCount===1&&(M.minFilter=nt),M.format=ie.format,M.needsUpdate=!0,t&&t(M)},i,o);return M}});class Op extends Zr{constructor(t){super(t)}load(t,i,o,l){function f(){G.removeEventListener("load",f,!1),G.removeEventListener("error",B,!1),Pu.add(t,this),i&&i(this),M.manager.itemEnd(t)}function B($){G.removeEventListener("load",f,!1),G.removeEventListener("error",B,!1),l&&l($),M.manager.itemError(t),M.manager.itemEnd(t)}this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const M=this,D=Pu.get(t);if(D!==void 0)return M.manager.itemStart(t),setTimeout(function(){i&&i(D),M.manager.itemEnd(t)},0),D;const G=document.createElementNS("http://www.w3.org/1999/xhtml","img");return G.addEventListener("load",f,!1),G.addEventListener("error",B,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(G.crossOrigin=this.crossOrigin),M.manager.itemStart(t),G.src=t,G}}class O0 extends Zr{constructor(t){super(t)}load(t,i,o,l){function f(G){M.load(t[G],function($){B.images[G]=$,++D===6&&(B.needsUpdate=!0,i&&i(B))},void 0,l)}const B=new Rh,M=new Op(this.manager);M.setCrossOrigin(this.crossOrigin),M.setPath(this.path);let D=0;for(let G=0;G<t.length;++G)f(G);return B}}_o.prototype=Object.assign(Object.create(Zr.prototype),{constructor:_o,load:function(s,t,i,o){const l=this,f=new Bh,B=new Fs(this.manager);return B.setResponseType("arraybuffer"),B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(l.withCredentials),B.load(s,function(M){const D=l.parse(M);D&&(D.image!==void 0?f.image=D.image:D.data!==void 0&&(f.image.width=D.width,f.image.height=D.height,f.image.data=D.data),f.wrapS=D.wrapS!==void 0?D.wrapS:Yo,f.wrapT=D.wrapT!==void 0?D.wrapT:Yo,f.magFilter=D.magFilter!==void 0?D.magFilter:nt,f.minFilter=D.minFilter!==void 0?D.minFilter:nt,f.anisotropy=D.anisotropy!==void 0?D.anisotropy:1,D.encoding!==void 0&&(f.encoding=D.encoding),D.flipY!==void 0&&(f.flipY=D.flipY),D.format!==void 0&&(f.format=D.format),D.type!==void 0&&(f.type=D.type),D.mipmaps!==void 0&&(f.mipmaps=D.mipmaps,f.minFilter=oc),D.mipmapCount===1&&(f.minFilter=nt),D.generateMipmaps!==void 0&&(f.generateMipmaps=D.generateMipmaps),f.needsUpdate=!0,t&&t(f,D))},i,o),f}}),Qa.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Qa,load:function(s,t,i,o){const l=new go,f=new Op(this.manager);return f.setCrossOrigin(this.crossOrigin),f.setPath(this.path),f.load(s,function(B){l.image=B;const M=s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0;l.format=M?Es:Uo,l.needsUpdate=!0,t!==void 0&&t(l)},i,o),l}}),Object.assign(js.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(s,t){const i=this.getUtoTmapping(s);return this.getPoint(i,t)},getPoints:function(s=5){const t=[];for(let i=0;i<=s;i++)t.push(this.getPoint(i/s));return t},getSpacedPoints:function(s=5){const t=[];for(let i=0;i<=s;i++)t.push(this.getPointAt(i/s));return t},getLength:function(){const s=this.getLengths();return s[s.length-1]},getLengths:function(s){if(s===void 0&&(s=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,o=this.getPoint(0),l=0;t.push(0);for(let f=1;f<=s;f++)l+=(i=this.getPoint(f/s)).distanceTo(o),t.push(l),o=i;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(s,t){const i=this.getLengths();let o=0;const l=i.length;let f;f=t||s*i[l-1];let B,M=0,D=l-1;for(;M<=D;)if(o=Math.floor(M+(D-M)/2),(B=i[o]-f)<0)M=o+1;else{if(!(B>0)){D=o;break}D=o-1}if(o=D,i[o]===f)return o/(l-1);const G=i[o];return(o+(f-G)/(i[o+1]-G))/(l-1)},getTangent:function(s,t){let i=s-1e-4,o=s+1e-4;i<0&&(i=0),o>1&&(o=1);const l=this.getPoint(i),f=this.getPoint(o),B=t||(l.isVector2?new Qn:new Je);return B.copy(f).sub(l).normalize(),B},getTangentAt:function(s,t){const i=this.getUtoTmapping(s);return this.getTangent(i,t)},computeFrenetFrames:function(s,t){const i=new Je,o=[],l=[],f=[],B=new Je,M=new ir;for(let oe=0;oe<=s;oe++){const he=oe/s;o[oe]=this.getTangentAt(he,new Je),o[oe].normalize()}l[0]=new Je,f[0]=new Je;let D=Number.MAX_VALUE;const G=Math.abs(o[0].x),$=Math.abs(o[0].y),ie=Math.abs(o[0].z);G<=D&&(D=G,i.set(1,0,0)),$<=D&&(D=$,i.set(0,1,0)),ie<=D&&i.set(0,0,1),B.crossVectors(o[0],i).normalize(),l[0].crossVectors(o[0],B),f[0].crossVectors(o[0],l[0]);for(let oe=1;oe<=s;oe++){if(l[oe]=l[oe-1].clone(),f[oe]=f[oe-1].clone(),B.crossVectors(o[oe-1],o[oe]),B.length()>Number.EPSILON){B.normalize();const he=Math.acos(qi.clamp(o[oe-1].dot(o[oe]),-1,1));l[oe].applyMatrix4(M.makeRotationAxis(B,he))}f[oe].crossVectors(o[oe],l[oe])}if(t===!0){let oe=Math.acos(qi.clamp(l[0].dot(l[s]),-1,1));oe/=s,o[0].dot(B.crossVectors(l[0],l[s]))>0&&(oe=-oe);for(let he=1;he<=s;he++)l[he].applyMatrix4(M.makeRotationAxis(o[he],oe*he)),f[he].crossVectors(o[he],l[he])}return{tangents:o,normals:l,binormals:f}},clone:function(){return new this.constructor().copy(this)},copy:function(s){return this.arcLengthDivisions=s.arcLengthDivisions,this},toJSON:function(){const s={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return s.arcLengthDivisions=this.arcLengthDivisions,s.type=this.type,s},fromJSON:function(s){return this.arcLengthDivisions=s.arcLengthDivisions,this}});class jd extends js{constructor(t=0,i=0,o=1,l=1,f=0,B=2*Math.PI,M=!1,D=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=i,this.xRadius=o,this.yRadius=l,this.aStartAngle=f,this.aEndAngle=B,this.aClockwise=M,this.aRotation=D}getPoint(t,i){const o=i||new Qn,l=2*Math.PI;let f=this.aEndAngle-this.aStartAngle;const B=Math.abs(f)<Number.EPSILON;for(;f<0;)f+=l;for(;f>l;)f-=l;f<Number.EPSILON&&(f=B?0:l),this.aClockwise!==!0||B||(f===l?f=-l:f-=l);const M=this.aStartAngle+t*f;let D=this.aX+this.xRadius*Math.cos(M),G=this.aY+this.yRadius*Math.sin(M);if(this.aRotation!==0){const $=Math.cos(this.aRotation),ie=Math.sin(this.aRotation),oe=D-this.aX,he=G-this.aY;D=oe*$-he*ie+this.aX,G=oe*ie+he*$+this.aY}return o.set(D,G)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}jd.prototype.isEllipseCurve=!0;class ng extends jd{constructor(t,i,o,l,f,B){super(t,i,o,o,l,f,B),this.type="ArcCurve"}}ng.prototype.isArcCurve=!0;const Fp=new Je,ig=new sl,rg=new sl,sg=new sl;class og extends js{constructor(t=[],i=!1,o="centripetal",l=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=i,this.curveType=o,this.tension=l}getPoint(t,i=new Je){const o=i,l=this.points,f=l.length,B=(f-(this.closed?0:1))*t;let M=Math.floor(B),D=B-M;this.closed?M+=M>0?0:(Math.floor(Math.abs(M)/f)+1)*f:D===0&&M===f-1&&(M=f-2,D=1);let G,$;this.closed||M>0?G=l[(M-1)%f]:(Fp.subVectors(l[0],l[1]).add(l[0]),G=Fp);const ie=l[M%f],oe=l[(M+1)%f];if(this.closed||M+2<f?$=l[(M+2)%f]:(Fp.subVectors(l[f-1],l[f-2]).add(l[f-1]),$=Fp),this.curveType==="centripetal"||this.curveType==="chordal"){const he=this.curveType==="chordal"?.5:.25;let ye=Math.pow(G.distanceToSquared(ie),he),we=Math.pow(ie.distanceToSquared(oe),he),be=Math.pow(oe.distanceToSquared($),he);we<1e-4&&(we=1),ye<1e-4&&(ye=we),be<1e-4&&(be=we),ig.initNonuniformCatmullRom(G.x,ie.x,oe.x,$.x,ye,we,be),rg.initNonuniformCatmullRom(G.y,ie.y,oe.y,$.y,ye,we,be),sg.initNonuniformCatmullRom(G.z,ie.z,oe.z,$.z,ye,we,be)}else this.curveType==="catmullrom"&&(ig.initCatmullRom(G.x,ie.x,oe.x,$.x,this.tension),rg.initCatmullRom(G.y,ie.y,oe.y,$.y,this.tension),sg.initCatmullRom(G.z,ie.z,oe.z,$.z,this.tension));return o.set(ig.calc(D),rg.calc(D),sg.calc(D)),o}copy(t){super.copy(t),this.points=[];for(let i=0,o=t.points.length;i<o;i++){const l=t.points[i];this.points.push(l.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let i=0,o=this.points.length;i<o;i++){const l=this.points[i];t.points.push(l.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,o=t.points.length;i<o;i++){const l=t.points[i];this.points.push(new Je().fromArray(l))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}og.prototype.isCatmullRomCurve3=!0;class Np extends js{constructor(t=new Qn,i=new Qn,o=new Qn,l=new Qn){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=i,this.v2=o,this.v3=l}getPoint(t,i=new Qn){const o=i,l=this.v0,f=this.v1,B=this.v2,M=this.v3;return o.set(Ra(t,l.x,f.x,B.x,M.x),Ra(t,l.y,f.y,B.y,M.y)),o}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Np.prototype.isCubicBezierCurve=!0;class ag extends js{constructor(t=new Je,i=new Je,o=new Je,l=new Je){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=i,this.v2=o,this.v3=l}getPoint(t,i=new Je){const o=i,l=this.v0,f=this.v1,B=this.v2,M=this.v3;return o.set(Ra(t,l.x,f.x,B.x,M.x),Ra(t,l.y,f.y,B.y,M.y),Ra(t,l.z,f.z,B.z,M.z)),o}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}ag.prototype.isCubicBezierCurve3=!0;class Wd extends js{constructor(t=new Qn,i=new Qn){super(),this.type="LineCurve",this.v1=t,this.v2=i}getPoint(t,i=new Qn){const o=i;return t===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(t).add(this.v1)),o}getPointAt(t,i){return this.getPoint(t,i)}getTangent(t,i){const o=i||new Qn;return o.copy(this.v2).sub(this.v1).normalize(),o}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Wd.prototype.isLineCurve=!0;class F0 extends js{constructor(t=new Je,i=new Je){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=i}getPoint(t,i=new Je){const o=i;return t===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(t).add(this.v1)),o}getPointAt(t,i){return this.getPoint(t,i)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class kp extends js{constructor(t=new Qn,i=new Qn,o=new Qn){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=i,this.v2=o}getPoint(t,i=new Qn){const o=i,l=this.v0,f=this.v1,B=this.v2;return o.set(Ia(t,l.x,f.x,B.x),Ia(t,l.y,f.y,B.y)),o}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}kp.prototype.isQuadraticBezierCurve=!0;class lg extends js{constructor(t=new Je,i=new Je,o=new Je){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=i,this.v2=o}getPoint(t,i=new Je){const o=i,l=this.v0,f=this.v1,B=this.v2;return o.set(Ia(t,l.x,f.x,B.x),Ia(t,l.y,f.y,B.y),Ia(t,l.z,f.z,B.z)),o}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}lg.prototype.isQuadraticBezierCurve3=!0;class Up extends js{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,i=new Qn){const o=i,l=this.points,f=(l.length-1)*t,B=Math.floor(f),M=f-B,D=l[B===0?B:B-1],G=l[B],$=l[B>l.length-2?l.length-1:B+1],ie=l[B>l.length-3?l.length-1:B+2];return o.set(Pl(M,D.x,G.x,$.x,ie.x),Pl(M,D.y,G.y,$.y,ie.y)),o}copy(t){super.copy(t),this.points=[];for(let i=0,o=t.points.length;i<o;i++){const l=t.points[i];this.points.push(l.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let i=0,o=this.points.length;i<o;i++){const l=this.points[i];t.points.push(l.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,o=t.points.length;i<o;i++){const l=t.points[i];this.points.push(new Qn().fromArray(l))}return this}}Up.prototype.isSplineCurve=!0;var cg=Object.freeze({__proto__:null,ArcCurve:ng,CatmullRomCurve3:og,CubicBezierCurve:Np,CubicBezierCurve3:ag,EllipseCurve:jd,LineCurve:Wd,LineCurve3:F0,QuadraticBezierCurve:kp,QuadraticBezierCurve3:lg,SplineCurve:Up});class N0 extends js{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);t.equals(i)||this.curves.push(new Wd(i,t))}getPoint(t){const i=t*this.getLength(),o=this.getCurveLengths();let l=0;for(;l<o.length;){if(o[l]>=i){const f=o[l]-i,B=this.curves[l],M=B.getLength(),D=M===0?0:1-f/M;return B.getPointAt(D)}l++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let i=0;for(let o=0,l=this.curves.length;o<l;o++)i+=this.curves[o].getLength(),t.push(i);return this.cacheLengths=t,t}getSpacedPoints(t=40){const i=[];for(let o=0;o<=t;o++)i.push(this.getPoint(o/t));return this.autoClose&&i.push(i[0]),i}getPoints(t=12){const i=[];let o;for(let l=0,f=this.curves;l<f.length;l++){const B=f[l],M=B&&B.isEllipseCurve?2*t:B&&(B.isLineCurve||B.isLineCurve3)?1:B&&B.isSplineCurve?t*B.points.length:t,D=B.getPoints(M);for(let G=0;G<D.length;G++){const $=D[G];o&&o.equals($)||(i.push($),o=$)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(t){super.copy(t),this.curves=[];for(let i=0,o=t.curves.length;i<o;i++){const l=t.curves[i];this.curves.push(l.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let i=0,o=this.curves.length;i<o;i++){const l=this.curves[i];t.curves.push(l.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let i=0,o=t.curves.length;i<o;i++){const l=t.curves[i];this.curves.push(new cg[l.type]().fromJSON(l))}return this}}class Kd extends N0{constructor(t){super(),this.type="Path",this.currentPoint=new Qn,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let i=1,o=t.length;i<o;i++)this.lineTo(t[i].x,t[i].y);return this}moveTo(t,i){return this.currentPoint.set(t,i),this}lineTo(t,i){const o=new Wd(this.currentPoint.clone(),new Qn(t,i));return this.curves.push(o),this.currentPoint.set(t,i),this}quadraticCurveTo(t,i,o,l){const f=new kp(this.currentPoint.clone(),new Qn(t,i),new Qn(o,l));return this.curves.push(f),this.currentPoint.set(o,l),this}bezierCurveTo(t,i,o,l,f,B){const M=new Np(this.currentPoint.clone(),new Qn(t,i),new Qn(o,l),new Qn(f,B));return this.curves.push(M),this.currentPoint.set(f,B),this}splineThru(t){const i=[this.currentPoint.clone()].concat(t),o=new Up(i);return this.curves.push(o),this.currentPoint.copy(t[t.length-1]),this}arc(t,i,o,l,f,B){const M=this.currentPoint.x,D=this.currentPoint.y;return this.absarc(t+M,i+D,o,l,f,B),this}absarc(t,i,o,l,f,B){return this.absellipse(t,i,o,o,l,f,B),this}ellipse(t,i,o,l,f,B,M,D){const G=this.currentPoint.x,$=this.currentPoint.y;return this.absellipse(t+G,i+$,o,l,f,B,M,D),this}absellipse(t,i,o,l,f,B,M,D){const G=new jd(t,i,o,l,f,B,M,D);if(this.curves.length>0){const ie=G.getPoint(0);ie.equals(this.currentPoint)||this.lineTo(ie.x,ie.y)}this.curves.push(G);const $=G.getPoint(1);return this.currentPoint.copy($),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class qc extends Kd{constructor(t){super(t),this.uuid=qi.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(t){const i=[];for(let o=0,l=this.holes.length;o<l;o++)i[o]=this.holes[o].getPoints(t);return i}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let i=0,o=t.holes.length;i<o;i++){const l=t.holes[i];this.holes.push(l.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let i=0,o=this.holes.length;i<o;i++){const l=this.holes[i];t.holes.push(l.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let i=0,o=t.holes.length;i<o;i++){const l=t.holes[i];this.holes.push(new Kd().fromJSON(l))}return this}}class xl extends I{constructor(t,i=1){super(),this.type="Light",this.color=new Fi(t),this.intensity=i}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}}xl.prototype.isLight=!0;class ug extends xl{constructor(t,i,o){super(t,o),this.type="HemisphereLight",this.position.copy(I.DefaultUp),this.updateMatrix(),this.groundColor=new Fi(i)}copy(t){return xl.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}ug.prototype.isHemisphereLight=!0;const k0=new ir,U0=new Je,G0=new Je;class hg{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Qn(512,512),this.map=null,this.mapPass=null,this.matrix=new ir,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cd,this._frameExtents=new Qn(1,1),this._viewportCount=1,this._viewports=[new os(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,o=this.matrix;U0.setFromMatrixPosition(t.matrixWorld),i.position.copy(U0),G0.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(G0),i.updateMatrixWorld(),k0.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(k0),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(i.projectionMatrix),o.multiply(i.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),this.mapSize.x===512&&this.mapSize.y===512||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class H0 extends hg{constructor(){super(new Q(50,1,.5,500)),this.focus=1}updateMatrices(t){const i=this.camera,o=2*qi.RAD2DEG*t.angle*this.focus,l=this.mapSize.width/this.mapSize.height,f=t.distance||i.far;o===i.fov&&l===i.aspect&&f===i.far||(i.fov=o,i.aspect=l,i.far=f,i.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}H0.prototype.isSpotLightShadow=!0;class dg extends xl{constructor(t,i,o=0,l=Math.PI/3,f=0,B=1){super(t,i),this.type="SpotLight",this.position.copy(I.DefaultUp),this.updateMatrix(),this.target=new I,this.distance=o,this.angle=l,this.penumbra=f,this.decay=B,this.shadow=new H0}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}dg.prototype.isSpotLight=!0;const z0=new ir,Ou=new Je,Gp=new Je;class V0 extends hg{constructor(){super(new Q(90,1,.5,500)),this._frameExtents=new Qn(4,2),this._viewportCount=6,this._viewports=[new os(2,1,1,1),new os(0,1,1,1),new os(3,1,1,1),new os(1,1,1,1),new os(3,0,1,1),new os(1,0,1,1)],this._cubeDirections=[new Je(1,0,0),new Je(-1,0,0),new Je(0,0,1),new Je(0,0,-1),new Je(0,1,0),new Je(0,-1,0)],this._cubeUps=[new Je(0,1,0),new Je(0,1,0),new Je(0,1,0),new Je(0,1,0),new Je(0,0,1),new Je(0,0,-1)]}updateMatrices(t,i=0){const o=this.camera,l=this.matrix,f=t.distance||o.far;f!==o.far&&(o.far=f,o.updateProjectionMatrix()),Ou.setFromMatrixPosition(t.matrixWorld),o.position.copy(Ou),Gp.copy(o.position),Gp.add(this._cubeDirections[i]),o.up.copy(this._cubeUps[i]),o.lookAt(Gp),o.updateMatrixWorld(),l.makeTranslation(-Ou.x,-Ou.y,-Ou.z),z0.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(z0)}}V0.prototype.isPointLightShadow=!0;class Fh extends xl{constructor(t,i,o=0,l=1){super(t,i),this.type="PointLight",this.distance=o,this.decay=l,this.shadow=new V0}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}Fh.prototype.isPointLight=!0;class Nh extends q{constructor(t=-1,i=1,o=1,l=-1,f=.1,B=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=o,this.bottom=l,this.near=f,this.far=B,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,o,l,f,B){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=o,this.view.offsetY=l,this.view.width=f,this.view.height=B,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let f=o-t,B=o+t,M=l+i,D=l-i;if(this.view!==null&&this.view.enabled){const G=(this.right-this.left)/this.view.fullWidth/this.zoom,$=(this.top-this.bottom)/this.view.fullHeight/this.zoom;B=(f+=G*this.view.offsetX)+G*this.view.width,D=(M-=$*this.view.offsetY)-$*this.view.height}this.projectionMatrix.makeOrthographic(f,B,M,D,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=I.prototype.toJSON.call(this,t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}Nh.prototype.isOrthographicCamera=!0;class Q0 extends hg{constructor(){super(new Nh(-5,5,5,-5,.5,500))}}Q0.prototype.isDirectionalLightShadow=!0;class fg extends xl{constructor(t,i){super(t,i),this.type="DirectionalLight",this.position.copy(I.DefaultUp),this.updateMatrix(),this.target=new I,this.shadow=new Q0}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}fg.prototype.isDirectionalLight=!0;class pg extends xl{constructor(t,i){super(t,i),this.type="AmbientLight"}}pg.prototype.isAmbientLight=!0;class Hp extends xl{constructor(t,i,o=10,l=10){super(t,i),this.type="RectAreaLight",this.width=o,this.height=l}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const i=super.toJSON(t);return i.object.width=this.width,i.object.height=this.height,i}}Hp.prototype.isRectAreaLight=!0;class mg{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Je)}set(t){for(let i=0;i<9;i++)this.coefficients[i].copy(t[i]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,i){const o=t.x,l=t.y,f=t.z,B=this.coefficients;return i.copy(B[0]).multiplyScalar(.282095),i.addScaledVector(B[1],.488603*l),i.addScaledVector(B[2],.488603*f),i.addScaledVector(B[3],.488603*o),i.addScaledVector(B[4],o*l*1.092548),i.addScaledVector(B[5],l*f*1.092548),i.addScaledVector(B[6],.315392*(3*f*f-1)),i.addScaledVector(B[7],o*f*1.092548),i.addScaledVector(B[8],.546274*(o*o-l*l)),i}getIrradianceAt(t,i){const o=t.x,l=t.y,f=t.z,B=this.coefficients;return i.copy(B[0]).multiplyScalar(.886227),i.addScaledVector(B[1],1.023328*l),i.addScaledVector(B[2],1.023328*f),i.addScaledVector(B[3],1.023328*o),i.addScaledVector(B[4],.858086*o*l),i.addScaledVector(B[5],.858086*l*f),i.addScaledVector(B[6],.743125*f*f-.247708),i.addScaledVector(B[7],.858086*o*f),i.addScaledVector(B[8],.429043*(o*o-l*l)),i}add(t){for(let i=0;i<9;i++)this.coefficients[i].add(t.coefficients[i]);return this}addScaledSH(t,i){for(let o=0;o<9;o++)this.coefficients[o].addScaledVector(t.coefficients[o],i);return this}scale(t){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(t);return this}lerp(t,i){for(let o=0;o<9;o++)this.coefficients[o].lerp(t.coefficients[o],i);return this}equals(t){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(t.coefficients[i]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,i=0){const o=this.coefficients;for(let l=0;l<9;l++)o[l].fromArray(t,i+3*l);return this}toArray(t=[],i=0){const o=this.coefficients;for(let l=0;l<9;l++)o[l].toArray(t,i+3*l);return t}static getBasisAt(t,i){const o=t.x,l=t.y,f=t.z;i[0]=.282095,i[1]=.488603*l,i[2]=.488603*f,i[3]=.488603*o,i[4]=1.092548*o*l,i[5]=1.092548*l*f,i[6]=.315392*(3*f*f-1),i[7]=1.092548*o*f,i[8]=.546274*(o*o-l*l)}}mg.prototype.isSphericalHarmonics3=!0;class Xd extends xl{constructor(t=new mg,i=1){super(void 0,i),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const i=super.toJSON(t);return i.object.sh=this.sh.toArray(),i}}Xd.prototype.isLightProbe=!0;class j0 extends Zr{constructor(t){super(t),this.textures={}}load(t,i,o,l){const f=this,B=new Fs(f.manager);B.setPath(f.path),B.setRequestHeader(f.requestHeader),B.setWithCredentials(f.withCredentials),B.load(t,function(M){try{i(f.parse(JSON.parse(M)))}catch(D){l?l(D):console.error(D),f.manager.itemError(t)}},o,l)}parse(t){function i(f){return o[f]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",f),o[f]}const o=this.textures,l=new Fv[t.type];if(t.uuid!==void 0&&(l.uuid=t.uuid),t.name!==void 0&&(l.name=t.name),t.color!==void 0&&l.color!==void 0&&l.color.setHex(t.color),t.roughness!==void 0&&(l.roughness=t.roughness),t.metalness!==void 0&&(l.metalness=t.metalness),t.sheen!==void 0&&(l.sheen=new Fi().setHex(t.sheen)),t.emissive!==void 0&&l.emissive!==void 0&&l.emissive.setHex(t.emissive),t.specular!==void 0&&l.specular!==void 0&&l.specular.setHex(t.specular),t.shininess!==void 0&&(l.shininess=t.shininess),t.clearcoat!==void 0&&(l.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(l.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(l.fog=t.fog),t.flatShading!==void 0&&(l.flatShading=t.flatShading),t.blending!==void 0&&(l.blending=t.blending),t.combine!==void 0&&(l.combine=t.combine),t.side!==void 0&&(l.side=t.side),t.shadowSide!==void 0&&(l.shadowSide=t.shadowSide),t.opacity!==void 0&&(l.opacity=t.opacity),t.transparent!==void 0&&(l.transparent=t.transparent),t.alphaTest!==void 0&&(l.alphaTest=t.alphaTest),t.depthTest!==void 0&&(l.depthTest=t.depthTest),t.depthWrite!==void 0&&(l.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(l.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(l.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(l.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(l.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(l.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(l.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(l.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(l.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(l.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(l.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(l.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(l.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(l.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(l.rotation=t.rotation),t.linewidth!==1&&(l.linewidth=t.linewidth),t.dashSize!==void 0&&(l.dashSize=t.dashSize),t.gapSize!==void 0&&(l.gapSize=t.gapSize),t.scale!==void 0&&(l.scale=t.scale),t.polygonOffset!==void 0&&(l.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(l.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(l.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(l.skinning=t.skinning),t.morphTargets!==void 0&&(l.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(l.morphNormals=t.morphNormals),t.dithering!==void 0&&(l.dithering=t.dithering),t.alphaToCoverage!==void 0&&(l.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(l.premultipliedAlpha=t.premultipliedAlpha),t.vertexTangents!==void 0&&(l.vertexTangents=t.vertexTangents),t.visible!==void 0&&(l.visible=t.visible),t.toneMapped!==void 0&&(l.toneMapped=t.toneMapped),t.userData!==void 0&&(l.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?l.vertexColors=t.vertexColors>0:l.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const f in t.uniforms){const B=t.uniforms[f];switch(l.uniforms[f]={},B.type){case"t":l.uniforms[f].value=i(B.value);break;case"c":l.uniforms[f].value=new Fi().setHex(B.value);break;case"v2":l.uniforms[f].value=new Qn().fromArray(B.value);break;case"v3":l.uniforms[f].value=new Je().fromArray(B.value);break;case"v4":l.uniforms[f].value=new os().fromArray(B.value);break;case"m3":l.uniforms[f].value=new cs().fromArray(B.value);break;case"m4":l.uniforms[f].value=new ir().fromArray(B.value);break;default:l.uniforms[f].value=B.value}}if(t.defines!==void 0&&(l.defines=t.defines),t.vertexShader!==void 0&&(l.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(l.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(const f in t.extensions)l.extensions[f]=t.extensions[f];if(t.shading!==void 0&&(l.flatShading=t.shading===1),t.size!==void 0&&(l.size=t.size),t.sizeAttenuation!==void 0&&(l.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(l.map=i(t.map)),t.matcap!==void 0&&(l.matcap=i(t.matcap)),t.alphaMap!==void 0&&(l.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(l.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(l.bumpScale=t.bumpScale),t.normalMap!==void 0&&(l.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(l.normalMapType=t.normalMapType),t.normalScale!==void 0){let f=t.normalScale;Array.isArray(f)===!1&&(f=[f,f]),l.normalScale=new Qn().fromArray(f)}return t.displacementMap!==void 0&&(l.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(l.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(l.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(l.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(l.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(l.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(l.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(l.specularMap=i(t.specularMap)),t.envMap!==void 0&&(l.envMap=i(t.envMap)),t.envMapIntensity!==void 0&&(l.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(l.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(l.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(l.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(l.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(l.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(l.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(l.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(l.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(l.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(l.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(l.clearcoatNormalScale=new Qn().fromArray(t.clearcoatNormalScale)),t.transmission!==void 0&&(l.transmission=t.transmission),t.transmissionMap!==void 0&&(l.transmissionMap=i(t.transmissionMap)),l}setTextures(t){return this.textures=t,this}}const gg={decodeText:function(s){if(typeof TextDecoder<"u")return new TextDecoder().decode(s);let t="";for(let i=0,o=s.length;i<o;i++)t+=String.fromCharCode(s[i]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(s){const t=s.lastIndexOf("/");return t===-1?"./":s.substr(0,t+1)}};Ba.prototype=Object.assign(Object.create(U.prototype),{constructor:Ba,isInstancedBufferGeometry:!0,copy:function(s){return U.prototype.copy.call(this,s),this.instanceCount=s.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const s=U.prototype.toJSON.call(this);return s.instanceCount=this.instanceCount,s.isInstancedBufferGeometry=!0,s}}),ja.prototype=Object.assign(Object.create(y.prototype),{constructor:ja,isInstancedBufferAttribute:!0,copy:function(s){return y.prototype.copy.call(this,s),this.meshPerAttribute=s.meshPerAttribute,this},toJSON:function(){const s=y.prototype.toJSON.call(this);return s.meshPerAttribute=this.meshPerAttribute,s.isInstancedBufferAttribute=!0,s}});class W0 extends Zr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=new Fs(f.manager);B.setPath(f.path),B.setRequestHeader(f.requestHeader),B.setWithCredentials(f.withCredentials),B.load(t,function(M){try{i(f.parse(JSON.parse(M)))}catch(D){l?l(D):console.error(D),f.manager.itemError(t)}},o,l)}parse(t){function i(ie,oe){if(o[oe]!==void 0)return o[oe];const he=ie.interleavedBuffers[oe],ye=function(be,ke){if(l[ke]!==void 0)return l[ke];const Xe=be.arrayBuffers[ke],it=new Uint32Array(Xe).buffer;return l[ke]=it,it}(ie,he.buffer),we=new ei(j(he.type,ye),he.stride);return we.uuid=he.uuid,o[oe]=we,we}const o={},l={},f=t.isInstancedBufferGeometry?new Ba:new U,B=t.data.index;if(B!==void 0){const ie=j(B.type,B.array);f.setIndex(new y(ie,1))}const M=t.data.attributes;for(const ie in M){const oe=M[ie];let he;if(oe.isInterleavedBufferAttribute)he=new pn(i(t.data,oe.data),oe.itemSize,oe.offset,oe.normalized);else{const ye=j(oe.type,oe.array);he=new(oe.isInstancedBufferAttribute?ja:y)(ye,oe.itemSize,oe.normalized)}oe.name!==void 0&&(he.name=oe.name),oe.usage!==void 0&&he.setUsage(oe.usage),oe.updateRange!==void 0&&(he.updateRange.offset=oe.updateRange.offset,he.updateRange.count=oe.updateRange.count),f.setAttribute(ie,he)}const D=t.data.morphAttributes;if(D)for(const ie in D){const oe=D[ie],he=[];for(let ye=0,we=oe.length;ye<we;ye++){const be=oe[ye];let ke;be.isInterleavedBufferAttribute?ke=new pn(i(t.data,be.data),be.itemSize,be.offset,be.normalized):ke=new y(j(be.type,be.array),be.itemSize,be.normalized),be.name!==void 0&&(ke.name=be.name),he.push(ke)}f.morphAttributes[ie]=he}t.data.morphTargetsRelative&&(f.morphTargetsRelative=!0);const G=t.data.groups||t.data.drawcalls||t.data.offsets;if(G!==void 0)for(let ie=0,oe=G.length;ie!==oe;++ie){const he=G[ie];f.addGroup(he.start,he.count,he.materialIndex)}const $=t.data.boundingSphere;if($!==void 0){const ie=new Je;$.center!==void 0&&ie.fromArray($.center),f.boundingSphere=new ea(ie,$.radius)}return t.name&&(f.name=t.name),t.userData&&(f.userData=t.userData),f}}class Yd extends Zr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=this.path===""?gg.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||B;const M=new Fs(this.manager);M.setPath(this.path),M.setRequestHeader(this.requestHeader),M.setWithCredentials(this.withCredentials),M.load(t,function(D){let G=null;try{G=JSON.parse(D)}catch(ie){return l!==void 0&&l(ie),void console.error("THREE:ObjectLoader: Can't parse "+t+".",ie.message)}const $=G.metadata;$!==void 0&&$.type!==void 0&&$.type.toLowerCase()!=="geometry"?f.parse(G,i):console.error("THREE.ObjectLoader: Can't load "+t)},o,l)}parse(t,i){const o=this.parseAnimations(t.animations),l=this.parseShapes(t.shapes),f=this.parseGeometries(t.geometries,l),B=this.parseImages(t.images,function(){i!==void 0&&i(G)}),M=this.parseTextures(t.textures,B),D=this.parseMaterials(t.materials,M),G=this.parseObject(t.object,f,D,o),$=this.parseSkeletons(t.skeletons,G);if(this.bindSkeletons(G,$),i!==void 0){let ie=!1;for(const oe in B)if(B[oe]instanceof HTMLImageElement){ie=!0;break}ie===!1&&i(G)}return G}parseShapes(t){const i={};if(t!==void 0)for(let o=0,l=t.length;o<l;o++){const f=new qc().fromJSON(t[o]);i[f.uuid]=f}return i}parseSkeletons(t,i){const o={},l={};if(i.traverse(function(f){f.isBone&&(l[f.uuid]=f)}),t!==void 0)for(let f=0,B=t.length;f<B;f++){const M=new qm().fromJSON(t[f],l);o[M.uuid]=M}return o}parseGeometries(t,i){const o={};let l;if(t!==void 0){const f=new W0;for(let B=0,M=t.length;B<M;B++){let D;const G=t[B];switch(G.type){case"PlaneGeometry":case"PlaneBufferGeometry":D=new la[G.type](G.width,G.height,G.widthSegments,G.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":D=new la[G.type](G.width,G.height,G.depth,G.widthSegments,G.heightSegments,G.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":D=new la[G.type](G.radius,G.segments,G.thetaStart,G.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":D=new la[G.type](G.radiusTop,G.radiusBottom,G.height,G.radialSegments,G.heightSegments,G.openEnded,G.thetaStart,G.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":D=new la[G.type](G.radius,G.height,G.radialSegments,G.heightSegments,G.openEnded,G.thetaStart,G.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":D=new la[G.type](G.radius,G.widthSegments,G.heightSegments,G.phiStart,G.phiLength,G.thetaStart,G.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":D=new la[G.type](G.radius,G.detail);break;case"RingGeometry":case"RingBufferGeometry":D=new la[G.type](G.innerRadius,G.outerRadius,G.thetaSegments,G.phiSegments,G.thetaStart,G.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":D=new la[G.type](G.radius,G.tube,G.radialSegments,G.tubularSegments,G.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":D=new la[G.type](G.radius,G.tube,G.tubularSegments,G.radialSegments,G.p,G.q);break;case"TubeGeometry":case"TubeBufferGeometry":D=new la[G.type](new cg[G.path.type]().fromJSON(G.path),G.tubularSegments,G.radius,G.radialSegments,G.closed);break;case"LatheGeometry":case"LatheBufferGeometry":D=new la[G.type](G.points,G.segments,G.phiStart,G.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":D=new la[G.type](G.vertices,G.indices,G.radius,G.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":l=[];for(let ie=0,oe=G.shapes.length;ie<oe;ie++){const he=i[G.shapes[ie]];l.push(he)}D=new la[G.type](l,G.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":l=[];for(let ie=0,oe=G.shapes.length;ie<oe;ie++){const he=i[G.shapes[ie]];l.push(he)}const $=G.options.extrudePath;$!==void 0&&(G.options.extrudePath=new cg[$.type]().fromJSON($)),D=new la[G.type](l,G.options);break;case"BufferGeometry":case"InstancedBufferGeometry":D=f.parse(G);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+G.type+'"');continue}D.uuid=G.uuid,G.name!==void 0&&(D.name=G.name),D.isBufferGeometry===!0&&G.userData!==void 0&&(D.userData=G.userData),o[G.uuid]=D}}return o}parseMaterials(t,i){const o={},l={};if(t!==void 0){const f=new j0;f.setTextures(i);for(let B=0,M=t.length;B<M;B++){const D=t[B];if(D.type==="MultiMaterial"){const G=[];for(let $=0;$<D.materials.length;$++){const ie=D.materials[$];o[ie.uuid]===void 0&&(o[ie.uuid]=f.parse(ie)),G.push(o[ie.uuid])}l[D.uuid]=G}else o[D.uuid]===void 0&&(o[D.uuid]=f.parse(D)),l[D.uuid]=o[D.uuid]}}return l}parseAnimations(t){const i={};if(t!==void 0)for(let o=0;o<t.length;o++){const l=t[o],f=Qd.parse(l);i[f.uuid]=f}return i}parseImages(t,i){function o(M){if(typeof M=="string"){const D=M;return function(G){return l.manager.itemStart(G),B.load(G,function(){l.manager.itemEnd(G)},void 0,function(){l.manager.itemError(G),l.manager.itemEnd(G)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(D)?D:l.resourcePath+D)}return M.data?{data:j(M.type,M.data),width:M.width,height:M.height}:null}const l=this,f={};let B;if(t!==void 0&&t.length>0){const M=new Qs(i);(B=new Op(M)).setCrossOrigin(this.crossOrigin);for(let D=0,G=t.length;D<G;D++){const $=t[D],ie=$.url;if(Array.isArray(ie)){f[$.uuid]=[];for(let oe=0,he=ie.length;oe<he;oe++){const ye=o(ie[oe]);ye!==null&&(ye instanceof HTMLImageElement?f[$.uuid].push(ye):f[$.uuid].push(new Bh(ye.data,ye.width,ye.height)))}}else{const oe=o($.url);oe!==null&&(f[$.uuid]=oe)}}}return f}parseTextures(t,i){function o(f,B){return typeof f=="number"?f:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",f),B[f])}const l={};if(t!==void 0)for(let f=0,B=t.length;f<B;f++){const M=t[f];M.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',M.uuid),i[M.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",M.image);let D;const G=i[M.image];Array.isArray(G)?(D=new Rh(G),G.length===6&&(D.needsUpdate=!0)):(D=G&&G.data?new Bh(G.data,G.width,G.height):new go(G),G&&(D.needsUpdate=!0)),D.uuid=M.uuid,M.name!==void 0&&(D.name=M.name),M.mapping!==void 0&&(D.mapping=o(M.mapping,K0)),M.offset!==void 0&&D.offset.fromArray(M.offset),M.repeat!==void 0&&D.repeat.fromArray(M.repeat),M.center!==void 0&&D.center.fromArray(M.center),M.rotation!==void 0&&(D.rotation=M.rotation),M.wrap!==void 0&&(D.wrapS=o(M.wrap[0],Ag),D.wrapT=o(M.wrap[1],Ag)),M.format!==void 0&&(D.format=M.format),M.type!==void 0&&(D.type=M.type),M.encoding!==void 0&&(D.encoding=M.encoding),M.minFilter!==void 0&&(D.minFilter=o(M.minFilter,X0)),M.magFilter!==void 0&&(D.magFilter=o(M.magFilter,X0)),M.anisotropy!==void 0&&(D.anisotropy=M.anisotropy),M.flipY!==void 0&&(D.flipY=M.flipY),M.premultiplyAlpha!==void 0&&(D.premultiplyAlpha=M.premultiplyAlpha),M.unpackAlignment!==void 0&&(D.unpackAlignment=M.unpackAlignment),l[M.uuid]=D}return l}parseObject(t,i,o,l){function f($){return i[$]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",$),i[$]}function B($){if($!==void 0){if(Array.isArray($)){const ie=[];for(let oe=0,he=$.length;oe<he;oe++){const ye=$[oe];o[ye]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ye),ie.push(o[ye])}return ie}return o[$]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",$),o[$]}}let M,D,G;switch(t.type){case"Scene":M=new gp,t.background!==void 0&&Number.isInteger(t.background)&&(M.background=new Fi(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?M.fog=new Sd(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(M.fog=new Td(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":M=new Q(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(M.focus=t.focus),t.zoom!==void 0&&(M.zoom=t.zoom),t.filmGauge!==void 0&&(M.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(M.filmOffset=t.filmOffset),t.view!==void 0&&(M.view=Object.assign({},t.view));break;case"OrthographicCamera":M=new Nh(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(M.zoom=t.zoom),t.view!==void 0&&(M.view=Object.assign({},t.view));break;case"AmbientLight":M=new pg(t.color,t.intensity);break;case"DirectionalLight":M=new fg(t.color,t.intensity);break;case"PointLight":M=new Fh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":M=new Hp(t.color,t.intensity,t.width,t.height);break;case"SpotLight":M=new dg(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":M=new ug(t.color,t.groundColor,t.intensity);break;case"LightProbe":M=new Xd().fromJSON(t);break;case"SkinnedMesh":M=new Mi(D=f(t.geometry),G=B(t.material)),t.bindMode!==void 0&&(M.bindMode=t.bindMode),t.bindMatrix!==void 0&&M.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(M.skeleton=t.skeleton);break;case"Mesh":M=new te(D=f(t.geometry),G=B(t.material));break;case"InstancedMesh":D=f(t.geometry),G=B(t.material);const $=t.count,ie=t.instanceMatrix,oe=t.instanceColor;(M=new Xr(D,G,$)).instanceMatrix=new y(new Float32Array(ie.array),16),oe!==void 0&&(M.instanceColor=new y(new Float32Array(oe.array),oe.itemSize));break;case"LOD":M=new Cv;break;case"Line":M=new zi(f(t.geometry),B(t.material));break;case"LineLoop":M=new Zm(f(t.geometry),B(t.material));break;case"LineSegments":M=new er(f(t.geometry),B(t.material));break;case"PointCloud":case"Points":M=new kr(f(t.geometry),B(t.material));break;case"Sprite":M=new Xm(B(t.material));break;case"Group":M=new Mu;break;case"Bone":M=new Ti;break;default:M=new I}if(M.uuid=t.uuid,t.name!==void 0&&(M.name=t.name),t.matrix!==void 0?(M.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(M.matrixAutoUpdate=t.matrixAutoUpdate),M.matrixAutoUpdate&&M.matrix.decompose(M.position,M.quaternion,M.scale)):(t.position!==void 0&&M.position.fromArray(t.position),t.rotation!==void 0&&M.rotation.fromArray(t.rotation),t.quaternion!==void 0&&M.quaternion.fromArray(t.quaternion),t.scale!==void 0&&M.scale.fromArray(t.scale)),t.castShadow!==void 0&&(M.castShadow=t.castShadow),t.receiveShadow!==void 0&&(M.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(M.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(M.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(M.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&M.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(M.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(M.visible=t.visible),t.frustumCulled!==void 0&&(M.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(M.renderOrder=t.renderOrder),t.userData!==void 0&&(M.userData=t.userData),t.layers!==void 0&&(M.layers.mask=t.layers),t.children!==void 0){const $=t.children;for(let ie=0;ie<$.length;ie++)M.add(this.parseObject($[ie],i,o,l))}if(t.animations!==void 0){const $=t.animations;for(let ie=0;ie<$.length;ie++){const oe=$[ie];M.animations.push(l[oe])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(M.autoUpdate=t.autoUpdate);const $=t.levels;for(let ie=0;ie<$.length;ie++){const oe=$[ie],he=M.getObjectByProperty("uuid",oe.object);he!==void 0&&M.addLevel(he,oe.distance)}}return M}bindSkeletons(t,i){Object.keys(i).length!==0&&t.traverse(function(o){if(o.isSkinnedMesh===!0&&o.skeleton!==void 0){const l=i[o.skeleton];l===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",o.skeleton):o.bind(l,o.bindMatrix)}})}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const K0={UVMapping:300,CubeReflectionMapping:Da,CubeRefractionMapping:sc,EquirectangularReflectionMapping:fh,EquirectangularRefractionMapping:Ws,CubeUVReflectionMapping:es,CubeUVRefractionMapping:ko},Ag={RepeatWrapping:cl,ClampToEdgeWrapping:Yo,MirroredRepeatWrapping:kl},X0={NearestFilter:mo,NearestMipmapNearestFilter:ph,NearestMipmapLinearFilter:Mo,LinearFilter:nt,LinearMipmapNearestFilter:Au,LinearMipmapLinearFilter:oc};ol.prototype=Object.assign(Object.create(Zr.prototype),{constructor:ol,isImageBitmapLoader:!0,setOptions:function(s){return this.options=s,this},load:function(s,t,i,o){s===void 0&&(s=""),this.path!==void 0&&(s=this.path+s),s=this.manager.resolveURL(s);const l=this,f=Pu.get(s);if(f!==void 0)return l.manager.itemStart(s),setTimeout(function(){t&&t(f),l.manager.itemEnd(s)},0),f;const B={};B.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",B.headers=this.requestHeader,fetch(s,B).then(function(M){return M.blob()}).then(function(M){return createImageBitmap(M,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(M){Pu.add(s,M),t&&t(M),l.manager.itemEnd(s)}).catch(function(M){o&&o(M),l.manager.itemError(s),l.manager.itemEnd(s)}),l.manager.itemStart(s)}});class zp{constructor(){this.type="ShapePath",this.color=new Fi,this.subPaths=[],this.currentPath=null}moveTo(t,i){return this.currentPath=new Kd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,i),this}lineTo(t,i){return this.currentPath.lineTo(t,i),this}quadraticCurveTo(t,i,o,l){return this.currentPath.quadraticCurveTo(t,i,o,l),this}bezierCurveTo(t,i,o,l,f,B){return this.currentPath.bezierCurveTo(t,i,o,l,f,B),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,i){function o(Xe){const it=[];for(let lt=0,pt=Xe.length;lt<pt;lt++){const mt=Xe[lt],ot=new qc;ot.curves=mt.curves,it.push(ot)}return it}function l(Xe,it){const lt=it.length;let pt=!1;for(let mt=lt-1,ot=0;ot<lt;mt=ot++){let kt=it[mt],gt=it[ot],Ht=gt.x-kt.x,Zt=gt.y-kt.y;if(Math.abs(Zt)>Number.EPSILON){if(Zt<0&&(kt=it[ot],Ht=-Ht,gt=it[mt],Zt=-Zt),Xe.y<kt.y||Xe.y>gt.y)continue;if(Xe.y===kt.y){if(Xe.x===kt.x)return!0}else{const Qt=Zt*(Xe.x-kt.x)-Ht*(Xe.y-kt.y);if(Qt===0)return!0;if(Qt<0)continue;pt=!pt}}else{if(Xe.y!==kt.y)continue;if(gt.x<=Xe.x&&Xe.x<=kt.x||kt.x<=Xe.x&&Xe.x<=gt.x)return!0}}return pt}const f=Kl.isClockWise,B=this.subPaths;if(B.length===0)return[];if(i===!0)return o(B);let M,D,G;const $=[];if(B.length===1)return D=B[0],G=new qc,G.curves=D.curves,$.push(G),$;let ie=!f(B[0].getPoints());ie=t?!ie:ie;const oe=[],he=[];let ye,we=[],be=0;he[be]=void 0,we[be]=[];for(let Xe=0,it=B.length;Xe<it;Xe++)M=f(ye=(D=B[Xe]).getPoints()),(M=t?!M:M)?(!ie&&he[be]&&be++,he[be]={s:new qc,p:ye},he[be].s.curves=D.curves,ie&&be++,we[be]=[]):we[be].push({h:D,p:ye[0]});if(!he[0])return o(B);if(he.length>1){let Xe=!1;const it=[];for(let lt=0,pt=he.length;lt<pt;lt++)oe[lt]=[];for(let lt=0,pt=he.length;lt<pt;lt++){const mt=we[lt];for(let ot=0;ot<mt.length;ot++){const kt=mt[ot];let gt=!0;for(let Ht=0;Ht<he.length;Ht++)l(kt.p,he[Ht].p)&&(lt!==Ht&&it.push({froms:lt,tos:Ht,hole:ot}),gt?(gt=!1,oe[Ht].push(kt)):Xe=!0);gt&&oe[lt].push(kt)}}it.length>0&&(Xe||(we=oe))}let ke;for(let Xe=0,it=he.length;Xe<it;Xe++){G=he[Xe].s,$.push(G);for(let lt=0,pt=(ke=we[Xe]).length;lt<pt;lt++)G.holes.push(ke[lt].h)}return $}}class vg{constructor(t){this.type="Font",this.data=t}generateShapes(t,i=100){const o=[],l=tc(t,i,this.data);for(let f=0,B=l.length;f<B;f++)Array.prototype.push.apply(o,l[f].toShapes());return o}}vg.prototype.isFont=!0;class kv extends Zr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=new Fs(this.manager);B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(f.withCredentials),B.load(t,function(M){let D;try{D=JSON.parse(M)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),D=JSON.parse(M.substring(65,M.length-2))}const G=f.parse(D);i&&i(G)},o,l)}parse(t){return new vg(t)}}let qd;const yg={getContext:function(){return qd===void 0&&(qd=new(window.AudioContext||window.webkitAudioContext)),qd},setContext:function(s){qd=s}};class xg extends Zr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=new Fs(this.manager);B.setResponseType("arraybuffer"),B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(t,function(M){try{const D=M.slice(0);yg.getContext().decodeAudioData(D,function(G){i(G)})}catch(D){l?l(D):console.error(D),f.manager.itemError(t)}},o,l)}}class Y0 extends Xd{constructor(t,i,o=1){super(void 0,o);const l=new Fi().set(t),f=new Fi().set(i),B=new Je(l.r,l.g,l.b),M=new Je(f.r,f.g,f.b),D=Math.sqrt(Math.PI),G=D*Math.sqrt(.75);this.sh.coefficients[0].copy(B).add(M).multiplyScalar(D),this.sh.coefficients[1].copy(B).sub(M).multiplyScalar(G)}}Y0.prototype.isHemisphereLightProbe=!0;class q0 extends Xd{constructor(t,i=1){super(void 0,i);const o=new Fi().set(t);this.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI))}}q0.prototype.isAmbientLightProbe=!0;const J0=new ir,Z0=new ir;class Uv{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Q,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Q,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const i=this._cache;if(i.focus!==t.focus||i.fov!==t.fov||i.aspect!==t.aspect*this.aspect||i.near!==t.near||i.far!==t.far||i.zoom!==t.zoom||i.eyeSep!==this.eyeSep){i.focus=t.focus,i.fov=t.fov,i.aspect=t.aspect*this.aspect,i.near=t.near,i.far=t.far,i.zoom=t.zoom,i.eyeSep=this.eyeSep;const o=t.projectionMatrix.clone(),l=i.eyeSep/2,f=l*i.near/i.focus,B=i.near*Math.tan(qi.DEG2RAD*i.fov*.5)/i.zoom;let M,D;Z0.elements[12]=-l,J0.elements[12]=l,M=-B*i.aspect+f,D=B*i.aspect+f,o.elements[0]=2*i.near/(D-M),o.elements[8]=(D+M)/(D-M),this.cameraL.projectionMatrix.copy(o),M=-B*i.aspect-f,D=B*i.aspect-f,o.elements[0]=2*i.near/(D-M),o.elements[8]=(D+M)/(D-M),this.cameraR.projectionMatrix.copy(o)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Z0),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(J0)}}class $0{constructor(t){this.autoStart=t===void 0||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Ol(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const i=Ol();t=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=t}return t}}const Fu=new Je,eA=new To,Gv=new Je,Nu=new Je;class Hv extends I{constructor(){super(),this.type="AudioListener",this.context=yg.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new $0}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const i=this.context.listener,o=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fu,eA,Gv),Nu.set(0,0,-1).applyQuaternion(eA),i.positionX){const l=this.context.currentTime+this.timeDelta;i.positionX.linearRampToValueAtTime(Fu.x,l),i.positionY.linearRampToValueAtTime(Fu.y,l),i.positionZ.linearRampToValueAtTime(Fu.z,l),i.forwardX.linearRampToValueAtTime(Nu.x,l),i.forwardY.linearRampToValueAtTime(Nu.y,l),i.forwardZ.linearRampToValueAtTime(Nu.z,l),i.upX.linearRampToValueAtTime(o.x,l),i.upY.linearRampToValueAtTime(o.y,l),i.upZ.linearRampToValueAtTime(o.z,l)}else i.setPosition(Fu.x,Fu.y,Fu.z),i.setOrientation(Nu.x,Nu.y,Nu.z,o.x,o.y,o.z)}}class Eg extends I{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl!==!1)return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(this.hasPlaybackControl!==!1)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,i=this.filters.length;t<i;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,i=this.filters.length;t<i;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl!==!1)return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl!==!1)return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Jc=new Je,bg=new To,zv=new Je,ku=new Je;class Vv extends Eg{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,i,o){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=o,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Jc,bg,zv),ku.set(0,0,1).applyQuaternion(bg);const i=this.panner;if(i.positionX){const o=this.context.currentTime+this.listener.timeDelta;i.positionX.linearRampToValueAtTime(Jc.x,o),i.positionY.linearRampToValueAtTime(Jc.y,o),i.positionZ.linearRampToValueAtTime(Jc.z,o),i.orientationX.linearRampToValueAtTime(ku.x,o),i.orientationY.linearRampToValueAtTime(ku.y,o),i.orientationZ.linearRampToValueAtTime(ku.z,o)}else i.setPosition(Jc.x,Jc.y,Jc.z),i.setOrientation(ku.x,ku.y,ku.z)}}class tA{constructor(t,i=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=i,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const i=this.getFrequencyData();for(let o=0;o<i.length;o++)t+=i[o];return t/i.length}}class nA{constructor(t,i,o){this.binding=t,this.valueSize=o;let l,f,B;switch(i){case"quaternion":l=this._slerp,f=this._slerpAdditive,B=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*o),this._workIndex=5;break;case"string":case"bool":l=this._select,f=this._select,B=this._setAdditiveIdentityOther,this.buffer=new Array(5*o);break;default:l=this._lerp,f=this._lerpAdditive,B=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*o)}this._mixBufferRegion=l,this._mixBufferRegionAdditive=f,this._setIdentity=B,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,i){const o=this.buffer,l=this.valueSize,f=t*l+l;let B=this.cumulativeWeight;if(B===0){for(let M=0;M!==l;++M)o[f+M]=o[M];B=i}else{const M=i/(B+=i);this._mixBufferRegion(o,f,0,M,l)}this.cumulativeWeight=B}accumulateAdditive(t){const i=this.buffer,o=this.valueSize,l=o*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,l,0,t,o),this.cumulativeWeightAdditive+=t}apply(t){const i=this.valueSize,o=this.buffer,l=t*i+i,f=this.cumulativeWeight,B=this.cumulativeWeightAdditive,M=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,f<1){const D=i*this._origIndex;this._mixBufferRegion(o,l,D,1-f,i)}B>0&&this._mixBufferRegionAdditive(o,l,this._addIndex*i,1,i);for(let D=i,G=i+i;D!==G;++D)if(o[D]!==o[D+i]){M.setValue(o,l);break}}saveOriginalState(){const t=this.binding,i=this.buffer,o=this.valueSize,l=o*this._origIndex;t.getValue(i,l);for(let f=o,B=l;f!==B;++f)i[f]=i[l+f%o];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,i=t+this.valueSize;for(let o=t;o<i;o++)this.buffer[o]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let o=0;o<this.valueSize;o++)this.buffer[i+o]=this.buffer[t+o]}_select(t,i,o,l,f){if(l>=.5)for(let B=0;B!==f;++B)t[i+B]=t[o+B]}_slerp(t,i,o,l){To.slerpFlat(t,i,t,i,t,o,l)}_slerpAdditive(t,i,o,l,f){const B=this._workIndex*f;To.multiplyQuaternionsFlat(t,B,t,i,t,o),To.slerpFlat(t,i,t,i,t,B,l)}_lerp(t,i,o,l,f){const B=1-l;for(let M=0;M!==f;++M){const D=i+M;t[D]=t[D]*B+t[o+M]*l}}_lerpAdditive(t,i,o,l,f){for(let B=0;B!==f;++B){const M=i+B;t[M]=t[M]+t[o+B]*l}}}const Qv=new RegExp("[\\[\\]\\.:\\/]","g"),iA="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",jv=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),_g=/(WCOD+)?/.source.replace("WCOD",iA),wg=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Wv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Kv=new RegExp("^"+jv+_g+wg+Wv+"$"),Xv=["material","materials","bones"];Object.assign(qs.prototype,{getValue:function(s,t){this.bind();const i=this._targetGroup.nCachedObjects_,o=this._bindings[i];o!==void 0&&o.getValue(s,t)},setValue:function(s,t){const i=this._bindings;for(let o=this._targetGroup.nCachedObjects_,l=i.length;o!==l;++o)i[o].setValue(s,t)},bind:function(){const s=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=s.length;t!==i;++t)s[t].bind()},unbind:function(){const s=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=s.length;t!==i;++t)s[t].unbind()}}),Object.assign(Fo,{Composite:qs,create:function(s,t,i){return s&&s.isAnimationObjectGroup?new Fo.Composite(s,t,i):new Fo(s,t,i)},sanitizeNodeName:function(s){return s.replace(/\s/g,"_").replace(Qv,"")},parseTrackName:function(s){const t=Kv.exec(s);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+s);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=i.nodeName&&i.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const l=i.nodeName.substring(o+1);Xv.indexOf(l)!==-1&&(i.nodeName=i.nodeName.substring(0,o),i.objectName=l)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+s);return i},findNode:function(s,t){if(!t||t===""||t==="."||t===-1||t===s.name||t===s.uuid)return s;if(s.skeleton){const i=s.skeleton.getBoneByName(t);if(i!==void 0)return i}if(s.children){const i=function(l){for(let f=0;f<l.length;f++){const B=l[f];if(B.name===t||B.uuid===t)return B;const M=i(B.children);if(M)return M}return null},o=i(s.children);if(o)return o}return null}}),Object.assign(Fo.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(s,t){s[t]=this.node[this.propertyName]},function(s,t){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)s[t++]=i[o]},function(s,t){s[t]=this.resolvedProperty[this.propertyIndex]},function(s,t){this.resolvedProperty.toArray(s,t)}],SetterByBindingTypeAndVersioning:[[function(s,t){this.targetObject[this.propertyName]=s[t]},function(s,t){this.targetObject[this.propertyName]=s[t],this.targetObject.needsUpdate=!0},function(s,t){this.targetObject[this.propertyName]=s[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(s,t){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=s[t++]},function(s,t){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=s[t++];this.targetObject.needsUpdate=!0},function(s,t){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=s[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(s,t){this.resolvedProperty[this.propertyIndex]=s[t]},function(s,t){this.resolvedProperty[this.propertyIndex]=s[t],this.targetObject.needsUpdate=!0},function(s,t){this.resolvedProperty[this.propertyIndex]=s[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(s,t){this.resolvedProperty.fromArray(s,t)},function(s,t){this.resolvedProperty.fromArray(s,t),this.targetObject.needsUpdate=!0},function(s,t){this.resolvedProperty.fromArray(s,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(s,t){this.bind(),this.getValue(s,t)},setValue:function(s,t){this.bind(),this.setValue(s,t)},bind:function(){let s=this.node;const t=this.parsedPath,i=t.objectName,o=t.propertyName;let l=t.propertyIndex;if(s||(s=Fo.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=s),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!s)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let D=t.objectIndex;switch(i){case"materials":if(!s.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!s.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);s=s.material.materials;break;case"bones":if(!s.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);s=s.skeleton.bones;for(let G=0;G<s.length;G++)if(s[G].name===D){D=G;break}break;default:if(s[i]===void 0)return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);s=s[i]}if(D!==void 0){if(s[D]===void 0)return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,s);s=s[D]}}const f=s[o];if(f===void 0){const D=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+D+"."+o+" but it wasn't found.",s)}let B=this.Versioning.None;this.targetObject=s,s.needsUpdate!==void 0?B=this.Versioning.NeedsUpdate:s.matrixWorldNeedsUpdate!==void 0&&(B=this.Versioning.MatrixWorldNeedsUpdate);let M=this.BindingType.Direct;if(l!==void 0){if(o==="morphTargetInfluences"){if(!s.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!s.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!s.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);s.morphTargetDictionary[l]!==void 0&&(l=s.morphTargetDictionary[l])}M=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=l}else f.fromArray!==void 0&&f.toArray!==void 0?(M=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(M=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=o;this.getValue=this.GetterByBindingType[M],this.setValue=this.SetterByBindingTypeAndVersioning[M][B]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Fo.prototype,{_getValue_unbound:Fo.prototype.getValue,_setValue_unbound:Fo.prototype.setValue});class rA{constructor(){this.uuid=qi.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let o=0,l=arguments.length;o!==l;++o)t[arguments[o].uuid]=o;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}add(){const t=this._objects,i=this._indicesByUUID,o=this._paths,l=this._parsedPaths,f=this._bindings,B=f.length;let M,D=t.length,G=this.nCachedObjects_;for(let $=0,ie=arguments.length;$!==ie;++$){const oe=arguments[$],he=oe.uuid;let ye=i[he];if(ye===void 0){ye=D++,i[he]=ye,t.push(oe);for(let we=0,be=B;we!==be;++we)f[we].push(new Fo(oe,o[we],l[we]))}else if(ye<G){M=t[ye];const we=--G,be=t[we];i[be.uuid]=ye,t[ye]=be,i[he]=we,t[we]=oe;for(let ke=0,Xe=B;ke!==Xe;++ke){const it=f[ke],lt=it[we];let pt=it[ye];it[ye]=lt,pt===void 0&&(pt=new Fo(oe,o[ke],l[ke])),it[we]=pt}}else t[ye]!==M&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=G}remove(){const t=this._objects,i=this._indicesByUUID,o=this._bindings,l=o.length;let f=this.nCachedObjects_;for(let B=0,M=arguments.length;B!==M;++B){const D=arguments[B],G=D.uuid,$=i[G];if($!==void 0&&$>=f){const ie=f++,oe=t[ie];i[oe.uuid]=$,t[$]=oe,i[G]=ie,t[ie]=D;for(let he=0,ye=l;he!==ye;++he){const we=o[he],be=we[ie],ke=we[$];we[$]=be,we[ie]=ke}}}this.nCachedObjects_=f}uncache(){const t=this._objects,i=this._indicesByUUID,o=this._bindings,l=o.length;let f=this.nCachedObjects_,B=t.length;for(let M=0,D=arguments.length;M!==D;++M){const G=arguments[M].uuid,$=i[G];if($!==void 0)if(delete i[G],$<f){const ie=--f,oe=t[ie],he=--B,ye=t[he];i[oe.uuid]=$,t[$]=oe,i[ye.uuid]=ie,t[ie]=ye,t.pop();for(let we=0,be=l;we!==be;++we){const ke=o[we],Xe=ke[ie],it=ke[he];ke[$]=Xe,ke[ie]=it,ke.pop()}}else{const ie=--B,oe=t[ie];ie>0&&(i[oe.uuid]=$),t[$]=oe,t.pop();for(let he=0,ye=l;he!==ye;++he){const we=o[he];we[$]=we[ie],we.pop()}}}this.nCachedObjects_=f}subscribe_(t,i){const o=this._bindingsIndicesByPath;let l=o[t];const f=this._bindings;if(l!==void 0)return f[l];const B=this._paths,M=this._parsedPaths,D=this._objects,G=D.length,$=this.nCachedObjects_,ie=new Array(G);l=f.length,o[t]=l,B.push(t),M.push(i),f.push(ie);for(let oe=$,he=D.length;oe!==he;++oe){const ye=D[oe];ie[oe]=new Fo(ye,t,i)}return ie}unsubscribe_(t){const i=this._bindingsIndicesByPath,o=i[t];if(o!==void 0){const l=this._paths,f=this._parsedPaths,B=this._bindings,M=B.length-1,D=B[M];i[t[M]]=o,B[o]=D,B.pop(),f[o]=f[M],f.pop(),l[o]=l[M],l.pop()}}}rA.prototype.isAnimationObjectGroup=!0;class Yv{constructor(t,i,o=null,l=i.blendMode){this._mixer=t,this._clip=i,this._localRoot=o,this.blendMode=l;const f=i.tracks,B=f.length,M=new Array(B),D={endingStart:2400,endingEnd:2400};for(let G=0;G!==B;++G){const $=f[G].createInterpolant(null);M[G]=$,$.settings=D}this._interpolantSettings=D,this._interpolants=M,this._propertyBindings=new Array(B),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,i){return this.loop=t,this.repetitions=i,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,i,o){if(t.fadeOut(i),this.fadeIn(i),o){const l=this._clip.duration,f=t._clip.duration,B=f/l,M=l/f;t.warp(1,B,i),this.warp(M,1,i)}return this}crossFadeTo(t,i,o){return t.crossFadeFrom(this,i,o)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,i,o){const l=this._mixer,f=l.time,B=this.timeScale;let M=this._timeScaleInterpolant;M===null&&(M=l._lendControlInterpolant(),this._timeScaleInterpolant=M);const D=M.parameterPositions,G=M.sampleValues;return D[0]=f,D[1]=f+o,G[0]=t/B,G[1]=i/B,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,i,o,l){if(!this.enabled)return void this._updateWeight(t);const f=this._startTime;if(f!==null){const D=(t-f)*o;if(D<0||o===0)return;this._startTime=null,i=o*D}i*=this._updateTimeScale(t);const B=this._updateTime(i),M=this._updateWeight(t);if(M>0){const D=this._interpolants,G=this._propertyBindings;switch(this.blendMode){case 2501:for(let $=0,ie=D.length;$!==ie;++$)D[$].evaluate(B),G[$].accumulateAdditive(M);break;case 2500:default:for(let $=0,ie=D.length;$!==ie;++$)D[$].evaluate(B),G[$].accumulate(l,M)}}}_updateWeight(t){let i=0;if(this.enabled){i=this.weight;const o=this._weightInterpolant;if(o!==null){const l=o.evaluate(t)[0];i*=l,t>o.parameterPositions[1]&&(this.stopFading(),l===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(t){let i=0;if(!this.paused){i=this.timeScale;const o=this._timeScaleInterpolant;o!==null&&(i*=o.evaluate(t)[0],t>o.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i))}return this._effectiveTimeScale=i,i}_updateTime(t){const i=this._clip.duration,o=this.loop;let l=this.time+t,f=this._loopCount;const B=o===2202;if(t===0)return f===-1?l:B&&(1&f)==1?i-l:l;if(o===2200){f===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(l>=i)l=i;else{if(!(l<0)){this.time=l;break e}l=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(f===-1&&(t>=0?(f=0,this._setEndings(!0,this.repetitions===0,B)):this._setEndings(this.repetitions===0,!0,B)),l>=i||l<0){const M=Math.floor(l/i);l-=i*M,f+=Math.abs(M);const D=this.repetitions-f;if(D<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,l=t>0?i:0,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(D===1){const G=t<0;this._setEndings(G,!G,B)}else this._setEndings(!1,!1,B);this._loopCount=f,this.time=l,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:M})}}else this.time=l;if(B&&(1&f)==1)return i-l}return l}_setEndings(t,i,o){const l=this._interpolantSettings;o?(l.endingStart=2401,l.endingEnd=2401):(l.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,l.endingEnd=i?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(t,i,o){const l=this._mixer,f=l.time;let B=this._weightInterpolant;B===null&&(B=l._lendControlInterpolant(),this._weightInterpolant=B);const M=B.parameterPositions,D=B.sampleValues;return M[0]=f,D[0]=i,M[1]=f+t,D[1]=o,this}}class Cg extends k{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,i){const o=t._localRoot||this._root,l=t._clip.tracks,f=l.length,B=t._propertyBindings,M=t._interpolants,D=o.uuid,G=this._bindingsByRootAndName;let $=G[D];$===void 0&&($={},G[D]=$);for(let ie=0;ie!==f;++ie){const oe=l[ie],he=oe.name;let ye=$[he];if(ye!==void 0)B[ie]=ye;else{if((ye=B[ie])!==void 0){ye._cacheIndex===null&&(++ye.referenceCount,this._addInactiveBinding(ye,D,he));continue}const we=i&&i._propertyBindings[ie].binding.parsedPath;++(ye=new nA(Fo.create(o,he,we),oe.ValueTypeName,oe.getValueSize())).referenceCount,this._addInactiveBinding(ye,D,he),B[ie]=ye}M[ie].resultBuffer=ye.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const o=(t._localRoot||this._root).uuid,l=t._clip.uuid,f=this._actionsByClip[l];this._bindAction(t,f&&f.knownActions[0]),this._addInactiveAction(t,l,o)}const i=t._propertyBindings;for(let o=0,l=i.length;o!==l;++o){const f=i[o];f.useCount++==0&&(this._lendBinding(f),f.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const i=t._propertyBindings;for(let o=0,l=i.length;o!==l;++o){const f=i[o];--f.useCount==0&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const i=t._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(t,i,o){const l=this._actions,f=this._actionsByClip;let B=f[i];if(B===void 0)B={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,f[i]=B;else{const M=B.knownActions;t._byClipCacheIndex=M.length,M.push(t)}t._cacheIndex=l.length,l.push(t),B.actionByRoot[o]=t}_removeInactiveAction(t){const i=this._actions,o=i[i.length-1],l=t._cacheIndex;o._cacheIndex=l,i[l]=o,i.pop(),t._cacheIndex=null;const f=t._clip.uuid,B=this._actionsByClip,M=B[f],D=M.knownActions,G=D[D.length-1],$=t._byClipCacheIndex;G._byClipCacheIndex=$,D[$]=G,D.pop(),t._byClipCacheIndex=null,delete M.actionByRoot[(t._localRoot||this._root).uuid],D.length===0&&delete B[f],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const i=t._propertyBindings;for(let o=0,l=i.length;o!==l;++o){const f=i[o];--f.referenceCount==0&&this._removeInactiveBinding(f)}}_lendAction(t){const i=this._actions,o=t._cacheIndex,l=this._nActiveActions++,f=i[l];t._cacheIndex=l,i[l]=t,f._cacheIndex=o,i[o]=f}_takeBackAction(t){const i=this._actions,o=t._cacheIndex,l=--this._nActiveActions,f=i[l];t._cacheIndex=l,i[l]=t,f._cacheIndex=o,i[o]=f}_addInactiveBinding(t,i,o){const l=this._bindingsByRootAndName,f=this._bindings;let B=l[i];B===void 0&&(B={},l[i]=B),B[o]=t,t._cacheIndex=f.length,f.push(t)}_removeInactiveBinding(t){const i=this._bindings,o=t.binding,l=o.rootNode.uuid,f=o.path,B=this._bindingsByRootAndName,M=B[l],D=i[i.length-1],G=t._cacheIndex;D._cacheIndex=G,i[G]=D,i.pop(),delete M[f],Object.keys(M).length===0&&delete B[l]}_lendBinding(t){const i=this._bindings,o=t._cacheIndex,l=this._nActiveBindings++,f=i[l];t._cacheIndex=l,i[l]=t,f._cacheIndex=o,i[o]=f}_takeBackBinding(t){const i=this._bindings,o=t._cacheIndex,l=--this._nActiveBindings,f=i[l];t._cacheIndex=l,i[l]=t,f._cacheIndex=o,i[o]=f}_lendControlInterpolant(){const t=this._controlInterpolants,i=this._nActiveControlInterpolants++;let o=t[i];return o===void 0&&((o=new Jr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=i,t[i]=o),o}_takeBackControlInterpolant(t){const i=this._controlInterpolants,o=t.__cacheIndex,l=--this._nActiveControlInterpolants,f=i[l];t.__cacheIndex=l,i[l]=t,f.__cacheIndex=o,i[o]=f}clipAction(t,i,o){const l=i||this._root,f=l.uuid;let B=typeof t=="string"?Qd.findByName(l,t):t;const M=B!==null?B.uuid:t,D=this._actionsByClip[M];let G=null;if(o===void 0&&(o=B!==null?B.blendMode:2500),D!==void 0){const ie=D.actionByRoot[f];if(ie!==void 0&&ie.blendMode===o)return ie;G=D.knownActions[0],B===null&&(B=G._clip)}if(B===null)return null;const $=new Yv(this,B,i,o);return this._bindAction($,G),this._addInactiveAction($,M,f),$}existingAction(t,i){const o=i||this._root,l=o.uuid,f=typeof t=="string"?Qd.findByName(o,t):t,B=f?f.uuid:t,M=this._actionsByClip[B];return M!==void 0&&M.actionByRoot[l]||null}stopAllAction(){const t=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const i=this._actions,o=this._nActiveActions,l=this.time+=t,f=Math.sign(t),B=this._accuIndex^=1;for(let G=0;G!==o;++G)i[G]._update(l,t,f,B);const M=this._bindings,D=this._nActiveBindings;for(let G=0;G!==D;++G)M[G].apply(B);return this}setTime(t){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const i=this._actions,o=t.uuid,l=this._actionsByClip,f=l[o];if(f!==void 0){const B=f.knownActions;for(let M=0,D=B.length;M!==D;++M){const G=B[M];this._deactivateAction(G);const $=G._cacheIndex,ie=i[i.length-1];G._cacheIndex=null,G._byClipCacheIndex=null,ie._cacheIndex=$,i[$]=ie,i.pop(),this._removeInactiveBindingsForAction(G)}delete l[o]}}uncacheRoot(t){const i=t.uuid,o=this._actionsByClip;for(const f in o){const B=o[f].actionByRoot[i];B!==void 0&&(this._deactivateAction(B),this._removeInactiveAction(B))}const l=this._bindingsByRootAndName[i];if(l!==void 0)for(const f in l){const B=l[f];B.restoreOriginalState(),this._removeInactiveBinding(B)}}uncacheAction(t,i){const o=this.existingAction(t,i);o!==null&&(this._deactivateAction(o),this._removeInactiveAction(o))}}Cg.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Xl{constructor(t){typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Xl(this.value.clone===void 0?this.value:this.value.clone())}}rd.prototype=Object.assign(Object.create(ei.prototype),{constructor:rd,isInstancedInterleavedBuffer:!0,copy:function(s){return ei.prototype.copy.call(this,s),this.meshPerAttribute=s.meshPerAttribute,this},clone:function(s){const t=ei.prototype.clone.call(this,s);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(s){const t=ei.prototype.toJSON.call(this,s);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(sd.prototype,"needsUpdate",{set:function(s){s===!0&&this.version++}}),Object.assign(sd.prototype,{isGLBufferAttribute:!0,setBuffer:function(s){return this.buffer=s,this},setType:function(s,t){return this.type=s,this.elementSize=t,this},setItemSize:function(s){return this.itemSize=s,this},setCount:function(s){return this.count=s,this}}),Object.assign(rh.prototype,{set:function(s,t){this.ray.set(s,t)},setFromCamera:function(s,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(s.x,s.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(s.x,s.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)},intersectObject:function(s,t=!1,i=[]){return od(s,this,i,t),i.sort(Dc),i},intersectObjects:function(s,t=!1,i=[]){for(let o=0,l=s.length;o<l;o++)od(s[o],this,i,t);return i.sort(Dc),i}});class Mg{constructor(t=1,i=0,o=0){return this.radius=t,this.phi=i,this.theta=o,this}set(t,i,o){return this.radius=t,this.phi=i,this.theta=o,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,i,o){return this.radius=Math.sqrt(t*t+i*i+o*o),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,o),this.phi=Math.acos(qi.clamp(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class sA{constructor(t=1,i=0,o=0){return this.radius=t,this.theta=i,this.y=o,this}set(t,i,o){return this.radius=t,this.theta=i,this.y=o,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,i,o){return this.radius=Math.sqrt(t*t+o*o),this.theta=Math.atan2(t,o),this.y=i,this}clone(){return new this.constructor().copy(this)}}const Tg=new Qn;class kh{constructor(t=new Qn(1/0,1/0),i=new Qn(-1/0,-1/0)){this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromPoints(t){this.makeEmpty();for(let i=0,o=t.length;i<o;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const o=Tg.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return t===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Qn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Qn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,i){return i===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),i=new Qn),i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,i){return i===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),i=new Qn),i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Tg.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}kh.prototype.isBox2=!0;const Sg=new Je,Vp=new Je;class Qp{constructor(t=new Je,i=new Je){this.start=t,this.end=i}set(t,i){return this.start.copy(t),this.end.copy(i),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Je),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Je),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,i){return i===void 0&&(console.warn("THREE.Line3: .at() target is now required"),i=new Je),this.delta(i).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,i){Sg.subVectors(t,this.start),Vp.subVectors(this.end,this.start);const o=Vp.dot(Vp);let l=Vp.dot(Sg)/o;return i&&(l=qi.clamp(l,0,1)),l}closestPointToPoint(t,i,o){const l=this.closestPointToPointParameter(t,i);return o===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),o=new Je),this.delta(o).multiplyScalar(l).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}(sh.prototype=Object.create(I.prototype)).constructor=sh,sh.prototype.isImmediateRenderObject=!0;const Ig=new Je;class qv extends I{constructor(t,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const o=new U,l=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let B=0,M=1;B<32;B++,M++){const D=B/32*Math.PI*2,G=M/32*Math.PI*2;l.push(Math.cos(D),Math.sin(D),1,Math.cos(G),Math.sin(G),1)}o.setAttribute("position",new P(l,3));const f=new ta({fog:!1,toneMapped:!1});this.cone=new er(o,f),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,i=t*Math.tan(this.light.angle);this.cone.scale.set(i,i,t),Ig.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ig),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Zc=new Je,jp=new ir,Rg=new ir;class Bg extends er{constructor(t){const i=Pf(t),o=new U,l=[],f=[],B=new Fi(0,0,1),M=new Fi(0,1,0);for(let D=0;D<i.length;D++){const G=i[D];G.parent&&G.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),f.push(B.r,B.g,B.b),f.push(M.r,M.g,M.b))}o.setAttribute("position",new P(l,3)),o.setAttribute("color",new P(f,3)),super(o,new ta({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=i,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const i=this.bones,o=this.geometry,l=o.getAttribute("position");Rg.copy(this.root.matrixWorld).invert();for(let f=0,B=0;f<i.length;f++){const M=i[f];M.parent&&M.parent.isBone&&(jp.multiplyMatrices(Rg,M.matrixWorld),Zc.setFromMatrixPosition(jp),l.setXYZ(B,Zc.x,Zc.y,Zc.z),jp.multiplyMatrices(Rg,M.parent.matrixWorld),Zc.setFromMatrixPosition(jp),l.setXYZ(B+1,Zc.x,Zc.y,Zc.z),B+=2)}o.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class oA extends te{constructor(t,i,o){super(new kd(i,4,2),new xc({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=o,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Wp=new Je,Jd=new Fi,Lg=new Fi;class Kp extends I{constructor(t,i,o){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=o;const l=new Fd(i);l.rotateY(.5*Math.PI),this.material=new xc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const f=l.getAttribute("position"),B=new Float32Array(3*f.count);l.setAttribute("color",new y(B,3)),this.add(new te(l,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const i=t.geometry.getAttribute("color");Jd.copy(this.light.color),Lg.copy(this.light.groundColor);for(let o=0,l=i.count;o<l;o++){const f=o<l/2?Jd:Lg;i.setXYZ(o,f.r,f.g,f.b)}i.needsUpdate=!0}t.lookAt(Wp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ca extends er{constructor(t=10,i=10,o=4473924,l=8947848){o=new Fi(o),l=new Fi(l);const f=i/2,B=t/i,M=t/2,D=[],G=[];for(let ie=0,oe=0,he=-M;ie<=i;ie++,he+=B){D.push(-M,0,he,M,0,he),D.push(he,0,-M,he,0,M);const ye=ie===f?o:l;ye.toArray(G,oe),oe+=3,ye.toArray(G,oe),oe+=3,ye.toArray(G,oe),oe+=3,ye.toArray(G,oe),oe+=3}const $=new U;$.setAttribute("position",new P(D,3)),$.setAttribute("color",new P(G,3)),super($,new ta({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Uu extends er{constructor(t=10,i=16,o=8,l=64,f=4473924,B=8947848){f=new Fi(f),B=new Fi(B);const M=[],D=[];for(let $=0;$<=i;$++){const ie=$/i*(2*Math.PI),oe=Math.sin(ie)*t,he=Math.cos(ie)*t;M.push(0,0,0),M.push(oe,0,he);const ye=1&$?f:B;D.push(ye.r,ye.g,ye.b),D.push(ye.r,ye.g,ye.b)}for(let $=0;$<=o;$++){const ie=1&$?f:B,oe=t-t/o*$;for(let he=0;he<l;he++){let ye=he/l*(2*Math.PI),we=Math.sin(ye)*oe,be=Math.cos(ye)*oe;M.push(we,0,be),D.push(ie.r,ie.g,ie.b),ye=(he+1)/l*(2*Math.PI),we=Math.sin(ye)*oe,be=Math.cos(ye)*oe,M.push(we,0,be),D.push(ie.r,ie.g,ie.b)}}const G=new U;G.setAttribute("position",new P(M,3)),G.setAttribute("color",new P(D,3)),super(G,new ta({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Xp=new Je,Ec=new Je,Uh=new Je;class Gh extends I{constructor(t,i,o){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,i===void 0&&(i=1);let l=new U;l.setAttribute("position",new P([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));const f=new ta({fog:!1,toneMapped:!1});this.lightPlane=new zi(l,f),this.add(this.lightPlane),(l=new U).setAttribute("position",new P([0,0,0,0,0,1],3)),this.targetLine=new zi(l,f),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Xp.setFromMatrixPosition(this.light.matrixWorld),Ec.setFromMatrixPosition(this.light.target.matrixWorld),Uh.subVectors(Ec,Xp),this.lightPlane.lookAt(Ec),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ec),this.targetLine.scale.z=Uh.length()}}const bc=new Je,Gs=new q;class Zd extends er{constructor(t){function i(ye,we,be){o(ye,be),o(we,be)}function o(ye,we){B.push(0,0,0),M.push(we.r,we.g,we.b),D[ye]===void 0&&(D[ye]=[]),D[ye].push(B.length/3-1)}const l=new U,f=new ta({color:16777215,vertexColors:!0,toneMapped:!1}),B=[],M=[],D={},G=new Fi(16755200),$=new Fi(16711680),ie=new Fi(43775),oe=new Fi(16777215),he=new Fi(3355443);i("n1","n2",G),i("n2","n4",G),i("n4","n3",G),i("n3","n1",G),i("f1","f2",G),i("f2","f4",G),i("f4","f3",G),i("f3","f1",G),i("n1","f1",G),i("n2","f2",G),i("n3","f3",G),i("n4","f4",G),i("p","n1",$),i("p","n2",$),i("p","n3",$),i("p","n4",$),i("u1","u2",ie),i("u2","u3",ie),i("u3","u1",ie),i("c","t",oe),i("p","c",he),i("cn1","cn2",he),i("cn3","cn4",he),i("cf1","cf2",he),i("cf3","cf4",he),l.setAttribute("position",new P(B,3)),l.setAttribute("color",new P(M,3)),super(l,f),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=D,this.update()}update(){const t=this.geometry,i=this.pointMap;Gs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),no("c",i,t,Gs,0,0,-1),no("t",i,t,Gs,0,0,1),no("n1",i,t,Gs,-1,-1,-1),no("n2",i,t,Gs,1,-1,-1),no("n3",i,t,Gs,-1,1,-1),no("n4",i,t,Gs,1,1,-1),no("f1",i,t,Gs,-1,-1,1),no("f2",i,t,Gs,1,-1,1),no("f3",i,t,Gs,-1,1,1),no("f4",i,t,Gs,1,1,1),no("u1",i,t,Gs,.7,1.1,-1),no("u2",i,t,Gs,-.7,1.1,-1),no("u3",i,t,Gs,0,2,-1),no("cf1",i,t,Gs,-1,0,1),no("cf2",i,t,Gs,1,0,1),no("cf3",i,t,Gs,0,-1,1),no("cf4",i,t,Gs,0,1,1),no("cn1",i,t,Gs,-1,0,-1),no("cn2",i,t,Gs,1,0,-1),no("cn3",i,t,Gs,0,-1,-1),no("cn4",i,t,Gs,0,1,-1),t.getAttribute("position").needsUpdate=!0}}const $d=new $o;class ef extends er{constructor(t,i=16776960){const o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new Float32Array(24),f=new U;f.setIndex(new y(o,1)),f.setAttribute("position",new y(l,3)),super(f,new ta({color:i,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&$d.setFromObject(this.object),$d.isEmpty())return;const i=$d.min,o=$d.max,l=this.geometry.attributes.position,f=l.array;f[0]=o.x,f[1]=o.y,f[2]=o.z,f[3]=i.x,f[4]=o.y,f[5]=o.z,f[6]=i.x,f[7]=i.y,f[8]=o.z,f[9]=o.x,f[10]=i.y,f[11]=o.z,f[12]=o.x,f[13]=o.y,f[14]=i.z,f[15]=i.x,f[16]=o.y,f[17]=i.z,f[18]=i.x,f[19]=i.y,f[20]=i.z,f[21]=o.x,f[22]=i.y,f[23]=i.z,l.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return er.prototype.copy.call(this,t),this.object=t.object,this}}class tf extends er{constructor(t,i=16776960){const o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new U;l.setIndex(new y(o,1)),l.setAttribute("position",new P([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(l,new ta({color:i,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class Yp extends zi{constructor(t,i=1,o=16776960){const l=o,f=new U;f.setAttribute("position",new P([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),f.computeBoundingSphere(),super(f,new ta({color:l,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=i;const B=new U;B.setAttribute("position",new P([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),B.computeBoundingSphere(),this.add(new te(B,new xc({color:l,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let i=-this.plane.constant;Math.abs(i)<1e-8&&(i=1e-8),this.scale.set(.5*this.size,.5*this.size,i),this.children[0].material.side=i<0?Js:Ns,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const Dg=new Je;let nf,Pg;class aA extends I{constructor(t=new Je(0,0,1),i=new Je(0,0,0),o=1,l=16776960,f=.2*o,B=.2*f){super(),this.type="ArrowHelper",nf===void 0&&((nf=new U).setAttribute("position",new P([0,0,0,0,1,0],3)),(Pg=new Xc(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(i),this.line=new zi(nf,new ta({color:l,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new te(Pg,new xc({color:l,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(o,f,B)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Dg.set(t.z,0,-t.x).normalize();const i=Math.acos(t.y);this.quaternion.setFromAxisAngle(Dg,i)}}setLength(t,i=.2*t,o=.2*i){this.line.scale.set(1,Math.max(1e-4,t-i),1),this.line.updateMatrix(),this.cone.scale.set(o,i,o),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class rf extends er{constructor(t=1){const i=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],o=new U;o.setAttribute("position",new P(i,3)),o.setAttribute("color",new P([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(o,new ta({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const sf=new Float32Array(1),lA=new Int32Array(sf.buffer),cA={toHalfFloat:function(s){sf[0]=s;const t=lA[0];let i=t>>16&32768,o=t>>12&2047;const l=t>>23&255;return l<103?i:l>142?(i|=31744,i|=(l==255?0:1)&&8388607&t):l<113?(o|=2048,i|=(o>>114-l)+(o>>113-l&1)):(i|=l-112<<10|o>>1,i+=1&o)}},Gu=4,_c=8,El=Math.pow(2,_c),uA=[.125,.215,.35,.446,.526,.582],Og=_c-Gu+1+uA.length,bl={[lo]:0,[Zs]:1,[Rs]:2,[_m]:3,[wm]:4,[Cm]:5,[yu]:6},wc=new xc({side:Js,depthWrite:!1,depthTest:!1}),Hh=new te(new Cu,wc),qp=new Nh,{_lodPlanes:of,_sizeLods:af,_sigmas:Cc}=function(){const s=[],t=[],i=[];let o=_c;for(let l=0;l<Og;l++){const f=Math.pow(2,o);t.push(f);let B=1/f;l>_c-Gu?B=uA[l-_c+Gu-1]:l==0&&(B=0),i.push(B);const M=1/(f-1),D=-M/2,G=1+M/2,$=[D,D,G,D,G,G,D,D,G,G,D,G],ie=new Float32Array(108),oe=new Float32Array(72),he=new Float32Array(36);for(let we=0;we<6;we++){const be=we%3*2/3-1,ke=we>2?0:-1,Xe=[be,ke,0,be+2/3,ke,0,be+2/3,ke+1,0,be,ke,0,be+2/3,ke+1,0,be,ke+1,0];ie.set(Xe,18*we),oe.set($,12*we);const it=[we,we,we,we,we,we];he.set(it,6*we)}const ye=new U;ye.setAttribute("position",new y(ie,3)),ye.setAttribute("uv",new y(oe,2)),ye.setAttribute("faceIndex",new y(he,1)),s.push(ye),o>Gu&&o--}return{_lodPlanes:s,_sizeLods:t,_sigmas:i}}(),Fg=new Fi;let Jp=null;const Yl=(1+Math.sqrt(5))/2,zh=1/Yl,Vh=[new Je(1,1,1),new Je(-1,1,1),new Je(1,1,-1),new Je(-1,1,-1),new Je(0,Yl,zh),new Je(0,Yl,-zh),new Je(zh,0,Yl),new Je(-zh,0,Yl),new Je(Yl,zh,0),new Je(-Yl,zh,0)];class hA{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(i){const o=new Float32Array(i),l=new Je(0,1,0);return new Bu({name:"SphericalGaussianBlur",defines:{n:i},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l},inputEncoding:{value:bl[lo]},outputEncoding:{value:bl[lo]}},vertexShader:`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`,fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ll,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,o=.1,l=100){Jp=this._renderer.getRenderTarget();const f=this._allocateTargets();return this._sceneToCubeUV(t,o,l,f),i>0&&this._blur(f,0,0,i),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=kf(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=Nf(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let t=0;t<of.length;t++)of[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Jp),t.scissorTest=!1,oh(t,0,0,t.width,t.height)}_fromTexture(t){Jp=this._renderer.getRenderTarget();const i=this._allocateTargets(t);return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(t){const i={magFilter:mo,minFilter:mo,generateMipmaps:!1,type:xa,format:mh,encoding:function(l){return l!==void 0&&l.type===xa&&(l.encoding===lo||l.encoding===Zs||l.encoding===yu)}(t)?t.encoding:Rs,depthBuffer:!1},o=Ff(i);return o.depthBuffer=!t,this._pingPongRenderTarget=Ff(i),o}_compileMaterial(t){const i=new te(of[0],t);this._renderer.compile(i,qp)}_sceneToCubeUV(t,i,o,l){const f=new Q(90,1,i,o),B=[1,-1,1,1,1,1],M=[1,1,1,-1,-1,-1],D=this._renderer,G=D.autoClear,$=D.outputEncoding,ie=D.toneMapping;D.getClearColor(Fg),D.toneMapping=Ka,D.outputEncoding=lo,D.autoClear=!1;let oe=!1;const he=t.background;if(he){if(he.isColor){wc.color.copy(he).convertSRGBToLinear(),t.background=null;const ye=Of(wc.color);wc.opacity=ye,oe=!0}}else{wc.color.copy(Fg).convertSRGBToLinear();const ye=Of(wc.color);wc.opacity=ye,oe=!0}for(let ye=0;ye<6;ye++){const we=ye%3;we==0?(f.up.set(0,B[ye],0),f.lookAt(M[ye],0,0)):we==1?(f.up.set(0,0,B[ye]),f.lookAt(0,M[ye],0)):(f.up.set(0,B[ye],0),f.lookAt(0,0,M[ye])),oh(l,we*El,ye>2?El:0,El,El),D.setRenderTarget(l),oe&&D.render(Hh,f),D.render(t,f)}D.toneMapping=ie,D.outputEncoding=$,D.autoClear=G}_textureToCubeUV(t,i){const o=this._renderer;t.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=kf()):this._equirectShader==null&&(this._equirectShader=Nf());const l=t.isCubeTexture?this._cubemapShader:this._equirectShader,f=new te(of[0],l),B=l.uniforms;B.envMap.value=t,t.isCubeTexture||B.texelSize.value.set(1/t.image.width,1/t.image.height),B.inputEncoding.value=bl[t.encoding],B.outputEncoding.value=bl[i.texture.encoding],oh(i,0,0,3*El,2*El),o.setRenderTarget(i),o.render(f,qp)}_applyPMREM(t){const i=this._renderer,o=i.autoClear;i.autoClear=!1;for(let l=1;l<Og;l++){const f=Math.sqrt(Cc[l]*Cc[l]-Cc[l-1]*Cc[l-1]),B=Vh[(l-1)%Vh.length];this._blur(t,l-1,l,f,B)}i.autoClear=o}_blur(t,i,o,l,f){const B=this._pingPongRenderTarget;this._halfBlur(t,B,i,o,l,"latitudinal",f),this._halfBlur(B,t,o,o,l,"longitudinal",f)}_halfBlur(t,i,o,l,f,B,M){const D=this._renderer,G=this._blurMaterial;B!=="latitudinal"&&B!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const $=new te(of[l],G),ie=G.uniforms,oe=af[o]-1,he=isFinite(f)?Math.PI/(2*oe):2*Math.PI/39,ye=f/he,we=isFinite(f)?1+Math.floor(3*ye):20;we>20&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${we} samples when the maximum is set to 20`);const be=[];let ke=0;for(let it=0;it<20;++it){const lt=it/ye,pt=Math.exp(-lt*lt/2);be.push(pt),it==0?ke+=pt:it<we&&(ke+=2*pt)}for(let it=0;it<be.length;it++)be[it]=be[it]/ke;ie.envMap.value=t.texture,ie.samples.value=we,ie.weights.value=be,ie.latitudinal.value=B==="latitudinal",M&&(ie.poleAxis.value=M),ie.dTheta.value=he,ie.mipInt.value=_c-o,ie.inputEncoding.value=bl[t.texture.encoding],ie.outputEncoding.value=bl[t.texture.encoding];const Xe=af[l];oh(i,3*Math.max(0,El-2*Xe),(l===0?0:2*El)+2*Xe*(l>_c-Gu?l-_c+Gu:0),3*Xe,2*Xe),D.setRenderTarget(i),D.render($,qp)}}js.create=function(s,t){return console.log("THREE.Curve.create() has been deprecated"),s.prototype=Object.create(js.prototype),s.prototype.constructor=s,s.prototype.getPoint=t,s},Kd.prototype.fromPoints=function(s){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(s)},ca.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Bg.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Zr.prototype.extractUrlBase=function(s){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),gg.extractUrlBase(s)},Zr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},kh.prototype.center=function(s){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(s)},kh.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},kh.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)},kh.prototype.size=function(s){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(s)},$o.prototype.center=function(s){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(s)},$o.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},$o.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)},$o.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)},$o.prototype.size=function(s){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(s)},ea.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Cd.prototype.setFromMatrix=function(s){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(s)},Qp.prototype.center=function(s){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(s)},qi.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},qi.nearestPowerOfTwo=function(s){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),qi.floorPowerOfTwo(s)},qi.nextPowerOfTwo=function(s){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),qi.ceilPowerOfTwo(s)},cs.prototype.flattenToArrayOffset=function(s,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,t)},cs.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)},cs.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},cs.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)},cs.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},cs.prototype.getInverse=function(s){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()},ir.prototype.extractPosition=function(s){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(s)},ir.prototype.flattenToArrayOffset=function(s,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,t)},ir.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Je().setFromMatrixColumn(this,3)},ir.prototype.setRotationFromQuaternion=function(s){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(s)},ir.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},ir.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)},ir.prototype.multiplyVector4=function(s){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)},ir.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},ir.prototype.rotateAxis=function(s){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),s.transformDirection(this)},ir.prototype.crossVector=function(s){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)},ir.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},ir.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},ir.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},ir.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},ir.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},ir.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)},ir.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},ir.prototype.makeFrustum=function(s,t,i,o,l,f){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(s,t,o,i,l,f)},ir.prototype.getInverse=function(s){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()},fl.prototype.isIntersectionLine=function(s){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(s)},To.prototype.multiplyVector3=function(s){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),s.applyQuaternion(this)},To.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ql.prototype.isIntersectionBox=function(s){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)},Ql.prototype.isIntersectionPlane=function(s){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(s)},Ql.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)},vo.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},vo.prototype.barycoordFromPoint=function(s,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(s,t)},vo.prototype.midpoint=function(s){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(s)},vo.prototypenormal=function(s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(s)},vo.prototype.plane=function(s){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(s)},vo.barycoordFromPoint=function(s,t,i,o,l){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),vo.getBarycoord(s,t,i,o,l)},vo.normal=function(s,t,i,o){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),vo.getNormal(s,t,i,o)},qc.prototype.extractAllPoints=function(s){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(s)},qc.prototype.extrude=function(s){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Al(this,s)},qc.prototype.makeGeometry=function(s){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Nd(this,s)},Qn.prototype.fromAttribute=function(s,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,t,i)},Qn.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)},Qn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Je.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Je.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Je.prototype.getPositionFromMatrix=function(s){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(s)},Je.prototype.getScaleFromMatrix=function(s){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(s)},Je.prototype.getColumnFromMatrix=function(s,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,s)},Je.prototype.applyProjection=function(s){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(s)},Je.prototype.fromAttribute=function(s,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,t,i)},Je.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)},Je.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},os.prototype.fromAttribute=function(s,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,t,i)},os.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},I.prototype.getChildByName=function(s){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(s)},I.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},I.prototype.translate=function(s,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,s)},I.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},I.prototype.applyMatrix=function(s){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)},Object.defineProperties(I.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(s){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=s}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),te.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(te.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Mi.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(js.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(s){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=s}}),Q.prototype.setLens=function(s,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(s)},Object.defineProperties(xl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(s){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=s}},shadowCameraLeft:{set:function(s){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=s}},shadowCameraRight:{set:function(s){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=s}},shadowCameraTop:{set:function(s){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=s}},shadowCameraBottom:{set:function(s){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=s}},shadowCameraNear:{set:function(s){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=s}},shadowCameraFar:{set:function(s){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=s}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(s){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=s}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(s){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=s}},shadowMapHeight:{set:function(s){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=s}}}),Object.defineProperties(y.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Eu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Eu)}}}),y.prototype.setDynamic=function(s){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?Eu:yh),this},y.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},y.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},U.prototype.addIndex=function(s){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(s)},U.prototype.addAttribute=function(s,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?s==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(s,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(s,new y(arguments[1],arguments[2])))},U.prototype.addDrawCall=function(s,t,i){i!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(s,t)},U.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},U.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},U.prototype.removeAttribute=function(s){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(s)},U.prototype.applyMatrix=function(s){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)},Object.defineProperties(U.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ba.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(s){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=s}}}),Object.defineProperties(rh.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(s){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=s}}}),Object.defineProperties(ei.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Eu},set:function(s){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(s)}}}),ei.prototype.setDynamic=function(s){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?Eu:yh),this},ei.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Al.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Al.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Al.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},gp.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Xl.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(h.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Fi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(s){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=s===1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(s){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=s}}}),Object.defineProperties(ur.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(s){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=s}}}),Object.defineProperties(V.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(s){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=s}}}),Xn.prototype.clearTarget=function(s,t,i,o){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(s),this.clear(t,i,o)},Xn.prototype.animate=function(s){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(s)},Xn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Xn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Xn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Xn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Xn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Xn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Xn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Xn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Xn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Xn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Xn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Xn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Xn.prototype.enableScissorTest=function(s){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(s)},Xn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Xn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Xn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Xn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Xn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Xn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Xn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Xn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Xn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Xn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Xn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=s}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=s}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(s){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=s===!0?Zs:lo}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(ut.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(aa.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=s}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=s}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=s}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=s}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(s){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=s}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(s){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=s}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(s){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=s}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(s){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=s}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(s){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=s}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(s){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=s}}}),Eg.prototype.load=function(s){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new xg().load(s,function(i){t.setBuffer(i)}),this},tA.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},hp.prototype.updateCubeMap=function(s,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(s,t)},hp.prototype.clear=function(s,t,i,o){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(s,t,i,o)},Uc.crossOrigin=void 0,Uc.loadTexture=function(s,t,i,o){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const l=new Qa;l.setCrossOrigin(this.crossOrigin);const f=l.load(s,i,void 0,o);return t&&(f.mapping=t),f},Uc.loadTextureCube=function(s,t,i,o){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const l=new O0;l.setCrossOrigin(this.crossOrigin);const f=l.load(s,i,void 0,o);return t&&(f.mapping=t),f},Uc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Uc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const ga={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"127"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="127"),d.ACESFilmicToneMapping=rc,d.AddEquation=nc,d.AddOperation=ya,d.AdditiveAnimationBlendMode=2501,d.AdditiveBlending=ld,d.AlphaFormat=Fc,d.AlwaysDepth=Qf,d.AlwaysStencilFunc=Yi,d.AmbientLight=pg,d.AmbientLightProbe=q0,d.AnimationClip=Qd,d.AnimationLoader=Nv,d.AnimationMixer=Cg,d.AnimationObjectGroup=rA,d.AnimationUtils=Xs,d.ArcCurve=ng,d.ArrayCamera=Qm,d.ArrowHelper=aA,d.Audio=Eg,d.AudioAnalyser=tA,d.AudioContext=yg,d.AudioListener=Hv,d.AudioLoader=xg,d.AxesHelper=rf,d.AxisHelper=function(s){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new rf(s)},d.BackSide=Js,d.BasicDepthPacking=3200,d.BasicShadowMap=0,d.BinaryTextureLoader=function(s){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new _o(s)},d.Bone=Ti,d.BooleanKeyframeTrack=Lu,d.BoundingBoxHelper=function(s,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ef(s,t)},d.Box2=kh,d.Box3=$o,d.Box3Helper=tf,d.BoxBufferGeometry=Cu,d.BoxGeometry=Cu,d.BoxHelper=ef,d.BufferAttribute=y,d.BufferGeometry=U,d.BufferGeometryLoader=W0,d.ByteType=Xa,d.Cache=Pu,d.Camera=q,d.CameraHelper=Zd,d.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},d.CanvasTexture=Kc,d.CatmullRomCurve3=og,d.CineonToneMapping=Si,d.CircleBufferGeometry=Pd,d.CircleGeometry=Pd,d.ClampToEdgeWrapping=Yo,d.Clock=$0,d.Color=Fi,d.ColorKeyframeTrack=tg,d.CompressedTexture=bp,d.CompressedTextureLoader=Ds,d.ConeBufferGeometry=Wl,d.ConeGeometry=Wl,d.CubeCamera=hp,d.CubeReflectionMapping=Da,d.CubeRefractionMapping=sc,d.CubeTexture=Rh,d.CubeTextureLoader=O0,d.CubeUVReflectionMapping=es,d.CubeUVRefractionMapping=ko,d.CubicBezierCurve=Np,d.CubicBezierCurve3=ag,d.CubicInterpolant=hs,d.CullFaceBack=wo,d.CullFaceFront=ad,d.CullFaceFrontBack=3,d.CullFaceNone=ia,d.Curve=js,d.CurvePath=N0,d.CustomBlending=Uf,d.CustomToneMapping=dh,d.CylinderBufferGeometry=Xc,d.CylinderGeometry=Xc,d.Cylindrical=sA,d.DataTexture=Bh,d.DataTexture2DArray=Hm,d.DataTexture3D=zm,d.DataTextureLoader=_o,d.DataUtils=cA,d.DecrementStencilOp=7683,d.DecrementWrapStencilOp=34056,d.DefaultLoadingManager=P0,d.DepthFormat=qo,d.DepthStencilFormat=sa,d.DepthTexture=_p,d.DirectionalLight=fg,d.DirectionalLightHelper=Gh,d.DiscreteInterpolant=vr,d.DodecahedronBufferGeometry=Od,d.DodecahedronGeometry=Od,d.DoubleSide=fu,d.DstAlphaFactor=Is,d.DstColorFactor=On,d.DynamicBufferAttribute=function(s,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new y(s,t).setUsage(Eu)},d.DynamicCopyUsage=35050,d.DynamicDrawUsage=Eu,d.DynamicReadUsage=35049,d.EdgesGeometry=eg,d.EdgesHelper=function(s,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new er(new eg(s.geometry),new ta({color:t!==void 0?t:16777215}))},d.EllipseCurve=jd,d.EqualDepth=Nl,d.EqualStencilFunc=514,d.EquirectangularReflectionMapping=fh,d.EquirectangularRefractionMapping=Ws,d.Euler=wu,d.EventDispatcher=k,d.ExtrudeBufferGeometry=Al,d.ExtrudeGeometry=Al,d.FaceColors=1,d.FileLoader=Fs,d.FlatShading=1,d.Float16BufferAttribute=L,d.Float32Attribute=function(s,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new P(s,t)},d.Float32BufferAttribute=P,d.Float64Attribute=function(s,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Y(s,t)},d.Float64BufferAttribute=Y,d.FloatType=ra,d.Fog=Sd,d.FogExp2=Td,d.Font=vg,d.FontLoader=kv,d.FrontSide=Ns,d.Frustum=Cd,d.GLBufferAttribute=sd,d.GLSL1="100",d.GLSL3=wa,d.GammaEncoding=yu,d.GreaterDepth=uh,d.GreaterEqualDepth=mu,d.GreaterEqualStencilFunc=518,d.GreaterStencilFunc=516,d.GridHelper=ca,d.Group=Mu,d.HalfFloatType=Ea,d.HemisphereLight=ug,d.HemisphereLightHelper=Kp,d.HemisphereLightProbe=Y0,d.IcosahedronBufferGeometry=Mp,d.IcosahedronGeometry=Mp,d.ImageBitmapLoader=ol,d.ImageLoader=Op,d.ImageUtils=Uc,d.ImmediateRenderObject=sh,d.IncrementStencilOp=7682,d.IncrementWrapStencilOp=34055,d.InstancedBufferAttribute=ja,d.InstancedBufferGeometry=Ba,d.InstancedInterleavedBuffer=rd,d.InstancedMesh=Xr,d.Int16Attribute=function(s,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new w(s,t)},d.Int16BufferAttribute=w,d.Int32Attribute=function(s,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new O(s,t)},d.Int32BufferAttribute=O,d.Int8Attribute=function(s,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new E(s,t)},d.Int8BufferAttribute=E,d.IntType=lc,d.InterleavedBuffer=ei,d.InterleavedBufferAttribute=pn,d.Interpolant=Vi,d.InterpolateDiscrete=2300,d.InterpolateLinear=2301,d.InterpolateSmooth=2302,d.InvertStencilOp=5386,d.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},d.KeepStencilOp=Jf,d.KeyframeTrack=vl,d.LOD=Cv,d.LatheBufferGeometry=Tp,d.LatheGeometry=Tp,d.Layers=Im,d.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},d.LessDepth=ic,d.LessEqualDepth=Fl,d.LessEqualStencilFunc=515,d.LessStencilFunc=513,d.Light=xl,d.LightProbe=Xd,d.Line=zi,d.Line3=Qp,d.LineBasicMaterial=ta,d.LineCurve=Wd,d.LineCurve3=F0,d.LineDashedMaterial=Ph,d.LineLoop=Zm,d.LinePieces=1,d.LineSegments=er,d.LineStrip=0,d.LinearEncoding=lo,d.LinearFilter=nt,d.LinearInterpolant=Jr,d.LinearMipMapLinearFilter=1008,d.LinearMipMapNearestFilter=1007,d.LinearMipmapLinearFilter=oc,d.LinearMipmapNearestFilter=Au,d.LinearToneMapping=hh,d.Loader=Zr,d.LoaderUtils=gg,d.LoadingManager=Qs,d.LogLuvEncoding=u0,d.LoopOnce=2200,d.LoopPingPong=2202,d.LoopRepeat=2201,d.LuminanceAlphaFormat=hl,d.LuminanceFormat=gd,d.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},d.Material=h,d.MaterialLoader=j0,d.Math=qi,d.MathUtils=qi,d.Matrix3=cs,d.Matrix4=ir,d.MaxEquation=dd,d.Mesh=te,d.MeshBasicMaterial=xc,d.MeshDepthMaterial=pp,d.MeshDistanceMaterial=mp,d.MeshFaceMaterial=function(s){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),s},d.MeshLambertMaterial=yo,d.MeshMatcapMaterial=xo,d.MeshNormalMaterial=Yc,d.MeshPhongMaterial=Dp,d.MeshPhysicalMaterial=ur,d.MeshStandardMaterial=fr,d.MeshToonMaterial=Pp,d.MinEquation=hd,d.MirroredRepeatWrapping=kl,d.MixOperation=so,d.MultiMaterial=function(s=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),s.isMultiMaterial=!0,s.materials=s,s.clone=function(){return s.slice()},s},d.MultiplyBlending=ud,d.MultiplyOperation=Oc,d.NearestFilter=mo,d.NearestMipMapLinearFilter=1005,d.NearestMipMapNearestFilter=1004,d.NearestMipmapLinearFilter=Mo,d.NearestMipmapNearestFilter=ph,d.NeverDepth=md,d.NeverStencilFunc=512,d.NoBlending=ll,d.NoColors=0,d.NoToneMapping=Ka,d.NormalAnimationBlendMode=2500,d.NormalBlending=Wa,d.NotEqualDepth=Ro,d.NotEqualStencilFunc=517,d.NumberKeyframeTrack=zd,d.Object3D=I,d.ObjectLoader=Yd,d.ObjectSpaceNormalMap=qf,d.OctahedronBufferGeometry=Fd,d.OctahedronGeometry=Fd,d.OneFactor=lh,d.OneMinusDstAlphaFactor=Vf,d.OneMinusDstColorFactor=No,d.OneMinusSrcAlphaFactor=La,d.OneMinusSrcColorFactor=pu,d.OrthographicCamera=Nh,d.PCFShadowMap=al,d.PCFSoftShadowMap=Pc,d.PMREMGenerator=hA,d.ParametricBufferGeometry=Xi,d.ParametricGeometry=Xi,d.Particle=function(s){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Xm(s)},d.ParticleBasicMaterial=function(s){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Tu(s)},d.ParticleSystem=function(s,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new kr(s,t)},d.ParticleSystemMaterial=function(s){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Tu(s)},d.Path=Kd,d.PerspectiveCamera=Q,d.Plane=fl,d.PlaneBufferGeometry=Md,d.PlaneGeometry=Md,d.PlaneHelper=Yp,d.PointCloud=function(s,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new kr(s,t)},d.PointCloudMaterial=function(s){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Tu(s)},d.PointLight=Fh,d.PointLightHelper=oA,d.Points=kr,d.PointsMaterial=Tu,d.PolarGridHelper=Uu,d.PolyhedronBufferGeometry=Ga,d.PolyhedronGeometry=Ga,d.PositionalAudio=Vv,d.PropertyBinding=Fo,d.PropertyMixer=nA,d.QuadraticBezierCurve=kp,d.QuadraticBezierCurve3=lg,d.Quaternion=To,d.QuaternionKeyframeTrack=Oh,d.QuaternionLinearInterpolant=Ss,d.REVISION="127",d.RGBADepthPacking=Yf,d.RGBAFormat=Uo,d.RGBAIntegerFormat=ls,d.RGBA_ASTC_10x10_Format=vh,d.RGBA_ASTC_10x5_Format=Ad,d.RGBA_ASTC_10x6_Format=vd,d.RGBA_ASTC_10x8_Format=Ah,d.RGBA_ASTC_12x10_Format=yd,d.RGBA_ASTC_12x12_Format=jf,d.RGBA_ASTC_4x4_Format=zo,d.RGBA_ASTC_5x4_Format=ms,d.RGBA_ASTC_5x5_Format=Us,d.RGBA_ASTC_6x5_Format=Yr,d.RGBA_ASTC_6x6_Format=gs,d.RGBA_ASTC_8x5_Format=ao,d.RGBA_ASTC_8x6_Format=qa,d.RGBA_ASTC_8x8_Format=Hl,d.RGBA_BPTC_Format=xd,d.RGBA_ETC2_EAC_Format=hc,d.RGBA_PVRTC_2BPPV1_Format=Ho,d.RGBA_PVRTC_4BPPV1_Format=Go,d.RGBA_S3TC_DXT1_Format=Gi,d.RGBA_S3TC_DXT3_Format=oa,d.RGBA_S3TC_DXT5_Format=jr,d.RGBDEncoding=Cm,d.RGBEEncoding=Rs,d.RGBEFormat=mh,d.RGBFormat=Es,d.RGBIntegerFormat=oo,d.RGBM16Encoding=wm,d.RGBM7Encoding=_m,d.RGB_ETC1_Format=br,d.RGB_ETC2_Format=Pa,d.RGB_PVRTC_2BPPV1_Format=uc,d.RGB_PVRTC_4BPPV1_Format=Nc,d.RGB_S3TC_DXT1_Format=Jo,d.RGFormat=gr,d.RGIntegerFormat=ts,d.RawShaderMaterial=Bu,d.Ray=Ql,d.Raycaster=rh,d.RectAreaLight=Hp,d.RedFormat=gh,d.RedIntegerFormat=Ci,d.ReinhardToneMapping=gu,d.RepeatWrapping=cl,d.ReplaceStencilOp=7681,d.ReverseSubtractEquation=Hf,d.RingBufferGeometry=Sp,d.RingGeometry=Sp,d.SRGB8_ALPHA8_ASTC_10x10_Format=Fa,d.SRGB8_ALPHA8_ASTC_10x5_Format=Wf,d.SRGB8_ALPHA8_ASTC_10x6_Format=Kf,d.SRGB8_ALPHA8_ASTC_10x8_Format=Xf,d.SRGB8_ALPHA8_ASTC_12x10_Format=c0,d.SRGB8_ALPHA8_ASTC_12x12_Format=Zo,d.SRGB8_ALPHA8_ASTC_4x4_Format=ds,d.SRGB8_ALPHA8_ASTC_5x4_Format=ba,d.SRGB8_ALPHA8_ASTC_5x5_Format=io,d.SRGB8_ALPHA8_ASTC_6x5_Format=_a,d.SRGB8_ALPHA8_ASTC_6x6_Format=Oa,d.SRGB8_ALPHA8_ASTC_8x5_Format=zl,d.SRGB8_ALPHA8_ASTC_8x6_Format=vu,d.SRGB8_ALPHA8_ASTC_8x8_Format=bm,d.Scene=gp,d.SceneUtils=ga,d.ShaderChunk=ns,d.ShaderLib=gl,d.ShaderMaterial=V,d.ShadowMaterial=Lp,d.Shape=qc,d.ShapeBufferGeometry=Nd,d.ShapeGeometry=Nd,d.ShapePath=zp,d.ShapeUtils=Kl,d.ShortType=Ul,d.Skeleton=qm,d.SkeletonHelper=Bg,d.SkinnedMesh=Mi,d.SmoothShading=2,d.Sphere=ea,d.SphereBufferGeometry=kd,d.SphereGeometry=kd,d.Spherical=Mg,d.SphericalHarmonics3=mg,d.SplineCurve=Up,d.SpotLight=dg,d.SpotLightHelper=qv,d.Sprite=Xm,d.SpriteMaterial=jm,d.SrcAlphaFactor=pd,d.SrcAlphaSaturateFactor=ch,d.SrcColorFactor=fd,d.StaticCopyUsage=35046,d.StaticDrawUsage=yh,d.StaticReadUsage=35045,d.StereoCamera=Uv,d.StreamCopyUsage=35042,d.StreamDrawUsage=35040,d.StreamReadUsage=35041,d.StringKeyframeTrack=Du,d.SubtractEquation=Gf,d.SubtractiveBlending=cd,d.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},d.TangentSpaceNormalMap=xu,d.TetrahedronBufferGeometry=Ip,d.TetrahedronGeometry=Ip,d.TextBufferGeometry=Rp,d.TextGeometry=Rp,d.Texture=go,d.TextureLoader=Qa,d.TorusBufferGeometry=Ud,d.TorusGeometry=Ud,d.TorusKnotBufferGeometry=Gd,d.TorusKnotGeometry=Gd,d.Triangle=vo,d.TriangleFanDrawMode=2,d.TriangleStripDrawMode=1,d.TrianglesDrawMode=0,d.TubeBufferGeometry=Hd,d.TubeGeometry=Hd,d.UVMapping=300,d.Uint16Attribute=function(s,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new b(s,t)},d.Uint16BufferAttribute=b,d.Uint32Attribute=function(s,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new R(s,t)},d.Uint32BufferAttribute=R,d.Uint8Attribute=function(s,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new _(s,t)},d.Uint8BufferAttribute=_,d.Uint8ClampedAttribute=function(s,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new m(s,t)},d.Uint8ClampedBufferAttribute=m,d.Uniform=Xl,d.UniformsLib=Ei,d.UniformsUtils=E0,d.UnsignedByteType=xa,d.UnsignedInt248Type=ma,d.UnsignedIntType=Ya,d.UnsignedShort4444Type=ul,d.UnsignedShort5551Type=Gl,d.UnsignedShort565Type=cc,d.UnsignedShortType=ac,d.VSMShadowMap=Co,d.Vector2=Qn,d.Vector3=Je,d.Vector4=os,d.VectorKeyframeTrack=Vd,d.Vertex=function(s,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Je(s,t,i)},d.VertexColors=2,d.VideoTexture=Iu,d.WebGL1Renderer=I0,d.WebGLCubeRenderTarget=dp,d.WebGLMultisampleRenderTarget=dc,d.WebGLRenderTarget=aa,d.WebGLRenderTargetCube=function(s,t,i){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new dp(s,i)},d.WebGLRenderer=Xn,d.WebGLUtils=nn,d.WireframeGeometry=Bp,d.WireframeHelper=function(s,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new er(new Bp(s.geometry),new ta({color:t!==void 0?t:16777215}))},d.WrapAroundEnding=2402,d.XHRLoader=function(s){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Fs(s)},d.ZeroCurvatureEnding=2400,d.ZeroFactor=zf,d.ZeroSlopeEnding=2401,d.ZeroStencilOp=0,d.sRGBEncoding=Zs,Object.defineProperty(d,"__esModule",{value:!0})})},{}],12:[function(u,T,W){T.exports=AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(d){var k=this.el;this.active&&this.checkpoint!==d&&(this.checkpoint&&k.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=d,this.sync(),this.position.distanceTo(this.targetPosition)<.1?this.checkpoint=null:(k.emit("navigation-start",{checkpoint:d}),this.data.mode==="teleport"&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,k.emit("navigation-end",{checkpoint:d}),k.components["movement-controls"].updateNavLocation())))},isVelocityActive:function(){return!(!this.active||!this.checkpoint)},getVelocity:function(){if(this.active){var d=this.data,k=this.offset,K=this.position,S=this.targetPosition,I=this.checkpoint;return this.sync(),K.distanceTo(S)<.1?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:I}),k.set(0,0,0)):(k.setLength(d.animateSpeed),k)}},sync:function(){var d=this.offset,k=this.position,K=this.targetPosition;k.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(K),K.add(this.checkpoint.components.checkpoint.getOffset()),d.copy(K).sub(k)}})},{}],13:[function(u,T,W){var d=u("../../lib/GamepadButton"),k=u("../../lib/GamepadButtonEvent"),K={LEFT:"left",RIGHT:"right"},S={MOVEMENT:1,ROTATION:2};T.exports=AFRAME.registerComponent("gamepad-controls",{GamepadButton:d,schema:{enabled:{default:!0},rotationSensitivity:{default:2}},init:function(){var I=this.el.sceneEl;this.system=I.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};var h=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=h.x,this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=h.y,this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,I.addBehavior(this)},update:function(){this.tick()},tick:function(I,h){this.updateButtonState(),this.updateRotation(h)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;var I=this._dpadVector,h=this._moveVector;this.getDpad(I),this.getJoystick(S.MOVEMENT,h);var g=I.x||h.x,C=I.y||h.y;return Math.abs(g)>.2||Math.abs(C)>.2},getVelocityDelta:function(){var I=this._dpadVector,h=this._moveVector;this.getDpad(I),this.getJoystick(S.MOVEMENT,h);var g=I.x||h.x,C=I.y||h.y,v=new THREE.Vector3;return Math.abs(g)>.2&&(v.x+=g),Math.abs(C)>.2&&(v.z+=C),v},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;var I=this._lookVector;return this.getJoystick(S.ROTATION,I),Math.abs(I.x)>.2||Math.abs(I.y)>.2},updateRotation:function(I){if(this.isRotationActive()){var h=this.data,g=this.yaw,C=this.pitch;g.rotation.y=this.el.object3D.rotation.y,C.rotation.x=this.el.object3D.rotation.x;var v=this._lookVector;this.getJoystick(S.ROTATION,v),Math.abs(v.x)<=.2&&(v.x=0),Math.abs(v.y)<=.2&&(v.y=0),v.multiplyScalar(h.rotationSensitivity*I/1e3),g.rotation.y-=v.x,C.rotation.x-=v.y,C.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,C.rotation.x)),this.el.object3D.rotation.set(C.rotation.x,g.rotation.y,0)}},updateButtonState:function(){var I=this.getGamepad(K.RIGHT);if(this.data.enabled&&I)for(var h=0;h<I.buttons.length;h++)I.buttons[h].pressed&&!this.buttons[h]?this.emit(new k("gamepadbuttondown",h,I.buttons[h])):!I.buttons[h].pressed&&this.buttons[h]&&this.emit(new k("gamepadbuttonup",h,I.buttons[h])),this.buttons[h]=I.buttons[h].pressed;else Object.keys(this.buttons)&&(this.buttons={})},emit:function(I){this.el.emit(I.type,I),this.el.emit(I.type+":"+I.index,new k(I.type,I.index,I))},getGamepad:function(){var I=[],h=[];return function(g){var C=this.el.sceneEl.components["proxy-controls"],v=C&&C.isConnected()&&C.getGamepad(0);if(v)return v;I.length=0;for(var y=0;y<this.system.controllers.length;y++){var E=this.system.controllers[y],_=E?E.gamepad:null;if(I.push(_),_&&E.handedness===g)return _}for(var m=navigator.getGamepads?navigator.getGamepads():h,w=0;w<m.length;w++){var b=m[w];if(b&&b.hand===g)return b}return I[0]||m[0]}}(),getButton:function(I){return this.getGamepad(K.RIGHT).buttons[I]},getAxis:function(I){return this.getGamepad(I>1?K.RIGHT:K.LEFT).axes[I]},getJoystick:function(I,h){var g=this.getGamepad(I===S.MOVEMENT?K.LEFT:K.RIGHT);if(!g)return h.set(0,0);if(g.mapping==="xr-standard")switch(I){case S.MOVEMENT:return h.set(g.axes[2],g.axes[3]);case S.ROTATION:return h.set(g.axes[2],0)}else switch(I){case S.MOVEMENT:return h.set(g.axes[0],g.axes[1]);case S.ROTATION:return h.set(g.axes[2],g.axes[3])}throw new Error('Unexpected joystick index "%d".',I)},getDpad:function(I){var h=this.getGamepad(K.LEFT);return h&&h.buttons[d.DPAD_RIGHT]?I.set((h.buttons[d.DPAD_RIGHT].pressed?1:0)+(h.buttons[d.DPAD_LEFT].pressed?-1:0),(h.buttons[d.DPAD_UP].pressed?-1:0)+(h.buttons[d.DPAD_DOWN].pressed?1:0)):I.set(0,0)},isConnected:function(){var I=this.getGamepad(K.LEFT);return!(!I||!I.connected)},getID:function(){return this.getGamepad(K.LEFT).id}})},{"../../lib/GamepadButton":5,"../../lib/GamepadButtonEvent":6}],14:[function(u,T,W){u("./checkpoint-controls"),u("./gamepad-controls"),u("./keyboard-controls"),u("./touch-controls"),u("./movement-controls"),u("./trackpad-controls"),u("./nipple-controls")},{"./checkpoint-controls":12,"./gamepad-controls":13,"./keyboard-controls":15,"./movement-controls":16,"./nipple-controls":17,"./touch-controls":18,"./trackpad-controls":19}],15:[function(u,T,W){u("../../lib/keyboard.polyfill");var d=window.KeyboardEvent;T.exports=AFRAME.registerComponent("keyboard-controls",{schema:{enabled:{default:!0},debug:{default:!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this),onContextMenu:this.onContextMenu.bind(this)}},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){var k=this.data,K=this.getKeys();return this.dVelocity.set(0,0,0),k.enabled&&((K.KeyW||K.ArrowUp)&&(this.dVelocity.z-=1),(K.KeyA||K.ArrowLeft)&&(this.dVelocity.x-=1),(K.KeyS||K.ArrowDown)&&(this.dVelocity.z+=1),(K.KeyD||K.ArrowRight)&&(this.dVelocity.x+=1)),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},attachEventListeners:function(){window.addEventListener("contextmenu",this.listeners.onContextMenu,!1),window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},onContextMenu:function(){for(var k in this.localKeys)this.localKeys.hasOwnProperty(k)&&delete this.localKeys[k]},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(k){AFRAME.utils.shouldCaptureKeyEvent(k)&&(this.localKeys[k.code]=!0,this.emit(k))},onKeyUp:function(k){AFRAME.utils.shouldCaptureKeyEvent(k)&&(delete this.localKeys[k.code],this.emit(k))},onBlur:function(){for(var k in this.localKeys)this.localKeys.hasOwnProperty(k)&&delete this.localKeys[k]},emit:function(k){"__keyboard-controls-proxy"in k&&this.el.emit(k.type,k),this.el.emit(k.type+":"+k.code,new d(k.type,k)),this.data.debug&&console.log(k.type+":"+k.code)},isPressed:function(k){return k in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){var k=this.el.sceneEl.components["proxy-controls"];return k&&k.isConnected()}})},{"../../lib/keyboard.polyfill":8}],16:[function(u,T,W){T.exports=AFRAME.registerComponent("movement-controls",{dependencies:["rotation"],schema:{enabled:{default:!0},controls:{default:["gamepad","trackpad","keyboard","touch"]},speed:{default:.3,min:0},fly:{default:!1},constrainToNavMesh:{default:!1},camera:{default:"[movement-controls] [camera]",type:"selector"}},init:function(){var d=this.el;this.data.camera||(this.data.camera=d.querySelector("[camera]")),this.velocityCtrl=null,this.velocity=new THREE.Vector3,this.heading=new THREE.Quaternion,this.navGroup=null,this.navNode=null,d.sceneEl.hasLoaded?this.injectControls():d.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(d){var k=this.el,K=this.data,S=k.sceneEl.systems.nav;if(k.sceneEl.hasLoaded&&this.injectControls(),S&&K.constrainToNavMesh!==d.constrainToNavMesh&&(K.constrainToNavMesh?S.addAgent(this):S.removeAgent(this)),K.enabled!==d.enabled)for(var I=0;I<K.controls.length;I++){var h=K.controls[I]+"-controls";this.el.setAttribute(h,{enabled:this.data.enabled})}},injectControls:function(){for(var d=this.data,k=0;k<d.controls.length;k++){var K=d.controls[k]+"-controls";this.el.setAttribute(K,{enabled:this.data.enabled})}},updateNavLocation:function(){this.navGroup=null,this.navNode=null},tick:function(){var d=new THREE.Vector3,k=new THREE.Vector3,K=new THREE.Vector3;return function(S,I){if(I){var h=this.el,g=this.data;if(g.enabled){this.updateVelocityCtrl();var C=this.velocityCtrl,v=this.velocity;if(C)if(I/1e3>.2?v.set(0,0,0):this.updateVelocity(I),g.constrainToNavMesh&&C.isNavMeshConstrained!==!1){if(v.lengthSq()<1e-5)return;d.copy(h.object3D.position),k.copy(v).multiplyScalar(I/1e3).add(d);var y=h.sceneEl.systems.nav;this.navGroup=this.navGroup===null?y.getGroup(d):this.navGroup,this.navNode=this.navNode||y.getNode(d,this.navGroup),this.navNode=y.clampStep(d,k,this.navGroup,this.navNode,K),h.object3D.position.copy(K)}else h.hasAttribute("velocity")?h.setAttribute("velocity",v):(h.object3D.position.x+=v.x*I/1e3,h.object3D.position.y+=v.y*I/1e3,h.object3D.position.z+=v.z*I/1e3)}}}}(),updateVelocityCtrl:function(){var d=this.data;if(d.enabled){for(var k=0,K=d.controls.length;k<K;k++){var S=this.el.components[d.controls[k]+"-controls"];if(S&&S.isVelocityActive())return void(this.velocityCtrl=S)}this.velocityCtrl=null}},updateVelocity:function(){var d=new THREE.Vector2,k=new THREE.Quaternion;return function(K){var S=void 0,I=this.el,h=this.velocityCtrl,g=this.velocity,C=this.data;if(h){if(!h.getVelocityDelta){if(h.getVelocity)return void g.copy(h.getVelocity());if(h.getPositionDelta)return void g.copy(h.getPositionDelta(K).multiplyScalar(1e3/K));throw new Error("Incompatible movement controls: ",h)}S=h.getVelocityDelta(K)}if(I.hasAttribute("velocity")&&!C.constrainToNavMesh&&g.copy(this.el.getAttribute("velocity")),S&&C.enabled){var v=C.camera;k.copy(v.object3D.quaternion),k.premultiply(I.object3D.quaternion),S.applyQuaternion(k);var y=S.length();C.fly?(g.copy(S),g.multiplyScalar(16.66667*this.data.speed)):(d.set(S.x,S.z),d.setLength(y*this.data.speed*16.66667),g.x=d.x,g.y=0,g.z=d.y)}}}()})},{}],17:[function(u,T,W){var d=function(k){return k&&k.__esModule?k:{default:k}}(u("nipplejs"));AFRAME.registerComponent("nipple-controls",{schema:{enabled:{default:!0},mode:{default:"dynamic",oneOf:["static","semi","dynamic"]},rotationSensitivity:{default:1},moveJoystickEnabled:{default:!0},lookJoystickEnabled:{default:!0},sideMargin:{default:"30px"},bottomMargin:{default:"70px"},moveJoystickPosition:{default:"left",oneOf:["left","right"]},lookJoystickPosition:{default:"right",oneOf:["left","right"]}},init:function(){this.dVelocity=new THREE.Vector3,this.lookVector=new THREE.Vector2;var k=this.el.querySelector("[look-controls]").components["look-controls"];this.pitchObject=k.pitchObject,this.yawObject=k.yawObject,this.rigRotation=this.el.object3D.rotation,this.moveData=void 0,this.lookData=void 0,this.moving=!1,this.rotating=!1},update:function(k){this.data.moveJoystickPosition===k.moveJoystickPosition&&this.data.sideMargin===k.sideMargin&&this.data.bottomMargin===k.bottomMargin&&this.data.mode===k.mode||this.removeMoveJoystick(),this.data.lookJoystickPosition===k.lookJoystickPosition&&this.data.sideMargin===k.sideMargin&&this.data.bottomMargin===k.bottomMargin&&this.data.mode===k.mode||this.removeLookJoystick(),this.data.enabled&&this.data.moveJoystickEnabled?this.createMoveJoystick():this.removeMoveJoystick(),this.data.enabled&&this.data.lookJoystickEnabled?this.createLookJoystick():this.removeLookJoystick()},pause:function(){this.moving=!1,this.rotating=!1},remove:function(){this.removeMoveJoystick(),this.removeLookJoystick()},isVelocityActive:function(){return this.data.enabled&&this.moving},getVelocityDelta:function(){if(this.dVelocity.set(0,0,0),this.isVelocityActive()){var k=this.moveData.force<1?this.moveData.force:1,K=this.moveData.angle.radian,S=Math.cos(K)*k,I=-Math.sin(K)*k;this.dVelocity.set(S,0,I)}return this.dVelocity},isRotationActive:function(){return this.data.enabled&&this.rotating},updateRotation:function(k){if(this.isRotationActive()){var K=this.lookData.force<1?this.lookData.force:1,S=this.lookData.angle.radian,I=this.lookVector;I.x=Math.cos(S)*K,I.y=Math.sin(S)*K,I.multiplyScalar(this.data.rotationSensitivity*k/1e3),this.yawObject.rotation.y-=I.x;var h=this.pitchObject.rotation.x+I.y;h=Math.max(-Math.PI/2,Math.min(Math.PI/2,h)),this.pitchObject.rotation.x=h}},tick:function(k,K){this.updateRotation(K)},initLeftZone:function(){var k=document.createElement("div");k.setAttribute("id","joystickLeftZone"),k.setAttribute("style","position:absolute;"+this.data.moveJoystickPosition+":"+this.data.sideMargin+";bottom:"+this.data.bottomMargin+";z-index:1"),document.body.appendChild(k),this.leftZone=k},initRightZone:function(){var k=document.createElement("div");k.setAttribute("id","joystickRightZone"),k.setAttribute("style","position:absolute;"+this.data.lookJoystickPosition+":"+this.data.sideMargin+";bottom:"+this.data.bottomMargin+";z-index:1"),document.body.appendChild(k),this.rightZone=k},createMoveJoystick:function(){var k=this;if(!this.moveJoystick){this.initLeftZone();var K={mode:this.data.mode,zone:this.leftZone,color:"white",fadeTime:0};this.leftZone.style.width="100px",this.data.mode==="static"?(this.leftZone.style.height="100px",K.position={left:"50%",bottom:"50%"}):this.leftZone.style.height="400px",this.moveJoystick=d.default.create(K),this.moveJoystick.on("move",function(S,I){k.moveData=I,k.moving=!0}),this.moveJoystick.on("end",function(S,I){k.moving=!1})}},createLookJoystick:function(){var k=this;if(!this.lookJoystick){this.initRightZone();var K={mode:this.data.mode,zone:this.rightZone,color:"white",fadeTime:0};this.rightZone.style.width="100px",this.data.mode==="static"?(this.rightZone.style.height="100px",K.position={left:"50%",bottom:"50%"}):this.rightZone.style.height="400px",this.lookJoystick=d.default.create(K),this.lookJoystick.on("move",function(S,I){k.lookData=I,k.rotating=!0}),this.lookJoystick.on("end",function(S,I){k.rotating=!1})}},removeMoveJoystick:function(){this.moveJoystick&&(this.moveJoystick.destroy(),this.moveJoystick=void 0),this.moveData=void 0,this.leftZone&&this.leftZone.parentNode&&(this.leftZone.remove(),this.leftZone=void 0)},removeLookJoystick:function(){this.lookJoystick&&(this.lookJoystick.destroy(),this.lookJoystick=void 0),this.lookData=void 0,this.rightZone&&this.rightZone.parentNode&&(this.rightZone.remove(),this.rightZone=void 0)}})},{nipplejs:9}],18:[function(u,T,W){T.exports=AFRAME.registerComponent("touch-controls",{schema:{enabled:{default:!0},reverseEnabled:{default:!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods(),this.direction=0},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){var d=this.el.sceneEl,k=d.canvas;if(k){k.addEventListener("touchstart",this.onTouchStart),k.addEventListener("touchend",this.onTouchEnd);var K=d.getAttribute("vr-mode-ui");K&&K.cardboardModeEnabled&&d.addEventListener("enter-vr",this.onEnterVR)}else d.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var d=this.el.sceneEl&&this.el.sceneEl.canvas;d&&(d.removeEventListener("touchstart",this.onTouchStart),d.removeEventListener("touchend",this.onTouchEnd),this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR))},isVelocityActive:function(){return this.data.enabled&&!!this.direction},getVelocityDelta:function(){return this.dVelocity.z=this.direction,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},onTouchStart:function(d){this.direction=-1,this.data.reverseEnabled&&d.touches&&d.touches.length===2&&(this.direction=1),d.preventDefault()},onTouchEnd:function(d){this.direction=0,d.preventDefault()},onEnterVR:function(){var d=this.el.sceneEl.xrSession;d&&(d.addEventListener("selectstart",this.onTouchStart),d.addEventListener("selectend",this.onTouchEnd))}})},{}],19:[function(u,T,W){T.exports=AFRAME.registerComponent("trackpad-controls",{schema:{enabled:{default:!0},enableNegX:{default:!0},enablePosX:{default:!0},enableNegZ:{default:!0},enablePosZ:{default:!0},mode:{default:"touch",oneOf:["swipe","touch","press"]}},init:function(){this.dVelocity=new THREE.Vector3,this.zVel=0,this.xVel=0,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){var d=this.data,k=this.el.sceneEl;switch(k.addEventListener("axismove",this.onAxisMove),d.mode){case"swipe":case"touch":k.addEventListener("trackpadtouchstart",this.onTouchStart),k.addEventListener("trackpadtouchend",this.onTouchEnd);break;case"press":k.addEventListener("trackpaddown",this.onTouchStart),k.addEventListener("trackpadup",this.onTouchEnd)}},removeEventListeners:function(){var d=this.el.sceneEl;d.removeEventListener("axismove",this.onAxisMove),d.removeEventListener("trackpadtouchstart",this.onTouchStart),d.removeEventListener("trackpadtouchend",this.onTouchEnd),d.removeEventListener("trackpaddown",this.onTouchStart),d.removeEventListener("trackpadup",this.onTouchEnd)},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-this.zVel:1,this.dVelocity.x=this.isMoving?this.xVel:1,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onAxisMove=this.onAxisMove.bind(this)},onTouchStart:function(d){switch(this.data.mode){case"swipe":this.canRecordAxis=!0,this.startingAxisData=[];break;case"touch":case"press":this.isMoving=!0}d.preventDefault()},onTouchEnd:function(d){this.data.mode=="swipe"&&(this.startingAxisData=[]),this.isMoving=!1,d.preventDefault()},onAxisMove:function(d){switch(this.data.mode){case"swipe":return this.handleSwipeAxis(d);case"touch":case"press":return this.handleTouchAxis(d)}},handleSwipeAxis:function(d){var k=this.data,K=d.detail.axis;if(this.startingAxisData.length===0&&this.canRecordAxis&&(this.canRecordAxis=!1,this.startingAxisData[0]=K[0],this.startingAxisData[1]=K[1]),this.startingAxisData.length>0){var S=0,I=0;k.enableNegX&&K[0]<this.startingAxisData[0]&&(S=-1),k.enablePosX&&K[0]>this.startingAxisData[0]&&(S=1),k.enablePosZ&&K[1]>this.startingAxisData[1]&&(I=-1),k.enableNegZ&&K[1]<this.startingAxisData[1]&&(I=1);var h=Math.abs(this.startingAxisData[1]-K[1]);Math.abs(this.startingAxisData[0]-K[0])>h?(this.zVel=0,this.xVel=S,this.isMoving=!0):(this.xVel=0,this.zVel=I,this.isMoving=!0)}},handleTouchAxis:function(d){var k=this.data,K=d.detail.axis,S=0,I=0;k.enableNegX&&K[0]<0&&(S=-1),k.enablePosX&&K[0]>0&&(S=1),k.enablePosZ&&K[1]>0&&(I=-1),k.enableNegZ&&K[1]<0&&(I=1),Math.abs(K[0])>Math.abs(K[1])?(this.zVel=0,this.xVel=S):(this.xVel=0,this.zVel=I)}})},{}],20:[function(u,T,W){function d(K){return K.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}var k={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};T.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(k)},repetitions:{default:1/0,min:0},timeScale:{default:1},startAt:{default:0}},init:function(){var K=this;this.model=null,this.mixer=null,this.activeActions=[];var S=this.el.getObject3D("mesh");S?this.load(S):this.el.addEventListener("model-loaded",function(I){K.load(I.detail.model)})},load:function(K){var S=this.el;this.model=K,this.mixer=new THREE.AnimationMixer(K),this.mixer.addEventListener("loop",function(I){S.emit("animation-loop",{action:I.action,loopDelta:I.loopDelta})}),this.mixer.addEventListener("finished",function(I){S.emit("animation-finished",{action:I.action,direction:I.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(K){if(K){var S=this.data,I=AFRAME.utils.diff(S,K);if("clip"in I)return this.stopAction(),void(S.clip&&this.playAction());this.activeActions.forEach(function(h){"duration"in I&&S.duration&&h.setDuration(S.duration),"clampWhenFinished"in I&&(h.clampWhenFinished=S.clampWhenFinished),("loop"in I||"repetitions"in I)&&h.setLoop(k[S.loop],S.repetitions),"timeScale"in I&&h.setEffectiveTimeScale(S.timeScale)})}},stopAction:function(){for(var K=this.data,S=0;S<this.activeActions.length;S++)K.crossFadeDuration?this.activeActions[S].fadeOut(K.crossFadeDuration):this.activeActions[S].stop();this.activeActions.length=0},playAction:function(){if(this.mixer){var K=this.model,S=this.data,I=K.animations||(K.geometry||{}).animations||[];if(I.length){for(var h,g=function(y){return new RegExp("^"+y.split(/\*+/).map(d).join(".*")+"$")}(S.clip),C=0;h=I[C];C++)if(h.name.match(g)){var v=this.mixer.clipAction(h,K);v.enabled=!0,v.clampWhenFinished=S.clampWhenFinished,S.duration&&v.setDuration(S.duration),S.timeScale!==1&&v.setEffectiveTimeScale(S.timeScale),v.startAt(this.mixer.time-S.startAt/1e3),v.setLoop(k[S.loop],S.repetitions).fadeIn(S.crossFadeDuration).play(),this.activeActions.push(v)}}}},tick:function(K,S){this.mixer&&!isNaN(S)&&this.mixer.update(S/1e3)}})},{}],21:[function(u,T,W){THREE.ColladaLoader=u("../../lib/ColladaLoader"),T.exports.Component=AFRAME.registerComponent("collada-model-legacy",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new THREE.ColladaLoader},update:function(){var d=this,k=this.el,K=this.data,S=this.el.sceneEl.systems.renderer;K&&(this.remove(),this.loader.load(K,function(I){d.model=I.scene,d.model.traverse(function(h){if(h.isMesh){var g=h.material;g.color&&S.applyColorCorrection(g.color),g.map&&S.applyColorCorrection(g.map),g.emissive&&S.applyColorCorrection(g.emissive),g.emissiveMap&&S.applyColorCorrection(g.emissiveMap)}}),k.setObject3D("mesh",d.model),k.emit("model-loaded",{format:"collada",model:d.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../../lib/ColladaLoader":3}],22:[function(u,T,W){THREE.FBXLoader=u("../../lib/FBXLoader"),T.exports=AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){var d=this.data;if(d.src){this.remove();var k=new THREE.FBXLoader;d.crossorigin&&k.setCrossOrigin(d.crossorigin),k.load(d.src,this.load.bind(this))}},load:function(d){this.model=d,this.el.setObject3D("mesh",d),this.el.emit("model-loaded",{format:"fbx",model:d})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../../lib/FBXLoader":4}],23:[function(u,T,W){var d=u("../../lib/fetch-script")(),k=function(){var K=void 0;return function(){return K=K||d("https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js")}}();T.exports=AFRAME.registerComponent("gltf-model-legacy",{schema:{type:"model"},init:function(){var K=this;this.model=null,this.loader=null,this.loaderPromise=k().then(function(){K.loader=new THREE.GLTFLoader,K.loader.setCrossOrigin("Anonymous")})},update:function(){var K=this,S=this,I=this.el,h=this.data;h&&(this.remove(),this.loaderPromise.then(function(){K.loader.load(h,function(g){S.model=g.scene,S.model.animations=g.animations,I.setObject3D("mesh",S.model),I.emit("model-loaded",{format:"gltf",model:S.model})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../../lib/fetch-script":7}],24:[function(u,T,W){u("./animation-mixer"),u("./collada-model-legacy"),u("./fbx-model"),u("./gltf-model-legacy"),u("./object-model")},{"./animation-mixer":20,"./collada-model-legacy":21,"./fbx-model":22,"./gltf-model-legacy":23,"./object-model":25}],25:[function(u,T,W){T.exports=AFRAME.registerComponent("object-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){var d=this,k=void 0,K=this.data;K.src&&(this.remove(),k=new THREE.ObjectLoader,K.crossorigin&&k.setCrossOrigin(K.crossorigin),k.load(K.src,function(S){S.traverse(function(I){I instanceof THREE.SkinnedMesh&&I.material&&(I.material.skinning=!!(I.geometry&&I.geometry.bones||[]).length)}),d.load(S)}))},load:function(d){this.model=d,this.el.setObject3D("mesh",d),this.el.emit("model-loaded",{format:"json",model:d})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{}],26:[function(u,T,W){T.exports=AFRAME.registerComponent("checkpoint",{schema:{offset:{default:{x:0,y:0,z:0},type:"vec3"}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this),this.offset=new THREE.Vector3},update:function(){this.offset.copy(this.data.offset)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.removeEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){var d=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!d)throw new Error("No `checkpoint-controls` component found.");d.components["checkpoint-controls"].setCheckpoint(this.el)},getOffset:function(){return this.offset.copy(this.data.offset)}})},{}],27:[function(u,T,W){function d(k,K,S,I){k&&(K=K||[],k.traverse(function(h){h.isMesh&&function(g){return g?Array.isArray(g)?g:g.materials?g.materials:[g]:[]}(h.material).forEach(function(g){(!g||"envMap"in g)&&(K.length&&K.indexOf(g.name)===-1||(g.envMap=S,g.reflectivity=I,g.needsUpdate=!0))})}))}T.exports=AFRAME.registerComponent("cube-env-map",{multiple:!0,schema:{path:{default:""},extension:{default:"jpg",oneOf:["jpg","png"]},enableBackground:{default:!1},reflectivity:{default:1,min:0,max:1},materials:{default:[]}},init:function(){var k=this,K=this.data;this.texture=new THREE.CubeTextureLoader().load([K.path+"posx."+K.extension,K.path+"negx."+K.extension,K.path+"posy."+K.extension,K.path+"negy."+K.extension,K.path+"posz."+K.extension,K.path+"negz."+K.extension]),this.texture.format=THREE.RGBAFormat,this.object3dsetHandler=function(){var S=k.el.getObject3D("mesh"),I=k.data;d(S,I.materials,k.texture,I.reflectivity)},this.object3dsetHandler(),this.el.addEventListener("object3dset",this.object3dsetHandler)},update:function(k){var K=this.data,S=this.el.getObject3D("mesh"),I=[],h=[];if(K.materials.length&&(k.materials?(I=K.materials.filter(function(C){return!k.materials.includes(C)}),h=k.materials.filter(function(C){return!K.materials.includes(C)})):I=K.materials),I.length&&d(S,I,this.texture,K.reflectivity),h.length&&d(S,h,null,1),k.materials&&K.reflectivity!==k.reflectivity){var g=K.materials.filter(function(C){return k.materials.includes(C)});g.length&&d(S,g,this.texture,K.reflectivity)}this.data.enableBackground&&!k.enableBackground?this.setBackground(this.texture):!this.data.enableBackground&&k.enableBackground&&this.setBackground(null)},remove:function(){this.el.removeEventListener("object3dset",this.object3dsetHandler);var k=this.el.getObject3D("mesh"),K=this.data;d(k,K.materials,null,1),K.enableBackground&&this.setBackground(null)},setBackground:function(k){this.el.sceneEl.object3D.background=k}})},{}],28:[function(u,T,W){T.exports=AFRAME.registerComponent("grab",{init:function(){this.system=this.el.sceneEl.systems.physics,this.GRABBED_STATE="grabbed",this.grabbing=!1,this.hitEl=null,this.physics=this.el.sceneEl.systems.physics,this.constraint=null,this.onHit=this.onHit.bind(this),this.onGripOpen=this.onGripOpen.bind(this),this.onGripClose=this.onGripClose.bind(this)},play:function(){var d=this.el;d.addEventListener("hit",this.onHit),d.addEventListener("gripdown",this.onGripClose),d.addEventListener("gripup",this.onGripOpen),d.addEventListener("trackpaddown",this.onGripClose),d.addEventListener("trackpadup",this.onGripOpen),d.addEventListener("triggerdown",this.onGripClose),d.addEventListener("triggerup",this.onGripOpen)},pause:function(){var d=this.el;d.removeEventListener("hit",this.onHit),d.removeEventListener("gripdown",this.onGripClose),d.removeEventListener("gripup",this.onGripOpen),d.removeEventListener("trackpaddown",this.onGripClose),d.removeEventListener("trackpadup",this.onGripOpen),d.removeEventListener("triggerdown",this.onGripClose),d.removeEventListener("triggerup",this.onGripOpen)},onGripClose:function(){this.grabbing=!0},onGripOpen:function(){var d=this.hitEl;this.grabbing=!1,d&&(d.removeState(this.GRABBED_STATE),this.hitEl=void 0,this.system.removeConstraint(this.constraint),this.constraint=null)},onHit:function(d){var k=d.detail.el;k.is(this.GRABBED_STATE)||!this.grabbing||this.hitEl||(k.addState(this.GRABBED_STATE),this.hitEl=k,this.constraint=new CANNON.LockConstraint(this.el.body,k.body),this.system.addConstraint(this.constraint))}})},{}],29:[function(u,T,W){u("./checkpoint"),u("./cube-env-map"),u("./grab"),u("./normal-material"),u("./sphere-collider")},{"./checkpoint":26,"./cube-env-map":27,"./grab":28,"./normal-material":30,"./sphere-collider":31}],30:[function(u,T,W){T.exports=AFRAME.registerComponent("normal-material",{init:function(){this.material=new THREE.MeshNormalMaterial({flatShading:!0}),this.applyMaterial=this.applyMaterial.bind(this),this.el.addEventListener("object3dset",this.applyMaterial),this.applyMaterial()},remove:function(){this.el.removeEventListener("object3dset",this.applyMaterial)},applyMaterial:function(){var d=this;this.el.object3D.traverse(function(k){k.isMesh&&(k.material=d.material)})}})},{}],31:[function(u,T,W){T.exports=AFRAME.registerComponent("sphere-collider",{schema:{enabled:{default:!0},interval:{default:80},objects:{default:""},state:{default:"collided"},radius:{default:.05},watch:{default:!0}},init:function(){this.observer=null,this.els=[],this.collisions=[],this.prevCheckTime=void 0,this.eventDetail={},this.handleHit=this.handleHit.bind(this),this.handleHitEnd=this.handleHitEnd.bind(this)},play:function(){var d=this.el.sceneEl;this.data.watch&&(this.observer=new MutationObserver(this.update.bind(this,null)),this.observer.observe(d,{childList:!0,subtree:!0}))},pause:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},update:function(){var d=this.data,k=void 0;k=d.objects?this.el.sceneEl.querySelectorAll(d.objects):this.el.sceneEl.children,this.els=Array.prototype.slice.call(k)},tick:function(){var d=new THREE.Vector3,k=new THREE.Vector3,K=new THREE.Vector3,S=new THREE.Vector3,I=new THREE.Box3,h=[],g=new Map;return function(C){if(this.data.enabled){var v=this.prevCheckTime;if(!(v&&C-v<this.data.interval)){this.prevCheckTime=C;var y=this.el,E=this.data,_=void 0;y.getObject3D("mesh")&&(h.length=0,g.clear(),y.object3D.getWorldPosition(d),y.object3D.getWorldScale(K),_=E.radius*function(m){return Math.max(m.x,m.y,m.z)}(K),this.els.forEach(function(m){var w=void 0,b=void 0,O=void 0,R=void 0;m.isEntity&&(b=m.getObject3D("mesh"))&&(I.setFromObject(b).getSize(S),R=Math.max(S.x,S.y,S.z)/2,w=Math.sqrt(2*R*R),I.getCenter(k),w&&(O=d.distanceTo(k))<w+_&&(h.push(m),g.set(m,O)))}),h.sort(function(m,w){return g.get(m)>g.get(w)?1:-1}).forEach(this.handleHit),this.collisions.filter(function(m){return!g.has(m)}).forEach(this.handleHitEnd),function(m,w){m.length=0;for(var b=0;b<w.length;b++)m[b]=w[b]}(this.collisions,h))}}}}(),handleHit:function(d){d.emit("hit"),d.addState(this.data.state),this.eventDetail.el=d,this.el.emit("hit",this.eventDetail)},handleHitEnd:function(d){d.emit("hitend"),d.removeState(this.data.state),this.eventDetail.el=d,this.el.emit("hitend",this.eventDetail)}})},{}],32:[function(u,T,W){u("./nav-mesh"),u("./nav-agent"),u("./system")},{"./nav-agent":33,"./nav-mesh":34,"./system":35}],33:[function(u,T,W){T.exports=AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav,this.system.addAgent(this),this.group=null,this.path=[],this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=null,this.path=[]},tick:function(){var d=new THREE.Vector3,k=new THREE.Vector3,K=new THREE.Vector3;return function(S,I){var h=this.el,g=this.data,C=this.raycaster,v=g.speed*I/1e3;if(g.active){if(!this.path.length){var y=this.el.object3D.position;this.group=this.group||this.system.getGroup(y),this.path=this.system.getPath(y,d.copy(g.destination),this.group)||[],h.emit("navigation-start")}if(!this.path.length)return console.warn("[nav] Unable to find path to %o.",g.destination),this.el.setAttribute("nav-agent",{active:!1}),void h.emit("navigation-end");var E=h.object3D.position,_=this.path[0];k.subVectors(_,E);var m=void 0;if(k.length()<v){if(this.path.shift(),!this.path.length)return this.el.setAttribute("nav-agent",{active:!1}),void h.emit("navigation-end");K.copy(E),m=this.path[0]}else K.copy(k.setLength(v)).add(E),m=_;m.y=E.y,h.object3D.lookAt(m),C.ray.origin.copy(K),C.ray.origin.y+=1.5,C.ray.direction={x:0,y:-1,z:0};var w=C.intersectObject(this.system.getNavMesh());w.length?(k.subVectors(w[0].point,E),E.add(k.setLength(v))):E.copy(K)}}}()})},{}],34:[function(u,T,W){T.exports=AFRAME.registerComponent("nav-mesh",{schema:{nodeName:{type:"string"}},init:function(){this.system=this.el.sceneEl.systems.nav,this.hasLoadedNavMesh=!1,this.nodeName=this.data.nodeName,this.el.addEventListener("object3dset",this.loadNavMesh.bind(this))},play:function(){this.hasLoadedNavMesh||this.loadNavMesh()},loadNavMesh:function(){var d=this,k=this.el.getObject3D("mesh");if(this.el.sceneEl.object3D,k){var K=void 0;if(k.traverse(function(I){!I.isMesh||d.nodeName&&I.name!==d.nodeName||(K=I)}),K){var S=K.geometry.clone();K.updateWorldMatrix(!0,!1),S.applyMatrix4(K.matrixWorld),this.system.setNavMeshGeometry(S),this.hasLoadedNavMesh=!0}}}})},{}],35:[function(u,T,W){var d=u("three-pathfinding").Pathfinding,k=new d,K="level";T.exports=AFRAME.registerSystem("nav",{init:function(){this.navMesh=null,this.agents=new Set},setNavMeshGeometry:function(S){this.navMesh=new THREE.Mesh(S),k.setZoneData(K,d.createZone(S)),Array.from(this.agents).forEach(function(I){return I.updateNavLocation()})},getNavMesh:function(){return this.navMesh},addAgent:function(S){this.agents.add(S)},removeAgent:function(S){this.agents.delete(S)},getPath:function(S,I,h){return this.navMesh?k.findPath(S,I,K,h):null},getGroup:function(S){return this.navMesh?k.getGroup(K,S):null},getNode:function(S,I){return this.navMesh?k.getClosestNode(S,K,I,!0):null},clampStep:function(S,I,h,g,C){return this.navMesh?g?k.clampStep(S,I,g,K,h,C):(C.copy(I),this.getNode(I,h)):(C.copy(I),null)}})},{"three-pathfinding":10}],36:[function(u,T,W){T.exports=AFRAME.registerPrimitive("a-grid",{defaultComponents:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",height:"geometry.height",src:"material.src"}})},{}],37:[function(u,T,W){T.exports.Primitive=AFRAME.registerPrimitive("a-ocean",{defaultComponents:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",amplitude:"ocean.amplitude",amplitudeVariance:"ocean.amplitudeVariance",speed:"ocean.speed",speedVariance:"ocean.speedVariance",color:"ocean.color",opacity:"ocean.opacity"}}),T.exports.Component=AFRAME.registerComponent("ocean",{schema:{width:{default:10,min:0},depth:{default:10,min:0},density:{default:10},amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:1},speedVariance:{default:2},color:{default:"#7AD2F7",type:"color"},opacity:{default:.8}},play:function(){var d=this.el,k=this.data,K=d.components.material,S=new THREE.PlaneGeometry(k.width,k.depth,k.density,k.density);this.waves=[];for(var I=S.getAttribute("position"),h=0;h<I.count;h++)this.waves.push({z:I.getZ(h),ang:Math.random()*Math.PI*2,amp:k.amplitude+Math.random()*k.amplitudeVariance,speed:(k.speed+Math.random()*k.speedVariance)/1e3});K||((K={}).material=new THREE.MeshPhongMaterial({color:k.color,transparent:k.opacity<1,opacity:k.opacity,flatShading:!0})),this.mesh=new THREE.Mesh(S,K.material),d.setObject3D("mesh",this.mesh)},remove:function(){this.el.removeObject3D("mesh")},tick:function(d,k){if(k){for(var K=this.mesh.geometry.getAttribute("position"),S=0;S<K.count;S++){var I=this.waves[S],h=I.z+Math.sin(I.ang)*I.amp;K.setZ(S,h),I.ang+=I.speed*k}K.needsUpdate=!0}}})},{}],38:[function(u,T,W){T.exports.Primitive=AFRAME.registerPrimitive("a-tube",{defaultComponents:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius","radial-segments":"tube.radialSegments",closed:"tube.closed"}}),T.exports.Component=AFRAME.registerComponent("tube",{schema:{path:{default:[]},segments:{default:64},radius:{default:1},radialSegments:{default:8},closed:{default:!1}},init:function(){var d=this.el,k=this.data,K=d.components.material;if(k.path.length){var S=new THREE.CatmullRomCurve3(k.path.map(function(h){return h=h.split(" "),new THREE.Vector3(Number(h[0]),Number(h[1]),Number(h[2]))})),I=new THREE.TubeGeometry(S,k.segments,k.radius,k.radialSegments,k.closed);K||((K={}).material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(I,K.material),this.el.setObject3D("mesh",this.mesh)}else console.error("[a-tube] `path` property expected but not found.")},update:function(d){Object.keys(d).length&&(this.remove(),this.init())},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}})},{}],39:[function(u,T,W){u("./a-grid"),u("./a-ocean"),u("./a-tube")},{"./a-grid":36,"./a-ocean":37,"./a-tube":38}]},{},[1]);(function(u){function T(d){if(W[d])return W[d].exports;var k=W[d]={exports:{},id:d,loaded:!1};return u[d].call(k.exports,k,k.exports,T),k.loaded=!0,k.exports}var W={};return T.m=u,T.c=W,T.p="",T(0)})([function(u,T){if(typeof AFRAME>"u")throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("environment",{schema:{active:{default:!1},preset:{default:"default",oneOf:["none","default","contact","egypt","checkerboard","forest","goaland","yavapai","goldmine","arches","threetowers","poison","tron","japan","dream","volcano","starry","osiris"]},seed:{type:"int",default:1,min:0,max:1e3},skyType:{default:"color",oneOf:["none","color","gradient","atmosphere"]},skyColor:{type:"color"},horizonColor:{type:"color"},lighting:{default:"distant",oneOf:["none","distant","point"]},shadow:{default:!1},shadowSize:{default:10},lightPosition:{type:"vec3",default:{x:0,y:1,z:-.2}},fog:{type:"float",default:0,min:0,max:1},flatShading:{default:!1},playArea:{type:"float",default:1,min:.5,max:10},ground:{default:"hills",oneOf:["none","flat","hills","canyon","spikes","noise"]},groundYScale:{type:"float",default:3,min:0,max:50},groundTexture:{default:"none",oneOf:["none","checkerboard","squares","walkernoise"]},groundColor:{type:"color",default:"#553e35"},groundColor2:{type:"color",default:"#694439"},dressing:{default:"none",oneOf:["none","cubes","pyramids","cylinders","hexagons","stones","trees","mushrooms","towers","apparatus","arches","torii"]},dressingAmount:{type:"int",default:10,min:0,max:1e3},dressingColor:{type:"color",default:"#795449"},dressingScale:{type:"float",default:5,min:0,max:100},dressingVariance:{type:"vec3",default:{x:1,y:1,z:1}},dressingUniformScale:{default:!0},dressingOnPlayArea:{type:"float",default:0,min:0,max:1},grid:{default:"none",oneOf:["none","1x1","2x2","crosses","dots","xlines","ylines"]},gridColor:{type:"color",default:"#ccc"}},multiple:!1,presets:{none:{},default:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:1,z:.33},fog:.78,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"checkerboard",groundColor:"#454545",groundColor2:"#5d5d5d",dressing:"none",dressingAmount:10,dressingColor:"#795449",dressingScale:1,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#ccc",shadow:!1},contact:{active:!0,seed:14,skyType:"gradient",skyColor:"#478d54",horizonColor:"#b696cb",lighting:"distant",lightPosition:{x:0,y:2.01,z:-1},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#2e455f",groundColor2:"#694439",dressing:"apparatus",dressingAmount:7,dressingColor:"#657067",dressingScale:20,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#478d54",shadow:!1},egypt:{active:!0,seed:26,skyType:"gradient",skyColor:"#1b7660",horizonColor:"#e4b676",lighting:"distant",lightPosition:{x:0,y:1.65,z:-1},fog:.75,flatShading:!1,playArea:1,ground:"hills",groundYScale:5,groundTexture:"walkernoise",groundColor:"#664735",groundColor2:"#6c4b39",dressing:"pyramids",dressingAmount:10,dressingColor:"#7c5c45",dressingScale:5,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},checkerboard:{active:!0,seed:1,skyType:"gradient",skyColor:"#0d0d0d",horizonColor:"#404040",lighting:"distant",lightPosition:{x:0,y:1,z:-.2},fog:.81,flatShading:!0,playArea:1,ground:"hills",groundYScale:4.81,groundTexture:"checkerboard",groundColor:"#252525",groundColor2:"#111111",dressing:"cubes",dressingAmount:10,dressingColor:"#9f9f9f",dressingScale:1.51,dressingVariance:{x:5,y:20,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#ccc",shadow:!1},forest:{active:!0,seed:8,skyType:"gradient",skyColor:"#24b59f",horizonColor:"#eff9b7",lighting:"distant",lightPosition:{x:-1.2,y:.88,z:-.55},fog:.8,flatShading:!1,playArea:1,ground:"noise",groundYScale:4.18,groundTexture:"squares",groundColor:"#937a24",groundColor2:"#987d2e",dressing:"trees",dressingAmount:500,dressingColor:"#888b1d",dressingScale:1,dressingVariance:{x:10,y:10,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#c5a543",shadow:!1},goaland:{active:!0,seed:17,skyType:"gradient",skyColor:"#14645f",horizonColor:"#a3dab8",lighting:"point",lightPosition:{x:.1,y:4,z:.56},fog:.73,flatShading:!1,playArea:1,ground:"noise",groundYScale:.81,groundTexture:"none",groundColor:"#ae3241",groundColor2:"#db4453",dressing:"mushrooms",dressingAmount:150,dressingColor:"#a9313d",dressingScale:5,dressingVariance:{x:5,y:10,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#239893",shadow:!1},yavapai:{active:!0,seed:11,skyType:"gradient",skyColor:"#239849",horizonColor:"#cfe0af",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!0,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#C66344",groundColor2:"#c96b4b",dressing:"stones",dressingAmount:500,dressingColor:"#C66344",dressingScale:.06,dressingVariance:{x:.2,y:.1,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},goldmine:{active:!0,seed:53,skyType:"gradient",skyColor:"#1e1c1a",horizonColor:"#8c7964",lighting:"point",lightPosition:{x:-.09,y:3,z:.33},fog:.43,flatShading:!0,playArea:1.08,ground:"canyon",groundYScale:50,groundTexture:"none",groundColor:"#353535",groundColor2:"#454545",dressing:"hexagons",dressingAmount:300,dressingColor:"#fe921b",dressingScale:.5,dressingVariance:{x:2,y:8,z:2},dressingUniformScale:!0,dressingOnPlayArea:.03,grid:"none",gridColor:"#ccc",shadow:!1},threetowers:{active:!0,seed:5,skyType:"gradient",skyColor:"#23a06b",horizonColor:"#f5e170",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.26,groundTexture:"walkernoise",groundColor:"#273a49",groundColor2:"#2b464f",dressing:"towers",dressingAmount:3,dressingColor:"#5f6d94",dressingScale:50,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#239893",shadow:!1},poison:{active:!0,seed:92,skyType:"gradient",skyColor:"#1ea84a",horizonColor:"#177132",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"none",groundColor:"#851f31",groundColor2:"#912235",dressing:"hexagons",dressingAmount:20,dressingColor:"#c7415b",dressingScale:20,dressingVariance:{x:20,y:200,z:20},dressingUniformScale:!1,dressingOnPlayArea:0,grid:"crosses",gridColor:"#1ea84a",shadow:!1},arches:{active:!0,seed:19,skyType:"atmosphere",skyColor:"#8cbdc8",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:.16,z:.33},fog:.67,flatShading:!0,playArea:1,ground:"canyon",groundYScale:10,groundTexture:"walkernoise",groundColor:"#a87d6f",groundColor2:"#795449",dressing:"arches",dressingAmount:6,dressingColor:"#795449",dressingScale:26,dressingVariance:{x:20,y:40,z:20},dressingUniformScale:!0,dressingOnPlayArea:.04,grid:"none",gridColor:"#ccc",shadow:!1},tron:{active:!0,seed:14,skyType:"gradient",skyColor:"#091b39",horizonColor:"#284a9e",lighting:"distant",lightPosition:{x:-.72,y:.62,z:.4},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#061123",groundColor2:"#694439",dressing:"towers",dressingAmount:5,dressingColor:"#fb000e",dressingScale:15,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#fb000e",shadow:!1},japan:{active:!0,seed:14,skyType:"gradient",skyColor:"#7e5db5",horizonColor:"#b4adda",lighting:"distant",lightPosition:{x:1.33,y:1,z:.24},fog:.9,flatShading:!1,playArea:1,ground:"hills",groundYScale:25,groundTexture:"walkernoise",groundColor:"#7e5db5",groundColor2:"#cabdf5",dressing:"torii",dressingAmount:4,dressingColor:"#bc5e7c",dressingScale:15,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},dream:{active:!0,seed:17,skyType:"gradient",skyColor:"#87faf4",horizonColor:"#b34093",lighting:"distant",lightPosition:{x:-.72,y:.53,z:.97},fog:.8,flatShading:!1,playArea:1,ground:"hills",groundYScale:20,groundTexture:"checkerboard",groundColor:"#b34093",groundColor2:"#c050a2",dressing:"mushrooms",dressingAmount:300,dressingColor:"#3cf7ed",dressingScale:.2,dressingVariance:{x:.2,y:.2,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},volcano:{active:!0,seed:92,skyType:"gradient",skyColor:"#4a070f",horizonColor:"#f62300",lighting:"point",lightPosition:{x:.5,y:2.25,z:0},fog:.87,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#fb0803",groundColor2:"#510000",dressing:"arches",dressingAmount:15,dressingColor:"#fb0803",dressingScale:3,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!1,dressingOnPlayArea:.2,grid:"none",gridColor:"#fa0e00",shadow:!1},starry:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:-.01,z:-.46},fog:.7,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#553e35",groundColor2:"#694439",dressing:"none",dressingAmount:100,dressingColor:"#795449",dressingScale:5,dressingVariance:{x:1,y:1,z:1},dressingUniformScale:!0,grid:"1x1",dressingOnPlayArea:0,gridColor:"#39d2f2",shadow:!1},osiris:{active:!0,seed:46,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:.02,z:-.46},fog:0,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#9e7b47",groundColor2:"#9e7b47",dressing:"pyramids",dressingAmount:7,dressingColor:"#9e7b47",dressingScale:5,dressingVariance:{x:30,y:30,z:30},dressingUniformScale:!0,grid:"dots",dressingOnPlayArea:0,gridColor:"#daa452",shadow:!1},moon:{active:!0,seed:11,skyType:"gradient",skyColor:"#000000",horizonColor:"#000000",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!0,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#D1D1D1",groundColor2:"#494949",dressing:"stones",dressingAmount:500,dressingColor:"#494949",dressingScale:.06,dressingVariance:{x:.2,y:.1,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1}},init:function(){this.environmentData={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.STAGE_SIZE=200,this.assets={arches:[{type:"mesh",vertices:[409,268,4,351,228,36,336,236,-57,-152,391,69,-135,358,88,-119,330,43,-20,358,-35,-153,357,-47,37,413,-26,-20,411,-14,-302,148,154,-339,121,-126,-389,200,-88,-477,193,-76,-314,346,-19,-314,306,-30,-250,296,-73,-267,237,-82,-212,303,-68,-245,200,-67,-223,304,108,-329,299,107,-289,350,76,-320,342,69,119,373,-39,38,370,8,113,367,52,492,202,-31,462,83,-104,447,71,-80,426,112,25,482,189,-7,222,372,6,121,402,41,87,382,67,221,346,55,559,93,-13,528,47,39,505,21,-111,528,54,-101,616,31,-53,442,256,-15,300,338,19,257,308,-79,408,256,-74,312,352,-26,384,297,-31,437,257,-47,-29,415,53,-232,377,59,-139,335,77,-132,344,2,-18,377,-37,-171,387,-28,-254,384,18,-651,-27,27,-435,-28,179,-345,149,165,-272,-28,23,-215,146,-2,-279,-29,-59,-211,145,-55,-337,-28,-128,-413,247,0,-293,363,24,-214,254,-36,-164,290,33,-284,150,94,-218,362,105,75,369,29,518,147,-63,447,190,-70,445,56,-105,391,185,-60,431,49,-33,459,83,26,470,162,42,130,390,53,167,341,-30,125,394,-45,239,368,-17,91,414,10,450,18,2,449,-27,-9,436,-28,-58,496,-27,-110,582,-28,-140,647,-27,-56,325,325,-45,-307,297,-56,-647,-28,-45,-188,310,-54,-264,197,113,-367,175,139,8,387,82,426,45,-55,114,359,-28,500,27,44,461,-29,13,-512,-27,-151,-152,376,-38,-490,-28,148,12,370,-28,442,160,42,465,194,32,381,183,-33,649,-27,-34,444,16,29,616,-28,25,417,267,-66,-132,352,-34,-322,-27,130,-271,86,-115,-635,-28,-121,-291,203,-99,176,405,-10,561,52,-93,371,305,9,311,237,-22,377,200,-81,-129,406,46,-154,371,99,-82,361,71,-21,354,26,-91,363,-27,-165,413,-12,-414,215,110,-238,127,26,-408,-28,-128,-674,-28,-94,-446,232,-39,-311,226,-90,-255,210,-61,-235,192,-11,-217,218,58,-269,299,124,-386,276,78,-399,281,42,15,373,58,16,393,75,549,107,-46,481,188,-68,409,120,-41,541,81,12,230,368,41,194,350,-50,224,361,-50,604,-28,-10,602,-27,35,486,56,-121,502,69,-120,457,-27,-110,226,317,-40,-584,-28,-124,439,-26,-30,467,-26,39,547,-27,-146,21,368,14,466,229,-29,578,-27,44,609,-27,-96,291,356,-15,290,306,34,255,321,28,231,311,-5,-251,386,50,-183,307,87,-152,307,24,-264,373,-12,-392,-27,190,-333,-28,84,-281,-27,54,-270,-28,-23,-308,-28,-101,-687,-27,-59,39,418,39,413,163,25,404,206,-90,54,400,-31,121,352,8,-454,41,148,-426,9,182,-564,115,3,-427,27,-107,-548,118,-32,-556,122,-53,-517,91,-101,-475,54,140,-461,52,-134,-558,119,-71,-434,286,59,-687,-31,52,-595,146,22,-670,-28,164,-537,166,122,-575,-28,217,-566,159,65,-470,152,136,-712,-29,102,-639,-29,211,-532,-30,181,-442,-30,-100],faces:[76,104,162,1,176,103,103,76,1,2,119,73,73,105,2,2,118,152,45,161,46,46,109,45,3,120,49,49,68,3,3,121,139,139,48,3,4,122,94,94,121,4,6,123,124,9,175,81,10,169,111,10,67,92,88,43,146,11,131,114,11,128,183,13,130,15,90,184,174,90,182,184,130,184,63,14,130,63,15,130,14,16,131,12,15,168,53,18,91,17,131,16,17,65,133,132,65,132,91,67,134,166,166,92,67,20,135,92,20,166,4,4,121,20,22,135,68,25,102,96,25,157,102,69,138,157,69,157,25,39,150,71,71,141,39,28,150,149,149,72,28,142,176,105,36,140,27,27,143,36,32,115,81,32,144,161,161,80,32,77,35,144,34,26,77,78,179,96,145,152,78,178,79,145,80,146,79,147,140,36,143,108,36,143,37,148,74,95,154,154,83,74,72,149,151,151,95,72,38,150,156,40,147,106,70,140,40,40,116,70,42,162,0,35,163,162,43,145,146,46,117,41,47,158,27,48,139,175,122,138,94,157,138,123,52,178,102,52,102,6,52,124,7,7,100,52,53,125,8,57,93,181,56,169,181,59,127,58,60,173,61,62,128,11,11,112,62,65,91,167,65,167,66,126,93,21,22,68,49,72,95,29,142,29,74,74,82,142,75,107,97,75,97,103,76,97,37,104,143,31,78,152,164,78,164,179,79,178,8,97,155,159,107,98,155,83,98,82,154,95,84,39,116,86,86,156,39,87,160,116,24,145,96,162,104,0,105,118,2,43,177,119,44,177,43,91,51,167,44,88,109,46,161,117,3,68,121,3,48,120,4,166,50,50,122,4,5,123,122,123,138,122,110,124,51,170,10,111,110,91,7,7,124,110,8,125,9,9,81,8,186,12,188,92,135,10,11,114,112,64,63,137,13,15,89,89,53,100,64,168,14,14,168,15,89,100,16,16,12,89,100,18,16,17,91,132,112,19,61,18,7,91,19,17,132,133,127,59,133,59,61,136,21,22,134,127,133,20,92,166,121,135,20,158,31,27,21,135,22,23,137,136,24,102,178,178,145,24,25,179,69,26,94,138,27,140,70,27,70,141,150,177,71,28,177,150,29,142,73,73,119,29,142,82,30,30,176,142,107,75,82,31,143,27,33,81,175,31,41,104,115,79,8,32,33,144,80,115,32,33,175,139,35,162,42,77,139,34,163,26,179,163,179,164,78,96,145,177,29,119,108,143,148,148,37,159,97,159,37,74,83,82,38,149,150,156,150,39,40,106,87,87,116,40,140,147,40,161,144,42,42,117,161,41,0,104,41,117,0,0,117,42,164,118,163,1,163,118,118,176,1,118,105,176,152,118,164,43,152,145,43,119,2,71,109,141,47,41,158,44,71,177,45,109,88,45,88,146,46,47,109,141,47,27,167,50,166,49,120,165,139,121,94,5,122,50,123,51,124,157,6,102,157,123,6,100,8,178,5,167,51,6,124,52,100,178,52,53,168,125,125,165,120,54,125,168,9,48,175,120,9,125,93,10,135,181,101,56,57,169,10,59,172,61,67,170,171,67,171,127,58,127,171,129,186,113,60,61,172,61,173,112,62,112,173,174,189,129,165,64,23,64,137,23,165,22,49,64,54,168,17,114,131,17,112,114,66,133,65,19,132,133,19,133,61,134,133,66,166,134,66,166,66,167,93,135,21,68,135,121,23,136,22,94,34,139,25,96,179,26,138,69,69,179,26,30,103,176,116,141,70,39,141,116,73,142,105,143,76,37,26,35,77,103,97,76,77,144,33,33,139,77,38,151,149,80,161,45,80,45,146,81,115,8,107,155,97,82,98,107,95,151,84,38,156,85,86,116,160,96,102,24,72,29,28,29,95,74,75,30,82,108,147,36,88,44,43,91,110,51,170,67,10,11,183,131,64,14,63,89,15,53,100,7,18,112,17,19,127,134,67,136,126,21,158,41,31,33,32,81,115,80,79,177,28,29,43,2,152,71,44,109,47,46,41,141,109,47,167,5,50,123,5,51,100,53,8,125,54,165,9,120,48,93,57,10,59,58,172,174,185,189,165,54,64,165,23,22,94,26,34,30,75,103,143,104,76,26,163,35,38,85,151,192,182,191,183,128,201,12,13,89,181,169,57,186,153,113,188,183,99,184,182,63,185,13,189,180,181,93,186,99,153,189,186,129,185,184,130,186,13,12,187,93,126,193,199,194,194,196,193,200,187,195,187,197,195,187,126,197,197,190,194,190,136,137,190,196,194,63,182,192,63,192,196,192,198,196,191,182,55,193,196,198,194,199,197,195,197,199,136,197,126,190,137,63,190,63,196,197,136,190,192,191,198,201,99,183,90,55,182,181,180,101,185,130,13,186,188,99,186,189,13,187,180,93,200,101,187,183,188,131,184,185,174,180,187,101,16,18,17,12,131,188,35,42,144,163,1,162,76,162,1,79,146,145]}],stones:[{type:"mesh",vertices:[-376,189,42,230,223,-310,353,162,-62,414,-23,-67,256,90,-475,24,85,-526,-418,-16,57,-432,66,-40,-199,151,-376,-155,49,467,-91,289,201,293,197,91,81,-17,-480,42,108,431,-359,-17,-250,383,-19,-243,194,-15,270,-272,180,293,-86,212,262,234,54,297,395,97,-302,-123,-21,-444,-416,-19,-123,-323,-18,267,-100,-16,429,-300,96,-361,163,-19,409,118,201,-431,-241,-18,391,-130,274,-309,306,-19,-399,-221,96,404],faces:[31,18,17,0,17,18,3,20,2,18,11,10,29,27,8,27,29,1,0,18,10,10,29,0,16,19,26,11,2,1,20,30,4,20,3,15,30,12,4,4,12,5,5,27,4,4,27,20,21,25,5,7,8,25,22,7,14,7,25,14,23,28,31,0,7,17,24,26,9,31,28,9,8,27,5,2,20,1,13,19,18,10,11,1,19,13,26,3,11,19,19,16,3,11,3,2,11,18,19,20,15,30,29,10,1,25,21,14,8,5,25,5,12,21,6,7,22,7,6,23,8,0,29,8,7,0,23,31,7,13,31,9,18,31,13,9,28,24,26,13,9,27,1,20,7,31,17]},{type:"mesh",vertices:[-217,34,-153,198,90,20,212,85,169,-131,93,171,197,113,30,173,121,164,315,29,-16,219,24,189,282,50,-102,232,38,-181,-195,-9,-166,-156,30,-207,-51,-9,-231,-180,91,-173,-19,73,-204,-280,23,96,-242,100,107,3,158,-82,109,88,221,275,-10,-40,236,-10,-135,-178,49,184,-1,-10,-243,265,-11,109,-12,-9,237,-36,46,251,-233,86,-81,93,77,-171,-163,133,69,18,16,263,296,44,93,131,-12,-226,-89,-10,-201,-273,-10,-51,-240,-9,110,190,-12,192,-253,-11,-92,42,43,-258,-115,-11,238,168,99,-88,-285,-10,24,71,124,-158,298,-10,10,116,150,-24,-282,44,39],faces:[44,16,26,13,26,16,0,26,13,27,14,41,4,5,1,7,30,2,28,5,43,41,39,27,17,43,41,43,4,39,13,28,17,17,41,13,28,43,17,24,29,38,29,35,7,18,25,29,5,18,2,18,5,3,30,42,6,30,35,23,19,20,8,8,20,9,9,39,8,1,30,8,31,37,9,11,14,37,14,27,37,32,11,12,11,37,12,11,0,13,33,40,44,44,26,33,33,0,36,34,38,15,44,40,15,21,3,16,27,39,9,2,30,1,21,25,3,16,3,28,28,3,5,4,43,5,41,43,39,13,16,28,25,21,38,38,29,25,7,18,29,29,24,35,18,7,2,18,3,25,30,23,42,30,7,35,8,30,6,6,19,8,6,42,19,8,39,1,37,31,22,27,9,37,9,20,31,10,11,32,11,10,0,12,37,22,14,13,41,14,11,13,33,26,0,36,0,10,21,44,15,16,44,21,15,40,34,38,21,15,4,1,39,5,2,1]},{type:"mesh",vertices:[-101,102,57,99,35,102,40,72,80,59,14,-168,-186,22,45,-176,25,-30,66,-7,146,153,-7,53,-110,47,-96,-90,-8,-146,150,-7,-12,-200,-7,8,-173,-7,-55,55,46,-60,125,-7,110,136,30,-10,-149,58,68,-15,82,-71,98,-7,-86,-34,-6,-194,-33,-7,171,-36,65,137,38,-8,-192,-103,-9,147,-12,62,-152],faces:[2,17,0,17,8,0,17,24,8,19,24,22,5,11,4,2,13,17,17,13,24,21,23,20,1,2,21,7,15,1,7,10,15,5,9,12,15,18,13,0,5,16,0,8,5,1,15,2,10,18,15,3,13,18,24,3,22,11,23,4,4,16,5,16,4,23,24,13,3,15,13,2,6,1,21,6,21,20,6,14,1,2,0,21,1,14,7,3,18,22,8,24,19,8,19,9,12,11,5,5,8,9,16,23,21,16,21,0]},{type:"mesh",vertices:[86,55,-18,58,38,73,97,-12,79,135,7,10,-93,-11,-72,-133,5,33,13,68,-32,94,-11,-57,-90,52,53,-24,-11,-106,-13,-10,104,-75,49,-69,-12,18,114,49,-12,-96,-46,-11,-85,-119,-11,-26,48,5,-111,-58,-11,105,-117,-12,52,-5,35,-93,123,-11,7],faces:[5,8,11,2,3,1,8,1,6,11,8,6,6,19,11,10,12,17,20,7,3,3,7,16,16,0,3,16,9,19,14,4,9,15,18,5,5,11,15,18,17,5,19,0,16,1,3,0,0,6,1,19,6,0,12,8,17,2,1,12,12,10,2,1,8,12,3,2,20,16,13,9,16,7,13,19,4,11,15,11,4,17,8,5,9,4,19]}],torii:[{type:"mesh",mirror:!0,flatShading:!0,vertices:[692,966,-52,661,834,-52,692,966,52,661,834,52,0,894,-52,0,776,-52,0,894,52,0,776,52,518,935,52,345,913,52,170,899,52,162,779,52,328,790,52,494,808,52,170,899,-52,345,913,-52,518,935,-52,494,808,-52,328,790,-52,162,779,-52,0,618,16,0,697,16,0,618,-16,0,697,-16,586,618,16,586,697,16,586,618,-16,586,697,-16,331,-29,-75,331,766,-52,369,-29,-65,357,766,-45,396,-29,-37,377,766,-26,406,-29,0,384,766,0,396,-29,37,377,766,26,369,-29,65,357,766,45,331,-29,75,331,766,52,294,-29,65,305,766,45,267,-29,37,286,766,26,257,-29,0,279,766,0,267,-29,-37,286,766,-26,294,-29,-65,305,766,-45,0,777,85,0,681,33,333,762,-75,333,806,-75,371,762,-65,371,806,-65,398,762,-37,398,806,-37,408,762,0,408,806,0,398,762,37,398,806,37,371,762,65,371,806,65,333,762,75,333,806,75,296,762,65,296,806,65,268,762,37,268,806,37,258,762,0,258,806,0,268,762,-37,268,806,-37,296,762,-65,296,806,-65,0,681,-33,0,777,-85,52,681,33,52,777,85,52,681,-33,52,777,-85],faces:[4,10,14,1,13,17,11,6,7,0,3,1,16,1,17,4,19,5,14,18,19,15,17,18,3,8,13,13,9,12,12,10,11,19,7,5,19,12,11,18,13,12,16,2,0,15,8,16,14,9,15,23,26,22,27,24,26,25,20,24,26,20,22,23,25,27,29,30,28,31,32,30,33,34,32,35,36,34,37,38,36,39,40,38,41,42,40,43,44,42,45,46,44,47,48,46,49,50,48,51,28,50,55,56,54,57,58,56,59,60,58,61,62,60,63,64,62,79,81,83,65,66,64,82,53,78,67,68,66,81,53,80,69,70,68,83,80,82,71,72,70,79,82,78,73,74,72,75,63,59,75,76,74,77,54,76,60,68,76,4,6,10,1,3,13,11,10,6,0,2,3,16,0,1,4,14,19,14,15,18,15,16,17,3,2,8,13,8,9,12,9,10,19,11,7,19,18,12,18,17,13,16,8,2,15,9,8,14,10,9,23,27,26,27,25,24,25,21,20,26,24,20,23,21,25,29,31,30,31,33,32,33,35,34,35,37,36,37,39,38,39,41,40,41,43,42,43,45,44,45,47,46,47,49,48,49,51,50,51,29,28,55,57,56,57,59,58,59,61,60,61,63,62,63,65,64,79,52,81,65,67,66,82,80,53,67,69,68,81,52,53,69,71,70,83,81,80,71,73,72,79,83,82,73,75,74,59,57,55,55,77,75,75,73,71,71,69,75,67,65,63,63,61,59,59,55,75,75,69,67,67,63,75,75,77,76,77,55,54,76,54,56,56,58,76,60,62,68,64,66,68,68,70,72,72,74,68,76,58,60,62,64,68,68,74,76]}],hexagons:[{type:"extrude",vertices:[-.198,-.302,.197,-.3,.372,0,.199,.298,-.202,.298,-.368,0]}],towers:[{type:"extrude",vertices:[-.054,-.178,-.007,-.182,.069,-.027,.189,.079,.178,.124,-.007,.097,-.145,.182,-.178,.144,-.079,-.021]},{type:"lathe",segments:4,vertices:[.004,.02,.012,.092,.042,.166,.067,.55,.101,.594,.105,.838,.193,.934,.18,.994]},{type:"lathe",segments:5,vertices:[.069,.216,.067,.562,.126,.562,.128,.774,.191,.774,.193,.986]}],trees:[{type:"lathe",noise:.015,segments:6,vertices:[1e-6,.826,.054,.832,.105,.854,.136,.9,.136,.958,.118,.994]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.01,.069,.022,.13,.068,.178,.18,.189,.32,.191,.59,.193,.75,.138,.79,.018,.808,.018,.996]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.436,.126,.46,.201,.57,.219,.72,.154,.846,.028,.884,.034,.996]}],apparatus:[{type:"lathe",segments:10,vertices:[1e-6,.23,.042,.23,.069,.36,.038,.362,.038,.372,.06,.372,.073,.572,.024,.572,.024,.67,.069,.67,.075,.722,.097,.724,.105,.852,.083,.902,.065,.902,.065,.924,.128,.924,.146,.996]},{type:"lathe",segments:16,vertices:[1e-6,.232,.229,.182,.486,.07,.356,.182,.213,.242,.154,.242,.144,.262,.178,.262,.126,.314,.04,.328,.038,.374,.058,.374,.071,.408,.026,.406,.03,.42,.091,.418,.034,.496,.01,.498,.03,.506,.014,.998]}],mushrooms:[{type:"lathe",noise:.02,segments:14,vertices:[1e-6,.006,.13,.018,.341,.084,.437,.144,.492,.234,.484,.246,.276,.232,.107,.284,.046,.346,.062,.852,.097,.956,.166,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.562,.091,.572,.172,.61,.223,.666,.256,.74,.258,.806,.246,.824,.062,.826,.065,.948,.097,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.768,.099,.772,.219,.802,.306,.844,.352,.886,.352,.908,.118,.904,.107,.93,.115,.966,.14,.996]}]};for(var d in this.assets)for(var k=0;k<this.assets[d].length;k++){var K=this.assets[d][k];if(K.type=="mesh")for(var S=0,I=K.vertices.length;S<I;S++)K.vertices[S]/=1e3}this.userFog=this.el.sceneEl.getAttribute("fog"),this.sky=document.createElement("a-sky"),this.sky.setAttribute("radius",this.STAGE_SIZE),this.sky.setAttribute("theta-length",110),this.sky.classList.add("environment"),this.stars=null,this.groundMaterial=null,this.ground=document.createElement("a-entity"),this.ground.setAttribute("rotation","-90 0 0"),this.ground.classList.add("environmentGround"),this.ground.classList.add("environment"),this.groundCanvas=null,this.groundTexture=null,this.groundMaterial=null,this.groundGeometry=null,this.dressing=document.createElement("a-entity"),this.dressing.classList.add("environmentDressing"),this.dressing.classList.add("environment"),this.gridCanvas=null,this.gridTexture=null,this.hemilight=document.createElement("a-entity"),this.hemilight.classList.add("environment"),this.hemilight.setAttribute("position","0 50 0"),this.hemilight.setAttribute("light",{type:"hemisphere",color:"#CEE4F0",intensity:.4}),this.sunlight=document.createElement("a-entity"),this.sunlight.classList.add("environment"),this.sunlight.setAttribute("position",this.data.lightPosition),this.sunlight.setAttribute("light",{intensity:.6}),this.el.appendChild(this.hemilight),this.el.appendChild(this.sunlight),this.el.appendChild(this.ground),this.el.appendChild(this.dressing),this.el.appendChild(this.sky)},getFogColor:function(d,k){var K;if(d=="color"||d=="none")K=new THREE.Color().setStyle(this.environmentData.skyColor,THREE.NoColorSpace);else if(d=="gradient")K=new THREE.Color().setStyle(this.environmentData.horizonColor,THREE.NoColorSpace);else if(d=="atmosphere"){var S=[1,.5,.22,.1,.05,0],I=["#C0CDCF","#81ADC5","#525e62","#2a2d2d","#141616","#000"];if(k<=0)return"#000";k=Math.min(1,k);for(var h=0;h<S.length;h++)if(k>S[h]){var g=new THREE.Color().setStyle(I[h-1],THREE.NoColorSpace),C=new THREE.Color().setStyle(I[h],THREE.NoColorSpace),v=(k-S[h])/(S[h-1]-S[h]);C.lerp(g,v),K=C;break}}return K.multiplyScalar(.9),K.lerp(new THREE.Color().setStyle(this.data.groundColor,THREE.NoColorSpace),.3),K.setRGB(K.r,K.g,K.b,THREE.SRGBColorSpace),"#"+K.getHexString()},update:function(d){var k;this.data.preset?(k=AFRAME.utils.clone(this.environmentData),this.environmentData={},Object.assign(this.environmentData,this.data),Object.assign(this.environmentData,this.presets[this.data.preset]),Object.assign(this.environmentData,this.el.components.environment.attrValue),console.log(this.environmentData)):(k=d,this.environmentData=this.data);var K=this.environmentData.skyType,S=new THREE.Vector3(this.environmentData.lightPosition.x,this.environmentData.lightPosition.y,this.environmentData.lightPosition.z);if(S.normalize(),this.sunlight){if(this.sunlight.setAttribute("position",this.environmentData.lightPosition),K!="atmosphere"){var I=new THREE.Color().setStyle(this.environmentData.skyColor,THREE.NoColorSpace);I.setRGB((I.r+1)/2,(I.g+1)/2,(I.b+1)/2,THREE.SRGBColorSpace),this.hemilight.setAttribute("light",{color:"#"+I.getHexString(),intensity:.6}),this.sunlight.setAttribute("light",{intensity:.6})}else this.hemilight.setAttribute("light",{color:"#CEE4F0",intensity:.1+.5*S.y}),this.sunlight.setAttribute("light",{intensity:.1+.5*S.y});this.sunlight.setAttribute("light",{castShadow:this.environmentData.shadow,shadowCameraLeft:-this.environmentData.shadowSize,shadowCameraBottom:-this.environmentData.shadowSize,shadowCameraRight:this.environmentData.shadowSize,shadowCameraTop:this.environmentData.shadowSize})}if(K!==k.skyType||this.environmentData.skyColor!=k.skyColor||this.environmentData.horizonColor!=k.horizonColor){var h={};h.shader={none:"flat",color:"flat",gradient:"gradientshader",atmosphere:"skyshader"}[K],this.stars&&this.stars.setAttribute("visible",K=="atmosphere"),K=="color"?(h.color=this.environmentData.skyColor,h.fog=!1):K=="gradient"&&(h.topColor=new THREE.Color().setStyle(this.environmentData.skyColor,THREE.NoColorSpace),h.bottomColor=new THREE.Color().setStyle(this.environmentData.horizonColor,THREE.NoColorSpace)),this.sky.setAttribute("material",h)}K=="atmosphere"&&(this.sky.setAttribute("material",{sunPosition:S}),this.setStars(2e3*(1-Math.max(0,8*(S.y+.08))))),this.environmentData.fog>0?this.el.sceneEl.setAttribute("fog",{color:this.getFogColor(K,S.y),far:(1.01-this.environmentData.fog)*this.STAGE_SIZE*2}):this.el.sceneEl.removeAttribute("fog"),this.sunlight.setAttribute("light",{type:this.environmentData.lighting=="point"?"point":"directional"}),this.sunlight.setAttribute("visible",this.environmentData.lighting!=="none"),this.hemilight.setAttribute("visible",this.environmentData.lighting!=="none");var g=!this.groundGeometry||this.environmentData.seed!=k.seed||this.environmentData.ground!=k.ground||this.environmentData.playArea!=k.playArea||this.environmentData.flatShading!=k.flatShading;(g||this.environmentData.groundColor!=k.groundColor||this.environmentData.groundColor2!=k.groundColor2||this.environmentData.groundYScale!=k.groundYScale||this.environmentData.groundTexture!=k.groundTexture||this.environmentData.gridColor!=k.gridColor||this.environmentData.grid!=k.grid)&&(this.updateGround(g),this.hemilight&&this.hemilight.setAttribute("light",{groundColor:this.environmentData.groundColor})),this.environmentData.seed==k.seed&&this.environmentData.dressingOnPlayArea==k.dressingOnPlayArea&&this.environmentData.dressing==k.dressing&&this.environmentData.flatShading==k.flatShading&&this.environmentData.dressingAmount==k.dressingAmount&&this.environmentData.dressingScale==k.dressingScale&&this.environmentData.dressingColor==k.dressingColor&&this.environmentData.dressingVariance.x==k.dressingVariance.x&&this.environmentData.dressingVariance.y==k.dressingVariance.y&&this.environmentData.dressingVariance.z==k.dressingVariance.z&&this.environmentData.dressingUniformScale==k.dressingUniformScale||this.updateDressing(),this.sky.setAttribute("visible",K!=="none"),this.el.setAttribute("visible",this.environmentData.active),this.environmentData.active||(this.userFog?this.el.sceneEl.setAttribute("fog",this.userFog):this.el.sceneEl.removeAttribute("fog")),this.dumpParametersDiff()},logPreset:function(){var d="{";for(var k in this.schema)if(k!="preset"){d+=k+": ";var K=this.schema[k].type;d+=K=="vec3"?"{ x: "+this.environmentData[k].x+", y: "+this.environmentData[k].y+", z: "+this.environmentData[k].z+"}":K=="string"||K=="color"?'"'+this.environmentData[k]+'"':this.environmentData[k],d+=", "}d+="}",console.log(d)},dumpParametersDiff:function(){function d(v){return Math.floor(1e3*v)/1e3}var k=[],K=this.data.preset!="none"&&this.presets[this.data.preset];K&&k.push("preset: "+this.data.preset);for(var S in this.schema)if(!(S=="preset"||K&&K[S]===void 0)){var I=K?K[S]:this.schema[S].default,h=this.environmentData[S],g=this.schema[S].type;if(g=="vec3"){var C=I;typeof I=="string"&&(I=I.split(" "),C={x:I[0],y:I[1],z:I[2]}),d(C.x)==d(h.x)&&d(C.y)==d(h.y)&&d(C.z)==d(h.z)||k.push(S+": "+d(h.x)+" "+d(h.y)+" "+d(h.z))}else I!=h&&(this.schema[S].type=="number"&&(h=d(h)),k.push(S+": "+h))}console.log("%c"+k.join("; "),"color: #f48;font-weight:bold")},random:function(d){return parseFloat("0."+Math.sin(9999*this.environmentData.seed*d).toString().substr(7))},updateGround:function(d){var k=64;if(d){var K=this.environmentData.ground!="none";if(this.ground.setAttribute("visible",K),!K)return;this.groundGeometry||(this.groundGeometry=new THREE.PlaneGeometry(this.STAGE_SIZE+2,this.STAGE_SIZE+2,k-1,k-1));for(var S=new W(this.environmentData.seed),I=this.groundGeometry.attributes.position.array,h=I.length,g=10,C=g/k,v=0,y=0,E=2;E<h;E+=3)if(this.environmentData.ground!="flat"){var _;switch(this.environmentData.ground){case"hills":_=Math.max(0,S.noise(v,y,0));break;case"canyon":_=.2+.8*S.noise(v,y,0),_=Math.min(1,10*Math.pow(_,2));break;case"spikes":_=this.random(E)<.02?this.random(E+1):0;break;case"noise":_=this.random(E)<.35?this.random(E+1):0}_+=.1*this.random(E+2);var m=2*v/g-1,w=2*y/g-1,b=this.environmentData.playArea;m=Math.max(0,Math.min(1,(Math.abs(m)-(b-.9))*(1/b))),w=Math.max(0,Math.min(1,(Math.abs(w)-(b-.9))*(1/b))),_*=m>w?m:w,_<.01&&(_=0),I[E]=_,v+=C,v>=10&&(v=0,y+=C)}else I[E]=0;this.groundGeometry.computeVertexNormals(),this.groundGeometry.attributes.position.needsUpdate=!0,this.groundGeometry.attributes.normal.needsUpdate=!0}this.ground.setAttribute("scale",{z:this.environmentData.groundYScale});var O=2048,R=20,L=this.STAGE_SIZE/R;this.groundCanvas&&this.groundCanvas.width==O||(this.gridCanvas=document.createElement("canvas"),this.gridCanvas.width=O,this.gridCanvas.height=O,this.gridTexture=new THREE.Texture(this.gridCanvas),this.gridTexture.wrapS=THREE.RepeatWrapping,this.gridTexture.wrapT=THREE.RepeatWrapping,this.gridTexture.repeat.set(L,L),this.rendererSystem.applyColorCorrection(this.gridTexture),this.groundCanvas=document.createElement("canvas"),this.groundCanvas.width=O,this.groundCanvas.height=O,this.groundTexture=new THREE.Texture(this.groundCanvas),this.groundTexture.wrapS=THREE.RepeatWrapping,this.groundTexture.wrapT=THREE.RepeatWrapping,this.groundTexture.repeat.set(L,L),this.rendererSystem.applyColorCorrection(this.groundTexture),this.groundMaterialProps={map:this.groundTexture,emissive:new THREE.Color(16777215),emissiveMap:this.gridTexture},new THREE.Material().hasOwnProperty("shading")?this.groundMaterialProps.shading=this.environmentData.flatShading?THREE.FlatShading:THREE.SmoothShading:this.groundMaterialProps.flatShading=this.environmentData.flatShading,this.groundMaterial=new THREE.MeshLambertMaterial(this.groundMaterialProps));var P=this.groundCanvas.getContext("2d"),Y=this.gridCanvas.getContext("2d");if(this.drawTexture(P,O,R),Y.fillStyle="#000000",Y.fillRect(0,0,O,O),this.drawGrid(Y,O,R),this.groundTexture.needsUpdate=!0,this.gridTexture.needsUpdate=!0,d){var J=new THREE.Mesh(this.groundGeometry,this.groundMaterial);this.ground.setObject3D("mesh",J)}else this.ground.getObject3D("mesh").material=this.groundMaterial;this.ground.setAttribute("shadow",{cast:!1,receive:this.environmentData.shadow})},drawGrid:function(d,k,K){if(this.environmentData.grid!="none"){var S,I,h,g=Math.floor(K/2),C=k/(K/2);switch(d.fillStyle=this.environmentData.gridColor,this.environmentData.grid){case"1x1":case"2x2":for(this.environmentData.grid=="1x1"&&(g*=2,C=k/K),S=0;S<g;S++)h=Math.floor(S*C),d.fillRect(0,h,k,1),d.fillRect(h,0,1,k);break;case"crosses":var v=Math.floor(C/20);for(S=0;S<g+1;S++)for(h=Math.floor(S*C),I=0;I<g+1;I++){var y=Math.floor(-v+I*C);d.fillRect(y,h,2*v,1),d.fillRect(h,y,1,2*v)}break;case"dots":for(S=0;S<g+1;S++)for(I=0;I<g+1;I++)d.beginPath(),d.arc(Math.floor(I*C),Math.floor(S*C),4,0,2*Math.PI),d.fill();break;case"xlines":for(S=0;S<g;S++)d.fillRect(Math.floor(S*C),0,1,k);break;case"ylines":for(S=0;S<g;S++)d.fillRect(0,Math.floor(S*C),k,1)}}},drawTexture:function(d,k,K){d.fillStyle=this.environmentData.groundColor,d.fillRect(0,0,k,k);var S,I,h,g,C,v,y;if(this.environmentData.groundTexture!="none")switch(this.environmentData.groundTexture){case"checkerboard":d.fillStyle=this.environmentData.groundColor2;var E=Math.floor(K/2),_=k/(K/2);for(S=0;S<E+1;S+=2)for(var m=0;m<E+1;m++)d.fillRect(Math.floor((S+m%2)*_),Math.floor(m*_),Math.floor(_),Math.floor(_));break;case"squares":var w=16,b=k/w;for(h=new THREE.Color().setStyle(this.environmentData.groundColor,THREE.NoColorSpace),g=new THREE.Color().setStyle(this.environmentData.groundColor2,THREE.NoColorSpace),S=0;S<w*w;S++)I=this.random(S+3)>.5?h.clone():g.clone(),I.addScalar(.1*this.random(S+3)-.05),d.fillStyle="#"+I.getHexString(THREE.NoColorSpace),d.fillRect(S%w*b,Math.floor(S/w)*b,b,b);break;case"noise":v=d.getImageData(0,0,k,k),C=v.data,h=new THREE.Color().setStyle(this.environmentData.groundColor,THREE.NoColorSpace),g=new THREE.Color().setStyle(this.environmentData.groundColor2,THREE.NoColorSpace);var O=new THREE.Color(g.r-h.r,g.g-h.g,g.b-h.b),R=new W;for(S=0,m=0,y=C.length;S<y;S+=4,m++){var L=R.noise(m%k/k*3,m/k/k*3,0);C[S+0]=Math.floor(255*(h.r+O.r*L)),C[S+1]=Math.floor(255*(h.g+O.g*L)),C[S+2]=Math.floor(255*(h.b+O.b*L))}d.putImageData(v,0,0);break;case"walkernoise":var P=Math.floor(k/2),Y=document.createElement("canvas");Y.width=P,Y.height=P;var J=Y.getContext("2d");J.fillStyle=this.environmentData.groundColor,J.fillRect(0,0,P,P),v=J.getImageData(0,0,P,P),C=v.data,h=new THREE.Color().setStyle(this.environmentData.groundColor,THREE.NoColorSpace),g=new THREE.Color().setStyle(this.environmentData.groundColor2,THREE.NoColorSpace);var j=[],U=1e3;for(S=0;S<U;S++)I=h.clone().lerp(g,Math.random()),j.push({x:Math.random()*P,y:Math.random()*P,r:Math.floor(255*I.r),g:Math.floor(255*I.g),b:Math.floor(255*I.b)});for(var te=5e3,ue=0;ue<te;ue++)for(S=0;S<U;S++){var xe=j[S],Ee=4*Math.floor(xe.y*P+xe.x);C[Ee+0]=xe.r,C[Ee+1]=xe.g,C[Ee+2]=xe.b,xe.x+=Math.floor(3*Math.random())-1,xe.y+=Math.floor(3*Math.random())-1,xe.x>=P&&(xe.x=xe.x-P),xe.y>=P&&(xe.y=xe.y-P),xe.x<0&&(xe.x=P+xe.x),xe.y<0&&(xe.y=P+xe.y)}J.putImageData(v,0,0),d.drawImage(Y,0,0,k,k)}},getAssetGeometry:function(d){function k(O,R){for(var L=(new THREE.Vector3,O.attributes.position.array),P=L.length,Y=0;Y<P;Y+=3)L[Y]=(g.random(Y)-.5)*R,L[Y+1]=(g.random(Y+P)-.5)*R,L[Y+2]=(g.random(Y+2*P)-.5)*R;O.attributes.position.needsUpdate=!0}if(!d)return null;for(var K,S,I,h=[],g=this,C=0;C<d.length;C++)if(d[C].type=="lathe"){var v=-99999,y=[];for(I=d[C].vertices,K=0;K<I.length;K+=2)y.push(new THREE.Vector2(I[K],I[K+1])),I[K+1]>v&&(v=I[K+1]);S=new THREE.LatheGeometry(y,d[C].segments||8),S.applyMatrix4(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI,0,0))),S.applyMatrix4(new THREE.Matrix4().makeTranslation(0,v,0)),S=S.toNonIndexed(),h.push(S)}else if(d[C].type=="extrude"){var E=new THREE.Shape;for(I=d[C].vertices,K=0;K<I.length;K+=2)K==0?E.moveTo(I[K],I[K+1]):E.lineTo(I[K],I[K+1]);S=new THREE.ExtrudeGeometry(E,{amount:1,bevelEnabled:!1}),S.applyMatrix4(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI/2,0,0))),d[C].noise&&k(S,d[C].noise),h.push(S)}else if(d[C].type=="mesh"){S=new THREE.BufferGeometry,I=d[C].vertices;var _=d[C].faces,m=new Float32Array(I);if(S.setIndex(_),S.setAttribute("position",new THREE.BufferAttribute(m,3)),d[C].mirror){var w=S.clone();w.applyMatrix4(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(0,Math.PI,0)));var b=THREE.BufferGeometryUtils.mergeGeometries||THREE.BufferGeometryUtils.mergeBufferGeometries;S=b([S,w])}d[C].noise&&k(S,d[C].noise),S=S.toNonIndexed(),S.computeVertexNormals(),h.push(S)}return h},updateDressing:function(){var d=new THREE.Object3D,k=[];if(this.dressing.setAttribute("visible",this.environmentData.dressing!="none"),this.environmentData.dressing!="none"){var K;switch(this.environmentData.dressing){case"cubes":K=[new THREE.BoxGeometry(1,1,1)],K[0].applyMatrix4(new THREE.Matrix4().makeTranslation(0,.5,0));break;case"pyramids":K=[new THREE.ConeGeometry(1,1,4,1,!0)],K[0].applyMatrix4(new THREE.Matrix4().makeTranslation(0,.5,0));break;case"cylinders":K=[new THREE.CylinderGeometry(.5,.5,1,8,1,!0)],K[0].applyMatrix4(new THREE.Matrix4().makeTranslation(0,.5,0));break;default:if(K=this.getAssetGeometry(this.assets[this.environmentData.dressing]),!K)return}for(var S=0,I=88343;S<this.environmentData.dressingAmount;S++,I++){var h,g=K[Math.floor(this.random(33+S)*K.length)].clone(),C=this.environmentData.dressingScale,v=new THREE.Vector3(this.environmentData.dressingVariance.x,this.environmentData.dressingVariance.y,this.environmentData.dressingVariance.z),y=this.random(I)<this.environmentData.dressingOnPlayArea;h=y?15*this.random(I+1):10+Math.max(v.x,v.z)+10*this.random(I+1)+this.random(I+2)*this.STAGE_SIZE/3;var E=this.random(I+3)*Math.PI*2,_=new THREE.Matrix4,m=this.random(I+4),w=this.environmentData.dressingUniformScale;_.compose(new THREE.Vector3(Math.cos(E)*h,0,Math.sin(E)*h),new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0,1,0),(this.random(I+5)-.5)*v.length()*Math.PI*2),new THREE.Vector3(C+(w?m:this.random(I+6))*v.x,C+(w?m:this.random(I+7))*v.y,C+(w?m:this.random(I+8))*v.z)),g.applyMatrix4(_),k.push(g)}var b=THREE.BufferGeometryUtils.mergeGeometries||THREE.BufferGeometryUtils.mergeBufferGeometries,O=b(k);O.attributes.position.needsUpdate=!0;var R=new THREE.MeshLambertMaterial({color:new THREE.Color(this.environmentData.dressingColor)});this.rendererSystem.applyColorCorrection(R.color);var L=new THREE.Mesh(O,R);d.add(L),this.dressing.setObject3D("mesh",d)}},createStars:function(){for(var d=2e3,k=new THREE.BufferGeometry,K=new Float32Array(3*d),S=this.STAGE_SIZE-1,I=new THREE.Vector3,h=0;h<K.length;h+=3)I.set(this.random(h+23)-.5,this.random(h+24),this.random(h+25)-.5),I.normalize(),I.multiplyScalar(S),K[h]=I.x,K[h+1]=I.y,K[h+2]=I.z;k.setAttribute("position",new THREE.BufferAttribute(K,3)),k.setDrawRange(0,0);var g=new THREE.PointsMaterial({size:.01,color:13421772,fog:!1});this.rendererSystem.applyColorCorrection(g.color),this.stars.setObject3D("mesh",new THREE.Points(k,g))},setStars:function(d){this.stars||(this.stars=document.createElement("a-entity"),this.stars.id="stars",this.createStars(),this.el.appendChild(this.stars)),d=Math.floor(Math.min(2e3,Math.max(0,d))),this.stars.getObject3D("mesh").geometry.setDrawRange(0,d)}}),AFRAME.registerShader("skyshader",{schema:{exposureBias:{type:"number",default:1,min:0,max:10,is:"uniform"},turbidity:{type:"number",default:2,min:0,max:20,is:"uniform"},reileigh:{type:"number",default:1,min:0,max:4,is:"uniform"},mieCoefficient:{type:"number",default:.005,min:0,max:.1,is:"uniform"},mieDirectionalG:{type:"number",default:.8,min:0,max:1,is:"uniform"},sunPosition:{type:"vec3",default:{x:0,y:0,z:-1},is:"uniform"},color:{type:"color",default:"#fff"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","#include <dithering_pars_fragment>","uniform sampler2D skySampler;","uniform vec3 sunPosition;","varying vec3 vWorldPosition;","vec3 cameraPos = vec3(0., 0., 0.);","uniform float exposureBias;","uniform float turbidity;","uniform float reileigh;","uniform float mieCoefficient;","uniform float mieDirectionalG;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float pn = 0.035;","const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);","const vec3 K = vec3(0.686, 0.678, 0.666);","const float v = 4.0;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3(0.0, 1.0, 0.0);","const float EE = 1000.0;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float cutoffAngle = pi/1.95;","const float steepness = 1.5;","vec3 totalRayleigh(vec3 lambda)","{","return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));","}","vec3 simplifiedRayleigh()","{","return 0.0005 / vec3(94, 40, 18);","}","float rayleighPhase(float cosTheta)","{   ","return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));","}","vec3 totalMie(vec3 lambda, vec3 K, float T)","{","float c = (0.2 * T ) * 10E-18;","return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;","}","float hgPhase(float cosTheta, float g)","{","return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));","}","float sunIntensity(float zenithAngleCos)","{","return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));","}","// Filmic ToneMapping http://filmicgames.com/archives/75","float A = 0.15;","float B = 0.50;","float C = 0.10;","float D = 0.20;","float E = 0.02;","float F = 0.30;","float W = 1000.0;","vec3 Uncharted2Tonemap(vec3 x)","{","return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;","}","void main() ","{","float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);","float reileighCoefficient = reileigh - (1.0* (1.0-sunfade));","vec3 sunDirection = normalize(sunPosition);","float sunE = sunIntensity(dot(sunDirection, up));","vec3 betaR = simplifiedRayleigh() * reileighCoefficient;","vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;","float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));","float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","vec3 Fex = exp(-(betaR * sR + betaM * sM));","float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);","float rPhase = rayleighPhase(cosTheta*0.5+0.5);","vec3 betaRTheta = betaR * rPhase;","float mPhase = hgPhase(cosTheta, mieDirectionalG);","vec3 betaMTheta = betaM * mPhase;","vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));","Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));","vec3 direction = normalize(vWorldPosition - cameraPos);","float theta = acos(direction.y); // elevation --> y-axis, [-pi/2, pi/2]","float phi = atan(direction.z, direction.x); // azimuth --> x-axis [-pi/2, pi/2]","vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);","vec3 L0 = vec3(0.1) * Fex;","float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);","L0 += (sunE * 19000.0 * Fex)*sundisk;","vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));","vec3 texColor = (Lin+L0);","texColor *= 0.04;","texColor += vec3(0.0,0.001,0.0025)*0.3;","vec3 curr = Uncharted2Tonemap(exposureBias*texColor);","vec3 color = curr*whiteScale;","vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));","gl_FragColor.rgb = retColor;","gl_FragColor.a = 1.0;","#include <dithering_fragment>","}"].join(`
`)}),AFRAME.registerShader("gradientshader",{schema:{topColor:{type:"color",default:"1 0 0",is:"uniform"},bottomColor:{type:"color",default:"0 0 1",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {"," vec4 worldPosition = modelMatrix * vec4( position, 1.0 );"," vWorldPosition = worldPosition.xyz;"," gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","#include <dithering_pars_fragment>","uniform vec3 bottomColor;","uniform vec3 topColor;","uniform float offset;","varying vec3 vWorldPosition;","void main() {"," float h = normalize( vWorldPosition ).y;"," gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max(h, 0.0 ), 0.8 ), 0.0 ) ), 1.0 );"," #include <dithering_fragment>","}"].join(`
`)});var W=function(d){var k;this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];var K;for(K=0;K<256;K++)k=parseFloat("0."+Math.sin(9999*d*K).toString().substr(7)),this.p[K]=Math.floor(256*k);for(this.perm=[],K=0;K<512;K++)this.perm[K]=this.p[255&K]};W.prototype.dot=function(d,k,K,S){return d[0]*k+d[1]*K+d[2]*S},W.prototype.mix=function(d,k,K){return(1-K)*d+K*k},W.prototype.fade=function(d){return d*d*d*(d*(6*d-15)+10)},W.prototype.noise=function(d,k,K){var S=Math.floor(d),I=Math.floor(k),h=Math.floor(K);d-=S,k-=I,K-=h,S&=255,I&=255,h&=255;var g=this.perm[S+this.perm[I+this.perm[h]]]%12,C=this.perm[S+this.perm[I+this.perm[h+1]]]%12,v=this.perm[S+this.perm[I+1+this.perm[h]]]%12,y=this.perm[S+this.perm[I+1+this.perm[h+1]]]%12,E=this.perm[S+1+this.perm[I+this.perm[h]]]%12,_=this.perm[S+1+this.perm[I+this.perm[h+1]]]%12,m=this.perm[S+1+this.perm[I+1+this.perm[h]]]%12,w=this.perm[S+1+this.perm[I+1+this.perm[h+1]]]%12,b=this.dot(this.grad3[g],d,k,K),O=this.dot(this.grad3[E],d-1,k,K),R=this.dot(this.grad3[v],d,k-1,K),L=this.dot(this.grad3[m],d-1,k-1,K),P=this.dot(this.grad3[C],d,k,K-1),Y=this.dot(this.grad3[_],d-1,k,K-1),J=this.dot(this.grad3[y],d,k-1,K-1),j=this.dot(this.grad3[w],d-1,k-1,K-1),U=this.fade(d),te=this.fade(k),ue=this.fade(K),xe=this.mix(b,O,U),Ee=this.mix(P,Y,U),V=this.mix(R,L,U),q=this.mix(J,j,U),Q=this.mix(xe,V,te),F=this.mix(Ee,q,te),z=this.mix(Q,F,ue);return z}}]);AFRAME.registerComponent("cursor-listener",{init(){this.el.addEventListener("click",function(u){let T=u.target.attributes["post-url"];T&&window.vueRouter.push(`/${T.value}`)})}});const my=RC(vM);my.use(DC());my.use(_E);my.mount("#trollfield-app");
//# sourceMappingURL=index.js.map
