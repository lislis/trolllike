(function(){const S=document.createElement("link").relList;if(S&&S.supports&&S.supports("modulepreload"))return;for(const U of document.querySelectorAll('link[rel="modulepreload"]'))d(U);new MutationObserver(U=>{for(const K of U)if(K.type==="childList")for(const T of K.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&d(T)}).observe(document,{childList:!0,subtree:!0});function W(U){const K={};return U.integrity&&(K.integrity=U.integrity),U.referrerpolicy&&(K.referrerPolicy=U.referrerpolicy),U.crossorigin==="use-credentials"?K.credentials="include":U.crossorigin==="anonymous"?K.credentials="omit":K.credentials="same-origin",K}function d(U){if(U.ep)return;U.ep=!0;const K=W(U);fetch(U.href,K)}})();function Q1(h,S){const W=Object.create(null),d=h.split(",");for(let U=0;U<d.length;U++)W[d[U]]=!0;return S?U=>!!W[U.toLowerCase()]:U=>!!W[U]}const ho={},lm=[],Ic=()=>{},s_=()=>!1,o_=/^on[^a-z]/,zA=h=>o_.test(h),j1=h=>h.startsWith("onUpdate:"),pa=Object.assign,W1=(h,S)=>{const W=h.indexOf(S);W>-1&&h.splice(W,1)},a_=Object.prototype.hasOwnProperty,Cs=(h,S)=>a_.call(h,S),Fr=Array.isArray,cm=h=>VA(h)==="[object Map]",Y2=h=>VA(h)==="[object Set]",is=h=>typeof h=="function",na=h=>typeof h=="string",K1=h=>typeof h=="symbol",fo=h=>h!==null&&typeof h=="object",q2=h=>fo(h)&&is(h.then)&&is(h.catch),J2=Object.prototype.toString,VA=h=>J2.call(h),l_=h=>VA(h).slice(8,-1),Z2=h=>VA(h)==="[object Object]",X1=h=>na(h)&&h!=="NaN"&&h[0]!=="-"&&""+parseInt(h,10)===h,LA=Q1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),QA=h=>{const S=Object.create(null);return W=>S[W]||(S[W]=h(W))},c_=/-(\w)/g,hu=QA(h=>h.replace(c_,(S,W)=>W?W.toUpperCase():"")),u_=/\B([A-Z])/g,Am=QA(h=>h.replace(u_,"-$1").toLowerCase()),jA=QA(h=>h.charAt(0).toUpperCase()+h.slice(1)),m1=QA(h=>h?`on${jA(h)}`:""),$g=(h,S)=>!Object.is(h,S),g1=(h,S)=>{for(let W=0;W<h.length;W++)h[W](S)},FA=(h,S,W)=>{Object.defineProperty(h,S,{configurable:!0,enumerable:!1,value:W})},h_=h=>{const S=parseFloat(h);return isNaN(S)?h:S};let n2;const M1=()=>n2||(n2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Y1(h){if(Fr(h)){const S={};for(let W=0;W<h.length;W++){const d=h[W],U=na(d)?m_(d):Y1(d);if(U)for(const K in U)S[K]=U[K]}return S}else{if(na(h))return h;if(fo(h))return h}}const d_=/;(?![^(]*\))/g,f_=/:([^]+)/,p_=/\/\*[^]*?\*\//g;function m_(h){const S={};return h.replace(p_,"").split(d_).forEach(W=>{if(W){const d=W.split(f_);d.length>1&&(S[d[0].trim()]=d[1].trim())}}),S}function nd(h){let S="";if(na(h))S=h;else if(Fr(h))for(let W=0;W<h.length;W++){const d=nd(h[W]);d&&(S+=d+" ")}else if(fo(h))for(const W in h)h[W]&&(S+=W+" ");return S.trim()}const g_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",A_=Q1(g_);function $2(h){return!!h||h===""}const ex=h=>na(h)?h:h==null?"":Fr(h)||fo(h)&&(h.toString===J2||!is(h.toString))?JSON.stringify(h,tx,2):String(h),tx=(h,S)=>S&&S.__v_isRef?tx(h,S.value):cm(S)?{[`Map(${S.size})`]:[...S.entries()].reduce((W,[d,U])=>(W[`${d} =>`]=U,W),{})}:Y2(S)?{[`Set(${S.size})`]:[...S.values()]}:fo(S)&&!Fr(S)&&!Z2(S)?String(S):S;let Rl;class nx{constructor(S=!1){this.detached=S,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Rl,!S&&Rl&&(this.index=(Rl.scopes||(Rl.scopes=[])).push(this)-1)}get active(){return this._active}run(S){if(this._active){const W=Rl;try{return Rl=this,S()}finally{Rl=W}}}on(){Rl=this}off(){Rl=this.parent}stop(S){if(this._active){let W,d;for(W=0,d=this.effects.length;W<d;W++)this.effects[W].stop();for(W=0,d=this.cleanups.length;W<d;W++)this.cleanups[W]();if(this.scopes)for(W=0,d=this.scopes.length;W<d;W++)this.scopes[W].stop(!0);if(!this.detached&&this.parent&&!S){const U=this.parent.scopes.pop();U&&U!==this&&(this.parent.scopes[this.index]=U,U.index=this.index)}this.parent=void 0,this._active=!1}}}function ix(h){return new nx(h)}function v_(h,S=Rl){S&&S.active&&S.effects.push(h)}function rx(){return Rl}function y_(h){Rl&&Rl.cleanups.push(h)}const q1=h=>{const S=new Set(h);return S.w=0,S.n=0,S},sx=h=>(h.w&td)>0,ox=h=>(h.n&td)>0,x_=({deps:h})=>{if(h.length)for(let S=0;S<h.length;S++)h[S].w|=td},E_=h=>{const{deps:S}=h;if(S.length){let W=0;for(let d=0;d<S.length;d++){const U=S[d];sx(U)&&!ox(U)?U.delete(h):S[W++]=U,U.w&=~td,U.n&=~td}S.length=W}},NA=new WeakMap;let jg=0,td=1;const T1=30;let Tc;const Tf=Symbol(""),S1=Symbol("");class J1{constructor(S,W=null,d){this.fn=S,this.scheduler=W,this.active=!0,this.deps=[],this.parent=void 0,v_(this,d)}run(){if(!this.active)return this.fn();let S=Tc,W=Zh;for(;S;){if(S===this)return;S=S.parent}try{return this.parent=Tc,Tc=this,Zh=!0,td=1<<++jg,jg<=T1?x_(this):i2(this),this.fn()}finally{jg<=T1&&E_(this),td=1<<--jg,Tc=this.parent,Zh=W,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Tc===this?this.deferStop=!0:this.active&&(i2(this),this.onStop&&this.onStop(),this.active=!1)}}function i2(h){const{deps:S}=h;if(S.length){for(let W=0;W<S.length;W++)S[W].delete(h);S.length=0}}let Zh=!0;const ax=[];function vm(){ax.push(Zh),Zh=!1}function ym(){const h=ax.pop();Zh=h===void 0?!0:h}function nl(h,S,W){if(Zh&&Tc){let d=NA.get(h);d||NA.set(h,d=new Map);let U=d.get(W);U||d.set(W,U=q1()),lx(U)}}function lx(h,S){let W=!1;jg<=T1?ox(h)||(h.n|=td,W=!sx(h)):W=!h.has(Tc),W&&(h.add(Tc),Tc.deps.push(h))}function nh(h,S,W,d,U,K){const T=NA.get(h);if(!T)return;let I=[];if(S==="clear")I=[...T.values()];else if(W==="length"&&Fr(h)){const u=Number(d);T.forEach((g,C)=>{(C==="length"||C>=u)&&I.push(g)})}else switch(W!==void 0&&I.push(T.get(W)),S){case"add":Fr(h)?X1(W)&&I.push(T.get("length")):(I.push(T.get(Tf)),cm(h)&&I.push(T.get(S1)));break;case"delete":Fr(h)||(I.push(T.get(Tf)),cm(h)&&I.push(T.get(S1)));break;case"set":cm(h)&&I.push(T.get(Tf));break}if(I.length===1)I[0]&&I1(I[0]);else{const u=[];for(const g of I)g&&u.push(...g);I1(q1(u))}}function I1(h,S){const W=Fr(h)?h:[...h];for(const d of W)d.computed&&r2(d);for(const d of W)d.computed||r2(d)}function r2(h,S){(h!==Tc||h.allowRecurse)&&(h.scheduler?h.scheduler():h.run())}function b_(h,S){var W;return(W=NA.get(h))==null?void 0:W.get(S)}const __=Q1("__proto__,__v_isRef,__isVue"),cx=new Set(Object.getOwnPropertyNames(Symbol).filter(h=>h!=="arguments"&&h!=="caller").map(h=>Symbol[h]).filter(K1)),w_=Z1(),C_=Z1(!1,!0),M_=Z1(!0),s2=T_();function T_(){const h={};return["includes","indexOf","lastIndexOf"].forEach(S=>{h[S]=function(...W){const d=Ms(this);for(let K=0,T=this.length;K<T;K++)nl(d,"get",K+"");const U=d[S](...W);return U===-1||U===!1?d[S](...W.map(Ms)):U}}),["push","pop","shift","unshift","splice"].forEach(S=>{h[S]=function(...W){vm();const d=Ms(this)[S].apply(this,W);return ym(),d}}),h}function S_(h){const S=Ms(this);return nl(S,"has",h),S.hasOwnProperty(h)}function Z1(h=!1,S=!1){return function(d,U,K){if(U==="__v_isReactive")return!h;if(U==="__v_isReadonly")return h;if(U==="__v_isShallow")return S;if(U==="__v_raw"&&K===(h?S?Q_:px:S?fx:dx).get(d))return d;const T=Fr(d);if(!h){if(T&&Cs(s2,U))return Reflect.get(s2,U,K);if(U==="hasOwnProperty")return S_}const I=Reflect.get(d,U,K);return(K1(U)?cx.has(U):__(U))||(h||nl(d,"get",U),S)?I:Po(I)?T&&X1(U)?I:I.value:fo(I)?h?gx(I):l0(I):I}}const I_=ux(),R_=ux(!0);function ux(h=!1){return function(W,d,U,K){let T=W[d];if(dm(T)&&Po(T)&&!Po(U))return!1;if(!h&&(!kA(U)&&!dm(U)&&(T=Ms(T),U=Ms(U)),!Fr(W)&&Po(T)&&!Po(U)))return T.value=U,!0;const I=Fr(W)&&X1(d)?Number(d)<W.length:Cs(W,d),u=Reflect.set(W,d,U,K);return W===Ms(K)&&(I?$g(U,T)&&nh(W,"set",d,U):nh(W,"add",d,U)),u}}function B_(h,S){const W=Cs(h,S);h[S];const d=Reflect.deleteProperty(h,S);return d&&W&&nh(h,"delete",S,void 0),d}function L_(h,S){const W=Reflect.has(h,S);return(!K1(S)||!cx.has(S))&&nl(h,"has",S),W}function D_(h){return nl(h,"iterate",Fr(h)?"length":Tf),Reflect.ownKeys(h)}const hx={get:w_,set:I_,deleteProperty:B_,has:L_,ownKeys:D_},P_={get:M_,set(h,S){return!0},deleteProperty(h,S){return!0}},O_=pa({},hx,{get:C_,set:R_}),$1=h=>h,WA=h=>Reflect.getPrototypeOf(h);function CA(h,S,W=!1,d=!1){h=h.__v_raw;const U=Ms(h),K=Ms(S);W||(S!==K&&nl(U,"get",S),nl(U,"get",K));const{has:T}=WA(U),I=d?$1:W?ny:e0;if(T.call(U,S))return I(h.get(S));if(T.call(U,K))return I(h.get(K));h!==U&&h.get(S)}function MA(h,S=!1){const W=this.__v_raw,d=Ms(W),U=Ms(h);return S||(h!==U&&nl(d,"has",h),nl(d,"has",U)),h===U?W.has(h):W.has(h)||W.has(U)}function TA(h,S=!1){return h=h.__v_raw,!S&&nl(Ms(h),"iterate",Tf),Reflect.get(h,"size",h)}function o2(h){h=Ms(h);const S=Ms(this);return WA(S).has.call(S,h)||(S.add(h),nh(S,"add",h,h)),this}function a2(h,S){S=Ms(S);const W=Ms(this),{has:d,get:U}=WA(W);let K=d.call(W,h);K||(h=Ms(h),K=d.call(W,h));const T=U.call(W,h);return W.set(h,S),K?$g(S,T)&&nh(W,"set",h,S):nh(W,"add",h,S),this}function l2(h){const S=Ms(this),{has:W,get:d}=WA(S);let U=W.call(S,h);U||(h=Ms(h),U=W.call(S,h)),d&&d.call(S,h);const K=S.delete(h);return U&&nh(S,"delete",h,void 0),K}function c2(){const h=Ms(this),S=h.size!==0,W=h.clear();return S&&nh(h,"clear",void 0,void 0),W}function SA(h,S){return function(d,U){const K=this,T=K.__v_raw,I=Ms(T),u=S?$1:h?ny:e0;return!h&&nl(I,"iterate",Tf),T.forEach((g,C)=>d.call(U,u(g),u(C),K))}}function IA(h,S,W){return function(...d){const U=this.__v_raw,K=Ms(U),T=cm(K),I=h==="entries"||h===Symbol.iterator&&T,u=h==="keys"&&T,g=U[h](...d),C=W?$1:S?ny:e0;return!S&&nl(K,"iterate",u?S1:Tf),{next(){const{value:v,done:y}=g.next();return y?{value:v,done:y}:{value:I?[C(v[0]),C(v[1])]:C(v),done:y}},[Symbol.iterator](){return this}}}}function Kh(h){return function(...S){return h==="delete"?!1:this}}function F_(){const h={get(K){return CA(this,K)},get size(){return TA(this)},has:MA,add:o2,set:a2,delete:l2,clear:c2,forEach:SA(!1,!1)},S={get(K){return CA(this,K,!1,!0)},get size(){return TA(this)},has:MA,add:o2,set:a2,delete:l2,clear:c2,forEach:SA(!1,!0)},W={get(K){return CA(this,K,!0)},get size(){return TA(this,!0)},has(K){return MA.call(this,K,!0)},add:Kh("add"),set:Kh("set"),delete:Kh("delete"),clear:Kh("clear"),forEach:SA(!0,!1)},d={get(K){return CA(this,K,!0,!0)},get size(){return TA(this,!0)},has(K){return MA.call(this,K,!0)},add:Kh("add"),set:Kh("set"),delete:Kh("delete"),clear:Kh("clear"),forEach:SA(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(K=>{h[K]=IA(K,!1,!1),W[K]=IA(K,!0,!1),S[K]=IA(K,!1,!0),d[K]=IA(K,!0,!0)}),[h,W,S,d]}const[N_,k_,U_,G_]=F_();function ey(h,S){const W=S?h?G_:U_:h?k_:N_;return(d,U,K)=>U==="__v_isReactive"?!h:U==="__v_isReadonly"?h:U==="__v_raw"?d:Reflect.get(Cs(W,U)&&U in d?W:d,U,K)}const H_={get:ey(!1,!1)},z_={get:ey(!1,!0)},V_={get:ey(!0,!1)},dx=new WeakMap,fx=new WeakMap,px=new WeakMap,Q_=new WeakMap;function j_(h){switch(h){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function W_(h){return h.__v_skip||!Object.isExtensible(h)?0:j_(l_(h))}function l0(h){return dm(h)?h:ty(h,!1,hx,H_,dx)}function mx(h){return ty(h,!1,O_,z_,fx)}function gx(h){return ty(h,!0,P_,V_,px)}function ty(h,S,W,d,U){if(!fo(h)||h.__v_raw&&!(S&&h.__v_isReactive))return h;const K=U.get(h);if(K)return K;const T=W_(h);if(T===0)return h;const I=new Proxy(h,T===2?d:W);return U.set(h,I),I}function $h(h){return dm(h)?$h(h.__v_raw):!!(h&&h.__v_isReactive)}function dm(h){return!!(h&&h.__v_isReadonly)}function kA(h){return!!(h&&h.__v_isShallow)}function Ax(h){return $h(h)||dm(h)}function Ms(h){const S=h&&h.__v_raw;return S?Ms(S):h}function KA(h){return FA(h,"__v_skip",!0),h}const e0=h=>fo(h)?l0(h):h,ny=h=>fo(h)?gx(h):h;function vx(h){Zh&&Tc&&(h=Ms(h),lx(h.dep||(h.dep=q1())))}function yx(h,S){h=Ms(h);const W=h.dep;W&&I1(W)}function Po(h){return!!(h&&h.__v_isRef===!0)}function iy(h){return xx(h,!1)}function K_(h){return xx(h,!0)}function xx(h,S){return Po(h)?h:new X_(h,S)}class X_{constructor(S,W){this.__v_isShallow=W,this.dep=void 0,this.__v_isRef=!0,this._rawValue=W?S:Ms(S),this._value=W?S:e0(S)}get value(){return vx(this),this._value}set value(S){const W=this.__v_isShallow||kA(S)||dm(S);S=W?S:Ms(S),$g(S,this._rawValue)&&(this._rawValue=S,this._value=W?S:e0(S),yx(this))}}function um(h){return Po(h)?h.value:h}const Y_={get:(h,S,W)=>um(Reflect.get(h,S,W)),set:(h,S,W,d)=>{const U=h[S];return Po(U)&&!Po(W)?(U.value=W,!0):Reflect.set(h,S,W,d)}};function Ex(h){return $h(h)?h:new Proxy(h,Y_)}function q_(h){const S=Fr(h)?new Array(h.length):{};for(const W in h)S[W]=Z_(h,W);return S}class J_{constructor(S,W,d){this._object=S,this._key=W,this._defaultValue=d,this.__v_isRef=!0}get value(){const S=this._object[this._key];return S===void 0?this._defaultValue:S}set value(S){this._object[this._key]=S}get dep(){return b_(Ms(this._object),this._key)}}function Z_(h,S,W){const d=h[S];return Po(d)?d:new J_(h,S,W)}class $_{constructor(S,W,d,U){this._setter=W,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new J1(S,()=>{this._dirty||(this._dirty=!0,yx(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!U,this.__v_isReadonly=d}get value(){const S=Ms(this);return vx(S),(S._dirty||!S._cacheable)&&(S._dirty=!1,S._value=S.effect.run()),S._value}set value(S){this._setter(S)}}function ew(h,S,W=!1){let d,U;const K=is(h);return K?(d=h,U=Ic):(d=h.get,U=h.set),new $_(d,U,K||!U,W)}function ed(h,S,W,d){let U;try{U=d?h(...d):h()}catch(K){XA(K,S,W)}return U}function Rc(h,S,W,d){if(is(h)){const K=ed(h,S,W,d);return K&&q2(K)&&K.catch(T=>{XA(T,S,W)}),K}const U=[];for(let K=0;K<h.length;K++)U.push(Rc(h[K],S,W,d));return U}function XA(h,S,W,d=!0){const U=S?S.vnode:null;if(S){let K=S.parent;const T=S.proxy,I=W;for(;K;){const g=K.ec;if(g){for(let C=0;C<g.length;C++)if(g[C](h,T,I)===!1)return}K=K.parent}const u=S.appContext.config.errorHandler;if(u){ed(u,null,10,[h,T,I]);return}}tw(h,W,U,d)}function tw(h,S,W,d=!0){console.error(h)}let t0=!1,R1=!1;const Sa=[];let lu=0;const hm=[];let th=null,Cf=0;const bx=Promise.resolve();let ry=null;function sy(h){const S=ry||bx;return h?S.then(this?h.bind(this):h):S}function nw(h){let S=lu+1,W=Sa.length;for(;S<W;){const d=S+W>>>1;n0(Sa[d])<h?S=d+1:W=d}return S}function oy(h){(!Sa.length||!Sa.includes(h,t0&&h.allowRecurse?lu+1:lu))&&(h.id==null?Sa.push(h):Sa.splice(nw(h.id),0,h),_x())}function _x(){!t0&&!R1&&(R1=!0,ry=bx.then(Cx))}function iw(h){const S=Sa.indexOf(h);S>lu&&Sa.splice(S,1)}function rw(h){Fr(h)?hm.push(...h):(!th||!th.includes(h,h.allowRecurse?Cf+1:Cf))&&hm.push(h),_x()}function u2(h,S=t0?lu+1:0){for(;S<Sa.length;S++){const W=Sa[S];W&&W.pre&&(Sa.splice(S,1),S--,W())}}function wx(h){if(hm.length){const S=[...new Set(hm)];if(hm.length=0,th){th.push(...S);return}for(th=S,th.sort((W,d)=>n0(W)-n0(d)),Cf=0;Cf<th.length;Cf++)th[Cf]();th=null,Cf=0}}const n0=h=>h.id==null?1/0:h.id,sw=(h,S)=>{const W=n0(h)-n0(S);if(W===0){if(h.pre&&!S.pre)return-1;if(S.pre&&!h.pre)return 1}return W};function Cx(h){R1=!1,t0=!0,Sa.sort(sw);const S=Ic;try{for(lu=0;lu<Sa.length;lu++){const W=Sa[lu];W&&W.active!==!1&&ed(W,null,14)}}finally{lu=0,Sa.length=0,wx(),t0=!1,ry=null,(Sa.length||hm.length)&&Cx()}}function ow(h,S,...W){if(h.isUnmounted)return;const d=h.vnode.props||ho;let U=W;const K=S.startsWith("update:"),T=K&&S.slice(7);if(T&&T in d){const C=`${T==="modelValue"?"model":T}Modifiers`,{number:v,trim:y}=d[C]||ho;y&&(U=W.map(E=>na(E)?E.trim():E)),v&&(U=W.map(h_))}let I,u=d[I=m1(S)]||d[I=m1(hu(S))];!u&&K&&(u=d[I=m1(Am(S))]),u&&Rc(u,h,6,U);const g=d[I+"Once"];if(g){if(!h.emitted)h.emitted={};else if(h.emitted[I])return;h.emitted[I]=!0,Rc(g,h,6,U)}}function Mx(h,S,W=!1){const d=S.emitsCache,U=d.get(h);if(U!==void 0)return U;const K=h.emits;let T={},I=!1;if(!is(h)){const u=g=>{const C=Mx(g,S,!0);C&&(I=!0,pa(T,C))};!W&&S.mixins.length&&S.mixins.forEach(u),h.extends&&u(h.extends),h.mixins&&h.mixins.forEach(u)}return!K&&!I?(fo(h)&&d.set(h,null),null):(Fr(K)?K.forEach(u=>T[u]=null):pa(T,K),fo(h)&&d.set(h,T),T)}function YA(h,S){return!h||!zA(S)?!1:(S=S.slice(2).replace(/Once$/,""),Cs(h,S[0].toLowerCase()+S.slice(1))||Cs(h,Am(S))||Cs(h,S))}let $l=null,Tx=null;function UA(h){const S=$l;return $l=h,Tx=h&&h.type.__scopeId||null,S}function cu(h,S=$l,W){if(!S||h._n)return h;const d=(...U)=>{d._d&&E2(-1);const K=UA(S);let T;try{T=h(...U)}finally{UA(K),d._d&&E2(1)}return T};return d._n=!0,d._c=!0,d._d=!0,d}function A1(h){const{type:S,vnode:W,proxy:d,withProxy:U,props:K,propsOptions:[T],slots:I,attrs:u,emit:g,render:C,renderCache:v,data:y,setupState:E,ctx:b,inheritAttrs:m}=h;let w,_;const O=UA(h);try{if(W.shapeFlag&4){const L=U||d;w=au(C.call(L,L,v,K,E,y,b)),_=u}else{const L=S;w=au(L.length>1?L(K,{attrs:u,slots:I,emit:g}):L(K,null)),_=S.props?u:aw(u)}}catch(L){Yg.length=0,XA(L,h,1),w=Ns(If)}let R=w;if(_&&m!==!1){const L=Object.keys(_),{shapeFlag:P}=R;L.length&&P&7&&(T&&L.some(j1)&&(_=lw(_,T)),R=fm(R,_))}return W.dirs&&(R=fm(R),R.dirs=R.dirs?R.dirs.concat(W.dirs):W.dirs),W.transition&&(R.transition=W.transition),w=R,UA(O),w}const aw=h=>{let S;for(const W in h)(W==="class"||W==="style"||zA(W))&&((S||(S={}))[W]=h[W]);return S},lw=(h,S)=>{const W={};for(const d in h)(!j1(d)||!(d.slice(9)in S))&&(W[d]=h[d]);return W};function cw(h,S,W){const{props:d,children:U,component:K}=h,{props:T,children:I,patchFlag:u}=S,g=K.emitsOptions;if(S.dirs||S.transition)return!0;if(W&&u>=0){if(u&1024)return!0;if(u&16)return d?h2(d,T,g):!!T;if(u&8){const C=S.dynamicProps;for(let v=0;v<C.length;v++){const y=C[v];if(T[y]!==d[y]&&!YA(g,y))return!0}}}else return(U||I)&&(!I||!I.$stable)?!0:d===T?!1:d?T?h2(d,T,g):!0:!!T;return!1}function h2(h,S,W){const d=Object.keys(S);if(d.length!==Object.keys(h).length)return!0;for(let U=0;U<d.length;U++){const K=d[U];if(S[K]!==h[K]&&!YA(W,K))return!0}return!1}function uw({vnode:h,parent:S},W){for(;S&&S.subTree===h;)(h=S.vnode).el=W,S=S.parent}const hw=h=>h.__isSuspense;function dw(h,S){S&&S.pendingBranch?Fr(h)?S.effects.push(...h):S.effects.push(h):rw(h)}const RA={};function Kg(h,S,W){return Sx(h,S,W)}function Sx(h,S,{immediate:W,deep:d,flush:U,onTrack:K,onTrigger:T}=ho){var I;const u=rx()===((I=fa)==null?void 0:I.scope)?fa:null;let g,C=!1,v=!1;if(Po(h)?(g=()=>h.value,C=kA(h)):$h(h)?(g=()=>h,d=!0):Fr(h)?(v=!0,C=h.some(L=>$h(L)||kA(L)),g=()=>h.map(L=>{if(Po(L))return L.value;if($h(L))return am(L);if(is(L))return ed(L,u,2)})):is(h)?S?g=()=>ed(h,u,2):g=()=>{if(!(u&&u.isUnmounted))return y&&y(),Rc(h,u,3,[E])}:g=Ic,S&&d){const L=g;g=()=>am(L())}let y,E=L=>{y=O.onStop=()=>{ed(L,u,4)}},b;if(o0)if(E=Ic,S?W&&Rc(S,u,3,[g(),v?[]:void 0,E]):g(),U==="sync"){const L=aC();b=L.__watcherHandles||(L.__watcherHandles=[])}else return Ic;let m=v?new Array(h.length).fill(RA):RA;const w=()=>{if(!!O.active)if(S){const L=O.run();(d||C||(v?L.some((P,Y)=>$g(P,m[Y])):$g(L,m)))&&(y&&y(),Rc(S,u,3,[L,m===RA?void 0:v&&m[0]===RA?[]:m,E]),m=L)}else O.run()};w.allowRecurse=!!S;let _;U==="sync"?_=w:U==="post"?_=()=>el(w,u&&u.suspense):(w.pre=!0,u&&(w.id=u.uid),_=()=>oy(w));const O=new J1(g,_);S?W?w():m=O.run():U==="post"?el(O.run.bind(O),u&&u.suspense):O.run();const R=()=>{O.stop(),u&&u.scope&&W1(u.scope.effects,O)};return b&&b.push(R),R}function fw(h,S,W){const d=this.proxy,U=na(h)?h.includes(".")?Ix(d,h):()=>d[h]:h.bind(d,d);let K;is(S)?K=S:(K=S.handler,W=S);const T=fa;pm(this);const I=Sx(U,K.bind(d),W);return T?pm(T):Sf(),I}function Ix(h,S){const W=S.split(".");return()=>{let d=h;for(let U=0;U<W.length&&d;U++)d=d[W[U]];return d}}function am(h,S){if(!fo(h)||h.__v_skip||(S=S||new Set,S.has(h)))return h;if(S.add(h),Po(h))am(h.value,S);else if(Fr(h))for(let W=0;W<h.length;W++)am(h[W],S);else if(Y2(h)||cm(h))h.forEach(W=>{am(W,S)});else if(Z2(h))for(const W in h)am(h[W],S);return h}function _f(h,S,W,d){const U=h.dirs,K=S&&S.dirs;for(let T=0;T<U.length;T++){const I=U[T];K&&(I.oldValue=K[T].value);let u=I.dir[d];u&&(vm(),Rc(u,W,8,[h.el,I,h,S]),ym())}}function Rx(h,S){return is(h)?(()=>pa({name:h.name},S,{setup:h}))():h}const DA=h=>!!h.type.__asyncLoader,Bx=h=>h.type.__isKeepAlive;function pw(h,S){Lx(h,"a",S)}function mw(h,S){Lx(h,"da",S)}function Lx(h,S,W=fa){const d=h.__wdc||(h.__wdc=()=>{let U=W;for(;U;){if(U.isDeactivated)return;U=U.parent}return h()});if(qA(S,d,W),W){let U=W.parent;for(;U&&U.parent;)Bx(U.parent.vnode)&&gw(d,S,W,U),U=U.parent}}function gw(h,S,W,d){const U=qA(S,h,d,!0);Dx(()=>{W1(d[S],U)},W)}function qA(h,S,W=fa,d=!1){if(W){const U=W[h]||(W[h]=[]),K=S.__weh||(S.__weh=(...T)=>{if(W.isUnmounted)return;vm(),pm(W);const I=Rc(S,W,h,T);return Sf(),ym(),I});return d?U.unshift(K):U.push(K),K}}const ih=h=>(S,W=fa)=>(!o0||h==="sp")&&qA(h,(...d)=>S(...d),W),Aw=ih("bm"),vw=ih("m"),yw=ih("bu"),xw=ih("u"),Ew=ih("bum"),Dx=ih("um"),bw=ih("sp"),_w=ih("rtg"),ww=ih("rtc");function Cw(h,S=fa){qA("ec",h,S)}const Px="components";function Xo(h,S){return Tw(Px,h,!0,S)||h}const Mw=Symbol.for("v-ndc");function Tw(h,S,W=!0,d=!1){const U=$l||fa;if(U){const K=U.type;if(h===Px){const I=rC(K,!1);if(I&&(I===S||I===hu(S)||I===jA(hu(S))))return K}const T=d2(U[h]||K[h],S)||d2(U.appContext[h],S);return!T&&d?K:T}}function d2(h,S){return h&&(h[S]||h[hu(S)]||h[jA(hu(S))])}function B1(h,S,W,d){let U;const K=W&&W[d];if(Fr(h)||na(h)){U=new Array(h.length);for(let T=0,I=h.length;T<I;T++)U[T]=S(h[T],T,void 0,K&&K[T])}else if(typeof h=="number"){U=new Array(h);for(let T=0;T<h;T++)U[T]=S(T+1,T,void 0,K&&K[T])}else if(fo(h))if(h[Symbol.iterator])U=Array.from(h,(T,I)=>S(T,I,void 0,K&&K[I]));else{const T=Object.keys(h);U=new Array(T.length);for(let I=0,u=T.length;I<u;I++){const g=T[I];U[I]=S(h[g],g,I,K&&K[I])}}else U=[];return W&&(W[d]=U),U}const L1=h=>h?jx(h)?hy(h)||h.proxy:L1(h.parent):null,Xg=pa(Object.create(null),{$:h=>h,$el:h=>h.vnode.el,$data:h=>h.data,$props:h=>h.props,$attrs:h=>h.attrs,$slots:h=>h.slots,$refs:h=>h.refs,$parent:h=>L1(h.parent),$root:h=>L1(h.root),$emit:h=>h.emit,$options:h=>ay(h),$forceUpdate:h=>h.f||(h.f=()=>oy(h.update)),$nextTick:h=>h.n||(h.n=sy.bind(h.proxy)),$watch:h=>fw.bind(h)}),v1=(h,S)=>h!==ho&&!h.__isScriptSetup&&Cs(h,S),Sw={get({_:h},S){const{ctx:W,setupState:d,data:U,props:K,accessCache:T,type:I,appContext:u}=h;let g;if(S[0]!=="$"){const E=T[S];if(E!==void 0)switch(E){case 1:return d[S];case 2:return U[S];case 4:return W[S];case 3:return K[S]}else{if(v1(d,S))return T[S]=1,d[S];if(U!==ho&&Cs(U,S))return T[S]=2,U[S];if((g=h.propsOptions[0])&&Cs(g,S))return T[S]=3,K[S];if(W!==ho&&Cs(W,S))return T[S]=4,W[S];D1&&(T[S]=0)}}const C=Xg[S];let v,y;if(C)return S==="$attrs"&&nl(h,"get",S),C(h);if((v=I.__cssModules)&&(v=v[S]))return v;if(W!==ho&&Cs(W,S))return T[S]=4,W[S];if(y=u.config.globalProperties,Cs(y,S))return y[S]},set({_:h},S,W){const{data:d,setupState:U,ctx:K}=h;return v1(U,S)?(U[S]=W,!0):d!==ho&&Cs(d,S)?(d[S]=W,!0):Cs(h.props,S)||S[0]==="$"&&S.slice(1)in h?!1:(K[S]=W,!0)},has({_:{data:h,setupState:S,accessCache:W,ctx:d,appContext:U,propsOptions:K}},T){let I;return!!W[T]||h!==ho&&Cs(h,T)||v1(S,T)||(I=K[0])&&Cs(I,T)||Cs(d,T)||Cs(Xg,T)||Cs(U.config.globalProperties,T)},defineProperty(h,S,W){return W.get!=null?h._.accessCache[S]=0:Cs(W,"value")&&this.set(h,S,W.value,null),Reflect.defineProperty(h,S,W)}};function f2(h){return Fr(h)?h.reduce((S,W)=>(S[W]=null,S),{}):h}let D1=!0;function Iw(h){const S=ay(h),W=h.proxy,d=h.ctx;D1=!1,S.beforeCreate&&p2(S.beforeCreate,h,"bc");const{data:U,computed:K,methods:T,watch:I,provide:u,inject:g,created:C,beforeMount:v,mounted:y,beforeUpdate:E,updated:b,activated:m,deactivated:w,beforeDestroy:_,beforeUnmount:O,destroyed:R,unmounted:L,render:P,renderTracked:Y,renderTriggered:J,errorCaptured:j,serverPrefetch:k,expose:te,inheritAttrs:ue,components:xe,directives:Ee,filters:V}=S;if(g&&Rw(g,d,null),T)for(const F in T){const z=T[F];is(z)&&(d[F]=z.bind(W))}if(U){const F=U.call(W,W);fo(F)&&(h.data=l0(F))}if(D1=!0,K)for(const F in K){const z=K[F],X=is(z)?z.bind(W,W):is(z.get)?z.get.bind(W,W):Ic,fe=!is(z)&&is(z.set)?z.set.bind(W):Ic,Ae=Zl({get:X,set:fe});Object.defineProperty(d,F,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:Se=>Ae.value=Se})}if(I)for(const F in I)Ox(I[F],d,W,F);if(u){const F=is(u)?u.call(W):u;Reflect.ownKeys(F).forEach(z=>{PA(z,F[z])})}C&&p2(C,h,"c");function Q(F,z){Fr(z)?z.forEach(X=>F(X.bind(W))):z&&F(z.bind(W))}if(Q(Aw,v),Q(vw,y),Q(yw,E),Q(xw,b),Q(pw,m),Q(mw,w),Q(Cw,j),Q(ww,Y),Q(_w,J),Q(Ew,O),Q(Dx,L),Q(bw,k),Fr(te))if(te.length){const F=h.exposed||(h.exposed={});te.forEach(z=>{Object.defineProperty(F,z,{get:()=>W[z],set:X=>W[z]=X})})}else h.exposed||(h.exposed={});P&&h.render===Ic&&(h.render=P),ue!=null&&(h.inheritAttrs=ue),xe&&(h.components=xe),Ee&&(h.directives=Ee)}function Rw(h,S,W=Ic){Fr(h)&&(h=P1(h));for(const d in h){const U=h[d];let K;fo(U)?"default"in U?K=uu(U.from||d,U.default,!0):K=uu(U.from||d):K=uu(U),Po(K)?Object.defineProperty(S,d,{enumerable:!0,configurable:!0,get:()=>K.value,set:T=>K.value=T}):S[d]=K}}function p2(h,S,W){Rc(Fr(h)?h.map(d=>d.bind(S.proxy)):h.bind(S.proxy),S,W)}function Ox(h,S,W,d){const U=d.includes(".")?Ix(W,d):()=>W[d];if(na(h)){const K=S[h];is(K)&&Kg(U,K)}else if(is(h))Kg(U,h.bind(W));else if(fo(h))if(Fr(h))h.forEach(K=>Ox(K,S,W,d));else{const K=is(h.handler)?h.handler.bind(W):S[h.handler];is(K)&&Kg(U,K,h)}}function ay(h){const S=h.type,{mixins:W,extends:d}=S,{mixins:U,optionsCache:K,config:{optionMergeStrategies:T}}=h.appContext,I=K.get(S);let u;return I?u=I:!U.length&&!W&&!d?u=S:(u={},U.length&&U.forEach(g=>GA(u,g,T,!0)),GA(u,S,T)),fo(S)&&K.set(S,u),u}function GA(h,S,W,d=!1){const{mixins:U,extends:K}=S;K&&GA(h,K,W,!0),U&&U.forEach(T=>GA(h,T,W,!0));for(const T in S)if(!(d&&T==="expose")){const I=Bw[T]||W&&W[T];h[T]=I?I(h[T],S[T]):S[T]}return h}const Bw={data:m2,props:g2,emits:g2,methods:Wg,computed:Wg,beforeCreate:za,created:za,beforeMount:za,mounted:za,beforeUpdate:za,updated:za,beforeDestroy:za,beforeUnmount:za,destroyed:za,unmounted:za,activated:za,deactivated:za,errorCaptured:za,serverPrefetch:za,components:Wg,directives:Wg,watch:Dw,provide:m2,inject:Lw};function m2(h,S){return S?h?function(){return pa(is(h)?h.call(this,this):h,is(S)?S.call(this,this):S)}:S:h}function Lw(h,S){return Wg(P1(h),P1(S))}function P1(h){if(Fr(h)){const S={};for(let W=0;W<h.length;W++)S[h[W]]=h[W];return S}return h}function za(h,S){return h?[...new Set([].concat(h,S))]:S}function Wg(h,S){return h?pa(Object.create(null),h,S):S}function g2(h,S){return h?Fr(h)&&Fr(S)?[...new Set([...h,...S])]:pa(Object.create(null),f2(h),f2(S!=null?S:{})):S}function Dw(h,S){if(!h)return S;if(!S)return h;const W=pa(Object.create(null),h);for(const d in S)W[d]=za(h[d],S[d]);return W}function Fx(){return{app:null,config:{isNativeTag:s_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pw=0;function Ow(h,S){return function(d,U=null){is(d)||(d=pa({},d)),U!=null&&!fo(U)&&(U=null);const K=Fx(),T=new Set;let I=!1;const u=K.app={_uid:Pw++,_component:d,_props:U,_container:null,_context:K,_instance:null,version:lC,get config(){return K.config},set config(g){},use(g,...C){return T.has(g)||(g&&is(g.install)?(T.add(g),g.install(u,...C)):is(g)&&(T.add(g),g(u,...C))),u},mixin(g){return K.mixins.includes(g)||K.mixins.push(g),u},component(g,C){return C?(K.components[g]=C,u):K.components[g]},directive(g,C){return C?(K.directives[g]=C,u):K.directives[g]},mount(g,C,v){if(!I){const y=Ns(d,U);return y.appContext=K,C&&S?S(y,g):h(y,g,v),I=!0,u._container=g,g.__vue_app__=u,hy(y.component)||y.component.proxy}},unmount(){I&&(h(null,u._container),delete u._container.__vue_app__)},provide(g,C){return K.provides[g]=C,u},runWithContext(g){i0=u;try{return g()}finally{i0=null}}};return u}}let i0=null;function PA(h,S){if(fa){let W=fa.provides;const d=fa.parent&&fa.parent.provides;d===W&&(W=fa.provides=Object.create(d)),W[h]=S}}function uu(h,S,W=!1){const d=fa||$l;if(d||i0){const U=d?d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides:i0._context.provides;if(U&&h in U)return U[h];if(arguments.length>1)return W&&is(S)?S.call(d&&d.proxy):S}}function Fw(){return!!(fa||$l||i0)}function Nw(h,S,W,d=!1){const U={},K={};FA(K,ZA,1),h.propsDefaults=Object.create(null),Nx(h,S,U,K);for(const T in h.propsOptions[0])T in U||(U[T]=void 0);W?h.props=d?U:mx(U):h.type.props?h.props=U:h.props=K,h.attrs=K}function kw(h,S,W,d){const{props:U,attrs:K,vnode:{patchFlag:T}}=h,I=Ms(U),[u]=h.propsOptions;let g=!1;if((d||T>0)&&!(T&16)){if(T&8){const C=h.vnode.dynamicProps;for(let v=0;v<C.length;v++){let y=C[v];if(YA(h.emitsOptions,y))continue;const E=S[y];if(u)if(Cs(K,y))E!==K[y]&&(K[y]=E,g=!0);else{const b=hu(y);U[b]=O1(u,I,b,E,h,!1)}else E!==K[y]&&(K[y]=E,g=!0)}}}else{Nx(h,S,U,K)&&(g=!0);let C;for(const v in I)(!S||!Cs(S,v)&&((C=Am(v))===v||!Cs(S,C)))&&(u?W&&(W[v]!==void 0||W[C]!==void 0)&&(U[v]=O1(u,I,v,void 0,h,!0)):delete U[v]);if(K!==I)for(const v in K)(!S||!Cs(S,v)&&!0)&&(delete K[v],g=!0)}g&&nh(h,"set","$attrs")}function Nx(h,S,W,d){const[U,K]=h.propsOptions;let T=!1,I;if(S)for(let u in S){if(LA(u))continue;const g=S[u];let C;U&&Cs(U,C=hu(u))?!K||!K.includes(C)?W[C]=g:(I||(I={}))[C]=g:YA(h.emitsOptions,u)||(!(u in d)||g!==d[u])&&(d[u]=g,T=!0)}if(K){const u=Ms(W),g=I||ho;for(let C=0;C<K.length;C++){const v=K[C];W[v]=O1(U,u,v,g[v],h,!Cs(g,v))}}return T}function O1(h,S,W,d,U,K){const T=h[W];if(T!=null){const I=Cs(T,"default");if(I&&d===void 0){const u=T.default;if(T.type!==Function&&!T.skipFactory&&is(u)){const{propsDefaults:g}=U;W in g?d=g[W]:(pm(U),d=g[W]=u.call(null,S),Sf())}else d=u}T[0]&&(K&&!I?d=!1:T[1]&&(d===""||d===Am(W))&&(d=!0))}return d}function kx(h,S,W=!1){const d=S.propsCache,U=d.get(h);if(U)return U;const K=h.props,T={},I=[];let u=!1;if(!is(h)){const C=v=>{u=!0;const[y,E]=kx(v,S,!0);pa(T,y),E&&I.push(...E)};!W&&S.mixins.length&&S.mixins.forEach(C),h.extends&&C(h.extends),h.mixins&&h.mixins.forEach(C)}if(!K&&!u)return fo(h)&&d.set(h,lm),lm;if(Fr(K))for(let C=0;C<K.length;C++){const v=hu(K[C]);A2(v)&&(T[v]=ho)}else if(K)for(const C in K){const v=hu(C);if(A2(v)){const y=K[C],E=T[v]=Fr(y)||is(y)?{type:y}:pa({},y);if(E){const b=x2(Boolean,E.type),m=x2(String,E.type);E[0]=b>-1,E[1]=m<0||b<m,(b>-1||Cs(E,"default"))&&I.push(v)}}}const g=[T,I];return fo(h)&&d.set(h,g),g}function A2(h){return h[0]!=="$"}function v2(h){const S=h&&h.toString().match(/^\s*(function|class) (\w+)/);return S?S[2]:h===null?"null":""}function y2(h,S){return v2(h)===v2(S)}function x2(h,S){return Fr(S)?S.findIndex(W=>y2(W,h)):is(S)&&y2(S,h)?0:-1}const Ux=h=>h[0]==="_"||h==="$stable",ly=h=>Fr(h)?h.map(au):[au(h)],Uw=(h,S,W)=>{if(S._n)return S;const d=cu((...U)=>ly(S(...U)),W);return d._c=!1,d},Gx=(h,S,W)=>{const d=h._ctx;for(const U in h){if(Ux(U))continue;const K=h[U];if(is(K))S[U]=Uw(U,K,d);else if(K!=null){const T=ly(K);S[U]=()=>T}}},Hx=(h,S)=>{const W=ly(S);h.slots.default=()=>W},Gw=(h,S)=>{if(h.vnode.shapeFlag&32){const W=S._;W?(h.slots=Ms(S),FA(S,"_",W)):Gx(S,h.slots={})}else h.slots={},S&&Hx(h,S);FA(h.slots,ZA,1)},Hw=(h,S,W)=>{const{vnode:d,slots:U}=h;let K=!0,T=ho;if(d.shapeFlag&32){const I=S._;I?W&&I===1?K=!1:(pa(U,S),!W&&I===1&&delete U._):(K=!S.$stable,Gx(S,U)),T=S}else S&&(Hx(h,S),T={default:1});if(K)for(const I in U)!Ux(I)&&!(I in T)&&delete U[I]};function F1(h,S,W,d,U=!1){if(Fr(h)){h.forEach((y,E)=>F1(y,S&&(Fr(S)?S[E]:S),W,d,U));return}if(DA(d)&&!U)return;const K=d.shapeFlag&4?hy(d.component)||d.component.proxy:d.el,T=U?null:K,{i:I,r:u}=h,g=S&&S.r,C=I.refs===ho?I.refs={}:I.refs,v=I.setupState;if(g!=null&&g!==u&&(na(g)?(C[g]=null,Cs(v,g)&&(v[g]=null)):Po(g)&&(g.value=null)),is(u))ed(u,I,12,[T,C]);else{const y=na(u),E=Po(u);if(y||E){const b=()=>{if(h.f){const m=y?Cs(v,u)?v[u]:C[u]:u.value;U?Fr(m)&&W1(m,K):Fr(m)?m.includes(K)||m.push(K):y?(C[u]=[K],Cs(v,u)&&(v[u]=C[u])):(u.value=[K],h.k&&(C[h.k]=u.value))}else y?(C[u]=T,Cs(v,u)&&(v[u]=T)):E&&(u.value=T,h.k&&(C[h.k]=T))};T?(b.id=-1,el(b,W)):b()}}}const el=dw;function zw(h){return Vw(h)}function Vw(h,S){const W=M1();W.__VUE__=!0;const{insert:d,remove:U,patchProp:K,createElement:T,createText:I,createComment:u,setText:g,setElementText:C,parentNode:v,nextSibling:y,setScopeId:E=Ic,insertStaticContent:b}=h,m=(je,rt,At,Bt=null,Pt=null,qt=null,un=!1,dn=null,bn=!!rt.dynamicChildren)=>{if(je===rt)return;je&&!Vg(je,rt)&&(Bt=at(je),Se(je,Pt,qt,!0),je=null),rt.patchFlag===-2&&(bn=!1,rt.dynamicChildren=null);const{type:tn,ref:ri,shapeFlag:ni}=rt;switch(tn){case JA:w(je,rt,At,Bt);break;case If:_(je,rt,At,Bt);break;case y1:je==null&&O(rt,At,Bt,un);break;case tl:xe(je,rt,At,Bt,Pt,qt,un,dn,bn);break;default:ni&1?P(je,rt,At,Bt,Pt,qt,un,dn,bn):ni&6?Ee(je,rt,At,Bt,Pt,qt,un,dn,bn):(ni&64||ni&128)&&tn.process(je,rt,At,Bt,Pt,qt,un,dn,bn,wt)}ri!=null&&Pt&&F1(ri,je&&je.ref,qt,rt||je,!rt)},w=(je,rt,At,Bt)=>{if(je==null)d(rt.el=I(rt.children),At,Bt);else{const Pt=rt.el=je.el;rt.children!==je.children&&g(Pt,rt.children)}},_=(je,rt,At,Bt)=>{je==null?d(rt.el=u(rt.children||""),At,Bt):rt.el=je.el},O=(je,rt,At,Bt)=>{[je.el,je.anchor]=b(je.children,rt,At,Bt,je.el,je.anchor)},R=({el:je,anchor:rt},At,Bt)=>{let Pt;for(;je&&je!==rt;)Pt=y(je),d(je,At,Bt),je=Pt;d(rt,At,Bt)},L=({el:je,anchor:rt})=>{let At;for(;je&&je!==rt;)At=y(je),U(je),je=At;U(rt)},P=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{un=un||rt.type==="svg",je==null?Y(rt,At,Bt,Pt,qt,un,dn,bn):k(je,rt,Pt,qt,un,dn,bn)},Y=(je,rt,At,Bt,Pt,qt,un,dn)=>{let bn,tn;const{type:ri,props:ni,shapeFlag:zt,transition:Ue,dirs:Pe}=je;if(bn=je.el=T(je.type,qt,ni&&ni.is,ni),zt&8?C(bn,je.children):zt&16&&j(je.children,bn,null,Bt,Pt,qt&&ri!=="foreignObject",un,dn),Pe&&_f(je,null,Bt,"created"),J(bn,je,je.scopeId,un,Bt),ni){for(const ze in ni)ze!=="value"&&!LA(ze)&&K(bn,ze,null,ni[ze],qt,je.children,Bt,Pt,xt);"value"in ni&&K(bn,"value",null,ni.value),(tn=ni.onVnodeBeforeMount)&&ou(tn,Bt,je)}Pe&&_f(je,null,Bt,"beforeMount");const Ye=(!Pt||Pt&&!Pt.pendingBranch)&&Ue&&!Ue.persisted;Ye&&Ue.beforeEnter(bn),d(bn,rt,At),((tn=ni&&ni.onVnodeMounted)||Ye||Pe)&&el(()=>{tn&&ou(tn,Bt,je),Ye&&Ue.enter(bn),Pe&&_f(je,null,Bt,"mounted")},Pt)},J=(je,rt,At,Bt,Pt)=>{if(At&&E(je,At),Bt)for(let qt=0;qt<Bt.length;qt++)E(je,Bt[qt]);if(Pt){let qt=Pt.subTree;if(rt===qt){const un=Pt.vnode;J(je,un,un.scopeId,un.slotScopeIds,Pt.parent)}}},j=(je,rt,At,Bt,Pt,qt,un,dn,bn=0)=>{for(let tn=bn;tn<je.length;tn++){const ri=je[tn]=dn?qh(je[tn]):au(je[tn]);m(null,ri,rt,At,Bt,Pt,qt,un,dn)}},k=(je,rt,At,Bt,Pt,qt,un)=>{const dn=rt.el=je.el;let{patchFlag:bn,dynamicChildren:tn,dirs:ri}=rt;bn|=je.patchFlag&16;const ni=je.props||ho,zt=rt.props||ho;let Ue;At&&wf(At,!1),(Ue=zt.onVnodeBeforeUpdate)&&ou(Ue,At,rt,je),ri&&_f(rt,je,At,"beforeUpdate"),At&&wf(At,!0);const Pe=Pt&&rt.type!=="foreignObject";if(tn?te(je.dynamicChildren,tn,dn,At,Bt,Pe,qt):un||z(je,rt,dn,null,At,Bt,Pe,qt,!1),bn>0){if(bn&16)ue(dn,rt,ni,zt,At,Bt,Pt);else if(bn&2&&ni.class!==zt.class&&K(dn,"class",null,zt.class,Pt),bn&4&&K(dn,"style",ni.style,zt.style,Pt),bn&8){const Ye=rt.dynamicProps;for(let ze=0;ze<Ye.length;ze++){const He=Ye[ze],et=ni[He],Me=zt[He];(Me!==et||He==="value")&&K(dn,He,et,Me,Pt,je.children,At,Bt,xt)}}bn&1&&je.children!==rt.children&&C(dn,rt.children)}else!un&&tn==null&&ue(dn,rt,ni,zt,At,Bt,Pt);((Ue=zt.onVnodeUpdated)||ri)&&el(()=>{Ue&&ou(Ue,At,rt,je),ri&&_f(rt,je,At,"updated")},Bt)},te=(je,rt,At,Bt,Pt,qt,un)=>{for(let dn=0;dn<rt.length;dn++){const bn=je[dn],tn=rt[dn],ri=bn.el&&(bn.type===tl||!Vg(bn,tn)||bn.shapeFlag&70)?v(bn.el):At;m(bn,tn,ri,null,Bt,Pt,qt,un,!0)}},ue=(je,rt,At,Bt,Pt,qt,un)=>{if(At!==Bt){if(At!==ho)for(const dn in At)!LA(dn)&&!(dn in Bt)&&K(je,dn,At[dn],null,un,rt.children,Pt,qt,xt);for(const dn in Bt){if(LA(dn))continue;const bn=Bt[dn],tn=At[dn];bn!==tn&&dn!=="value"&&K(je,dn,tn,bn,un,rt.children,Pt,qt,xt)}"value"in Bt&&K(je,"value",At.value,Bt.value)}},xe=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{const tn=rt.el=je?je.el:I(""),ri=rt.anchor=je?je.anchor:I("");let{patchFlag:ni,dynamicChildren:zt,slotScopeIds:Ue}=rt;Ue&&(dn=dn?dn.concat(Ue):Ue),je==null?(d(tn,At,Bt),d(ri,At,Bt),j(rt.children,At,ri,Pt,qt,un,dn,bn)):ni>0&&ni&64&&zt&&je.dynamicChildren?(te(je.dynamicChildren,zt,At,Pt,qt,un,dn),(rt.key!=null||Pt&&rt===Pt.subTree)&&zx(je,rt,!0)):z(je,rt,At,ri,Pt,qt,un,dn,bn)},Ee=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{rt.slotScopeIds=dn,je==null?rt.shapeFlag&512?Pt.ctx.activate(rt,At,Bt,un,bn):V(rt,At,Bt,Pt,qt,un,bn):q(je,rt,bn)},V=(je,rt,At,Bt,Pt,qt,un)=>{const dn=je.component=$w(je,Bt,Pt);if(Bx(je)&&(dn.ctx.renderer=wt),eC(dn),dn.asyncDep){if(Pt&&Pt.registerDep(dn,Q),!je.el){const bn=dn.subTree=Ns(If);_(null,bn,rt,At)}return}Q(dn,je,rt,At,Pt,qt,un)},q=(je,rt,At)=>{const Bt=rt.component=je.component;if(cw(je,rt,At))if(Bt.asyncDep&&!Bt.asyncResolved){F(Bt,rt,At);return}else Bt.next=rt,iw(Bt.update),Bt.update();else rt.el=je.el,Bt.vnode=rt},Q=(je,rt,At,Bt,Pt,qt,un)=>{const dn=()=>{if(je.isMounted){let{next:ri,bu:ni,u:zt,parent:Ue,vnode:Pe}=je,Ye=ri,ze;wf(je,!1),ri?(ri.el=Pe.el,F(je,ri,un)):ri=Pe,ni&&g1(ni),(ze=ri.props&&ri.props.onVnodeBeforeUpdate)&&ou(ze,Ue,ri,Pe),wf(je,!0);const He=A1(je),et=je.subTree;je.subTree=He,m(et,He,v(et.el),at(et),je,Pt,qt),ri.el=He.el,Ye===null&&uw(je,He.el),zt&&el(zt,Pt),(ze=ri.props&&ri.props.onVnodeUpdated)&&el(()=>ou(ze,Ue,ri,Pe),Pt)}else{let ri;const{el:ni,props:zt}=rt,{bm:Ue,m:Pe,parent:Ye}=je,ze=DA(rt);if(wf(je,!1),Ue&&g1(Ue),!ze&&(ri=zt&&zt.onVnodeBeforeMount)&&ou(ri,Ye,rt),wf(je,!0),ni&&Mn){const He=()=>{je.subTree=A1(je),Mn(ni,je.subTree,je,Pt,null)};ze?rt.type.__asyncLoader().then(()=>!je.isUnmounted&&He()):He()}else{const He=je.subTree=A1(je);m(null,He,At,Bt,je,Pt,qt),rt.el=He.el}if(Pe&&el(Pe,Pt),!ze&&(ri=zt&&zt.onVnodeMounted)){const He=rt;el(()=>ou(ri,Ye,He),Pt)}(rt.shapeFlag&256||Ye&&DA(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&je.a&&el(je.a,Pt),je.isMounted=!0,rt=At=Bt=null}},bn=je.effect=new J1(dn,()=>oy(tn),je.scope),tn=je.update=()=>bn.run();tn.id=je.uid,wf(je,!0),tn()},F=(je,rt,At)=>{rt.component=je;const Bt=je.vnode.props;je.vnode=rt,je.next=null,kw(je,rt.props,Bt,At),Hw(je,rt.children,At),vm(),u2(),ym()},z=(je,rt,At,Bt,Pt,qt,un,dn,bn=!1)=>{const tn=je&&je.children,ri=je?je.shapeFlag:0,ni=rt.children,{patchFlag:zt,shapeFlag:Ue}=rt;if(zt>0){if(zt&128){fe(tn,ni,At,Bt,Pt,qt,un,dn,bn);return}else if(zt&256){X(tn,ni,At,Bt,Pt,qt,un,dn,bn);return}}Ue&8?(ri&16&&xt(tn,Pt,qt),ni!==tn&&C(At,ni)):ri&16?Ue&16?fe(tn,ni,At,Bt,Pt,qt,un,dn,bn):xt(tn,Pt,qt,!0):(ri&8&&C(At,""),Ue&16&&j(ni,At,Bt,Pt,qt,un,dn,bn))},X=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{je=je||lm,rt=rt||lm;const tn=je.length,ri=rt.length,ni=Math.min(tn,ri);let zt;for(zt=0;zt<ni;zt++){const Ue=rt[zt]=bn?qh(rt[zt]):au(rt[zt]);m(je[zt],Ue,At,null,Pt,qt,un,dn,bn)}tn>ri?xt(je,Pt,qt,!0,!1,ni):j(rt,At,Bt,Pt,qt,un,dn,bn,ni)},fe=(je,rt,At,Bt,Pt,qt,un,dn,bn)=>{let tn=0;const ri=rt.length;let ni=je.length-1,zt=ri-1;for(;tn<=ni&&tn<=zt;){const Ue=je[tn],Pe=rt[tn]=bn?qh(rt[tn]):au(rt[tn]);if(Vg(Ue,Pe))m(Ue,Pe,At,null,Pt,qt,un,dn,bn);else break;tn++}for(;tn<=ni&&tn<=zt;){const Ue=je[ni],Pe=rt[zt]=bn?qh(rt[zt]):au(rt[zt]);if(Vg(Ue,Pe))m(Ue,Pe,At,null,Pt,qt,un,dn,bn);else break;ni--,zt--}if(tn>ni){if(tn<=zt){const Ue=zt+1,Pe=Ue<ri?rt[Ue].el:Bt;for(;tn<=zt;)m(null,rt[tn]=bn?qh(rt[tn]):au(rt[tn]),At,Pe,Pt,qt,un,dn,bn),tn++}}else if(tn>zt)for(;tn<=ni;)Se(je[tn],Pt,qt,!0),tn++;else{const Ue=tn,Pe=tn,Ye=new Map;for(tn=Pe;tn<=zt;tn++){const ae=rt[tn]=bn?qh(rt[tn]):au(rt[tn]);ae.key!=null&&Ye.set(ae.key,tn)}let ze,He=0;const et=zt-Pe+1;let Me=!1,Te=0;const Oe=new Array(et);for(tn=0;tn<et;tn++)Oe[tn]=0;for(tn=Ue;tn<=ni;tn++){const ae=je[tn];if(He>=et){Se(ae,Pt,qt,!0);continue}let ee;if(ae.key!=null)ee=Ye.get(ae.key);else for(ze=Pe;ze<=zt;ze++)if(Oe[ze-Pe]===0&&Vg(ae,rt[ze])){ee=ze;break}ee===void 0?Se(ae,Pt,qt,!0):(Oe[ee-Pe]=tn+1,ee>=Te?Te=ee:Me=!0,m(ae,rt[ee],At,null,Pt,qt,un,dn,bn),He++)}const Ze=Me?Qw(Oe):lm;for(ze=Ze.length-1,tn=et-1;tn>=0;tn--){const ae=Pe+tn,ee=rt[ae],se=ae+1<ri?rt[ae+1].el:Bt;Oe[tn]===0?m(null,ee,At,se,Pt,qt,un,dn,bn):Me&&(ze<0||tn!==Ze[ze]?Ae(ee,At,se,2):ze--)}}},Ae=(je,rt,At,Bt,Pt=null)=>{const{el:qt,type:un,transition:dn,children:bn,shapeFlag:tn}=je;if(tn&6){Ae(je.component.subTree,rt,At,Bt);return}if(tn&128){je.suspense.move(rt,At,Bt);return}if(tn&64){un.move(je,rt,At,wt);return}if(un===tl){d(qt,rt,At);for(let ni=0;ni<bn.length;ni++)Ae(bn[ni],rt,At,Bt);d(je.anchor,rt,At);return}if(un===y1){R(je,rt,At);return}if(Bt!==2&&tn&1&&dn)if(Bt===0)dn.beforeEnter(qt),d(qt,rt,At),el(()=>dn.enter(qt),Pt);else{const{leave:ni,delayLeave:zt,afterLeave:Ue}=dn,Pe=()=>d(qt,rt,At),Ye=()=>{ni(qt,()=>{Pe(),Ue&&Ue()})};zt?zt(qt,Pe,Ye):Ye()}else d(qt,rt,At)},Se=(je,rt,At,Bt=!1,Pt=!1)=>{const{type:qt,props:un,ref:dn,children:bn,dynamicChildren:tn,shapeFlag:ri,patchFlag:ni,dirs:zt}=je;if(dn!=null&&F1(dn,null,At,je,!0),ri&256){rt.ctx.deactivate(je);return}const Ue=ri&1&&zt,Pe=!DA(je);let Ye;if(Pe&&(Ye=un&&un.onVnodeBeforeUnmount)&&ou(Ye,rt,je),ri&6)ht(je.component,At,Bt);else{if(ri&128){je.suspense.unmount(At,Bt);return}Ue&&_f(je,null,rt,"beforeUnmount"),ri&64?je.type.remove(je,rt,At,Pt,wt,Bt):tn&&(qt!==tl||ni>0&&ni&64)?xt(tn,rt,At,!1,!0):(qt===tl&&ni&384||!Pt&&ri&16)&&xt(bn,rt,At),Bt&&Be(je)}(Pe&&(Ye=un&&un.onVnodeUnmounted)||Ue)&&el(()=>{Ye&&ou(Ye,rt,je),Ue&&_f(je,null,rt,"unmounted")},At)},Be=je=>{const{type:rt,el:At,anchor:Bt,transition:Pt}=je;if(rt===tl){Ge(At,Bt);return}if(rt===y1){L(je);return}const qt=()=>{U(At),Pt&&!Pt.persisted&&Pt.afterLeave&&Pt.afterLeave()};if(je.shapeFlag&1&&Pt&&!Pt.persisted){const{leave:un,delayLeave:dn}=Pt,bn=()=>un(At,qt);dn?dn(je.el,qt,bn):bn()}else qt()},Ge=(je,rt)=>{let At;for(;je!==rt;)At=y(je),U(je),je=At;U(rt)},ht=(je,rt,At)=>{const{bum:Bt,scope:Pt,update:qt,subTree:un,um:dn}=je;Bt&&g1(Bt),Pt.stop(),qt&&(qt.active=!1,Se(un,je,rt,At)),dn&&el(dn,rt),el(()=>{je.isUnmounted=!0},rt),rt&&rt.pendingBranch&&!rt.isUnmounted&&je.asyncDep&&!je.asyncResolved&&je.suspenseId===rt.pendingId&&(rt.deps--,rt.deps===0&&rt.resolve())},xt=(je,rt,At,Bt=!1,Pt=!1,qt=0)=>{for(let un=qt;un<je.length;un++)Se(je[un],rt,At,Bt,Pt)},at=je=>je.shapeFlag&6?at(je.component.subTree):je.shapeFlag&128?je.suspense.next():y(je.anchor||je.el),Gt=(je,rt,At)=>{je==null?rt._vnode&&Se(rt._vnode,null,null,!0):m(rt._vnode||null,je,rt,null,null,null,At),u2(),wx(),rt._vnode=je},wt={p:m,um:Se,m:Ae,r:Be,mt:V,mc:j,pc:z,pbc:te,n:at,o:h};let Yt,Mn;return S&&([Yt,Mn]=S(wt)),{render:Gt,hydrate:Yt,createApp:Ow(Gt,Yt)}}function wf({effect:h,update:S},W){h.allowRecurse=S.allowRecurse=W}function zx(h,S,W=!1){const d=h.children,U=S.children;if(Fr(d)&&Fr(U))for(let K=0;K<d.length;K++){const T=d[K];let I=U[K];I.shapeFlag&1&&!I.dynamicChildren&&((I.patchFlag<=0||I.patchFlag===32)&&(I=U[K]=qh(U[K]),I.el=T.el),W||zx(T,I)),I.type===JA&&(I.el=T.el)}}function Qw(h){const S=h.slice(),W=[0];let d,U,K,T,I;const u=h.length;for(d=0;d<u;d++){const g=h[d];if(g!==0){if(U=W[W.length-1],h[U]<g){S[d]=U,W.push(d);continue}for(K=0,T=W.length-1;K<T;)I=K+T>>1,h[W[I]]<g?K=I+1:T=I;g<h[W[K]]&&(K>0&&(S[d]=W[K-1]),W[K]=d)}}for(K=W.length,T=W[K-1];K-- >0;)W[K]=T,T=S[T];return W}const jw=h=>h.__isTeleport,tl=Symbol.for("v-fgt"),JA=Symbol.for("v-txt"),If=Symbol.for("v-cmt"),y1=Symbol.for("v-stc"),Yg=[];let Sc=null;function ss(h=!1){Yg.push(Sc=h?null:[])}function Ww(){Yg.pop(),Sc=Yg[Yg.length-1]||null}let r0=1;function E2(h){r0+=h}function Vx(h){return h.dynamicChildren=r0>0?Sc||lm:null,Ww(),r0>0&&Sc&&Sc.push(h),h}function Ys(h,S,W,d,U,K){return Vx(As(h,S,W,d,U,K,!0))}function Jl(h,S,W,d,U){return Vx(Ns(h,S,W,d,U,!0))}function N1(h){return h?h.__v_isVNode===!0:!1}function Vg(h,S){return h.type===S.type&&h.key===S.key}const ZA="__vInternal",Qx=({key:h})=>h!=null?h:null,OA=({ref:h,ref_key:S,ref_for:W})=>(typeof h=="number"&&(h=""+h),h!=null?na(h)||Po(h)||is(h)?{i:$l,r:h,k:S,f:!!W}:h:null);function As(h,S=null,W=null,d=0,U=null,K=h===tl?0:1,T=!1,I=!1){const u={__v_isVNode:!0,__v_skip:!0,type:h,props:S,key:S&&Qx(S),ref:S&&OA(S),scopeId:Tx,slotScopeIds:null,children:W,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:K,patchFlag:d,dynamicProps:U,dynamicChildren:null,appContext:null,ctx:$l};return I?(cy(u,W),K&128&&h.normalize(u)):W&&(u.shapeFlag|=na(W)?8:16),r0>0&&!T&&Sc&&(u.patchFlag>0||K&6)&&u.patchFlag!==32&&Sc.push(u),u}const Ns=Kw;function Kw(h,S=null,W=null,d=0,U=null,K=!1){if((!h||h===Mw)&&(h=If),N1(h)){const I=fm(h,S,!0);return W&&cy(I,W),r0>0&&!K&&Sc&&(I.shapeFlag&6?Sc[Sc.indexOf(h)]=I:Sc.push(I)),I.patchFlag|=-2,I}if(sC(h)&&(h=h.__vccOpts),S){S=Xw(S);let{class:I,style:u}=S;I&&!na(I)&&(S.class=nd(I)),fo(u)&&(Ax(u)&&!Fr(u)&&(u=pa({},u)),S.style=Y1(u))}const T=na(h)?1:hw(h)?128:jw(h)?64:fo(h)?4:is(h)?2:0;return As(h,S,W,d,U,T,K,!0)}function Xw(h){return h?Ax(h)||ZA in h?pa({},h):h:null}function fm(h,S,W=!1){const{props:d,ref:U,patchFlag:K,children:T}=h,I=S?qw(d||{},S):d;return{__v_isVNode:!0,__v_skip:!0,type:h.type,props:I,key:I&&Qx(I),ref:S&&S.ref?W&&U?Fr(U)?U.concat(OA(S)):[U,OA(S)]:OA(S):U,scopeId:h.scopeId,slotScopeIds:h.slotScopeIds,children:T,target:h.target,targetAnchor:h.targetAnchor,staticCount:h.staticCount,shapeFlag:h.shapeFlag,patchFlag:S&&h.type!==tl?K===-1?16:K|16:K,dynamicProps:h.dynamicProps,dynamicChildren:h.dynamicChildren,appContext:h.appContext,dirs:h.dirs,transition:h.transition,component:h.component,suspense:h.suspense,ssContent:h.ssContent&&fm(h.ssContent),ssFallback:h.ssFallback&&fm(h.ssFallback),el:h.el,anchor:h.anchor,ctx:h.ctx,ce:h.ce}}function Yw(h=" ",S=0){return Ns(JA,null,h,S)}function s0(h="",S=!1){return S?(ss(),Jl(If,null,h)):Ns(If,null,h)}function au(h){return h==null||typeof h=="boolean"?Ns(If):Fr(h)?Ns(tl,null,h.slice()):typeof h=="object"?qh(h):Ns(JA,null,String(h))}function qh(h){return h.el===null&&h.patchFlag!==-1||h.memo?h:fm(h)}function cy(h,S){let W=0;const{shapeFlag:d}=h;if(S==null)S=null;else if(Fr(S))W=16;else if(typeof S=="object")if(d&65){const U=S.default;U&&(U._c&&(U._d=!1),cy(h,U()),U._c&&(U._d=!0));return}else{W=32;const U=S._;!U&&!(ZA in S)?S._ctx=$l:U===3&&$l&&($l.slots._===1?S._=1:(S._=2,h.patchFlag|=1024))}else is(S)?(S={default:S,_ctx:$l},W=32):(S=String(S),d&64?(W=16,S=[Yw(S)]):W=8);h.children=S,h.shapeFlag|=W}function qw(...h){const S={};for(let W=0;W<h.length;W++){const d=h[W];for(const U in d)if(U==="class")S.class!==d.class&&(S.class=nd([S.class,d.class]));else if(U==="style")S.style=Y1([S.style,d.style]);else if(zA(U)){const K=S[U],T=d[U];T&&K!==T&&!(Fr(K)&&K.includes(T))&&(S[U]=K?[].concat(K,T):T)}else U!==""&&(S[U]=d[U])}return S}function ou(h,S,W,d=null){Rc(h,S,7,[W,d])}const Jw=Fx();let Zw=0;function $w(h,S,W){const d=h.type,U=(S?S.appContext:h.appContext)||Jw,K={uid:Zw++,vnode:h,type:d,parent:S,appContext:U,root:null,next:null,subTree:null,effect:null,update:null,scope:new nx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:S?S.provides:Object.create(U.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kx(d,U),emitsOptions:Mx(d,U),emit:null,emitted:null,propsDefaults:ho,inheritAttrs:d.inheritAttrs,ctx:ho,data:ho,props:ho,attrs:ho,slots:ho,refs:ho,setupState:ho,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:W,suspenseId:W?W.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return K.ctx={_:K},K.root=S?S.root:K,K.emit=ow.bind(null,K),h.ce&&h.ce(K),K}let fa=null,uy,rm,b2="__VUE_INSTANCE_SETTERS__";(rm=M1()[b2])||(rm=M1()[b2]=[]),rm.push(h=>fa=h),uy=h=>{rm.length>1?rm.forEach(S=>S(h)):rm[0](h)};const pm=h=>{uy(h),h.scope.on()},Sf=()=>{fa&&fa.scope.off(),uy(null)};function jx(h){return h.vnode.shapeFlag&4}let o0=!1;function eC(h,S=!1){o0=S;const{props:W,children:d}=h.vnode,U=jx(h);Nw(h,W,U,S),Gw(h,d);const K=U?tC(h,S):void 0;return o0=!1,K}function tC(h,S){const W=h.type;h.accessCache=Object.create(null),h.proxy=KA(new Proxy(h.ctx,Sw));const{setup:d}=W;if(d){const U=h.setupContext=d.length>1?iC(h):null;pm(h),vm();const K=ed(d,h,0,[h.props,U]);if(ym(),Sf(),q2(K)){if(K.then(Sf,Sf),S)return K.then(T=>{_2(h,T,S)}).catch(T=>{XA(T,h,0)});h.asyncDep=K}else _2(h,K,S)}else Wx(h,S)}function _2(h,S,W){is(S)?h.type.__ssrInlineRender?h.ssrRender=S:h.render=S:fo(S)&&(h.setupState=Ex(S)),Wx(h,W)}let w2;function Wx(h,S,W){const d=h.type;if(!h.render){if(!S&&w2&&!d.render){const U=d.template||ay(h).template;if(U){const{isCustomElement:K,compilerOptions:T}=h.appContext.config,{delimiters:I,compilerOptions:u}=d,g=pa(pa({isCustomElement:K,delimiters:I},T),u);d.render=w2(U,g)}}h.render=d.render||Ic}pm(h),vm(),Iw(h),ym(),Sf()}function nC(h){return h.attrsProxy||(h.attrsProxy=new Proxy(h.attrs,{get(S,W){return nl(h,"get","$attrs"),S[W]}}))}function iC(h){const S=W=>{h.exposed=W||{}};return{get attrs(){return nC(h)},slots:h.slots,emit:h.emit,expose:S}}function hy(h){if(h.exposed)return h.exposeProxy||(h.exposeProxy=new Proxy(Ex(KA(h.exposed)),{get(S,W){if(W in S)return S[W];if(W in Xg)return Xg[W](h)},has(S,W){return W in S||W in Xg}}))}function rC(h,S=!0){return is(h)?h.displayName||h.name:h.name||S&&h.__name}function sC(h){return is(h)&&"__vccOpts"in h}const Zl=(h,S)=>ew(h,S,o0);function Kx(h,S,W){const d=arguments.length;return d===2?fo(S)&&!Fr(S)?N1(S)?Ns(h,null,[S]):Ns(h,S):Ns(h,null,S):(d>3?W=Array.prototype.slice.call(arguments,2):d===3&&N1(W)&&(W=[W]),Ns(h,S,W))}const oC=Symbol.for("v-scx"),aC=()=>uu(oC),lC="3.3.4",cC="http://www.w3.org/2000/svg",Mf=typeof document<"u"?document:null,C2=Mf&&Mf.createElement("template"),uC={insert:(h,S,W)=>{S.insertBefore(h,W||null)},remove:h=>{const S=h.parentNode;S&&S.removeChild(h)},createElement:(h,S,W,d)=>{const U=S?Mf.createElementNS(cC,h):Mf.createElement(h,W?{is:W}:void 0);return h==="select"&&d&&d.multiple!=null&&U.setAttribute("multiple",d.multiple),U},createText:h=>Mf.createTextNode(h),createComment:h=>Mf.createComment(h),setText:(h,S)=>{h.nodeValue=S},setElementText:(h,S)=>{h.textContent=S},parentNode:h=>h.parentNode,nextSibling:h=>h.nextSibling,querySelector:h=>Mf.querySelector(h),setScopeId(h,S){h.setAttribute(S,"")},insertStaticContent(h,S,W,d,U,K){const T=W?W.previousSibling:S.lastChild;if(U&&(U===K||U.nextSibling))for(;S.insertBefore(U.cloneNode(!0),W),!(U===K||!(U=U.nextSibling)););else{C2.innerHTML=d?`<svg>${h}</svg>`:h;const I=C2.content;if(d){const u=I.firstChild;for(;u.firstChild;)I.appendChild(u.firstChild);I.removeChild(u)}S.insertBefore(I,W)}return[T?T.nextSibling:S.firstChild,W?W.previousSibling:S.lastChild]}};function hC(h,S,W){const d=h._vtc;d&&(S=(S?[S,...d]:[...d]).join(" ")),S==null?h.removeAttribute("class"):W?h.setAttribute("class",S):h.className=S}function dC(h,S,W){const d=h.style,U=na(W);if(W&&!U){if(S&&!na(S))for(const K in S)W[K]==null&&k1(d,K,"");for(const K in W)k1(d,K,W[K])}else{const K=d.display;U?S!==W&&(d.cssText=W):S&&h.removeAttribute("style"),"_vod"in h&&(d.display=K)}}const M2=/\s*!important$/;function k1(h,S,W){if(Fr(W))W.forEach(d=>k1(h,S,d));else if(W==null&&(W=""),S.startsWith("--"))h.setProperty(S,W);else{const d=fC(h,S);M2.test(W)?h.setProperty(Am(d),W.replace(M2,""),"important"):h[d]=W}}const T2=["Webkit","Moz","ms"],x1={};function fC(h,S){const W=x1[S];if(W)return W;let d=hu(S);if(d!=="filter"&&d in h)return x1[S]=d;d=jA(d);for(let U=0;U<T2.length;U++){const K=T2[U]+d;if(K in h)return x1[S]=K}return S}const S2="http://www.w3.org/1999/xlink";function pC(h,S,W,d,U){if(d&&S.startsWith("xlink:"))W==null?h.removeAttributeNS(S2,S.slice(6,S.length)):h.setAttributeNS(S2,S,W);else{const K=A_(S);W==null||K&&!$2(W)?h.removeAttribute(S):h.setAttribute(S,K?"":W)}}function mC(h,S,W,d,U,K,T){if(S==="innerHTML"||S==="textContent"){d&&T(d,U,K),h[S]=W==null?"":W;return}const I=h.tagName;if(S==="value"&&I!=="PROGRESS"&&!I.includes("-")){h._value=W;const g=I==="OPTION"?h.getAttribute("value"):h.value,C=W==null?"":W;g!==C&&(h.value=C),W==null&&h.removeAttribute(S);return}let u=!1;if(W===""||W==null){const g=typeof h[S];g==="boolean"?W=$2(W):W==null&&g==="string"?(W="",u=!0):g==="number"&&(W=0,u=!0)}try{h[S]=W}catch{}u&&h.removeAttribute(S)}function gC(h,S,W,d){h.addEventListener(S,W,d)}function AC(h,S,W,d){h.removeEventListener(S,W,d)}function vC(h,S,W,d,U=null){const K=h._vei||(h._vei={}),T=K[S];if(d&&T)T.value=d;else{const[I,u]=yC(S);if(d){const g=K[S]=bC(d,U);gC(h,I,g,u)}else T&&(AC(h,I,T,u),K[S]=void 0)}}const I2=/(?:Once|Passive|Capture)$/;function yC(h){let S;if(I2.test(h)){S={};let d;for(;d=h.match(I2);)h=h.slice(0,h.length-d[0].length),S[d[0].toLowerCase()]=!0}return[h[2]===":"?h.slice(3):Am(h.slice(2)),S]}let E1=0;const xC=Promise.resolve(),EC=()=>E1||(xC.then(()=>E1=0),E1=Date.now());function bC(h,S){const W=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=W.attached)return;Rc(_C(d,W.value),S,5,[d])};return W.value=h,W.attached=EC(),W}function _C(h,S){if(Fr(S)){const W=h.stopImmediatePropagation;return h.stopImmediatePropagation=()=>{W.call(h),h._stopped=!0},S.map(d=>U=>!U._stopped&&d&&d(U))}else return S}const R2=/^on[a-z]/,wC=(h,S,W,d,U=!1,K,T,I,u)=>{S==="class"?hC(h,d,U):S==="style"?dC(h,W,d):zA(S)?j1(S)||vC(h,S,W,d,T):(S[0]==="."?(S=S.slice(1),!0):S[0]==="^"?(S=S.slice(1),!1):CC(h,S,d,U))?mC(h,S,d,K,T,I,u):(S==="true-value"?h._trueValue=d:S==="false-value"&&(h._falseValue=d),pC(h,S,d,U))};function CC(h,S,W,d){return d?!!(S==="innerHTML"||S==="textContent"||S in h&&R2.test(S)&&is(W)):S==="spellcheck"||S==="draggable"||S==="translate"||S==="form"||S==="list"&&h.tagName==="INPUT"||S==="type"&&h.tagName==="TEXTAREA"||R2.test(S)&&na(W)?!1:S in h}const MC=pa({patchProp:wC},uC);let B2;function TC(){return B2||(B2=zw(MC))}const SC=(...h)=>{const S=TC().createApp(...h),{mount:W}=S;return S.mount=d=>{const U=IC(d);if(!U)return;const K=S._component;!is(K)&&!K.render&&!K.template&&(K.template=U.innerHTML),U.innerHTML="";const T=W(U,!1,U instanceof SVGElement);return U instanceof Element&&(U.removeAttribute("v-cloak"),U.setAttribute("data-v-app","")),T},S};function IC(h){return na(h)?document.querySelector(h):h}var RC=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Xx;const $A=h=>Xx=h,Yx=Symbol();function U1(h){return h&&typeof h=="object"&&Object.prototype.toString.call(h)==="[object Object]"&&typeof h.toJSON!="function"}var qg;(function(h){h.direct="direct",h.patchObject="patch object",h.patchFunction="patch function"})(qg||(qg={}));function BC(){const h=ix(!0),S=h.run(()=>iy({}));let W=[],d=[];const U=KA({install(K){$A(U),U._a=K,K.provide(Yx,U),K.config.globalProperties.$pinia=U,d.forEach(T=>W.push(T)),d=[]},use(K){return!this._a&&!RC?d.push(K):W.push(K),this},_p:W,_a:null,_e:h,_s:new Map,state:S});return U}const qx=()=>{};function L2(h,S,W,d=qx){h.push(S);const U=()=>{const K=h.indexOf(S);K>-1&&(h.splice(K,1),d())};return!W&&rx()&&y_(U),U}function sm(h,...S){h.slice().forEach(W=>{W(...S)})}const LC=h=>h();function G1(h,S){h instanceof Map&&S instanceof Map&&S.forEach((W,d)=>h.set(d,W)),h instanceof Set&&S instanceof Set&&S.forEach(h.add,h);for(const W in S){if(!S.hasOwnProperty(W))continue;const d=S[W],U=h[W];U1(U)&&U1(d)&&h.hasOwnProperty(W)&&!Po(d)&&!$h(d)?h[W]=G1(U,d):h[W]=d}return h}const DC=Symbol();function PC(h){return!U1(h)||!h.hasOwnProperty(DC)}const{assign:Yh}=Object;function OC(h){return!!(Po(h)&&h.effect)}function FC(h,S,W,d){const{state:U,actions:K,getters:T}=S,I=W.state.value[h];let u;function g(){I||(W.state.value[h]=U?U():{});const C=q_(W.state.value[h]);return Yh(C,K,Object.keys(T||{}).reduce((v,y)=>(v[y]=KA(Zl(()=>{$A(W);const E=W._s.get(h);return T[y].call(E,E)})),v),{}))}return u=Jx(h,g,S,W,d,!0),u}function Jx(h,S,W={},d,U,K){let T;const I=Yh({actions:{}},W),u={deep:!0};let g,C,v=[],y=[],E;const b=d.state.value[h];!K&&!b&&(d.state.value[h]={}),iy({});let m;function w(j){let k;g=C=!1,typeof j=="function"?(j(d.state.value[h]),k={type:qg.patchFunction,storeId:h,events:E}):(G1(d.state.value[h],j),k={type:qg.patchObject,payload:j,storeId:h,events:E});const te=m=Symbol();sy().then(()=>{m===te&&(g=!0)}),C=!0,sm(v,k,d.state.value[h])}const _=K?function(){const{state:k}=W,te=k?k():{};this.$patch(ue=>{Yh(ue,te)})}:qx;function O(){T.stop(),v=[],y=[],d._s.delete(h)}function R(j,k){return function(){$A(d);const te=Array.from(arguments),ue=[],xe=[];function Ee(Q){ue.push(Q)}function V(Q){xe.push(Q)}sm(y,{args:te,name:j,store:P,after:Ee,onError:V});let q;try{q=k.apply(this&&this.$id===h?this:P,te)}catch(Q){throw sm(xe,Q),Q}return q instanceof Promise?q.then(Q=>(sm(ue,Q),Q)).catch(Q=>(sm(xe,Q),Promise.reject(Q))):(sm(ue,q),q)}}const L={_p:d,$id:h,$onAction:L2.bind(null,y),$patch:w,$reset:_,$subscribe(j,k={}){const te=L2(v,j,k.detached,()=>ue()),ue=T.run(()=>Kg(()=>d.state.value[h],xe=>{(k.flush==="sync"?C:g)&&j({storeId:h,type:qg.direct,events:E},xe)},Yh({},u,k)));return te},$dispose:O},P=l0(L);d._s.set(h,P);const Y=d._a&&d._a.runWithContext||LC,J=d._e.run(()=>(T=ix(),Y(()=>T.run(S))));for(const j in J){const k=J[j];if(Po(k)&&!OC(k)||$h(k))K||(b&&PC(k)&&(Po(k)?k.value=b[j]:G1(k,b[j])),d.state.value[h][j]=k);else if(typeof k=="function"){const te=R(j,k);J[j]=te,I.actions[j]=k}}return Yh(P,J),Yh(Ms(P),J),Object.defineProperty(P,"$state",{get:()=>d.state.value[h],set:j=>{w(k=>{Yh(k,j)})}}),d._p.forEach(j=>{Yh(P,T.run(()=>j({store:P,app:d._a,pinia:d,options:I})))}),b&&K&&W.hydrate&&W.hydrate(P.$state,b),g=!0,C=!0,P}function NC(h,S,W){let d,U;const K=typeof S=="function";typeof h=="string"?(d=h,U=K?W:S):(U=h,d=h.id);function T(I,u){const g=Fw();return I=I||(g?uu(Yx,null):null),I&&$A(I),I=Xx,I._s.has(d)||(K?Jx(d,S,U,I):FC(d,U,I)),I._s.get(d)}return T.$id=d,T}var Rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kC(h){var S=h.default;if(typeof S=="function"){var W=function(){return S.apply(this,arguments)};W.prototype=S.prototype}else W={};return Object.defineProperty(W,"__esModule",{value:!0}),Object.keys(h).forEach(function(d){var U=Object.getOwnPropertyDescriptor(h,d);Object.defineProperty(W,d,U.get?U:{enumerable:!0,get:function(){return h[d]}})}),W}var Zx={exports:{}};(function(h){(function(S,W,d){function U(u){var g=this,C=I();g.next=function(){var v=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=v-(g.c=v|0)},g.c=1,g.s0=C(" "),g.s1=C(" "),g.s2=C(" "),g.s0-=C(u),g.s0<0&&(g.s0+=1),g.s1-=C(u),g.s1<0&&(g.s1+=1),g.s2-=C(u),g.s2<0&&(g.s2+=1),C=null}function K(u,g){return g.c=u.c,g.s0=u.s0,g.s1=u.s1,g.s2=u.s2,g}function T(u,g){var C=new U(u),v=g&&g.state,y=C.next;return y.int32=function(){return C.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,v&&(typeof v=="object"&&K(v,C),y.state=function(){return K(C,{})}),y}function I(){var u=4022871197,g=function(C){C=String(C);for(var v=0;v<C.length;v++){u+=C.charCodeAt(v);var y=.02519603282416938*u;u=y>>>0,y-=u,y*=u,u=y>>>0,y-=u,u+=y*4294967296}return(u>>>0)*23283064365386963e-26};return g}W&&W.exports?W.exports=T:d&&d.amd?d(function(){return T}):this.alea=T})(Rf,h,!1)})(Zx);var $x={exports:{}};(function(h){(function(S,W,d){function U(I){var u=this,g="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var v=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^v^v>>>8},I===(I|0)?u.x=I:g+=I;for(var C=0;C<g.length+64;C++)u.x^=g.charCodeAt(C)|0,u.next()}function K(I,u){return u.x=I.x,u.y=I.y,u.z=I.z,u.w=I.w,u}function T(I,u){var g=new U(I),C=u&&u.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,b=(y+E)/(1<<21);while(b===0);return b},v.int32=g.next,v.quick=v,C&&(typeof C=="object"&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=T:d&&d.amd?d(function(){return T}):this.xor128=T})(Rf,h,!1)})($x);var eE={exports:{}};(function(h){(function(S,W,d){function U(I){var u=this,g="";u.next=function(){var v=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(v^v<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,I===(I|0)?u.x=I:g+=I;for(var C=0;C<g.length+64;C++)u.x^=g.charCodeAt(C)|0,C==g.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function K(I,u){return u.x=I.x,u.y=I.y,u.z=I.z,u.w=I.w,u.v=I.v,u.d=I.d,u}function T(I,u){var g=new U(I),C=u&&u.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,b=(y+E)/(1<<21);while(b===0);return b},v.int32=g.next,v.quick=v,C&&(typeof C=="object"&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=T:d&&d.amd?d(function(){return T}):this.xorwow=T})(Rf,h,!1)})(eE);var tE={exports:{}};(function(h){(function(S,W,d){function U(I){var u=this;u.next=function(){var C=u.x,v=u.i,y,E;return y=C[v],y^=y>>>7,E=y^y<<24,y=C[v+1&7],E^=y^y>>>10,y=C[v+3&7],E^=y^y>>>3,y=C[v+4&7],E^=y^y<<7,y=C[v+7&7],y=y^y<<13,E^=y^y<<9,C[v]=E,u.i=v+1&7,E};function g(C,v){var y,E=[];if(v===(v|0))E[0]=v;else for(v=""+v,y=0;y<v.length;++y)E[y&7]=E[y&7]<<15^v.charCodeAt(y)+E[y+1&7]<<13;for(;E.length<8;)E.push(0);for(y=0;y<8&&E[y]===0;++y);for(y==8?E[7]=-1:E[y],C.x=E,C.i=0,y=256;y>0;--y)C.next()}g(u,I)}function K(I,u){return u.x=I.x.slice(),u.i=I.i,u}function T(I,u){I==null&&(I=+new Date);var g=new U(I),C=u&&u.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,b=(y+E)/(1<<21);while(b===0);return b},v.int32=g.next,v.quick=v,C&&(C.x&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=T:d&&d.amd?d(function(){return T}):this.xorshift7=T})(Rf,h,!1)})(tE);var nE={exports:{}};(function(h){(function(S,W,d){function U(I){var u=this;u.next=function(){var C=u.w,v=u.X,y=u.i,E,b;return u.w=C=C+1640531527|0,b=v[y+34&127],E=v[y=y+1&127],b^=b<<13,E^=E<<17,b^=b>>>15,E^=E>>>12,b=v[y]=b^E,u.i=y,b+(C^C>>>16)|0};function g(C,v){var y,E,b,m,w,_=[],O=128;for(v===(v|0)?(E=v,v=null):(v=v+"\0",E=0,O=Math.max(O,v.length)),b=0,m=-32;m<O;++m)v&&(E^=v.charCodeAt((m+32)%v.length)),m===0&&(w=E),E^=E<<10,E^=E>>>15,E^=E<<4,E^=E>>>13,m>=0&&(w=w+1640531527|0,y=_[m&127]^=E+w,b=y==0?b+1:0);for(b>=128&&(_[(v&&v.length||0)&127]=-1),b=127,m=4*128;m>0;--m)E=_[b+34&127],y=_[b=b+1&127],E^=E<<13,y^=y<<17,E^=E>>>15,y^=y>>>12,_[b]=E^y;C.w=w,C.X=_,C.i=b}g(u,I)}function K(I,u){return u.i=I.i,u.w=I.w,u.X=I.X.slice(),u}function T(I,u){I==null&&(I=+new Date);var g=new U(I),C=u&&u.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,b=(y+E)/(1<<21);while(b===0);return b},v.int32=g.next,v.quick=v,C&&(C.X&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=T:d&&d.amd?d(function(){return T}):this.xor4096=T})(Rf,h,!1)})(nE);var iE={exports:{}};(function(h){(function(S,W,d){function U(I){var u=this,g="";u.next=function(){var v=u.b,y=u.c,E=u.d,b=u.a;return v=v<<25^v>>>7^y,y=y-E|0,E=E<<24^E>>>8^b,b=b-v|0,u.b=v=v<<20^v>>>12^y,u.c=y=y-E|0,u.d=E<<16^y>>>16^b,u.a=b-v|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,I===Math.floor(I)?(u.a=I/4294967296|0,u.b=I|0):g+=I;for(var C=0;C<g.length+20;C++)u.b^=g.charCodeAt(C)|0,u.next()}function K(I,u){return u.a=I.a,u.b=I.b,u.c=I.c,u.d=I.d,u}function T(I,u){var g=new U(I),C=u&&u.state,v=function(){return(g.next()>>>0)/4294967296};return v.double=function(){do var y=g.next()>>>11,E=(g.next()>>>0)/4294967296,b=(y+E)/(1<<21);while(b===0);return b},v.int32=g.next,v.quick=v,C&&(typeof C=="object"&&K(C,g),v.state=function(){return K(g,{})}),v}W&&W.exports?W.exports=T:d&&d.amd?d(function(){return T}):this.tychei=T})(Rf,h,!1)})(iE);var rE={exports:{}};const UC={},GC=Object.freeze(Object.defineProperty({__proto__:null,default:UC},Symbol.toStringTag,{value:"Module"})),HC=kC(GC);(function(h){(function(S,W,d){var U=256,K=6,T=52,I="random",u=d.pow(U,K),g=d.pow(2,T),C=g*2,v=U-1,y;function E(L,P,Y){var J=[];P=P==!0?{entropy:!0}:P||{};var j=_(w(P.entropy?[L,R(W)]:L==null?O():L,3),J),k=new b(J),te=function(){for(var ue=k.g(K),xe=u,Ee=0;ue<g;)ue=(ue+Ee)*U,xe*=U,Ee=k.g(1);for(;ue>=C;)ue/=2,xe/=2,Ee>>>=1;return(ue+Ee)/xe};return te.int32=function(){return k.g(4)|0},te.quick=function(){return k.g(4)/4294967296},te.double=te,_(R(k.S),W),(P.pass||Y||function(ue,xe,Ee,V){return V&&(V.S&&m(V,k),ue.state=function(){return m(k,{})}),Ee?(d[I]=ue,xe):ue})(te,j,"global"in P?P.global:this==d,P.state)}function b(L){var P,Y=L.length,J=this,j=0,k=J.i=J.j=0,te=J.S=[];for(Y||(L=[Y++]);j<U;)te[j]=j++;for(j=0;j<U;j++)te[j]=te[k=v&k+L[j%Y]+(P=te[j])],te[k]=P;(J.g=function(ue){for(var xe,Ee=0,V=J.i,q=J.j,Q=J.S;ue--;)xe=Q[V=v&V+1],Ee=Ee*U+Q[v&(Q[V]=Q[q=v&q+xe])+(Q[q]=xe)];return J.i=V,J.j=q,Ee})(U)}function m(L,P){return P.i=L.i,P.j=L.j,P.S=L.S.slice(),P}function w(L,P){var Y=[],J=typeof L,j;if(P&&J=="object")for(j in L)try{Y.push(w(L[j],P-1))}catch{}return Y.length?Y:J=="string"?L:L+"\0"}function _(L,P){for(var Y=L+"",J,j=0;j<Y.length;)P[v&j]=v&(J^=P[v&j]*19)+Y.charCodeAt(j++);return R(P)}function O(){try{var L;return y&&(L=y.randomBytes)?L=L(U):(L=new Uint8Array(U),(S.crypto||S.msCrypto).getRandomValues(L)),R(L)}catch{var P=S.navigator,Y=P&&P.plugins;return[+new Date,S,Y,S.screen,R(W)]}}function R(L){return String.fromCharCode.apply(0,L)}if(_(d.random(),W),h.exports){h.exports=E;try{y=HC}catch{}}else d["seed"+I]=E})(typeof self<"u"?self:Rf,[],Math)})(rE);var zC=Zx.exports,VC=$x.exports,QC=eE.exports,jC=tE.exports,WC=nE.exports,KC=iE.exports,Bf=rE.exports;Bf.alea=zC;Bf.xor128=VC;Bf.xorwow=QC;Bf.xorshift7=jC;Bf.xor4096=WC;Bf.tychei=KC;var XC=Bf;const{alea:YC}=XC,qC=h=>h*h*h*(h*(h*6-15)+10),b1=(h,S,W)=>h+(S-h)*qC(W),JC=(h,S)=>h[0]*S[0]+h[1]*S[1];class ZC{constructor(S,W,d=Math.floor(Math.random()*4294967296)){this.random=YC(d.toString()),this.vectors=this._createVectorField(S,W)}_dotProdGrid(S,W,d,U){const K=this.vectors[U][d],T=[S-d,W-U];return JC(K,T)}_createRandomVector(){const S=this.random()*Math.PI*2;return[Math.cos(S),Math.sin(S)]}_createVectorField(S,W){return Array(W+1).fill([]).map(()=>Array(S+1).fill(0).map(()=>this._createRandomVector()))}perlin(S,W){const[d,U]=[Math.floor(S),Math.floor(W)],[K,T]=[d+1,U+1],I=[this._dotProdGrid(S,W,d,U),this._dotProdGrid(S,W,K,U),this._dotProdGrid(S,W,d,T),this._dotProdGrid(S,W,K,T)];return b1(b1(I[0],I[1],S-d),b1(I[2],I[3],S-d),W-U)}}const sE=[[-.7207726424842171,14.026011008285593],[1.1126140076335815,11.651417697596393],[1.8933574234672257,15.497854749410564],[4.883194137582727,15.251123270010218],[-1.6117004208986856,10.395188859171263],[6.177984802760356,17.95732302859585],[-2.651124595282667,16.322473796646698],[5.21071061428027,12.269054699790601],[2.444299490016263,8.96318151451812],[5.036570344476825,20.731700983096893],[-4.094938367125177,18.95218895084838],[-2.60396371383991,7.564038287851979],[6.194194418119995,9.434842356372236],[8.494613492498573,16.051219276466433],[6.9095679367240095,6.521383805288977],[1.0512651883203006,6.306217940379682],[1.9971383795363593,18.49605913089583],[6.990366435457474,23.008251187873583],[-2.8725723571191253,21.691864358188077],[3.577107821022963,23.352763581096745],[1.1247888217958284,21.6247208946941],[4.481815877800962,4.75899340007367],[-4.187376825822792,11.933334189469178],[8.19373926809643,11.950401203792474],[3.05581535367072,2.119576323296993],[-3.3059870801509703,24.660391211335828],[8.6653781045894,20.519408905150158],[10.592455642929288,18.19576079200683],[-5.80489530930755,23.000434084704665],[13.134217051772175,16.60219593906953],[9.132100954796698,8.827631370180164],[11.164640754340667,11.533574670289802],[4.91218100451502,-.23709645211445363],[13.820308672953459,12.929077413408166],[3.36036752811264,-2.804561142125987],[16.11822351412735,16.911558885497527],[11.775707227913507,7.409412109015825],[9.564260403228452,24.549377348404327],[4.810172014404678,-5.430978274176329],[15.335201090132017,10.339656442539393],[-8.60923717866486,24.06611071472412],[.42348348882084963,-2.192423788460001],[-6.930123682768279,10.71787556050819],[-7.094937559682972,18.949987893682007],[7.814694267388184,-.9956587493883475],[-5.598897544234703,7.738312071183948],[-1.0961849993818795,4.211353340617222],[7.7535020243077994,-4.85062626650879],[12.543148430914613,24.194094195823034],[13.287999883376372,19.598251819840762],[8.775833600398876,4.172543139643842],[10.771640847112643,-.4892331135286483],[10.63422282413206,-4.0131015364500655],[11.152722901572297,-6.967954776408785],[15.523707308810309,21.59865485619609],[-11.544736928698534,24.684852355113954],[-8.092763207987595,13.483426018264815],[14.072341259792609,5.479263896153711],[18.479155110086772,21.083554580589315],[-12.948314311991952,22.033443195986067],[-11.075734368565598,13.164234766567695],[-10.75053875489167,19.991438641482674],[1.8512245117187334,-5.925578796162185],[8.376552672342896,-8.105003085998323],[-9.331198394864217,16.215875155560134],[3.8907908440640995,-8.28662850899558],[13.214239888985581,1.2525217258909116],[13.617869532098098,-4.325915094409886],[16.592403865377975,7.615791324382123],[-9.781340838762763,9.784837121127055],[16.43216099198078,3.6269003164060933],[19.151124522271637,24.007329043349394],[-13.181344315031454,15.301150009001077],[-15.416753901028036,23.738378970518184],[-12.8851676227988,10.771338759952464],[14.672265733249056,-1.3693403294925979],[-15.629261144930517,20.68714305153211],[-18.182364709061346,22.5758830098846],[.9281345461814148,-8.780032319259796],[-15.500066428281652,9.300861205861814],[-17.682700027346215,18.500047087431902],[17.58102602511707,-2.103583861607081],[-1.2354272341591077,-10.858252813492737],[-1.0828978186860532,-6.550819669922085],[-1.631260755326558,-.006554146614181633],[19.107973271514695,16.663775939751865],[17.931792715899157,11.84222488656983],[-20.67785969325086,18.670395482604945],[-3.841070110270717,3.0007312988466133],[-9.863578745315223,6.785964511841037],[-3.9665290690607335,-5.723371295784688],[-17.675192393719158,11.366975199444845],[-12.853423153168947,6.539326281175409],[-6.832788755943316,3.2234857491612274],[21.275279520041593,14.58946072139755],[7.981449670057145,-11.078871546032298],[4.556954050038765,-11.21173134188977],[22.116661379671825,23.553907443289283],[11.475123173374186,-9.950580811422583],[-15.695550684523116,13.664456289453156],[-18.328571900774186,8.30108283438149],[18.951823768592384,1.9986191698721214],[-15.00300404697764,4.446648097370577],[-20.621022629137887,24.323151606537103],[19.567625220912944,7.23100841731798],[20.770665305932795,10.872275188103067],[-4.202060505024566,-10.412061110080204],[-18.61383048361553,15.648206265540232],[-4.611555936560727,-.3498333809300114],[23.628322334565716,12.728496048703185],[7.089880302922161,-13.943326828208402],[-7.576144091126274,.10975020647244449],[4.434955834932509,-15.340243457528105],[21.960244217375404,5.4212088876001125],[-21.283420488553123,14.279524708151015],[14.037143937221671,-7.792645802856548],[23.569361953871372,20.929091060812148],[-13.74294908170627,18.35437070941753],[17.531488465219105,-5.103174838750366],[24.48527262349704,3.8012608797063727],[22.742809904758964,8.611601465222904],[-23.29032235715487,22.953904016797203],[-7.173450726581134,-10.825389249986102],[1.4286568979602765,41.21999117647679],[32.82677308526462,8.14858290026775],[49.10993742480764,25.824832904998292],[.8991852666087361,38.248850332243194],[17.185055953524614,22.119269545888713],[15.19742940060218,27.120477687576194],[27.166709824402368,11.975333871138586],[10.548753418945275,26.497823975996365],[45.50602675971476,23.563027496384237],[1.9746435862130238,35.448245147145876],[23.493304663550482,11.154036755980265],[1.0062829699319316,32.60883011639821],[28.040173602975248,7.0037101337251695],[.4143296292320311,45.24797099404356],[4.21942311147696,31.5725946105122],[37.95413114176188,12.439335774307715],[7.121122840659738,28.592625942160428],[40.89351787080449,11.839331060052704],[3.160795232640335,28.76558427669618],[25.48065636364034,8.906719862404724],[42.00100124477654,16.743080721211786],[48.46493512281253,41.640169950238615],[45.5314852319357,19.901229669174246],[14.238140465850837,24.277984989315794],[18.073973612562956,18.78532877288672],[14.001652761040246,21.28732058730184],[46.04656505383195,16.94577830312618],[35.71983844430752,7.3547486428146955],[20.935321951625024,9.586642598312661],[31.01071661276084,5.760709601979669],[15.306898913992207,15.80291111120073],[5.3570807218381145,26.16607377848799],[38.5389582793732,6.328803539244664],[46.16794481502467,13.948234816607116],[39.26856083763546,9.3175232481141],[11.078159612910143,20.614128331823206],[23.216591651927168,6.938469120965712],[15.879182395376427,11.892558550281537],[49.1184153790938,13.405350436134006],[18.244811380648216,8.259558250028006],[49.001954125609366,16.430341173673245],[39.19304942358222,3.400977592391368],[47.19963474435405,11.099210614755474],[35.31138063466284,4.382685013324181],[20.389721216498877,5.934076995697135],[13.168184079761497,18.40542364998303],[37.54411429061378,.894782682321039],[29.807087565615323,3.0127508837912695],[18.28861749491513,3.792730888420923],[49.9592710631856,22.94757164283948],[40.97536268134073,.9878138078093301],[9.478766495532144,23.69512385223625],[12.86402262024899,14.061545149242283],[11.020595181343054,11.694738169894629],[44.28083015998867,10.405971984637613],[15.657059276409479,5.2331826726245545],[4.633305599397822,23.25469101901843],[33.445809013866416,2.0332930648236593],[13.739095764346517,7.540002120781512],[41.458110553747744,7.020576622714949],[8.21590829271431,12.759506434238604],[2.442198334457662,25.456524155318974],[21.753067034658326,3.261758118746406],[49.51783028717048,19.980227705701214],[44.31748358708691,6.1128399559371625],[25.47455271535703,4.963219304857698],[10.457382102759766,17.120296169347913],[.3443918500106582,23.311947751034864],[47.57268694121007,8.122495637062622],[.30986144915055247,27.83168034043898],[7.323580259831975,21.60821889765672],[5.0188039343082185,19.687800690779564],[17.86598856511309,.8226492754522758],[12.817415922805619,4.265491800324163],[7.527389993654994,17.76461460039256],[9.514912598082992,9.099951096073857],[5.485345474057386,14.002095140677069],[20.885660861433262,.3898934752349619],[2.154467755223595,20.579752625127465],[6.611798988064756,8.343689654952504],[27.03311420712615,1.8703534895398786],[23.871742638826614,.6785379255876686],[9.028479429066227,6.139649967458667],[10.754277403410207,2.087543350569906],[49.208761171847755,5.607886102394589],[43.75372011905979,2.119507206337036],[46.44945146845799,4.002220863632211],[3.6411292986537824,11.635902693224882],[12.95014042594881,.043482298094298155],[48.28739725472809,1.6311545873058795],[7.097174476198292,3.843988585845985],[1.2840010083841258,9.780115468565086],[3.1439626251099755,15.87770873485231],[.2267391394562952,18.281087276723756],[4.362800260907164,6.358241412050264],[.8159012768356784,6.816860055792786],[5.092427858675777,1.6121751976945258],[.6434734964317567,12.710938647542653],[2.1922209653256717,.8448421697564678],[1.3104447462519646,3.7123272524510824]],$C=50,e3=50,oE=(h,S)=>h.tags.includes(S),aE=h=>h._embedded["wp:featuredmedia"]&&h._embedded["wp:featuredmedia"].length>=1,lE=h=>h._embedded["wp:featuredmedia"][0].media_details.sizes.full.source_url,t3=h=>{const S=h.id;let W="";return window.wpData.youtube_urls[S]&&(W=window.wpData.youtube_urls[S]),W},cE=(h,S)=>h.tags.includes(S),n3=h=>{let S="";return h.meta.video_link&&(S=h.meta.video_link),S};window.points=sE;const i3=()=>{for(var h="0123456789ABCDEF",S="#",W=0;W<6;W++)S+=h[Math.floor(Math.random()*16)];return S},r3=(h,S)=>{const W=new ZC(2938,345,1984);return h.map((d,U)=>{let K=S+U;return d.position=sE[K],d}).map((d,U)=>{let K=W.perlin(Math.abs(d.position[0]),Math.abs(d.position[1]));return d.height=.7,K&&(d.height=Math.abs(K)*4+.85),d}).map(d=>(d.rot=Math.ceil((Math.random()*2-1)*35),d)).map(d=>(d.position[0]=d.position[0]-$C/2,d.position[1]=d.position[1]-e3/2,d)).filter(d=>!isNaN(d.position[0])&&!isNaN(d.position[1]))},xm=NC("posts",{state:()=>({posts:[],tags:[],currentFilter:null}),getters:{allPosts(h){return h.posts},getPostBySlug(h){return S=>h.posts.find(W=>W.slug===S)},getPostsByCurrentFilter(h){return h.currentFilter==null?h.posts:h.posts.filter(S=>S.tags.includes(h.currentFilter))},allTags(h){return h.tags}},actions:{addPosts(h){let S=r3(h,this.posts.length),W=this.posts.concat(S);this.posts=W},addTags(h){let S=this.tags.concat(h);this.tags=S},selectFilter(h){this.currentFilter=h}}}),Bl=(h,S)=>{const W=h.__vccOpts||h;for(const[d,U]of S)W[d]=U;return W},s3={name:"a-post",props:["post"],data(){return{videoWidth:null,videoHeight:null}},mounted(){this.isVideo&&window.setTimeout(()=>{let h=document.querySelector(`#${this.post.slug}`),S=h.videoHeight/h.videoWidth;this.videoWidth=2.2,this.videoHeight=this.videoWidth*S},100)},computed:{textAttr(){return`side: double; wrapCount: 13; baseline: bottom; color: ${i3()}`},isYouTube(){const h=parseInt(window.wpData.youtube_tag_id,10);return oE(this.post,h)},hasImage(){return aE(this.post)},imgUrl(){return lE(this.post)},width(){return this.post._embedded["wp:featuredmedia"][0].media_details.sizes.full.width},height(){return this.post._embedded["wp:featuredmedia"][0].media_details.sizes.full.height},isVideo(){const h=parseInt(window.wpData.video_tag_id,10);return cE(this.post,h)},posX(){return this.post.position[0]},posZ(){return this.post.position[1]}}};function o3(h,S,W,d,U,K){const T=Xo("a-image"),I=Xo("a-video"),u=Xo("a-entity"),g=Xo("a-text");return ss(),Jl(u,{"post-url":W.post.slug,"cursor-listener":"",position:`${K.posX} ${W.post.height} ${K.posZ}`,rotation:`0 ${W.post.rot} 0`},{default:cu(()=>[K.isYouTube?(ss(),Jl(T,{key:0,"post-url":W.post.slug,src:`#${W.post.slug}`,width:"2.2",height:"1.5"},null,8,["post-url","src"])):K.isVideo?(ss(),Jl(I,{key:1,"post-url":W.post.slug,src:`#${W.post.slug}`,width:U.videoWidth,height:U.videoHeight,autoplay:"",loop:"true"},null,8,["post-url","src","width","height"])):K.hasImage?(ss(),Jl(T,{key:2,"post-url":W.post.slug,src:`#${W.post.slug}`,width:"1.5",height:`${K.height/K.width*1.5}`},null,8,["post-url","src","height"])):(ss(),Jl(g,{key:3,value:W.post.title.rendered,text:K.textAttr,position:"-0.65 0 0.1"},{default:cu(()=>[Ns(u,{"post-url":W.post.slug,position:"2.1 0.5 0",geometry:"primitive: plane; width: 4.3; height: 2.5;",material:"visible: false"},null,8,["post-url"])]),_:1},8,["value","text"]))]),_:1},8,["post-url","position","rotation"])}const a3=Bl(s3,[["render",o3]]),l3={name:"AAsset",props:["post"],setup(){return{store:xm()}},computed:{isYouTube(){const h=parseInt(window.wpData.youtube_tag_id,10);return oE(this.post,h)},youTubeThumbnail(){return t3(this.post)},hasImage(){return aE(this.post)},imgUrl(){return lE(this.post)},isVideo(){const h=parseInt(window.wpData.video_tag_id,10);return cE(this.post,h)},videoUrl(){return n3(this.post)}}},c3=["id","src"],u3=["id","src"],h3=["id","src"];function d3(h,S,W,d,U,K){return ss(),Ys("template",null,[K.isYouTube?(ss(),Ys("img",{key:0,id:W.post.slug,src:K.youTubeThumbnail,crossorigin:"anonymous"},null,8,c3)):K.isVideo?(ss(),Ys("video",{key:1,id:W.post.slug,src:K.videoUrl,"webkit-playsinline":"",playsinline:"",crossorigin:"anonymous"},null,8,u3)):K.hasImage?(ss(),Ys("img",{key:2,id:W.post.slug,src:W.post._embedded["wp:featuredmedia"][0].media_details.sizes.full.source_url,crossorigin:"anonymous"},null,8,h3)):s0("",!0)])}const f3=Bl(l3,[["render",d3]]),p3={name:"MagicWindowButton",data(){return{isMagicWindow:!1}},methods:{toggleMagicWindow(){this.isMagicWindow=!this.isMagicWindow,this.$emit("magicWindowChanged",this.isMagicWindow)}}},m3=As("span",{class:"a11y-hidden"},"Toggle mobile window tracking",-1),g3=As("svg",{fill:"black",viewBox:"0 0 512 512"},[As("path",{d:"M464 6.1c9.5-8.5 24-8.1 33 .9l8 8c9 9 9.4 23.5 .9 33l-85.8 95.9c-2.6 2.9-4.1 6.7-4.1 10.7V176c0 8.8-7.2 16-16 16H384.2c-4.6 0-8.9 1.9-11.9 5.3L100.7 500.9C94.3 508 85.3 512 75.8 512c-8.8 0-17.3-3.5-23.5-9.8L9.7 459.7C3.5 453.4 0 445 0 436.2c0-9.5 4-18.5 11.1-24.8l111.6-99.8c3.4-3 5.3-7.4 5.3-11.9V272c0-8.8 7.2-16 16-16h34.6c3.9 0 7.7-1.5 10.7-4.1L464 6.1zM432 288c3.6 0 6.7 2.4 7.7 5.8l14.8 51.7 51.7 14.8c3.4 1 5.8 4.1 5.8 7.7s-2.4 6.7-5.8 7.7l-51.7 14.8-14.8 51.7c-1 3.4-4.1 5.8-7.7 5.8s-6.7-2.4-7.7-5.8l-14.8-51.7-51.7-14.8c-3.4-1-5.8-4.1-5.8-7.7s2.4-6.7 5.8-7.7l51.7-14.8 14.8-51.7c1-3.4 4.1-5.8 7.7-5.8zM87.7 69.8l14.8 51.7 51.7 14.8c3.4 1 5.8 4.1 5.8 7.7s-2.4 6.7-5.8 7.7l-51.7 14.8L87.7 218.2c-1 3.4-4.1 5.8-7.7 5.8s-6.7-2.4-7.7-5.8L57.5 166.5 5.8 151.7c-3.4-1-5.8-4.1-5.8-7.7s2.4-6.7 5.8-7.7l51.7-14.8L72.3 69.8c1-3.4 4.1-5.8 7.7-5.8s6.7 2.4 7.7 5.8zM208 0c3.7 0 6.9 2.5 7.8 6.1l6.8 27.3 27.3 6.8c3.6 .9 6.1 4.1 6.1 7.8s-2.5 6.9-6.1 7.8l-27.3 6.8-6.8 27.3c-.9 3.6-4.1 6.1-7.8 6.1s-6.9-2.5-7.8-6.1l-6.8-27.3-27.3-6.8c-3.6-.9-6.1-4.1-6.1-7.8s2.5-6.9 6.1-7.8l27.3-6.8 6.8-27.3c.9-3.6 4.1-6.1 7.8-6.1z"})],-1),A3=[m3,g3];function v3(h,S,W,d,U,K){return ss(),Ys("button",{class:nd(["magic-window ui-button",{"is-active":U.isMagicWindow}]),onClick:S[0]||(S[0]=(...T)=>K.toggleMagicWindow&&K.toggleMagicWindow(...T))},A3,2)}const y3=Bl(p3,[["render",v3]]),x3={name:"DaytimeButton",data(){return{isDay:!0}},methods:{toggleDaytime(){this.isDay=!this.isDay,this.$emit("daytimeChanged",this.isDay)}}},E3=As("span",{class:"a11y-hidden"},"Toggle daytime lighting",-1),b3={key:0,viewBox:"0 -17 512 512"},_3=As("path",{d:"M375.7 19.7c-1.5-8-6.9-14.7-14.4-17.8s-16.1-2.2-22.8 2.4L256 61.1 173.5 4.2c-6.7-4.6-15.3-5.5-22.8-2.4s-12.9 9.8-14.4 17.8l-18.1 98.5L19.7 136.3c-8 1.5-14.7 6.9-17.8 14.4s-2.2 16.1 2.4 22.8L61.1 256 4.2 338.5c-4.6 6.7-5.5 15.3-2.4 22.8s9.8 13 17.8 14.4l98.5 18.1 18.1 98.5c1.5 8 6.9 14.7 14.4 17.8s16.1 2.2 22.8-2.4L256 450.9l82.5 56.9c6.7 4.6 15.3 5.5 22.8 2.4s12.9-9.8 14.4-17.8l18.1-98.5 98.5-18.1c8-1.5 14.7-6.9 17.8-14.4s2.2-16.1-2.4-22.8L450.9 256l56.9-82.5c4.6-6.7 5.5-15.3 2.4-22.8s-9.8-12.9-17.8-14.4l-98.5-18.1L375.7 19.7zM269.6 110l65.6-45.2 14.4 78.3c1.8 9.8 9.5 17.5 19.3 19.3l78.3 14.4L402 242.4c-5.7 8.2-5.7 19 0 27.2l45.2 65.6-78.3 14.4c-9.8 1.8-17.5 9.5-19.3 19.3l-14.4 78.3L269.6 402c-8.2-5.7-19-5.7-27.2 0l-65.6 45.2-14.4-78.3c-1.8-9.8-9.5-17.5-19.3-19.3L64.8 335.2 110 269.6c5.7-8.2 5.7-19 0-27.2L64.8 176.8l78.3-14.4c9.8-1.8 17.5-9.5 19.3-19.3l14.4-78.3L242.4 110c8.2 5.7 19 5.7 27.2 0zM256 368a112 112 0 1 0 0-224 112 112 0 1 0 0 224zM192 256a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"},null,-1),w3=[_3],C3={key:1,viewBox:"3 25 384 512"},M3=As("path",{d:"M144.7 98.7c-21 34.1-33.1 74.3-33.1 117.3c0 98 62.8 181.4 150.4 211.7c-12.4 2.8-25.3 4.3-38.6 4.3C126.6 432 48 353.3 48 256c0-68.9 39.4-128.4 96.8-157.3zm62.1-66C91.1 41.2 0 137.9 0 256C0 379.7 100 480 223.5 480c47.8 0 92-15 128.4-40.6c1.9-1.3 3.7-2.7 5.5-4c4.8-3.6 9.4-7.4 13.9-11.4c2.7-2.4 5.3-4.8 7.9-7.3c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-3.7 .6-7.4 1.2-11.1 1.6c-5 .5-10.1 .9-15.3 1c-1.2 0-2.5 0-3.7 0c-.1 0-.2 0-.3 0c-96.8-.2-175.2-78.9-175.2-176c0-54.8 24.9-103.7 64.1-136c1-.9 2.1-1.7 3.2-2.6c4-3.2 8.2-6.2 12.5-9c3.1-2 6.3-4 9.6-5.8c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-3.6-.3-7.1-.5-10.7-.6c-2.7-.1-5.5-.1-8.2-.1c-3.3 0-6.5 .1-9.8 .2c-2.3 .1-4.6 .2-6.9 .4z"},null,-1),T3=[M3];function S3(h,S,W,d,U,K){return ss(),Ys("button",{class:"daytime-button ui-button",onClick:S[0]||(S[0]=(...T)=>K.toggleDaytime&&K.toggleDaytime(...T))},[E3,U.isDay?(ss(),Ys("svg",b3,w3)):(ss(),Ys("svg",C3,T3))])}const I3=Bl(x3,[["render",S3]]),R3={name:"RagnarokButton",data(){return{isRagnarok:!1}},methods:{toggleR(){this.isRagnarok=!this.isRagnarok,this.$emit("rChanged",this.isRagnarok)}}},B3=As("span",{class:"a11y-hidden"},"Toggle Ragnarok",-1),L3=As("svg",{viewBox:"0 0 640 512"},[As("path",{d:"M320 96C178.6 96 64 210.6 64 352v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352C0 175.3 143.3 32 320 32s320 143.3 320 320v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352C576 210.6 461.4 96 320 96zm0 192c-35.3 0-64 28.7-64 64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352c0-70.7 57.3-128 128-128s128 57.3 128 128v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352c0-35.3-28.7-64-64-64zM160 352v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352c0-123.7 100.3-224 224-224s224 100.3 224 224v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V352c0-88.4-71.6-160-160-160s-160 71.6-160 160z"})],-1),D3=[B3,L3];function P3(h,S,W,d,U,K){return ss(),Ys("button",{class:nd(["ragnarok-button ui-button",{"is-active":U.isRagnarok}]),onClick:S[0]||(S[0]=(...T)=>K.toggleR&&K.toggleR(...T))},D3,2)}const O3=Bl(R3,[["render",P3]]),F3={name:"AboutButton",data(){return{isOpen:!1}},methods:{url(){window.vueRouter.push(`/page/${window.wpData.about_page_id}`)}},watch:{$route(h,S){h.path!=`/page/${window.wpData.about_page_id}`&&(this.isOpen=!1),h.path==`/page/${window.wpData.about_page_id}`&&(this.isOpen=!0)}}},N3=As("span",{class:"a11y-hidden"},"Open about page",-1),k3=As("svg",{viewBox:"0 0 512 512"},[As("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24V250.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1H222.6c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"})],-1),U3=[N3,k3];function G3(h,S,W,d,U,K){return ss(),Ys("button",{class:nd(["about-button ui-button",{"is-active":U.isOpen}]),onClick:S[0]||(S[0]=(...T)=>K.url&&K.url(...T))},U3,2)}const H3=Bl(F3,[["render",G3]]),z3={name:"TheField",components:{APost:a3,AAsset:f3,MagicWindowButton:y3,DaytimeButton:I3,RagnarokButton:O3,AboutButton:H3},created(){},data(){return{isMagicWindow:!1,isDay:!0,isRagnarok:!1,isPointOn:!0}},setup(){return{store:xm()}},methods:{toggleMW(h){this.isMagicWindow=h},toggleDT(h){this.isDay=h},toggleR(h){this.isRagnarok=h}},computed:{magicWindow(){return`magicWindowTrackingEnabled: ${this.isMagicWindow}`},environment(){let h,S,W;return this.isRagnarok?(h="#a51d2d",S="#c01c28",W=.9):this.isDay?(h="#1c71d8",S="#99c1f1",W=.4,this.isPointOn=!0):(h="#192636",S="#05111f",W=.9,this.isPointOn=!1),`preset: checkerboard; active: true; seed: 8; skyType: gradient; skyColor:  ${h}; horizonColor: ${S}; fog: ${W}; lightPosition: [object Object]; ground: noise; groundYScale: 1.18; groundTexture: squares; groundColor: #252525; groundColor2: #111111; dressing: trees; dressingAmount: 20; dressingColor: #888b1d; dressingScale: 1; dressingVariance: [object Object]; gridColor: #c5a543; grid: 1x1; gridColor: #ffffff`}}},V3={key:1},Q3={class:"ui ui-bottom"},j3={class:"ui ui-top"};function W3(h,S,W,d,U,K){const T=Xo("AAsset"),I=Xo("a-assets"),u=Xo("a-entity"),g=Xo("a-light"),C=Xo("APost"),v=Xo("a-scene"),y=Xo("MagicWindowButton"),E=Xo("DaytimeButton"),b=Xo("RagnarokButton"),m=Xo("AboutButton");return ss(),Ys(tl,null,[d.store.allPosts.length!=0?(ss(),Jl(v,{key:0,"vr-mode-ui":"enabled: true"},{default:cu(()=>[Ns(I,null,{default:cu(()=>[(ss(!0),Ys(tl,null,B1(d.store.allPosts,(w,_)=>(ss(),Jl(T,{key:w.id,post:w},null,8,["post"]))),128))]),_:1}),Ns(u,{environment:K.environment},null,8,["environment"]),Ns(u,{id:"rig","movement-controls":"controls: keyboard, nipple","nipple-controls":"moveJoystickPosition: false",position:"0 0 0"},{default:cu(()=>[Ns(u,{camera:"",id:"camera","look-controls":K.magicWindow,position:"0 1.6 0"},{default:cu(()=>[Ns(u,{cursor:"rayOrigin:mouse",position:"0 0 -1",material:"color: black; shader: flat"})]),_:1},8,["look-controls"])]),_:1}),Ns(g,{type:"ambient",color:"#ccc",visible:"false"}),Ns(g,{color:"#ddf",distance:"100",visible:U.isPointOn,intensity:"0.4",type:"point"},null,8,["visible"]),Ns(g,{color:"#ddf",position:"3 10 -10",distance:"50",visible:"false",intensity:"0.4",type:"point"}),Ns(u,{position:"0 0 0",id:"all-posts"},{default:cu(()=>[(ss(!0),Ys(tl,null,B1(d.store.getPostsByCurrentFilter,(w,_)=>(ss(),Jl(C,{key:w.id,post:w},null,8,["post"]))),128))]),_:1})]),_:1})):(ss(),Ys("div",V3," Loading ")),As("div",Q3,[h.isGyroDevice?(ss(),Jl(y,{key:0,onMagicWindowChanged:K.toggleMW},null,8,["onMagicWindowChanged"])):s0("",!0),U.isRagnarok?s0("",!0):(ss(),Jl(E,{key:1,onDaytimeChanged:K.toggleDT},null,8,["onDaytimeChanged"])),Ns(b,{onRChanged:K.toggleR},null,8,["onRChanged"])]),As("div",j3,[Ns(m)])],64)}const K3=Bl(z3,[["render",W3]]),X3={name:"TrollfieldApp",components:{TheField:K3},setup(){return{store:xm()}},data(){return{}},async created(){AFRAME.registerComponent("cursor-listener",{init(){this.el.addEventListener("click",function(h){let S=h.target.attributes["post-url"];S&&window.vueRouter.push(`/${S.value}`)})}}),this.fetchData(1),this.fetchTags()},methods:{fetchData(h){fetch(`${window.wpData.rest_url}/wp/v2/posts?per_page=50&page=${h}&_embed=true`).then(S=>(parseInt(S.headers.get("x-wp-totalpages"),10)>h&&this.fetchData(h+1),S.json())).then(S=>{console.log("pass",h,S),this.store.addPosts(S)}).catch(S=>{console.log("Error here?",S)})},fetchTags(){fetch(`${window.wpData.rest_url}/trolllike-theme/v1/tags`).then(h=>h.json()).then(h=>{let S=h,W=[],d=[];S.forEach(U=>{d.includes(U.term_id)||(W.push(U),d.push(U.term_id))}),this.store.addTags(Array.from(W))}).catch(h=>{console.log("Error",h)})}},computed:{}};function Y3(h,S,W,d,U,K){const T=Xo("TheField"),I=Xo("router-view");return ss(),Ys("div",null,[Ns(T),Ns(I)])}const q3=Bl(X3,[["render",Y3]]);/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const om=typeof window<"u";function J3(h){return h.__esModule||h[Symbol.toStringTag]==="Module"}const zs=Object.assign;function _1(h,S){const W={};for(const d in S){const U=S[d];W[d]=Bc(U)?U.map(h):h(U)}return W}const Jg=()=>{},Bc=Array.isArray,Z3=/\/$/,$3=h=>h.replace(Z3,"");function w1(h,S,W="/"){let d,U={},K="",T="";const I=S.indexOf("#");let u=S.indexOf("?");return I<u&&I>=0&&(u=-1),u>-1&&(d=S.slice(0,u),K=S.slice(u+1,I>-1?I:S.length),U=h(K)),I>-1&&(d=d||S.slice(0,I),T=S.slice(I,S.length)),d=iM(d!=null?d:S,W),{fullPath:d+(K&&"?")+K+T,path:d,query:U,hash:T}}function eM(h,S){const W=S.query?h(S.query):"";return S.path+(W&&"?")+W+(S.hash||"")}function D2(h,S){return!S||!h.toLowerCase().startsWith(S.toLowerCase())?h:h.slice(S.length)||"/"}function tM(h,S,W){const d=S.matched.length-1,U=W.matched.length-1;return d>-1&&d===U&&mm(S.matched[d],W.matched[U])&&uE(S.params,W.params)&&h(S.query)===h(W.query)&&S.hash===W.hash}function mm(h,S){return(h.aliasOf||h)===(S.aliasOf||S)}function uE(h,S){if(Object.keys(h).length!==Object.keys(S).length)return!1;for(const W in h)if(!nM(h[W],S[W]))return!1;return!0}function nM(h,S){return Bc(h)?P2(h,S):Bc(S)?P2(S,h):h===S}function P2(h,S){return Bc(S)?h.length===S.length&&h.every((W,d)=>W===S[d]):h.length===1&&h[0]===S}function iM(h,S){if(h.startsWith("/"))return h;if(!h)return S;const W=S.split("/"),d=h.split("/"),U=d[d.length-1];(U===".."||U===".")&&d.push("");let K=W.length-1,T,I;for(T=0;T<d.length;T++)if(I=d[T],I!==".")if(I==="..")K>1&&K--;else break;return W.slice(0,K).join("/")+"/"+d.slice(T-(T===d.length?1:0)).join("/")}var a0;(function(h){h.pop="pop",h.push="push"})(a0||(a0={}));var Zg;(function(h){h.back="back",h.forward="forward",h.unknown=""})(Zg||(Zg={}));function rM(h){if(!h)if(om){const S=document.querySelector("base");h=S&&S.getAttribute("href")||"/",h=h.replace(/^\w+:\/\/[^\/]+/,"")}else h="/";return h[0]!=="/"&&h[0]!=="#"&&(h="/"+h),$3(h)}const sM=/^[^#]+#/;function oM(h,S){return h.replace(sM,"#")+S}function aM(h,S){const W=document.documentElement.getBoundingClientRect(),d=h.getBoundingClientRect();return{behavior:S.behavior,left:d.left-W.left-(S.left||0),top:d.top-W.top-(S.top||0)}}const ev=()=>({left:window.pageXOffset,top:window.pageYOffset});function lM(h){let S;if("el"in h){const W=h.el,d=typeof W=="string"&&W.startsWith("#"),U=typeof W=="string"?d?document.getElementById(W.slice(1)):document.querySelector(W):W;if(!U)return;S=aM(U,h)}else S=h;"scrollBehavior"in document.documentElement.style?window.scrollTo(S):window.scrollTo(S.left!=null?S.left:window.pageXOffset,S.top!=null?S.top:window.pageYOffset)}function O2(h,S){return(history.state?history.state.position-S:-1)+h}const H1=new Map;function cM(h,S){H1.set(h,S)}function uM(h){const S=H1.get(h);return H1.delete(h),S}let hM=()=>location.protocol+"//"+location.host;function hE(h,S){const{pathname:W,search:d,hash:U}=S,K=h.indexOf("#");if(K>-1){let I=U.includes(h.slice(K))?h.slice(K).length:1,u=U.slice(I);return u[0]!=="/"&&(u="/"+u),D2(u,"")}return D2(W,h)+d+U}function dM(h,S,W,d){let U=[],K=[],T=null;const I=({state:y})=>{const E=hE(h,location),b=W.value,m=S.value;let w=0;if(y){if(W.value=E,S.value=y,T&&T===b){T=null;return}w=m?y.position-m.position:0}else d(E);U.forEach(_=>{_(W.value,b,{delta:w,type:a0.pop,direction:w?w>0?Zg.forward:Zg.back:Zg.unknown})})};function u(){T=W.value}function g(y){U.push(y);const E=()=>{const b=U.indexOf(y);b>-1&&U.splice(b,1)};return K.push(E),E}function C(){const{history:y}=window;!y.state||y.replaceState(zs({},y.state,{scroll:ev()}),"")}function v(){for(const y of K)y();K=[],window.removeEventListener("popstate",I),window.removeEventListener("beforeunload",C)}return window.addEventListener("popstate",I),window.addEventListener("beforeunload",C,{passive:!0}),{pauseListeners:u,listen:g,destroy:v}}function F2(h,S,W,d=!1,U=!1){return{back:h,current:S,forward:W,replaced:d,position:window.history.length,scroll:U?ev():null}}function fM(h){const{history:S,location:W}=window,d={value:hE(h,W)},U={value:S.state};U.value||K(d.value,{back:null,current:d.value,forward:null,position:S.length-1,replaced:!0,scroll:null},!0);function K(u,g,C){const v=h.indexOf("#"),y=v>-1?(W.host&&document.querySelector("base")?h:h.slice(v))+u:hM()+h+u;try{S[C?"replaceState":"pushState"](g,"",y),U.value=g}catch(E){console.error(E),W[C?"replace":"assign"](y)}}function T(u,g){const C=zs({},S.state,F2(U.value.back,u,U.value.forward,!0),g,{position:U.value.position});K(u,C,!0),d.value=u}function I(u,g){const C=zs({},U.value,S.state,{forward:u,scroll:ev()});K(C.current,C,!0);const v=zs({},F2(d.value,u,null),{position:C.position+1},g);K(u,v,!1),d.value=u}return{location:d,state:U,push:I,replace:T}}function pM(h){h=rM(h);const S=fM(h),W=dM(h,S.state,S.location,S.replace);function d(K,T=!0){T||W.pauseListeners(),history.go(K)}const U=zs({location:"",base:h,go:d,createHref:oM.bind(null,h)},S,W);return Object.defineProperty(U,"location",{enumerable:!0,get:()=>S.location.value}),Object.defineProperty(U,"state",{enumerable:!0,get:()=>S.state.value}),U}function mM(h){return h=location.host?h||location.pathname+location.search:"",h.includes("#")||(h+="#"),pM(h)}function gM(h){return typeof h=="string"||h&&typeof h=="object"}function dE(h){return typeof h=="string"||typeof h=="symbol"}const Xh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},fE=Symbol("");var N2;(function(h){h[h.aborted=4]="aborted",h[h.cancelled=8]="cancelled",h[h.duplicated=16]="duplicated"})(N2||(N2={}));function gm(h,S){return zs(new Error,{type:h,[fE]:!0},S)}function eh(h,S){return h instanceof Error&&fE in h&&(S==null||!!(h.type&S))}const k2="[^/]+?",AM={sensitive:!1,strict:!1,start:!0,end:!0},vM=/[.+*?^${}()[\]/\\]/g;function yM(h,S){const W=zs({},AM,S),d=[];let U=W.start?"^":"";const K=[];for(const g of h){const C=g.length?[]:[90];W.strict&&!g.length&&(U+="/");for(let v=0;v<g.length;v++){const y=g[v];let E=40+(W.sensitive?.25:0);if(y.type===0)v||(U+="/"),U+=y.value.replace(vM,"\\$&"),E+=40;else if(y.type===1){const{value:b,repeatable:m,optional:w,regexp:_}=y;K.push({name:b,repeatable:m,optional:w});const O=_||k2;if(O!==k2){E+=10;try{new RegExp(`(${O})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${b}" (${O}): `+L.message)}}let R=m?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;v||(R=w&&g.length<2?`(?:/${R})`:"/"+R),w&&(R+="?"),U+=R,E+=20,w&&(E+=-8),m&&(E+=-20),O===".*"&&(E+=-50)}C.push(E)}d.push(C)}if(W.strict&&W.end){const g=d.length-1;d[g][d[g].length-1]+=.7000000000000001}W.strict||(U+="/?"),W.end?U+="$":W.strict&&(U+="(?:/|$)");const T=new RegExp(U,W.sensitive?"":"i");function I(g){const C=g.match(T),v={};if(!C)return null;for(let y=1;y<C.length;y++){const E=C[y]||"",b=K[y-1];v[b.name]=E&&b.repeatable?E.split("/"):E}return v}function u(g){let C="",v=!1;for(const y of h){(!v||!C.endsWith("/"))&&(C+="/"),v=!1;for(const E of y)if(E.type===0)C+=E.value;else if(E.type===1){const{value:b,repeatable:m,optional:w}=E,_=b in g?g[b]:"";if(Bc(_)&&!m)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const O=Bc(_)?_.join("/"):_;if(!O)if(w)y.length<2&&(C.endsWith("/")?C=C.slice(0,-1):v=!0);else throw new Error(`Missing required param "${b}"`);C+=O}}return C||"/"}return{re:T,score:d,keys:K,parse:I,stringify:u}}function xM(h,S){let W=0;for(;W<h.length&&W<S.length;){const d=S[W]-h[W];if(d)return d;W++}return h.length<S.length?h.length===1&&h[0]===40+40?-1:1:h.length>S.length?S.length===1&&S[0]===40+40?1:-1:0}function EM(h,S){let W=0;const d=h.score,U=S.score;for(;W<d.length&&W<U.length;){const K=xM(d[W],U[W]);if(K)return K;W++}if(Math.abs(U.length-d.length)===1){if(U2(d))return 1;if(U2(U))return-1}return U.length-d.length}function U2(h){const S=h[h.length-1];return h.length>0&&S[S.length-1]<0}const bM={type:0,value:""},_M=/[a-zA-Z0-9_]/;function wM(h){if(!h)return[[]];if(h==="/")return[[bM]];if(!h.startsWith("/"))throw new Error(`Invalid path "${h}"`);function S(E){throw new Error(`ERR (${W})/"${g}": ${E}`)}let W=0,d=W;const U=[];let K;function T(){K&&U.push(K),K=[]}let I=0,u,g="",C="";function v(){!g||(W===0?K.push({type:0,value:g}):W===1||W===2||W===3?(K.length>1&&(u==="*"||u==="+")&&S(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),K.push({type:1,value:g,regexp:C,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):S("Invalid state to consume buffer"),g="")}function y(){g+=u}for(;I<h.length;){if(u=h[I++],u==="\\"&&W!==2){d=W,W=4;continue}switch(W){case 0:u==="/"?(g&&v(),T()):u===":"?(v(),W=1):y();break;case 4:y(),W=d;break;case 1:u==="("?W=2:_M.test(u)?y():(v(),W=0,u!=="*"&&u!=="?"&&u!=="+"&&I--);break;case 2:u===")"?C[C.length-1]=="\\"?C=C.slice(0,-1)+u:W=3:C+=u;break;case 3:v(),W=0,u!=="*"&&u!=="?"&&u!=="+"&&I--,C="";break;default:S("Unknown state");break}}return W===2&&S(`Unfinished custom RegExp for param "${g}"`),v(),T(),U}function CM(h,S,W){const d=yM(wM(h.path),W),U=zs(d,{record:h,parent:S,children:[],alias:[]});return S&&!U.record.aliasOf==!S.record.aliasOf&&S.children.push(U),U}function MM(h,S){const W=[],d=new Map;S=z2({strict:!1,end:!0,sensitive:!1},S);function U(C){return d.get(C)}function K(C,v,y){const E=!y,b=TM(C);b.aliasOf=y&&y.record;const m=z2(S,C),w=[b];if("alias"in C){const R=typeof C.alias=="string"?[C.alias]:C.alias;for(const L of R)w.push(zs({},b,{components:y?y.record.components:b.components,path:L,aliasOf:y?y.record:b}))}let _,O;for(const R of w){const{path:L}=R;if(v&&L[0]!=="/"){const P=v.record.path,Y=P[P.length-1]==="/"?"":"/";R.path=v.record.path+(L&&Y+L)}if(_=CM(R,v,m),y?y.alias.push(_):(O=O||_,O!==_&&O.alias.push(_),E&&C.name&&!H2(_)&&T(C.name)),b.children){const P=b.children;for(let Y=0;Y<P.length;Y++)K(P[Y],_,y&&y.children[Y])}y=y||_,(_.record.components&&Object.keys(_.record.components).length||_.record.name||_.record.redirect)&&u(_)}return O?()=>{T(O)}:Jg}function T(C){if(dE(C)){const v=d.get(C);v&&(d.delete(C),W.splice(W.indexOf(v),1),v.children.forEach(T),v.alias.forEach(T))}else{const v=W.indexOf(C);v>-1&&(W.splice(v,1),C.record.name&&d.delete(C.record.name),C.children.forEach(T),C.alias.forEach(T))}}function I(){return W}function u(C){let v=0;for(;v<W.length&&EM(C,W[v])>=0&&(C.record.path!==W[v].record.path||!pE(C,W[v]));)v++;W.splice(v,0,C),C.record.name&&!H2(C)&&d.set(C.record.name,C)}function g(C,v){let y,E={},b,m;if("name"in C&&C.name){if(y=d.get(C.name),!y)throw gm(1,{location:C});m=y.record.name,E=zs(G2(v.params,y.keys.filter(O=>!O.optional).map(O=>O.name)),C.params&&G2(C.params,y.keys.map(O=>O.name))),b=y.stringify(E)}else if("path"in C)b=C.path,y=W.find(O=>O.re.test(b)),y&&(E=y.parse(b),m=y.record.name);else{if(y=v.name?d.get(v.name):W.find(O=>O.re.test(v.path)),!y)throw gm(1,{location:C,currentLocation:v});m=y.record.name,E=zs({},v.params,C.params),b=y.stringify(E)}const w=[];let _=y;for(;_;)w.unshift(_.record),_=_.parent;return{name:m,path:b,params:E,matched:w,meta:IM(w)}}return h.forEach(C=>K(C)),{addRoute:K,resolve:g,removeRoute:T,getRoutes:I,getRecordMatcher:U}}function G2(h,S){const W={};for(const d of S)d in h&&(W[d]=h[d]);return W}function TM(h){return{path:h.path,redirect:h.redirect,name:h.name,meta:h.meta||{},aliasOf:void 0,beforeEnter:h.beforeEnter,props:SM(h),children:h.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in h?h.components||null:h.component&&{default:h.component}}}function SM(h){const S={},W=h.props||!1;if("component"in h)S.default=W;else for(const d in h.components)S[d]=typeof W=="object"?W[d]:W;return S}function H2(h){for(;h;){if(h.record.aliasOf)return!0;h=h.parent}return!1}function IM(h){return h.reduce((S,W)=>zs(S,W.meta),{})}function z2(h,S){const W={};for(const d in h)W[d]=d in S?S[d]:h[d];return W}function pE(h,S){return S.children.some(W=>W===h||pE(h,W))}const mE=/#/g,RM=/&/g,BM=/\//g,LM=/=/g,DM=/\?/g,gE=/\+/g,PM=/%5B/g,OM=/%5D/g,AE=/%5E/g,FM=/%60/g,vE=/%7B/g,NM=/%7C/g,yE=/%7D/g,kM=/%20/g;function dy(h){return encodeURI(""+h).replace(NM,"|").replace(PM,"[").replace(OM,"]")}function UM(h){return dy(h).replace(vE,"{").replace(yE,"}").replace(AE,"^")}function z1(h){return dy(h).replace(gE,"%2B").replace(kM,"+").replace(mE,"%23").replace(RM,"%26").replace(FM,"`").replace(vE,"{").replace(yE,"}").replace(AE,"^")}function GM(h){return z1(h).replace(LM,"%3D")}function HM(h){return dy(h).replace(mE,"%23").replace(DM,"%3F")}function zM(h){return h==null?"":HM(h).replace(BM,"%2F")}function HA(h){try{return decodeURIComponent(""+h)}catch{}return""+h}function VM(h){const S={};if(h===""||h==="?")return S;const d=(h[0]==="?"?h.slice(1):h).split("&");for(let U=0;U<d.length;++U){const K=d[U].replace(gE," "),T=K.indexOf("="),I=HA(T<0?K:K.slice(0,T)),u=T<0?null:HA(K.slice(T+1));if(I in S){let g=S[I];Bc(g)||(g=S[I]=[g]),g.push(u)}else S[I]=u}return S}function V2(h){let S="";for(let W in h){const d=h[W];if(W=GM(W),d==null){d!==void 0&&(S+=(S.length?"&":"")+W);continue}(Bc(d)?d.map(K=>K&&z1(K)):[d&&z1(d)]).forEach(K=>{K!==void 0&&(S+=(S.length?"&":"")+W,K!=null&&(S+="="+K))})}return S}function QM(h){const S={};for(const W in h){const d=h[W];d!==void 0&&(S[W]=Bc(d)?d.map(U=>U==null?null:""+U):d==null?d:""+d)}return S}const jM=Symbol(""),Q2=Symbol(""),fy=Symbol(""),xE=Symbol(""),V1=Symbol("");function Qg(){let h=[];function S(d){return h.push(d),()=>{const U=h.indexOf(d);U>-1&&h.splice(U,1)}}function W(){h=[]}return{add:S,list:()=>h.slice(),reset:W}}function Jh(h,S,W,d,U){const K=d&&(d.enterCallbacks[U]=d.enterCallbacks[U]||[]);return()=>new Promise((T,I)=>{const u=v=>{v===!1?I(gm(4,{from:W,to:S})):v instanceof Error?I(v):gM(v)?I(gm(2,{from:S,to:v})):(K&&d.enterCallbacks[U]===K&&typeof v=="function"&&K.push(v),T())},g=h.call(d&&d.instances[U],S,W,u);let C=Promise.resolve(g);h.length<3&&(C=C.then(u)),C.catch(v=>I(v))})}function C1(h,S,W,d){const U=[];for(const K of h)for(const T in K.components){let I=K.components[T];if(!(S!=="beforeRouteEnter"&&!K.instances[T]))if(WM(I)){const g=(I.__vccOpts||I)[S];g&&U.push(Jh(g,W,d,K,T))}else{let u=I();U.push(()=>u.then(g=>{if(!g)return Promise.reject(new Error(`Couldn't resolve component "${T}" at "${K.path}"`));const C=J3(g)?g.default:g;K.components[T]=C;const y=(C.__vccOpts||C)[S];return y&&Jh(y,W,d,K,T)()}))}}return U}function WM(h){return typeof h=="object"||"displayName"in h||"props"in h||"__vccOpts"in h}function j2(h){const S=uu(fy),W=uu(xE),d=Zl(()=>S.resolve(um(h.to))),U=Zl(()=>{const{matched:u}=d.value,{length:g}=u,C=u[g-1],v=W.matched;if(!C||!v.length)return-1;const y=v.findIndex(mm.bind(null,C));if(y>-1)return y;const E=W2(u[g-2]);return g>1&&W2(C)===E&&v[v.length-1].path!==E?v.findIndex(mm.bind(null,u[g-2])):y}),K=Zl(()=>U.value>-1&&qM(W.params,d.value.params)),T=Zl(()=>U.value>-1&&U.value===W.matched.length-1&&uE(W.params,d.value.params));function I(u={}){return YM(u)?S[um(h.replace)?"replace":"push"](um(h.to)).catch(Jg):Promise.resolve()}return{route:d,href:Zl(()=>d.value.href),isActive:K,isExactActive:T,navigate:I}}const KM=Rx({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:j2,setup(h,{slots:S}){const W=l0(j2(h)),{options:d}=uu(fy),U=Zl(()=>({[K2(h.activeClass,d.linkActiveClass,"router-link-active")]:W.isActive,[K2(h.exactActiveClass,d.linkExactActiveClass,"router-link-exact-active")]:W.isExactActive}));return()=>{const K=S.default&&S.default(W);return h.custom?K:Kx("a",{"aria-current":W.isExactActive?h.ariaCurrentValue:null,href:W.href,onClick:W.navigate,class:U.value},K)}}}),XM=KM;function YM(h){if(!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)&&!h.defaultPrevented&&!(h.button!==void 0&&h.button!==0)){if(h.currentTarget&&h.currentTarget.getAttribute){const S=h.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(S))return}return h.preventDefault&&h.preventDefault(),!0}}function qM(h,S){for(const W in S){const d=S[W],U=h[W];if(typeof d=="string"){if(d!==U)return!1}else if(!Bc(U)||U.length!==d.length||d.some((K,T)=>K!==U[T]))return!1}return!0}function W2(h){return h?h.aliasOf?h.aliasOf.path:h.path:""}const K2=(h,S,W)=>h!=null?h:S!=null?S:W,JM=Rx({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(h,{attrs:S,slots:W}){const d=uu(V1),U=Zl(()=>h.route||d.value),K=uu(Q2,0),T=Zl(()=>{let g=um(K);const{matched:C}=U.value;let v;for(;(v=C[g])&&!v.components;)g++;return g}),I=Zl(()=>U.value.matched[T.value]);PA(Q2,Zl(()=>T.value+1)),PA(jM,I),PA(V1,U);const u=iy();return Kg(()=>[u.value,I.value,h.name],([g,C,v],[y,E,b])=>{C&&(C.instances[v]=g,E&&E!==C&&g&&g===y&&(C.leaveGuards.size||(C.leaveGuards=E.leaveGuards),C.updateGuards.size||(C.updateGuards=E.updateGuards))),g&&C&&(!E||!mm(C,E)||!y)&&(C.enterCallbacks[v]||[]).forEach(m=>m(g))},{flush:"post"}),()=>{const g=U.value,C=h.name,v=I.value,y=v&&v.components[C];if(!y)return X2(W.default,{Component:y,route:g});const E=v.props[C],b=E?E===!0?g.params:typeof E=="function"?E(g):E:null,w=Kx(y,zs({},b,S,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(v.instances[C]=null)},ref:u}));return X2(W.default,{Component:w,route:g})||w}}});function X2(h,S){if(!h)return null;const W=h(S);return W.length===1?W[0]:W}const ZM=JM;function $M(h){const S=MM(h.routes,h),W=h.parseQuery||VM,d=h.stringifyQuery||V2,U=h.history,K=Qg(),T=Qg(),I=Qg(),u=K_(Xh);let g=Xh;om&&h.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const C=_1.bind(null,at=>""+at),v=_1.bind(null,zM),y=_1.bind(null,HA);function E(at,Gt){let wt,Yt;return dE(at)?(wt=S.getRecordMatcher(at),Yt=Gt):Yt=at,S.addRoute(Yt,wt)}function b(at){const Gt=S.getRecordMatcher(at);Gt&&S.removeRoute(Gt)}function m(){return S.getRoutes().map(at=>at.record)}function w(at){return!!S.getRecordMatcher(at)}function _(at,Gt){if(Gt=zs({},Gt||u.value),typeof at=="string"){const At=w1(W,at,Gt.path),Bt=S.resolve({path:At.path},Gt),Pt=U.createHref(At.fullPath);return zs(At,Bt,{params:y(Bt.params),hash:HA(At.hash),redirectedFrom:void 0,href:Pt})}let wt;if("path"in at)wt=zs({},at,{path:w1(W,at.path,Gt.path).path});else{const At=zs({},at.params);for(const Bt in At)At[Bt]==null&&delete At[Bt];wt=zs({},at,{params:v(At)}),Gt.params=v(Gt.params)}const Yt=S.resolve(wt,Gt),Mn=at.hash||"";Yt.params=C(y(Yt.params));const je=eM(d,zs({},at,{hash:UM(Mn),path:Yt.path})),rt=U.createHref(je);return zs({fullPath:je,hash:Mn,query:d===V2?QM(at.query):at.query||{}},Yt,{redirectedFrom:void 0,href:rt})}function O(at){return typeof at=="string"?w1(W,at,u.value.path):zs({},at)}function R(at,Gt){if(g!==at)return gm(8,{from:Gt,to:at})}function L(at){return J(at)}function P(at){return L(zs(O(at),{replace:!0}))}function Y(at){const Gt=at.matched[at.matched.length-1];if(Gt&&Gt.redirect){const{redirect:wt}=Gt;let Yt=typeof wt=="function"?wt(at):wt;return typeof Yt=="string"&&(Yt=Yt.includes("?")||Yt.includes("#")?Yt=O(Yt):{path:Yt},Yt.params={}),zs({query:at.query,hash:at.hash,params:"path"in Yt?{}:at.params},Yt)}}function J(at,Gt){const wt=g=_(at),Yt=u.value,Mn=at.state,je=at.force,rt=at.replace===!0,At=Y(wt);if(At)return J(zs(O(At),{state:typeof At=="object"?zs({},Mn,At.state):Mn,force:je,replace:rt}),Gt||wt);const Bt=wt;Bt.redirectedFrom=Gt;let Pt;return!je&&tM(d,Yt,wt)&&(Pt=gm(16,{to:Bt,from:Yt}),Ae(Yt,Yt,!0,!1)),(Pt?Promise.resolve(Pt):te(Bt,Yt)).catch(qt=>eh(qt)?eh(qt,2)?qt:fe(qt):z(qt,Bt,Yt)).then(qt=>{if(qt){if(eh(qt,2))return J(zs({replace:rt},O(qt.to),{state:typeof qt.to=="object"?zs({},Mn,qt.to.state):Mn,force:je}),Gt||Bt)}else qt=xe(Bt,Yt,!0,rt,Mn);return ue(Bt,Yt,qt),qt})}function j(at,Gt){const wt=R(at,Gt);return wt?Promise.reject(wt):Promise.resolve()}function k(at){const Gt=Ge.values().next().value;return Gt&&typeof Gt.runWithContext=="function"?Gt.runWithContext(at):at()}function te(at,Gt){let wt;const[Yt,Mn,je]=eT(at,Gt);wt=C1(Yt.reverse(),"beforeRouteLeave",at,Gt);for(const At of Yt)At.leaveGuards.forEach(Bt=>{wt.push(Jh(Bt,at,Gt))});const rt=j.bind(null,at,Gt);return wt.push(rt),xt(wt).then(()=>{wt=[];for(const At of K.list())wt.push(Jh(At,at,Gt));return wt.push(rt),xt(wt)}).then(()=>{wt=C1(Mn,"beforeRouteUpdate",at,Gt);for(const At of Mn)At.updateGuards.forEach(Bt=>{wt.push(Jh(Bt,at,Gt))});return wt.push(rt),xt(wt)}).then(()=>{wt=[];for(const At of je)if(At.beforeEnter)if(Bc(At.beforeEnter))for(const Bt of At.beforeEnter)wt.push(Jh(Bt,at,Gt));else wt.push(Jh(At.beforeEnter,at,Gt));return wt.push(rt),xt(wt)}).then(()=>(at.matched.forEach(At=>At.enterCallbacks={}),wt=C1(je,"beforeRouteEnter",at,Gt),wt.push(rt),xt(wt))).then(()=>{wt=[];for(const At of T.list())wt.push(Jh(At,at,Gt));return wt.push(rt),xt(wt)}).catch(At=>eh(At,8)?At:Promise.reject(At))}function ue(at,Gt,wt){I.list().forEach(Yt=>k(()=>Yt(at,Gt,wt)))}function xe(at,Gt,wt,Yt,Mn){const je=R(at,Gt);if(je)return je;const rt=Gt===Xh,At=om?history.state:{};wt&&(Yt||rt?U.replace(at.fullPath,zs({scroll:rt&&At&&At.scroll},Mn)):U.push(at.fullPath,Mn)),u.value=at,Ae(at,Gt,wt,rt),fe()}let Ee;function V(){Ee||(Ee=U.listen((at,Gt,wt)=>{if(!ht.listening)return;const Yt=_(at),Mn=Y(Yt);if(Mn){J(zs(Mn,{replace:!0}),Yt).catch(Jg);return}g=Yt;const je=u.value;om&&cM(O2(je.fullPath,wt.delta),ev()),te(Yt,je).catch(rt=>eh(rt,12)?rt:eh(rt,2)?(J(rt.to,Yt).then(At=>{eh(At,20)&&!wt.delta&&wt.type===a0.pop&&U.go(-1,!1)}).catch(Jg),Promise.reject()):(wt.delta&&U.go(-wt.delta,!1),z(rt,Yt,je))).then(rt=>{rt=rt||xe(Yt,je,!1),rt&&(wt.delta&&!eh(rt,8)?U.go(-wt.delta,!1):wt.type===a0.pop&&eh(rt,20)&&U.go(-1,!1)),ue(Yt,je,rt)}).catch(Jg)}))}let q=Qg(),Q=Qg(),F;function z(at,Gt,wt){fe(at);const Yt=Q.list();return Yt.length?Yt.forEach(Mn=>Mn(at,Gt,wt)):console.error(at),Promise.reject(at)}function X(){return F&&u.value!==Xh?Promise.resolve():new Promise((at,Gt)=>{q.add([at,Gt])})}function fe(at){return F||(F=!at,V(),q.list().forEach(([Gt,wt])=>at?wt(at):Gt()),q.reset()),at}function Ae(at,Gt,wt,Yt){const{scrollBehavior:Mn}=h;if(!om||!Mn)return Promise.resolve();const je=!wt&&uM(O2(at.fullPath,0))||(Yt||!wt)&&history.state&&history.state.scroll||null;return sy().then(()=>Mn(at,Gt,je)).then(rt=>rt&&lM(rt)).catch(rt=>z(rt,at,Gt))}const Se=at=>U.go(at);let Be;const Ge=new Set,ht={currentRoute:u,listening:!0,addRoute:E,removeRoute:b,hasRoute:w,getRoutes:m,resolve:_,options:h,push:L,replace:P,go:Se,back:()=>Se(-1),forward:()=>Se(1),beforeEach:K.add,beforeResolve:T.add,afterEach:I.add,onError:Q.add,isReady:X,install(at){const Gt=this;at.component("RouterLink",XM),at.component("RouterView",ZM),at.config.globalProperties.$router=Gt,Object.defineProperty(at.config.globalProperties,"$route",{enumerable:!0,get:()=>um(u)}),om&&!Be&&u.value===Xh&&(Be=!0,L(U.location).catch(Mn=>{}));const wt={};for(const Mn in Xh)Object.defineProperty(wt,Mn,{get:()=>u.value[Mn],enumerable:!0});at.provide(fy,Gt),at.provide(xE,mx(wt)),at.provide(V1,u);const Yt=at.unmount;Ge.add(at),at.unmount=function(){Ge.delete(at),Ge.size<1&&(g=Xh,Ee&&Ee(),Ee=null,u.value=Xh,Be=!1,F=!1),Yt()}}};function xt(at){return at.reduce((Gt,wt)=>Gt.then(()=>k(wt)),Promise.resolve())}return ht}function eT(h,S){const W=[],d=[],U=[],K=Math.max(S.matched.length,h.matched.length);for(let T=0;T<K;T++){const I=S.matched[T];I&&(h.matched.find(g=>mm(g,I))?d.push(I):W.push(I));const u=h.matched[T];u&&(S.matched.find(g=>mm(g,u))||U.push(u))}return[W,d,U]}const tT={name:"FilterTag",props:["tag"],setup(){return{store:xm()}},methods:{selectFilter(){if(this.amICurrentFilter())this.store.selectFilter(null);else{let h=this.tag.term_id;this.store.selectFilter(h)}},amICurrentFilter(){return this.store.currentFilter==this.tag.term_id}}};function nT(h,S,W,d,U,K){return ss(),Ys("li",null,[As("button",{class:nd(["filter-tag",{"is-current":K.amICurrentFilter()}]),onClick:S[0]||(S[0]=(...T)=>K.selectFilter&&K.selectFilter(...T))},ex(W.tag.name),3)])}const iT=Bl(tT,[["render",nT]]),rT={name:"TheFilter",components:{FilterTag:iT},data(){return{isOpen:!1}},setup(){return{store:xm()}},methods:{toggleFilter(){this.isOpen=!this.isOpen}}},sT=As("span",{class:"a11y-hidden"},"Filter",-1),oT=As("svg",{class:"filter-icon",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512"},[As("path",{d:"M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"})],-1),aT=[sT,oT],lT={key:0,class:"filter-inner"},cT={class:"filter-menu"};function uT(h,S,W,d,U,K){const T=Xo("FilterTag");return ss(),Ys("div",{class:nd(["filter",{"is-open":U.isOpen}])},[As("button",{type:"button",class:"filter-toggle",onClick:S[0]||(S[0]=(...I)=>K.toggleFilter&&K.toggleFilter(...I))},aT),U.isOpen?(ss(),Ys("div",lT,[As("menu",cT,[(ss(!0),Ys(tl,null,B1(d.store.allTags,I=>(ss(),Jl(T,{key:I.term_id,tag:I},null,8,["tag"]))),128))])])):s0("",!0)],2)}const hT=Bl(rT,[["render",uT]]),dT={name:"TrollfieldHomeView",components:{TheFilter:hT}};function fT(h,S,W,d,U,K){const T=Xo("TheFilter");return ss(),Ys("div",null,[Ns(T)])}const pT=Bl(dT,[["render",fT]]),mT={name:"TrollfieldSingleView",components:{},setup(){return{store:xm()}},created(){window.setTimeout(()=>{this.showPDF()},100)},computed:{item(){return this.store.getPostBySlug(this.$route.params.slug)},isExternal(){const h=parseInt(window.wpData.link_tag_id,10);return console.log(this.item.tags),this.item.tags.includes(h)},isText(){const h=parseInt(window.wpData.text_tag_id,10);return console.log(this.item.tags),this.item.tags.includes(h)}},methods:{showPDF(){let h=document.querySelector(".wp-block-file__embed");h&&h.hidden&&(h.hidden=!1)}}},gT={key:0,class:"single-view"},AT=As("span",{class:"a11y-hidden"},"Close",-1),vT=As("svg",{viewBox:"0 0 384 512"},[As("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1),yT={key:0,class:"single-content-wrapper"},xT=["innerHTML"],ET=["href"],bT={key:1,class:"single-content-wrapper"},_T=["innerHTML"],wT=["innerHTML"],CT=["innerHTML"],MT=["innerHTML"];function TT(h,S,W,d,U,K){const T=Xo("router-link");return K.item&&K.item.title?(ss(),Ys("div",gT,[Ns(T,{to:"/",class:"close-btn"},{default:cu(()=>[AT,vT]),_:1}),K.isExternal?(ss(),Ys("div",yT,[As("h3",{innerHTML:K.item.title.rendered,class:"a11y-hidden"},null,8,xT),As("a",{href:K.item.meta.external_link,class:"external-link",target:"_blank",referrerpolicy:"no-referrer"},ex(K.item.title.rendered),9,ET)])):K.isText?(ss(),Ys("div",bT,[As("h1",{innerHTML:K.item.title.rendered},null,8,_T),As("div",{innerHTML:K.item.content.rendered},null,8,wT)])):(ss(),Ys(tl,{key:2},[As("h3",{innerHTML:K.item.title.rendered,class:"a11y-hidden"},null,8,CT),As("div",{innerHTML:K.item.content.rendered,class:"single-content-wrapper"},null,8,MT)],64))])):s0("",!0)}const ST=Bl(mT,[["render",TT]]),IT={name:"TrollfieldSinglePageView",components:{},data(){return{page:null,isLoading:!1}},created(){this.isLoading=!0,fetch(`${window.wpData.rest_url}/wp/v2/pages/${window.wpData.about_page_id}`).then(h=>h.json()).then(h=>{this.page=h,this.isLoading=!1}).catch(h=>{console.log("Error",h)})},computed:{}},RT={class:"single-view"},BT=As("span",{class:"a11y-hidden"},"Close",-1),LT=As("svg",{viewBox:"0 0 384 512"},[As("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})],-1),DT={key:0,class:"single-content-wrapper"},PT={key:1,class:"single-content-wrapper"},OT=["innerHTML"],FT=["innerHTML"];function NT(h,S,W,d,U,K){const T=Xo("router-link");return ss(),Ys("div",RT,[Ns(T,{to:"/",class:"close-btn"},{default:cu(()=>[BT,LT]),_:1}),U.isLoading?(ss(),Ys("div",DT,"Loading")):(ss(),Ys("div",PT,[As("h1",{innerHTML:U.page.title.rendered},null,8,OT),As("div",{innerHTML:U.page.content.rendered},null,8,FT)]))])}const kT=Bl(IT,[["render",NT]]),UT=[{path:"/",component:pT},{path:"/page/:id",component:kT},{path:"/:slug",component:ST}],EE=$M({history:mM(),routes:UT});window.vueRouter=EE;var GT={exports:{}};(function(h,S){(function(d,U){h.exports=U()})(self,()=>(()=>{var W={"./node_modules/@ungap/custom-elements/index.js":()=>{/*! (c) Andrea Giammarchi @webreflection ISC */(function(){var T=function(vn,Ft){var yn=function(bi){for(var Pi=0,Zi=bi.length;Pi<Zi;Pi++)Gn(bi[Pi])},Gn=function(bi){var Pi=bi.target,Zi=bi.attributeName,Lr=bi.oldValue;Pi.attributeChangedCallback(Zi,Lr,Pi.getAttribute(Zi))};return function(Dn,bi){var Pi=Dn.constructor.observedAttributes;return Pi&&vn(bi).then(function(){new Ft(yn).observe(Dn,{attributes:!0,attributeOldValue:!0,attributeFilter:Pi});for(var Zi=0,Lr=Pi.length;Zi<Lr;Zi++)Dn.hasAttribute(Pi[Zi])&&Gn({target:Dn,attributeName:Pi[Zi],oldValue:null})}),Dn}};function I(vn,Ft){if(!!vn){if(typeof vn=="string")return u(vn,Ft);var yn=Object.prototype.toString.call(vn).slice(8,-1);if(yn==="Object"&&vn.constructor&&(yn=vn.constructor.name),yn==="Map"||yn==="Set")return Array.from(vn);if(yn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(yn))return u(vn,Ft)}}function u(vn,Ft){(Ft==null||Ft>vn.length)&&(Ft=vn.length);for(var yn=0,Gn=new Array(Ft);yn<Ft;yn++)Gn[yn]=vn[yn];return Gn}function g(vn,Ft){var yn=typeof Symbol<"u"&&vn[Symbol.iterator]||vn["@@iterator"];if(!yn){if(Array.isArray(vn)||(yn=I(vn))||Ft&&vn&&typeof vn.length=="number"){yn&&(vn=yn);var Gn=0,Dn=function(){};return{s:Dn,n:function(){return Gn>=vn.length?{done:!0}:{done:!1,value:vn[Gn++]}},e:function(Lr){throw Lr},f:Dn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bi=!0,Pi=!1,Zi;return{s:function(){yn=yn.call(vn)},n:function(){var Lr=yn.next();return bi=Lr.done,Lr},e:function(Lr){Pi=!0,Zi=Lr},f:function(){try{!bi&&yn.return!=null&&yn.return()}finally{if(Pi)throw Zi}}}}/*! (c) Andrea Giammarchi - ISC */var C=!0,v=!1,y="querySelectorAll",E=function(Ft){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document,Gn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MutationObserver,Dn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["*"],bi=function Lr(Ki,Gr,Dr,ar,zr,ys){var Qe=g(Ki),ut;try{for(Qe.s();!(ut=Qe.n()).done;){var _t=ut.value;(ys||y in _t)&&(zr?Dr.has(_t)||(Dr.add(_t),ar.delete(_t),Ft(_t,zr)):ar.has(_t)||(ar.add(_t),Dr.delete(_t),Ft(_t,zr)),ys||Lr(_t[y](Gr),Gr,Dr,ar,zr,C))}}catch(nn){Qe.e(nn)}finally{Qe.f()}},Pi=new Gn(function(Lr){if(Dn.length){var Ki=Dn.join(","),Gr=new Set,Dr=new Set,ar=g(Lr),zr;try{for(ar.s();!(zr=ar.n()).done;){var ys=zr.value,Qe=ys.addedNodes,ut=ys.removedNodes;bi(ut,Ki,Gr,Dr,v,v),bi(Qe,Ki,Gr,Dr,C,v)}}catch(_t){ar.e(_t)}finally{ar.f()}}}),Zi=Pi.observe;return(Pi.observe=function(Lr){return Zi.call(Pi,Lr,{subtree:C,childList:C})})(yn),Pi},b="querySelectorAll",m=self,w=m.document,_=m.Element,O=m.MutationObserver,R=m.Set,L=m.WeakMap,P=function(Ft){return b in Ft},Y=[].filter,J=function(vn){var Ft=new L,yn=function(ar){for(var zr=0,ys=ar.length;zr<ys;zr++)Ft.delete(ar[zr])},Gn=function(){for(var ar=Ki.takeRecords(),zr=0,ys=ar.length;zr<ys;zr++)Pi(Y.call(ar[zr].removedNodes,P),!1),Pi(Y.call(ar[zr].addedNodes,P),!0)},Dn=function(ar){return ar.matches||ar.webkitMatchesSelector||ar.msMatchesSelector},bi=function(ar,zr){var ys;if(zr)for(var Qe,ut=Dn(ar),_t=0,nn=Zi.length;_t<nn;_t++)ut.call(ar,Qe=Zi[_t])&&(Ft.has(ar)||Ft.set(ar,new R),ys=Ft.get(ar),ys.has(Qe)||(ys.add(Qe),vn.handle(ar,zr,Qe)));else Ft.has(ar)&&(ys=Ft.get(ar),Ft.delete(ar),ys.forEach(function(Wt){vn.handle(ar,zr,Wt)}))},Pi=function(ar){for(var zr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ys=0,Qe=ar.length;ys<Qe;ys++)bi(ar[ys],zr)},Zi=vn.query,Lr=vn.root||w,Ki=E(bi,Lr,O,Zi),Gr=_.prototype.attachShadow;return Gr&&(_.prototype.attachShadow=function(Dr){var ar=Gr.call(this,Dr);return Ki.observe(ar),ar}),Zi.length&&Pi(Lr[b](Zi)),{drop:yn,flush:Gn,observer:Ki,parse:Pi}},j=self,k=j.document,te=j.Map,ue=j.MutationObserver,xe=j.Object,Ee=j.Set,V=j.WeakMap,q=j.Element,Q=j.HTMLElement,F=j.Node,z=j.Error,X=j.TypeError,fe=j.Reflect,Ae=xe.defineProperty,Se=xe.keys,Be=xe.getOwnPropertyNames,Ge=xe.setPrototypeOf,ht=!self.customElements,xt=function(Ft){for(var yn=Se(Ft),Gn=[],Dn=yn.length,bi=0;bi<Dn;bi++)Gn[bi]=Ft[yn[bi]],delete Ft[yn[bi]];return function(){for(var Pi=0;Pi<Dn;Pi++)Ft[yn[Pi]]=Gn[Pi]}};if(ht){var at=function(){var Ft=this.constructor;if(!wt.has(Ft))throw new X("Illegal constructor");var yn=wt.get(Ft);if(qt)return dn(qt,yn);var Gn=Gt.call(k,yn);return dn(Ge(Gn,Ft.prototype),yn)},Gt=k.createElement,wt=new te,Yt=new te,Mn=new te,je=new te,rt=[],At=function(Ft,yn,Gn){var Dn=Mn.get(Gn);if(yn&&!Dn.isPrototypeOf(Ft)){var bi=xt(Ft);qt=Ge(Ft,Dn);try{new Dn.constructor}finally{qt=null,bi()}}var Pi="".concat(yn?"":"dis","connectedCallback");Pi in Dn&&Ft[Pi]()},Bt=J({query:rt,handle:At}),Pt=Bt.parse,qt=null,un=function(Ft){if(!Yt.has(Ft)){var yn,Gn=new Promise(function(Dn){yn=Dn});Yt.set(Ft,{$:Gn,_:yn})}return Yt.get(Ft).$},dn=T(un,ue);Ae(self,"customElements",{configurable:!0,value:{define:function(Ft,yn){if(je.has(Ft))throw new z('the name "'.concat(Ft,'" has already been used with this registry'));wt.set(yn,Ft),Mn.set(Ft,yn.prototype),je.set(Ft,yn),rt.push(Ft),un(Ft).then(function(){Pt(k.querySelectorAll(Ft))}),Yt.get(Ft)._(yn)},get:function(Ft){return je.get(Ft)},whenDefined:un}}),Ae(at.prototype=Q.prototype,"constructor",{value:at}),Ae(self,"HTMLElement",{configurable:!0,value:at}),Ae(k,"createElement",{configurable:!0,value:function(Ft,yn){var Gn=yn&&yn.is,Dn=Gn?je.get(Gn):je.get(Ft);return Dn?new Dn:Gt.call(k,Ft)}}),"isConnected"in F.prototype||Ae(F.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(ht=!self.customElements.get("extends-li"),ht)try{var bn=function vn(){return self.Reflect.construct(HTMLLIElement,[],vn)};bn.prototype=HTMLLIElement.prototype;var tn="extends-li";self.customElements.define("extends-li",bn,{extends:"li"}),ht=k.createElement("li",{is:tn}).outerHTML.indexOf(tn)<0;var ri=self.customElements,ni=ri.get,zt=ri.whenDefined;Ae(self.customElements,"whenDefined",{configurable:!0,value:function(Ft){var yn=this;return zt.call(this,Ft).then(function(Gn){return Gn||ni.call(yn,Ft)})}})}catch{}if(ht){var Ue=function(Ft){var yn=Oe.get(Ft);Xt(yn.querySelectorAll(this),Ft.isConnected)},Pe=self.customElements,Ye=k.createElement,ze=Pe.define,He=Pe.get,et=Pe.upgrade,Me=fe||{construct:function(Ft){return Ft.call(this)}},Te=Me.construct,Oe=new V,Ze=new Ee,ae=new te,ee=new te,se=new te,Ie=new te,We=[],Ke=[],$e=function(Ft){return Ie.get(Ft)||He.call(Pe,Ft)},Vt=function(Ft,yn,Gn){var Dn=se.get(Gn);if(yn&&!Dn.isPrototypeOf(Ft)){var bi=xt(Ft);Nn=Ge(Ft,Dn);try{new Dn.constructor}finally{Nn=null,bi()}}var Pi="".concat(yn?"":"dis","connectedCallback");Pi in Dn&&Ft[Pi]()},$t=J({query:Ke,handle:Vt}),Xt=$t.parse,jt=J({query:We,handle:function(Ft,yn){Oe.has(Ft)&&(yn?Ze.add(Ft):Ze.delete(Ft),Ke.length&&Ue.call(Ke,Ft))}}),on=jt.parse,In=q.prototype.attachShadow;In&&(q.prototype.attachShadow=function(vn){var Ft=In.call(this,vn);return Oe.set(this,Ft),Ft});var di=function(Ft){if(!ee.has(Ft)){var yn,Gn=new Promise(function(Dn){yn=Dn});ee.set(Ft,{$:Gn,_:yn})}return ee.get(Ft).$},fi=T(di,ue),Nn=null;Be(self).filter(function(vn){return/^HTML.*Element$/.test(vn)}).forEach(function(vn){var Ft=self[vn];function yn(){var Gn=this.constructor;if(!ae.has(Gn))throw new X("Illegal constructor");var Dn=ae.get(Gn),bi=Dn.is,Pi=Dn.tag;if(bi){if(Nn)return fi(Nn,bi);var Zi=Ye.call(k,Pi);return Zi.setAttribute("is",bi),fi(Ge(Zi,Gn.prototype),bi)}else return Te.call(this,Ft,[],Gn)}Ae(yn.prototype=Ft.prototype,"constructor",{value:yn}),Ae(self,vn,{value:yn})}),Ae(k,"createElement",{configurable:!0,value:function(Ft,yn){var Gn=yn&&yn.is;if(Gn){var Dn=Ie.get(Gn);if(Dn&&ae.get(Dn).tag===Ft)return new Dn}var bi=Ye.call(k,Ft);return Gn&&bi.setAttribute("is",Gn),bi}}),Ae(Pe,"get",{configurable:!0,value:$e}),Ae(Pe,"whenDefined",{configurable:!0,value:di}),Ae(Pe,"upgrade",{configurable:!0,value:function(Ft){var yn=Ft.getAttribute("is");if(yn){var Gn=Ie.get(yn);if(Gn){fi(Ge(Ft,Gn.prototype),yn);return}}et.call(Pe,Ft)}}),Ae(Pe,"define",{configurable:!0,value:function(Ft,yn,Gn){if($e(Ft))throw new z("'".concat(Ft,"' has already been defined as a custom element"));var Dn,bi=Gn&&Gn.extends;ae.set(yn,bi?{is:Ft,tag:bi}:{is:"",tag:Ft}),bi?(Dn="".concat(bi,'[is="').concat(Ft,'"]'),se.set(Dn,yn.prototype),Ie.set(Ft,yn),Ke.push(Dn)):(ze.apply(Pe,arguments),We.push(Dn=Ft)),di(Ft).then(function(){bi?(Xt(k.querySelectorAll(Dn)),Ze.forEach(Ue,[Dn])):on(k.querySelectorAll(Dn))}),ee.get(Ft)._(yn)}})}})()},"./node_modules/an-array/index.js":T=>{var I=Object.prototype.toString;T.exports=u;function u(g){return g.BYTES_PER_ELEMENT&&I.call(g.buffer)==="[object ArrayBuffer]"||Array.isArray(g)}},"./node_modules/as-number/index.js":T=>{T.exports=function(u,g){return typeof u=="number"?u:typeof g=="number"?g:0}},"./node_modules/base64-js/index.js":(T,I)=>{I.byteLength=m,I.toByteArray=_,I.fromByteArray=L;for(var u=[],g=[],C=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,E=v.length;y<E;++y)u[y]=v[y],g[v.charCodeAt(y)]=y;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63;function b(P){var Y=P.length;if(Y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var J=P.indexOf("=");J===-1&&(J=Y);var j=J===Y?0:4-J%4;return[J,j]}function m(P){var Y=b(P),J=Y[0],j=Y[1];return(J+j)*3/4-j}function w(P,Y,J){return(Y+J)*3/4-J}function _(P){var Y,J=b(P),j=J[0],k=J[1],te=new C(w(P,j,k)),ue=0,xe=k>0?j-4:j,Ee;for(Ee=0;Ee<xe;Ee+=4)Y=g[P.charCodeAt(Ee)]<<18|g[P.charCodeAt(Ee+1)]<<12|g[P.charCodeAt(Ee+2)]<<6|g[P.charCodeAt(Ee+3)],te[ue++]=Y>>16&255,te[ue++]=Y>>8&255,te[ue++]=Y&255;return k===2&&(Y=g[P.charCodeAt(Ee)]<<2|g[P.charCodeAt(Ee+1)]>>4,te[ue++]=Y&255),k===1&&(Y=g[P.charCodeAt(Ee)]<<10|g[P.charCodeAt(Ee+1)]<<4|g[P.charCodeAt(Ee+2)]>>2,te[ue++]=Y>>8&255,te[ue++]=Y&255),te}function O(P){return u[P>>18&63]+u[P>>12&63]+u[P>>6&63]+u[P&63]}function R(P,Y,J){for(var j,k=[],te=Y;te<J;te+=3)j=(P[te]<<16&16711680)+(P[te+1]<<8&65280)+(P[te+2]&255),k.push(O(j));return k.join("")}function L(P){for(var Y,J=P.length,j=J%3,k=[],te=16383,ue=0,xe=J-j;ue<xe;ue+=te)k.push(R(P,ue,ue+te>xe?xe:ue+te));return j===1?(Y=P[J-1],k.push(u[Y>>2]+u[Y<<4&63]+"==")):j===2&&(Y=(P[J-2]<<8)+P[J-1],k.push(u[Y>>10]+u[Y>>4&63]+u[Y<<2&63]+"=")),k.join("")}},"./node_modules/buffer-equal/index.js":(T,I,u)=>{var g=u("./node_modules/buffer/index.js").Buffer;T.exports=function(C,v){if(!!g.isBuffer(C)&&!!g.isBuffer(v)){if(typeof C.equals=="function")return C.equals(v);if(C.length!==v.length)return!1;for(var y=0;y<C.length;y++)if(C[y]!==v[y])return!1;return!0}}},"./node_modules/buffer/index.js":(T,I,u)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const g=u("./node_modules/base64-js/index.js"),C=u("./node_modules/ieee754/index.js"),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;I.Buffer=m,I.SlowBuffer=te,I.INSPECT_MAX_BYTES=50;const y=2147483647;I.kMaxLength=y,m.TYPED_ARRAY_SUPPORT=E(),!m.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{const ae=new Uint8Array(1),ee={foo:function(){return 42}};return Object.setPrototypeOf(ee,Uint8Array.prototype),Object.setPrototypeOf(ae,ee),ae.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(!!m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(!!m.isBuffer(this))return this.byteOffset}});function b(ae){if(ae>y)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const ee=new Uint8Array(ae);return Object.setPrototypeOf(ee,m.prototype),ee}function m(ae,ee,se){if(typeof ae=="number"){if(typeof ee=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(ae)}return w(ae,ee,se)}m.poolSize=8192;function w(ae,ee,se){if(typeof ae=="string")return L(ae,ee);if(ArrayBuffer.isView(ae))return Y(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(et(ae,ArrayBuffer)||ae&&et(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(et(ae,SharedArrayBuffer)||ae&&et(ae.buffer,SharedArrayBuffer)))return J(ae,ee,se);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ie=ae.valueOf&&ae.valueOf();if(Ie!=null&&Ie!==ae)return m.from(Ie,ee,se);const We=j(ae);if(We)return We;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return m.from(ae[Symbol.toPrimitive]("string"),ee,se);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}m.from=function(ae,ee,se){return w(ae,ee,se)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array);function _(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function O(ae,ee,se){return _(ae),ae<=0?b(ae):ee!==void 0?typeof se=="string"?b(ae).fill(ee,se):b(ae).fill(ee):b(ae)}m.alloc=function(ae,ee,se){return O(ae,ee,se)};function R(ae){return _(ae),b(ae<0?0:k(ae)|0)}m.allocUnsafe=function(ae){return R(ae)},m.allocUnsafeSlow=function(ae){return R(ae)};function L(ae,ee){if((typeof ee!="string"||ee==="")&&(ee="utf8"),!m.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);const se=ue(ae,ee)|0;let Ie=b(se);const We=Ie.write(ae,ee);return We!==se&&(Ie=Ie.slice(0,We)),Ie}function P(ae){const ee=ae.length<0?0:k(ae.length)|0,se=b(ee);for(let Ie=0;Ie<ee;Ie+=1)se[Ie]=ae[Ie]&255;return se}function Y(ae){if(et(ae,Uint8Array)){const ee=new Uint8Array(ae);return J(ee.buffer,ee.byteOffset,ee.byteLength)}return P(ae)}function J(ae,ee,se){if(ee<0||ae.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<ee+(se||0))throw new RangeError('"length" is outside of buffer bounds');let Ie;return ee===void 0&&se===void 0?Ie=new Uint8Array(ae):se===void 0?Ie=new Uint8Array(ae,ee):Ie=new Uint8Array(ae,ee,se),Object.setPrototypeOf(Ie,m.prototype),Ie}function j(ae){if(m.isBuffer(ae)){const ee=k(ae.length)|0,se=b(ee);return se.length===0||ae.copy(se,0,0,ee),se}if(ae.length!==void 0)return typeof ae.length!="number"||Me(ae.length)?b(0):P(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return P(ae.data)}function k(ae){if(ae>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return ae|0}function te(ae){return+ae!=ae&&(ae=0),m.alloc(+ae)}m.isBuffer=function(ee){return ee!=null&&ee._isBuffer===!0&&ee!==m.prototype},m.compare=function(ee,se){if(et(ee,Uint8Array)&&(ee=m.from(ee,ee.offset,ee.byteLength)),et(se,Uint8Array)&&(se=m.from(se,se.offset,se.byteLength)),!m.isBuffer(ee)||!m.isBuffer(se))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ee===se)return 0;let Ie=ee.length,We=se.length;for(let Ke=0,$e=Math.min(Ie,We);Ke<$e;++Ke)if(ee[Ke]!==se[Ke]){Ie=ee[Ke],We=se[Ke];break}return Ie<We?-1:We<Ie?1:0},m.isEncoding=function(ee){switch(String(ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(ee,se){if(!Array.isArray(ee))throw new TypeError('"list" argument must be an Array of Buffers');if(ee.length===0)return m.alloc(0);let Ie;if(se===void 0)for(se=0,Ie=0;Ie<ee.length;++Ie)se+=ee[Ie].length;const We=m.allocUnsafe(se);let Ke=0;for(Ie=0;Ie<ee.length;++Ie){let $e=ee[Ie];if(et($e,Uint8Array))Ke+$e.length>We.length?(m.isBuffer($e)||($e=m.from($e)),$e.copy(We,Ke)):Uint8Array.prototype.set.call(We,$e,Ke);else if(m.isBuffer($e))$e.copy(We,Ke);else throw new TypeError('"list" argument must be an Array of Buffers');Ke+=$e.length}return We};function ue(ae,ee){if(m.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||et(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const se=ae.length,Ie=arguments.length>2&&arguments[2]===!0;if(!Ie&&se===0)return 0;let We=!1;for(;;)switch(ee){case"ascii":case"latin1":case"binary":return se;case"utf8":case"utf-8":return Ue(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se*2;case"hex":return se>>>1;case"base64":return ze(ae).length;default:if(We)return Ie?-1:Ue(ae).length;ee=(""+ee).toLowerCase(),We=!0}}m.byteLength=ue;function xe(ae,ee,se){let Ie=!1;if((ee===void 0||ee<0)&&(ee=0),ee>this.length||((se===void 0||se>this.length)&&(se=this.length),se<=0)||(se>>>=0,ee>>>=0,se<=ee))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return at(this,ee,se);case"utf8":case"utf-8":return Se(this,ee,se);case"ascii":return ht(this,ee,se);case"latin1":case"binary":return xt(this,ee,se);case"base64":return Ae(this,ee,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,ee,se);default:if(Ie)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Ie=!0}}m.prototype._isBuffer=!0;function Ee(ae,ee,se){const Ie=ae[ee];ae[ee]=ae[se],ae[se]=Ie}m.prototype.swap16=function(){const ee=this.length;if(ee%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let se=0;se<ee;se+=2)Ee(this,se,se+1);return this},m.prototype.swap32=function(){const ee=this.length;if(ee%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let se=0;se<ee;se+=4)Ee(this,se,se+3),Ee(this,se+1,se+2);return this},m.prototype.swap64=function(){const ee=this.length;if(ee%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let se=0;se<ee;se+=8)Ee(this,se,se+7),Ee(this,se+1,se+6),Ee(this,se+2,se+5),Ee(this,se+3,se+4);return this},m.prototype.toString=function(){const ee=this.length;return ee===0?"":arguments.length===0?Se(this,0,ee):xe.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(ee){if(!m.isBuffer(ee))throw new TypeError("Argument must be a Buffer");return this===ee?!0:m.compare(this,ee)===0},m.prototype.inspect=function(){let ee="";const se=I.INSPECT_MAX_BYTES;return ee=this.toString("hex",0,se).replace(/(.{2})/g,"$1 ").trim(),this.length>se&&(ee+=" ... "),"<Buffer "+ee+">"},v&&(m.prototype[v]=m.prototype.inspect),m.prototype.compare=function(ee,se,Ie,We,Ke){if(et(ee,Uint8Array)&&(ee=m.from(ee,ee.offset,ee.byteLength)),!m.isBuffer(ee))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ee);if(se===void 0&&(se=0),Ie===void 0&&(Ie=ee?ee.length:0),We===void 0&&(We=0),Ke===void 0&&(Ke=this.length),se<0||Ie>ee.length||We<0||Ke>this.length)throw new RangeError("out of range index");if(We>=Ke&&se>=Ie)return 0;if(We>=Ke)return-1;if(se>=Ie)return 1;if(se>>>=0,Ie>>>=0,We>>>=0,Ke>>>=0,this===ee)return 0;let $e=Ke-We,Vt=Ie-se;const $t=Math.min($e,Vt),Xt=this.slice(We,Ke),jt=ee.slice(se,Ie);for(let on=0;on<$t;++on)if(Xt[on]!==jt[on]){$e=Xt[on],Vt=jt[on];break}return $e<Vt?-1:Vt<$e?1:0};function V(ae,ee,se,Ie,We){if(ae.length===0)return-1;if(typeof se=="string"?(Ie=se,se=0):se>2147483647?se=2147483647:se<-2147483648&&(se=-2147483648),se=+se,Me(se)&&(se=We?0:ae.length-1),se<0&&(se=ae.length+se),se>=ae.length){if(We)return-1;se=ae.length-1}else if(se<0)if(We)se=0;else return-1;if(typeof ee=="string"&&(ee=m.from(ee,Ie)),m.isBuffer(ee))return ee.length===0?-1:q(ae,ee,se,Ie,We);if(typeof ee=="number")return ee=ee&255,typeof Uint8Array.prototype.indexOf=="function"?We?Uint8Array.prototype.indexOf.call(ae,ee,se):Uint8Array.prototype.lastIndexOf.call(ae,ee,se):q(ae,[ee],se,Ie,We);throw new TypeError("val must be string, number or Buffer")}function q(ae,ee,se,Ie,We){let Ke=1,$e=ae.length,Vt=ee.length;if(Ie!==void 0&&(Ie=String(Ie).toLowerCase(),Ie==="ucs2"||Ie==="ucs-2"||Ie==="utf16le"||Ie==="utf-16le")){if(ae.length<2||ee.length<2)return-1;Ke=2,$e/=2,Vt/=2,se/=2}function $t(jt,on){return Ke===1?jt[on]:jt.readUInt16BE(on*Ke)}let Xt;if(We){let jt=-1;for(Xt=se;Xt<$e;Xt++)if($t(ae,Xt)===$t(ee,jt===-1?0:Xt-jt)){if(jt===-1&&(jt=Xt),Xt-jt+1===Vt)return jt*Ke}else jt!==-1&&(Xt-=Xt-jt),jt=-1}else for(se+Vt>$e&&(se=$e-Vt),Xt=se;Xt>=0;Xt--){let jt=!0;for(let on=0;on<Vt;on++)if($t(ae,Xt+on)!==$t(ee,on)){jt=!1;break}if(jt)return Xt}return-1}m.prototype.includes=function(ee,se,Ie){return this.indexOf(ee,se,Ie)!==-1},m.prototype.indexOf=function(ee,se,Ie){return V(this,ee,se,Ie,!0)},m.prototype.lastIndexOf=function(ee,se,Ie){return V(this,ee,se,Ie,!1)};function Q(ae,ee,se,Ie){se=Number(se)||0;const We=ae.length-se;Ie?(Ie=Number(Ie),Ie>We&&(Ie=We)):Ie=We;const Ke=ee.length;Ie>Ke/2&&(Ie=Ke/2);let $e;for($e=0;$e<Ie;++$e){const Vt=parseInt(ee.substr($e*2,2),16);if(Me(Vt))return $e;ae[se+$e]=Vt}return $e}function F(ae,ee,se,Ie){return He(Ue(ee,ae.length-se),ae,se,Ie)}function z(ae,ee,se,Ie){return He(Pe(ee),ae,se,Ie)}function X(ae,ee,se,Ie){return He(ze(ee),ae,se,Ie)}function fe(ae,ee,se,Ie){return He(Ye(ee,ae.length-se),ae,se,Ie)}m.prototype.write=function(ee,se,Ie,We){if(se===void 0)We="utf8",Ie=this.length,se=0;else if(Ie===void 0&&typeof se=="string")We=se,Ie=this.length,se=0;else if(isFinite(se))se=se>>>0,isFinite(Ie)?(Ie=Ie>>>0,We===void 0&&(We="utf8")):(We=Ie,Ie=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ke=this.length-se;if((Ie===void 0||Ie>Ke)&&(Ie=Ke),ee.length>0&&(Ie<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let $e=!1;for(;;)switch(We){case"hex":return Q(this,ee,se,Ie);case"utf8":case"utf-8":return F(this,ee,se,Ie);case"ascii":case"latin1":case"binary":return z(this,ee,se,Ie);case"base64":return X(this,ee,se,Ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,ee,se,Ie);default:if($e)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),$e=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ae(ae,ee,se){return ee===0&&se===ae.length?g.fromByteArray(ae):g.fromByteArray(ae.slice(ee,se))}function Se(ae,ee,se){se=Math.min(ae.length,se);const Ie=[];let We=ee;for(;We<se;){const Ke=ae[We];let $e=null,Vt=Ke>239?4:Ke>223?3:Ke>191?2:1;if(We+Vt<=se){let $t,Xt,jt,on;switch(Vt){case 1:Ke<128&&($e=Ke);break;case 2:$t=ae[We+1],($t&192)===128&&(on=(Ke&31)<<6|$t&63,on>127&&($e=on));break;case 3:$t=ae[We+1],Xt=ae[We+2],($t&192)===128&&(Xt&192)===128&&(on=(Ke&15)<<12|($t&63)<<6|Xt&63,on>2047&&(on<55296||on>57343)&&($e=on));break;case 4:$t=ae[We+1],Xt=ae[We+2],jt=ae[We+3],($t&192)===128&&(Xt&192)===128&&(jt&192)===128&&(on=(Ke&15)<<18|($t&63)<<12|(Xt&63)<<6|jt&63,on>65535&&on<1114112&&($e=on))}}$e===null?($e=65533,Vt=1):$e>65535&&($e-=65536,Ie.push($e>>>10&1023|55296),$e=56320|$e&1023),Ie.push($e),We+=Vt}return Ge(Ie)}const Be=4096;function Ge(ae){const ee=ae.length;if(ee<=Be)return String.fromCharCode.apply(String,ae);let se="",Ie=0;for(;Ie<ee;)se+=String.fromCharCode.apply(String,ae.slice(Ie,Ie+=Be));return se}function ht(ae,ee,se){let Ie="";se=Math.min(ae.length,se);for(let We=ee;We<se;++We)Ie+=String.fromCharCode(ae[We]&127);return Ie}function xt(ae,ee,se){let Ie="";se=Math.min(ae.length,se);for(let We=ee;We<se;++We)Ie+=String.fromCharCode(ae[We]);return Ie}function at(ae,ee,se){const Ie=ae.length;(!ee||ee<0)&&(ee=0),(!se||se<0||se>Ie)&&(se=Ie);let We="";for(let Ke=ee;Ke<se;++Ke)We+=Te[ae[Ke]];return We}function Gt(ae,ee,se){const Ie=ae.slice(ee,se);let We="";for(let Ke=0;Ke<Ie.length-1;Ke+=2)We+=String.fromCharCode(Ie[Ke]+Ie[Ke+1]*256);return We}m.prototype.slice=function(ee,se){const Ie=this.length;ee=~~ee,se=se===void 0?Ie:~~se,ee<0?(ee+=Ie,ee<0&&(ee=0)):ee>Ie&&(ee=Ie),se<0?(se+=Ie,se<0&&(se=0)):se>Ie&&(se=Ie),se<ee&&(se=ee);const We=this.subarray(ee,se);return Object.setPrototypeOf(We,m.prototype),We};function wt(ae,ee,se){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+ee>se)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(ee,se,Ie){ee=ee>>>0,se=se>>>0,Ie||wt(ee,se,this.length);let We=this[ee],Ke=1,$e=0;for(;++$e<se&&(Ke*=256);)We+=this[ee+$e]*Ke;return We},m.prototype.readUintBE=m.prototype.readUIntBE=function(ee,se,Ie){ee=ee>>>0,se=se>>>0,Ie||wt(ee,se,this.length);let We=this[ee+--se],Ke=1;for(;se>0&&(Ke*=256);)We+=this[ee+--se]*Ke;return We},m.prototype.readUint8=m.prototype.readUInt8=function(ee,se){return ee=ee>>>0,se||wt(ee,1,this.length),this[ee]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(ee,se){return ee=ee>>>0,se||wt(ee,2,this.length),this[ee]|this[ee+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(ee,se){return ee=ee>>>0,se||wt(ee,2,this.length),this[ee]<<8|this[ee+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),(this[ee]|this[ee+1]<<8|this[ee+2]<<16)+this[ee+3]*16777216},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),this[ee]*16777216+(this[ee+1]<<16|this[ee+2]<<8|this[ee+3])},m.prototype.readBigUInt64LE=Oe(function(ee){ee=ee>>>0,tn(ee,"offset");const se=this[ee],Ie=this[ee+7];(se===void 0||Ie===void 0)&&ri(ee,this.length-8);const We=se+this[++ee]*2**8+this[++ee]*2**16+this[++ee]*2**24,Ke=this[++ee]+this[++ee]*2**8+this[++ee]*2**16+Ie*2**24;return BigInt(We)+(BigInt(Ke)<<BigInt(32))}),m.prototype.readBigUInt64BE=Oe(function(ee){ee=ee>>>0,tn(ee,"offset");const se=this[ee],Ie=this[ee+7];(se===void 0||Ie===void 0)&&ri(ee,this.length-8);const We=se*2**24+this[++ee]*2**16+this[++ee]*2**8+this[++ee],Ke=this[++ee]*2**24+this[++ee]*2**16+this[++ee]*2**8+Ie;return(BigInt(We)<<BigInt(32))+BigInt(Ke)}),m.prototype.readIntLE=function(ee,se,Ie){ee=ee>>>0,se=se>>>0,Ie||wt(ee,se,this.length);let We=this[ee],Ke=1,$e=0;for(;++$e<se&&(Ke*=256);)We+=this[ee+$e]*Ke;return Ke*=128,We>=Ke&&(We-=Math.pow(2,8*se)),We},m.prototype.readIntBE=function(ee,se,Ie){ee=ee>>>0,se=se>>>0,Ie||wt(ee,se,this.length);let We=se,Ke=1,$e=this[ee+--We];for(;We>0&&(Ke*=256);)$e+=this[ee+--We]*Ke;return Ke*=128,$e>=Ke&&($e-=Math.pow(2,8*se)),$e},m.prototype.readInt8=function(ee,se){return ee=ee>>>0,se||wt(ee,1,this.length),this[ee]&128?(255-this[ee]+1)*-1:this[ee]},m.prototype.readInt16LE=function(ee,se){ee=ee>>>0,se||wt(ee,2,this.length);const Ie=this[ee]|this[ee+1]<<8;return Ie&32768?Ie|4294901760:Ie},m.prototype.readInt16BE=function(ee,se){ee=ee>>>0,se||wt(ee,2,this.length);const Ie=this[ee+1]|this[ee]<<8;return Ie&32768?Ie|4294901760:Ie},m.prototype.readInt32LE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),this[ee]|this[ee+1]<<8|this[ee+2]<<16|this[ee+3]<<24},m.prototype.readInt32BE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),this[ee]<<24|this[ee+1]<<16|this[ee+2]<<8|this[ee+3]},m.prototype.readBigInt64LE=Oe(function(ee){ee=ee>>>0,tn(ee,"offset");const se=this[ee],Ie=this[ee+7];(se===void 0||Ie===void 0)&&ri(ee,this.length-8);const We=this[ee+4]+this[ee+5]*2**8+this[ee+6]*2**16+(Ie<<24);return(BigInt(We)<<BigInt(32))+BigInt(se+this[++ee]*256+this[++ee]*65536+this[++ee]*16777216)}),m.prototype.readBigInt64BE=Oe(function(ee){ee=ee>>>0,tn(ee,"offset");const se=this[ee],Ie=this[ee+7];(se===void 0||Ie===void 0)&&ri(ee,this.length-8);const We=(se<<24)+this[++ee]*2**16+this[++ee]*2**8+this[++ee];return(BigInt(We)<<BigInt(32))+BigInt(this[++ee]*16777216+this[++ee]*65536+this[++ee]*256+Ie)}),m.prototype.readFloatLE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),C.read(this,ee,!0,23,4)},m.prototype.readFloatBE=function(ee,se){return ee=ee>>>0,se||wt(ee,4,this.length),C.read(this,ee,!1,23,4)},m.prototype.readDoubleLE=function(ee,se){return ee=ee>>>0,se||wt(ee,8,this.length),C.read(this,ee,!0,52,8)},m.prototype.readDoubleBE=function(ee,se){return ee=ee>>>0,se||wt(ee,8,this.length),C.read(this,ee,!1,52,8)};function Yt(ae,ee,se,Ie,We,Ke){if(!m.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>We||ee<Ke)throw new RangeError('"value" argument is out of bounds');if(se+Ie>ae.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(ee,se,Ie,We){if(ee=+ee,se=se>>>0,Ie=Ie>>>0,!We){const Vt=Math.pow(2,8*Ie)-1;Yt(this,ee,se,Ie,Vt,0)}let Ke=1,$e=0;for(this[se]=ee&255;++$e<Ie&&(Ke*=256);)this[se+$e]=ee/Ke&255;return se+Ie},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(ee,se,Ie,We){if(ee=+ee,se=se>>>0,Ie=Ie>>>0,!We){const Vt=Math.pow(2,8*Ie)-1;Yt(this,ee,se,Ie,Vt,0)}let Ke=Ie-1,$e=1;for(this[se+Ke]=ee&255;--Ke>=0&&($e*=256);)this[se+Ke]=ee/$e&255;return se+Ie},m.prototype.writeUint8=m.prototype.writeUInt8=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,1,255,0),this[se]=ee&255,se+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,2,65535,0),this[se]=ee&255,this[se+1]=ee>>>8,se+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,2,65535,0),this[se]=ee>>>8,this[se+1]=ee&255,se+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,4,4294967295,0),this[se+3]=ee>>>24,this[se+2]=ee>>>16,this[se+1]=ee>>>8,this[se]=ee&255,se+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,4,4294967295,0),this[se]=ee>>>24,this[se+1]=ee>>>16,this[se+2]=ee>>>8,this[se+3]=ee&255,se+4};function Mn(ae,ee,se,Ie,We){bn(ee,Ie,We,ae,se,7);let Ke=Number(ee&BigInt(4294967295));ae[se++]=Ke,Ke=Ke>>8,ae[se++]=Ke,Ke=Ke>>8,ae[se++]=Ke,Ke=Ke>>8,ae[se++]=Ke;let $e=Number(ee>>BigInt(32)&BigInt(4294967295));return ae[se++]=$e,$e=$e>>8,ae[se++]=$e,$e=$e>>8,ae[se++]=$e,$e=$e>>8,ae[se++]=$e,se}function je(ae,ee,se,Ie,We){bn(ee,Ie,We,ae,se,7);let Ke=Number(ee&BigInt(4294967295));ae[se+7]=Ke,Ke=Ke>>8,ae[se+6]=Ke,Ke=Ke>>8,ae[se+5]=Ke,Ke=Ke>>8,ae[se+4]=Ke;let $e=Number(ee>>BigInt(32)&BigInt(4294967295));return ae[se+3]=$e,$e=$e>>8,ae[se+2]=$e,$e=$e>>8,ae[se+1]=$e,$e=$e>>8,ae[se]=$e,se+8}m.prototype.writeBigUInt64LE=Oe(function(ee,se=0){return Mn(this,ee,se,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeBigUInt64BE=Oe(function(ee,se=0){return je(this,ee,se,BigInt(0),BigInt("0xffffffffffffffff"))}),m.prototype.writeIntLE=function(ee,se,Ie,We){if(ee=+ee,se=se>>>0,!We){const $t=Math.pow(2,8*Ie-1);Yt(this,ee,se,Ie,$t-1,-$t)}let Ke=0,$e=1,Vt=0;for(this[se]=ee&255;++Ke<Ie&&($e*=256);)ee<0&&Vt===0&&this[se+Ke-1]!==0&&(Vt=1),this[se+Ke]=(ee/$e>>0)-Vt&255;return se+Ie},m.prototype.writeIntBE=function(ee,se,Ie,We){if(ee=+ee,se=se>>>0,!We){const $t=Math.pow(2,8*Ie-1);Yt(this,ee,se,Ie,$t-1,-$t)}let Ke=Ie-1,$e=1,Vt=0;for(this[se+Ke]=ee&255;--Ke>=0&&($e*=256);)ee<0&&Vt===0&&this[se+Ke+1]!==0&&(Vt=1),this[se+Ke]=(ee/$e>>0)-Vt&255;return se+Ie},m.prototype.writeInt8=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,1,127,-128),ee<0&&(ee=255+ee+1),this[se]=ee&255,se+1},m.prototype.writeInt16LE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,2,32767,-32768),this[se]=ee&255,this[se+1]=ee>>>8,se+2},m.prototype.writeInt16BE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,2,32767,-32768),this[se]=ee>>>8,this[se+1]=ee&255,se+2},m.prototype.writeInt32LE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,4,2147483647,-2147483648),this[se]=ee&255,this[se+1]=ee>>>8,this[se+2]=ee>>>16,this[se+3]=ee>>>24,se+4},m.prototype.writeInt32BE=function(ee,se,Ie){return ee=+ee,se=se>>>0,Ie||Yt(this,ee,se,4,2147483647,-2147483648),ee<0&&(ee=4294967295+ee+1),this[se]=ee>>>24,this[se+1]=ee>>>16,this[se+2]=ee>>>8,this[se+3]=ee&255,se+4},m.prototype.writeBigInt64LE=Oe(function(ee,se=0){return Mn(this,ee,se,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),m.prototype.writeBigInt64BE=Oe(function(ee,se=0){return je(this,ee,se,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function rt(ae,ee,se,Ie,We,Ke){if(se+Ie>ae.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("Index out of range")}function At(ae,ee,se,Ie,We){return ee=+ee,se=se>>>0,We||rt(ae,ee,se,4),C.write(ae,ee,se,Ie,23,4),se+4}m.prototype.writeFloatLE=function(ee,se,Ie){return At(this,ee,se,!0,Ie)},m.prototype.writeFloatBE=function(ee,se,Ie){return At(this,ee,se,!1,Ie)};function Bt(ae,ee,se,Ie,We){return ee=+ee,se=se>>>0,We||rt(ae,ee,se,8),C.write(ae,ee,se,Ie,52,8),se+8}m.prototype.writeDoubleLE=function(ee,se,Ie){return Bt(this,ee,se,!0,Ie)},m.prototype.writeDoubleBE=function(ee,se,Ie){return Bt(this,ee,se,!1,Ie)},m.prototype.copy=function(ee,se,Ie,We){if(!m.isBuffer(ee))throw new TypeError("argument should be a Buffer");if(Ie||(Ie=0),!We&&We!==0&&(We=this.length),se>=ee.length&&(se=ee.length),se||(se=0),We>0&&We<Ie&&(We=Ie),We===Ie||ee.length===0||this.length===0)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(Ie<0||Ie>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),ee.length-se<We-Ie&&(We=ee.length-se+Ie);const Ke=We-Ie;return this===ee&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(se,Ie,We):Uint8Array.prototype.set.call(ee,this.subarray(Ie,We),se),Ke},m.prototype.fill=function(ee,se,Ie,We){if(typeof ee=="string"){if(typeof se=="string"?(We=se,se=0,Ie=this.length):typeof Ie=="string"&&(We=Ie,Ie=this.length),We!==void 0&&typeof We!="string")throw new TypeError("encoding must be a string");if(typeof We=="string"&&!m.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(ee.length===1){const $e=ee.charCodeAt(0);(We==="utf8"&&$e<128||We==="latin1")&&(ee=$e)}}else typeof ee=="number"?ee=ee&255:typeof ee=="boolean"&&(ee=Number(ee));if(se<0||this.length<se||this.length<Ie)throw new RangeError("Out of range index");if(Ie<=se)return this;se=se>>>0,Ie=Ie===void 0?this.length:Ie>>>0,ee||(ee=0);let Ke;if(typeof ee=="number")for(Ke=se;Ke<Ie;++Ke)this[Ke]=ee;else{const $e=m.isBuffer(ee)?ee:m.from(ee,We),Vt=$e.length;if(Vt===0)throw new TypeError('The value "'+ee+'" is invalid for argument "value"');for(Ke=0;Ke<Ie-se;++Ke)this[Ke+se]=$e[Ke%Vt]}return this};const Pt={};function qt(ae,ee,se){Pt[ae]=class extends se{constructor(){super(),Object.defineProperty(this,"message",{value:ee.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}qt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),qt("ERR_INVALID_ARG_TYPE",function(ae,ee){return`The "${ae}" argument must be of type number. Received type ${typeof ee}`},TypeError),qt("ERR_OUT_OF_RANGE",function(ae,ee,se){let Ie=`The value of "${ae}" is out of range.`,We=se;return Number.isInteger(se)&&Math.abs(se)>4294967296?We=un(String(se)):typeof se=="bigint"&&(We=String(se),(se>BigInt(2)**BigInt(32)||se<-(BigInt(2)**BigInt(32)))&&(We=un(We)),We+="n"),Ie+=` It must be ${ee}. Received ${We}`,Ie},RangeError);function un(ae){let ee="",se=ae.length;const Ie=ae[0]==="-"?1:0;for(;se>=Ie+4;se-=3)ee=`_${ae.slice(se-3,se)}${ee}`;return`${ae.slice(0,se)}${ee}`}function dn(ae,ee,se){tn(ee,"offset"),(ae[ee]===void 0||ae[ee+se]===void 0)&&ri(ee,ae.length-(se+1))}function bn(ae,ee,se,Ie,We,Ke){if(ae>se||ae<ee){const $e=typeof ee=="bigint"?"n":"";let Vt;throw Ke>3?ee===0||ee===BigInt(0)?Vt=`>= 0${$e} and < 2${$e} ** ${(Ke+1)*8}${$e}`:Vt=`>= -(2${$e} ** ${(Ke+1)*8-1}${$e}) and < 2 ** ${(Ke+1)*8-1}${$e}`:Vt=`>= ${ee}${$e} and <= ${se}${$e}`,new Pt.ERR_OUT_OF_RANGE("value",Vt,ae)}dn(Ie,We,Ke)}function tn(ae,ee){if(typeof ae!="number")throw new Pt.ERR_INVALID_ARG_TYPE(ee,"number",ae)}function ri(ae,ee,se){throw Math.floor(ae)!==ae?(tn(ae,se),new Pt.ERR_OUT_OF_RANGE(se||"offset","an integer",ae)):ee<0?new Pt.ERR_BUFFER_OUT_OF_BOUNDS:new Pt.ERR_OUT_OF_RANGE(se||"offset",`>= ${se?1:0} and <= ${ee}`,ae)}const ni=/[^+/0-9A-Za-z-_]/g;function zt(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(ni,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function Ue(ae,ee){ee=ee||1/0;let se;const Ie=ae.length;let We=null;const Ke=[];for(let $e=0;$e<Ie;++$e){if(se=ae.charCodeAt($e),se>55295&&se<57344){if(!We){if(se>56319){(ee-=3)>-1&&Ke.push(239,191,189);continue}else if($e+1===Ie){(ee-=3)>-1&&Ke.push(239,191,189);continue}We=se;continue}if(se<56320){(ee-=3)>-1&&Ke.push(239,191,189),We=se;continue}se=(We-55296<<10|se-56320)+65536}else We&&(ee-=3)>-1&&Ke.push(239,191,189);if(We=null,se<128){if((ee-=1)<0)break;Ke.push(se)}else if(se<2048){if((ee-=2)<0)break;Ke.push(se>>6|192,se&63|128)}else if(se<65536){if((ee-=3)<0)break;Ke.push(se>>12|224,se>>6&63|128,se&63|128)}else if(se<1114112){if((ee-=4)<0)break;Ke.push(se>>18|240,se>>12&63|128,se>>6&63|128,se&63|128)}else throw new Error("Invalid code point")}return Ke}function Pe(ae){const ee=[];for(let se=0;se<ae.length;++se)ee.push(ae.charCodeAt(se)&255);return ee}function Ye(ae,ee){let se,Ie,We;const Ke=[];for(let $e=0;$e<ae.length&&!((ee-=2)<0);++$e)se=ae.charCodeAt($e),Ie=se>>8,We=se%256,Ke.push(We),Ke.push(Ie);return Ke}function ze(ae){return g.toByteArray(zt(ae))}function He(ae,ee,se,Ie){let We;for(We=0;We<Ie&&!(We+se>=ee.length||We>=ae.length);++We)ee[We+se]=ae[We];return We}function et(ae,ee){return ae instanceof ee||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===ee.name}function Me(ae){return ae!==ae}const Te=function(){const ae="0123456789abcdef",ee=new Array(256);for(let se=0;se<16;++se){const Ie=se*16;for(let We=0;We<16;++We)ee[Ie+We]=ae[se]+ae[We]}return ee}();function Oe(ae){return typeof BigInt>"u"?Ze:ae}function Ze(){throw new Error("BigInt not supported")}},"./node_modules/css-loader/dist/runtime/api.js":T=>{T.exports=function(I){var u=[];return u.toString=function(){return this.map(function(C){var v="",y=typeof C[5]<"u";return C[4]&&(v+="@supports (".concat(C[4],") {")),C[2]&&(v+="@media ".concat(C[2]," {")),y&&(v+="@layer".concat(C[5].length>0?" ".concat(C[5]):""," {")),v+=I(C),y&&(v+="}"),C[2]&&(v+="}"),C[4]&&(v+="}"),v}).join("")},u.i=function(C,v,y,E,b){typeof C=="string"&&(C=[[null,C,void 0]]);var m={};if(y)for(var w=0;w<this.length;w++){var _=this[w][0];_!=null&&(m[_]=!0)}for(var O=0;O<C.length;O++){var R=[].concat(C[O]);y&&m[R[0]]||(typeof b<"u"&&(typeof R[5]>"u"||(R[1]="@layer".concat(R[5].length>0?" ".concat(R[5]):""," {").concat(R[1],"}")),R[5]=b),v&&(R[2]&&(R[1]="@media ".concat(R[2]," {").concat(R[1],"}")),R[2]=v),E&&(R[4]?(R[1]="@supports (".concat(R[4],") {").concat(R[1],"}"),R[4]=E):R[4]="".concat(E)),u.push(R))}},u}},"./node_modules/css-loader/dist/runtime/getUrl.js":T=>{T.exports=function(I,u){return u||(u={}),I&&(I=String(I.__esModule?I.default:I),/^['"].*['"]$/.test(I)&&(I=I.slice(1,-1)),u.hash&&(I+=u.hash),/["'() \t\n]|(%20)/.test(I)||u.needQuotes?'"'.concat(I.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):I)}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":T=>{T.exports=function(I){var u=I[1],g=I[3];if(!g)return u;if(typeof btoa=="function"){var C=btoa(unescape(encodeURIComponent(JSON.stringify(g)))),v="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(C),y="/*# ".concat(v," */");return[u].concat([y]).join(`
`)}return[u].join(`
`)}},"./node_modules/custom-event-polyfill/polyfill.js":()=>{(function(){if(!(typeof window>"u"))try{var T=new window.CustomEvent("test",{cancelable:!0});if(T.preventDefault(),T.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch{var I=function(g,C){var v,y;return C=C||{},C.bubbles=!!C.bubbles,C.cancelable=!!C.cancelable,v=document.createEvent("CustomEvent"),v.initCustomEvent(g,C.bubbles,C.cancelable,C.detail),y=v.preventDefault,v.preventDefault=function(){y.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch{this.defaultPrevented=!0}},v};I.prototype=window.Event.prototype,window.CustomEvent=I}})()},"./node_modules/debug/browser.js":(T,I,u)=>{I=T.exports=u("./node_modules/debug/debug.js"),I.log=v,I.formatArgs=C,I.save=y,I.load=E,I.useColors=g,I.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:b(),I.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function g(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}I.formatters.j=function(m){return JSON.stringify(m)};function C(){var m=arguments,w=this.useColors;if(m[0]=(w?"%c":"")+this.namespace+(w?" %c":" ")+m[0]+(w?"%c ":" "),!w)return m;var _="color: "+this.color;m=[m[0],_,"color: inherit"].concat(Array.prototype.slice.call(m,1));var O=0,R=0;return m[0].replace(/%[a-z%]/g,function(L){L!=="%%"&&(O++,L==="%c"&&(R=O))}),m.splice(R,0,_),m}function v(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function y(m){try{m==null?I.storage.removeItem("debug"):I.storage.debug=m}catch{}}function E(){var m;try{m=I.storage.debug}catch{}return m}I.enable(E());function b(){try{return window.localStorage}catch{}}},"./node_modules/debug/debug.js":(T,I)=>{I=T.exports=C,I.coerce=b,I.disable=y,I.enable=v,I.enabled=E,I.names=[],I.skips=[],I.formatters={};var u=0;function g(){return I.colors[u++%I.colors.length]}function C(m){function w(){}w.enabled=!1;function _(){var R=_;R.useColors==null&&(R.useColors=I.useColors()),R.color==null&&R.useColors&&(R.color=g());var L=Array.prototype.slice.call(arguments);L[0]=I.coerce(L[0]),typeof L[0]!="string"&&(L=["%o"].concat(L));var P=0;L[0]=L[0].replace(/%([a-z%])/g,function(J,j){if(J==="%%")return J;P++;var k=I.formatters[j];if(typeof k=="function"){var te=L[P];J=k.call(R,te),L.splice(P,1),P--}return J}),typeof I.formatArgs=="function"&&(L=I.formatArgs.apply(R,L));var Y=_.log||I.log||console.log.bind(console);Y.apply(R,L)}_.enabled=!0;var O=I.enabled(m)?_:w;return O.namespace=m,O}function v(m){I.save(m);for(var w=(m||"").split(/[\s,]+/),_=w.length,O=0;O<_;O++)!w[O]||(m=w[O].replace(/\*/g,".*?"),m[0]==="-"?I.skips.push(new RegExp("^"+m.substr(1)+"$")):I.names.push(new RegExp("^"+m+"$")))}function y(){I.enable("")}function E(m){var w,_;for(w=0,_=I.skips.length;w<_;w++)if(I.skips[w].test(m))return!1;for(w=0,_=I.names.length;w<_;w++)if(I.names[w].test(m))return!0;return!1}function b(m){return m instanceof Error?m.stack||m.message:m}},"./node_modules/deep-assign/index.js":(T,I,u)=>{var g=u("./node_modules/is-obj/index.js"),C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function y(m){if(m==null)throw new TypeError("Sources cannot be null or undefined");return Object(m)}function E(m,w,_){var O=w[_];if(O!=null){if(C.call(m,_)&&(m[_]===void 0||m[_]===null))throw new TypeError("Cannot convert undefined or null to object ("+_+")");!C.call(m,_)||!g(O)?m[_]=O:m[_]=b(Object(m[_]),w[_])}}function b(m,w){if(m===w)return m;w=Object(w);for(var _ in w)C.call(w,_)&&E(m,w,_);if(Object.getOwnPropertySymbols)for(var O=Object.getOwnPropertySymbols(w),R=0;R<O.length;R++)v.call(w,O[R])&&E(m,w,O[R]);return m}T.exports=function(w){w=y(w);for(var _=1;_<arguments.length;_++)b(w,arguments[_]);return w}},"./node_modules/dtype/index.js":T=>{T.exports=function(I){switch(I){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},"./node_modules/flatten-vertex-data/index.js":(T,I,u)=>{var g=u("./node_modules/dtype/index.js");T.exports=C;function C(v,y,E){if(!v)throw new TypeError("must specify data as first parameter");if(E=+(E||0)|0,Array.isArray(v)&&v[0]&&typeof v[0][0]=="number"){var b=v[0].length,m=v.length*b,w,_,O,R;(!y||typeof y=="string")&&(y=new(g(y||"float32"))(m+E));var L=y.length-E;if(m!==L)throw new Error("source length "+m+" ("+b+"x"+v.length+") does not match destination length "+L);for(w=0,O=E;w<v.length;w++)for(_=0;_<b;_++)y[O++]=v[w][_]===null?NaN:v[w][_]}else if(!y||typeof y=="string"){var P=g(y||"float32");if(Array.isArray(v)||y==="array")for(y=new P(v.length+E),w=0,O=E,R=y.length;O<R;O++,w++)y[O]=v[w]===null?NaN:v[w];else E===0?y=new P(v):(y=new P(v.length+E),y.set(v,E))}else y.set(v,E);return y}},"./node_modules/global/window.js":(T,I,u)=>{var g;typeof window<"u"?g=window:typeof u.g<"u"?g=u.g:typeof self<"u"?g=self:g={},T.exports=g},"./node_modules/ieee754/index.js":(T,I)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */I.read=function(u,g,C,v,y){var E,b,m=y*8-v-1,w=(1<<m)-1,_=w>>1,O=-7,R=C?y-1:0,L=C?-1:1,P=u[g+R];for(R+=L,E=P&(1<<-O)-1,P>>=-O,O+=m;O>0;E=E*256+u[g+R],R+=L,O-=8);for(b=E&(1<<-O)-1,E>>=-O,O+=v;O>0;b=b*256+u[g+R],R+=L,O-=8);if(E===0)E=1-_;else{if(E===w)return b?NaN:(P?-1:1)*(1/0);b=b+Math.pow(2,v),E=E-_}return(P?-1:1)*b*Math.pow(2,E-v)},I.write=function(u,g,C,v,y,E){var b,m,w,_=E*8-y-1,O=(1<<_)-1,R=O>>1,L=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=v?0:E-1,Y=v?1:-1,J=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(m=isNaN(g)?1:0,b=O):(b=Math.floor(Math.log(g)/Math.LN2),g*(w=Math.pow(2,-b))<1&&(b--,w*=2),b+R>=1?g+=L/w:g+=L*Math.pow(2,1-R),g*w>=2&&(b++,w/=2),b+R>=O?(m=0,b=O):b+R>=1?(m=(g*w-1)*Math.pow(2,y),b=b+R):(m=g*Math.pow(2,R-1)*Math.pow(2,y),b=0));y>=8;u[C+P]=m&255,P+=Y,m/=256,y-=8);for(b=b<<y|m,_+=y;_>0;u[C+P]=b&255,P+=Y,b/=256,_-=8);u[C+P-Y]|=J*128}},"./node_modules/inherits/inherits_browser.js":T=>{typeof Object.create=="function"?T.exports=function(u,g){g&&(u.super_=g,u.prototype=Object.create(g.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}))}:T.exports=function(u,g){if(g){u.super_=g;var C=function(){};C.prototype=g.prototype,u.prototype=new C,u.prototype.constructor=u}}},"./node_modules/is-buffer/index.js":T=>{/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */T.exports=function(g){return g!=null&&(I(g)||u(g)||!!g._isBuffer)};function I(g){return!!g.constructor&&typeof g.constructor.isBuffer=="function"&&g.constructor.isBuffer(g)}function u(g){return typeof g.readFloatLE=="function"&&typeof g.slice=="function"&&I(g.slice(0,0))}},"./node_modules/is-function/index.js":T=>{T.exports=u;var I=Object.prototype.toString;function u(g){if(!g)return!1;var C=I.call(g);return C==="[object Function]"||typeof g=="function"&&C!=="[object RegExp]"||typeof window<"u"&&(g===window.setTimeout||g===window.alert||g===window.confirm||g===window.prompt)}},"./node_modules/is-obj/index.js":T=>{T.exports=function(I){var u=typeof I;return I!==null&&(u==="object"||u==="function")}},"./node_modules/layout-bmfont-text/index.js":(T,I,u)=>{var g=u("./node_modules/word-wrapper/index.js"),C=u("./node_modules/xtend/immutable.js"),v=u("./node_modules/as-number/index.js"),y=["x","e","a","o","n","s","r","c","u","m","v","w","z"],E=["m","w"],b=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],m="	".charCodeAt(0),w=" ".charCodeAt(0),_=0,O=1,R=2;T.exports=function(q){return new L(q)};function L(V){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(V)}L.prototype.update=function(V){if(V=C({measure:this._measure},V),this._opt=V,this._opt.tabSize=v(this._opt.tabSize,4),!V.font)throw new Error("must provide a valid bitmap font");var q=this.glyphs,Q=V.text||"",F=V.font;this._setupSpaceGlyphs(F);var z=g.lines(Q,V),X=V.width||0;q.length=0;var fe=z.reduce(function(Yt,Mn){return Math.max(Yt,Mn.width,X)},0),Ae=0,Se=0,Be=v(V.lineHeight,F.common.lineHeight),Ge=F.common.base,ht=Be-Ge,xt=V.letterSpacing||0,at=Be*z.length-ht,Gt=xe(this._opt.align);Se-=at,this._width=fe,this._height=at,this._descender=Be-Ge,this._baseline=Ge,this._xHeight=j(F),this._capHeight=te(F),this._lineHeight=Be,this._ascender=Be-ht-this._xHeight;var wt=this;z.forEach(function(Yt,Mn){for(var je=Yt.start,rt=Yt.end,At=Yt.width,Bt,Pt=je;Pt<rt;Pt++){var qt=Q.charCodeAt(Pt),un=wt.getGlyph(F,qt);if(un){Bt&&(Ae+=ue(F,Bt.id,un.id));var dn=Ae;Gt===O?dn+=(fe-At)/2:Gt===R&&(dn+=fe-At),q.push({position:[dn,Se],data:un,index:Pt,line:Mn}),Ae+=un.xadvance+xt,Bt=un}}Se+=Be,Ae=0}),this._linesTotal=z.length},L.prototype._setupSpaceGlyphs=function(V){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!(!V.chars||V.chars.length===0)){var q=J(V,w)||k(V)||V.chars[0],Q=this._opt.tabSize*q.xadvance;this._fallbackSpaceGlyph=q,this._fallbackTabGlyph=C(q,{x:0,y:0,xadvance:Q,id:m,xoffset:0,yoffset:0,width:0,height:0})}},L.prototype.getGlyph=function(V,q){var Q=J(V,q);return Q||(q===m?this._fallbackTabGlyph:q===w?this._fallbackSpaceGlyph:null)},L.prototype.computeMetrics=function(V,q,Q,F){var z=this._opt.letterSpacing||0,X=this._opt.font,fe=0,Ae=0,Se=0,Be,Ge;if(!X.chars||X.chars.length===0)return{start:q,end:q,width:0};Q=Math.min(V.length,Q);for(var ht=q;ht<Q;ht++){var xt=V.charCodeAt(ht),Be=this.getGlyph(X,xt);if(Be){Be.xoffset;var at=Ge?ue(X,Ge.id,Be.id):0;fe+=at;var Gt=fe+Be.xadvance+z,wt=fe+Be.width;if(wt>=F||Gt>=F)break;fe=Gt,Ae=wt,Ge=Be}Se++}return Ge&&(Ae+=Ge.xoffset),{start:q,end:q+Se,width:Ae}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(P);function P(V){Object.defineProperty(L.prototype,V,{get:Y(V),configurable:!0})}function Y(V){return new Function(["return function "+V+"() {","  return this._"+V,"}"].join(`
`))()}function J(V,q){if(!V.chars||V.chars.length===0)return null;var Q=Ee(V.chars,q);return Q>=0?V.chars[Q]:null}function j(V){for(var q=0;q<y.length;q++){var Q=y[q].charCodeAt(0),F=Ee(V.chars,Q);if(F>=0)return V.chars[F].height}return 0}function k(V){for(var q=0;q<E.length;q++){var Q=E[q].charCodeAt(0),F=Ee(V.chars,Q);if(F>=0)return V.chars[F]}return 0}function te(V){for(var q=0;q<b.length;q++){var Q=b[q].charCodeAt(0),F=Ee(V.chars,Q);if(F>=0)return V.chars[F].height}return 0}function ue(V,q,Q){if(!V.kernings||V.kernings.length===0)return 0;for(var F=V.kernings,z=0;z<F.length;z++){var X=F[z];if(X.first===q&&X.second===Q)return X.amount}return 0}function xe(V){return V==="center"?O:V==="right"?R:_}function Ee(V,q,Q){Q=Q||0;for(var F=Q;F<V.length;F++)if(V[F].id===q)return F;return-1}},"./node_modules/load-bmfont/browser.js":(T,I,u)=>{var g=u("./node_modules/buffer/index.js").Buffer,C=u("./node_modules/xhr/index.js"),v=function(){},y=u("./node_modules/parse-bmfont-ascii/index.js"),E=u("./node_modules/parse-bmfont-xml/lib/browser.js"),b=u("./node_modules/parse-bmfont-binary/index.js"),m=u("./node_modules/load-bmfont/lib/is-binary.js"),w=u("./node_modules/xtend/immutable.js"),_=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();T.exports=function(L,P){P=typeof P=="function"?P:v,typeof L=="string"?L={uri:L}:L||(L={});var Y=L.binary;Y&&(L=R(L)),C(L,function(J,j,k){if(J)return P(J);if(!/^2/.test(j.statusCode))return P(new Error("http status code: "+j.statusCode));if(!k)return P(new Error("no body result"));var te=!1;if(O(k)){var ue=new Uint8Array(k);k=g.from(ue,"binary")}m(k)&&(te=!0,typeof k=="string"&&(k=g.from(k,"binary"))),te||(g.isBuffer(k)&&(k=k.toString(L.encoding)),k=k.trim());var xe;try{var Ee=j.headers["content-type"];te?xe=b(k):/json/.test(Ee)||k.charAt(0)==="{"?xe=JSON.parse(k):/xml/.test(Ee)||k.charAt(0)==="<"?xe=E(k):xe=y(k)}catch(V){P(new Error("error parsing font "+V.message)),P=v}P(null,xe)})};function O(L){var P=Object.prototype.toString;return P.call(L)==="[object ArrayBuffer]"}function R(L){if(_)return w(L,{responseType:"arraybuffer"});if(typeof self.XMLHttpRequest>"u")throw new Error("your browser does not support XHR loading");var P=new self.XMLHttpRequest;return P.overrideMimeType("text/plain; charset=x-user-defined"),w({xhr:P},L)}},"./node_modules/load-bmfont/lib/is-binary.js":(T,I,u)=>{var g=u("./node_modules/buffer/index.js").Buffer,C=u("./node_modules/buffer-equal/index.js"),v=g.from([66,77,70,3]);T.exports=function(y){return typeof y=="string"?y.substring(0,3)==="BMF":y.length>4&&C(y.slice(0,4),v)}},"./node_modules/object-assign/index.js":T=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var I=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function C(y){if(y==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(y)}function v(){try{if(!Object.assign)return!1;var y=new String("abc");if(y[5]="de",Object.getOwnPropertyNames(y)[0]==="5")return!1;for(var E={},b=0;b<10;b++)E["_"+String.fromCharCode(b)]=b;var m=Object.getOwnPropertyNames(E).map(function(_){return E[_]});if(m.join("")!=="0123456789")return!1;var w={};return"abcdefghijklmnopqrst".split("").forEach(function(_){w[_]=_}),Object.keys(Object.assign({},w)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}T.exports=v()?Object.assign:function(y,E){for(var b,m=C(y),w,_=1;_<arguments.length;_++){b=Object(arguments[_]);for(var O in b)u.call(b,O)&&(m[O]=b[O]);if(I){w=I(b);for(var R=0;R<w.length;R++)g.call(b,w[R])&&(m[w[R]]=b[w[R]])}}return m}},"./node_modules/parse-bmfont-ascii/index.js":T=>{T.exports=function(v){if(!v)throw new Error("no data provided");v=v.toString().trim();var y={pages:[],chars:[],kernings:[]},E=v.split(/\r\n?|\n/g);if(E.length===0)throw new Error("no data in BMFont file");for(var b=0;b<E.length;b++){var m=I(E[b],b);if(!!m)if(m.key==="page"){if(typeof m.data.id!="number")throw new Error("malformed file at line "+b+" -- needs page id=N");if(typeof m.data.file!="string")throw new Error("malformed file at line "+b+' -- needs page file="path"');y.pages[m.data.id]=m.data.file}else m.key==="chars"||m.key==="kernings"||(m.key==="char"?y.chars.push(m.data):m.key==="kerning"?y.kernings.push(m.data):y[m.key]=m.data)}return y};function I(C,v){if(C=C.replace(/\t+/g," ").trim(),!C)return null;var y=C.indexOf(" ");if(y===-1)throw new Error("no named row at line "+v);var E=C.substring(0,y);C=C.substring(y+1),C=C.replace(/letter=[\'\"]\S+[\'\"]/gi,""),C=C.split("="),C=C.map(function(O){return O.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var b=[],m=0;m<C.length;m++){var w=C[m];m===0?b.push({key:w[0],data:""}):m===C.length-1?b[b.length-1].data=u(w[0]):(b[b.length-1].data=u(w[0]),b.push({key:w[1],data:""}))}var _={key:E,data:{}};return b.forEach(function(O){_.data[O.key]=O.data}),_}function u(C){return!C||C.length===0?"":C.indexOf('"')===0||C.indexOf("'")===0?C.substring(1,C.length-1):C.indexOf(",")!==-1?g(C):parseInt(C,10)}function g(C){return C.split(",").map(function(v){return parseInt(v,10)})}},"./node_modules/parse-bmfont-binary/index.js":T=>{var I=[66,77,70];T.exports=function(_){if(_.length<6)throw new Error("invalid buffer length for BMFont");var O=I.every(function(J,j){return _.readUInt8(j)===J});if(!O)throw new Error("BMFont missing BMF byte header");var R=3,L=_.readUInt8(R++);if(L>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var P={kernings:[],chars:[]},Y=0;Y<5;Y++)R+=u(P,_,R);return P};function u(w,_,O){if(O>_.length-1)return 0;var R=_.readUInt8(O++),L=_.readInt32LE(O);switch(O+=4,R){case 1:w.info=g(_,O);break;case 2:w.common=C(_,O);break;case 3:w.pages=v(_,O,L);break;case 4:w.chars=y(_,O,L);break;case 5:w.kernings=E(_,O,L);break}return 5+L}function g(w,_){var O={};O.size=w.readInt16LE(_);var R=w.readUInt8(_+2);return O.smooth=R>>7&1,O.unicode=R>>6&1,O.italic=R>>5&1,O.bold=R>>4&1,R>>3&1&&(O.fixedHeight=1),O.charset=w.readUInt8(_+3)||"",O.stretchH=w.readUInt16LE(_+4),O.aa=w.readUInt8(_+6),O.padding=[w.readInt8(_+7),w.readInt8(_+8),w.readInt8(_+9),w.readInt8(_+10)],O.spacing=[w.readInt8(_+11),w.readInt8(_+12)],O.outline=w.readUInt8(_+13),O.face=m(w,_+14),O}function C(w,_){var O={};return O.lineHeight=w.readUInt16LE(_),O.base=w.readUInt16LE(_+2),O.scaleW=w.readUInt16LE(_+4),O.scaleH=w.readUInt16LE(_+6),O.pages=w.readUInt16LE(_+8),w.readUInt8(_+10),O.packed=0,O.alphaChnl=w.readUInt8(_+11),O.redChnl=w.readUInt8(_+12),O.greenChnl=w.readUInt8(_+13),O.blueChnl=w.readUInt8(_+14),O}function v(w,_,O){for(var R=[],L=b(w,_),P=L.length+1,Y=O/P,J=0;J<Y;J++)R[J]=w.slice(_,_+L.length).toString("utf8"),_+=P;return R}function y(w,_,O){for(var R=[],L=O/20,P=0;P<L;P++){var Y={},J=P*20;Y.id=w.readUInt32LE(_+0+J),Y.x=w.readUInt16LE(_+4+J),Y.y=w.readUInt16LE(_+6+J),Y.width=w.readUInt16LE(_+8+J),Y.height=w.readUInt16LE(_+10+J),Y.xoffset=w.readInt16LE(_+12+J),Y.yoffset=w.readInt16LE(_+14+J),Y.xadvance=w.readInt16LE(_+16+J),Y.page=w.readUInt8(_+18+J),Y.chnl=w.readUInt8(_+19+J),R[P]=Y}return R}function E(w,_,O){for(var R=[],L=O/10,P=0;P<L;P++){var Y={},J=P*10;Y.first=w.readUInt32LE(_+0+J),Y.second=w.readUInt32LE(_+4+J),Y.amount=w.readInt16LE(_+8+J),R[P]=Y}return R}function b(w,_){for(var O=_;O<w.length&&w[O]!==0;O++);return w.slice(_,O)}function m(w,_){return b(w,_).toString("utf8")}},"./node_modules/parse-bmfont-xml/lib/browser.js":(T,I,u)=>{var g=u("./node_modules/parse-bmfont-xml/lib/parse-attribs.js"),C=u("./node_modules/xml-parse-from-string/index.js"),v={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};T.exports=function(w){w=w.toString();var _=C(w),O={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(k){var te=_.getElementsByTagName(k)[0];te&&(O[k]=g(y(te)))});var R=_.getElementsByTagName("pages")[0];if(!R)throw new Error("malformed file -- no <pages> element");for(var L=R.getElementsByTagName("page"),P=0;P<L.length;P++){var Y=L[P],J=parseInt(Y.getAttribute("id"),10),j=Y.getAttribute("file");if(isNaN(J))throw new Error('malformed file -- page "id" attribute is NaN');if(!j)throw new Error('malformed file -- needs page "file" attribute');O.pages[parseInt(J,10)]=j}return["chars","kernings"].forEach(function(k){var te=_.getElementsByTagName(k)[0];if(!!te)for(var ue=k.substring(0,k.length-1),xe=te.getElementsByTagName(ue),Ee=0;Ee<xe.length;Ee++){var V=xe[Ee];O[k].push(g(y(V)))}}),O};function y(m){var w=E(m);return w.reduce(function(_,O){var R=b(O.nodeName);return _[R]=O.nodeValue,_},{})}function E(m){for(var w=[],_=0;_<m.attributes.length;_++)w.push(m.attributes[_]);return w}function b(m){return v[m.toLowerCase()]||m}},"./node_modules/parse-bmfont-xml/lib/parse-attribs.js":T=>{var I="chasrset";T.exports=function(C){I in C&&(C.charset=C[I],delete C[I]);for(var v in C)v==="face"||v==="charset"||(v==="padding"||v==="spacing"?C[v]=u(C[v]):C[v]=parseInt(C[v],10));return C};function u(g){return g.split(",").map(function(C){return parseInt(C,10)})}},"./node_modules/parse-headers/parse-headers.js":T=>{var I=function(g){return g.replace(/^\s+|\s+$/g,"")},u=function(g){return Object.prototype.toString.call(g)==="[object Array]"};T.exports=function(g){if(!g)return{};for(var C={},v=I(g).split(`
`),y=0;y<v.length;y++){var E=v[y],b=E.indexOf(":"),m=I(E.slice(0,b)).toLowerCase(),w=I(E.slice(b+1));typeof C[m]>"u"?C[m]=w:u(C[m])?C[m].push(w):C[m]=[C[m],w]}return C}},"./node_modules/present/lib/present-browser.js":(T,I,u)=>{var g=u.g.performance||{},C=function(){for(var v=["now","webkitNow","msNow","mozNow","oNow"];v.length;){var y=v.shift();if(y in g)return g[y].bind(g)}var E=Date.now||function(){return new Date().getTime()},b=(g.timing||{}).navigationStart||E();return function(){return E()-b}}();C.performanceNow=g.now,C.noConflict=function(){g.now=C.performanceNow},C.conflict=function(){g.now=C},C.conflict(),T.exports=C},"./node_modules/process/browser.js":T=>{var I=T.exports={},u,g;function C(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?u=setTimeout:u=C}catch{u=C}try{typeof clearTimeout=="function"?g=clearTimeout:g=v}catch{g=v}})();function y(Y){if(u===setTimeout)return setTimeout(Y,0);if((u===C||!u)&&setTimeout)return u=setTimeout,setTimeout(Y,0);try{return u(Y,0)}catch{try{return u.call(null,Y,0)}catch{return u.call(this,Y,0)}}}function E(Y){if(g===clearTimeout)return clearTimeout(Y);if((g===v||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(Y);try{return g(Y)}catch{try{return g.call(null,Y)}catch{return g.call(this,Y)}}}var b=[],m=!1,w,_=-1;function O(){!m||!w||(m=!1,w.length?b=w.concat(b):_=-1,b.length&&R())}function R(){if(!m){var Y=y(O);m=!0;for(var J=b.length;J;){for(w=b,b=[];++_<J;)w&&w[_].run();_=-1,J=b.length}w=null,m=!1,E(Y)}}I.nextTick=function(Y){var J=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)J[j-1]=arguments[j];b.push(new L(Y,J)),b.length===1&&!m&&y(R)};function L(Y,J){this.fun=Y,this.array=J}L.prototype.run=function(){this.fun.apply(null,this.array)},I.title="browser",I.browser=!0,I.env={},I.argv=[],I.version="",I.versions={};function P(){}I.on=P,I.addListener=P,I.once=P,I.off=P,I.removeListener=P,I.removeAllListeners=P,I.emit=P,I.prependListener=P,I.prependOnceListener=P,I.listeners=function(Y){return[]},I.binding=function(Y){throw new Error("process.binding is not supported")},I.cwd=function(){return"/"},I.chdir=function(Y){throw new Error("process.chdir is not supported")},I.umask=function(){return 0}},"./node_modules/promise-polyfill/Promise.js":function(T){(function(I){var u=setTimeout,g=typeof setImmediate=="function"&&setImmediate||function(R){u(R,1)};function C(R,L){return function(){R.apply(L,arguments)}}var v=Array.isArray||function(R){return Object.prototype.toString.call(R)==="[object Array]"};function y(R){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof R!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],O(R,C(b,this),C(m,this))}function E(R){var L=this;if(this._state===null){this._deferreds.push(R);return}g(function(){var P=L._state?R.onFulfilled:R.onRejected;if(P===null){(L._state?R.resolve:R.reject)(L._value);return}var Y;try{Y=P(L._value)}catch(J){R.reject(J);return}R.resolve(Y)})}function b(R){try{if(R===this)throw new TypeError("A promise cannot be resolved with itself.");if(R&&(typeof R=="object"||typeof R=="function")){var L=R.then;if(typeof L=="function"){O(C(L,R),C(b,this),C(m,this));return}}this._state=!0,this._value=R,w.call(this)}catch(P){m.call(this,P)}}function m(R){this._state=!1,this._value=R,w.call(this)}function w(){for(var R=0,L=this._deferreds.length;R<L;R++)E.call(this,this._deferreds[R]);this._deferreds=null}function _(R,L,P,Y){this.onFulfilled=typeof R=="function"?R:null,this.onRejected=typeof L=="function"?L:null,this.resolve=P,this.reject=Y}function O(R,L,P){var Y=!1;try{R(function(J){Y||(Y=!0,L(J))},function(J){Y||(Y=!0,P(J))})}catch(J){if(Y)return;Y=!0,P(J)}}y.prototype.catch=function(R){return this.then(null,R)},y.prototype.then=function(R,L){var P=this;return new y(function(Y,J){E.call(P,new _(R,L,Y,J))})},y.all=function(){var R=Array.prototype.slice.call(arguments.length===1&&v(arguments[0])?arguments[0]:arguments);return new y(function(L,P){if(R.length===0)return L([]);var Y=R.length;function J(k,te){try{if(te&&(typeof te=="object"||typeof te=="function")){var ue=te.then;if(typeof ue=="function"){ue.call(te,function(xe){J(k,xe)},P);return}}R[k]=te,--Y===0&&L(R)}catch(xe){P(xe)}}for(var j=0;j<R.length;j++)J(j,R[j])})},y.resolve=function(R){return R&&typeof R=="object"&&R.constructor===y?R:new y(function(L){L(R)})},y.reject=function(R){return new y(function(L,P){P(R)})},y.race=function(R){return new y(function(L,P){for(var Y=0,J=R.length;Y<J;Y++)R[Y].then(L,P)})},y._setImmediateFn=function(L){g=L},T.exports?T.exports=y:I.Promise||(I.Promise=y)})(this)},"./node_modules/quad-indices/index.js":(T,I,u)=>{var g=u("./node_modules/dtype/index.js"),C=u("./node_modules/an-array/index.js"),v=u("./node_modules/is-buffer/index.js"),y=[0,2,3],E=[2,1,3];T.exports=function(m,w){(!m||!(C(m)||v(m)))&&(w=m||{},m=null),typeof w=="number"?w={count:w}:w=w||{};for(var _=typeof w.type=="string"?w.type:"uint16",O=typeof w.count=="number"?w.count:1,R=w.start||0,L=w.clockwise!==!1?y:E,P=L[0],Y=L[1],J=L[2],j=O*6,k=m||new(g(_))(j),te=0,ue=0;te<j;te+=6,ue+=4){var xe=te+R;k[xe+0]=ue+0,k[xe+1]=ue+1,k[xe+2]=ue+2,k[xe+3]=ue+P,k[xe+4]=ue+Y,k[xe+5]=ue+J}return k}},"./node_modules/super-animejs/lib/anime.es.js":(T,I,u)=>{u.r(I),u.d(I,{default:()=>ys});var g={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},C={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},v=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],y={CSS:{},springs:{}};function E(Qe,ut,_t){return Math.min(Math.max(Qe,ut),_t)}function b(Qe,ut){return Qe.indexOf(ut)>-1}function m(Qe,ut){return Qe.apply(null,ut)}var w=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,_=/^rgb/,O=/^hsl/,R={arr:function(Qe){return Array.isArray(Qe)},obj:function(Qe){return b(Object.prototype.toString.call(Qe),"Object")},pth:function(Qe){return R.obj(Qe)&&Qe.hasOwnProperty("totalLength")},svg:function(Qe){return Qe instanceof SVGElement},inp:function(Qe){return Qe instanceof HTMLInputElement},dom:function(Qe){return Qe.nodeType||R.svg(Qe)},str:function(Qe){return typeof Qe=="string"},fnc:function(Qe){return typeof Qe=="function"},und:function(Qe){return typeof Qe>"u"},hex:function(Qe){return w.test(Qe)},rgb:function(Qe){return _.test(Qe)},hsl:function(Qe){return O.test(Qe)},col:function(Qe){return R.hex(Qe)||R.rgb(Qe)||R.hsl(Qe)},key:function(Qe){return!g.hasOwnProperty(Qe)&&!C.hasOwnProperty(Qe)&&Qe!=="targets"&&Qe!=="keyframes"}},L=/\(([^)]+)\)/;function P(Qe){var ut=L.exec(Qe);return ut?ut[1].split(",").map(function(_t){return parseFloat(_t)}):[]}function Y(Qe,ut){var _t=P(Qe),nn=E(R.und(_t[0])?1:_t[0],.1,100),Wt=E(R.und(_t[1])?100:_t[1],.1,100),mn=E(R.und(_t[2])?10:_t[2],.1,100),Un=E(R.und(_t[3])?0:_t[3],.1,100),Xn=Math.sqrt(Wt/nn),ei=mn/(2*Math.sqrt(Wt*nn)),pn=ei<1?Xn*Math.sqrt(1-ei*ei):0,Oi=1,Mi=ei<1?(ei*Xn+-Un)/pn:-Un+Xn;function Ti(zi){var er=ut?ut*zi/1e3:zi;return ei<1?er=Math.exp(-er*ei*Xn)*(Oi*Math.cos(pn*er)+Mi*Math.sin(pn*er)):er=(Oi+Mi*er)*Math.exp(-er*Xn),zi===0||zi===1?zi:1-er}function Wr(){var zi=y.springs[Qe];if(zi)return zi;for(var er=1/6,Nr=0,Ds=0;;)if(Nr+=er,Ti(Nr)===1){if(Ds++,Ds>=16)break}else Ds=0;var ro=Nr*er*1e3;return y.springs[Qe]=ro,ro}return ut?Ti:Wr}function J(Qe,ut){Qe===void 0&&(Qe=1),ut===void 0&&(ut=.5);var _t=E(Qe,1,10),nn=E(ut,.1,2);return function(Wt){return Wt===0||Wt===1?Wt:-_t*Math.pow(2,10*(Wt-1))*Math.sin((Wt-1-nn/(Math.PI*2)*Math.asin(1/_t))*(Math.PI*2)/nn)}}function j(Qe){return Qe===void 0&&(Qe=10),function(ut){return Math.round(ut*Qe)*(1/Qe)}}var k=function(){var Qe=11,ut=1/(Qe-1);function _t(Oi,Mi){return 1-3*Mi+3*Oi}function nn(Oi,Mi){return 3*Mi-6*Oi}function Wt(Oi){return 3*Oi}function mn(Oi,Mi,Ti){return((_t(Mi,Ti)*Oi+nn(Mi,Ti))*Oi+Wt(Mi))*Oi}function Un(Oi,Mi,Ti){return 3*_t(Mi,Ti)*Oi*Oi+2*nn(Mi,Ti)*Oi+Wt(Mi)}function Xn(Oi,Mi,Ti,Wr,zi){var er,Nr,Ds=0;do Nr=Mi+(Ti-Mi)/2,er=mn(Nr,Wr,zi)-Oi,er>0?Ti=Nr:Mi=Nr;while(Math.abs(er)>1e-7&&++Ds<10);return Nr}function ei(Oi,Mi,Ti,Wr){for(var zi=0;zi<4;++zi){var er=Un(Mi,Ti,Wr);if(er===0)return Mi;var Nr=mn(Mi,Ti,Wr)-Oi;Mi-=Nr/er}return Mi}function pn(Oi,Mi,Ti,Wr){if(!(0<=Oi&&Oi<=1&&0<=Ti&&Ti<=1))return;var zi=new Float32Array(Qe);if(Oi!==Mi||Ti!==Wr)for(var er=0;er<Qe;++er)zi[er]=mn(er*ut,Oi,Ti);function Nr(Ds){for(var ro=0,pi=1,Ir=Qe-1;pi!==Ir&&zi[pi]<=Ds;++pi)ro+=ut;--pi;var to=(Ds-zi[pi])/(zi[pi+1]-zi[pi]),os=ro+to*ut,ce=Un(os,Oi,Ti);return ce>=.001?ei(Ds,os,Oi,Ti):ce===0?os:Xn(Ds,ro,ro+ut,Oi,Ti)}return function(Ds){return Oi===Mi&&Ti===Wr||Ds===0||Ds===1?Ds:mn(Nr(Ds),Mi,Wr)}}return pn}(),te=function(){var Qe=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],ut={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],J],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(Un,Xn){return function(ei){return 1-J(Un,Xn)(1-ei)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(Un,Xn){return function(ei){return ei<.5?J(Un,Xn)(ei*2)/2:1-J(Un,Xn)(ei*-2+2)/2}}]},_t={linear:[.25,.25,.75,.75]};for(var nn in ut)for(var Wt=0,mn=ut[nn].length;Wt<mn;Wt++)_t["ease"+nn+Qe[Wt]]=ut[nn][Wt];return _t}();function ue(Qe,ut){if(R.fnc(Qe))return Qe;var _t=Qe.split("(")[0],nn=te[_t],Wt=P(Qe);switch(_t){case"spring":return Y(Qe,ut);case"cubicBezier":return m(k,Wt);case"steps":return m(j,Wt);default:return R.fnc(nn)?m(nn,Wt):m(k,nn)}}function xe(Qe){try{var ut=document.querySelectorAll(Qe);return ut}catch{return}}var Ee=[];function V(Qe,ut){for(var _t=Ee,nn=Qe.length,Wt=arguments.length>=2?arguments[1]:void 0,mn=0;mn<nn;mn++)if(mn in Qe){var Un=Qe[mn];ut.call(Wt,Un,mn,Qe)&&_t.push(Un)}return Ee=Qe,Ee.length=0,_t}function q(Qe,ut){ut||(ut=[]);for(var _t=0,nn=Qe.length;_t<nn;_t++){var Wt=Qe[_t];Array.isArray(Wt)?q(Wt,ut):ut.push(Wt)}return ut}function Q(Qe){return R.arr(Qe)?Qe:(R.str(Qe)&&(Qe=xe(Qe)||Qe),Qe instanceof NodeList||Qe instanceof HTMLCollection?[].slice.call(Qe):[Qe])}function F(Qe,ut){return Qe.some(function(_t){return _t===ut})}function z(Qe){var ut={};for(var _t in Qe)ut[_t]=Qe[_t];return ut}function X(Qe,ut){var _t=z(Qe);for(var nn in Qe)_t[nn]=ut.hasOwnProperty(nn)?ut[nn]:Qe[nn];return _t}function fe(Qe,ut){var _t=z(Qe);for(var nn in ut)_t[nn]=R.und(Qe[nn])?ut[nn]:Qe[nn];return _t}var Ae=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function Se(Qe){var ut=Ae.exec(Qe);return ut?"rgba("+ut[1]+",1)":Qe}var Be=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ge=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function ht(Qe){var ut=Qe.replace(Be,function(Un,Xn,ei,pn){return Xn+Xn+ei+ei+pn+pn}),_t=Ge.exec(ut),nn=parseInt(_t[1],16),Wt=parseInt(_t[2],16),mn=parseInt(_t[3],16);return"rgba("+nn+","+Wt+","+mn+",1)"}var xt=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,at=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function Gt(Qe){var ut=xt.exec(Qe)||at.exec(Qe),_t=parseInt(ut[1],10)/360,nn=parseInt(ut[2],10)/100,Wt=parseInt(ut[3],10)/100,mn=ut[4]||1;function Un(Ti,Wr,zi){return zi<0&&(zi+=1),zi>1&&(zi-=1),zi<.16666666666666666?Ti+(Wr-Ti)*6*zi:zi<.5?Wr:zi<.6666666666666666?Ti+(Wr-Ti)*(.6666666666666666-zi)*6:Ti}var Xn,ei,pn;if(nn==0)Xn=ei=pn=Wt;else{var Oi=Wt<.5?Wt*(1+nn):Wt+nn-Wt*nn,Mi=2*Wt-Oi;Xn=Un(Mi,Oi,_t+.3333333333333333),ei=Un(Mi,Oi,_t),pn=Un(Mi,Oi,_t-.3333333333333333)}return"rgba("+Xn*255+","+ei*255+","+pn*255+","+mn+")"}function wt(Qe){if(R.rgb(Qe))return Se(Qe);if(R.hex(Qe))return ht(Qe);if(R.hsl(Qe))return Gt(Qe)}var Yt=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function Mn(Qe){var ut=Yt.exec(Qe);if(ut)return ut[2]}function je(Qe){if(b(Qe,"translate")||Qe==="perspective")return"px";if(b(Qe,"rotate")||b(Qe,"skew"))return"deg"}function rt(Qe,ut){return R.fnc(Qe)?Qe(ut.target,ut.id,ut.total):Qe}function At(Qe,ut){return Qe.getAttribute(ut)}function Bt(Qe,ut,_t){var nn=Mn(ut);if(F([_t,"deg","rad","turn"],nn))return ut;var Wt=y.CSS[ut+_t];if(!R.und(Wt))return Wt;var mn=100,Un=document.createElement(Qe.tagName),Xn=Qe.parentNode&&Qe.parentNode!==document?Qe.parentNode:document.body;Xn.appendChild(Un),Un.style.position="absolute",Un.style.width=mn+_t;var ei=mn/Un.offsetWidth;Xn.removeChild(Un);var pn=ei*parseFloat(ut);return y.CSS[ut+_t]=pn,pn}function Pt(Qe,ut,_t){if(ut in Qe.style){var nn=ut.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Wt=Qe.style[ut]||getComputedStyle(Qe).getPropertyValue(nn)||"0";return _t?Bt(Qe,Wt,_t):Wt}}function qt(Qe,ut){if(R.dom(Qe)&&!R.inp(Qe)&&(At(Qe,ut)||R.svg(Qe)&&Qe[ut]))return"attribute";if(R.dom(Qe)&&F(v,ut))return"transform";if(R.dom(Qe)&&ut!=="transform"&&Pt(Qe,ut))return"css";if(Qe[ut]!=null)return"object"}var un=/(\w+)\(([^)]*)\)/g;function dn(Qe){if(!!R.dom(Qe)){for(var ut=Qe.style.transform||"",_t=new Map,nn;nn=un.exec(ut);)_t.set(nn[1],nn[2]);return _t}}function bn(Qe,ut,_t,nn){var Wt=b(ut,"scale")?1:0+je(ut),mn=dn(Qe).get(ut)||Wt;return _t&&(_t.transforms.list.set(ut,mn),_t.transforms.last=ut),nn?Bt(Qe,mn,nn):mn}function tn(Qe,ut,_t,nn){switch(qt(Qe,ut)){case"transform":return bn(Qe,ut,nn,_t);case"css":return Pt(Qe,ut,_t);case"attribute":return At(Qe,ut);default:return Qe[ut]||0}}var ri=/^(\*=|\+=|-=)/;function ni(Qe,ut){var _t=ri.exec(Qe);if(!_t)return Qe;var nn=Mn(Qe)||0,Wt=parseFloat(ut),mn=parseFloat(Qe.replace(_t[0],""));switch(_t[0][0]){case"+":return Wt+mn+nn;case"-":return Wt-mn+nn;case"*":return Wt*mn+nn}}var zt=/\s/g;function Ue(Qe,ut){if(R.col(Qe))return wt(Qe);var _t=Mn(Qe),nn=_t?Qe.substr(0,Qe.length-_t.length):Qe;return ut&&!zt.test(Qe)?nn+ut:nn}function Pe(Qe,ut){return Math.sqrt(Math.pow(ut.x-Qe.x,2)+Math.pow(ut.y-Qe.y,2))}function Ye(Qe){return Math.PI*2*At(Qe,"r")}function ze(Qe){return At(Qe,"width")*2+At(Qe,"height")*2}function He(Qe){return Pe({x:At(Qe,"x1"),y:At(Qe,"y1")},{x:At(Qe,"x2"),y:At(Qe,"y2")})}function et(Qe){for(var ut=Qe.points,_t=0,nn,Wt=0;Wt<ut.numberOfItems;Wt++){var mn=ut.getItem(Wt);Wt>0&&(_t+=Pe(nn,mn)),nn=mn}return _t}function Me(Qe){var ut=Qe.points;return et(Qe)+Pe(ut.getItem(ut.numberOfItems-1),ut.getItem(0))}function Te(Qe){if(Qe.getTotalLength)return Qe.getTotalLength();switch(Qe.tagName.toLowerCase()){case"circle":return Ye(Qe);case"rect":return ze(Qe);case"line":return He(Qe);case"polyline":return et(Qe);case"polygon":return Me(Qe)}}function Oe(Qe){var ut=Te(Qe);return Qe.setAttribute("stroke-dasharray",ut),ut}function Ze(Qe){for(var ut=Qe.parentNode;R.svg(ut)&&(ut=ut.parentNode,!!R.svg(ut.parentNode)););return ut}function ae(Qe,ut){var _t=ut||{},nn=_t.el||Ze(Qe),Wt=nn.getBoundingClientRect(),mn=At(nn,"viewBox"),Un=Wt.width,Xn=Wt.height,ei=_t.viewBox||(mn?mn.split(" "):[0,0,Un,Xn]);return{el:nn,viewBox:ei,x:ei[0]/1,y:ei[1]/1,w:Un/ei[2],h:Xn/ei[3]}}function ee(Qe,ut){var _t=R.str(Qe)?xe(Qe)[0]:Qe,nn=ut||100;return function(Wt){return{property:Wt,el:_t,svg:ae(_t),totalLength:Te(_t)*(nn/100)}}}function se(Qe,ut){function _t(Xn){Xn===void 0&&(Xn=0);var ei=ut+Xn>=1?ut+Xn:0;return Qe.el.getPointAtLength(ei)}var nn=ae(Qe.el,Qe.svg),Wt=_t(),mn=_t(-1),Un=_t(1);switch(Qe.property){case"x":return(Wt.x-nn.x)*nn.w;case"y":return(Wt.y-nn.y)*nn.h;case"angle":return Math.atan2(Un.y-mn.y,Un.x-mn.x)*180/Math.PI}}var Ie=/-?\d*\.?\d+/g;function We(Qe,ut){var _t=Ue(R.pth(Qe)?Qe.totalLength:Qe,ut)+"";return{original:_t,numbers:_t.match(Ie)?_t.match(Ie).map(Number):[0],strings:R.str(Qe)||ut?_t.split(Ie):[]}}function Ke(Qe){var ut=Qe?q(R.arr(Qe)?Qe.map(Q):Q(Qe)):[];return V(ut,function(_t,nn,Wt){return Wt.indexOf(_t)===nn})}function $e(Qe){var ut=Ke(Qe);return ut.map(function(_t,nn){return{target:_t,id:nn,total:ut.length,transforms:{list:dn(_t)}}})}var Vt=/^spring/;function $t(Qe,ut){var _t=z(ut);if(Vt.test(_t.easing)&&(_t.duration=Y(_t.easing)),R.arr(Qe)){var nn=Qe.length,Wt=nn===2&&!R.obj(Qe[0]);Wt?Qe={value:Qe}:R.fnc(ut.duration)||(_t.duration=ut.duration/nn)}var mn=R.arr(Qe)?Qe:[Qe];return mn.map(function(Un,Xn){var ei=R.obj(Un)&&!R.pth(Un)?Un:{value:Un};return R.und(ei.delay)&&(ei.delay=Xn?0:ut.delay),R.und(ei.endDelay)&&(ei.endDelay=Xn===mn.length-1?ut.endDelay:0),ei}).map(function(Un){return fe(Un,_t)})}function Xt(Qe){for(var ut=V(q(Qe.map(function(mn){return Object.keys(mn)})),function(mn){return R.key(mn)}).reduce(function(mn,Un){return mn.indexOf(Un)<0&&mn.push(Un),mn},[]),_t={},nn=function(mn){var Un=ut[mn];_t[Un]=Qe.map(function(Xn){var ei={};for(var pn in Xn)R.key(pn)?pn==Un&&(ei.value=Xn[pn]):ei[pn]=Xn[pn];return ei})},Wt=0;Wt<ut.length;Wt++)nn(Wt);return _t}function jt(Qe,ut){var _t=[],nn=ut.keyframes;nn&&(ut=fe(Xt(nn),ut));for(var Wt in ut)R.key(Wt)&&_t.push({name:Wt,tweens:$t(ut[Wt],Qe)});return _t}function on(Qe,ut){var _t={};for(var nn in Qe){var Wt=rt(Qe[nn],ut);R.arr(Wt)&&(Wt=Wt.map(function(mn){return rt(mn,ut)}),Wt.length===1&&(Wt=Wt[0])),_t[nn]=Wt}return _t.duration=parseFloat(_t.duration),_t.delay=parseFloat(_t.delay),_t}function In(Qe,ut){var _t;return Qe.tweens.map(function(nn){var Wt=on(nn,ut),mn=Wt.value,Un=R.arr(mn)?mn[1]:mn,Xn=Mn(Un),ei=tn(ut.target,Qe.name,Xn,ut),pn=_t?_t.to.original:ei,Oi=R.arr(mn)?mn[0]:pn,Mi=Mn(Oi)||Mn(ei),Ti=Xn||Mi;return R.und(Un)&&(Un=pn),Wt.from=We(Oi,Ti),Wt.to=We(ni(Un,Oi),Ti),Wt.start=_t?_t.end:0,Wt.end=Wt.start+Wt.delay+Wt.duration+Wt.endDelay,Wt.easing=ue(Wt.easing,Wt.duration),Wt.isPath=R.pth(mn),Wt.isColor=R.col(Wt.from.original),Wt.isColor&&(Wt.round=1),_t=Wt,Wt})}var di={css:function(Qe,ut,_t){return Qe.style[ut]=_t},attribute:function(Qe,ut,_t){return Qe.setAttribute(ut,_t)},object:function(Qe,ut,_t){return Qe[ut]=_t},transform:function(Qe,ut,_t,nn,Wt){if(nn.list.set(ut,_t),ut===nn.last||Wt){var mn="";nn.list.forEach(function(Un,Xn){mn+=Xn+"("+Un+") "}),Qe.style.transform=mn}}};function fi(Qe,ut){for(var _t=$e(Qe),nn=0,Wt=_t.length;nn<Wt;nn++){var mn=_t[nn];for(var Un in ut){var Xn=rt(ut[Un],mn),ei=mn.target,pn=Mn(Xn),Oi=tn(ei,Un,pn,mn),Mi=pn||Mn(Oi),Ti=ni(Ue(Xn,Mi),Oi),Wr=qt(ei,Un);di[Wr](ei,Un,Ti,mn.transforms,!0)}}}function Nn(Qe,ut){var _t=qt(Qe.target,ut.name);if(_t){var nn=In(ut,Qe),Wt=nn[nn.length-1];return{type:_t,property:ut.name,animatable:Qe,tweens:nn,duration:Wt.end,delay:nn[0].delay,endDelay:Wt.endDelay}}}function vn(Qe,ut){return V(q(Qe.map(function(_t){return ut.map(function(nn){return Nn(_t,nn)})})),function(_t){return!R.und(_t)})}function Ft(Qe,ut){var _t=Qe.length,nn=function(mn){return mn.timelineOffset?mn.timelineOffset:0},Wt={};return Wt.duration=_t?Math.max.apply(Math,Qe.map(function(mn){return nn(mn)+mn.duration})):ut.duration,Wt.delay=_t?Math.min.apply(Math,Qe.map(function(mn){return nn(mn)+mn.delay})):ut.delay,Wt.endDelay=_t?Wt.duration-Math.max.apply(Math,Qe.map(function(mn){return nn(mn)+mn.duration-mn.endDelay})):ut.endDelay,Wt}var yn=0;function Gn(Qe){var ut=X(g,Qe),_t=X(C,Qe),nn=jt(_t,Qe),Wt=$e(Qe.targets),mn=vn(Wt,nn),Un=Ft(mn,_t),Xn=yn;return yn++,fe(ut,{id:Xn,children:[],animatables:Wt,animations:mn,duration:Un.duration,delay:Un.delay,endDelay:Un.endDelay})}var Dn=[],bi=[],Pi,Zi=function(){function Qe(){Pi=requestAnimationFrame(ut)}function ut(_t){var nn=Dn.length;if(nn){for(var Wt=0;Wt<nn;){var mn=Dn[Wt];if(!mn.paused)mn.tick(_t);else{var Un=Dn.indexOf(mn);Un>-1&&(Dn.splice(Un,1),nn=Dn.length)}Wt++}Qe()}else Pi=cancelAnimationFrame(Pi)}return Qe}();function Lr(){if(document.hidden){for(var Qe=0,ut=Dn.length;Qe<ut;Qe++)activeInstance[Qe].pause();bi=Dn.slice(0),Dn=[]}else for(var _t=0,nn=bi.length;_t<nn;_t++)bi[_t].play()}document.addEventListener("visibilitychange",Lr);function Ki(Qe){Qe===void 0&&(Qe={});var ut=0,_t=0,nn=0,Wt,mn=0,Un=null;function Xn(){return window.Promise&&new Promise(function(pi){return Un=pi})}var ei=Xn(),pn=Gn(Qe);function Oi(){pn.reversed=!pn.reversed;for(var pi=0,Ir=Wt.length;pi<Ir;pi++)Wt[pi].reversed=pn.reversed}function Mi(pi){return pn.reversed?pn.duration-pi:pi}function Ti(){ut=0,_t=Mi(pn.currentTime)*(1/Ki.speed)}function Wr(pi,Ir){Ir&&Ir.seek(pi-Ir.timelineOffset)}function zi(pi){if(pn.reversePlayback)for(var to=mn;to--;)Wr(pi,Wt[to]);else for(var Ir=0;Ir<mn;Ir++)Wr(pi,Wt[Ir])}function er(pi){for(var Ir=0,to=pn.animations,os=to.length;Ir<os;){var ce=to[Ir],ge=ce.animatable,_e=ce.tweens,Le=_e.length-1,qe=_e[Le];Le&&(qe=V(_e,function(Ar){return pi<Ar.end})[0]||qe);for(var yt=E(pi-qe.start-qe.delay,0,qe.duration)/qe.duration,St=isNaN(yt)?1:qe.easing(yt),wn=qe.to.strings,xn=qe.round,Nt=[],an=qe.to.numbers.length,Pn=void 0,xi=0;xi<an;xi++){var Ui=void 0,Xi=qe.to.numbers[xi],fr=qe.from.numbers[xi]||0;qe.isPath?Ui=se(qe.value,St*Xi):Ui=fr+St*(Xi-fr),xn&&(qe.isColor&&xi>2||(Ui=Math.round(Ui*xn)/xn)),Nt.push(Ui)}var ur=wn.length;if(!ur)Pn=Nt[0];else{Pn=wn[0];for(var Vi=0;Vi<ur;Vi++){wn[Vi];var us=wn[Vi+1],Yr=Nt[Vi];isNaN(Yr)||(us?Pn+=Yr+us:Pn+=Yr+" ")}}di[ce.type](ge.target,ce.property,Pn,ge.transforms),ce.currentValue=Pn,Ir++}}function Nr(pi){pn[pi]&&!pn.passThrough&&pn[pi](pn)}function Ds(){pn.remaining&&pn.remaining!==!0&&pn.remaining--}function ro(pi){var Ir=pn.duration,to=pn.delay,os=Ir-pn.endDelay,ce=Mi(pi);pn.progress=E(ce/Ir*100,0,100),pn.reversePlayback=ce<pn.currentTime,Wt&&zi(ce),!pn.began&&pn.currentTime>0&&(pn.began=!0,Nr("begin"),Nr("loopBegin")),ce<=to&&pn.currentTime!==0&&er(0),(ce>=os&&pn.currentTime!==Ir||!Ir)&&er(Ir),ce>to&&ce<os?(pn.changeBegan||(pn.changeBegan=!0,pn.changeCompleted=!1,Nr("changeBegin")),Nr("change"),er(ce)):pn.changeBegan&&(pn.changeCompleted=!0,pn.changeBegan=!1,Nr("changeComplete")),pn.currentTime=E(ce,0,Ir),pn.began&&Nr("update"),pi>=Ir&&(_t=0,Ds(),pn.remaining?(ut=nn,Nr("loopComplete"),Nr("loopBegin"),pn.direction==="alternate"&&Oi()):(pn.paused=!0,pn.completed||(pn.completed=!0,Nr("loopComplete"),Nr("complete"),"Promise"in window&&(Un(),ei=Xn()))))}return pn.reset=function(){var pi=pn.direction;pn.passThrough=!1,pn.currentTime=0,pn.progress=0,pn.paused=!0,pn.began=!1,pn.changeBegan=!1,pn.completed=!1,pn.changeCompleted=!1,pn.reversePlayback=!1,pn.reversed=pi==="reverse",pn.remaining=pn.loop,Wt=pn.children,mn=Wt.length;for(var Ir=mn;Ir--;)pn.children[Ir].reset();(pn.reversed&&pn.loop!==!0||pi==="alternate"&&pn.loop===1)&&pn.remaining++,er(0)},pn.set=function(pi,Ir){return fi(pi,Ir),pn},pn.tick=function(pi){nn=pi,ut||(ut=nn),ro((nn+(_t-ut))*Ki.speed)},pn.seek=function(pi){ro(Mi(pi))},pn.pause=function(){pn.paused=!0,Ti()},pn.play=function(){!pn.paused||(pn.paused=!1,Dn.push(pn),Ti(),Pi||Zi())},pn.reverse=function(){Oi(),Ti()},pn.restart=function(){pn.reset(),pn.play()},pn.finished=ei,pn.reset(),pn.autoplay&&pn.play(),pn}function Gr(Qe,ut){for(var _t=ut.length;_t--;)F(Qe,ut[_t].animatable.target)&&ut.splice(_t,1)}function Dr(Qe){for(var ut=Ke(Qe),_t=Dn.length;_t--;){var nn=Dn[_t],Wt=nn.animations,mn=nn.children;Gr(ut,Wt);for(var Un=mn.length;Un--;){var Xn=mn[Un],ei=Xn.animations;Gr(ut,ei),!ei.length&&!Xn.children.length&&mn.splice(Un,1)}!Wt.length&&!mn.length&&nn.pause()}}function ar(Qe,ut){ut===void 0&&(ut={});var _t=ut.direction||"normal",nn=ut.easing?ue(ut.easing):null,Wt=ut.grid,mn=ut.axis,Un=ut.from||0,Xn=Un==="first",ei=Un==="center",pn=Un==="last",Oi=R.arr(Qe),Mi=parseFloat(Oi?Qe[0]:Qe),Ti=Oi?parseFloat(Qe[1]):0,Wr=Mn(Oi?Qe[1]:Qe)||0,zi=ut.start||0+(Oi?Mi:0),er=[],Nr=0;return function(Ds,ro,pi){if(Xn&&(Un=0),ei&&(Un=(pi-1)/2),pn&&(Un=pi-1),!er.length){for(var Ir=0;Ir<pi;Ir++){if(!Wt)er.push(Math.abs(Un-Ir));else{var to=ei?(Wt[0]-1)/2:Un%Wt[0],os=ei?(Wt[1]-1)/2:Math.floor(Un/Wt[0]),ce=Ir%Wt[0],ge=Math.floor(Ir/Wt[0]),_e=to-ce,Le=os-ge,qe=Math.sqrt(_e*_e+Le*Le);mn==="x"&&(qe=-_e),mn==="y"&&(qe=-Le),er.push(qe)}Nr=Math.max.apply(Math,er)}nn&&(er=er.map(function(St){return nn(St/Nr)*Nr})),_t==="reverse"&&(er=er.map(function(St){return mn?St<0?St*-1:-St:Math.abs(Nr-St)}))}var yt=Oi?(Ti-Mi)/Nr:Mi;return zi+yt*(Math.round(er[ro]*100)/100)+Wr}}function zr(Qe){Qe===void 0&&(Qe={});var ut=Ki(Qe);return ut.duration=0,ut.add=function(_t,nn){var Wt=Dn.indexOf(ut),mn=ut.children;Wt>-1&&Dn.splice(Wt,1);function Un(Ti){Ti.passThrough=!0}for(var Xn=0;Xn<mn.length;Xn++)Un(mn[Xn]);var ei=fe(_t,X(C,Qe));ei.targets=ei.targets||Qe.targets;var pn=ut.duration;ei.autoplay=!1,ei.direction=ut.direction,ei.timelineOffset=R.und(nn)?pn:ni(nn,pn),Un(ut),ut.seek(ei.timelineOffset);var Oi=Ki(ei);Un(Oi),mn.push(Oi);var Mi=Ft(mn,Qe);return ut.delay=Mi.delay,ut.endDelay=Mi.endDelay,ut.duration=Mi.duration,ut.seek(0),ut.reset(),ut.autoplay&&ut.play(),ut},ut}Ki.version="3.0.0",Ki.speed=1,Ki.running=Dn,Ki.remove=Dr,Ki.get=tn,Ki.set=fi,Ki.convertPx=Bt,Ki.path=ee,Ki.setDashoffset=Oe,Ki.stagger=ar,Ki.timeline=zr,Ki.easing=ue,Ki.penner=te,Ki.random=function(Qe,ut){return Math.floor(Math.random()*(ut-Qe+1))+Qe};const ys=Ki},"./node_modules/three-bmfont-text/index.js":(T,I,u)=>{var g=u("./node_modules/layout-bmfont-text/index.js");u("./node_modules/inherits/inherits_browser.js");var C=u("./node_modules/quad-indices/index.js"),v=u("./node_modules/three-buffer-vertex-data/index.js"),y=u("./node_modules/object-assign/index.js"),E=u("./node_modules/three-bmfont-text/lib/vertices.js"),b=u("./node_modules/three-bmfont-text/lib/utils.js");T.exports=function(_){return new m(_)};class m extends THREE.BufferGeometry{constructor(_){super(),typeof _=="string"&&(_={text:_}),this._opt=y({},_),_&&this.update(_)}update(_){if(typeof _=="string"&&(_={text:_}),_=y({},this._opt,_),!_.font)throw new TypeError("must specify a { font } in options");this.layout=g(_);var O=_.flipY!==!1,R=_.font,L=R.common.scaleW,P=R.common.scaleH,Y=this.layout.glyphs.filter(function(ue){var xe=ue.data;return xe.width*xe.height>0});this.visibleGlyphs=Y;var J=E.positions(Y),j=E.uvs(Y,L,P,O),k=C({clockwise:!0,type:"uint16",count:Y.length});if(v.index(this,k,1,"uint16"),v.attr(this,"position",J,2),v.attr(this,"uv",j,2),!_.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(_.multipage){var te=E.pages(Y);v.attr(this,"page",te,1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var _=this.attributes.position.array,O=this.attributes.position.itemSize;if(!_||!O||_.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}b.computeSphere(_,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var _=this.boundingBox,O=this.attributes.position.array,R=this.attributes.position.itemSize;if(!O||!R||O.length<2){_.makeEmpty();return}b.computeBox(O,_)}}},"./node_modules/three-bmfont-text/lib/utils.js":T=>{var I=2,u={min:[0,0],max:[0,0]};function g(C){var v=C.length/I;u.min[0]=C[0],u.min[1]=C[1],u.max[0]=C[0],u.max[1]=C[1];for(var y=0;y<v;y++){var E=C[y*I+0],b=C[y*I+1];u.min[0]=Math.min(E,u.min[0]),u.min[1]=Math.min(b,u.min[1]),u.max[0]=Math.max(E,u.max[0]),u.max[1]=Math.max(b,u.max[1])}}T.exports.computeBox=function(C,v){g(C),v.min.set(u.min[0],u.min[1],0),v.max.set(u.max[0],u.max[1],0)},T.exports.computeSphere=function(C,v){g(C);var y=u.min[0],E=u.min[1],b=u.max[0],m=u.max[1],w=b-y,_=m-E,O=Math.sqrt(w*w+_*_);v.center.set(y+w/2,E+_/2,0),v.radius=O/2}},"./node_modules/three-bmfont-text/lib/vertices.js":T=>{T.exports.pages=function(u){var g=new Float32Array(u.length*4*1),C=0;return u.forEach(function(v){var y=v.data.page||0;g[C++]=y,g[C++]=y,g[C++]=y,g[C++]=y}),g},T.exports.uvs=function(u,g,C,v){var y=new Float32Array(u.length*4*2),E=0;return u.forEach(function(b){var m=b.data,w=m.x+m.width,_=m.y+m.height,O=m.x/g,R=m.y/C,L=w/g,P=_/C;v&&(R=(C-m.y)/C,P=(C-_)/C),y[E++]=O,y[E++]=R,y[E++]=O,y[E++]=P,y[E++]=L,y[E++]=P,y[E++]=L,y[E++]=R}),y},T.exports.positions=function(u){var g=new Float32Array(u.length*4*2),C=0;return u.forEach(function(v){var y=v.data,E=v.position[0]+y.xoffset,b=v.position[1]+y.yoffset,m=y.width,w=y.height;g[C++]=E,g[C++]=b,g[C++]=E,g[C++]=b+w,g[C++]=E+m,g[C++]=b+w,g[C++]=E+m,g[C++]=b}),g}},"./node_modules/three-buffer-vertex-data/index.js":(T,I,u)=>{var g=u("./node_modules/flatten-vertex-data/index.js");T.exports.attr=v,T.exports.index=C;function C(E,b,m,w){typeof m!="number"&&(m=1),typeof w!="string"&&(w="uint16");var _=!E.index&&typeof E.setIndex!="function",O=_?E.getAttribute("index"):E.index,R=y(O,b,m,w);R&&(_?E.addAttribute("index",R):E.index=R)}function v(E,b,m,w,_){if(typeof w!="number"&&(w=3),typeof _!="string"&&(_="float32"),Array.isArray(m)&&Array.isArray(m[0])&&m[0].length!==w)throw new Error("Nested vertex array has unexpected size; expected "+w+" but found "+m[0].length);var O=E.getAttribute(b),R=y(O,m,w,_);E.setAttribute(b,R)}function y(E,b,m,w){return b=b||[],b=g(b,w),E=new THREE.BufferAttribute(b,m),E.itemSize=m,E.needsUpdate=!0,E}},"./node_modules/webvr-polyfill/build/webvr-polyfill.js":function(T,I,u){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(g,C){T.exports=C()})(this,function(){var g=typeof window<"u"?window:typeof u.g<"u"?u.g:typeof self<"u"?self:{};function C(J){return J&&J.__esModule&&Object.prototype.hasOwnProperty.call(J,"default")?J.default:J}function v(J,j){return j={exports:{}},J(j,j.exports),j.exports}var y=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},E=function(j,k){for(var te=0,ue=j.length;te<ue;te++)k[te]=j[te]},b=function(j,k){for(var te in k)k.hasOwnProperty(te)&&(j[te]=k[te]);return j},m=v(function(J,j){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(k,te){J.exports=te()})(g,function(){var k=function(ce,ge){if(!(ce instanceof ge))throw new TypeError("Cannot call a class as a function")},te=function(){function ce(ge,_e){for(var Le=0;Le<_e.length;Le++){var qe=_e[Le];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(ge,qe.key,qe)}}return function(ge,_e,Le){return _e&&ce(ge.prototype,_e),Le&&ce(ge,Le),ge}}(),ue=function(){function ce(ge,_e){var Le=[],qe=!0,yt=!1,St=void 0;try{for(var wn=ge[Symbol.iterator](),xn;!(qe=(xn=wn.next()).done)&&(Le.push(xn.value),!(_e&&Le.length===_e));qe=!0);}catch(Nt){yt=!0,St=Nt}finally{try{!qe&&wn.return&&wn.return()}finally{if(yt)throw St}}return Le}return function(ge,_e){if(Array.isArray(ge))return ge;if(Symbol.iterator in Object(ge))return ce(ge,_e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xe=.001,Ee=1,V=function(ge,_e){return"data:"+ge+","+encodeURIComponent(_e)},q=function(ge,_e,Le){return ge+(_e-ge)*Le},Q=function(){var ce=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return ce}}(),F=function(){var ce=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return ce}}(),z=function(){var ce=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return ce}}(),X=function(){var ce=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return ce}}(),fe=function(){var ce=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),ge=ce?parseInt(ce[1],10):null;return function(){return ge}}(),Ae=function(){var ce=!1;return ce=Q()&&z()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return ce}}(),Se=function(){var ce=!1;if(fe()===65){var ge=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(ge){var _e=ge[1].split("."),Le=ue(_e,4);Le[0],Le[1];var qe=Le[2],yt=Le[3];ce=parseInt(qe,10)===3325&&parseInt(yt,10)<148}}return function(){return ce}}(),Be=function(){var ce=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return ce}}(),Ge=function(){var ge=window.orientation==90||window.orientation==-90;return Be()?!ge:ge},ht=function(ge){return!(isNaN(ge)||ge<=xe||ge>Ee)},xt=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},at=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},Gt=function(ge){if(F())return!1;if(ge.requestFullscreen)ge.requestFullscreen();else if(ge.webkitRequestFullscreen)ge.webkitRequestFullscreen();else if(ge.mozRequestFullScreen)ge.mozRequestFullScreen();else if(ge.msRequestFullscreen)ge.msRequestFullscreen();else return!1;return!0},wt=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},Yt=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},Mn=function(ge,_e,Le,qe){var yt=ge.createShader(ge.VERTEX_SHADER);ge.shaderSource(yt,_e),ge.compileShader(yt);var St=ge.createShader(ge.FRAGMENT_SHADER);ge.shaderSource(St,Le),ge.compileShader(St);var wn=ge.createProgram();ge.attachShader(wn,yt),ge.attachShader(wn,St);for(var xn in qe)ge.bindAttribLocation(wn,qe[xn],xn);return ge.linkProgram(wn),ge.deleteShader(yt),ge.deleteShader(St),wn},je=function(ge,_e){for(var Le={},qe=ge.getProgramParameter(_e,ge.ACTIVE_UNIFORMS),yt="",St=0;St<qe;St++){var wn=ge.getActiveUniform(_e,St);yt=wn.name.replace("[0]",""),Le[yt]=ge.getUniformLocation(_e,yt)}return Le},rt=function(ge,_e,Le,qe,yt,St,wn){var xn=1/(_e-Le),Nt=1/(qe-yt),an=1/(St-wn);return ge[0]=-2*xn,ge[1]=0,ge[2]=0,ge[3]=0,ge[4]=0,ge[5]=-2*Nt,ge[6]=0,ge[7]=0,ge[8]=0,ge[9]=0,ge[10]=2*an,ge[11]=0,ge[12]=(_e+Le)*xn,ge[13]=(yt+qe)*Nt,ge[14]=(wn+St)*an,ge[15]=1,ge},At=function(){var ge=!1;return function(_e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(_e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(_e.substr(0,4)))&&(ge=!0)}(navigator.userAgent||navigator.vendor||window.opera),ge},Bt=function(ge,_e){for(var Le in _e)_e.hasOwnProperty(Le)&&(ge[Le]=_e[Le]);return ge},Pt=function(ge){if(Q()){var _e=ge.style.width,Le=ge.style.height;ge.style.width=parseInt(_e)+1+"px",ge.style.height=parseInt(Le)+"px",setTimeout(function(){ge.style.width=_e,ge.style.height=Le},100)}window.canvas=ge},qt=function(){var ce=Math.PI/180,ge=Math.PI*.25;function _e(Nt,an,Pn,xi){var Ui=Math.tan(an?an.upDegrees*ce:ge),Xi=Math.tan(an?an.downDegrees*ce:ge),fr=Math.tan(an?an.leftDegrees*ce:ge),ur=Math.tan(an?an.rightDegrees*ce:ge),Vi=2/(fr+ur),us=2/(Ui+Xi);return Nt[0]=Vi,Nt[1]=0,Nt[2]=0,Nt[3]=0,Nt[4]=0,Nt[5]=us,Nt[6]=0,Nt[7]=0,Nt[8]=-((fr-ur)*Vi*.5),Nt[9]=(Ui-Xi)*us*.5,Nt[10]=xi/(Pn-xi),Nt[11]=-1,Nt[12]=0,Nt[13]=0,Nt[14]=xi*Pn/(Pn-xi),Nt[15]=0,Nt}function Le(Nt,an,Pn){var xi=an[0],Ui=an[1],Xi=an[2],fr=an[3],ur=xi+xi,Vi=Ui+Ui,us=Xi+Xi,Yr=xi*ur,Ar=xi*Vi,Ts=xi*us,po=Ui*Vi,Vs=Ui*us,qr=Xi*us,Ps=fr*ur,Ls=fr*Vi,bo=fr*us;return Nt[0]=1-(po+qr),Nt[1]=Ar+bo,Nt[2]=Ts-Ls,Nt[3]=0,Nt[4]=Ar-bo,Nt[5]=1-(Yr+qr),Nt[6]=Vs+Ps,Nt[7]=0,Nt[8]=Ts+Ls,Nt[9]=Vs-Ps,Nt[10]=1-(Yr+po),Nt[11]=0,Nt[12]=Pn[0],Nt[13]=Pn[1],Nt[14]=Pn[2],Nt[15]=1,Nt}function qe(Nt,an,Pn){var xi=Pn[0],Ui=Pn[1],Xi=Pn[2],fr,ur,Vi,us,Yr,Ar,Ts,po,Vs,qr,Ps,Ls;return an===Nt?(Nt[12]=an[0]*xi+an[4]*Ui+an[8]*Xi+an[12],Nt[13]=an[1]*xi+an[5]*Ui+an[9]*Xi+an[13],Nt[14]=an[2]*xi+an[6]*Ui+an[10]*Xi+an[14],Nt[15]=an[3]*xi+an[7]*Ui+an[11]*Xi+an[15]):(fr=an[0],ur=an[1],Vi=an[2],us=an[3],Yr=an[4],Ar=an[5],Ts=an[6],po=an[7],Vs=an[8],qr=an[9],Ps=an[10],Ls=an[11],Nt[0]=fr,Nt[1]=ur,Nt[2]=Vi,Nt[3]=us,Nt[4]=Yr,Nt[5]=Ar,Nt[6]=Ts,Nt[7]=po,Nt[8]=Vs,Nt[9]=qr,Nt[10]=Ps,Nt[11]=Ls,Nt[12]=fr*xi+Yr*Ui+Vs*Xi+an[12],Nt[13]=ur*xi+Ar*Ui+qr*Xi+an[13],Nt[14]=Vi*xi+Ts*Ui+Ps*Xi+an[14],Nt[15]=us*xi+po*Ui+Ls*Xi+an[15]),Nt}function yt(Nt,an){var Pn=an[0],xi=an[1],Ui=an[2],Xi=an[3],fr=an[4],ur=an[5],Vi=an[6],us=an[7],Yr=an[8],Ar=an[9],Ts=an[10],po=an[11],Vs=an[12],qr=an[13],Ps=an[14],Ls=an[15],bo=Pn*ur-xi*fr,Va=Pn*Vi-Ui*fr,Qs=Pn*us-Xi*fr,il=xi*Vi-Ui*ur,Ll=xi*us-Xi*ur,Ia=Ui*us-Xi*Vi,Ra=Yr*qr-Ar*Vs,Ba=Yr*Ps-Ts*Vs,Qa=Yr*Ls-po*Vs,rl=Ar*Ps-Ts*qr,ec=Ar*Ls-po*qr,Dl=Ts*Ls-po*Ps,qs=bo*Dl-Va*ec+Qs*rl+il*Qa-Ll*Ba+Ia*Ra;return qs?(qs=1/qs,Nt[0]=(ur*Dl-Vi*ec+us*rl)*qs,Nt[1]=(Ui*ec-xi*Dl-Xi*rl)*qs,Nt[2]=(qr*Ia-Ps*Ll+Ls*il)*qs,Nt[3]=(Ts*Ll-Ar*Ia-po*il)*qs,Nt[4]=(Vi*Qa-fr*Dl-us*Ba)*qs,Nt[5]=(Pn*Dl-Ui*Qa+Xi*Ba)*qs,Nt[6]=(Ps*Qs-Vs*Ia-Ls*Va)*qs,Nt[7]=(Yr*Ia-Ts*Qs+po*Va)*qs,Nt[8]=(fr*ec-ur*Qa+us*Ra)*qs,Nt[9]=(xi*Qa-Pn*ec-Xi*Ra)*qs,Nt[10]=(Vs*Ll-qr*Qs+Ls*bo)*qs,Nt[11]=(Ar*Qs-Yr*Ll-po*bo)*qs,Nt[12]=(ur*Ba-fr*rl-Vi*Ra)*qs,Nt[13]=(Pn*rl-xi*Ba+Ui*Ra)*qs,Nt[14]=(qr*Va-Vs*il-Ps*bo)*qs,Nt[15]=(Yr*il-Ar*Va+Ts*bo)*qs,Nt):null}var St=new Float32Array([0,0,0,1]),wn=new Float32Array([0,0,0]);function xn(Nt,an,Pn,xi,Ui,Xi){_e(Nt,xi||null,Xi.depthNear,Xi.depthFar);var fr=Pn.orientation||St,ur=Pn.position||wn;Le(an,fr,ur),Ui&&qe(an,an,Ui),yt(an,an)}return function(Nt,an,Pn){return!Nt||!an?!1:(Nt.pose=an,Nt.timestamp=an.timestamp,xn(Nt.leftProjectionMatrix,Nt.leftViewMatrix,an,Pn._getFieldOfView("left"),Pn._getEyeOffset("left"),Pn),xn(Nt.rightProjectionMatrix,Nt.rightViewMatrix,an,Pn._getFieldOfView("right"),Pn._getEyeOffset("right"),Pn),!0)}}(),un=function(){var ge=window.self!==window.top,_e=dn(document.referrer),Le=dn(window.location.href);return ge&&_e!==Le},dn=function(ge){var _e,Le=ge.indexOf("://");Le!==-1?_e=Le+3:_e=0;var qe=ge.indexOf("/",_e);return qe===-1&&(qe=ge.length),ge.substring(0,qe)},bn=function(ge){if(ge.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var _e=2*Math.acos(ge.w);return _e},tn=function(){var ce={};return function(ge,_e){ce[ge]===void 0&&(console.warn("webvr-polyfill: "+_e),ce[ge]=!0)}}(),ri=function(ge,_e){var Le=_e?"Please use "+_e+" instead.":"";tn(ge,ge+" has been deprecated. This may not work on native WebVR displays. "+Le)};function ni(ce,ge,_e){if(!ge){_e(ce);return}for(var Le=[],qe=null,yt=0;yt<ge.length;++yt){var St=ge[yt];switch(St){case ce.TEXTURE_BINDING_2D:case ce.TEXTURE_BINDING_CUBE_MAP:var wn=ge[++yt];if(wn<ce.TEXTURE0||wn>ce.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),Le.push(null,null);break}qe||(qe=ce.getParameter(ce.ACTIVE_TEXTURE)),ce.activeTexture(wn),Le.push(ce.getParameter(St),null);break;case ce.ACTIVE_TEXTURE:qe=ce.getParameter(ce.ACTIVE_TEXTURE),Le.push(null);break;default:Le.push(ce.getParameter(St));break}}_e(ce);for(var yt=0;yt<ge.length;++yt){var St=ge[yt],xn=Le[yt];switch(St){case ce.ACTIVE_TEXTURE:break;case ce.ARRAY_BUFFER_BINDING:ce.bindBuffer(ce.ARRAY_BUFFER,xn);break;case ce.COLOR_CLEAR_VALUE:ce.clearColor(xn[0],xn[1],xn[2],xn[3]);break;case ce.COLOR_WRITEMASK:ce.colorMask(xn[0],xn[1],xn[2],xn[3]);break;case ce.CURRENT_PROGRAM:ce.useProgram(xn);break;case ce.ELEMENT_ARRAY_BUFFER_BINDING:ce.bindBuffer(ce.ELEMENT_ARRAY_BUFFER,xn);break;case ce.FRAMEBUFFER_BINDING:ce.bindFramebuffer(ce.FRAMEBUFFER,xn);break;case ce.RENDERBUFFER_BINDING:ce.bindRenderbuffer(ce.RENDERBUFFER,xn);break;case ce.TEXTURE_BINDING_2D:var wn=ge[++yt];if(wn<ce.TEXTURE0||wn>ce.TEXTURE31)break;ce.activeTexture(wn),ce.bindTexture(ce.TEXTURE_2D,xn);break;case ce.TEXTURE_BINDING_CUBE_MAP:var wn=ge[++yt];if(wn<ce.TEXTURE0||wn>ce.TEXTURE31)break;ce.activeTexture(wn),ce.bindTexture(ce.TEXTURE_CUBE_MAP,xn);break;case ce.VIEWPORT:ce.viewport(xn[0],xn[1],xn[2],xn[3]);break;case ce.BLEND:case ce.CULL_FACE:case ce.DEPTH_TEST:case ce.SCISSOR_TEST:case ce.STENCIL_TEST:xn?ce.enable(St):ce.disable(St);break;default:console.log("No GL restore behavior for 0x"+St.toString(16));break}qe&&ce.activeTexture(qe)}}var zt=ni,Ue=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),Pe=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function Ye(ce,ge,_e,Le){this.gl=ce,this.cardboardUI=ge,this.bufferScale=_e,this.dirtySubmitFrameBindings=Le,this.ctxAttribs=ce.getContextAttributes(),this.instanceExt=ce.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=ce.drawingBufferWidth,this.bufferHeight=ce.drawingBufferHeight,this.realBindFramebuffer=ce.bindFramebuffer,this.realEnable=ce.enable,this.realDisable=ce.disable,this.realColorMask=ce.colorMask,this.realClearColor=ce.clearColor,this.realViewport=ce.viewport,Q()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(ce.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(ce.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=Mn(ce,Ue,Pe,this.attribs),this.uniforms=je(ce,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=ce.createBuffer(),this.indexBuffer=ce.createBuffer(),this.indexCount=0,this.renderTarget=ce.createTexture(),this.framebuffer=ce.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=ce.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=ce.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=ce.createRenderbuffer()),this.patch(),this.onResize()}Ye.prototype.destroy=function(){var ce=this.gl;this.unpatch(),ce.deleteProgram(this.program),ce.deleteBuffer(this.vertexBuffer),ce.deleteBuffer(this.indexBuffer),ce.deleteTexture(this.renderTarget),ce.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&ce.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&ce.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&ce.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Ye.prototype.onResize=function(){var ce=this.gl,ge=this,_e=[ce.RENDERBUFFER_BINDING,ce.TEXTURE_BINDING_2D,ce.TEXTURE0];zt(ce,_e,function(Le){ge.realBindFramebuffer.call(Le,Le.FRAMEBUFFER,null),ge.scissorTest&&ge.realDisable.call(Le,Le.SCISSOR_TEST),ge.realColorMask.call(Le,!0,!0,!0,!0),ge.realViewport.call(Le,0,0,Le.drawingBufferWidth,Le.drawingBufferHeight),ge.realClearColor.call(Le,0,0,0,1),Le.clear(Le.COLOR_BUFFER_BIT),ge.realBindFramebuffer.call(Le,Le.FRAMEBUFFER,ge.framebuffer),Le.bindTexture(Le.TEXTURE_2D,ge.renderTarget),Le.texImage2D(Le.TEXTURE_2D,0,ge.ctxAttribs.alpha?Le.RGBA:Le.RGB,ge.bufferWidth,ge.bufferHeight,0,ge.ctxAttribs.alpha?Le.RGBA:Le.RGB,Le.UNSIGNED_BYTE,null),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MAG_FILTER,Le.LINEAR),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MIN_FILTER,Le.LINEAR),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_S,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_T,Le.CLAMP_TO_EDGE),Le.framebufferTexture2D(Le.FRAMEBUFFER,Le.COLOR_ATTACHMENT0,Le.TEXTURE_2D,ge.renderTarget,0),ge.ctxAttribs.depth&&ge.ctxAttribs.stencil?(Le.bindRenderbuffer(Le.RENDERBUFFER,ge.depthStencilBuffer),Le.renderbufferStorage(Le.RENDERBUFFER,Le.DEPTH_STENCIL,ge.bufferWidth,ge.bufferHeight),Le.framebufferRenderbuffer(Le.FRAMEBUFFER,Le.DEPTH_STENCIL_ATTACHMENT,Le.RENDERBUFFER,ge.depthStencilBuffer)):ge.ctxAttribs.depth?(Le.bindRenderbuffer(Le.RENDERBUFFER,ge.depthBuffer),Le.renderbufferStorage(Le.RENDERBUFFER,Le.DEPTH_COMPONENT16,ge.bufferWidth,ge.bufferHeight),Le.framebufferRenderbuffer(Le.FRAMEBUFFER,Le.DEPTH_ATTACHMENT,Le.RENDERBUFFER,ge.depthBuffer)):ge.ctxAttribs.stencil&&(Le.bindRenderbuffer(Le.RENDERBUFFER,ge.stencilBuffer),Le.renderbufferStorage(Le.RENDERBUFFER,Le.STENCIL_INDEX8,ge.bufferWidth,ge.bufferHeight),Le.framebufferRenderbuffer(Le.FRAMEBUFFER,Le.STENCIL_ATTACHMENT,Le.RENDERBUFFER,ge.stencilBuffer)),!Le.checkFramebufferStatus(Le.FRAMEBUFFER)===Le.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),ge.realBindFramebuffer.call(Le,Le.FRAMEBUFFER,ge.lastBoundFramebuffer),ge.scissorTest&&ge.realEnable.call(Le,Le.SCISSOR_TEST),ge.realColorMask.apply(Le,ge.colorMask),ge.realViewport.apply(Le,ge.viewport),ge.realClearColor.apply(Le,ge.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},Ye.prototype.patch=function(){if(!this.isPatched){var ce=this,ge=this.gl.canvas,_e=this.gl;Q()||(ge.width=xt()*this.bufferScale,ge.height=at()*this.bufferScale,Object.defineProperty(ge,"width",{configurable:!0,enumerable:!0,get:function(){return ce.bufferWidth},set:function(qe){ce.bufferWidth=qe,ce.realCanvasWidth.set.call(ge,qe),ce.onResize()}}),Object.defineProperty(ge,"height",{configurable:!0,enumerable:!0,get:function(){return ce.bufferHeight},set:function(qe){ce.bufferHeight=qe,ce.realCanvasHeight.set.call(ge,qe),ce.onResize()}})),this.lastBoundFramebuffer=_e.getParameter(_e.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(_e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(Le,qe){ce.lastBoundFramebuffer=qe||ce.framebuffer,ce.realBindFramebuffer.call(_e,Le,ce.lastBoundFramebuffer)},this.cullFace=_e.getParameter(_e.CULL_FACE),this.depthTest=_e.getParameter(_e.DEPTH_TEST),this.blend=_e.getParameter(_e.BLEND),this.scissorTest=_e.getParameter(_e.SCISSOR_TEST),this.stencilTest=_e.getParameter(_e.STENCIL_TEST),_e.enable=function(Le){switch(Le){case _e.CULL_FACE:ce.cullFace=!0;break;case _e.DEPTH_TEST:ce.depthTest=!0;break;case _e.BLEND:ce.blend=!0;break;case _e.SCISSOR_TEST:ce.scissorTest=!0;break;case _e.STENCIL_TEST:ce.stencilTest=!0;break}ce.realEnable.call(_e,Le)},_e.disable=function(Le){switch(Le){case _e.CULL_FACE:ce.cullFace=!1;break;case _e.DEPTH_TEST:ce.depthTest=!1;break;case _e.BLEND:ce.blend=!1;break;case _e.SCISSOR_TEST:ce.scissorTest=!1;break;case _e.STENCIL_TEST:ce.stencilTest=!1;break}ce.realDisable.call(_e,Le)},this.colorMask=_e.getParameter(_e.COLOR_WRITEMASK),_e.colorMask=function(Le,qe,yt,St){ce.colorMask[0]=Le,ce.colorMask[1]=qe,ce.colorMask[2]=yt,ce.colorMask[3]=St,ce.realColorMask.call(_e,Le,qe,yt,St)},this.clearColor=_e.getParameter(_e.COLOR_CLEAR_VALUE),_e.clearColor=function(Le,qe,yt,St){ce.clearColor[0]=Le,ce.clearColor[1]=qe,ce.clearColor[2]=yt,ce.clearColor[3]=St,ce.realClearColor.call(_e,Le,qe,yt,St)},this.viewport=_e.getParameter(_e.VIEWPORT),_e.viewport=function(Le,qe,yt,St){ce.viewport[0]=Le,ce.viewport[1]=qe,ce.viewport[2]=yt,ce.viewport[3]=St,ce.realViewport.call(_e,Le,qe,yt,St)},this.isPatched=!0,Pt(ge)}},Ye.prototype.unpatch=function(){if(!!this.isPatched){var ce=this.gl,ge=this.gl.canvas;Q()||(Object.defineProperty(ge,"width",this.realCanvasWidth),Object.defineProperty(ge,"height",this.realCanvasHeight)),ge.width=this.bufferWidth,ge.height=this.bufferHeight,ce.bindFramebuffer=this.realBindFramebuffer,ce.enable=this.realEnable,ce.disable=this.realDisable,ce.colorMask=this.realColorMask,ce.clearColor=this.realClearColor,ce.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&ce.bindFramebuffer(ce.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){Pt(ge)},1)}},Ye.prototype.setTextureBounds=function(ce,ge){ce||(ce=[0,0,.5,1]),ge||(ge=[.5,0,.5,1]),this.viewportOffsetScale[0]=ce[0],this.viewportOffsetScale[1]=ce[1],this.viewportOffsetScale[2]=ce[2],this.viewportOffsetScale[3]=ce[3],this.viewportOffsetScale[4]=ge[0],this.viewportOffsetScale[5]=ge[1],this.viewportOffsetScale[6]=ge[2],this.viewportOffsetScale[7]=ge[3]},Ye.prototype.submitFrame=function(){var ce=this.gl,ge=this,_e=[];if(this.dirtySubmitFrameBindings||_e.push(ce.CURRENT_PROGRAM,ce.ARRAY_BUFFER_BINDING,ce.ELEMENT_ARRAY_BUFFER_BINDING,ce.TEXTURE_BINDING_2D,ce.TEXTURE0),zt(ce,_e,function(qe){ge.realBindFramebuffer.call(qe,qe.FRAMEBUFFER,null);var yt=0,St=0;ge.instanceExt&&(yt=qe.getVertexAttrib(ge.attribs.position,ge.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),St=qe.getVertexAttrib(ge.attribs.texCoord,ge.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),ge.cullFace&&ge.realDisable.call(qe,qe.CULL_FACE),ge.depthTest&&ge.realDisable.call(qe,qe.DEPTH_TEST),ge.blend&&ge.realDisable.call(qe,qe.BLEND),ge.scissorTest&&ge.realDisable.call(qe,qe.SCISSOR_TEST),ge.stencilTest&&ge.realDisable.call(qe,qe.STENCIL_TEST),ge.realColorMask.call(qe,!0,!0,!0,!0),ge.realViewport.call(qe,0,0,qe.drawingBufferWidth,qe.drawingBufferHeight),(ge.ctxAttribs.alpha||Q())&&(ge.realClearColor.call(qe,0,0,0,1),qe.clear(qe.COLOR_BUFFER_BIT)),qe.useProgram(ge.program),qe.bindBuffer(qe.ELEMENT_ARRAY_BUFFER,ge.indexBuffer),qe.bindBuffer(qe.ARRAY_BUFFER,ge.vertexBuffer),qe.enableVertexAttribArray(ge.attribs.position),qe.enableVertexAttribArray(ge.attribs.texCoord),qe.vertexAttribPointer(ge.attribs.position,2,qe.FLOAT,!1,20,0),qe.vertexAttribPointer(ge.attribs.texCoord,3,qe.FLOAT,!1,20,8),ge.instanceExt&&(yt!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.position,0),St!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.texCoord,0)),qe.activeTexture(qe.TEXTURE0),qe.uniform1i(ge.uniforms.diffuse,0),qe.bindTexture(qe.TEXTURE_2D,ge.renderTarget),qe.uniform4fv(ge.uniforms.viewportOffsetScale,ge.viewportOffsetScale),qe.drawElements(qe.TRIANGLES,ge.indexCount,qe.UNSIGNED_SHORT,0),ge.cardboardUI&&ge.cardboardUI.renderNoState(),ge.realBindFramebuffer.call(ge.gl,qe.FRAMEBUFFER,ge.framebuffer),ge.ctxAttribs.preserveDrawingBuffer||(ge.realClearColor.call(qe,0,0,0,0),qe.clear(qe.COLOR_BUFFER_BIT)),ge.dirtySubmitFrameBindings||ge.realBindFramebuffer.call(qe,qe.FRAMEBUFFER,ge.lastBoundFramebuffer),ge.cullFace&&ge.realEnable.call(qe,qe.CULL_FACE),ge.depthTest&&ge.realEnable.call(qe,qe.DEPTH_TEST),ge.blend&&ge.realEnable.call(qe,qe.BLEND),ge.scissorTest&&ge.realEnable.call(qe,qe.SCISSOR_TEST),ge.stencilTest&&ge.realEnable.call(qe,qe.STENCIL_TEST),ge.realColorMask.apply(qe,ge.colorMask),ge.realViewport.apply(qe,ge.viewport),(ge.ctxAttribs.alpha||!ge.ctxAttribs.preserveDrawingBuffer)&&ge.realClearColor.apply(qe,ge.clearColor),ge.instanceExt&&(yt!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.position,yt),St!=0&&ge.instanceExt.vertexAttribDivisorANGLE(ge.attribs.texCoord,St))}),Q()){var Le=ce.canvas;(Le.width!=ge.bufferWidth||Le.height!=ge.bufferHeight)&&(ge.bufferWidth=Le.width,ge.bufferHeight=Le.height,ge.onResize())}},Ye.prototype.updateDeviceInfo=function(ce){var ge=this.gl,_e=this,Le=[ge.ARRAY_BUFFER_BINDING,ge.ELEMENT_ARRAY_BUFFER_BINDING];zt(ge,Le,function(qe){var yt=_e.computeMeshVertices_(_e.meshWidth,_e.meshHeight,ce);if(qe.bindBuffer(qe.ARRAY_BUFFER,_e.vertexBuffer),qe.bufferData(qe.ARRAY_BUFFER,yt,qe.STATIC_DRAW),!_e.indexCount){var St=_e.computeMeshIndices_(_e.meshWidth,_e.meshHeight);qe.bindBuffer(qe.ELEMENT_ARRAY_BUFFER,_e.indexBuffer),qe.bufferData(qe.ELEMENT_ARRAY_BUFFER,St,qe.STATIC_DRAW),_e.indexCount=St.length}})},Ye.prototype.computeMeshVertices_=function(ce,ge,_e){for(var Le=new Float32Array(2*ce*ge*5),qe=_e.getLeftEyeVisibleTanAngles(),yt=_e.getLeftEyeNoLensTanAngles(),St=_e.getLeftEyeVisibleScreenRect(yt),wn=0,xn=0;xn<2;xn++){for(var Nt=0;Nt<ge;Nt++)for(var an=0;an<ce;an++,wn++){var Pn=an/(ce-1),xi=Nt/(ge-1),Ui=Pn,Xi=xi,fr=q(qe[0],qe[2],Pn),ur=q(qe[3],qe[1],xi),Vi=Math.sqrt(fr*fr+ur*ur),us=_e.distortion.distortInverse(Vi),Yr=fr*us/Vi,Ar=ur*us/Vi;Pn=(Yr-yt[0])/(yt[2]-yt[0]),xi=(Ar-yt[3])/(yt[1]-yt[3]),Pn=(St.x+Pn*St.width-.5)*2,xi=(St.y+xi*St.height-.5)*2,Le[wn*5+0]=Pn,Le[wn*5+1]=xi,Le[wn*5+2]=Ui,Le[wn*5+3]=Xi,Le[wn*5+4]=xn}var Ts=qe[2]-qe[0];qe[0]=-(Ts+qe[0]),qe[2]=Ts-qe[2],Ts=yt[2]-yt[0],yt[0]=-(Ts+yt[0]),yt[2]=Ts-yt[2],St.x=1-(St.x+St.width)}return Le},Ye.prototype.computeMeshIndices_=function(ce,ge){for(var _e=new Uint16Array(2*(ce-1)*(ge-1)*6),Le=ce/2,qe=ge/2,yt=0,St=0,wn=0;wn<2;wn++)for(var xn=0;xn<ge;xn++)for(var Nt=0;Nt<ce;Nt++,yt++)Nt==0||xn==0||(Nt<=Le==xn<=qe?(_e[St++]=yt,_e[St++]=yt-ce-1,_e[St++]=yt-ce,_e[St++]=yt-ce-1,_e[St++]=yt,_e[St++]=yt-1):(_e[St++]=yt-1,_e[St++]=yt-ce,_e[St++]=yt,_e[St++]=yt-ce,_e[St++]=yt-1,_e[St++]=yt-ce-1));return _e},Ye.prototype.getOwnPropertyDescriptor_=function(ce,ge){var _e=Object.getOwnPropertyDescriptor(ce,ge);return(_e.get===void 0||_e.set===void 0)&&(_e.configurable=!0,_e.enumerable=!0,_e.get=function(){return this.getAttribute(ge)},_e.set=function(Le){this.setAttribute(ge,Le)}),_e};var ze=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),He=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),et=Math.PI/180,Me=60,Te=12,Oe=20,Ze=1,ae=.75,ee=.3125,se=4,Ie=28,We=1.5;function Ke(ce){this.gl=ce,this.attribs={position:0},this.program=Mn(ce,ze,He,this.attribs),this.uniforms=je(ce,this.program),this.vertexBuffer=ce.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}Ke.prototype.destroy=function(){var ce=this.gl;this.listener&&ce.canvas.removeEventListener("click",this.listener,!1),ce.deleteProgram(this.program),ce.deleteBuffer(this.vertexBuffer)},Ke.prototype.listen=function(ce,ge){var _e=this.gl.canvas;this.listener=function(Le){var qe=_e.clientWidth/2,yt=Ie*We;Le.clientX>qe-yt&&Le.clientX<qe+yt&&Le.clientY>_e.clientHeight-yt?ce(Le):Le.clientX<yt&&Le.clientY<yt&&ge(Le)},_e.addEventListener("click",this.listener,!1)},Ke.prototype.onResize=function(){var ce=this.gl,ge=this,_e=[ce.ARRAY_BUFFER_BINDING];zt(ce,_e,function(Le){var qe=[],yt=Le.drawingBufferWidth/2,St=Math.max(screen.width,screen.height)*window.devicePixelRatio,wn=Le.drawingBufferWidth/St,xn=wn*window.devicePixelRatio,Nt=se*xn/2,an=Ie*We*xn,Pn=Ie*xn/2,xi=(Ie*We-Ie)*xn;qe.push(yt-Nt,an),qe.push(yt-Nt,Le.drawingBufferHeight),qe.push(yt+Nt,an),qe.push(yt+Nt,Le.drawingBufferHeight),ge.gearOffset=qe.length/2;function Ui(us,Yr){var Ar=(90-us)*et,Ts=Math.cos(Ar),po=Math.sin(Ar);qe.push(ee*Ts*Pn+yt,ee*po*Pn+Pn),qe.push(Yr*Ts*Pn+yt,Yr*po*Pn+Pn)}for(var Xi=0;Xi<=6;Xi++){var fr=Xi*Me;Ui(fr,Ze),Ui(fr+Te,Ze),Ui(fr+Oe,ae),Ui(fr+(Me-Oe),ae),Ui(fr+(Me-Te),Ze)}ge.gearVertexCount=qe.length/2-ge.gearOffset,ge.arrowOffset=qe.length/2;function ur(us,Yr){qe.push(xi+us,Le.drawingBufferHeight-xi-Yr)}var Vi=Nt/Math.sin(45*et);ur(0,Pn),ur(Pn,0),ur(Pn+Vi,Vi),ur(Vi,Pn+Vi),ur(Vi,Pn-Vi),ur(0,Pn),ur(Pn,Pn*2),ur(Pn+Vi,Pn*2-Vi),ur(Vi,Pn-Vi),ur(0,Pn),ur(Vi,Pn-Nt),ur(Ie*xn,Pn-Nt),ur(Vi,Pn+Nt),ur(Ie*xn,Pn+Nt),ge.arrowVertexCount=qe.length/2-ge.arrowOffset,Le.bindBuffer(Le.ARRAY_BUFFER,ge.vertexBuffer),Le.bufferData(Le.ARRAY_BUFFER,new Float32Array(qe),Le.STATIC_DRAW)})},Ke.prototype.render=function(){var ce=this.gl,ge=this,_e=[ce.CULL_FACE,ce.DEPTH_TEST,ce.BLEND,ce.SCISSOR_TEST,ce.STENCIL_TEST,ce.COLOR_WRITEMASK,ce.VIEWPORT,ce.CURRENT_PROGRAM,ce.ARRAY_BUFFER_BINDING];zt(ce,_e,function(Le){Le.disable(Le.CULL_FACE),Le.disable(Le.DEPTH_TEST),Le.disable(Le.BLEND),Le.disable(Le.SCISSOR_TEST),Le.disable(Le.STENCIL_TEST),Le.colorMask(!0,!0,!0,!0),Le.viewport(0,0,Le.drawingBufferWidth,Le.drawingBufferHeight),ge.renderNoState()})},Ke.prototype.renderNoState=function(){var ce=this.gl;ce.useProgram(this.program),ce.bindBuffer(ce.ARRAY_BUFFER,this.vertexBuffer),ce.enableVertexAttribArray(this.attribs.position),ce.vertexAttribPointer(this.attribs.position,2,ce.FLOAT,!1,8,0),ce.uniform4f(this.uniforms.color,1,1,1,1),rt(this.projMat,0,ce.drawingBufferWidth,0,ce.drawingBufferHeight,.1,1024),ce.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),ce.drawArrays(ce.TRIANGLE_STRIP,0,4),ce.drawArrays(ce.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),ce.drawArrays(ce.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function $e(ce){this.coefficients=ce}$e.prototype.distortInverse=function(ce){for(var ge=0,_e=1,Le=ce-this.distort(ge);Math.abs(_e-ge)>1e-4;){var qe=ce-this.distort(_e),yt=_e-qe*((_e-ge)/(qe-Le));ge=_e,_e=yt,Le=qe}return _e},$e.prototype.distort=function(ce){for(var ge=ce*ce,_e=0,Le=0;Le<this.coefficients.length;Le++)_e=ge*(_e+this.coefficients[Le]);return(_e+1)*ce};var Vt=Math.PI/180,$t=180/Math.PI,Xt=function(ge,_e,Le){this.x=ge||0,this.y=_e||0,this.z=Le||0};Xt.prototype={constructor:Xt,set:function(ge,_e,Le){return this.x=ge,this.y=_e,this.z=Le,this},copy:function(ge){return this.x=ge.x,this.y=ge.y,this.z=ge.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var ge=this.length();if(ge!==0){var _e=1/ge;this.multiplyScalar(_e)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(ge){this.x*=ge,this.y*=ge,this.z*=ge},applyQuaternion:function(ge){var _e=this.x,Le=this.y,qe=this.z,yt=ge.x,St=ge.y,wn=ge.z,xn=ge.w,Nt=xn*_e+St*qe-wn*Le,an=xn*Le+wn*_e-yt*qe,Pn=xn*qe+yt*Le-St*_e,xi=-yt*_e-St*Le-wn*qe;return this.x=Nt*xn+xi*-yt+an*-wn-Pn*-St,this.y=an*xn+xi*-St+Pn*-yt-Nt*-wn,this.z=Pn*xn+xi*-wn+Nt*-St-an*-yt,this},dot:function(ge){return this.x*ge.x+this.y*ge.y+this.z*ge.z},crossVectors:function(ge,_e){var Le=ge.x,qe=ge.y,yt=ge.z,St=_e.x,wn=_e.y,xn=_e.z;return this.x=qe*xn-yt*wn,this.y=yt*St-Le*xn,this.z=Le*wn-qe*St,this}};var jt=function(ge,_e,Le,qe){this.x=ge||0,this.y=_e||0,this.z=Le||0,this.w=qe!==void 0?qe:1};jt.prototype={constructor:jt,set:function(ge,_e,Le,qe){return this.x=ge,this.y=_e,this.z=Le,this.w=qe,this},copy:function(ge){return this.x=ge.x,this.y=ge.y,this.z=ge.z,this.w=ge.w,this},setFromEulerXYZ:function(ge,_e,Le){var qe=Math.cos(ge/2),yt=Math.cos(_e/2),St=Math.cos(Le/2),wn=Math.sin(ge/2),xn=Math.sin(_e/2),Nt=Math.sin(Le/2);return this.x=wn*yt*St+qe*xn*Nt,this.y=qe*xn*St-wn*yt*Nt,this.z=qe*yt*Nt+wn*xn*St,this.w=qe*yt*St-wn*xn*Nt,this},setFromEulerYXZ:function(ge,_e,Le){var qe=Math.cos(ge/2),yt=Math.cos(_e/2),St=Math.cos(Le/2),wn=Math.sin(ge/2),xn=Math.sin(_e/2),Nt=Math.sin(Le/2);return this.x=wn*yt*St+qe*xn*Nt,this.y=qe*xn*St-wn*yt*Nt,this.z=qe*yt*Nt-wn*xn*St,this.w=qe*yt*St+wn*xn*Nt,this},setFromAxisAngle:function(ge,_e){var Le=_e/2,qe=Math.sin(Le);return this.x=ge.x*qe,this.y=ge.y*qe,this.z=ge.z*qe,this.w=Math.cos(Le),this},multiply:function(ge){return this.multiplyQuaternions(this,ge)},multiplyQuaternions:function(ge,_e){var Le=ge.x,qe=ge.y,yt=ge.z,St=ge.w,wn=_e.x,xn=_e.y,Nt=_e.z,an=_e.w;return this.x=Le*an+St*wn+qe*Nt-yt*xn,this.y=qe*an+St*xn+yt*wn-Le*Nt,this.z=yt*an+St*Nt+Le*xn-qe*wn,this.w=St*an-Le*wn-qe*xn-yt*Nt,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var ge=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return ge===0?(this.x=0,this.y=0,this.z=0,this.w=1):(ge=1/ge,this.x=this.x*ge,this.y=this.y*ge,this.z=this.z*ge,this.w=this.w*ge),this},slerp:function(ge,_e){if(_e===0)return this;if(_e===1)return this.copy(ge);var Le=this.x,qe=this.y,yt=this.z,St=this.w,wn=St*ge.w+Le*ge.x+qe*ge.y+yt*ge.z;if(wn<0?(this.w=-ge.w,this.x=-ge.x,this.y=-ge.y,this.z=-ge.z,wn=-wn):this.copy(ge),wn>=1)return this.w=St,this.x=Le,this.y=qe,this.z=yt,this;var xn=Math.acos(wn),Nt=Math.sqrt(1-wn*wn);if(Math.abs(Nt)<.001)return this.w=.5*(St+this.w),this.x=.5*(Le+this.x),this.y=.5*(qe+this.y),this.z=.5*(yt+this.z),this;var an=Math.sin((1-_e)*xn)/Nt,Pn=Math.sin(_e*xn)/Nt;return this.w=St*an+this.w*Pn,this.x=Le*an+this.x*Pn,this.y=qe*an+this.y*Pn,this.z=yt*an+this.z*Pn,this},setFromUnitVectors:function(){var ce,ge,_e=1e-6;return function(Le,qe){return ce===void 0&&(ce=new Xt),ge=Le.dot(qe)+1,ge<_e?(ge=0,Math.abs(Le.x)>Math.abs(Le.z)?ce.set(-Le.y,Le.x,0):ce.set(0,-Le.z,Le.y)):ce.crossVectors(Le,qe),this.x=ce.x,this.y=ce.y,this.z=ce.z,this.w=ge,this.normalize(),this}}()};function on(ce){this.width=ce.width||xt(),this.height=ce.height||at(),this.widthMeters=ce.widthMeters,this.heightMeters=ce.heightMeters,this.bevelMeters=ce.bevelMeters}var In=new on({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),di=new on({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),fi={CardboardV1:new vn({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new vn({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Nn(ce,ge){this.viewer=fi.CardboardV2,this.updateDeviceParams(ce),this.distortion=new $e(this.viewer.distortionCoefficients);for(var _e=0;_e<ge.length;_e++){var Le=ge[_e];fi[Le.id]=new vn(Le)}}Nn.prototype.updateDeviceParams=function(ce){this.device=this.determineDevice_(ce)||this.device},Nn.prototype.getDevice=function(){return this.device},Nn.prototype.setViewer=function(ce){this.viewer=ce,this.distortion=new $e(this.viewer.distortionCoefficients)},Nn.prototype.determineDevice_=function(ce){if(!ce)return Q()?(console.warn("Using fallback iOS device measurements."),di):(console.warn("Using fallback Android device measurements."),In);var ge=.0254,_e=ge/ce.xdpi,Le=ge/ce.ydpi,qe=xt(),yt=at();return new on({widthMeters:_e*qe,heightMeters:Le*yt,bevelMeters:ce.bevelMm*.001})},Nn.prototype.getDistortedFieldOfViewLeftEye=function(){var ce=this.viewer,ge=this.device,_e=this.distortion,Le=ce.screenLensDistance,qe=(ge.widthMeters-ce.interLensDistance)/2,yt=ce.interLensDistance/2,St=ce.baselineLensDistance-ge.bevelMeters,wn=ge.heightMeters-St,xn=$t*Math.atan(_e.distort(qe/Le)),Nt=$t*Math.atan(_e.distort(yt/Le)),an=$t*Math.atan(_e.distort(St/Le)),Pn=$t*Math.atan(_e.distort(wn/Le));return{leftDegrees:Math.min(xn,ce.fov),rightDegrees:Math.min(Nt,ce.fov),downDegrees:Math.min(an,ce.fov),upDegrees:Math.min(Pn,ce.fov)}},Nn.prototype.getLeftEyeVisibleTanAngles=function(){var ce=this.viewer,ge=this.device,_e=this.distortion,Le=Math.tan(-Vt*ce.fov),qe=Math.tan(Vt*ce.fov),yt=Math.tan(Vt*ce.fov),St=Math.tan(-Vt*ce.fov),wn=ge.widthMeters/4,xn=ge.heightMeters/2,Nt=ce.baselineLensDistance-ge.bevelMeters-xn,an=ce.interLensDistance/2-wn,Pn=-Nt,xi=ce.screenLensDistance,Ui=_e.distort((an-wn)/xi),Xi=_e.distort((Pn+xn)/xi),fr=_e.distort((an+wn)/xi),ur=_e.distort((Pn-xn)/xi),Vi=new Float32Array(4);return Vi[0]=Math.max(Le,Ui),Vi[1]=Math.min(qe,Xi),Vi[2]=Math.min(yt,fr),Vi[3]=Math.max(St,ur),Vi},Nn.prototype.getLeftEyeNoLensTanAngles=function(){var ce=this.viewer,ge=this.device,_e=this.distortion,Le=new Float32Array(4),qe=_e.distortInverse(Math.tan(-Vt*ce.fov)),yt=_e.distortInverse(Math.tan(Vt*ce.fov)),St=_e.distortInverse(Math.tan(Vt*ce.fov)),wn=_e.distortInverse(Math.tan(-Vt*ce.fov)),xn=ge.widthMeters/4,Nt=ge.heightMeters/2,an=ce.baselineLensDistance-ge.bevelMeters-Nt,Pn=ce.interLensDistance/2-xn,xi=-an,Ui=ce.screenLensDistance,Xi=(Pn-xn)/Ui,fr=(xi+Nt)/Ui,ur=(Pn+xn)/Ui,Vi=(xi-Nt)/Ui;return Le[0]=Math.max(qe,Xi),Le[1]=Math.min(yt,fr),Le[2]=Math.min(St,ur),Le[3]=Math.max(wn,Vi),Le},Nn.prototype.getLeftEyeVisibleScreenRect=function(ce){var ge=this.viewer,_e=this.device,Le=ge.screenLensDistance,qe=(_e.widthMeters-ge.interLensDistance)/2,yt=ge.baselineLensDistance-_e.bevelMeters,St=(ce[0]*Le+qe)/_e.widthMeters,wn=(ce[1]*Le+yt)/_e.heightMeters,xn=(ce[2]*Le+qe)/_e.widthMeters,Nt=(ce[3]*Le+yt)/_e.heightMeters;return{x:St,y:Nt,width:xn-St,height:wn-Nt}},Nn.prototype.getFieldOfViewLeftEye=function(ce){return ce?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Nn.prototype.getFieldOfViewRightEye=function(ce){var ge=this.getFieldOfViewLeftEye(ce);return{leftDegrees:ge.rightDegrees,rightDegrees:ge.leftDegrees,upDegrees:ge.upDegrees,downDegrees:ge.downDegrees}},Nn.prototype.getUndistortedFieldOfViewLeftEye=function(){var ce=this.getUndistortedParams_();return{leftDegrees:$t*Math.atan(ce.outerDist),rightDegrees:$t*Math.atan(ce.innerDist),downDegrees:$t*Math.atan(ce.bottomDist),upDegrees:$t*Math.atan(ce.topDist)}},Nn.prototype.getUndistortedViewportLeftEye=function(){var ce=this.getUndistortedParams_(),ge=this.viewer,_e=this.device,Le=ge.screenLensDistance,qe=_e.widthMeters/Le,yt=_e.heightMeters/Le,St=_e.width/qe,wn=_e.height/yt,xn=Math.round((ce.eyePosX-ce.outerDist)*St),Nt=Math.round((ce.eyePosY-ce.bottomDist)*wn);return{x:xn,y:Nt,width:Math.round((ce.eyePosX+ce.innerDist)*St)-xn,height:Math.round((ce.eyePosY+ce.topDist)*wn)-Nt}},Nn.prototype.getUndistortedParams_=function(){var ce=this.viewer,ge=this.device,_e=this.distortion,Le=ce.screenLensDistance,qe=ce.interLensDistance/2/Le,yt=ge.widthMeters/Le,St=ge.heightMeters/Le,wn=yt/2-qe,xn=(ce.baselineLensDistance-ge.bevelMeters)/Le,Nt=ce.fov,an=_e.distortInverse(Math.tan(Vt*Nt)),Pn=Math.min(wn,an),xi=Math.min(qe,an),Ui=Math.min(xn,an),Xi=Math.min(St-xn,an);return{outerDist:Pn,innerDist:xi,topDist:Xi,bottomDist:Ui,eyePosX:wn,eyePosY:xn}};function vn(ce){this.id=ce.id,this.label=ce.label,this.fov=ce.fov,this.interLensDistance=ce.interLensDistance,this.baselineLensDistance=ce.baselineLensDistance,this.screenLensDistance=ce.screenLensDistance,this.distortionCoefficients=ce.distortionCoefficients,this.inverseCoefficients=ce.inverseCoefficients}Nn.Viewers=fi;var Ft=1,yn="2019-11-09T17:36:14Z",Gn=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],Dn={format:Ft,last_updated:yn,devices:Gn};function bi(ce,ge){if(this.dpdb=Dn,this.recalculateDeviceParams_(),ce){this.onDeviceParamsUpdated=ge;var _e=new XMLHttpRequest,Le=this;_e.open("GET",ce,!0),_e.addEventListener("load",function(){Le.loading=!1,_e.status>=200&&_e.status<=299?(Le.dpdb=JSON.parse(_e.response),Le.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),_e.send()}}bi.prototype.getDeviceParams=function(){return this.deviceParams},bi.prototype.recalculateDeviceParams_=function(){var ce=this.calcDeviceParams_();ce?(this.deviceParams=ce,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},bi.prototype.calcDeviceParams_=function(){var ce=this.dpdb;if(!ce)return console.error("DPDB not available."),null;if(ce.format!=1)return console.error("DPDB has unexpected format version."),null;if(!ce.devices||!ce.devices.length)return console.error("DPDB does not have a devices section."),null;var ge=navigator.userAgent||navigator.vendor||window.opera,_e=xt(),Le=at();if(!ce.devices)return console.error("DPDB has no devices section."),null;for(var qe=0;qe<ce.devices.length;qe++){var yt=ce.devices[qe];if(!yt.rules){console.warn("Device["+qe+"] has no rules section.");continue}if(yt.type!="ios"&&yt.type!="android"){console.warn("Device["+qe+"] has invalid type.");continue}if(Q()==(yt.type=="ios")){for(var St=!1,wn=0;wn<yt.rules.length;wn++){var xn=yt.rules[wn];if(this.ruleMatches_(xn,ge,_e,Le)){St=!0;break}}if(!!St){var Nt=yt.dpi[0]||yt.dpi,an=yt.dpi[1]||yt.dpi;return new Pi({xdpi:Nt,ydpi:an,bevelMm:yt.bw})}}}return console.warn("No DPDB device match."),null},bi.prototype.ruleMatches_=function(ce,ge,_e,Le){if(!ce.ua&&!ce.res||(ce.ua&&ce.ua.substring(0,2)==="SM"&&(ce.ua=ce.ua.substring(0,7)),ce.ua&&ge.indexOf(ce.ua)<0))return!1;if(ce.res){if(!ce.res[0]||!ce.res[1])return!1;var qe=ce.res[0],yt=ce.res[1];if(Math.min(_e,Le)!=Math.min(qe,yt)||Math.max(_e,Le)!=Math.max(qe,yt))return!1}return!0};function Pi(ce){this.xdpi=ce.xdpi,this.ydpi=ce.ydpi,this.bevelMm=ce.bevelMm}function Zi(ce,ge){this.set(ce,ge)}Zi.prototype.set=function(ce,ge){this.sample=ce,this.timestampS=ge},Zi.prototype.copy=function(ce){this.set(ce.sample,ce.timestampS)};function Lr(ce,ge){this.kFilter=ce,this.isDebug=ge,this.currentAccelMeasurement=new Zi,this.currentGyroMeasurement=new Zi,this.previousGyroMeasurement=new Zi,Q()?this.filterQ=new jt(-1,0,0,1):this.filterQ=new jt(1,0,0,1),this.previousFilterQ=new jt,this.previousFilterQ.copy(this.filterQ),this.accelQ=new jt,this.isOrientationInitialized=!1,this.estimatedGravity=new Xt,this.measuredGravity=new Xt,this.gyroIntegralQ=new jt}Lr.prototype.addAccelMeasurement=function(ce,ge){this.currentAccelMeasurement.set(ce,ge)},Lr.prototype.addGyroMeasurement=function(ce,ge){this.currentGyroMeasurement.set(ce,ge);var _e=ge-this.previousGyroMeasurement.timestampS;ht(_e)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Lr.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var ce=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,ge=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,ce);this.gyroIntegralQ.multiply(ge),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(ge);var _e=new jt;_e.copy(this.filterQ),_e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(_e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Le=new jt;Le.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Le.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",$t*bn(Le),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var qe=new jt;qe.copy(this.filterQ),qe.multiply(Le),this.filterQ.slerp(qe,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Lr.prototype.getOrientation=function(){return this.filterQ},Lr.prototype.accelToQuaternion_=function(ce){var ge=new Xt;ge.copy(ce),ge.normalize();var _e=new jt;return _e.setFromUnitVectors(new Xt(0,0,-1),ge),_e.inverse(),_e},Lr.prototype.gyroToQuaternionDelta_=function(ce,ge){var _e=new jt,Le=new Xt;return Le.copy(ce),Le.normalize(),_e.setFromAxisAngle(Le,ce.length()*ge),_e};function Ki(ce,ge){this.predictionTimeS=ce,this.isDebug=ge,this.previousQ=new jt,this.previousTimestampS=null,this.deltaQ=new jt,this.outQ=new jt}Ki.prototype.getPrediction=function(ce,ge,_e){if(!this.previousTimestampS)return this.previousQ.copy(ce),this.previousTimestampS=_e,ce;var Le=new Xt;Le.copy(ge),Le.normalize();var qe=ge.length();if(qe<Vt*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",($t*qe).toFixed(1)),this.outQ.copy(ce),this.previousQ.copy(ce),this.outQ;var yt=qe*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Le,yt),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(ce),this.previousTimestampS=_e,this.outQ};function Gr(ce,ge,_e,Le){this.yawOnly=_e,this.accelerometer=new Xt,this.gyroscope=new Xt,this.filter=new Lr(ce,Le),this.posePredictor=new Ki(ge,Le),this.isFirefoxAndroid=X(),this.isIOS=Q();var qe=fe();this.isDeviceMotionInRadians=!this.isIOS&&qe&&qe<66,this.isWithoutDeviceMotion=Se()||Ae(),this.filterToWorldQ=new jt,Q()?this.filterToWorldQ.setFromAxisAngle(new Xt(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new Xt(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new jt,this.worldToScreenQ=new jt,this.originalPoseAdjustQ=new jt,this.originalPoseAdjustQ.setFromAxisAngle(new Xt(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),Ge()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new jt,this.orientationOut_=new Float32Array(4),this.start()}Gr.prototype.getPosition=function(){return null},Gr.prototype.getOrientation=function(){var ce=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var qe=new jt().setFromAxisAngle(new Xt(0,0,-1),0),yt=new jt;return window.orientation===-90?yt.setFromAxisAngle(new Xt(0,1,0),Math.PI/-2):yt.setFromAxisAngle(new Xt(0,1,0),Math.PI/2),qe.multiply(yt)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var qe=new jt;return qe.setFromAxisAngle(new Xt(1,0,0),-Math.PI/2),qe}(),ce=this._deviceOrientationQ;var _e=new jt;return _e.copy(ce),_e.multiply(this.deviceOrientationFilterToWorldQ),_e.multiply(this.resetQ),_e.multiply(this.worldToScreenQ),_e.multiplyQuaternions(this.deviceOrientationFixQ,_e),this.yawOnly&&(_e.x=0,_e.z=0,_e.normalize()),this.orientationOut_[0]=_e.x,this.orientationOut_[1]=_e.y,this.orientationOut_[2]=_e.z,this.orientationOut_[3]=_e.w,this.orientationOut_}else{var ge=this.filter.getOrientation();ce=this.posePredictor.getPrediction(ge,this.gyroscope,this.previousTimestampS)}var _e=new jt;return _e.copy(this.filterToWorldQ),_e.multiply(this.resetQ),_e.multiply(ce),_e.multiply(this.worldToScreenQ),this.yawOnly&&(_e.x=0,_e.z=0,_e.normalize()),this.orientationOut_[0]=_e.x,this.orientationOut_[1]=_e.y,this.orientationOut_[2]=_e.z,this.orientationOut_[3]=_e.w,this.orientationOut_},Gr.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),Ge()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Gr.prototype.onDeviceOrientation_=function(ce){this._deviceOrientationQ=this._deviceOrientationQ||new jt;var ge=ce.alpha,_e=ce.beta,Le=ce.gamma;ge=(ge||0)*Math.PI/180,_e=(_e||0)*Math.PI/180,Le=(Le||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(_e,ge,-Le)},Gr.prototype.onDeviceMotion_=function(ce){this.updateDeviceMotion_(ce)},Gr.prototype.updateDeviceMotion_=function(ce){var ge=ce.accelerationIncludingGravity,_e=ce.rotationRate,Le=ce.timeStamp/1e3,qe=Le-this.previousTimestampS;if(qe<0){tn("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=Le;return}else if(qe<=xe||qe>Ee){tn("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=Le;return}this.accelerometer.set(-ge.x,-ge.y,-ge.z),_e&&(Be()?this.gyroscope.set(-_e.beta,_e.alpha,_e.gamma):this.gyroscope.set(_e.alpha,_e.beta,_e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Le)),this.filter.addAccelMeasurement(this.accelerometer,Le),this.previousTimestampS=Le},Gr.prototype.onOrientationChange_=function(ce){this.setScreenTransform_()},Gr.prototype.onMessage_=function(ce){var ge=ce.data;if(!(!ge||!ge.type)){var _e=ge.type.toLowerCase();_e==="devicemotion"&&this.updateDeviceMotion_(ge.deviceMotionEvent)}},Gr.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Xt(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Xt(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Gr.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),Q()&&un()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},Gr.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var Dr=60,ar=new Xt(1,0,0),zr=new Xt(0,0,1),ys=new jt;ys.setFromAxisAngle(ar,-Math.PI/2),ys.multiply(new jt().setFromAxisAngle(zr,Math.PI/2));var Qe=function(){function ce(ge){k(this,ce),this.config=ge,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new jt,this._outQ=new jt,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return te(ce,[{key:"init",value:function(){var _e=null;try{_e=new RelativeOrientationSensor({frequency:Dr,referenceFrame:"screen"}),_e.addEventListener("error",this._onSensorError)}catch(Le){this.errors.push(Le),Le.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):Le.name==="ReferenceError"?this.useDeviceMotion():console.error(Le)}_e&&(this.api="sensor",this.sensor=_e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new Gr(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var _e=this.sensor.quaternion;this._sensorQ.set(_e[0],_e[1],_e[2],_e[3]);var Le=this._outQ;return Le.copy(ys),Le.multiply(this._sensorQ),this.config.YAW_ONLY&&(Le.x=Le.z=0,Le.normalize()),this._out[0]=Le.x,this._out[1]=Le.y,this._out[2]=Le.z,this._out[3]=Le.w,this._out}},{key:"_onSensorError",value:function(_e){this.errors.push(_e.error),_e.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):_e.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(_e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),ce}(),ut="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function _t(){this.loadIcon_();var ce=document.createElement("div"),St=ce.style;St.position="fixed",St.top=0,St.right=0,St.bottom=0,St.left=0,St.backgroundColor="gray",St.fontFamily="sans-serif",St.zIndex=1e6;var ge=document.createElement("img");ge.src=this.icon;var St=ge.style;St.marginLeft="25%",St.marginTop="25%",St.width="50%",ce.appendChild(ge);var _e=document.createElement("div"),St=_e.style;St.textAlign="center",St.fontSize="16px",St.lineHeight="24px",St.margin="24px 25%",St.width="50%",_e.innerHTML="Place your phone into your Cardboard viewer.",ce.appendChild(_e);var Le=document.createElement("div"),St=Le.style;St.backgroundColor="#CFD8DC",St.position="fixed",St.bottom=0,St.width="100%",St.height="48px",St.padding="14px 24px",St.boxSizing="border-box",St.color="#656A6B",ce.appendChild(Le);var qe=document.createElement("div");qe.style.float="left",qe.innerHTML="No Cardboard viewer?";var yt=document.createElement("a");yt.href="https://www.google.com/get/cardboard/get-cardboard/",yt.innerHTML="get one",yt.target="_blank";var St=yt.style;St.float="right",St.fontWeight=600,St.textTransform="uppercase",St.borderLeft="1px solid gray",St.paddingLeft="24px",St.textDecoration="none",St.color="#656A6B",Le.appendChild(qe),Le.appendChild(yt),this.overlay=ce,this.text=_e,this.hide()}_t.prototype.show=function(ce){!ce&&!this.overlay.parentElement?document.body.appendChild(this.overlay):ce&&(this.overlay.parentElement&&this.overlay.parentElement!=ce&&this.overlay.parentElement.removeChild(this.overlay),ce.appendChild(this.overlay)),this.overlay.style.display="block";var ge=this.overlay.querySelector("img"),_e=ge.style;Ge()?(_e.width="20%",_e.marginLeft="40%",_e.marginTop="3%"):(_e.width="50%",_e.marginLeft="25%",_e.marginTop="25%")},_t.prototype.hide=function(){this.overlay.style.display="none"},_t.prototype.showTemporarily=function(ce,ge){this.show(ge),this.timer=setTimeout(this.hide.bind(this),ce)},_t.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},_t.prototype.update=function(){this.disableShowTemporarily(),!Ge()&&At()?this.show():this.hide()},_t.prototype.loadIcon_=function(){this.icon=V("image/svg+xml",ut)};var nn="CardboardV1",Wt="WEBVR_CARDBOARD_VIEWER",mn="webvr-polyfill-viewer-selector";function Un(ce){try{this.selectedKey=localStorage.getItem(Wt)}catch(ge){console.error("Failed to load viewer profile: %s",ge)}this.selectedKey||(this.selectedKey=ce||nn),this.dialog=this.createDialog_(Nn.Viewers),this.root=null,this.onChangeCallbacks_=[]}Un.prototype.show=function(ce){this.root=ce,ce.appendChild(this.dialog);var ge=this.dialog.querySelector("#"+this.selectedKey);ge.checked=!0,this.dialog.style.display="block"},Un.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Un.prototype.getCurrentViewer=function(){return Nn.Viewers[this.selectedKey]},Un.prototype.getSelectedKey_=function(){var ce=this.dialog.querySelector("input[name=field]:checked");return ce?ce.id:null},Un.prototype.onChange=function(ce){this.onChangeCallbacks_.push(ce)},Un.prototype.fireOnChange_=function(ce){for(var ge=0;ge<this.onChangeCallbacks_.length;ge++)this.onChangeCallbacks_[ge](ce)},Un.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!Nn.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(Nn.Viewers[this.selectedKey]);try{localStorage.setItem(Wt,this.selectedKey)}catch(ce){console.error("Failed to save viewer profile: %s",ce)}this.hide()},Un.prototype.createDialog_=function(ce){var ge=document.createElement("div");ge.classList.add(mn),ge.style.display="none";var _e=document.createElement("div"),yt=_e.style;yt.position="fixed",yt.left=0,yt.top=0,yt.width="100%",yt.height="100%",yt.background="rgba(0, 0, 0, 0.3)",_e.addEventListener("click",this.hide.bind(this));var Le=280,qe=document.createElement("div"),yt=qe.style;yt.boxSizing="border-box",yt.position="fixed",yt.top="24px",yt.left="50%",yt.marginLeft=-Le/2+"px",yt.width=Le+"px",yt.padding="24px",yt.overflow="hidden",yt.background="#fafafa",yt.fontFamily="'Roboto', sans-serif",yt.boxShadow="0px 5px 20px #666",qe.appendChild(this.createH1_("Select your viewer"));for(var St in ce)qe.appendChild(this.createChoice_(St,ce[St].label));return qe.appendChild(this.createButton_("Save",this.onSave_.bind(this))),ge.appendChild(_e),ge.appendChild(qe),ge},Un.prototype.createH1_=function(ce){var ge=document.createElement("h1"),_e=ge.style;return _e.color="black",_e.fontSize="20px",_e.fontWeight="bold",_e.marginTop=0,_e.marginBottom="24px",ge.innerHTML=ce,ge},Un.prototype.createChoice_=function(ce,ge){var _e=document.createElement("div");_e.style.marginTop="8px",_e.style.color="black";var Le=document.createElement("input");Le.style.fontSize="30px",Le.setAttribute("id",ce),Le.setAttribute("type","radio"),Le.setAttribute("value",ce),Le.setAttribute("name","field");var qe=document.createElement("label");return qe.style.marginLeft="4px",qe.setAttribute("for",ce),qe.innerHTML=ge,_e.appendChild(Le),_e.appendChild(qe),_e},Un.prototype.createButton_=function(ce,ge){var _e=document.createElement("button");_e.innerHTML=ce;var Le=_e.style;return Le.float="right",Le.textTransform="uppercase",Le.color="#1094f7",Le.fontSize="14px",Le.letterSpacing=0,Le.border=0,Le.background="none",Le.marginTop="16px",_e.addEventListener("click",ge),_e};var Xn=typeof window<"u"?window:typeof g<"u"?g:typeof self<"u"?self:{};function ei(ce){return ce&&ce.__esModule&&Object.prototype.hasOwnProperty.call(ce,"default")?ce.default:ce}function pn(ce,ge){return ge={exports:{}},ce(ge,ge.exports),ge.exports}var Oi=pn(function(ce,ge){(function(Le,qe){ce.exports=qe()})(Xn,function(){return function(_e){var Le={};function qe(yt){if(Le[yt])return Le[yt].exports;var St=Le[yt]={i:yt,l:!1,exports:{}};return _e[yt].call(St.exports,St,St.exports,qe),St.l=!0,St.exports}return qe.m=_e,qe.c=Le,qe.d=function(yt,St,wn){qe.o(yt,St)||Object.defineProperty(yt,St,{configurable:!1,enumerable:!0,get:wn})},qe.n=function(yt){var St=yt&&yt.__esModule?function(){return yt.default}:function(){return yt};return qe.d(St,"a",St),St},qe.o=function(yt,St){return Object.prototype.hasOwnProperty.call(yt,St)},qe.p="",qe(qe.s=0)}([function(_e,Le,qe){var yt=function(){function an(Pn,xi){for(var Ui=0;Ui<xi.length;Ui++){var Xi=xi[Ui];Xi.enumerable=Xi.enumerable||!1,Xi.configurable=!0,"value"in Xi&&(Xi.writable=!0),Object.defineProperty(Pn,Xi.key,Xi)}}return function(Pn,xi,Ui){return xi&&an(Pn.prototype,xi),Ui&&an(Pn,Ui),Pn}}();function St(an,Pn){if(!(an instanceof Pn))throw new TypeError("Cannot call a class as a function")}var wn=qe(1),xn=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,Nt=function(){function an(){St(this,an),xn?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",wn),this.noSleepVideo.addEventListener("timeupdate",function(Pn){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return yt(an,[{key:"enable",value:function(){xn?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){xn?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),an}();_e.exports=Nt},function(_e,Le,qe){_e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Mi=ei(Oi),Ti=1e3,Wr=[0,0,.5,1],zi=[.5,0,.5,1],er=window.requestAnimationFrame,Nr=window.cancelAnimationFrame;function Ds(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function ro(ce){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:ce.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:ce.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:ce.canPresent},maxLayers:{writable:!1,enumerable:!0,value:ce.maxLayers},hasOrientation:{enumerable:!0,get:function(){return ri("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),ce.hasOrientation}}})}function pi(ce){ce=ce||{};var ge="wakelock"in ce?ce.wakelock:!0;this.isPolyfilled=!0,this.displayId=Ti++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return ri("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new ro({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,ge&&At()&&(this.wakelock_=new Mi)}pi.prototype.getFrameData=function(ce){return qt(ce,this._getPose(),this)},pi.prototype.getPose=function(){return ri("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},pi.prototype.resetPose=function(){return ri("VRDisplay.prototype.resetPose"),this._resetPose()},pi.prototype.getImmediatePose=function(){return ri("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},pi.prototype.requestAnimationFrame=function(ce){return er(ce)},pi.prototype.cancelAnimationFrame=function(ce){return Nr(ce)},pi.prototype.wrapForFullscreen=function(ce){if(Q())return ce;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var ge=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",ge.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==ce)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=ce,this.originalParent_=ce.parentElement,this.originalParent_||document.body.appendChild(ce),!this.fullscreenWrapper_.parentElement){var _e=this.fullscreenElement_.parentElement;_e.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),_e.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var Le=this;function qe(){if(!!Le.fullscreenElement_){var yt=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];Le.fullscreenElement_.setAttribute("style",yt.join("; ")+";")}}return qe(),this.fullscreenWrapper_},pi.prototype.removeFullscreenWrapper=function(){if(!!this.fullscreenElement_){var ce=this.fullscreenElement_;this.fullscreenElementCachedStyle_?ce.setAttribute("style",this.fullscreenElementCachedStyle_):ce.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var ge=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(ce),this.originalParent_===ge?ge.insertBefore(ce,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(ce),ge.removeChild(this.fullscreenWrapper_),ce}},pi.prototype.requestPresent=function(ce){var ge=this.isPresenting,_e=this;return ce instanceof Array||(ri("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),ce=[ce]),new Promise(function(Le,qe){if(!_e.capabilities.canPresent){qe(new Error("VRDisplay is not capable of presenting."));return}if(ce.length==0||ce.length>_e.capabilities.maxLayers){qe(new Error("Invalid number of layers."));return}var yt=ce[0];if(!yt.source){Le();return}var St=yt.leftBounds||Wr,wn=yt.rightBounds||zi;if(ge){var xn=_e.layer_;xn.source!==yt.source&&(xn.source=yt.source);for(var Nt=0;Nt<4;Nt++)xn.leftBounds[Nt]=St[Nt],xn.rightBounds[Nt]=wn[Nt];_e.wrapForFullscreen(_e.layer_.source),_e.updatePresent_(),Le();return}if(_e.layer_={predistorted:yt.predistorted,source:yt.source,leftBounds:St.slice(0),rightBounds:wn.slice(0)},_e.waitingForPresent_=!1,_e.layer_&&_e.layer_.source){var an=_e.wrapForFullscreen(_e.layer_.source),Pn=function(){var Xi=Yt();_e.isPresenting=an===Xi,_e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(fr){console.error("screen.orientation.lock() failed due to",fr.message)}),_e.waitingForPresent_=!1,_e.beginPresent_(),Le()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),_e.removeFullscreenWrapper(),_e.disableWakeLock(),_e.endPresent_(),_e.removeFullscreenListeners_()),_e.fireVRDisplayPresentChange_()},xi=function(){!_e.waitingForPresent_||(_e.removeFullscreenWrapper(),_e.removeFullscreenListeners_(),_e.disableWakeLock(),_e.waitingForPresent_=!1,_e.isPresenting=!1,qe(new Error("Unable to present.")))};_e.addFullscreenListeners_(an,Pn,xi),Gt(an)?(_e.enableWakeLock(),_e.waitingForPresent_=!0):(Q()||F())&&(_e.enableWakeLock(),_e.isPresenting=!0,_e.beginPresent_(),_e.fireVRDisplayPresentChange_(),Le())}!_e.waitingForPresent_&&!Q()&&(wt(),qe(new Error("Unable to present.")))})},pi.prototype.exitPresent=function(){var ce=this.isPresenting,ge=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(_e,Le){ce?(!wt()&&Q()&&(ge.endPresent_(),ge.fireVRDisplayPresentChange_()),F()&&(ge.removeFullscreenWrapper(),ge.removeFullscreenListeners_(),ge.endPresent_(),ge.fireVRDisplayPresentChange_()),_e()):Le(new Error("Was not presenting to VRDisplay."))})},pi.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},pi.prototype.fireVRDisplayPresentChange_=function(){var ce=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(ce)},pi.prototype.fireVRDisplayConnect_=function(){var ce=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(ce)},pi.prototype.addFullscreenListeners_=function(ce,ge,_e){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=ce,this.fullscreenChangeHandler_=ge,this.fullscreenErrorHandler_=_e,ge&&(document.fullscreenEnabled?ce.addEventListener("fullscreenchange",ge,!1):document.webkitFullscreenEnabled?ce.addEventListener("webkitfullscreenchange",ge,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",ge,!1):document.msFullscreenEnabled&&ce.addEventListener("msfullscreenchange",ge,!1)),_e&&(document.fullscreenEnabled?ce.addEventListener("fullscreenerror",_e,!1):document.webkitFullscreenEnabled?ce.addEventListener("webkitfullscreenerror",_e,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",_e,!1):document.msFullscreenEnabled&&ce.addEventListener("msfullscreenerror",_e,!1))},pi.prototype.removeFullscreenListeners_=function(){if(!!this.fullscreenEventTarget_){var ce=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var ge=this.fullscreenChangeHandler_;ce.removeEventListener("fullscreenchange",ge,!1),ce.removeEventListener("webkitfullscreenchange",ge,!1),document.removeEventListener("mozfullscreenchange",ge,!1),ce.removeEventListener("msfullscreenchange",ge,!1)}if(this.fullscreenErrorHandler_){var _e=this.fullscreenErrorHandler_;ce.removeEventListener("fullscreenerror",_e,!1),ce.removeEventListener("webkitfullscreenerror",_e,!1),document.removeEventListener("mozfullscreenerror",_e,!1),ce.removeEventListener("msfullscreenerror",_e,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},pi.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},pi.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},pi.prototype.beginPresent_=function(){},pi.prototype.endPresent_=function(){},pi.prototype.submitFrame=function(ce){},pi.prototype.getEyeParameters=function(ce){return null};var Ir={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},to={LEFT:"left",RIGHT:"right"};function os(ce){var ge=Bt({},Ir);ce=Bt(ge,ce||{}),pi.call(this,{wakelock:ce.MOBILE_WAKE_LOCK}),this.config=ce,this.displayName="Cardboard VRDisplay",this.capabilities=new ro({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Qe(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new bi(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Nn(this.dpdb_.getDeviceParams(),ce.ADDITIONAL_VIEWERS),this.viewerSelector_=new Un(ce.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new _t),Q()&&window.addEventListener("resize",this.onResize_.bind(this))}return os.prototype=Object.create(pi.prototype),os.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},os.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},os.prototype._getFieldOfView=function(ce){var ge;if(ce==to.LEFT)ge=this.deviceInfo_.getFieldOfViewLeftEye();else if(ce==to.RIGHT)ge=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",ce),null;return ge},os.prototype._getEyeOffset=function(ce){var ge;if(ce==to.LEFT)ge=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(ce==to.RIGHT)ge=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",ce),null;return ge},os.prototype.getEyeParameters=function(ce){var ge=this._getEyeOffset(ce),_e=this._getFieldOfView(ce),Le={offset:ge,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(Le,"fieldOfView",{enumerable:!0,get:function(){return ri("VRFieldOfView","VRFrameData's projection matrices"),_e}}),Le},os.prototype.onDeviceParamsUpdated_=function(ce){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(ce),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},os.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},os.prototype.beginPresent_=function(){var ce=this.layer_.source.getContext("webgl");ce||(ce=this.layer_.source.getContext("experimental-webgl")),ce||(ce=this.layer_.source.getContext("webgl2")),ce&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(ce.canvas.width=xt()*this.bufferScale_,ce.canvas.height=at()*this.bufferScale_,this.cardboardUI_=new Ke(ce)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new Ke(ce)),this.distorter_=new Ye(ce,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(ge){this.viewerSelector_.show(this.layer_.source.parentElement),ge.stopPropagation(),ge.preventDefault()}.bind(this),function(ge){this.exitPresent(),ge.stopPropagation(),ge.preventDefault()}.bind(this)),this.rotateInstructions_&&(Ge()&&At()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},os.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},os.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},os.prototype.submitFrame=function(ce){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var ge=this.layer_.source.getContext("webgl");ge||(ge=this.layer_.source.getContext("experimental-webgl")),ge||(ge=this.layer_.source.getContext("webgl2"));var _e=ge.canvas;(_e.width!=this.lastWidth||_e.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=_e.width,this.lastHeight=_e.height,this.cardboardUI_.render()}},os.prototype.onOrientationChange_=function(ce){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},os.prototype.onResize_=function(ce){if(this.layer_){var ge=this.layer_.source.getContext("webgl");ge||(ge=this.layer_.source.getContext("experimental-webgl")),ge||(ge=this.layer_.source.getContext("webgl2"));var _e=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];ge.canvas.setAttribute("style",_e.join("; ")+";"),Pt(ge.canvas)}},os.prototype.onViewerChanged_=function(ce){this.deviceInfo_.setViewer(ce),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},os.prototype.fireVRDisplayDeviceParamsChange_=function(){var ce=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(ce)},os.VRFrameData=Ds,os.VRDisplay=pi,os})}),w=C(m),_="0.10.12",O={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function R(J){this.config=b(b({},O),J),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&y())&&(this.enable(),this.getVRDisplays().then(function(j){j&&j[0]&&j[0].fireVRDisplayConnect_&&j[0].fireVRDisplayConnect_()}))}R.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(y()){var J=new w({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(J)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},R.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var J=this.native.VRFrameData,j=new this.native.VRFrameData,k=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(te){if(te instanceof J){k.call(this,te);return}k.call(this,j),te.pose=j.pose,E(j.leftProjectionMatrix,te.leftProjectionMatrix),E(j.rightProjectionMatrix,te.rightProjectionMatrix),E(j.leftViewMatrix,te.leftViewMatrix),E(j.rightViewMatrix,te.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=w.VRDisplay,window.VRFrameData=w.VRFrameData},R.prototype.getVRDisplays=function(){var J=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(j){return j.length>0?j:J.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},R.version=_,R.VRFrameData=w.VRFrameData,R.VRDisplay=w.VRDisplay;var L=Object.freeze({default:R}),P=L&&R||L;typeof g<"u"&&g.window&&(g.document||(g.document=g.window.document),g.navigator||(g.navigator=g.window.navigator));var Y=P;return Y})},"./node_modules/word-wrapper/index.js":T=>{var I=/\n/,u=`
`,g=/\s/;T.exports=function(m,w){var _=T.exports.lines(m,w);return _.map(function(O){return m.substring(O.start,O.end)}).join(`
`)},T.exports.lines=function(w,_){if(_=_||{},_.width===0&&_.mode!=="nowrap")return[];w=w||"";var O=typeof _.width=="number"?_.width:Number.MAX_VALUE,R=Math.max(0,_.start||0),L=typeof _.end=="number"?_.end:w.length,P=_.mode,Y=_.measure||b;return P==="pre"?y(Y,w,R,L,O):E(Y,w,R,L,O,P)};function C(m,w,_,O){var R=m.indexOf(w,_);return R===-1||R>O?O:R}function v(m){return g.test(m)}function y(m,w,_,O,R){for(var L=[],P=_,Y=_;Y<O&&Y<w.length;Y++){var J=w.charAt(Y),j=I.test(J);if(j||Y===O-1){var k=j?Y:Y+1,te=m(w,P,k,R);L.push(te),P=Y+1}}return L}function E(m,w,_,O,R,L){var P=[],Y=R;for(L==="nowrap"&&(Y=Number.MAX_VALUE);_<O&&_<w.length;){for(var J=C(w,u,_,O);_<J&&v(w.charAt(_));)_++;var j=m(w,_,J,Y),k=_+(j.end-j.start),te=k+u.length;if(k<J){for(;k>_&&!v(w.charAt(k));)k--;if(k===_)te>_+u.length&&te--,k=te;else for(te=k;k>_&&v(w.charAt(k-u.length));)k--}if(k>=_){var ue=m(w,_,k,Y);P.push(ue)}_=te}return P}function b(m,w,_,O){var R=Math.min(O,_-w);return{start:w,end:w+R}}},"./node_modules/xhr/index.js":(T,I,u)=>{var g=u("./node_modules/global/window.js"),C=u("./node_modules/is-function/index.js"),v=u("./node_modules/parse-headers/parse-headers.js"),y=u("./node_modules/xtend/immutable.js");T.exports=w,T.exports.default=w,w.XMLHttpRequest=g.XMLHttpRequest||R,w.XDomainRequest="withCredentials"in new w.XMLHttpRequest?w.XMLHttpRequest:g.XDomainRequest,E(["get","put","post","patch","head","delete"],function(L){w[L==="delete"?"del":L]=function(P,Y,J){return Y=m(P,Y,J),Y.method=L.toUpperCase(),_(Y)}});function E(L,P){for(var Y=0;Y<L.length;Y++)P(L[Y])}function b(L){for(var P in L)if(L.hasOwnProperty(P))return!1;return!0}function m(L,P,Y){var J=L;return C(P)?(Y=P,typeof L=="string"&&(J={uri:L})):J=y(P,{uri:L}),J.callback=Y,J}function w(L,P,Y){return P=m(L,P,Y),_(P)}function _(L){if(typeof L.callback>"u")throw new Error("callback argument missing");var P=!1,Y=function(Be,Ge,ht){P||(P=!0,L.callback(Be,Ge,ht))};function J(){ue.readyState===4&&setTimeout(te,0)}function j(){var Se=void 0;if(ue.response?Se=ue.response:Se=ue.responseText||O(ue),X)try{Se=JSON.parse(Se)}catch{}return Se}function k(Se){return clearTimeout(fe),Se instanceof Error||(Se=new Error(""+(Se||"Unknown XMLHttpRequest Error"))),Se.statusCode=0,Y(Se,Ae)}function te(){if(!Ee){var Se;clearTimeout(fe),L.useXDR&&ue.status===void 0?Se=200:Se=ue.status===1223?204:ue.status;var Be=Ae,Ge=null;return Se!==0?(Be={body:j(),statusCode:Se,method:q,headers:{},url:V,rawRequest:ue},ue.getAllResponseHeaders&&(Be.headers=v(ue.getAllResponseHeaders()))):Ge=new Error("Internal XMLHttpRequest Error"),Y(Ge,Be,Be.body)}}var ue=L.xhr||null;ue||(L.cors||L.useXDR?ue=new w.XDomainRequest:ue=new w.XMLHttpRequest);var xe,Ee,V=ue.url=L.uri||L.url,q=ue.method=L.method||"GET",Q=L.body||L.data,F=ue.headers=L.headers||{},z=!!L.sync,X=!1,fe,Ae={body:void 0,headers:{},statusCode:0,method:q,url:V,rawRequest:ue};if("json"in L&&L.json!==!1&&(X=!0,F.accept||F.Accept||(F.Accept="application/json"),q!=="GET"&&q!=="HEAD"&&(F["content-type"]||F["Content-Type"]||(F["Content-Type"]="application/json"),Q=JSON.stringify(L.json===!0?Q:L.json))),ue.onreadystatechange=J,ue.onload=te,ue.onerror=k,ue.onprogress=function(){},ue.onabort=function(){Ee=!0},ue.ontimeout=k,ue.open(q,V,!z,L.username,L.password),z||(ue.withCredentials=!!L.withCredentials),!z&&L.timeout>0&&(fe=setTimeout(function(){if(!Ee){Ee=!0,ue.abort("timeout");var Se=new Error("XMLHttpRequest timeout");Se.code="ETIMEDOUT",k(Se)}},L.timeout)),ue.setRequestHeader)for(xe in F)F.hasOwnProperty(xe)&&ue.setRequestHeader(xe,F[xe]);else if(L.headers&&!b(L.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in L&&(ue.responseType=L.responseType),"beforeSend"in L&&typeof L.beforeSend=="function"&&L.beforeSend(ue),ue.send(Q||null),ue}function O(L){try{if(L.responseType==="document")return L.responseXML;var P=L.responseXML&&L.responseXML.documentElement.nodeName==="parsererror";if(L.responseType===""&&!P)return L.responseXML}catch{}return null}function R(){}},"./node_modules/xml-parse-from-string/index.js":T=>{T.exports=function(){return typeof self.DOMParser<"u"?function(u){var g=new self.DOMParser;return g.parseFromString(u,"application/xml")}:typeof self.ActiveXObject<"u"&&new self.ActiveXObject("Microsoft.XMLDOM")?function(u){var g=new self.ActiveXObject("Microsoft.XMLDOM");return g.async="false",g.loadXML(u),g}:function(u){var g=document.createElement("div");return g.innerHTML=u,g}}()},"./node_modules/xtend/immutable.js":T=>{T.exports=u;var I=Object.prototype.hasOwnProperty;function u(){for(var g={},C=0;C<arguments.length;C++){var v=arguments[C];for(var y in v)I.call(v,y)&&(g[y]=v[y])}return g}},"./src/components/animation.js":(T,I,u)=>{var g=u("./node_modules/super-animejs/lib/anime.es.js").default,C=u("./src/core/component.js").components,v=u("./src/core/component.js").registerComponent,y=u("./src/lib/three.js"),E=u("./src/utils/index.js"),b=new y.Color,m=new y.Color,w=E.entity.getComponentProperty,_=E.entity.setComponentProperty,O={},R="color",L="position",P="rotation",Y="scale",J="components",j="object3D";T.exports.Component=v("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(F){return F===!0||F==="true"?!0:F===!1||F==="false"?!1:parseInt(F,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var F=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){F.animationIsPlaying=!1,F.el.emit("animationcomplete",F.eventDetail,!1),F.id&&F.el.emit("animationcomplete__"+F.id,F.eventDetail,!1)}}},update:function(F){var z=this.config,X=this.data;this.animationIsPlaying=!1,this.data.enabled&&(!X.property||(z.autoplay=!1,z.direction=X.dir,z.duration=X.dur,z.easing=X.easing,z.elasticity=X.elasticity,z.loop=X.loop,z.round=X.round,this.createAndStartAnimation()))},tick:function(F,z){!this.animationIsPlaying||(this.time+=z,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){!this.paused||(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var F=this.data;if(this.updateConfig(),this.animationIsPlaying=!1,this.animation=g(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!(!F.autoplay||F.startEvents&&F.startEvents.length)){if(F.delay){setTimeout(this.beginAnimation,F.delay);return}this.beginAnimation()}},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){if(!!this.data.enabled){if(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=g(this.config),this.data.delay){setTimeout(this.beginAnimation,this.data.delay);return}this.beginAnimation()}},updateConfigForRawColor:function(){var F=this.config,z=this.data,X=this.el,fe,Ae,Se;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){fe=z.from===""?Ee(X,z.property):z.from,Se=z.to,this.setColorConfig(fe,Se),fe=this.fromColor,Se=this.toColor,this.targetsArray.length=0,this.targetsArray.push(fe),F.targets=this.targetsArray;for(Ae in Se)F[Ae]=Se[Ae];F.update=function(){var Be={};return function(Ge){var ht;ht=Ge.animatables[0].target,!(ht.r===Be.r&&ht.g===Be.g&&ht.b===Be.b)&&V(X,z.property,ht,z.type)}}()}},updateConfigForDefault:function(){var F=this.config,z=this.data,X=this.el,fe,Ae,Se,Be;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(z.from===""?fe=Q(z)?Ee(X,z.property):w(X,z.property):fe=z.from,Be=z.to,Se=!isNaN(fe||Be),Se?(fe=parseFloat(fe),Be=parseFloat(Be)):(fe=fe&&fe.toString(),Be=Be&&Be.toString()),Ae=z.to==="true"||z.to==="false"||z.to===!0||z.to===!1,Ae&&(fe=z.from==="true"||z.from===!0?1:0,Be=z.to==="true"||z.to===!0?1:0),this.targets.aframeProperty=fe,F.targets=this.targets,F.aframeProperty=Be,F.update=function(){var Ge;return function(ht){var xt;xt=ht.animatables[0].target.aframeProperty,xt!==Ge&&(Ge=xt,Ae&&(xt=xt>=1),Q(z)?V(X,z.property,xt,z.type):_(X,z.property,xt))}}())},updateConfigForVector:function(){var F=this.config,z=this.data,X=this.el,fe,Ae,Se;Ae=z.from!==""?E.coordinates.parse(z.from):w(X,z.property),Se=E.coordinates.parse(z.to),z.property===P&&(te(Ae),te(Se)),this.targetsArray.length=0,this.targetsArray.push(Ae),F.targets=this.targetsArray;for(fe in Se)F[fe]=Se[fe];if(z.property===L||z.property===P||z.property===Y){F.update=function(){var Be={};return function(Ge){var ht=Ge.animatables[0].target;z.property===Y&&(ht.x=Math.max(1e-4,ht.x),ht.y=Math.max(1e-4,ht.y),ht.z=Math.max(1e-4,ht.z)),!(ht.x===Be.x&&ht.y===Be.y&&ht.z===Be.z)&&(Be.x=ht.x,Be.y=ht.y,Be.z=ht.z,X.object3D[z.property].set(ht.x,ht.y,ht.z))}}();return}F.update=function(){var Be={};return function(Ge){var ht=Ge.animatables[0].target;ht.x===Be.x&&ht.y===Be.y&&ht.z===Be.z||(Be.x=ht.x,Be.y=ht.y,Be.z=ht.z,_(X,z.property,ht))}}()},updateConfig:function(){var F;F=k(this.el,this.data.property),Q(this.data)&&this.data.type===R?this.updateConfigForRawColor():F==="vec2"||F==="vec3"||F==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(F){var z,X=this.data,fe=this.el,Ae=this;return X.from!==""||!X.property.startsWith(J)||(z=q(X.property)[1],fe.components[z])?!1:(fe.addEventListener("componentinitialized",function Se(Be){Be.detail.name===z&&(F(),Ae.animation=g(Ae.config),fe.removeEventListener("componentinitialized",Se))}),!0)},stopRelatedAnimations:function(){var F,z;for(z in this.el.components)F=this.el.components[z],z!==this.attrName&&F.name==="animation"&&(!F.animationIsPlaying||F.data.property===this.data.property&&(F.animationIsPlaying=!1))},addEventListeners:function(){var F=this.data,z=this.el;ue(z,F.startEvents,this.onStartEvent),ue(z,F.pauseEvents,this.pauseAnimation),ue(z,F.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var F=this.data,z=this.el;xe(z,F.startEvents,this.onStartEvent),xe(z,F.pauseEvents,this.pauseAnimation),xe(z,F.resumeEvents,this.resumeAnimation)},setColorConfig:function(F,z){b.set(F),m.set(z),F=this.fromColor,z=this.toColor,F.r=b.r,F.g=b.g,F.b=b.b,z.r=m.r,z.g=m.g,z.b=m.b}});function k(F,z){var X,fe,Ae,Se;return Ae=z.split("."),fe=Ae[0],Se=Ae[1],X=F.components[fe]||C[fe],!X||Se&&!X.schema[Se]?null:Se?X.schema[Se].type:X.schema.type}function te(F){F.x=y.MathUtils.degToRad(F.x),F.y=y.MathUtils.degToRad(F.y),F.z=y.MathUtils.degToRad(F.z)}function ue(F,z,X){var fe;for(fe=0;fe<z.length;fe++)F.addEventListener(z[fe],X)}function xe(F,z,X){var fe;for(fe=0;fe<z.length;fe++)F.removeEventListener(z[fe],X)}function Ee(F,z){var X,fe,Ae;for(fe=q(z),Ae=F,X=0;X<fe.length;X++)Ae=Ae[fe[X]];if(Ae===void 0)throw console.log(F),new Error("[animation] property ("+z+") could not be found");return Ae}function V(F,z,X,fe){var Ae,Se,Be,Ge;for(z.startsWith("object3D.rotation")&&(X=y.MathUtils.degToRad(X)),Se=q(z),Ge=F,Ae=0;Ae<Se.length-1;Ae++)Ge=Ge[Se[Ae]];if(Be=Se[Se.length-1],fe===R){"r"in Ge[Be]?(Ge[Be].r=X.r,Ge[Be].g=X.g,Ge[Be].b=X.b):(Ge[Be].x=X.r,Ge[Be].y=X.g,Ge[Be].z=X.b);return}Ge[Be]=X}function q(F){return F in O||(O[F]=F.split(".")),O[F]}function Q(F){return F.isRawProperty||F.property.startsWith(J)||F.property.startsWith(j)}},"./src/components/camera.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/lib/three.js");T.exports.Component=g("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var v,y=this.el;v=this.camera=new C.PerspectiveCamera,y.setObject3D("camera",v)},update:function(v){var y=this.data,E=this.camera;E.aspect=y.aspect||window.innerWidth/window.innerHeight,E.far=y.far,E.fov=y.fov,E.near=y.near,E.zoom=y.zoom,E.updateProjectionMatrix(),this.updateActiveCamera(v),this.updateSpectatorCamera(v)},updateActiveCamera:function(v){var y=this.data,E=this.el,b=this.system;v&&v.active===y.active||y.spectator||(y.active&&b.activeCameraEl!==E?b.setActiveCamera(E):!y.active&&b.activeCameraEl===E&&b.disableActiveCamera())},updateSpectatorCamera:function(v){var y=this.data,E=this.el,b=this.system;v&&v.spectator===y.spectator||(y.spectator&&b.spectatorCameraEl!==E?b.setSpectatorCamera(E):!y.spectator&&b.spectatorCameraEl===E&&b.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},"./src/components/cursor.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/index.js"),v=C.bind,y={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},E={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},b={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},m={DOWN:["selectstart"],UP:["selectend"]},w="a-mouse-cursor-hover";T.exports.Component=g("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:C.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},multiple:!0,init:function(){var _=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=C.debounce(function(){_.canvasBounds=_.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=v(this.onCursorDown,this),this.onCursorUp=v(this.onCursorUp,this),this.onIntersection=v(this.onIntersection,this),this.onIntersectionCleared=v(this.onIntersectionCleared,this),this.onMouseMove=v(this.onMouseMove,this),this.onEnterVR=v(this.onEnterVR,this)},update:function(_){this.data.rayOrigin!==_.rayOrigin&&this.updateMouseEventListeners()},tick:function(){var _=this.el.sceneEl.frame,O=this.activeXRInput;this.data.rayOrigin==="xrselect"&&_&&O&&this.onMouseMove({frame:_,inputSource:O,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var _=this.el;_.removeState(E.HOVERING),_.removeState(E.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(E.HOVERED),this.removeEventListeners()},addEventListeners:function(){var _,O=this.data,R=this.el,L=this;function P(){_=R.sceneEl.canvas,!(O.downEvents.length||O.upEvents.length)&&(b.DOWN.forEach(function(Y){_.addEventListener(Y,L.onCursorDown)}),b.UP.forEach(function(Y){_.addEventListener(Y,L.onCursorUp)}))}_=R.sceneEl.canvas,_?P():R.sceneEl.addEventListener("render-target-loaded",P),O.downEvents.forEach(function(Y){R.addEventListener(Y,L.onCursorDown)}),O.upEvents.forEach(function(Y){R.addEventListener(Y,L.onCursorUp)}),R.addEventListener("raycaster-intersection",this.onIntersection),R.addEventListener("raycaster-closest-entity-changed",this.onIntersection),R.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),R.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),R.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var _,O=this.data,R=this.el,L=this;_=R.sceneEl.canvas,_&&!O.downEvents.length&&!O.upEvents.length&&(b.DOWN.forEach(function(P){_.removeEventListener(P,L.onCursorDown)}),b.UP.forEach(function(P){_.removeEventListener(P,L.onCursorUp)})),O.downEvents.forEach(function(P){R.removeEventListener(P,L.onCursorDown)}),O.upEvents.forEach(function(P){R.removeEventListener(P,L.onCursorUp)}),R.removeEventListener("raycaster-intersection",this.onIntersection),R.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),_.removeEventListener("mousemove",this.onMouseMove),_.removeEventListener("touchstart",this.onMouseMove),_.removeEventListener("touchmove",this.onMouseMove),R.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),R.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var _,O=this.el;_=O.sceneEl.canvas,_.removeEventListener("mousemove",this.onMouseMove),_.removeEventListener("touchmove",this.onMouseMove),O.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(_.addEventListener("mousemove",this.onMouseMove,!1),_.addEventListener("touchmove",this.onMouseMove,!1),O.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var _=new THREE.Vector3,O=new THREE.Vector2,R=new THREE.Vector3,L={origin:R,direction:_};return function(P){var Y=this.canvasBounds,J=this.el.sceneEl.camera,j,k,te,ue,xe,Ee,V,q;J.parent.updateMatrixWorld(),P.type==="touchmove"||P.type==="touchstart"?k=P.touches.item(0):k=P,j=k.clientX-Y.left,te=k.clientY-Y.top,O.x=j/Y.width*2-1,O.y=-(te/Y.height)*2+1,this.data.rayOrigin==="xrselect"&&(P.type==="selectstart"||P.type==="fakeselectevent")?(ue=P.frame,xe=P.inputSource,Ee=this.el.renderer.xr.getReferenceSpace(),V=ue.getPose(xe.targetRaySpace,Ee),q=V.transform,_.set(0,0,-1),_.applyQuaternion(q.orientation),R.copy(q.position)):P.type==="fakeselectout"?(_.set(0,1,0),R.set(0,9999,0)):J&&J.isPerspectiveCamera?(R.setFromMatrixPosition(J.matrixWorld),_.set(O.x,O.y,.5).unproject(J).sub(R).normalize()):J&&J.isOrthographicCamera?(R.set(O.x,O.y,(J.near+J.far)/(J.near-J.far)).unproject(J),_.set(0,0,-1).transformDirection(J.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+J.type),this.el.setAttribute("raycaster",L),P.type==="touchmove"&&P.preventDefault()}}(),onCursorDown:function(_){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&_.type==="touchstart"&&(this.onMouseMove(_),this.el.components.raycaster.checkIntersections(),_.preventDefault()),this.data.rayOrigin==="xrselect"&&_.type==="selectstart"&&(this.activeXRInput=_.inputSource,this.onMouseMove(_),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit(y.MOUSEDOWN,_),this.cursorDownEl=this.intersectedEl},onCursorUp:function(_){if(!!this.isCursorDown){this.isCursorDown=!1;var O=this.data;this.twoWayEmit(y.MOUSEUP,_),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(y.MOUSEUP,this.intersectedEventDetail)),(!O.fuse||O.rayOrigin==="mouse"||O.rayOrigin==="xrselect")&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(y.CLICK,_),O.rayOrigin==="xrselect"&&this.activeXRInput===_.inputSource&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,_.type==="touchend"&&_.preventDefault()}},onIntersection:function(_){var O,R=this.el,L,P,Y;L=_.detail.els[0]===R?1:0,Y=_.detail.intersections[L],P=_.detail.els[L],!!P&&this.intersectedEl!==P&&(this.intersectedEl&&(O=this.el.components.raycaster.getIntersection(this.intersectedEl),O&&O.distance<=Y.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(P,Y)))},onIntersectionCleared:function(_){var O=_.detail.clearedEls;O.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var _=this.el.sceneEl.xrSession,O=this;!_||this.data.rayOrigin!=="mouse"&&(m.DOWN.forEach(function(R){_.addEventListener(R,O.onCursorDown)}),m.UP.forEach(function(R){_.addEventListener(R,O.onCursorUp)}))},setIntersection:function(_,O){var R=this.el,L=this.data,P=this;this.intersectedEl!==_&&(this.intersectedEl=_,R.addState(E.HOVERING),_.addState(E.HOVERED),this.twoWayEmit(y.MOUSEENTER),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(w),!(L.fuseTimeout===0||!L.fuse||L.rayOrigin==="xrselect"||L.rayOrigin==="mouse")&&(R.addState(E.FUSING),this.twoWayEmit(y.FUSING),this.fuseTimeout=setTimeout(function(){R.removeState(E.FUSING),P.twoWayEmit(y.CLICK)},L.fuseTimeout)))},clearCurrentIntersection:function(_){var O,R,L,P=this.el;!this.intersectedEl||(this.intersectedEl.removeState(E.HOVERED),P.removeState(E.HOVERING),P.removeState(E.FUSING),this.twoWayEmit(y.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(w),this.intersectedEl=null,clearTimeout(this.fuseTimeout),_!==!0&&(L=this.el.components.raycaster.intersections,L.length!==0&&(O=L[0].object.el===P?1:0,R=L[O],R&&this.setIntersection(R.object.el,R))))},twoWayEmit:function(_,O){var R=this.el,L=this.intersectedEl,P;function Y(J,j){O instanceof MouseEvent?J.mouseEvent=O:typeof TouchEvent<"u"&&O instanceof TouchEvent&&(J.touchEvent=O)}P=this.el.components.raycaster.getIntersection(L),this.eventDetail.intersectedEl=L,this.eventDetail.intersection=P,Y(this.eventDetail),R.emit(_,this.eventDetail),L&&(this.intersectedEventDetail.intersection=P,Y(this.intersectedEventDetail),L.emit(_,this.intersectedEventDetail))}})},"./src/components/daydream-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,b=v.onButtonEvent,m="https://cdn.aframe.io/controllers/google/",w=m+"vr_controller_daydream.obj",_=m+"vr_controller_daydream.mtl",O=u("./src/utils/index.js").device.isWebXRAvailable,R="google-daydream",L="Daydream Controller",P=O?R:L,Y={axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},J={axes:{touchpad:[0,1]},buttons:["none","none","touchpad","menu","system"]},j=O?J:Y;T.exports.Component=g("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:j,bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var k=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(te){b(te.detail.id,"down",k)},this.onButtonUp=function(te){b(te.detail.id,"up",k)},this.onButtonTouchStart=function(te){b(te.detail.id,"touchstart",k)},this.onButtonTouchEnd=function(te){b(te.detail.id,"touchend",k)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var k=this.el;k.addEventListener("buttonchanged",this.onButtonChanged),k.addEventListener("buttondown",this.onButtonDown),k.addEventListener("buttonup",this.onButtonUp),k.addEventListener("touchstart",this.onButtonTouchStart),k.addEventListener("touchend",this.onButtonTouchEnd),k.addEventListener("model-loaded",this.onModelLoaded),k.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var k=this.el;k.removeEventListener("buttonchanged",this.onButtonChanged),k.removeEventListener("buttondown",this.onButtonDown),k.removeEventListener("buttonup",this.onButtonUp),k.removeEventListener("touchstart",this.onButtonTouchStart),k.removeEventListener("touchend",this.onButtonTouchEnd),k.removeEventListener("model-loaded",this.onModelLoaded),k.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,P,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var k=this.el,te=this.data;k.setAttribute("tracked-controls",{armModel:te.armModel,hand:te.hand,idPrefix:P,id:P,orientationOffset:te.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:w,mtl:_})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(k){var te=k.detail.model,ue;!this.data.model||(ue=this.buttonMeshes={},ue.menu=te.getObjectByName("AppButton_AppButton_Cylinder.004"),ue.system=te.getObjectByName("HomeButton_HomeButton_Cylinder.005"),ue.trackpad=te.getObjectByName("TouchPad_TouchPad_Cylinder.003"),ue.touchpad=te.getObjectByName("TouchPad_TouchPad_Cylinder.003"),te.position.set(0,0,-.04))},onAxisMoved:function(k){E(this,this.mapping.axes,k)},onButtonChanged:function(k){var te=this.mapping.buttons[k.detail.id];!te||this.el.emit(te+"changed",k.detail.state)},updateModel:function(k,te){!this.data.model||this.updateButtonModel(k,te)},updateButtonModel:function(k,te){var ue=this.buttonMeshes;if(!(!ue||!ue[k])){var xe;switch(te){case"down":xe=this.data.buttonHighlightColor;break;case"touchstart":xe=this.data.buttonTouchedColor;break;default:xe=this.data.buttonColor}ue[k].material.color.set(xe)}}})},"./src/components/gearvr-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,b=v.onButtonEvent,m=u("./src/utils/index.js").device.isWebXRAvailable,w="https://cdn.aframe.io/controllers/samsung/",_=w+"gear_vr_controller.obj",O=w+"gear_vr_controller.mtl",R="samsung-gearvr",L="Gear VR",P=m?R:L,Y={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},J={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},j=m?J:Y;T.exports.Component=g("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:j,bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var k=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(te){b(te.detail.id,"down",k)},this.onButtonUp=function(te){b(te.detail.id,"up",k)},this.onButtonTouchStart=function(te){b(te.detail.id,"touchstart",k)},this.onButtonTouchEnd=function(te){b(te.detail.id,"touchend",k)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var k=this.el;k.addEventListener("buttonchanged",this.onButtonChanged),k.addEventListener("buttondown",this.onButtonDown),k.addEventListener("buttonup",this.onButtonUp),k.addEventListener("touchstart",this.onButtonTouchStart),k.addEventListener("touchend",this.onButtonTouchEnd),k.addEventListener("model-loaded",this.onModelLoaded),k.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var k=this.el;k.removeEventListener("buttonchanged",this.onButtonChanged),k.removeEventListener("buttondown",this.onButtonDown),k.removeEventListener("buttonup",this.onButtonUp),k.removeEventListener("touchstart",this.onButtonTouchStart),k.removeEventListener("touchend",this.onButtonTouchEnd),k.removeEventListener("model-loaded",this.onModelLoaded),k.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,P,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var k=this.el,te=this.data;k.setAttribute("tracked-controls",{armModel:te.armModel,hand:te.hand,idPrefix:P,id:P,orientationOffset:te.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:_,mtl:O})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(k){var te=k.detail.model,ue;!this.data.model||(ue=this.buttonMeshes={},ue.trigger=te.children[2],ue.trackpad=te.children[1],ue.touchpad=te.children[1])},onButtonChanged:function(k){var te=this.mapping.buttons[k.detail.id];!te||this.el.emit(te+"changed",k.detail.state)},onAxisMoved:function(k){E(this,this.mapping.axes,k)},updateModel:function(k,te){!this.data.model||this.updateButtonModel(k,te)},updateButtonModel:function(k,te){var ue=this.buttonMeshes;if(!(!ue||!ue[k])){var xe;switch(te){case"down":xe=this.data.buttonHighlightColor;break;case"touchstart":xe=this.data.buttonTouchedColor;break;default:xe=this.data.buttonColor}ue[k].material.color.set(xe)}}})},"./src/components/generic-tracked-controller-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,b=v.onButtonEvent,m="generic",w={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]};T.exports.Component=g("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},mapping:w,bindMethods:function(){this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var _=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(O){b(O.detail.id,"down",_)},this.onButtonUp=function(O){b(O.detail.id,"up",_)},this.onButtonTouchStart=function(O){b(O.detail.id,"touchstart",_)},this.onButtonTouchEnd=function(O){b(O.detail.id,"touchend",_)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.el.addEventListener("controllerconnected",function(O){O.detail.name!==_.name&&(_.wasControllerConnected=!0,_.removeEventListeners(),_.removeControllersUpdateListener())})},addEventListeners:function(){var _=this.el;_.addEventListener("buttonchanged",this.onButtonChanged),_.addEventListener("buttondown",this.onButtonDown),_.addEventListener("buttonup",this.onButtonUp),_.addEventListener("touchstart",this.onButtonTouchStart),_.addEventListener("touchend",this.onButtonTouchEnd),_.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var _=this.el;_.removeEventListener("buttonchanged",this.onButtonChanged),_.removeEventListener("buttondown",this.onButtonDown),_.removeEventListener("buttonup",this.onButtonUp),_.removeEventListener("touchstart",this.onButtonTouchStart),_.removeEventListener("touchend",this.onButtonTouchEnd),_.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var _=this.data,O=_.hand?_.hand:void 0;y(this,m,{hand:O,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var _=this.el,O=this.data;if(this.el.components["tracked-controls"]){this.removeEventListeners();return}_.setAttribute("tracked-controls",{hand:O.hand,idPrefix:m,orientationOffset:O.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(_){var O=this.mapping.buttons[_.detail.id];!O||this.el.emit(O+"changed",_.detail.state)},onAxisMoved:function(_){E(this,this.mapping.axes,_)},initDefaultModel:function(){var _=this.modelEl=document.createElement("a-entity");_.setAttribute("geometry",{primitive:"sphere",radius:.03}),_.setAttribute("material",{color:this.data.color}),this.el.appendChild(_)}})},"./src/components/geometry.js":(T,I,u)=>{var g=u("./src/core/geometry.js").geometries,C=u("./src/core/geometry.js").geometryNames,v=u("./src/core/component.js").registerComponent,y=u("./src/lib/three.js"),E=new y.BufferGeometry;T.exports.Component=v("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:C,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(b){var m=this.data,w=this.el,_,O=this.system;this.geometry&&(O.unuseGeometry(b),this.geometry=null),this.geometry=O.getOrCreateGeometry(m),_=w.getObject3D("mesh"),_?_.geometry=this.geometry:(_=new y.Mesh,_.geometry=this.geometry,this.el.getAttribute("material")||(_.material=new y.MeshStandardMaterial({color:Math.random()*16777215,metalness:0,roughness:.5})),w.setObject3D("mesh",_))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=E,this.geometry=null},updateSchema:function(b){var m=this.oldData&&this.oldData.primitive,w=b.primitive,_=g[w]&&g[w].schema;if(!_)throw new Error("Unknown geometry schema `"+w+"`");m&&m===w||this.extendSchema(_)}})},"./src/components/gltf-model.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/lib/three.js"),v=u("./src/utils/index.js"),y=v.debug("components:gltf-model:warn");T.exports.Component=g("gltf-model",{schema:{type:"model"},init:function(){var E=this,b=this.system.getDRACOLoader(),m=this.system.getMeshoptDecoder(),w=this.system.getKTX2Loader();this.model=null,this.loader=new C.GLTFLoader,b&&this.loader.setDRACOLoader(b),m?this.ready=m.then(function(_){E.loader.setMeshoptDecoder(_)}):this.ready=Promise.resolve(),w&&this.loader.setKTX2Loader(w)},update:function(){var E=this,b=this.el,m=this.data;!m||(this.remove(),this.ready.then(function(){E.loader.load(m,function(_){E.model=_.scene||_.scenes[0],E.model.animations=_.animations,b.setObject3D("mesh",E.model),b.emit("model-loaded",{format:"gltf",model:E.model})},void 0,function(_){var O=_&&_.message?_.message:"Failed to load glTF model";y(O),b.emit("model-error",{format:"gltf",src:m})})}))},remove:function(){!this.model||this.el.removeObject3D("mesh")}})},"./src/components/hand-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C={toonLeft:"https://cdn.aframe.io/controllers/hands/leftHand.glb",toonRight:"https://cdn.aframe.io/controllers/hands/rightHand.glb",lowPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandLow.glb",lowPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandLow.glb",highPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandHigh.glb",highPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandHigh.glb"},v={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},y={};y[v.fist]="grip",y[v.thumbUp]="pistol",y[v.point]="pointing",T.exports.Component=g("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},init:function(){var m=this,w=this.el;this.gesture=v.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){m.handleButton("grip","down")},this.onGripUp=function(){m.handleButton("grip","up")},this.onTrackpadDown=function(){m.handleButton("trackpad","down")},this.onTrackpadUp=function(){m.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){m.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){m.handleButton("trackpad","touchend")},this.onTriggerDown=function(){m.handleButton("trigger","down")},this.onTriggerUp=function(){m.handleButton("trigger","up")},this.onTriggerTouchStart=function(){m.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){m.handleButton("trigger","touchend")},this.onGripTouchStart=function(){m.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){m.handleButton("grip","touchend")},this.onThumbstickDown=function(){m.handleButton("thumbstick","down")},this.onThumbstickUp=function(){m.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){m.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){m.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){m.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){m.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){m.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){m.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),w.addEventListener("controllerconnected",this.onControllerConnected),w.addEventListener("controllerdisconnected",this.onControllerDisconnected),w.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(m,w){var _=this.el.getObject3D("mesh");!_||!_.mixer||_.mixer.update(w/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var m=this.el;m.addEventListener("gripdown",this.onGripDown),m.addEventListener("gripup",this.onGripUp),m.addEventListener("trackpaddown",this.onTrackpadDown),m.addEventListener("trackpadup",this.onTrackpadUp),m.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),m.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),m.addEventListener("triggerdown",this.onTriggerDown),m.addEventListener("triggerup",this.onTriggerUp),m.addEventListener("triggertouchstart",this.onTriggerTouchStart),m.addEventListener("triggertouchend",this.onTriggerTouchEnd),m.addEventListener("griptouchstart",this.onGripTouchStart),m.addEventListener("griptouchend",this.onGripTouchEnd),m.addEventListener("thumbstickdown",this.onThumbstickDown),m.addEventListener("thumbstickup",this.onThumbstickUp),m.addEventListener("abuttontouchstart",this.onAorXTouchStart),m.addEventListener("abuttontouchend",this.onAorXTouchEnd),m.addEventListener("bbuttontouchstart",this.onBorYTouchStart),m.addEventListener("bbuttontouchend",this.onBorYTouchEnd),m.addEventListener("xbuttontouchstart",this.onAorXTouchStart),m.addEventListener("xbuttontouchend",this.onAorXTouchEnd),m.addEventListener("ybuttontouchstart",this.onBorYTouchStart),m.addEventListener("ybuttontouchend",this.onBorYTouchEnd),m.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),m.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var m=this.el;m.removeEventListener("gripdown",this.onGripDown),m.removeEventListener("gripup",this.onGripUp),m.removeEventListener("trackpaddown",this.onTrackpadDown),m.removeEventListener("trackpadup",this.onTrackpadUp),m.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),m.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),m.removeEventListener("triggerdown",this.onTriggerDown),m.removeEventListener("triggerup",this.onTriggerUp),m.removeEventListener("triggertouchstart",this.onTriggerTouchStart),m.removeEventListener("triggertouchend",this.onTriggerTouchEnd),m.removeEventListener("griptouchstart",this.onGripTouchStart),m.removeEventListener("griptouchend",this.onGripTouchEnd),m.removeEventListener("thumbstickdown",this.onThumbstickDown),m.removeEventListener("thumbstickup",this.onThumbstickUp),m.removeEventListener("abuttontouchstart",this.onAorXTouchStart),m.removeEventListener("abuttontouchend",this.onAorXTouchEnd),m.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),m.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),m.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),m.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),m.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),m.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),m.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),m.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(m){var w,_=this.el,O=this.data.hand,R=this.data.handModelStyle,L=this.data.color,P=this;if(w={hand:O,model:!1},O!==m){var Y=C[R+O.charAt(0).toUpperCase()+O.slice(1)];this.loader.load(Y,function(J){var j=J.scene.children[0],k=O==="left"?Math.PI/2:-Math.PI/2,te=_.sceneEl.hasWebXR?-Math.PI/2:0;j.mixer=new THREE.AnimationMixer(j),P.clips=J.animations,_.setObject3D("mesh",j);var ue=j.children[1].material;ue.color=new THREE.Color(L),j.position.set(0,0,0),j.rotation.set(te,0,k),_.setAttribute("magicleap-controls",w),_.setAttribute("vive-controls",w),_.setAttribute("oculus-touch-controls",w),_.setAttribute("windows-motion-controls",w),_.setAttribute("hp-mixed-reality-controls",w)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(m,w){var _,O=w==="down",R=w==="touchstart";if(w.indexOf("touch")===0){if(R===this.touchedButtons[m])return;this.touchedButtons[m]=R}else{if(O===this.pressedButtons[m])return;this.pressedButtons[m]=O}_=this.gesture,this.gesture=this.determineGesture(),this.gesture!==_&&(this.animateGesture(this.gesture,_),this.emitGestureEvents(this.gesture,_))},determineGesture:function(){var m,w=this.pressedButtons.grip,_=this.pressedButtons.surface||this.touchedButtons.surface,O=this.pressedButtons.trackpad||this.touchedButtons.trackpad,R=this.pressedButtons.trigger||this.touchedButtons.trigger,L=this.touchedButtons.AorX||this.touchedButtons.BorY,P=b(this.el.components["tracked-controls"]);return P?w||R?m=v.fist:O&&(m=v.point):w?_||L||O?m=R?v.fist:v.point:m=R?v.thumbUp:v.pointThumb:R&&(m=v.hold),m},getClip:function(m){var w,_;for(_=0;_<this.clips.length;_++)if(w=this.clips[_],w.name===m)return w},animateGesture:function(m,w){if(m){this.playAnimation(m||v.open,w,!1);return}this.playAnimation(w,w,!0)},emitGestureEvents:function(m,w){var _=this.el,O;w!==m&&(O=E(w,!1),O&&_.emit(O),O=E(m,!0),O&&_.emit(O))},playAnimation:function(m,w,_){var O,R,L=this.el.getObject3D("mesh"),P;if(!!L){if(L.mixer.stopAllAction(),O=this.getClip(m),P=L.mixer.clipAction(O),P.clampWhenFinished=!0,P.loop=THREE.LoopRepeat,P.repetitions=0,P.timeScale=_?-1:1,P.time=_?O.duration:0,P.weight=1,!w||m===w){L.mixer.stopAllAction(),P.play();return}O=this.getClip(w),R=L.mixer.clipAction(O),R.weight=.15,R.play(),P.play(),R.crossFadeTo(P,.15,!0)}}});function E(m,w){var _;if(!!m){if(_=y[m],_==="grip")return _+(w?"close":"open");if(_==="point")return _+(w?"up":"down");if(_==="pointing"||_==="pistol")return _+(w?"start":"end")}}function b(m){var w=m&&m.controller,_=w&&(w.id&&w.id.indexOf("OpenVR ")===0||w.profiles&&w.profiles[0]&&w.profiles[0]==="htc-vive");return _}},"./src/components/hand-tracking-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E="https://cdn.aframe.io/controllers/oculus-hands/v4/left.glb",b="https://cdn.aframe.io/controllers/oculus-hands/v4/right.glb",m=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],w=.015,_=.03,O=.5;T.exports.Component=g("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"}},bindMethods:function(){this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var R=0;R<this.jointEls.length;++R)this.jointEls[R].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var R=0;R<this.jointEls.length;++R)this.jointEls[R].object3D.visible=!1},init:function(){var R=this.el.sceneEl,L=R.getAttribute("webxr").optionalFeatures;L.push("hand-tracking"),R.setAttribute("webxr",{optionalFeatures:L}),this.onModelLoaded=this.onModelLoaded.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3},this.indexTipPosition=new THREE.Vector3,this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace)},updateReferenceSpace:function(){var R=this,L=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,!!L){var P=R.el.sceneEl.systems.webxr.sessionReferenceSpaceType;L.requestReferenceSpace(P).then(function(Y){R.referenceSpace=Y.getOffsetReferenceSpace(new XRRigidTransform({x:0,y:1.5,z:0}))}).catch(function(Y){throw R.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(P,"tracked-controls-webxr uses reference space "+P),Y})}},checkIfControllerPresent:function(){var R=this.data,L=R.hand?R.hand:void 0;y(this,"",{hand:L,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var R=this.el.sceneEl,L=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,P=R.frame,Y=this.el.components["tracked-controls-webxr"];!L||!P||!Y||L.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),P.getJointPose&&this.updateHandModel(),this.detectGesture())},updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(R){for(var L=this.bones,P=0;P<L.length;P++)if(L[P].name===R)return L[P];return null},updateHandMeshModel:function(){var R=this.el.sceneEl.frame,L=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,P=this.referenceSpace;if(!(!L||!this.mesh||!P)){this.mesh.visible=!1;for(var Y of L.hand.values()){var J,j,k;j=R.getJointPose(Y,P),J=this.getBone(Y.jointName),J!=null&&j&&(k=j.transform,this.mesh.visible=!0,J.position.copy(k.position),J.quaternion.copy(k.orientation))}}},updateHandDotsModel:function(){var R=this.el.sceneEl.frame,L=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,P=this.el.components["tracked-controls-webxr"],Y=P.system.referenceSpace,J,j,k,te=0;for(var ue of L.hand.values())J=this.jointEls[te++],j=J.object3D,k=R.getJointPose(ue,Y),J.object3D.visible=!!k,k&&(j.matrix.elements=k.transform.matrix,j.matrix.decompose(j.position,j.rotation,j.scale),J.setAttribute("scale",{x:k.radius,y:k.radius,z:k.radius}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var R=new THREE.Vector3;return function(){var L=this.el.sceneEl.frame,P=this.indexTipPosition,Y=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,J=this.el.components["tracked-controls-webxr"],j=this.referenceSpace||J.system.referenceSpace,k=Y.hand.get("index-finger-tip"),te=Y.hand.get("thumb-tip");if(!(!k||!te)){var ue=L.getJointPose(k,j),xe=L.getJointPose(te,j);if(!(!ue||!xe)){R.copy(xe.transform.position),P.copy(ue.transform.position);var Ee=P.distanceTo(R);Ee<w&&this.isPinched===!1&&(this.isPinched=!0,this.pinchEventDetail.position.copy(P).lerp(R,O),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchstarted",this.pinchEventDetail)),Ee>_&&this.isPinched===!0&&(this.isPinched=!1,this.pinchEventDetail.position.copy(P).lerp(R,O),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchended",this.pinchEventDetail)),this.isPinched&&(this.pinchEventDetail.position.copy(P).lerp(R,O),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchmoved",this.pinchEventDetail)),P.y+=1.5}}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var R=this.el,L=this.data;R.setAttribute("tracked-controls",{hand:L.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var R;this.checkIfControllerPresent(),R=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,!!this.el.getObject3D("mesh")&&(!R||!R.hand||!R.hand[0])&&(this.el.getObject3D("mesh").visible=!1)},initDefaultModel:function(){this.el.getObject3D("mesh")||(this.data.modelStyle==="dots"&&this.initDotsModel(),this.data.modelStyle==="mesh"&&this.initMeshHandModel())},initDotsModel:function(){if(this.jointEls.length===0)for(var R=0;R<m.length;++R){var L=this.jointEl=document.createElement("a-entity");L.setAttribute("geometry",{primitive:"sphere",radius:1}),L.setAttribute("material",{color:this.data.modelColor}),L.object3D.visible=!1,this.el.appendChild(L),this.jointEls.push(L)}},initMeshHandModel:function(){var R=this.data.hand==="left"?E:b;this.el.setAttribute("gltf-model",R)},onModelLoaded:function(){var R=this.mesh=this.el.getObject3D("mesh").children[0],L=this.skinnedMesh=R.getObjectByProperty("type","SkinnedMesh");!this.skinnedMesh||(this.bones=L.skeleton.bones,this.el.removeObject3D("mesh"),R.position.set(0,1.5,0),R.rotation.set(0,0,0),L.frustumCulled=!1,L.material=new THREE.MeshStandardMaterial({skinning:!0,color:this.data.modelColor}),this.el.setObject3D("mesh",R))}})},"./src/components/hide-on-enter-ar.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent;T.exports.Component=g("hide-on-enter-ar",{init:function(){var C=this;this.el.sceneEl.addEventListener("enter-vr",function(){C.el.sceneEl.is("ar-mode")&&(C.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){C.el.object3D.visible=!0})}})},"./src/components/hp-mixed-reality-controls.js":(T,I,u)=>{var g=u("./src/utils/bind.js"),C=u("./src/core/component.js").registerComponent,v=u("./src/lib/three.js"),y=u("./src/utils/tracked-controls.js"),E=y.checkControllerPresentAndSetup,b=y.emitIfAxesChanged,m=y.onButtonEvent,w="hp-mixed-reality",_="https://cdn.aframe.io/controllers/hp/mixed-reality/",O={x:0,y:0,z:.06},R={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},L={left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}};T.exports.Component=C("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:L,init:function(){var P=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=g(this.onButtonChanged,this),this.onButtonDown=function(Y){m(Y.detail.id,"down",P,P.data.hand)},this.onButtonUp=function(Y){m(Y.detail.id,"up",P,P.data.hand)},this.onButtonTouchEnd=function(Y){m(Y.detail.id,"touchend",P,P.data.hand)},this.onButtonTouchStart=function(Y){m(Y.detail.id,"touchstart",P,P.data.hand)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var P=this.data;this.controllerIndex=P.hand==="right"?0:P.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=g(this.onModelLoaded,this),this.onControllersUpdate=g(this.onControllersUpdate,this),this.checkIfControllerPresent=g(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=g(this.removeControllersUpdateListener,this),this.onAxisMoved=g(this.onAxisMoved,this)},addEventListeners:function(){var P=this.el;P.addEventListener("buttonchanged",this.onButtonChanged),P.addEventListener("buttondown",this.onButtonDown),P.addEventListener("buttonup",this.onButtonUp),P.addEventListener("touchstart",this.onButtonTouchStart),P.addEventListener("touchend",this.onButtonTouchEnd),P.addEventListener("axismove",this.onAxisMoved),P.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var P=this.el;P.removeEventListener("buttonchanged",this.onButtonChanged),P.removeEventListener("buttondown",this.onButtonDown),P.removeEventListener("buttonup",this.onButtonUp),P.removeEventListener("touchstart",this.onButtonTouchStart),P.removeEventListener("touchend",this.onButtonTouchEnd),P.removeEventListener("axismove",this.onAxisMoved),P.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var P=this.data;E(this,w,{index:this.controllerIndex,hand:P.hand})},injectTrackedControls:function(){var P=this.el,Y=this.data;P.setAttribute("tracked-controls",{idPrefix:w,hand:Y.hand,controller:this.controllerIndex,orientationOffset:Y.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",_+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(P){var Y=this.mapping[this.data.hand].buttons[P.detail.id],J;!Y||(Y==="trigger"&&(J=P.detail.state.value,console.log("analog value of trigger press: "+J)),this.el.emit(Y+"changed",P.detail.state))},onModelLoaded:function(P){var Y=P.detail.model;!this.data.model||(Y.position.copy(O),Y.rotation.copy(R),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new v.Vector3(0,0,0)}))},onAxisMoved:function(P){b(this,this.mapping.axes,P)}})},"./src/components/index.js":(T,I,u)=>{u("./src/components/animation.js"),u("./src/components/camera.js"),u("./src/components/cursor.js"),u("./src/components/daydream-controls.js"),u("./src/components/gearvr-controls.js"),u("./src/components/geometry.js"),u("./src/components/generic-tracked-controller-controls.js"),u("./src/components/gltf-model.js"),u("./src/components/hand-tracking-controls.js"),u("./src/components/hand-controls.js"),u("./src/components/hide-on-enter-ar.js"),u("./src/components/hp-mixed-reality-controls.js"),u("./src/components/layer.js"),u("./src/components/laser-controls.js"),u("./src/components/light.js"),u("./src/components/line.js"),u("./src/components/link.js"),u("./src/components/look-controls.js"),u("./src/components/magicleap-controls.js"),u("./src/components/material.js"),u("./src/components/obj-model.js"),u("./src/components/oculus-go-controls.js"),u("./src/components/oculus-touch-controls.js"),u("./src/components/position.js"),u("./src/components/raycaster.js"),u("./src/components/rotation.js"),u("./src/components/scale.js"),u("./src/components/shadow.js"),u("./src/components/sound.js"),u("./src/components/text.js"),u("./src/components/tracked-controls.js"),u("./src/components/tracked-controls-webvr.js"),u("./src/components/tracked-controls-webxr.js"),u("./src/components/visible.js"),u("./src/components/valve-index-controls.js"),u("./src/components/vive-controls.js"),u("./src/components/vive-focus-controls.js"),u("./src/components/wasd-controls.js"),u("./src/components/windows-motion-controls.js"),u("./src/components/scene/ar-hit-test.js"),u("./src/components/scene/background.js"),u("./src/components/scene/debug.js"),u("./src/components/scene/device-orientation-permission-ui.js"),u("./src/components/scene/embedded.js"),u("./src/components/scene/inspector.js"),u("./src/components/scene/fog.js"),u("./src/components/scene/keyboard-shortcuts.js"),u("./src/components/scene/pool.js"),u("./src/components/scene/reflection.js"),u("./src/components/scene/screenshot.js"),u("./src/components/scene/stats.js"),u("./src/components/scene/vr-mode-ui.js")},"./src/components/laser-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/index.js");g("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var v=this.config,y=this.data,E=this.el,b=this,m={hand:y.hand,model:y.model};E.setAttribute("daydream-controls",m),E.setAttribute("gearvr-controls",m),E.setAttribute("hp-mixed-reality-controls",m),E.setAttribute("magicleap-controls",m),E.setAttribute("oculus-go-controls",m),E.setAttribute("oculus-touch-controls",m),E.setAttribute("valve-index-controls",m),E.setAttribute("vive-controls",m),E.setAttribute("vive-focus-controls",m),E.setAttribute("windows-motion-controls",m),E.setAttribute("generic-tracked-controller-controls",{hand:m.hand}),E.addEventListener("controllerconnected",w),E.addEventListener("controllerdisconnected",_),E.addEventListener("controllermodelready",function(O){w(O),b.modelReady=!0});function w(O){var R=v[O.detail.name];if(!!R){var L=C.extend({showLine:!0},R.raycaster||{});O.detail.rayOrigin&&(L.origin=O.detail.rayOrigin.origin,L.direction=O.detail.rayOrigin.direction,L.showLine=!0),O.detail.rayOrigin||!b.modelReady?E.setAttribute("raycaster",L):E.setAttribute("raycaster","showLine",!0),E.setAttribute("cursor",C.extend({fuse:!1},R.cursor))}}function _(){E.setAttribute("raycaster","showLine",!1)}},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"gearvr-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:.001,z:0}}},"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},"./src/components/layer.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/index.js"),v=C.debug("components:layer:warn");T.exports.Component=g("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var E=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=E.createFramebuffer();var b=this.el.sceneEl.getAttribute("webxr").requiredFeatures;b.push("layers"),this.el.sceneEl.getAttribute("webxr","requiredFeatures",b),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(E){this.data.src!==E.src&&this.updateSrc()},updateSrc:function(){var E=this.data.type;if(this.texture=void 0,E==="quad"){this.loadQuadImage();return}if(E==="monocubemap"||E==="stereocubemap"){this.loadCubeMapImages();return}},loadCubeMapImages:function(){var E,b=this.xrGLFactory,m=this.el.sceneEl.frame,w=this.data.src,_=this.data.type;this.visibilityChanged=!1,this.layer&&(_!=="monocubemap"&&_!=="stereocubemap"||(w.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,_==="monocubemap"?(E=b.getSubImage(this.layer,m),this.loadCubeMapImage(E.colorTexture,w,0)):(E=b.getSubImage(this.layer,m,"left"),this.loadCubeMapImage(E.colorTexture,w,0),E=b.getSubImage(this.layer,m,"right"),this.loadCubeMapImage(E.colorTexture,w,6))))},loadQuadImage:function(){var E=this.data.src,b=this;this.el.sceneEl.systems.material.loadTexture(E,{src:E},function(w){b.el.sceneEl.renderer.initTexture(w),b.texture=w,E.tagName==="VIDEO"&&setTimeout(function(){b.textureIsVideo=!0},1e3),b.layer&&(b.layer.height=b.data.height/2||b.texture.image.height/1e3,b.layer.width=b.data.width/2||b.texture.image.width/1e3,b.needsRedraw=!0),b.updateQuadPanel()})},preGenerateCubeMapTextures:function(E,b){this.data.type==="monocubemap"?this.generateCubeMapTextures(E,0,b):(this.generateCubeMapTextures(E,0,b),this.generateCubeMapTextures(E,6,b))},generateCubeMapTextures:function(E,b,m){for(var w=this.data,_=this.cubeFaceSize,O=Math.min(E.width,E.height),R=[],L,P,Y=0;Y<6;Y++){var J=document.createElement("CANVAS");J.width=J.height=_;var j=J.getContext("2d");w.rotateCubemap&&(Y===2||Y===3)&&(j.save(),j.translate(_,_),j.rotate(Math.PI)),j.drawImage(E,(Y+b)*O,0,O,O,0,0,_,_),j.restore(),m&&m(),R.push(J)}return w.rotateCubemap&&(L=R[0],P=R[1],R[0]=P,R[1]=L,L=R[4],P=R[5],R[4]=P,R[5]=L),m&&m(),R},loadCubeMapImage:function(E,b,m){var w=this.el.sceneEl.renderer.getContext(),_;w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!1),w.bindTexture(w.TEXTURE_CUBE_MAP,E),!b.complete||this.loadingScreen?_=this.loadingScreenImages:_=this.generateCubeMapTextures(b,m);var O=0;_.forEach(function(R,L){w.texSubImage2D(w.TEXTURE_CUBE_MAP_POSITIVE_X+L,0,0,0,w.RGBA,w.UNSIGNED_BYTE,R),O=w.getError()}),O!==0&&console.log("renderingError, WebGL Error Code: "+O),w.bindTexture(w.TEXTURE_CUBE_MAP,null)},tick:function(){!this.el.sceneEl.xrSession||(!this.layer&&this.el.sceneEl.is("vr-mode")&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),!(!this.needsRedraw&&!this.layer.needsRedraw&&!this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var E=this,b=this.data.type;if(this.el.sceneEl.xrSession.onvisibilitychange=function(m){E.visibilityChanged=m.session.visibilityState!=="hidden"},b==="quad"){this.initQuadLayer();return}if(b==="monocubemap"||b==="stereocubemap"){this.initCubeMapLayer();return}},initQuadLayer:function(){var E=this.el.sceneEl,b=E.renderer.getContext(),m=this.xrGLFactory=new XRWebGLBinding(E.xrSession,b);!this.texture||(this.layer=m.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),E.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var E=this.data.src,b=this.el.sceneEl,m=b.renderer.getContext(),w=m.getParameter(m.MAX_CUBE_MAP_TEXTURE_SIZE),_=this.cubeFaceSize=Math.min(w,Math.min(E.width,E.height)),O=this.xrGLFactory=new XRWebGLBinding(b.xrSession,m);this.layer=O.createCubeLayer({space:this.referenceSpace,viewPixelWidth:_,viewPixelHeight:_,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),b.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var E=this.cubeFaceSize,b=this.loadingScreenImages=[],m=0;m<6;m++){var w=document.createElement("CANVAS");w.width=w.height=E;var _=w.getContext("2d");w.width=w.height=E,_.fillStyle="black",_.fillRect(0,0,E,E),m!==2&&m!==3&&(_.translate(E,0),_.scale(-1,1),_.fillStyle="white",_.font="30px Arial",_.fillText("Loading",E/2,E/2)),b.push(w)}},destroyLayer:function(){!this.layer||(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(E){this.layerEnabled=E,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var E=this.quadPanelEl;this.quadPanelEl||(E=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(E)),E.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),E.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var E=this.el.sceneEl,b=this.el.sceneEl.renderer.getContext(),m=this.xrGLFactory.getSubImage(this.layer,E.frame),w=E.renderer.properties.get(this.texture).__webglTexture,_=b.getParameter(b.FRAMEBUFFER_BINDING);b.viewport(m.viewport.x,m.viewport.y,m.viewport.width,m.viewport.height),b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,m.colorTexture,0),y(b,w,m,this.data.src),b.bindFramebuffer(b.FRAMEBUFFER,_)},updateTransform:function(){var E=this.el,b=this.position,m=this.quaternion;E.object3D.updateMatrixWorld(),b.setFromMatrixPosition(E.object3D.matrixWorld),m.setFromRotationMatrix(E.object3D.matrixWorld),this.layerEnabled||b.set(0,0,1e8),this.layer.transform=new XRRigidTransform(b,m)},onEnterVR:function(){var E=this.el.sceneEl,b=E.xrSession;if(!E.hasWebXR||!XRWebGLBinding||!b){v("The layer component requires WebXR and the layers API enabled");return}b.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.needsRedraw=!0,this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(E){this.referenceSpace=E}});function y(E,b,m,w){var _=E.createFramebuffer(),O=m.viewport.x,R=m.viewport.y,L=m.viewport.x+m.viewport.width,P=m.viewport.y+m.viewport.height;w.tagName==="VIDEO"&&(E.bindTexture(E.TEXTURE_2D,b),E.texSubImage2D(E.TEXTURE_2D,0,0,0,w.width,w.height,E.RGB,E.UNSIGNED_BYTE,w)),E.bindFramebuffer(E.READ_FRAMEBUFFER,_),E.framebufferTexture2D(E.READ_FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,b,0),E.readBuffer(E.COLOR_ATTACHMENT0),E.blitFramebuffer(0,0,w.width,w.height,O,R,L,P,E.COLOR_BUFFER_BIT,E.NEAREST),E.bindFramebuffer(E.READ_FRAMEBUFFER,null),E.deleteFramebuffer(_)}},"./src/components/light.js":(T,I,u)=>{var g=u("./src/utils/bind.js"),C=u("./src/utils/index.js"),v=C.diff,y=u("./src/utils/debug.js"),E=u("./src/core/component.js").registerComponent,b=u("./src/lib/three.js"),m=u("./src/utils/math.js"),w=b.MathUtils.degToRad,_=y("components:light:warn"),O=new b.CubeTextureLoader,R={};T.exports.Component=E("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var L=this.el;this.light=null,this.defaultTarget=null,this.rendererSystem=this.el.sceneEl.systems.renderer,this.system.registerLight(L)},update:function(L){var P=this.data,Y=v(P,L),J=this.light,j=this.rendererSystem,k=this;if(J&&!("type"in Y)){var te=!1;Object.keys(Y).forEach(function(ue){var xe=P[ue];switch(ue){case"color":{J.color.set(xe),j.applyColorCorrection(J.color);break}case"groundColor":{J.groundColor.set(xe),j.applyColorCorrection(J.groundColor);break}case"angle":{J.angle=w(xe);break}case"target":{xe===null?(P.type==="spot"||P.type==="directional")&&(J.target=k.defaultTarget):xe.hasLoaded?k.onSetTarget(xe,J):xe.addEventListener("loaded",g(k.onSetTarget,k,xe,J));break}case"envMap":k.updateProbeMap(P,J);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":te||(k.updateShadow(),te=!0);break;case"shadowCameraAutomatic":P.shadowCameraAutomatic?k.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(P.shadowCameraAutomatic)):k.shadowCameraAutomaticEls=[];break;default:J[ue]=xe}});return}this.setLight(this.data),this.updateShadow()},tick:function(){var L=new b.Box3,P=new b.Vector3,Y=new b.Vector3,J=new b.Matrix4,j=new b.Sphere,k=new b.Vector3;return function(){if(!!(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof b.OrthographicCamera&&this.shadowCameraAutomaticEls.length)){var te=this.light.shadow.camera;te.getWorldDirection(P),te.getWorldPosition(Y),J.copy(te.matrixWorld),J.invert(),te.near=1,te.left=1e5,te.right=-1e5,te.top=-1e5,te.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(ue){L.setFromObject(ue.object3D),L.getBoundingSphere(j);var xe=m.distanceOfPointFromPlane(Y,P,j.center),Ee=m.nearestPointInPlane(Y,P,j.center,k),V=Ee.applyMatrix4(J);te.near=Math.min(-xe-j.radius-1,te.near),te.left=Math.min(-j.radius+V.x,te.left),te.right=Math.max(j.radius+V.x,te.right),te.top=Math.max(j.radius+V.y,te.top),te.bottom=Math.min(-j.radius+V.y,te.bottom)}),te.updateProjectionMatrix()}}}(),setLight:function(L){var P=this.el,Y=this.getLight(L);Y&&(this.light&&P.removeObject3D("light"),this.light=Y,this.light.el=P,P.setObject3D("light",this.light),(L.type==="spot"||L.type==="directional"||L.type==="hemisphere")&&P.getObject3D("light").translateY(-1),L.type==="spot"&&(P.setObject3D("light-target",this.defaultTarget),P.getObject3D("light-target").position.set(0,0,-1)),L.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(L.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var L=this.el,P=this.data,Y=this.light;Y.castShadow=P.castShadow;var J=L.getObject3D("cameraHelper");if(P.shadowCameraVisible&&!J?L.setObject3D("cameraHelper",new b.CameraHelper(Y.shadow.camera)):!P.shadowCameraVisible&&J&&L.removeObject3D("cameraHelper"),!P.castShadow)return Y;Y.shadow.bias=P.shadowBias,Y.shadow.radius=P.shadowRadius,Y.shadow.mapSize.height=P.shadowMapHeight,Y.shadow.mapSize.width=P.shadowMapWidth,Y.shadow.camera.near=P.shadowCameraNear,Y.shadow.camera.far=P.shadowCameraFar,Y.shadow.camera instanceof b.OrthographicCamera?(Y.shadow.camera.top=P.shadowCameraTop,Y.shadow.camera.right=P.shadowCameraRight,Y.shadow.camera.bottom=P.shadowCameraBottom,Y.shadow.camera.left=P.shadowCameraLeft):Y.shadow.camera.fov=P.shadowCameraFov,Y.shadow.camera.updateProjectionMatrix(),J&&J.update()},getLight:function(L){var P=L.angle,Y=new b.Color(L.color);this.rendererSystem.applyColorCorrection(Y),Y=Y.getHex();var J=L.decay,j=L.distance,k=new b.Color(L.groundColor);this.rendererSystem.applyColorCorrection(k),k=k.getHex();var te=L.intensity,ue=L.type,xe=L.target,Ee=null;switch(ue.toLowerCase()){case"ambient":return new b.AmbientLight(Y,te);case"directional":return Ee=new b.DirectionalLight(Y,te),this.defaultTarget=Ee.target,xe&&(xe.hasLoaded?this.onSetTarget(xe,Ee):xe.addEventListener("loaded",g(this.onSetTarget,this,xe,Ee))),Ee;case"hemisphere":return new b.HemisphereLight(Y,k,te);case"point":return new b.PointLight(Y,te,j,J);case"spot":return Ee=new b.SpotLight(Y,te,j,w(P),L.penumbra,J),this.defaultTarget=Ee.target,xe&&(xe.hasLoaded?this.onSetTarget(xe,Ee):xe.addEventListener("loaded",g(this.onSetTarget,this,xe,Ee))),Ee;case"probe":return Ee=new b.LightProbe,this.updateProbeMap(L,Ee),Ee;default:_("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",ue)}},updateProbeMap:function(L,P){L.envMap||P.copy(new b.LightProbe),R[L.envMap]instanceof window.Promise&&R[L.envMap].then(function(Y){P.copy(Y)}),R[L.envMap]instanceof b.LightProbe&&P.copy(R[L.envMap]),R[L.envMap]=new window.Promise(function(Y){C.srcLoader.validateCubemapSrc(L.envMap,function(j){O.load(j,function(k){var te=b.LightProbeGenerator.fromCubeTexture(k);R[L.envMap]=te,P.copy(te)})})})},onSetTarget:function(L,P){P.target=L.object3D},remove:function(){var L=this.el;L.removeObject3D("light"),L.getObject3D("cameraHelper")&&L.removeObject3D("cameraHelper")}})},"./src/components/line.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent;T.exports.Component=g("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var v=this.data,y,E;this.rendererSystem=this.el.sceneEl.systems.renderer,E=this.material=new THREE.LineBasicMaterial({color:v.color,opacity:v.opacity,transparent:v.opacity<1,visible:v.visible}),y=this.geometry=new THREE.BufferGeometry,y.setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.rendererSystem.applyColorCorrection(E.color),this.line=new THREE.Line(y,E),this.el.setObject3D(this.attrName,this.line)},update:function(v){var y=this.data,E=this.geometry,b=!1,m=this.material,w=E.attributes.position.array;C(y.start,v.start)||(w[0]=y.start.x,w[1]=y.start.y,w[2]=y.start.z,b=!0),C(y.end,v.end)||(w[3]=y.end.x,w[4]=y.end.y,w[5]=y.end.z,b=!0),b&&(E.attributes.position.needsUpdate=!0,E.computeBoundingSphere()),m.color.setStyle(y.color),this.rendererSystem.applyColorCorrection(m.color),m.opacity=y.opacity,m.transparent=y.opacity<1,m.visible=y.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}});function C(v,y){return!v||!y?!1:v.x===y.x&&v.y===y.y&&v.z===y.z}},"./src/components/link.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/core/shader.js").registerShader,v=u("./src/lib/three.js");T.exports.Component=g("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new v.Quaternion,this.hiddenEls=[]},update:function(y){var E=this.data,b=this.el,m,w;!E.visualAspectEnabled||(this.initVisualAspect(),m=E.highlighted?E.highlightedColor:E.backgroundColor,w=E.highlighted?E.highlightedColor:E.borderColor,b.setAttribute("material","backgroundColor",m),b.setAttribute("material","strokeColor",w),E.on!==y.on&&this.updateEventListener(),y.peekMode!==void 0&&E.peekMode!==y.peekMode&&this.updatePeekMode(),!(!E.image||y.image===E.image)&&b.setAttribute("material","pano",typeof E.image=="string"?E.image:E.image.src))},updatePeekMode:function(){var y=this.el,E=this.sphereEl;this.data.peekMode?(this.hideAll(),y.getObject3D("mesh").visible=!1,E.setAttribute("visible",!0)):(this.showAll(),y.getObject3D("mesh").visible=!0,E.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var y=this.el;!y.isPlaying||(this.removeEventListener(),y.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var y=this.data.on;!y||this.el.removeEventListener(y,this.navigate)},initVisualAspect:function(){var y=this.el,E,b,m;!this.data.visualAspectEnabled||this.visualAspectInitialized||(m=this.textEl=this.textEl||document.createElement("a-entity"),b=this.sphereEl=this.sphereEl||document.createElement("a-entity"),E=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),y.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),y.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),m.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),m.setAttribute("position","0 1.5 0"),y.appendChild(m),E.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),E.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),E.setAttribute("rotation","0 180 0"),E.setAttribute("position","0 0 0"),E.setAttribute("visible",!1),y.appendChild(E),b.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),b.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),b.setAttribute("visible",!1),y.appendChild(b),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var y=new v.Vector3,E=new v.Vector3,b=new v.Quaternion,m=new v.Vector3;return function(){var w=this.el,_=w.object3D,O=w.sceneEl.camera,R,L,P=this.textEl;if(!!this.data.visualAspectEnabled)if(_.updateMatrixWorld(),O.parent.updateMatrixWorld(),O.updateMatrixWorld(),_.matrix.decompose(E,b,m),E.setFromMatrixPosition(_.matrixWorld),y.setFromMatrixPosition(O.matrixWorld),L=E.distanceTo(y),L>20)this.previousQuaternion||(this.quaternionClone.copy(b),this.previousQuaternion=this.quaternionClone),_.lookAt(y);else{if(R=this.calculateCameraPortalOrientation(),L<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;P.setAttribute("text","width",1.5),R<=0?(P.setAttribute("position","0 0 0.75"),P.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(P.setAttribute("position","0 0 -0.75"),P.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),w.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=R}else R<=0?P.setAttribute("rotation","0 180 0"):P.setAttribute("rotation","0 0 0"),P.setAttribute("text","width",5),P.setAttribute("position","0 1.5 0"),w.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(_.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var y=this.el,E=this.hiddenEls,b=this;E.length>0||y.sceneEl.object3D.traverse(function(m){m&&m.el&&m.el.hasAttribute("link-controls")||!m.el||m===y.sceneEl.object3D||m.el===y||m.el===b.sphereEl||m.el===y.sceneEl.cameraEl||m.el.getAttribute("visible")===!1||m.el===b.textEl||m.el===b.semiSphereEl||(m.el.setAttribute("visible",!1),E.push(m.el))})},showAll:function(){this.hiddenEls.forEach(function(y){y.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var y=new v.Matrix4,E=new v.Vector3,b=new v.Vector3(0,0,1),m=new v.Vector3(0,0,0);return function(){var w=this.el,_=w.sceneEl.camera;return E.set(0,0,0),b.set(0,0,1),m.set(0,0,0),w.object3D.matrixWorld.extractRotation(y),b.applyMatrix4(y),w.object3D.updateMatrixWorld(),w.object3D.localToWorld(m),_.parent.parent.updateMatrixWorld(),_.parent.updateMatrixWorld(),_.updateMatrixWorld(),_.localToWorld(E),E.sub(m).normalize(),b.normalize(),Math.sign(b.dot(E))}}(),remove:function(){this.removeEventListener()}}),C("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},"./src/components/look-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/lib/three.js"),v=u("./src/utils/index.js"),y=v.bind,E=Math.PI/2;T.exports.Component=g("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new C.Vector3,this.hmdQuaternion=new C.Quaternion,this.magicWindowAbsoluteEuler=new C.Euler,this.magicWindowDeltaEuler=new C.Euler,this.position=new C.Vector3,this.magicWindowObject=new C.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new C.Vector3,rotation:new C.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var b,m=this.data;(v.device.isMobile()||v.device.isMobileDeviceRequestingDesktopSite())&&(b=this.magicWindowControls=new C.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(b.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?b.enabled=m.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){b.enabled=m.magicWindowTrackingEnabled})))},update:function(b){var m=this.data;m.enabled!==b.enabled&&this.updateGrabCursor(m.enabled),b&&!m.magicWindowTrackingEnabled&&b.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=m.magicWindowTrackingEnabled),b&&!m.pointerLockEnabled!==b.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(b){var m=this.data;!m.enabled||this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=y(this.onMouseDown,this),this.onMouseMove=y(this.onMouseMove,this),this.onMouseUp=y(this.onMouseUp,this),this.onTouchStart=y(this.onTouchStart,this),this.onTouchMove=y(this.onTouchMove,this),this.onTouchEnd=y(this.onTouchEnd,this),this.onEnterVR=y(this.onEnterVR,this),this.onExitVR=y(this.onExitVR,this),this.onPointerLockChange=y(this.onPointerLockChange,this),this.onPointerLockError=y(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new C.Object3D,this.yawObject=new C.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var b=this.el.sceneEl,m=b.canvas;if(!m){b.addEventListener("render-target-loaded",y(this.addEventListeners,this));return}m.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),m.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),b.addEventListener("enter-vr",this.onEnterVR),b.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var b=this.el.sceneEl,m=b&&b.canvas;!m||(m.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),m.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),b.removeEventListener("enter-vr",this.onEnterVR),b.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var b=this.el.object3D,m=this.pitchObject,w=this.yawObject,_=this.el.sceneEl;(_.is("vr-mode")||_.is("ar-mode"))&&_.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),b.rotation.x=this.magicWindowDeltaEuler.x+m.rotation.x,b.rotation.y=this.magicWindowDeltaEuler.y+w.rotation.y,b.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var b=this.magicWindowAbsoluteEuler,m=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),b.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),!this.previousMagicWindowYaw&&b.y!==0&&(this.previousMagicWindowYaw=b.y),this.previousMagicWindowYaw&&(m.x=b.x,m.y+=b.y-this.previousMagicWindowYaw,m.z=b.z,this.previousMagicWindowYaw=b.y))},onMouseMove:function(b){var m,w,_,O=this.pitchObject,R=this.previousMouseEvent,L=this.yawObject;!this.data.enabled||!this.mouseDown&&!this.pointerLocked||(this.pointerLocked?(w=b.movementX||b.mozMovementX||0,_=b.movementY||b.mozMovementY||0):(w=b.screenX-R.screenX,_=b.screenY-R.screenY),this.previousMouseEvent.screenX=b.screenX,this.previousMouseEvent.screenY=b.screenY,m=this.data.reverseMouseDrag?1:-1,L.rotation.y+=w*.002*m,O.rotation.x+=_*.002*m,O.rotation.x=Math.max(-E,Math.min(E,O.rotation.x)))},onMouseDown:function(b){var m=this.el.sceneEl;if(!(!this.data.enabled||!this.data.mouseEnabled||(m.is("vr-mode")||m.is("ar-mode"))&&m.checkHeadsetConnected())&&b.button===0){var w=m&&m.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=b.screenX,this.previousMouseEvent.screenY=b.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(w.requestPointerLock?w.requestPointerLock():w.mozRequestPointerLock&&w.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(b){b.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:b.touches[0].pageX,y:b.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(b){var m,w=this.el.sceneEl.canvas,_,O=this.yawObject;!this.touchStarted||!this.data.touchEnabled||(_=2*Math.PI*(b.touches[0].pageX-this.touchStart.x)/w.clientWidth,m=this.data.reverseTouchDrag?1:-1,O.rotation.y-=_*.5*m,this.touchStart={x:b.touches[0].pageX,y:b.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var b=this.el.sceneEl;!b.checkHeadsetConnected()||(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),b.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){!this.el.sceneEl.checkHeadsetConnected()||(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!!(document.pointerLockElement||document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(b){var m=this.el.sceneEl;function w(){m.canvas.classList.add("a-grab-cursor")}function _(){m.canvas.classList.remove("a-grab-cursor")}if(!m.canvas){b?m.addEventListener("render-target-loaded",w):m.addEventListener("render-target-loaded",_);return}if(b){w();return}_()},saveCameraPose:function(){var b=this.el;this.savedPose.position.copy(b.object3D.position),this.savedPose.rotation.copy(b.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var b=this.el,m=this.savedPose;!this.hasSavedPose||(b.object3D.position.copy(m.position),b.object3D.rotation.copy(m.rotation),this.hasSavedPose=!1)}})},"./src/components/magicleap-controls.js":(T,I,u)=>{var g=u("./src/utils/bind.js"),C=u("./src/core/component.js").registerComponent,v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,b=v.onButtonEvent,m="magicleap",w="-one",_=m+w,O="https://cdn.aframe.io/controllers/magicleap/magicleap-one-controller.glb",R={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]};T.exports.Component=C("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:R,init:function(){var L=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=g(this.onButtonChanged,this),this.onButtonDown=function(P){b(P.detail.id,"down",L)},this.onButtonUp=function(P){b(P.detail.id,"up",L)},this.onButtonTouchEnd=function(P){b(P.detail.id,"touchend",L)},this.onButtonTouchStart=function(P){b(P.detail.id,"touchstart",L)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var L=this.data;this.controllerIndex=L.hand==="right"?0:L.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=g(this.onModelLoaded,this),this.onControllersUpdate=g(this.onControllersUpdate,this),this.checkIfControllerPresent=g(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=g(this.removeControllersUpdateListener,this),this.onAxisMoved=g(this.onAxisMoved,this)},addEventListeners:function(){var L=this.el;L.addEventListener("buttonchanged",this.onButtonChanged),L.addEventListener("buttondown",this.onButtonDown),L.addEventListener("buttonup",this.onButtonUp),L.addEventListener("touchstart",this.onButtonTouchStart),L.addEventListener("touchend",this.onButtonTouchEnd),L.addEventListener("axismove",this.onAxisMoved),L.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var L=this.el;L.removeEventListener("buttonchanged",this.onButtonChanged),L.removeEventListener("buttondown",this.onButtonDown),L.removeEventListener("buttonup",this.onButtonUp),L.removeEventListener("touchstart",this.onButtonTouchStart),L.removeEventListener("touchend",this.onButtonTouchEnd),L.removeEventListener("axismove",this.onAxisMoved),L.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var L=this.data;y(this,_,{index:this.controllerIndex,hand:L.hand})},injectTrackedControls:function(){var L=this.el,P=this.data;L.setAttribute("tracked-controls",{idPrefix:_,hand:P.hand,controller:this.controllerIndex,orientationOffset:P.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",O)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(L){var P=this.mapping.buttons[L.detail.id],Y;!P||(P==="trigger"&&(Y=L.detail.state.value,console.log("analog value of trigger press: "+Y)),this.el.emit(P+"changed",L.detail.state))},onModelLoaded:function(L){var P=L.detail.model;P.scale.set(.01,.01,.01)},onAxisMoved:function(L){E(this,this.mapping.axes,L)},updateModel:function(L,P){},setButtonColor:function(L,P){}})},"./src/components/material.js":(T,I,u)=>{var g=u("./src/utils/index.js"),C=u("./src/core/component.js"),v=u("./src/lib/three.js"),y=u("./src/core/shader.js"),E=g.debug("components:material:error"),b=C.registerComponent,m=y.shaders,w=y.shaderNames;T.exports.Component=b("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:w,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0}},init:function(){this.material=null},update:function(L){var P=this.data;(!this.shader||P.shader!==L.shader)&&this.updateShader(P.shader),this.shader.update(this.data),this.updateMaterial(L)},updateSchema:function(L){var P,Y,J,j;Y=L&&L.shader,P=this.oldData&&this.oldData.shader,j=Y||P,J=m[j]&&m[j].schema,J||E("Unknown shader schema "+j),!(P&&Y===P)&&(this.extendSchema(J),this.updateBehavior())},updateBehavior:function(){var L,P=this.el.sceneEl,Y=this.schema,J=this,j;function k(te,ue){var xe;for(xe in j)j[xe]=te;J.shader.update(j)}this.tick=void 0,j={};for(L in Y)Y[L].type==="time"&&(this.tick=k,j[L]=!0);!P||(this.tick?P.addBehavior(this):P.removeBehavior(this))},updateShader:function(L){var P=this.data,Y=m[L]&&m[L].Shader,J;if(!Y)throw new Error("Unknown shader "+L);J=this.shader=new Y,J.el=this.el,J.init(P),this.setMaterial(J.material),this.updateSchema(P)},updateMaterial:function(L){var P=this.data,Y=this.material,J;Y.alphaTest=P.alphaTest,Y.depthTest=P.depthTest!==!1,Y.depthWrite=P.depthWrite!==!1,Y.opacity=P.opacity,Y.flatShading=P.flatShading,Y.side=_(P.side),Y.transparent=P.transparent!==!1||P.opacity<1,Y.vertexColors=P.vertexColorsEnabled,Y.visible=P.visible,Y.blending=O(P.blending),Y.dithering=P.dithering;for(J in L)break;J&&(L.alphaTest!==P.alphaTest||L.side!==P.side||L.vertexColorsEnabled!==P.vertexColorsEnabled)&&(Y.needsUpdate=!0)},remove:function(){var L=new v.MeshBasicMaterial,P=this.material,Y=this.el.getObject3D("mesh");Y&&(Y.material=L),R(P,this.system)},setMaterial:function(L){var P=this.el,Y,J=this.system;this.material&&R(this.material,J),this.material=L,J.registerMaterial(L),Y=P.getObject3D("mesh"),Y?Y.material=L:P.addEventListener("object3dset",function j(k){k.detail.type!=="mesh"||k.target!==P||(P.getObject3D("mesh").material=L,P.removeEventListener("object3dset",j))})}});function _(L){switch(L){case"back":return v.BackSide;case"double":return v.DoubleSide;default:return v.FrontSide}}function O(L){switch(L){case"none":return v.NoBlending;case"additive":return v.AdditiveBlending;case"subtractive":return v.SubtractiveBlending;case"multiply":return v.MultiplyBlending;default:return v.NormalBlending}}function R(L,P){L.dispose(),P.unregisterMaterial(L)}},"./src/components/obj-model.js":(T,I,u)=>{var g=u("./src/utils/debug.js"),C=u("./src/core/component.js").registerComponent,v=u("./src/lib/three.js"),y=g("components:obj-model:warn");T.exports.Component=C("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var E=this;this.model=null,this.objLoader=new v.OBJLoader,this.mtlLoader=new v.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(b){!E.model||b.detail.name==="material"&&E.applyMaterial()})},update:function(){var E=this.data;!E.obj||(this.resetMesh(),this.loadObj(E.obj,E.mtl))},remove:function(){!this.model||this.resetMesh()},resetMesh:function(){this.el.removeObject3D("mesh")},loadObj:function(E,b){var m=this,w=this.el,_=this.mtlLoader,O=this.objLoader,R=this.el.sceneEl.systems.renderer,L=b.substr(0,b.lastIndexOf("/")+1);if(b){w.hasAttribute("material")&&y("Material component properties are ignored when a .MTL is provided"),_.setResourcePath(L),_.load(b,function(P){P.preload(),O.setMaterials(P),O.load(E,function(Y){m.model=Y,m.model.traverse(function(J){if(J.isMesh){var j=J.material;j.color&&R.applyColorCorrection(j.color),j.map&&R.applyColorCorrection(j.map),j.emissive&&R.applyColorCorrection(j.emissive),j.emissiveMap&&R.applyColorCorrection(j.emissiveMap)}}),w.setObject3D("mesh",Y),w.emit("model-loaded",{format:"obj",model:Y})})});return}O.load(E,function(Y){m.model=Y,m.applyMaterial(),w.setObject3D("mesh",Y),w.emit("model-loaded",{format:"obj",model:Y})})},applyMaterial:function(){var E=this.el.components.material;!E||this.model.traverse(function(b){b instanceof v.Mesh&&(b.material=E.material)})}})},"./src/components/oculus-go-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,b=v.onButtonEvent,m=u("./src/utils/index.js").device.isWebXRAvailable,w="oculus-go",_="Oculus Go",O="https://cdn.aframe.io/controllers/oculus/go/oculus-go-controller.gltf",R=m?w:_,L={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},P={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},Y=m?P:L;T.exports.Component=g("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:Y,bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var J=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(j){b(j.detail.id,"down",J)},this.onButtonUp=function(j){b(j.detail.id,"up",J)},this.onButtonTouchStart=function(j){b(j.detail.id,"touchstart",J)},this.onButtonTouchEnd=function(j){b(j.detail.id,"touchend",J)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var J=this.el;J.addEventListener("buttonchanged",this.onButtonChanged),J.addEventListener("buttondown",this.onButtonDown),J.addEventListener("buttonup",this.onButtonUp),J.addEventListener("touchstart",this.onButtonTouchStart),J.addEventListener("touchend",this.onButtonTouchEnd),J.addEventListener("model-loaded",this.onModelLoaded),J.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var J=this.el;J.removeEventListener("buttonchanged",this.onButtonChanged),J.removeEventListener("buttondown",this.onButtonDown),J.removeEventListener("buttonup",this.onButtonUp),J.removeEventListener("touchstart",this.onButtonTouchStart),J.removeEventListener("touchend",this.onButtonTouchEnd),J.removeEventListener("model-loaded",this.onModelLoaded),J.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,R,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var J=this.el,j=this.data;J.setAttribute("tracked-controls",{armModel:j.armModel,hand:j.hand,idPrefix:R,orientationOffset:j.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",O)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(J){var j=J.detail.model,k;!this.data.model||(k=this.buttonMeshes={},k.trigger=j.getObjectByName("oculus_go_button_trigger"),k.trackpad=j.getObjectByName("oculus_go_touchpad"),k.touchpad=j.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(J){var j=this.mapping.buttons[J.detail.id];!j||this.el.emit(j+"changed",J.detail.state)},onAxisMoved:function(J){E(this,this.mapping.axes,J)},updateModel:function(J,j){!this.data.model||this.updateButtonModel(J,j)},updateButtonModel:function(J,j){var k=this.buttonMeshes;if(!(!k||!k[J])){var te,ue;switch(j){case"down":te=this.data.buttonHighlightColor;break;case"touchstart":te=this.data.buttonTouchedColor;break;default:te=this.data.buttonColor}ue=k[J],ue.material.color.set(te),this.rendererSystem.applyColorCorrection(ue.material.color)}}})},"./src/components/oculus-touch-controls.js":(T,I,u)=>{var g=u("./src/utils/bind.js"),C=u("./src/core/component.js").registerComponent,v=u("./src/lib/three.js"),y=u("./src/utils/tracked-controls.js"),E=y.checkControllerPresentAndSetup,b=y.emitIfAxesChanged,m=y.onButtonEvent,w=u("./src/utils/index.js").device.isWebXRAvailable,_="oculus-touch",O="Oculus Touch",R=w?_:O,L="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",P="https://cdn.aframe.io/controllers/meta/",Y={left:{modelUrl:L+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new v.Vector3(-.005,.003,-.055),modelPivotRotation:new v.Euler(0,0,0)},right:{modelUrl:L+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new v.Vector3(.005,.003,-.055),modelPivotRotation:new v.Euler(0,0,0)}},J={left:{modelUrl:L+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new v.Vector3(-.005,.036,-.037),modelPivotRotation:new v.Euler(Math.PI/4.5,0,0)},right:{modelUrl:L+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new v.Vector3(.005,.036,-.037),modelPivotRotation:new v.Euler(Math.PI/4.5,0,0)}},j=w?J:Y,k="oculus-touch",te={"oculus-touch":j,"oculus-touch-v2":{left:{modelUrl:L+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new v.Vector3(0,-.007,-.021),modelPivotRotation:new v.Euler(-Math.PI/4,0,0)},right:{modelUrl:L+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new v.Vector3(0,-.007,-.021),modelPivotRotation:new v.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:L+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new v.Vector3(0,0,0),modelPivotRotation:new v.Euler(0,0,0)},right:{modelUrl:L+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new v.Vector3(0,0,0),modelPivotRotation:new v.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:P+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new v.Vector3(0,0,0),modelPivotRotation:new v.Euler(0,0,0)},right:{modelUrl:P+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new v.Vector3(0,0,0),modelPivotRotation:new v.Euler(0,0,0)}}},ue={left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},xe={left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},Ee=w?xe:ue;T.exports.Component=C("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:Ee,bindMethods:function(){this.onButtonChanged=g(this.onButtonChanged,this),this.onThumbstickMoved=g(this.onThumbstickMoved,this),this.onModelLoaded=g(this.onModelLoaded,this),this.onControllersUpdate=g(this.onControllersUpdate,this),this.checkIfControllerPresent=g(this.checkIfControllerPresent,this),this.onAxisMoved=g(this.onAxisMoved,this)},init:function(){var q=this;this.onButtonDown=function(Q){m(Q.detail.id,"down",q,q.data.hand)},this.onButtonUp=function(Q){m(Q.detail.id,"up",q,q.data.hand)},this.onButtonTouchStart=function(Q){m(Q.detail.id,"touchstart",q,q.data.hand)},this.onButtonTouchEnd=function(Q){m(Q.detail.id,"touchend",q,q.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.triggerEuler=new v.Euler},addEventListeners:function(){var q=this.el;q.addEventListener("buttonchanged",this.onButtonChanged),q.addEventListener("buttondown",this.onButtonDown),q.addEventListener("buttonup",this.onButtonUp),q.addEventListener("touchstart",this.onButtonTouchStart),q.addEventListener("touchend",this.onButtonTouchEnd),q.addEventListener("axismove",this.onAxisMoved),q.addEventListener("model-loaded",this.onModelLoaded),q.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var q=this.el;q.removeEventListener("buttonchanged",this.onButtonChanged),q.removeEventListener("buttondown",this.onButtonDown),q.removeEventListener("buttonup",this.onButtonUp),q.removeEventListener("touchstart",this.onButtonTouchStart),q.removeEventListener("touchend",this.onButtonTouchEnd),q.removeEventListener("axismove",this.onAxisMoved),q.removeEventListener("model-loaded",this.onModelLoaded),q.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){E(this,R,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(q){var Q=this.data,F;if(!!Q.model){if(this.displayModel=te[Q.controllerType]||te[k],Q.controllerType==="auto"){var z=this.el.sceneEl.systems["tracked-controls-webvr"];if(z&&z.vrDisplay){var X=z.vrDisplay.displayName;/^Oculus Quest$/.test(X)&&(this.displayModel=te["oculus-touch-v2"])}else{F=k;for(var fe=Object.keys(te),Ae=0;Ae<q.profiles.length;Ae++)if(fe.indexOf(q.profiles[Ae])!==-1){F=q.profiles[Ae];break}this.displayModel=te[F]}}var Se=this.displayModel[Q.hand].modelUrl;this.isOculusTouchV3=this.displayModel===te["oculus-touch-v3"],this.el.setAttribute("gltf-model",Se)}},injectTrackedControls:function(q){var Q=this.data,F=_,z=Q.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",X=w?F:z;this.el.setAttribute("tracked-controls",{id:X,hand:Q.hand,orientationOffset:Q.orientationOffset,handTrackingEnabled:!1,iterateControllerProfiles:!0,space:"gripSpace"}),this.loadModel(q)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(q){var Q=this.mapping[this.data.hand].buttons[q.detail.id];if(!!Q){if(this.isOculusTouchV3)this.onButtonChangedV3(q);else{var F=this.buttonMeshes,z;(Q==="trigger"||Q==="grip")&&(z=q.detail.state.value),F&&(Q==="trigger"&&F.trigger&&(F.trigger.rotation.x=this.originalXRotationTrigger-z*(Math.PI/26)),Q==="grip"&&F.grip&&(z*=this.data.hand==="left"?-1:1,F.grip.position.x=this.originalXPositionGrip+z*.004))}this.el.emit(Q+"changed",q.detail.state)}},clickButtons:["xbutton","ybutton","abutton","bbutton","thumbstick"],onButtonChangedV3:function(q){var Q=this.mapping[this.data.hand].buttons[q.detail.id],F=this.buttonObjects,z;!F||(z=q.detail.state.value,z*=this.data.hand==="left"?-1:1,Q==="trigger"?(this.triggerEuler.copy(this.buttonRanges.trigger.min.rotation),this.triggerEuler.x+=z*this.buttonRanges.trigger.diff.x,this.triggerEuler.y+=z*this.buttonRanges.trigger.diff.y,this.triggerEuler.z+=z*this.buttonRanges.trigger.diff.z,F.trigger.setRotationFromEuler(this.triggerEuler)):Q==="grip"?F.grip.position.x=F.grip.minX+z*.004:this.clickButtons.includes(Q)&&(F[Q].position.y=z===0?this.buttonRanges[Q].unpressedY:this.buttonRanges[Q].pressedY))},onModelLoaded:function(q){if(!!this.data.model){if(this.isOculusTouchV3)this.onOculusTouchV3ModelLoaded(q);else{var Q=this.controllerObject3D=q.detail.model,F;F=this.buttonMeshes={},F.grip=Q.getObjectByName("buttonHand"),this.originalXPositionGrip=F.grip&&F.grip.position.x,F.trigger=Q.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=F.trigger&&F.trigger.rotation.x,F.thumbstick=Q.getObjectByName("stick"),F.xbutton=Q.getObjectByName("buttonX"),F.abutton=Q.getObjectByName("buttonA"),F.ybutton=Q.getObjectByName("buttonY"),F.bbutton=Q.getObjectByName("buttonB")}for(var z in this.buttonMeshes)this.buttonMeshes[z]&&V(this.buttonMeshes[z]);this.applyOffset(q.detail.model),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(q){q.position.copy(this.displayModel[this.data.hand].modelPivotOffset),q.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onOculusTouchV3ModelLoaded:function(q){var Q=this.controllerObject3D=q.detail.model,F=this.buttonObjects={},z=this.buttonMeshes={},X=this.buttonRanges={};z.grip=Q.getObjectByName("squeeze"),F.grip=Q.getObjectByName("xr_standard_squeeze_pressed_value"),X.grip={min:Q.getObjectByName("xr_standard_squeeze_pressed_min"),max:Q.getObjectByName("xr_standard_squeeze_pressed_max")},F.grip.minX=F.grip.position.x,z.thumbstick=Q.getObjectByName("thumbstick"),F.thumbstick=Q.getObjectByName("xr_standard_thumbstick_pressed_value"),X.thumbstick={min:Q.getObjectByName("xr_standard_thumbstick_pressed_min"),max:Q.getObjectByName("xr_standard_thumbstick_pressed_max"),originalRotation:this.buttonObjects.thumbstick.rotation.clone()},X.thumbstick.pressedY=F.thumbstick.position.y,X.thumbstick.unpressedY=X.thumbstick.pressedY+Math.abs(X.thumbstick.max.position.y)-Math.abs(X.thumbstick.min.position.y),z.trigger=Q.getObjectByName("trigger"),F.trigger=Q.getObjectByName("xr_standard_trigger_pressed_value"),X.trigger={min:Q.getObjectByName("xr_standard_trigger_pressed_min"),max:Q.getObjectByName("xr_standard_trigger_pressed_max")},X.trigger.diff={x:Math.abs(X.trigger.max.rotation.x)-Math.abs(X.trigger.min.rotation.x),y:Math.abs(X.trigger.max.rotation.y)-Math.abs(X.trigger.min.rotation.y),z:Math.abs(X.trigger.max.rotation.z)-Math.abs(X.trigger.min.rotation.z)};var fe=this.data.hand==="left"?"x":"a",Ae=this.data.hand==="left"?"y":"b",Se=fe+"button",Be=Ae+"button";z[Se]=Q.getObjectByName(fe+"_button"),F[Se]=Q.getObjectByName(fe+"_button_pressed_value"),X[Se]={min:Q.getObjectByName(fe+"_button_pressed_min"),max:Q.getObjectByName(fe+"_button_pressed_max")},z[Be]=Q.getObjectByName(Ae+"_button"),F[Be]=Q.getObjectByName(Ae+"_button_pressed_value"),X[Be]={min:Q.getObjectByName(Ae+"_button_pressed_min"),max:Q.getObjectByName(Ae+"_button_pressed_max")},X[Se].unpressedY=F[Se].position.y,X[Se].pressedY=X[Se].unpressedY+Math.abs(X[Se].max.position.y)-Math.abs(X[Se].min.position.y),X[Be].unpressedY=F[Be].position.y,X[Be].pressedY=X[Be].unpressedY-Math.abs(X[Be].max.position.y)+Math.abs(X[Be].min.position.y)},onAxisMoved:function(q){b(this,this.mapping[this.data.hand].axes,q)},onThumbstickMoved:function(q){if(!(!this.isOculusTouchV3||!this.buttonMeshes||!this.buttonMeshes.thumbstick))for(var Q in q.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[Q]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[Q]]-Math.PI/8*q.detail[Q]*(Q==="y"||this.data.hand==="right"?-1:1)},axisMap:{y:"x",x:"z"},updateModel:function(q,Q){!this.data.model||this.updateButtonModel(q,Q)},updateButtonModel:function(q,Q){var F=this.buttonMeshes,z,X;!F||F[q]&&(X=Q==="up"||Q==="touchend"?F[q].originalColor||this.data.buttonColor:Q==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,z=F[q],z.material.color.set(X),this.rendererSystem.applyColorCorrection(z.material.color))}});function V(q){q.traverse(function(Q){var F;Q.type==="Mesh"&&(F=Q.material.clone(),q.originalColor=Q.material.color,Q.material.dispose(),Q.material=F)})}},"./src/components/position.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent;T.exports.Component=g("position",{schema:{type:"vec3"},update:function(){var C=this.el.object3D,v=this.data;C.position.set(v.x,v.y,v.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},"./src/components/raycaster.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/lib/three.js"),v=u("./src/utils/index.js"),y=v.debug("components:raycaster:warn"),E=/^[\w\s-.,[\]#]*$/,b={childList:!0,attributes:!0,subtree:!0},m={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared",INTERSECTION_CLOSEST_ENTITY_CHANGED:"raycaster-closest-entity-changed"};T.exports.Component=g("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new C.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new C.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new C.Vector3,this.otherLineEndVec3=new C.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(_){var O=this.data,R=this.el,L=this.raycaster;L.far=O.far,L.near=O.near,O.showLine&&(O.far!==_.far||O.origin!==_.origin||O.direction!==_.direction||!_.showLine)&&(this.unitLineEndVec3.copy(O.direction).normalize(),this.drawLine()),!O.showLine&&_.showLine&&R.removeAttribute("line"),O.objects!==_.objects&&!E.test(O.objects)&&y('[raycaster] Selector "'+O.objects+'" may not update automatically with DOM changes.'),O.objects||y('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),O.autoRefresh!==_.autoRefresh&&R.isPlaying&&(O.autoRefresh?this.addEventListeners():this.removeEventListeners()),_.enabled&&!O.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){!this.data.autoRefresh||(this.observer.observe(this.el.sceneEl,b),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var _=this.data,O;O=_.objects?this.el.sceneEl.querySelectorAll(_.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(O),this.dirty=!1},tock:function(_){var O=this.data,R=this.prevCheckTime;!O.enabled||R&&_-R<O.interval||(this.prevCheckTime=_,this.checkIntersections())},checkIntersections:function(){var _=this.clearedIntersectedEls,O=this.el,R=this.data,L,P=this.intersectedEls,Y,J=this.intersections,j=this.newIntersectedEls,k=this.newIntersections,te=this.prevIntersectedEls,ue=this.rawIntersections;for(this.dirty&&this.refreshObjects(),w(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),ue.length=0,this.raycaster.intersectObjects(this.objects,!0,ue),J.length=0,P.length=0,L=0;L<ue.length;L++)Y=ue[L],!(R.showLine&&Y.object===O.getObject3D("line"))&&Y.object.el&&(J.push(Y),P.push(Y.object.el));for(k.length=0,j.length=0,L=0;L<J.length;L++)te.indexOf(J[L].object.el)===-1&&(k.push(J[L]),j.push(J[L].object.el));for(_.length=0,L=0;L<te.length;L++)P.indexOf(te[L])===-1&&(te[L].emit(m.INTERSECT_CLEAR,this.intersectedClearedDetail),_.push(te[L]));for(_.length&&O.emit(m.INTERSECTION_CLEAR,this.intersectionClearedDetail),L=0;L<j.length;L++)j[L].emit(m.INTERSECT,this.intersectedDetail);k.length&&(this.intersectionDetail.els=j,this.intersectionDetail.intersections=k,O.emit(m.INTERSECTION,this.intersectionDetail)),(te.length===0&&J.length>0||te.length>0&&J.length===0||te.length&&J.length&&te[0]!==J[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=J,O.emit(m.INTERSECTION_CLOSEST_ENTITY_CHANGED,this.intersectionDetail)),R.showLine&&setTimeout(this.updateLine)},updateLine:function(){var _=this.el,O=this.intersections,R;O.length&&(O[0].object.el===_&&O[1]?R=O[1].distance:R=O[0].distance),this.drawLine(R)},getIntersection:function(_){var O,R;for(O=0;O<this.intersections.length;O++)if(R=this.intersections[O],R.object.el===_)return R;return null},updateOriginDirection:function(){var _=new C.Vector3,O=new C.Vector3;return function(){var L=this.el,P=this.data;if(P.useWorldCoordinates){this.raycaster.set(P.origin,P.direction);return}L.object3D.updateMatrixWorld(),O.setFromMatrixPosition(L.object3D.matrixWorld),(P.origin.x!==0||P.origin.y!==0||P.origin.z!==0)&&(O=L.object3D.localToWorld(O.copy(P.origin))),_.copy(P.direction).transformDirection(L.object3D.matrixWorld).normalize(),this.raycaster.set(O,_)}}(),drawLine:function(_){var O=this.data,R=this.el,L;L=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,_===void 0&&(_=O.far===1/0?1e3:O.far),this.lineData.start=O.origin,this.lineData.end=L.copy(this.unitLineEndVec3).multiplyScalar(_).add(O.origin),this.lineData.color=O.lineColor,this.lineData.opacity=O.lineOpacity,R.setAttribute("line",this.lineData)},flattenObject3DMaps:function(_){var O,R,L=this.objects,P=this.el.sceneEl.object3D;function Y(j){return j.parent?Y(j.parent):j===P}for(L.length=0,R=0;R<_.length;R++){var J=_[R];if(J.isEntity&&J.object3D&&Y(J.object3D))for(O in J.object3DMap)L.push(J.getObject3D(O))}return L},clearAllIntersections:function(){var _;for(_=0;_<this.intersectedEls.length;_++)this.intersectedEls[_].emit(m.INTERSECT_CLEAR,this.intersectedClearedDetail);w(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(m.INTERSECTION_CLEAR,this.intersectionClearedDetail)}});function w(_,O){var R;for(_.length=O.length,R=0;R<O.length;R++)_[R]=O[R]}},"./src/components/rotation.js":(T,I,u)=>{var g=u("./src/lib/three.js").MathUtils.degToRad,C=u("./src/core/component.js").registerComponent;T.exports.Component=C("rotation",{schema:{type:"vec3"},update:function(){var v=this.data,y=this.el.object3D;y.rotation.set(g(v.x),g(v.y),g(v.z)),y.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},"./src/components/scale.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=1e-5;T.exports.Component=g("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var v=this.data,y=this.el.object3D,E=v.x===0?C:v.x,b=v.y===0?C:v.y,m=v.z===0?C:v.z;y.scale.set(E,b,m)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},"./src/components/scene/ar-hit-test.js":(T,I,u)=>{var g="data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",C=u("./src/core/component.js").registerComponent,v=u("./src/lib/three.js"),y=21,E=function(){var _=new v.Quaternion,O=new v.Vector3;function R(L,P,Y){P.position.copy(L.transform.position),P.quaternion.copy(L.transform.orientation),O.copy(Y),_.copy(L.transform.orientation),O.applyQuaternion(_),P.position.sub(O)}return R}();E.tempFakePose={transform:{orientation:new v.Quaternion,position:new v.Vector3}};function b(_,O){this.renderer=_,this.xrHitTestSource=null,_.xr.addEventListener("sessionend",function(){this.xrHitTestSource=null}.bind(this)),_.xr.addEventListener("sessionstart",function(){this.sessionStart(O)}.bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(O)}b.prototype.previousFrameAnchors=new Set,b.prototype.anchorToObject3D=new Map;function m(_){console.warn(_.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}b.prototype.sessionStart=function(O){if(this.session=this.renderer.xr.getSession(),!("requestHitTestSource"in this.session)){m({message:"No requestHitTestSource on the session."});return}O.space?this.session.requestHitTestSource(O).then(function(R){this.xrHitTestSource=R}.bind(this)).catch(m):O.profile&&this.session.requestHitTestSourceForTransientInput(O).then(function(R){this.xrHitTestSource=R,this.transient=!0}.bind(this)).catch(m)},b.prototype.anchorFromLastHitTestResult=function(_,O){var R=this.lastHitTest;if(!!R){var L={object3D:_,offset:O};Array.from(this.anchorToObject3D.entries()).forEach(function(P){var Y=P[1].object3D,J=P[0];Y===_&&(this.anchorToObject3D.delete(J),J.delete())}.bind(this)),R.createAnchor&&R.createAnchor().then(function(P){this.anchorToObject3D.set(P,L)}.bind(this)).catch(function(P){console.warn(P.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},b.prototype.doHit=function(O){if(!!this.renderer.xr.isPresenting){var R=this.renderer.xr.getReferenceSpace(),L=O.getViewerPose(R),P,Y;if(this.xrHitTestSource&&L)return this.transient?(P=O.getHitTestResultsForTransientInput(this.xrHitTestSource),P.length>0?(Y=P[0].results,Y.length>0?(this.lastHitTest=Y[0],Y[0].getPose(R)):!1):!1):(P=O.getHitTestResults(this.xrHitTestSource),P.length>0?(this.lastHitTest=P[0],P[0].getPose(R)):!1)}},b.updateAnchorPoses=function(_,O){var R=_.trackedAnchors||b.prototype.previousFrameAnchors;b.prototype.previousFrameAnchors.forEach(function(L){R.has(L)||b.prototype.anchorToObject3D.delete(L)}),R.forEach(function(L){var P,Y,J,j;try{P=_.getPose(L.anchorSpace,O)}catch{}P&&(Y=b.prototype.anchorToObject3D.get(L),J=Y.offset,j=Y.object3D,E(P,j,J))})};var w;T.exports.Component=C("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:g,type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new v.OrthographicCamera,this.orthoCam.layers.set(y),this.textureTarget=new v.WebGLRenderTarget(512,512,{}),this.basicMaterial=new v.MeshBasicMaterial({color:0,side:v.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new v.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var _=this.el.getAttribute("webxr"),O=_.optionalFeatures;(!O.includes("hit-test")||!O.includes("anchors"))&&(O.push("hit-test"),O.push("anchors"),this.el.setAttribute("webxr",_)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",function(){this.hitTest=null}.bind(this)),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",function(){if(!!this.el.is("ar-mode")){var R=this.el.sceneEl.renderer,L=this.session=R.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,w||(w=new Map),L.requestReferenceSpace("viewer").then(function(J){this.hitTest=new b(R,{space:J}),w.set(J,this.hitTest),this.el.emit("ar-hit-test-start")}.bind(this));var P="generic-touchscreen",Y=new b(R,{profile:P});L.addEventListener("selectstart",function(J){if(this.data.enabled===!0){var j=J.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:j,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),j.profiles[0]===P?this.hitTest=Y:(this.hitTest=w.get(j)||new b(R,{space:j.targetRaySpace}),w.set(j,this.hitTest)))}}.bind(this)),L.addEventListener("selectend",function(J){if(!this.hitTest||this.data.enabled!==!0){this.hitTest=null;return}var j=J.inputSource,k;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(k=this.data.target.object3D,k&&(E.tempFakePose.transform.position.copy(this.bboxMesh.position),E.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),E(E.tempFakePose,k,this.bboxOffset),k.visible=!0,this.hitTest.anchorFromLastHitTestResult(k,this.bboxOffset))),this.el.emit("ar-hit-test-select",{inputSource:j,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion})),this.hitTest=null}.bind(this))}}.bind(this)),this.bboxOffset=new v.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(y),this.data.target.object3D.traverse(function(_){_.layers.enable(y)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var _=new v.PlaneGeometry(1,1),O=new v.MeshBasicMaterial({transparent:!0,color:16777215});_.rotateX(-Math.PI/2),_.rotateY(-Math.PI/2),this.bbox=new v.Box3,this.bboxMesh=new v.Mesh(_,O),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var _,O=this.el.sceneEl.renderer,R,L,P=O.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),R=O.getRenderTarget(),O.setRenderTarget(this.textureTarget),O.xr.enabled=!1,L=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,O.render(this.el.object3D,this.orthoCam),this.el.object3D.background=L,this.el.object3D.overrideMaterial=null,O.xr.enabled=P,O.setRenderTarget(R),O.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),_=this.context.getImageData(0,0,512,512);for(var Y=0;Y<262144;Y++)_.data[Y*4+3]!==0&&_.data[Y*4+3]!==255&&(_.data[Y*4+3]=128);this.context.putImageData(_,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var _,O=this.el.sceneEl.frame,R=this.el.sceneEl.renderer;if(O&&b.updateAnchorPoses(O,R.xr.getReferenceSpace()),this.bboxNeedsUpdate){if(this.bboxNeedsUpdate=!1,!this.data.target||this.data.type==="map"){var L;this.textureCache.has(this.data.src)?L=this.textureCache.get(this.data.src):(L=new v.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,L)),this.bboxMesh.material.map=L,this.bboxMesh.material.needsUpdate=!0}this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)}this.hitTest&&(_=this.hitTest.doHit(O),_&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(_.transform.position),this.bboxMesh.quaternion.copy(_.transform.orientation)))}})},"./src/components/scene/background.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/core/component.js").components;T.exports.Component=g("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var v=this.data,y=this.el.object3D;v.transparent?y.background=null:y.background=new THREE.Color(v.color)},remove:function(){var v=this.data,y=this.el.object3D;if(v.transparent){y.background=null;return}y.background=C[this.name].schema.color.default}})},"./src/components/scene/debug.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent;T.exports.Component=g("debug",{schema:{default:!0}})},"./src/components/scene/device-orientation-permission-ui.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/index.js"),v=C.bind,y=u("./src/constants/index.js"),E="a-modal",b="a-dialog",m="a-dialog-text",w="a-dialog-text-container",_="a-dialog-buttons-container",O="a-dialog-button",R="a-dialog-allow-button",L="a-dialog-deny-button",P="a-dialog-ok-button";T.exports.Component=g("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},init:function(){var k=this;if(!!this.data.enabled){if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"&&location.protocol==="http:"&&this.showHTTPAlert(),typeof DeviceOrientationEvent>"u"||!DeviceOrientationEvent.requestPermission){this.permissionGranted=!0;return}this.onDeviceMotionDialogAllowClicked=v(this.onDeviceMotionDialogAllowClicked,this),this.onDeviceMotionDialogDenyClicked=v(this.onDeviceMotionDialogDenyClicked,this),DeviceOrientationEvent.requestPermission().then(function(){k.el.emit("deviceorientationpermissiongranted"),k.permissionGranted=!0}).catch(function(){k.devicePermissionDialogEl=Y(k.data.denyButtonText,k.data.allowButtonText,k.data.deviceMotionMessage,k.onDeviceMotionDialogAllowClicked,k.onDeviceMotionDialogDenyClicked),k.el.appendChild(k.devicePermissionDialogEl)})}},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var k=this,te=J(k.data.cancelButtonText,k.data.httpsMessage,function(){k.el.removeChild(te)});this.el.appendChild(te)},onDeviceMotionDialogAllowClicked:function(){var k=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(te){te==="granted"?(k.el.emit("deviceorientationpermissiongranted"),k.permissionGranted=!0):k.el.emit("deviceorientationpermissionrejected"),k.remove()}).catch(console.error)}});function Y(k,te,ue,xe,Ee){var V,q,Q;return V=document.createElement("div"),V.classList.add(_),q=document.createElement("button"),q.classList.add(O,L),q.setAttribute(y.AFRAME_INJECTED,""),q.innerHTML=k,V.appendChild(q),Q=document.createElement("button"),Q.classList.add(O,R),Q.setAttribute(y.AFRAME_INJECTED,""),Q.innerHTML=te,V.appendChild(Q),Q.addEventListener("click",function(F){F.stopPropagation(),xe()}),q.addEventListener("click",function(F){F.stopPropagation(),Ee()}),j(ue,V)}function J(k,te,ue){var xe,Ee;return xe=document.createElement("div"),xe.classList.add(_),Ee=document.createElement("button"),Ee.classList.add(O,P),Ee.setAttribute(y.AFRAME_INJECTED,""),Ee.innerHTML=k,xe.appendChild(Ee),Ee.addEventListener("click",function(V){V.stopPropagation(),ue()}),j(te,xe)}function j(k,te){var ue,xe,Ee,V;return ue=document.createElement("div"),ue.classList.add(E),ue.setAttribute(y.AFRAME_INJECTED,""),xe=document.createElement("div"),xe.className=b,xe.setAttribute(y.AFRAME_INJECTED,""),ue.appendChild(xe),Ee=document.createElement("div"),Ee.classList.add(w),xe.appendChild(Ee),V=document.createElement("div"),V.classList.add(m),V.innerHTML=k,Ee.appendChild(V),xe.appendChild(te),ue}},"./src/components/scene/embedded.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent;T.exports.Component=g("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var C=this.el,v=C.querySelector(".a-enter-vr");this.data===!0?(v&&v.classList.add("embedded"),C.removeFullScreenStyles()):(v&&v.classList.remove("embedded"),C.addFullScreenStyles())}})},"./src/components/scene/fog.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/lib/three.js"),v=u("./src/utils/debug.js"),y=v("components:fog:warn");T.exports.Component=g("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var b=this.data,m=this.el,w=this.el.object3D.fog;if(!m.isScene){y("Fog component can only be applied to <a-scene>");return}if(!w||b.type!==w.name){m.object3D.fog=E(b),m.systems.material.updateMaterials();return}Object.keys(this.schema).forEach(function(_){var O=b[_];_==="color"&&(O=new C.Color(O)),w[_]=O})},remove:function(){var b=this.el.object3D.fog;!b||(b.far=0,b.near=.1)}});function E(b){var m;return b.type==="exponential"?m=new C.FogExp2(b.color,b.density):m=new C.Fog(b.color,b.near,b.far),m.name=b.type,m}},"./src/components/scene/inspector.js":(T,I,u)=>{var g=u("./src/constants/index.js").AFRAME_INJECTED,C=u("./package.json"),v=u("./src/core/component.js").registerComponent,y=u("./src/utils/index.js");function E(O){var R=O.split(".");return R[2]="x",R.join(".")}var b="https://unpkg.com/aframe-inspector@"+E(C.version)+"/dist/aframe-inspector.min.js",m=b,w="Loading Inspector",_="Error loading Inspector";T.exports.Component=v("inspector",{schema:{url:{default:m}},init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var O;!this.firstPlay||(O=y.getUrlParameter("inspector"),O!=="false"&&!!O&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var O='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=w+O},remove:function(){this.removeEventListeners()},onKeydown:function(O){var R=O.keyCode===73&&(O.ctrlKey&&O.altKey||O.getModifierState("AltGraph"));!R||this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(O){O.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(O){var R=this,L;if(AFRAME.INSPECTOR||AFRAME.inspectorInjected){AFRAME.INSPECTOR.open(O);return}this.showLoader(),L=document.createElement("script"),L.src=this.data.url,L.setAttribute("data-name","aframe-inspector"),L.setAttribute(g,""),L.onload=function(){AFRAME.INSPECTOR.open(O),R.hideLoader(),R.removeEventListeners()},L.onerror=function(){R.loadingMessageEl.innerHTML=_},document.head.appendChild(L),AFRAME.inspectorInjected=!0},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})},"./src/components/scene/keyboard-shortcuts.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/index.js").shouldCaptureKeyEvent;T.exports.Component=g("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(v){var y=this.data;this.enterVREnabled=y.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(v){var y=this.el;!C(v)||(this.enterVREnabled&&v.keyCode===70&&y.enterVR(),this.enterVREnabled&&v.keyCode===27&&y.exitVR())}})},"./src/components/scene/pool.js":(T,I,u)=>{var g=u("./src/utils/debug.js"),C=u("./src/core/component.js").registerComponent,v=g("components:pool:warn");T.exports.Component=C("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var y;for(this.availableEls=[],this.usedEls=[],this.data.mixin||v("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||v("Container "+this.data.container+" not found.")),this.container=this.container||this.el,y=0;y<this.data.size;++y)this.createEntity()},update:function(y){var E=this.data;(y.mixin!==E.mixin||y.size!==E.size)&&this.initPool()},createEntity:function(){var y;y=document.createElement("a-entity"),y.play=this.wrapPlay(y.play),y.setAttribute("mixin",this.data.mixin),y.object3D.visible=!1,y.pause(),this.container.appendChild(y),this.availableEls.push(y);var E=this.usedEls;y.addEventListener("loaded",function(){E.indexOf(y)===-1&&(y.object3DParent=y.object3D.parent,y.object3D.parent.remove(y.object3D))})},wrapPlay:function(y){var E=this.usedEls;return function(){E.indexOf(this)!==-1&&y.call(this)}},requestEntity:function(){var y;if(this.availableEls.length===0){if(this.data.dynamic===!1){v("Requested entity from empty pool: "+this.attrName);return}else v("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName);this.createEntity()}return y=this.availableEls.shift(),this.usedEls.push(y),y.object3DParent&&(y.object3DParent.add(y.object3D),this.updateRaycasters()),y.object3D.visible=!0,y},returnEntity:function(y){var E=this.usedEls.indexOf(y);if(E===-1){v("The returned entity was not previously pooled from "+this.attrName);return}return this.usedEls.splice(E,1),this.availableEls.push(y),y.object3DParent=y.object3D.parent,y.object3D.parent.remove(y.object3D),this.updateRaycasters(),y.object3D.visible=!1,y.pause(),y},updateRaycasters(){var y=document.querySelectorAll("[raycaster]");y.forEach(function(E){E.components.raycaster.setDirty()})}})},"./src/components/scene/reflection.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent;function C(v,y,E,b){var m=Math.max(v.primaryLightIntensity.x,Math.max(v.primaryLightIntensity.y,v.primaryLightIntensity.z));y.sh.fromArray(v.sphericalHarmonicsCoefficients),y.intensity=1,E&&(E.color.setRGB(v.primaryLightIntensity.x/m,v.primaryLightIntensity.y/m,v.primaryLightIntensity.z/m),E.intensity=m,b.copy(v.primaryLightDirection))}T.exports.Component=g("reflection",{schema:{directionalLight:{type:"selector"}},init:function(){var v=this;this.cubeRenderTarget=new THREE.WebGLCubeRenderTarget(16),this.cubeCamera=new THREE.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new THREE.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var y=this.el.getAttribute("webxr"),E=y.optionalFeatures;E.includes("light-estimation")||(E.push("light-estimation"),this.el.setAttribute("webxr",y)),this.el.addEventListener("enter-vr",function(){var b=v.el.renderer,m=b.xr.getSession();m.requestLightProbe&&v.el.is("ar-mode")&&v.startLightProbe()}),this.el.addEventListener("exit-vr",function(){v.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var v=this.el.renderer,y=v.xr.getSession(),E=this,b=v.getContext();if(!this.probeLight){var m=document.createElement("a-light");m.setAttribute("type","probe"),m.setAttribute("intensity",0),this.el.appendChild(m),this.probeLight=m}switch(y.preferredReflectionFormat){case"srgba8":b.getExtension("EXT_sRGB");break;case"rgba16f":b.getExtension("OES_texture_half_float");break}this.glBinding=new XRWebGLBinding(y,b),b.getExtension("EXT_sRGB"),b.getExtension("OES_texture_half_float"),y.requestLightProbe().then(function(w){E.xrLightProbe=w,w.addEventListener("reflectionchange",E.updateXRCubeMap.bind(E))}).catch(function(w){console.warn("Lighting estimation not supported: "+w.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var v=this.el.renderer,y=this.glBinding.getReflectionCubeMap(this.xrLightProbe);if(y){var E=v.properties.get(this.lightingEstimationTexture);E.__webglTexture=y,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture}},tick:function(){var v=this.el.object3D,y=this.el.renderer,E=this.el.frame;if(E&&this.xrLightProbe){var b=E.getLightEstimate(this.xrLightProbe);b&&C(b,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(v.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(y,v),v.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&E&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}})},"./src/components/scene/screenshot.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/lib/three.js"),v=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),y=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);T.exports.Component=g("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var E=this.el,b=this;E.renderer?m():E.addEventListener("render-target-loaded",m);function m(){var w=E.renderer.getContext();!w||(b.cubeMapSize=w.getParameter(w.MAX_CUBE_MAP_TEXTURE_SIZE),b.material=new C.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:v,fragmentShader:y,side:C.DoubleSide}),b.quad=new C.Mesh(new C.PlaneGeometry(1,1),b.material),b.quad.visible=!1,b.camera=new C.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),b.canvas=document.createElement("canvas"),b.ctx=b.canvas.getContext("2d"),E.object3D.add(b.quad),b.onKeyDown=b.onKeyDown.bind(b))}},getRenderTarget:function(E,b){return new C.WebGLRenderTarget(E,b,{encoding:this.el.sceneEl.renderer.outputEncoding,minFilter:C.LinearFilter,magFilter:C.LinearFilter,wrapS:C.ClampToEdgeWrapping,wrapT:C.ClampToEdgeWrapping,format:C.RGBAFormat,type:C.UnsignedByteType})},resize:function(E,b){this.quad.scale.set(E,b,1),this.camera.left=-1*E/2,this.camera.right=E/2,this.camera.top=b/2,this.camera.bottom=-1*b/2,this.camera.updateProjectionMatrix(),this.canvas.width=E,this.canvas.height=b},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(E){var b=E.keyCode===83&&E.ctrlKey&&E.altKey;if(!(!this.data||!b)){var m=E.shiftKey?"equirectangular":"perspective";this.capture(m)}},setCapture:function(E){var b=this.el,m,w,_,O;return E==="perspective"?(this.quad.visible=!1,w=this.data.camera&&this.data.camera.components.camera.camera||b.camera,m={width:this.data.width,height:this.data.height}):(w=this.camera,O=new C.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:C.RGBFormat,generateMipmaps:!0,minFilter:C.LinearMipmapLinearFilter,encoding:C.sRGBEncoding}),_=new C.CubeCamera(b.camera.near,b.camera.far,O),b.camera.getWorldPosition(_.position),b.camera.getWorldQuaternion(_.quaternion),_.update(b.renderer,b.object3D),this.quad.material.uniforms.map.value=_.renderTarget.texture,m={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:w,size:m,projection:E}},capture:function(E){var b=this.el.renderer.xr.enabled,m=this.el.renderer,w;m.xr.enabled=!1,w=this.setCapture(E),this.renderCapture(w.camera,w.size,w.projection),this.saveCapture(),m.xr.enabled=b},getCanvas:function(E){var b=this.el.renderer.xr.enabled,m=this.el.renderer,w=this.setCapture(E);return m.xr.enabled=!1,this.renderCapture(w.camera,w.size,w.projection),m.xr.enabled=b,this.canvas},renderCapture:function(E,b,m){var w=this.el.renderer.autoClear,_=this.el,O,R,L,P=_.renderer;R=this.getRenderTarget(b.width,b.height),L=new Uint8Array(4*b.width*b.height),this.resize(b.width,b.height),P.autoClear=!0,P.clear(),P.setRenderTarget(R),P.render(_.object3D,E),P.autoClear=w,P.readRenderTargetPixels(R,0,0,b.width,b.height,L),P.setRenderTarget(null),m==="perspective"&&(L=this.flipPixelsVertically(L,b.width,b.height)),O=new ImageData(new Uint8ClampedArray(L),b.width,b.height),this.quad.visible=!1,this.ctx.putImageData(O,0,0)},flipPixelsVertically:function(E,b,m){for(var w=E.slice(0),_=0;_<b;++_)for(var O=0;O<m;++O)w[_*4+O*b*4]=E[_*4+(m-O)*b*4],w[_*4+1+O*b*4]=E[_*4+1+(m-O)*b*4],w[_*4+2+O*b*4]=E[_*4+2+(m-O)*b*4],w[_*4+3+O*b*4]=E[_*4+3+(m-O)*b*4];return w},saveCapture:function(){this.canvas.toBlob(function(E){var b="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",m=document.createElement("a"),w=URL.createObjectURL(E);m.href=w,m.setAttribute("download",b),m.innerHTML="downloading...",m.style.display="none",document.body.appendChild(m),setTimeout(function(){m.click(),document.body.removeChild(m)},1)},"image/png")}})},"./src/components/scene/stats.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./vendor/rStats.js"),v=u("./src/utils/index.js");u("./vendor/rStats.extras.js"),u("./src/lib/rStatsAframe.js");var y=window.aframeStats,E=v.bind,b="a-hidden",m=window.threeStats;T.exports.Component=g("stats",{schema:{default:!0},init:function(){var _=this.el;v.getUrlParameter("stats")!=="false"&&(this.stats=w(_),this.statsEl=document.querySelector(".rs-base"),this.hideBound=E(this.hide,this),this.showBound=E(this.show,this),_.addEventListener("enter-vr",this.hideBound),_.addEventListener("exit-vr",this.showBound))},update:function(){if(!!this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var _=this.stats;!_||(_("rAF").tick(),_("FPS").frame(),_().update())},hide:function(){this.statsEl.classList.add(b)},show:function(){this.statsEl.classList.remove(b)}});function w(_){var O=new m(_.renderer),R=new y(_),L=_.isMobile?[]:[O,R];return new C({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:L})}},"./src/components/scene/vr-mode-ui.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/constants/index.js"),v=u("./src/utils/index.js"),y=v.bind,E="a-enter-vr",b="a-enter-ar",m="a-enter-vr-button",w="a-enter-ar-button",_="a-hidden",O="a-orientation-modal";T.exports.Component=g("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},cardboardModeEnabled:{default:!1},enterVRButton:{default:""},enterARButton:{default:""}},init:function(){var J=this,j=this.el;v.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),j.addEventListener("enter-vr",this.updateEnterInterfaces),j.addEventListener("exit-vr",this.updateEnterInterfaces),j.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(k){k.data.type==="loaderReady"&&(J.insideLoader=!0,J.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=y(this.onEnterVRButtonClick,this),this.onEnterARButtonClick=y(this.onEnterARButtonClick,this),this.onModalClick=y(this.onModalClick,this),this.toggleOrientationModalIfNeeded=y(this.toggleOrientationModalIfNeeded,this),this.updateEnterInterfaces=y(this.updateEnterInterfaces,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var J=this.data,j=this.el;if(!J.enabled||this.insideLoader||v.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(J.enterVRButton?(this.enterVREl=document.querySelector(J.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=R(this.onEnterVRButtonClick),j.appendChild(this.enterVREl)),J.enterARButton?(this.enterAREl=document.querySelector(J.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=L(this.onEnterARButtonClick),j.appendChild(this.enterAREl)),this.orientationModalEl=P(this.onModalClick),j.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(J){J&&J.parentNode&&J.parentNode.removeChild(J)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var J=this.el;!this.enterVREl||(J.is("vr-mode")||(J.isMobile||v.device.isMobileDeviceRequestingDesktopSite())&&!this.data.cardboardModeEnabled&&!v.device.checkVRSupport()?this.enterVREl.classList.add(_):(v.device.checkVRSupport()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(_)))},toggleEnterARButtonIfNeeded:function(){var J=this.el;!this.enterAREl||(J.is("vr-mode")||!v.device.checkARSupport()?this.enterAREl.classList.add(_):this.enterAREl.classList.remove(_))},toggleOrientationModalIfNeeded:function(){var J=this.el,j=this.orientationModalEl;!j||!J.isMobile||(!v.device.isLandscape()&&J.is("vr-mode")?j.classList.remove(_):j.classList.add(_))}});function R(J){var j,k;return k=document.createElement("div"),k.classList.add(E),k.setAttribute(C.AFRAME_INJECTED,""),j=document.createElement("button"),j.className=m,j.setAttribute("title","Enter VR mode with a headset or fullscreen without"),j.setAttribute(C.AFRAME_INJECTED,""),v.device.isMobile()&&Y(j),k.appendChild(j),j.addEventListener("click",function(te){J(),te.stopPropagation()}),k}function L(J){var j,k;return k=document.createElement("div"),k.classList.add(b),k.setAttribute(C.AFRAME_INJECTED,""),j=document.createElement("button"),j.className=w,j.setAttribute("title","Enter AR mode with a headset or handheld device."),j.setAttribute(C.AFRAME_INJECTED,""),v.device.isMobile()&&Y(j),k.appendChild(j),j.addEventListener("click",function(te){J(),te.stopPropagation()}),k}function P(J){var j=document.createElement("div");j.className=O,j.classList.add(_),j.setAttribute(C.AFRAME_INJECTED,"");var k=document.createElement("button");return k.setAttribute(C.AFRAME_INJECTED,""),k.innerHTML="Exit VR",k.addEventListener("click",J),j.appendChild(k),j}function Y(J){J.addEventListener("touchstart",function(){J.classList.remove("resethover")}),J.addEventListener("touchend",function(){J.classList.add("resethover")})}},"./src/components/shadow.js":(T,I,u)=>{var g=u("./src/core/component.js"),C=u("./src/lib/three.js"),v=u("./src/utils/bind.js"),y=g.registerComponent;T.exports.Component=y("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=v(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var E=this.data;this.updateDescendants(E.cast,E.receive)},remove:function(){var E=this.el;E.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(E,b){var m=this.el.sceneEl;this.el.object3D.traverse(function(w){if(w instanceof C.Mesh&&(w.castShadow=E,w.receiveShadow=b,m.hasLoaded&&w.material))for(var _=Array.isArray(w.material)?w.material:[w.material],O=0;O<_.length;O++)_[O].needsUpdate=!0})}})},"./src/components/sound.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/debug.js"),v=u("./src/lib/three.js"),y=C("components:sound:warn");T.exports.Component=g("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var E=this;this.listener=null,this.audioLoader=new v.AudioLoader,this.pool=new v.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){E.playSound()}},update:function(E){var b=this.data,m,w,_=b.src!==E.src;if(_){if(!b.src)return;this.setupSound()}for(m=0;m<this.pool.children.length;m++)w=this.pool.children[m],b.positional&&(w.setDistanceModel(b.distanceModel),w.setMaxDistance(b.maxDistance),w.setRefDistance(b.refDistance),w.setRolloffFactor(b.rolloffFactor)),w.setLoop(b.loop),w.setVolume(b.volume),w.isPaused=!1;if(b.on!==E.on&&this.updateEventListener(E.on),_){var O=this;this.loaded=!1,this.audioLoader.load(b.src,function(R){for(m=0;m<O.pool.children.length;m++)w=O.pool.children[m],w.setBuffer(R);O.loaded=!0,v.Cache.remove(b.src),(O.data.autoplay||O.mustPlay)&&O.playSound(),O.el.emit("sound-loaded",O.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var E,b;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(E=0;E<this.pool.children.length;E++)b=this.pool.children[E],b.disconnect()}catch{y("Audio source not properly disconnected")}},updateEventListener:function(E){var b=this.el;E&&b.removeEventListener(E,this.playSoundBound),b.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var E=this.el,b,m=E.sceneEl,w=this,_;this.pool.children.length>0&&(this.stopSound(),E.removeObject3D("sound"));var O=this.listener=m.audioListener||new v.AudioListener;for(m.audioListener=O,m.camera&&m.camera.add(O),m.addEventListener("camera-set-active",function(R){R.detail.cameraEl.getObject3D("camera").add(O)}),this.pool=new v.Group,b=0;b<this.data.poolSize;b++)_=this.data.positional?new v.PositionalAudio(O):new v.Audio(O),this.pool.add(_);for(E.setObject3D(this.attrName,this.pool),b=0;b<this.pool.children.length;b++)_=this.pool.children[b],_.onEnded=function(){this.isPlaying=!1,w.el.emit("sound-ended",w.evtDetail,!1)}},pauseSound:function(){var E,b;for(this.isPlaying=!1,E=0;E<this.pool.children.length;E++)b=this.pool.children[E],!(!b.source||!b.source.buffer||!b.isPlaying||b.isPaused)&&(b.isPaused=!0,b.pause())},playSound:function(E){var b,m,w;if(!this.loaded){y("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0;return}for(b=!1,this.isPlaying=!0,m=0;m<this.pool.children.length;m++)if(w=this.pool.children[m],!w.isPlaying&&w.buffer&&!b){E&&E(w),w.play(),w.isPaused=!1,b=!0;continue}if(!b){y("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);return}this.mustPlay=!1},stopSound:function(){var E,b;for(this.isPlaying=!1,E=0;E<this.pool.children.length;E++){if(b=this.pool.children[E],!b.source||!b.source.buffer)return;b.stop()}}})},"./src/components/text.js":(T,I,u)=>{var g=u("./node_modules/three-bmfont-text/index.js"),C=u("./node_modules/load-bmfont/browser.js"),v=u("./src/core/component.js").registerComponent,y=u("./src/core/shader.js"),E=u("./src/lib/three.js"),b=u("./src/utils/index.js"),m=b.debug("components:text:error"),w=y.shaders,_=b.debug("components:text:warn"),O=1,R=16,L="https://cdn.aframe.io/fonts/",P={aileronsemibold:L+"Aileron-Semibold.fnt",dejavu:L+"DejaVu-sdf.fnt",exo2bold:L+"Exo2Bold.fnt",exo2semibold:L+"Exo2SemiBold.fnt",kelsonsans:L+"KelsonSans.fnt",monoid:L+"Monoid.fnt",mozillavr:L+"mozillavr.fnt",roboto:L+"Roboto-msdf.json",sourcecodepro:L+"SourceCodePro.fnt"},Y=["roboto"],J="roboto";T.exports.FONTS=P;var j=new z,k={},te={},ue=/^\w+:/;T.exports.Component=v("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:J},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:w},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=g(),this.createOrUpdateMaterial()},update:function(X){var fe=this.data,Ae=this.currentFont;if(te[fe.font]?this.texture=te[fe.font]:(this.texture=te[fe.font]=new E.Texture,this.texture.anisotropy=R),this.createOrUpdateMaterial(),X.font!==fe.font){this.updateFont();return}Ae&&(this.updateGeometry(this.geometry,Ae),this.updateLayout())},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var X=this.data,fe,Ae=this.material,Se,Be=this.shaderData,Ge;if(Ge=X.shader,Y.indexOf(X.font)!==-1||X.font.indexOf("-msdf.")>=0?Ge="msdf":X.font in P&&Y.indexOf(X.font)===-1&&(Ge="sdf"),fe=(this.shaderObject&&this.shaderObject.name)!==Ge,Be.alphaTest=X.alphaTest,Be.color=X.color,Be.map=this.texture,Be.opacity=X.opacity,Be.side=xe(X.side),Be.transparent=X.transparent,Be.negate=X.negate,!fe){this.shaderObject.update(Be),Ae.transparent=Be.transparent,Ae.side=Be.side;return}Se=q(this.el,Ge,Be),this.material=Se.material,this.shaderObject=Se.shader,this.material.side=Be.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var X=this.data,fe=this.el,Ae,Se=this.geometry,Be=this;X.font||_("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),Ae=this.lookupFont(X.font||J)||X.font,j.get(Ae,function(){return Ee(Ae,X.yOffset)}).then(function(ht){var xt;if(ht.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");k[Ae]||(ht.widthFactor=k[ht]=F(ht)),Be.currentFont=ht,xt=Be.getFontImageSrc(),j.get(xt,function(){return V(xt)}).then(function(at){var Gt=Be.texture;!Gt||(Gt.image=at,Gt.needsUpdate=!0,te[X.font]=Gt,Be.texture=Gt,Be.initMesh(),Be.currentFont=ht,Be.updateGeometry(Se,ht),Be.updateLayout(),Be.mesh.visible=!0,fe.emit("textfontset",{font:X.font,fontObj:ht}))}).catch(function(at){m(at.message),m(at.stack)})}).catch(function(Ge){m(Ge.message),m(Ge.stack)})},initMesh:function(){this.mesh||(this.mesh=new E.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var X=this.lookupFont(this.data.font||J)||this.data.font,fe=this.currentFont.pages[0];return fe.match(ue)&&fe.indexOf("http")!==0?X.replace(/(\.fnt)|(\.json)/,".png"):E.LoaderUtils.extractUrlBase(X)+fe},updateLayout:function(){var X,fe,Ae=this.el,Se=this.data,Be=this.geometry,Ge,ht,xt,at=this.mesh,Gt,wt,Yt,Mn,je;if(!(!at||!Be.layout)){if(Ge=Ae.getAttribute("geometry"),Yt=Se.width||Ge&&Ge.width||O,Gt=Q(Se.wrapPixels,Se.wrapCount,this.currentFont.widthFactor),wt=Yt/Gt,xt=Be.layout,ht=wt*(xt.height+xt.descender),Ge&&Ge.primitive==="plane"&&(Ge.width||Ae.setAttribute("geometry","width",Yt),Ge.height||Ae.setAttribute("geometry","height",ht)),X=Se.anchor==="align"?Se.align:Se.anchor,X==="left")Mn=0;else if(X==="right")Mn=-1*xt.width;else if(X==="center")Mn=-1*xt.width/2;else throw new TypeError("Invalid text.anchor property value",X);if(fe=Se.baseline,fe==="bottom")je=0;else if(fe==="top")je=-1*xt.height+xt.ascender;else if(fe==="center")je=-1*xt.height/2;else throw new TypeError("Invalid text.baseline property value",fe);at.position.x=Mn*wt+Se.xOffset,at.position.y=je*wt,at.position.z=Se.zOffset,at.scale.set(wt,-1*wt,wt)}},lookupFont:function(X){return P[X]},updateGeometry:function(){var X={},fe={},Ae=/\\n/g,Se=/\\t/g;return function(Be,Ge){var ht=this.data;fe.font=Ge,fe.lineHeight=ht.lineHeight&&isFinite(ht.lineHeight)?ht.lineHeight:Ge.common.lineHeight,fe.text=ht.value.toString().replace(Ae,`
`).replace(Se,"	"),fe.width=Q(ht.wrapPixels,ht.wrapCount,Ge.widthFactor),Be.update(b.extend(X,ht,fe))}}()});function xe(X){switch(X){case"back":return E.FrontSide;case"double":return E.DoubleSide;default:return E.BackSide}}function Ee(X,fe){return new Promise(function(Ae,Se){C(X,function(Be,Ge){if(Be){m("Error loading font",X),Se(Be);return}X.indexOf("/Roboto-msdf.json")>=0&&(fe=30),fe&&Ge.chars.map(function(xt){xt.yoffset+=fe}),Ae(Ge)})})}function V(X){return new Promise(function(fe,Ae){new E.ImageLoader().load(X,function(Se){fe(Se)},void 0,function(){m("Error loading font image",X),Ae(null)})})}function q(X,fe,Ae){var Se,Be;return Be=new w[fe].Shader,Be.el=X,Be.init(Ae),Be.update(Ae),Se=Be.material,Se.transparent=Ae.transparent,{material:Se,shader:Be}}function Q(X,fe,Ae){return X||(.5+fe)*Ae}function F(X){var fe=0,Ae=0,Se=0;return X.chars.map(function(Be){fe+=Be.xadvance,Be.id>=48&&Be.id<=57&&(Se++,Ae+=Be.xadvance)}),Se?Ae/Se:fe/X.chars.length}function z(){var X=this.cache={};this.get=function(fe,Ae){return fe in X||(X[fe]=Ae()),X[fe]}}},"./src/components/tracked-controls-webvr.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/tracked-controls.js"),v=u("./src/constants/index.js").DEFAULT_CAMERA_HEIGHT,y=u("./src/lib/three.js"),E=u("./src/constants/index.js").DEFAULT_HANDEDNESS,b={x:.175,y:-.3,z:-.03},m={x:0,y:0,z:-.175},w={touches:[]},_={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};T.exports.Component=g("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new y.Vector3,this.controllerQuaternion=new y.Quaternion,this.controllerEuler=new y.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(O,R){var L=this.el.getObject3D("mesh");L&&L.update&&L.update(R/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return v},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var O=this.data,R=C.findMatchingControllerWebVR(this.system.controllers,O.id,O.idPrefix,O.hand,O.controller);this.controller=R,this.el.components["tracked-controls"].controller=R,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(O){var R=this.controller,L=this.controllerEuler,P=this.controllerQuaternion,Y=this.deltaControllerPosition,J,j,k,te,ue;j=this.getHeadElement(),k=j.object3D,ue=this.defaultUserHeight(),te=R.pose,J=(R?R.hand:void 0)||E,O.copy(k.position),Y.set(b.x*(J==="left"?-1:J==="right"?1:0),b.y,b.z),Y.multiplyScalar(ue),Y.applyAxisAngle(k.up,k.rotation.y),O.add(Y),Y.set(m.x,m.y,m.z),Y.multiplyScalar(ue),te.orientation?P.fromArray(te.orientation):P.copy(k.quaternion),L.setFromQuaternion(P),L.set(L.x,L.y,0),Y.applyEuler(L),O.add(Y)},updatePose:function(){var O=this.controller,R=this.data,L=this.el.object3D,P,Y=this.system.vrDisplay,J;!O||(P=O.pose,P.position?L.position.fromArray(P.position):R.armModel&&this.applyArmModel(L.position),P.orientation&&L.quaternion.fromArray(P.orientation),Y&&P.position&&(J=this.el.sceneEl.renderer.xr.getStandingMatrix(),L.matrix.compose(L.position,L.quaternion,L.scale),L.matrix.multiplyMatrices(J,L.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),L.rotateX(this.data.orientationOffset.x*y.MathUtils.DEG2RAD),L.rotateY(this.data.orientationOffset.y*y.MathUtils.DEG2RAD),L.rotateZ(this.data.orientationOffset.z*y.MathUtils.DEG2RAD))},updateButtons:function(){var O,R=this.controller,L;if(!!R){for(L=0;L<R.buttons.length;++L)this.buttonStates[L]||(this.buttonStates[L]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[L]||(this.buttonEventDetails[L]={id:L,state:this.buttonStates[L]}),O=R.buttons[L],this.handleButton(L,O);this.handleAxes()}},handleButton:function(O,R){var L;return L=this.handlePress(O,R)|this.handleTouch(O,R)|this.handleValue(O,R),L?(this.el.emit(_.BUTTONCHANGED,this.buttonEventDetails[O],!1),!0):!1},handleAxes:function(){var O=!1,R=this.controller.axes,L,P=this.axis,Y=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),L=0;L<R.length;++L)Y.push(P[L]!==R[L]),Y[L]&&(O=!0);if(!O)return!1;for(this.axis.splice(0,this.axis.length),L=0;L<R.length;L++)this.axis.push(R[L]);return this.el.emit(_.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(O,R){var L,P=this.buttonStates[O];return R.pressed===P.pressed?!1:(L=R.pressed?_.BUTTONDOWN:_.BUTTONUP,this.el.emit(L,this.buttonEventDetails[O],!1),P.pressed=R.pressed,!0)},handleTouch:function(O,R){var L,P=this.buttonStates[O];return R.touched===P.touched?!1:(L=R.touched?_.TOUCHSTART:_.TOUCHEND,this.el.emit(L,this.buttonEventDetails[O],!1,w),P.touched=R.touched,!0)},handleValue:function(O,R){var L=this.buttonStates[O];return R.value===L.value?!1:(L.value=R.value,!0)}})},"./src/components/tracked-controls-webxr.js":(T,I,u)=>{var g=u("./src/utils/tracked-controls.js"),C=u("./src/core/component.js").registerComponent,v={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};T.exports.Component=C("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"gripSpace"}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var y=this.el.sceneEl;this.updateController(),y.addEventListener("controllersupdated",this.updateController)},pause:function(){var y=this.el.sceneEl;y.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(y){return!(!this.controller||this.controller.gamepad||y.inputSource.handedness!=="none"&&y.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=g.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var y=this.el.sceneEl,E=this.controller,b=y.frame;!E||!y.frame||!this.system.referenceSpace||E.hand||(this.pose=b.getPose(E[this.data.space],this.system.referenceSpace),this.updatePose(),this.updateButtons())},updatePose:function(){var y=this.el.object3D,E=this.pose;!E||(y.matrix.elements=E.transform.matrix,y.matrix.decompose(y.position,y.rotation,y.scale))},updateButtons:function(){var y,E,b=this.controller,m;if(!(!b||!b.gamepad)){for(m=b.gamepad,E=0;E<m.buttons.length;++E)this.buttonStates[E]||(this.buttonStates[E]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[E]||(this.buttonEventDetails[E]={id:E,state:this.buttonStates[E]}),y=m.buttons[E],this.handleButton(E,y);this.handleAxes()}},handleButton:function(y,E){var b;return b=this.handlePress(y,E)|this.handleTouch(y,E)|this.handleValue(y,E),b?(this.el.emit(v.BUTTONCHANGED,this.buttonEventDetails[y],!1),!0):!1},handleAxes:function(){var y=!1,E=this.controller.gamepad.axes,b,m=this.axis,w=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),b=0;b<E.length;++b)w.push(m[b]!==E[b]),w[b]&&(y=!0);if(!y)return!1;for(this.axis.splice(0,this.axis.length),b=0;b<E.length;b++)this.axis.push(E[b]);return this.el.emit(v.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(y,E){var b,m=this.buttonStates[y];return E.pressed===m.pressed?!1:(b=E.pressed?v.BUTTONDOWN:v.BUTTONUP,this.el.emit(b,this.buttonEventDetails[y],!1),m.pressed=E.pressed,!0)},handleTouch:function(y,E){var b,m=this.buttonStates[y];return E.touched===m.touched?!1:(b=E.touched?v.TOUCHSTART:v.TOUCHEND,this.el.emit(b,this.buttonEventDetails[y],!1),m.touched=E.touched,!0)},handleValue:function(y,E){var b=this.buttonStates[y];return E.value===b.value?!1:(b.value=E.value,!0)}})},"./src/components/tracked-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent;T.exports.Component=g("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"targetRaySpace"}},update:function(){var C=this.data,v=this.el;v.sceneEl.hasWebXR?v.setAttribute("tracked-controls-webxr",{id:C.id,hand:C.hand,index:C.controller,iterateControllerProfiles:C.iterateControllerProfiles,handTrackingEnabled:C.handTrackingEnabled,space:C.space}):v.setAttribute("tracked-controls-webvr",C)}})},"./src/components/valve-index-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/lib/three.js"),y=u("./src/utils/tracked-controls.js"),E=y.checkControllerPresentAndSetup,b=y.emitIfAxesChanged,m=y.onButtonEvent,w="https://cdn.aframe.io/controllers/valve/index/valve-index-",_={left:w+"left.glb",right:w+"right.glb"},O="valve",R=u("./src/utils/index.js").device.isWebXRAvailable,L={left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}},P={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},Y={left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},J={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},j=R?J:Y,k=R?P:L;T.exports.Component=g("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var te=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(ue){m(ue.detail.id,"down",te)},this.onButtonUp=function(ue){m(ue.detail.id,"up",te)},this.onButtonTouchEnd=function(ue){m(ue.detail.id,"touchend",te)},this.onButtonTouchStart=function(ue){m(ue.detail.id,"touchstart",te)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},addEventListeners:function(){var te=this.el;te.addEventListener("buttonchanged",this.onButtonChanged),te.addEventListener("buttondown",this.onButtonDown),te.addEventListener("buttonup",this.onButtonUp),te.addEventListener("touchend",this.onButtonTouchEnd),te.addEventListener("touchstart",this.onButtonTouchStart),te.addEventListener("model-loaded",this.onModelLoaded),te.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var te=this.el;te.removeEventListener("buttonchanged",this.onButtonChanged),te.removeEventListener("buttondown",this.onButtonDown),te.removeEventListener("buttonup",this.onButtonUp),te.removeEventListener("touchend",this.onButtonTouchEnd),te.removeEventListener("touchstart",this.onButtonTouchStart),te.removeEventListener("model-loaded",this.onModelLoaded),te.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var te=this.data,ue=te.hand==="right"?0:te.hand==="left"?1:2;E(this,O,{index:ue,iterateControllerProfiles:!0,hand:te.hand})},injectTrackedControls:function(){var te=this.el,ue=this.data;te.setAttribute("tracked-controls",{idPrefix:O,controller:ue.hand==="right"?1:ue.hand==="left"?0:2,hand:ue.hand,orientationOffset:ue.orientationOffset}),this.loadModel()},loadModel:function(){var te=this.data;!te.model||this.el.setAttribute("gltf-model",""+_[te.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(te){var ue=this.mapping.buttons[te.detail.id],xe=this.buttonMeshes,Ee;!ue||(ue==="trigger"&&(Ee=te.detail.state.value,xe&&xe.trigger&&(xe.trigger.rotation.x=this.triggerOriginalRotationX-Ee*(Math.PI/40))),this.el.emit(ue+"changed",te.detail.state))},onModelLoaded:function(te){var ue,xe=te.detail.model,Ee=this;!this.data.model||(ue=this.buttonMeshes={},ue.grip={left:xe.getObjectByName("leftgrip"),right:xe.getObjectByName("rightgrip")},ue.menu=xe.getObjectByName("menubutton"),ue.system=xe.getObjectByName("systembutton"),ue.trackpad=xe.getObjectByName("touchpad"),ue.trigger=xe.getObjectByName("trigger"),this.triggerOriginalRotationX=ue.trigger.rotation.x,Object.keys(ue).forEach(function(V){Ee.setButtonColor(V,Ee.data.buttonColor)}),xe.position.copy(k[this.data.hand]),xe.rotation.copy(j[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controlls",model:this.data.model,rayOrigin:new v.Vector3(0,0,0)}))},onAxisMoved:function(te){b(this,this.mapping.axes,te)},updateModel:function(te,ue){var xe,Ee;!this.data.model||(Ee=ue.indexOf("touch")!==-1,!Ee&&(xe=ue==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(te,xe)))},setButtonColor:function(te,ue){}})},"./src/components/visible.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent;T.exports.Component=g("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},"./src/components/vive-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,b=v.onButtonEvent,m="https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",w="https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl",_=u("./src/utils/index.js").device.isWebXRAvailable,O="htc-vive",R="OpenVR ",L=_?O:R,P={axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},Y={axes:{thumbstick:[0,1]},buttons:["trigger","grip","trackpad","none","menu"]},J=_?Y:P;T.exports.Component=g("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:J,init:function(){var j=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(k){b(k.detail.id,"down",j)},this.onButtonUp=function(k){b(k.detail.id,"up",j)},this.onButtonTouchEnd=function(k){b(k.detail.id,"touchend",j)},this.onButtonTouchStart=function(k){b(k.detail.id,"touchstart",j)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var j=this.data;this.controllerIndex=j.hand==="right"?0:j.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},addEventListeners:function(){var j=this.el;j.addEventListener("buttonchanged",this.onButtonChanged),j.addEventListener("buttondown",this.onButtonDown),j.addEventListener("buttonup",this.onButtonUp),j.addEventListener("touchend",this.onButtonTouchEnd),j.addEventListener("touchstart",this.onButtonTouchStart),j.addEventListener("model-loaded",this.onModelLoaded),j.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var j=this.el;j.removeEventListener("buttonchanged",this.onButtonChanged),j.removeEventListener("buttondown",this.onButtonDown),j.removeEventListener("buttonup",this.onButtonUp),j.removeEventListener("touchend",this.onButtonTouchEnd),j.removeEventListener("touchstart",this.onButtonTouchStart),j.removeEventListener("model-loaded",this.onModelLoaded),j.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var j=this.data;y(this,L,{index:this.controllerIndex,hand:j.hand})},injectTrackedControls:function(){var j=this.el,k=this.data;j.setAttribute("tracked-controls",{idPrefix:L,hand:k.hand,controller:this.controllerIndex,orientationOffset:k.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:m,mtl:w})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(j){var k=this.mapping.buttons[j.detail.id],te=this.buttonMeshes,ue;!k||(k==="trigger"&&(ue=j.detail.state.value,te&&te.trigger&&(te.trigger.rotation.x=-ue*(Math.PI/12))),this.el.emit(k+"changed",j.detail.state))},onModelLoaded:function(j){var k,te=j.detail.model,ue=this;!this.data.model||(k=this.buttonMeshes={},k.grip={left:te.getObjectByName("leftgrip"),right:te.getObjectByName("rightgrip")},k.menu=te.getObjectByName("menubutton"),k.system=te.getObjectByName("systembutton"),k.trackpad=te.getObjectByName("touchpad"),k.trigger=te.getObjectByName("trigger"),Object.keys(k).forEach(function(xe){ue.setButtonColor(xe,ue.data.buttonColor)}),te.position.set(0,-.015,.04))},onAxisMoved:function(j){E(this,this.mapping.axes,j)},updateModel:function(j,k){var te,ue;!this.data.model||(ue=k.indexOf("touch")!==-1,!ue&&(te=k==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(j,te)))},setButtonColor:function(j,k){var te=this.buttonMeshes,ue=this.rendererSystem;if(!!te){if(j==="grip"){te.grip.left.material.color.set(k),te.grip.right.material.color.set(k),ue.applyColorCorrection(te.grip.left.material.color),ue.applyColorCorrection(te.grip.right.material.color);return}te[j].material.color.set(k),ue.applyColorCorrection(te[j].material.color)}}})},"./src/components/vive-focus-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,b=v.onButtonEvent,m="HTC Vive Focus",w="https://cdn.aframe.io/controllers/vive/focus-controller/focus-controller.gltf";T.exports.Component=g("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=C(this.removeControllersUpdateListener,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var _=this;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(O){b(O.detail.id,"down",_)},this.onButtonUp=function(O){b(O.detail.id,"up",_)},this.onButtonTouchStart=function(O){b(O.detail.id,"touchstart",_)},this.onButtonTouchEnd=function(O){b(O.detail.id,"touchend",_)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var _=this.el;_.addEventListener("buttonchanged",this.onButtonChanged),_.addEventListener("buttondown",this.onButtonDown),_.addEventListener("buttonup",this.onButtonUp),_.addEventListener("touchstart",this.onButtonTouchStart),_.addEventListener("touchend",this.onButtonTouchEnd),_.addEventListener("model-loaded",this.onModelLoaded),_.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var _=this.el;_.removeEventListener("buttonchanged",this.onButtonChanged),_.removeEventListener("buttondown",this.onButtonDown),_.removeEventListener("buttonup",this.onButtonUp),_.removeEventListener("touchstart",this.onButtonTouchStart),_.removeEventListener("touchend",this.onButtonTouchEnd),_.removeEventListener("model-loaded",this.onModelLoaded),_.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){y(this,m,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var _=this.el,O=this.data;_.setAttribute("tracked-controls",{armModel:O.armModel,idPrefix:m,orientationOffset:O.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",w)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(_){var O=_.detail.model,R;!this.data.model||(R=this.buttonMeshes={},R.trigger=O.getObjectByName("BumperKey"),R.triggerPressed=O.getObjectByName("BumperKey_Press"),R.triggerPressed&&(R.triggerPressed.visible=!1),R.trackpad=O.getObjectByName("TouchPad"),R.trackpadPressed=O.getObjectByName("TouchPad_Press"),R.trackpadPressed&&(R.trackpadPressed.visible=!1))},onButtonChanged:function(_){var O=this.mapping.buttons[_.detail.id];!O||this.el.emit(O+"changed",_.detail.state)},onAxisMoved:function(_){E(this,this.mapping.axes,_)},updateModel:function(_,O){!this.data.model||this.updateButtonModel(_,O)},updateButtonModel:function(_,O){var R=this.buttonMeshes,L=_+"Pressed";if(!(!R||!R[_]||!R[L])){var P;switch(O){case"down":P=this.data.buttonHighlightColor;break;case"touchstart":P=this.data.buttonTouchedColor;break}P&&R[L].material.color.set(P),R[L].visible=!!P,R[_].visible=!P}}})},"./src/components/wasd-controls.js":(T,I,u)=>{var g=u("./src/constants/index.js").keyboardevent.KEYCODE_TO_CODE,C=u("./src/core/component.js").registerComponent,v=u("./src/lib/three.js"),y=u("./src/utils/index.js"),E=y.bind,b=y.shouldCaptureKeyEvent,m=1e-5,w=.2,_=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];T.exports.Component=C("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.easing=1.1,this.velocity=new v.Vector3,this.onBlur=E(this.onBlur,this),this.onContextMenu=E(this.onContextMenu,this),this.onFocus=E(this.onFocus,this),this.onKeyDown=E(this.onKeyDown,this),this.onKeyUp=E(this.onKeyUp,this),this.onVisibilityChange=E(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(R,L){var P=this.data,Y=this.el,J=this.velocity;!J[P.adAxis]&&!J[P.wsAxis]&&O(this.keys)||(L=L/1e3,this.updateVelocity(L),!(!J[P.adAxis]&&!J[P.wsAxis])&&Y.object3D.position.add(this.getMovementVector(L)))},update:function(R){R.adAxis!==this.data.adAxis&&(this.velocity[R.adAxis]=0),R.wsAxis!==this.data.wsAxis&&(this.velocity[R.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(R){var L,P,Y,J=this.data,j=this.keys,k=this.velocity,te,ue;if(P=J.adAxis,te=J.wsAxis,R>w){k[P]=0,k[te]=0;return}var xe=Math.pow(1/this.easing,R*60);k[P]!==0&&(k[P]=k[P]*xe),k[te]!==0&&(k[te]=k[te]*xe),Math.abs(k[P])<m&&(k[P]=0),Math.abs(k[te])<m&&(k[te]=0),J.enabled&&(L=J.acceleration,J.adEnabled&&(Y=J.adInverted?-1:1,(j.KeyA||j.ArrowLeft)&&(k[P]-=Y*L*R),(j.KeyD||j.ArrowRight)&&(k[P]+=Y*L*R)),J.wsEnabled&&(ue=J.wsInverted?-1:1,(j.KeyW||j.ArrowUp)&&(k[te]-=ue*L*R),(j.KeyS||j.ArrowDown)&&(k[te]+=ue*L*R)))},getMovementVector:function(){var R=new v.Vector3(0,0,0),L=new v.Euler(0,0,0,"YXZ");return function(P){var Y=this.el.getAttribute("rotation"),J=this.velocity,j;return R.copy(J),R.multiplyScalar(P),Y&&(j=this.data.fly?Y.x:0,L.set(v.MathUtils.degToRad(j),v.MathUtils.degToRad(Y.y),0),R.applyEuler(L)),R}}(),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var R=Object.keys(this.keys),L=0;L<R.length;L++)delete this.keys[R[L]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(R){var L;!b(R)||(L=R.code||g[R.keyCode],_.indexOf(L)!==-1&&(this.keys[L]=!0))},onKeyUp:function(R){var L;L=R.code||g[R.keyCode],delete this.keys[L]}});function O(R){var L;for(L in R)return!1;return!0}},"./src/components/windows-motion-controls.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/utils/bind.js"),v=u("./src/utils/tracked-controls.js"),y=v.checkControllerPresentAndSetup,E=v.emitIfAxesChanged,b=v.onButtonEvent,m=u("./src/utils/index.js"),w=m.debug("components:windows-motion-controls:debug"),_=m.debug("components:windows-motion-controls:warn"),O=u("./src/constants/index.js").DEFAULT_HANDEDNESS,R="https://cdn.aframe.io/controllers/microsoft/",L={left:"left.glb",right:"right.glb",default:"universal.glb"},P=u("./src/utils/index.js").device.isWebXRAvailable,Y="windows-mixed-reality",J="Spatial Controller (Spatial Interaction Source) ",j=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,k=P?Y:J,te={axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},ue={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},xe=P?ue:te;T.exports.Component=g("windows-motion-controls",{schema:{hand:{default:O},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:xe,bindMethods:function(){this.onModelError=C(this.onModelError,this),this.onModelLoaded=C(this.onModelLoaded,this),this.onControllersUpdate=C(this.onControllersUpdate,this),this.checkIfControllerPresent=C(this.checkIfControllerPresent,this),this.onAxisMoved=C(this.onAxisMoved,this)},init:function(){var Ee=this,V=this.el;this.onButtonChanged=C(this.onButtonChanged,this),this.onButtonDown=function(q){b(q.detail.id,"down",Ee)},this.onButtonUp=function(q){b(q.detail.id,"up",Ee)},this.onButtonTouchStart=function(q){b(q.detail.id,"touchstart",Ee)},this.onButtonTouchEnd=function(q){b(q.detail.id,"touchend",Ee)},this.onControllerConnected=function(){Ee.setModelVisibility(!0)},this.onControllerDisconnected=function(){Ee.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},V.addEventListener("controllerconnected",this.onControllerConnected),V.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var Ee=this.el;Ee.addEventListener("buttonchanged",this.onButtonChanged),Ee.addEventListener("buttondown",this.onButtonDown),Ee.addEventListener("buttonup",this.onButtonUp),Ee.addEventListener("touchstart",this.onButtonTouchStart),Ee.addEventListener("touchend",this.onButtonTouchEnd),Ee.addEventListener("axismove",this.onAxisMoved),Ee.addEventListener("model-error",this.onModelError),Ee.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var Ee=this.el;Ee.removeEventListener("buttonchanged",this.onButtonChanged),Ee.removeEventListener("buttondown",this.onButtonDown),Ee.removeEventListener("buttonup",this.onButtonUp),Ee.removeEventListener("touchstart",this.onButtonTouchStart),Ee.removeEventListener("touchend",this.onButtonTouchEnd),Ee.removeEventListener("axismove",this.onAxisMoved),Ee.removeEventListener("model-error",this.onModelError),Ee.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,k,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh){this.modelReady();return}var Ee=this.createControllerModelUrl();this.loadModel(Ee)},createControllerModelUrl:function(Ee){var V=this.el.components["tracked-controls"],q=V?V.controller:null,Q="default",F=this.data.hand,z;if(q&&!window.hasNativeWebXRImplementation&&(F=q.hand,!Ee)){var X=q.id.match(j);Q=X&&X[0]||Q}return z=L[F]||L.default,R+Q+"/"+z},injectTrackedControls:function(){var Ee=this.data;this.el.setAttribute("tracked-controls",{idPrefix:k,controller:Ee.pair,hand:Ee.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(Ee){var V=this.createControllerModelUrl(!0);Ee.detail.src!==V?(_("Failed to load controller model for device, attempting to load default."),this.loadModel(V)):_("Failed to load default controller model.")},loadModel:function(Ee){this.el.setAttribute("gltf-model","url("+Ee+")")},onModelLoaded:function(Ee){var V=this.controllerModel=Ee.detail.model,q=this.loadedMeshInfo,Q,F,z,X;if(w("Processing model"),q.buttonMeshes={},q.axisMeshes={},V){for(Q=0;Q<this.mapping.buttons.length;Q++){if(F=this.mapping.buttonMeshNames[this.mapping.buttons[Q]],!F){w("Skipping unknown button at index: "+Q+" with mapped name: "+this.mapping.buttons[Q]);continue}if(z=V.getObjectByName(F),!z){_("Missing button mesh with name: "+F);continue}X={index:Q,value:fe(z,"VALUE"),pressed:fe(z,"PRESSED"),unpressed:fe(z,"UNPRESSED")},X.value&&X.pressed&&X.unpressed?q.buttonMeshes[this.mapping.buttons[Q]]=X:_("Missing button submesh under mesh with name: "+F+"(VALUE: "+!!X.value+", PRESSED: "+!!X.pressed+", UNPRESSED:"+!!X.unpressed+")")}for(Q=0;Q<this.mapping.axisMeshNames.length;Q++){if(F=this.mapping.axisMeshNames[Q],!F){w("Skipping unknown axis at index: "+Q);continue}if(z=V.getObjectByName(F),!z){_("Missing axis mesh with name: "+F);continue}X={index:Q,value:fe(z,"VALUE"),min:fe(z,"MIN"),max:fe(z,"MAX")},X.value&&X.min&&X.max?q.axisMeshes[Q]=X:_("Missing axis submesh under mesh with name: "+F+"(VALUE: "+!!X.value+", MIN: "+!!X.min+", MAX:"+!!X.max+")")}this.calculateRayOriginFromMesh(V),this.setModelVisibility()}w("Model load complete.");function fe(Ae,Se){for(var Be=0,Ge=Ae.children.length;Be<Ge;Be++){var ht=Ae.children[Be];if(ht&&ht.name===Se)return ht}}},calculateRayOriginFromMesh:function(){var Ee=new THREE.Quaternion;return function(V){var q;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,q=V.getObjectByName(this.mapping.pointingPoseMeshName),q){var Q=V.parent;Q&&(V.parent=null,V.updateMatrixWorld(!0),V.parent=Q),q.getWorldPosition(this.rayOrigin.origin),q.getWorldQuaternion(Ee),this.rayOrigin.direction.applyQuaternion(Ee),Q&&V.updateMatrixWorld(!0)}else w("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var Ee=new THREE.Quaternion;return function(V,q){var Q=this.loadedMeshInfo.axisMeshes[V];if(!!Q){var F=Q.min,z=Q.max,X=Q.value,fe=q*.5+.5;X.setRotationFromQuaternion(Ee.copy(F.quaternion).slerp(z.quaternion,fe)),X.position.lerpVectors(F.position,z.position,fe)}}}(),lerpButtonTransform:function(){var Ee=new THREE.Quaternion;return function(V,q){var Q=this.loadedMeshInfo.buttonMeshes[V];if(!!Q){var F=Q.unpressed,z=Q.pressed,X=Q.value;X.setRotationFromQuaternion(Ee.copy(F.quaternion).slerp(z.quaternion,q)),X.position.lerpVectors(F.position,z.position,q)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(Ee){var V=this.mapping.buttons[Ee.detail.id];V&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(V,Ee.detail.state.value),this.el.emit(V+"changed",Ee.detail.state))},onAxisMoved:function(Ee){var V=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var q=0;q<V;q++)this.lerpAxisTransform(q,Ee.detail.axis[q]||0);E(this,this.mapping.axes,Ee)},setModelVisibility:function(Ee){var V=this.el.getObject3D("mesh");Ee=Ee!==void 0?Ee:this.modelVisible,this.modelVisible=Ee,V&&(V.visible=Ee)}})},"./src/constants/index.js":(T,I,u)=>{T.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:u("./src/constants/keyboardevent.js")}},"./src/constants/keyboardevent.js":T=>{T.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},"./src/core/a-assets.js":(T,I,u)=>{var g=u("./src/core/a-node.js").ANode,C=u("./src/utils/bind.js"),v=u("./src/utils/debug.js"),y=u("./src/lib/three.js"),E=new y.FileLoader,b=v("core:a-assets:warn");class m extends g{constructor(){super(),this.isAssets=!0,this.fileLoader=E,this.timeout=null}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var j=this,k,te=[],ue,xe,Ee,V,q;if(super.connectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(V=this.querySelectorAll("img"),k=0;k<V.length;k++)Ee=O(V[k]),te.push(new Promise(function(Q,F){if(y.Cache.add(V[k].getAttribute("src"),Ee),Ee.complete){Q();return}Ee.onload=Q,Ee.onerror=F}));for(xe=this.querySelectorAll("audio, video"),k=0;k<xe.length;k++)ue=O(xe[k]),!ue.src&&!ue.srcObject&&b("Audio/video asset has neither `src` nor `srcObject` attributes."),te.push(_(ue));Promise.allSettled(te).then(C(this.load,this)),q=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){j.hasLoaded||(b("Asset loading timed out in ",q,"ms"),j.emit("timeout"),j.load())},q)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(k){return k.isAssetItem&&k.hasAttribute("src")})}}customElements.define("a-assets",m);class w extends g{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var j=this,k=this.getAttribute("src");E.setResponseType(this.getAttribute("response-type")||P(k)),E.load(k,function(ue){j.data=ue,setTimeout(function(){g.prototype.load.call(j)})},function(ue){j.emit("progress",{loadedBytes:ue.loaded,totalBytes:ue.total,xhr:ue})},function(ue){j.emit("error",{xhr:ue})})}}customElements.define("a-asset-item",w);function _(J){if(!(!J.hasAttribute("autoplay")&&J.getAttribute("preload")!=="auto"))return new Promise(function(j,k){if(J.readyState===4)return j();if(J.error)return k();J.addEventListener("loadeddata",te,!1),J.addEventListener("progress",te,!1),J.addEventListener("error",k,!1);function te(){for(var ue=0,xe=0;xe<J.buffered.length;xe++)ue+=J.buffered.end(xe)-J.buffered.start(xe);ue>=J.duration&&(J.tagName==="VIDEO"&&y.Cache.add(J.getAttribute("src"),J),j())}})}function O(J){var j=R(J);return j.tagName&&j.tagName.toLowerCase()==="video"&&(j.setAttribute("playsinline",""),j.setAttribute("webkit-playsinline","")),j!==J&&(J.parentNode.appendChild(j),J.parentNode.removeChild(J)),j}function R(J){var j,k;return J.hasAttribute("crossorigin")||(k=J.getAttribute("src"),k!==null&&(k.indexOf("://")===-1||L(k)===window.location.host))?J:(b('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',k),J.crossOrigin="anonymous",j=J.cloneNode(!0),j)}function L(J){var j=J.indexOf("://")>-1?J.split("/")[2]:J.split("/")[0];return j.substring(0,j.indexOf(":"))}function P(J){var j=Y(J),k=j.lastIndexOf(".");if(k>=0){var te=j.slice(k,J.search(/\?|#|$/));if(te===".glb")return"arraybuffer"}return"text"}T.exports.inferResponseType=P;function Y(J){var j=document.createElement("a");j.href=J;var k=j.search.replace(/^\?/,""),te=J.replace(k,"").replace("?","");return te.substring(te.lastIndexOf("/")+1)}T.exports.getFileNameFromURL=Y},"./src/core/a-cubemap.js":(T,I,u)=>{var g=u("./src/utils/debug.js"),C=g("core:cubemap:warn");class v extends HTMLElement{constructor(E){return E=super(E),E}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}v.prototype.doConnectedCallback.call(this)}doConnectedCallback(){this.srcs=this.validate()}validate(){var E=this.querySelectorAll("[src]"),b,m=[];if(E.length===6){for(b=0;b<E.length;b++)m.push(E[b].getAttribute("src"));return m}C("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",v)},"./src/core/a-entity.js":(T,I,u)=>{var g=u("./src/core/a-node.js").ANode,C=u("./src/core/component.js").components,v=u("./src/lib/three.js"),y=u("./src/utils/index.js"),E=y.debug("core:a-entity:debug"),b=y.debug("core:a-entity:warn"),m="__",w=["position","rotation","scale","visible"],_={once:!0};class O extends g{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new v.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(k,te,ue){var xe=this.components[k];if(super.attributeChangedCallback(),xe&&xe.justInitialized&&ue===""){delete xe.justInitialized;return}!xe&&ue===null||this.setEntityAttribute(k,te,ue)}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}O.prototype.doConnectedCallback.call(this)}doConnectedCallback(){var k=this,te,ue;if(super.connectedCallback(),ue=this.sceneEl,this.addToParent(),!this.isScene){if(!ue){this.load();return}if(te=ue.querySelector("a-assets"),te&&!te.hasLoaded){te.addEventListener("loaded",function(){k.load()});return}this.load()}}disconnectedCallback(){var k;if(!!this.parentEl){for(k in this.components)this.removeComponent(k,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(k){return this.object3DMap[k]}setObject3D(k,te){var ue,xe=this;if(!(te instanceof v.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");ue=this.getObject3D(k),ue&&this.object3D.remove(ue),te.el=this,te.children.length&&te.traverse(function(V){V.el=xe}),this.object3D.add(te),this.object3DMap[k]=te,this.emit("object3dset",{object:te,type:k})}removeObject3D(k){var te=this.getObject3D(k);if(!te){b("Tried to remove `Object3D` of type:",k,"which was not defined.");return}this.object3D.remove(te),delete this.object3DMap[k],this.emit("object3dremove",{type:k})}getOrCreateObject3D(k,te){var ue=this.getObject3D(k);return!ue&&te&&(ue=new te,this.setObject3D(k,ue)),b("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),ue}add(k){if(!k.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(k.object3D),this.emit("child-attached",{el:k})}addToParent(){var k=this.parentEl=this.parentNode;!k||!k.add||this.attachedToParent||(k.add(this),this.attachedToParent=!0)}removeFromParent(){var k=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,k.emit("child-detached",{el:this})}load(){var k=this;this.hasLoaded||!this.parentEl||super.load.call(this,function(){!k.parentEl||(k.updateComponents(),(k.isScene||k.parentEl.isPlaying)&&k.play())})}remove(k){k?this.object3D.remove(k.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var k=this.children,te=[],ue=0;ue<k.length;ue++){var xe=k[ue];xe instanceof O&&te.push(xe)}return te}initComponent(k,te,ue){var xe,Ee,V,q,Q;if(V=y.split(k,m),q=V[0],Ee=V.length>2?V.slice(1).join("__"):V[1],!!C[q]&&(Q=R(this,k)||te!==void 0,!(!Q&&!ue)&&!(k in this.components))){if(this.initComponentDependencies(q),Ee&&!C[q].multiple)throw new Error("Trying to initialize multiple components of type `"+q+"`. There can only be one component of this type per entity.");xe=new C[q].Component(this,te,Ee),this.isPlaying&&xe.play(),this.hasAttribute(k)||(xe.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,k,"")),E("Component initialized: %s",k)}}initComponentDependencies(k){var te=this,ue=C[k],xe,Ee;if(!!ue&&(xe=C[k].dependencies,!!xe))for(Ee=0;Ee<xe.length;Ee++)te.initComponent(xe[Ee],window.HTMLElement.prototype.getAttribute.call(te,xe[Ee])||void 0,!0)}removeComponent(k,te){var ue;if(ue=this.components[k],!!ue){if(!ue.initialized){this.addEventListener("componentinitialized",function xe(Ee){Ee.detail.name===k&&(this.removeComponent(k,te),this.removeEventListener("componentinitialized",xe))});return}ue.pause(),ue.remove(),te&&(ue.destroy(),delete this.components[k]),this.emit("componentremoved",ue.evtDetail,!1)}}updateComponents(){var k,te,ue,xe,Ee=this.componentsToUpdate;if(!!this.hasLoaded){for(ue=0;ue<this.mixinEls.length;ue++)for(xe in this.mixinEls[ue].componentCache)Y(xe)&&(Ee[xe]=!0);if(this.getExtraComponents){te=this.getExtraComponents();for(xe in te)Y(xe)&&(Ee[xe]=!0)}for(ue=0;ue<this.attributes.length;++ue)xe=this.attributes[ue].name,w.indexOf(xe)===-1&&Y(xe)&&(Ee[xe]=!0);for(ue=0;ue<w.length;ue++)xe=w[ue],this.hasAttribute(xe)&&this.updateComponent(xe,this.getDOMAttribute(xe));for(xe in Ee)k=P(this.getDOMAttribute(xe),te&&te[xe]),this.updateComponent(xe,k),delete Ee[xe]}}updateComponent(k,te,ue){var xe=this.components[k];if(xe){if(te===null&&!R(this,k)){this.removeComponent(k,!0);return}xe.updateProperties(te,ue);return}this.initComponent(k,te,!1)}removeAttribute(k,te){var ue=this.components[k];if(ue&&te===void 0&&this.removeComponent(k,!0),ue&&te!==void 0){ue.resetProperty(te);return}k==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,k)}play(){var k,te,ue;if(!(this.isPlaying||!this.hasLoaded)){this.isPlaying=!0;for(ue in this.components)this.components[ue].play();for(k=this.getChildEntities(),te=0;te<k.length;te++)k[te].play();this.emit("play")}}pause(){var k,te,ue;if(!!this.isPlaying){this.isPlaying=!1;for(ue in this.components)this.components[ue].pause();for(k=this.getChildEntities(),te=0;te<k.length;te++)k[te].pause();this.emit("pause")}}setEntityAttribute(k,te,ue){if(C[k]||this.components[k]){this.updateComponent(k,ue);return}if(k==="mixin"){if(ue===this.computedMixinStr)return;this.mixinUpdate(ue,te)}}mixinUpdate(k,te){var ue=O.componentsUpdated,xe,Ee,V,q,Q=this;if(!this.hasLoaded){this.addEventListener("loaded",function(){Q.mixinUpdate(k,te)},_);return}for(te=te||this.getAttribute("mixin"),V=this.updateMixins(k,te),ue.length=0,q=0;q<this.mixinEls.length;q++)for(xe in this.mixinEls[q].componentCache)ue.indexOf(xe)===-1&&(this.components[xe]?this.components[xe].handleMixinUpdate():this.initComponent(xe,null),ue.push(xe));for(q=0;q<V.oldMixinIds.length;q++)if(Ee=document.getElementById(V.oldMixinIds[q]),!!Ee)for(xe in Ee.componentCache)ue.indexOf(xe)===-1&&this.components[xe]&&(this.getDOMAttribute(xe)?this.components[xe].handleMixinUpdate():this.removeComponent(xe,!0))}setAttribute(k,te,ue){var xe=O.singlePropUpdate,Ee,V,q,Q,F,z;if(Q=k.indexOf(m),q=Q>0?k.substring(0,Q):k,!C[q]){k==="mixin"&&this.mixinUpdate(te),super.setAttribute.call(this,k,te);return}if(!this.components[k]&&this.hasAttribute(k)&&this.updateComponent(k,window.HTMLElement.prototype.getAttribute.call(this,k)),typeof ue<"u"&&typeof te=="string"&&te.length>0&&typeof y.styleParser.parse(te)=="string"){for(z in xe)delete xe[z];Ee=xe,Ee[te]=ue,V=!1}else Ee=te,V=ue===!0;this.updateComponent(k,Ee,V),F=this.sceneEl&&this.sceneEl.getAttribute("debug"),F&&this.components[k].flushToDOM()}flushToDOM(k){var te=this.components,ue,xe=this.children,Ee,V;for(V in te)te[V].flushToDOM();if(!!k)for(Ee=0;Ee<xe.length;++Ee)ue=xe[Ee],ue.flushToDOM&&ue.flushToDOM(k)}getAttribute(k){var te;return k==="position"?this.object3D.position:k==="rotation"?J(this):k==="scale"?this.object3D.scale:k==="visible"?this.object3D.visible:(te=this.components[k],te?te.data:window.HTMLElement.prototype.getAttribute.call(this,k))}getDOMAttribute(k){var te=this.components[k];return te?te.attrValue:window.HTMLElement.prototype.getAttribute.call(this,k)}addState(k){this.is(k)||(this.states.push(k),this.emit("stateadded",k))}removeState(k){var te=this.states.indexOf(k);te!==-1&&(this.states.splice(te,1),this.emit("stateremoved",k))}is(k){return this.states.indexOf(k)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var k;if(this.parentNode){b("Entity can only be destroyed if detached from scenegraph.");return}for(k in this.components)this.components[k].destroy()}}function R(j,k){return j.components[k]&&j.components[k].attrValue?!0:L(k,j.mixinEls)}function L(j,k){var te,ue=!1;for(te=0;te<k.length&&(ue=k[te].hasAttribute(j),!ue);++te);return ue}function P(j,k){return k?k.constructor===Object?y.extend(k,y.styleParser.parse(j||{})):j||k:j}function Y(j){return j.indexOf(m)!==-1&&(j=y.split(j,m)[0]),!!C[j]}function J(j){var k=v.MathUtils.radToDeg,te=j.object3D.rotation,ue=j.rotationObj;return ue.x=k(te.x),ue.y=k(te.y),ue.z=k(te.z),ue}O.componentsUpdated=[],O.singlePropUpdate={},customElements.define("a-entity",O),T.exports.AEntity=O},"./src/core/a-mixin.js":(T,I,u)=>{var g=u("./src/core/a-node.js").ANode,C=u("./src/core/component.js").components,v=u("./src/utils/index.js"),y="__";class E extends g{constructor(){super(),this.componentCache={},this.isMixin=!0}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){super.connectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(m,w,_){super.attributeChangedCallback(),this.cacheAttribute(m,_),this.updateEntities()}setAttribute(m,w){window.HTMLElement.prototype.setAttribute.call(this,m,w),this.cacheAttribute(m,w)}cacheAttribute(m,w){var _,O;O=v.split(m,y)[0],_=C[O],_&&(w===void 0&&(w=window.HTMLElement.prototype.getAttribute.call(this,m)),this.componentCache[m]=_.parseAttrValueForCache(w))}getAttribute(m){return this.componentCache[m]||window.HTMLElement.prototype.getAttribute.call(this,m)}cacheAttributes(){var m=this.attributes,w,_;for(_=0;_<m.length;_++)w=m[_].name,this.cacheAttribute(w)}updateEntities(){var m,w,_;if(!!this.sceneEl)for(w=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),_=0;_<w.length;_++)m=w[_],!(!m.hasLoaded||m.isMixin)&&m.mixinUpdate(this.id)}}customElements.define("a-mixin",E)},"./src/core/a-node.js":(T,I,u)=>{var g=u("./src/utils/index.js"),C=g.debug("core:a-node:warn"),v={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function y(b){return b.tagName.toLowerCase()in v||b.isNode}class E extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}E.prototype.doConnectedCallback.call(this)}doConnectedCallback(){var m;this.sceneEl=this.closestScene(),this.sceneEl||C("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(m=this.getAttribute("mixin"),m&&this.updateMixins(m))}attributeChangedCallback(m,w,_){_!==this.computedMixinStr&&m==="mixin"&&!this.isMixin&&this.updateMixins(_,w)}closestScene(){for(var m=this;m&&!m.isScene;)m=m.parentElement;return m}closest(m){for(var w=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,_=this;_&&!w.call(_,m);)_=_.parentElement;return _}disconnectedCallback(){this.hasLoaded=!1}load(m,w){var _,O,R=this;this.hasLoaded||(w=w||y,_=this.getChildren(),O=_.filter(w).map(function(L){return new Promise(function(Y,J){if(L.hasLoaded)return Y();L.addEventListener("loaded",Y),L.addEventListener("error",J)})}),Promise.allSettled(O).then(function(P){P.forEach(function(J){J.status==="rejected"&&C("Rendering scene with errors on node: ",J.reason.target)}),R.hasLoaded=!0,R.setupMutationObserver(),m&&m(),R.emit("loaded",void 0,!1)}))}setupMutationObserver(){var m=this,w={attributes:!0,attributeOldValue:!0},_=new MutationObserver(function(R){var L;for(L=0;L<R.length;L++)if(R[L].type==="attributes"){var P=R[L].attributeName,Y=window.HTMLElement.prototype.getAttribute.call(m,P),J=R[L].oldValue;m.attributeChangedCallback(P,J,Y)}});_.observe(this,w)}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(m,w){var _=E.newMixinIdArray,O=E.oldMixinIdArray,R=E.mixinIds,L,P,Y;for(_.length=0,O.length=0,P=m?g.split(m.trim(),/\s+/):_,Y=w?g.split(w.trim(),/\s+/):O,R.newMixinIds=P,R.oldMixinIds=Y,L=0;L<Y.length;L++)P.indexOf(Y[L])===-1&&this.unregisterMixin(Y[L]);for(this.computedMixinStr="",this.mixinEls.length=0,L=0;L<P.length;L++)this.registerMixin(document.getElementById(P[L]));return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),R}registerMixin(m){var w,_,O;if(!!m){if(O=m.getAttribute("mixin"),O)for(w=g.split(O.trim(),/\s+/),_=0;_<w.length;_++)this.registerMixin(document.getElementById(w[_]));this.computedMixinStr=this.computedMixinStr+" "+m.id,this.mixinEls.push(m)}}setAttribute(m,w){m==="mixin"&&this.updateMixins(w),window.HTMLElement.prototype.setAttribute.call(this,m,w)}unregisterMixin(m){var w,_=this.mixinEls,O;for(w=0;w<_.length;++w)if(O=_[w],m===O.id){_.splice(w,1);break}}emit(m,w,_,O){var R=E.evtData;_===void 0&&(_=!0),R.bubbles=!!_,R.detail=w,O&&(R=g.extend({},O,R)),this.dispatchEvent(new CustomEvent(m,R))}}E.evtData={},E.newMixinIdArray=[],E.oldMixinIdArray=[],E.mixinIds={},customElements.define("a-node",E),T.exports.ANode=E,T.exports.knownTags=v},"./src/core/component.js":(T,I,u)=>{var g=u("./src/core/schema.js"),C=u("./src/core/scene/scenes.js"),v=u("./src/core/system.js"),y=u("./src/utils/index.js"),E=T.exports.components={},b=g.parseProperties,m=g.parseProperty,w=g.process,_=g.isSingleProperty,O=g.stringifyProperties,R=g.stringifyProperty,L=y.styleParser,P=y.debug("core:component:warn"),Y=document.currentScript,J=new RegExp("[A-Z]+"),j={},k=T.exports.Component=function(X,fe,Ae){var Se=this;this.el=X,this.id=Ae,this.attrName=this.name+(Ae?"__"+Ae:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=j[this.name];var Be=this.events;this.events={},te(this,Be),this.attrValue=void 0,this.isObjectBased?(this.nextData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.nextData,this.schema),this.oldData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.oldData,this.schema),this.previousOldData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.previousOldData,this.schema),this.parsingAttrValue=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.parsingAttrValue,this.schema)):(this.nextData=void 0,this.oldData=void 0,this.previousOldData=void 0,this.parsingAttrValue=void 0),this.throttledEmitComponentChanged=y.throttleLeadingAndTrailing(function(){X.emit("componentchanged",Se.evtDetail,!1)},200),this.updateProperties(fe)};k.prototype={schema:{},init:function(){},events:{},update:function(X){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(X,fe){var Ae=this.schema;return this.isSingleProperty?m(X,Ae):b(L.parse(X),Ae,!0,this.name,fe)},stringify:function(X){var fe=this.schema;return typeof X=="string"?X:this.isSingleProperty?R(X,fe):(X=O(X,fe),L.stringify(X))},updateCachedAttrValue:function(X,fe){var Ae,Se,Be;if(X!==void 0){if(X===null){this.isObjectBased&&this.attrValue&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0;return}if(X instanceof Object&&!(X instanceof window.HTMLElement)?(Se=this.objectPool.use(),Ae=y.extend(Se,X)):Ae=this.parseAttrValueForCache(X),this.isObjectBased&&!fe&&this.attrValue)for(Be in this.attrValue)Ae[Be]===void 0&&(Ae[Be]=this.attrValue[Be]);this.isObjectBased&&!this.attrValue&&(this.attrValue=this.objectPool.use()),y.objectPool.clearObject(this.attrValue),this.attrValue=Ee(this.attrValue,Ae,this.isObjectBased),y.objectPool.clearObject(Se)}},parseAttrValueForCache:function(X){var fe;return typeof X!="string"?X:(this.isSingleProperty?(fe=this.schema.parse(X),typeof fe=="string"&&(fe=X)):(y.objectPool.clearObject(this.parsingAttrValue),fe=L.parse(X,this.parsingAttrValue)),fe)},flushToDOM:function(X){var fe=X?this.data:this.attrValue;fe!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(fe))},updateProperties:function(X,fe){var Ae=this.el;if(!Ae.hasLoaded){this.updateCachedAttrValue(X);return}X!==null&&(X=this.parseAttrValueForCache(X)),this.updateCachedAttrValue(X,fe),this.initialized?(this.updateComponent(X,fe),this.callUpdateHandler()):this.initComponent()},initComponent:function(){var X=this.el,fe;this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue),!X.initializingComponents[this.name]&&(X.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete X.initializingComponents[this.name],this.oldData=Ee(this.oldData,this.data,this.isObjectBased),fe=this.isObjectBased?this.objectPool.use():void 0,this.update(fe),this.isObjectBased&&this.objectPool.recycle(fe),X.isPlaying&&this.play(),X.emit("componentinitialized",this.evtDetail,!1))},updateComponent:function(X,fe){var Ae,Se;if(fe){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}if(this.isSingleProperty){this.isObjectBased&&m(X,this.schema),this.data=X;return}if(b(X,this.schema,!0,this.name),this.schemaChangeKeys.length){for(Ae in X)if(this.schema[Ae].schemaChange){Se=!0;break}}if(Se){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}for(Ae in X)X[Ae]!==void 0&&(this.data[Ae]=X[Ae])},callUpdateHandler:function(){var X;this.previousOldData instanceof Object&&y.objectPool.clearObject(this.previousOldData),this.isObjectBased?xe(this.previousOldData,this.oldData):this.previousOldData=this.oldData,X=!y.deepEqual(this.oldData,this.data),!(!this.isPositionRotationScale&&!X)&&(this.oldData instanceof Object&&y.objectPool.clearObject(this.oldData),this.oldData=Ee(this.oldData,this.data,this.isObjectBased),this.update(this.previousOldData),this.throttledEmitComponentChanged())},handleMixinUpdate:function(){this.data=this.buildData(this.attrValue),this.callUpdateHandler()},resetProperty:function(X){if(this.isObjectBased){if(!(X in this.attrValue))return;delete this.attrValue[X],this.data[X]=this.schema[X].default}else this.attrValue=this.schema.default,this.data=this.schema.default;this.updateProperties(this.attrValue)},extendSchema:function(X){var fe;fe=y.extend({},E[this.name].schema),y.extend(fe,X),this.schema=w(fe),this.el.emit("schemachanged",this.evtDetail)},buildData:function(X,fe,Ae){var Se,Be,Ge,ht,xt,at=this.nextData,Gt=this.schema,wt,Yt=this.el.mixinEls,Mn;if(Se=X&&X.constructor===Array?X.length:X!=null,this.isObjectBased&&y.objectPool.clearObject(at),this.isSingleProperty)this.isObjectBased?Be=xe(at,Gt.default):Be=z(Gt.default)?y.clone(Gt.default):Gt.default;else{Mn=!fe&&this.attrValue,Be=Mn instanceof Object?xe(at,Mn):at;for(ht in Gt)Ge=Gt[ht].default,Be[ht]===void 0&&(Be[ht]=z(Ge)?y.clone(Ge):Ge)}for(wt=0;wt<Yt.length;wt++)xt=Yt[wt].getAttribute(this.attrName),xt&&(Be=Ee(Be,xt,this.isObjectBased));if(Se){if(this.isSingleProperty)return F(X)?(xe(this.parsingAttrValue,X),m(this.parsingAttrValue,Gt)):m(X,Gt);Be=Ee(Be,X,this.isObjectBased)}else if(this.isSingleProperty)return m(Be,Gt);return b(Be,Gt,void 0,this.name,Ae)},eventsAttach:function(){var X;this.eventsDetach();for(X in this.events)this.el.addEventListener(X,this.events[X])},eventsDetach:function(){var X;for(X in this.events)this.el.removeEventListener(X,this.events[X])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.oldData),this.objectPool.recycle(this.parsingAttrValue),this.attrValue=this.oldData=this.parsingAttrValue=void 0}};function te(X,fe){var Ae;for(Ae in fe)X.events[Ae]=fe[Ae].bind(X)}if(window.debug)var ue=T.exports.registrationOrderWarnings={};T.exports.registerComponent=function(X,fe){var Ae,Se,Be={},Ge,ht,xt;if(document.currentScript&&document.currentScript!==Y&&C.forEach(function(Gt){Gt.hasLoaded||document.currentScript.compareDocumentPosition(Gt)!==Node.DOCUMENT_POSITION_FOLLOWING&&(P("The component `"+X+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(ue[X]=!0))}),J.test(X)===!0&&P("The component name `"+X+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+X.toLowerCase()+"`"),X.indexOf("__")!==-1)throw new Error("The component name `"+X+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(fe).forEach(function(at){Be[at]={value:fe[at],writable:!0}}),E[X])throw new Error("The component `"+X+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");if(Ae=function(at,Gt,wt){k.call(this,at,Gt,wt)},Ae.prototype=Object.create(k.prototype,Be),Ae.prototype.name=X,Ae.prototype.isPositionRotationScale=X==="position"||X==="rotation"||X==="scale",Ae.prototype.constructor=Ae,Ae.prototype.system=v&&v.systems[X],Ae.prototype.play=Q(Ae.prototype.play),Ae.prototype.pause=q(Ae.prototype.pause),Ge=y.extend(w(Ae.prototype.schema,Ae.prototype.name)),Ae.prototype.isSingleProperty=ht=_(Ae.prototype.schema),Ae.prototype.isSinglePropertyObject=xt=ht&&F(m(void 0,Ge))&&!(Ge.default instanceof window.HTMLElement),Ae.prototype.isObjectBased=!ht||xt,!ht){Ae.prototype.schemaChangeKeys=[];for(Se in Ge)Ge[Se].schemaChange&&Ae.prototype.schemaChangeKeys.push(Se)}return j[X]=y.objectPool.createPool(),E[X]={Component:Ae,dependencies:Ae.prototype.dependencies,isSingleProperty:Ae.prototype.isSingleProperty,isSinglePropertyObject:Ae.prototype.isSinglePropertyObject,isObjectBased:Ae.prototype.isObjectBased,multiple:Ae.prototype.multiple,name:X,parse:Ae.prototype.parse,parseAttrValueForCache:Ae.prototype.parseAttrValueForCache,schema:Ge,stringify:Ae.prototype.stringify,type:Ae.prototype.type},Ae};function xe(X,fe){var Ae,Se;for(Se in fe)fe[Se]!==void 0&&(Ae=fe[Se],X[Se]=z(Ae)?y.clone(Ae):Ae);return X}function Ee(X,fe,Ae){var Se;if(Ae&&fe.constructor===Object){for(Se in fe)fe[Se]!==void 0&&(fe[Se]&&fe[Se].constructor===Object?X[Se]=y.clone(fe[Se]):X[Se]=fe[Se]);return X}return fe}function V(X){return X.tick||X.tock}function q(X){return function(){var Ae=this.el.sceneEl;!this.isPlaying||(X.call(this),this.isPlaying=!1,this.eventsDetach(),V(this)&&Ae.removeBehavior(this))}}function Q(X){return function(){var Ae=this.el.sceneEl,Se=this.el.isPlaying&&!this.isPlaying;!this.initialized||!Se||(X.call(this),this.isPlaying=!0,this.eventsAttach(),V(this)&&Ae.addBehavior(this))}}function F(X){return X&&X.constructor===Object&&!(X instanceof window.HTMLElement)}function z(X){return X&&(X.constructor===Object||X.constructor===Array)&&!(X instanceof window.HTMLElement)}},"./src/core/geometry.js":(T,I,u)=>{var g=u("./src/core/schema.js"),C=g.process,v=T.exports.geometries={},y=T.exports.geometryNames=[],E=u("./src/lib/three.js"),b=T.exports.Geometry=function(){};b.prototype={schema:{},init:function(m){return this.geometry=new E.BufferGeometry,this.geometry},update:function(m){}},T.exports.registerGeometry=function(m,w){var _,O={};if(Object.keys(w).forEach(function(L){O[L]={value:w[L],writable:!0}}),v[m])throw new Error("The geometry `"+m+"` has been already registered");return _=function(){b.call(this)},_.prototype=Object.create(b.prototype,O),_.prototype.name=m,_.prototype.constructor=_,v[m]={Geometry:_,schema:C(_.prototype.schema)},y.push(m),_}},"./src/core/propertyTypes.js":(T,I,u)=>{var g=u("./src/utils/coordinates.js"),C=u("./node_modules/debug/browser.js"),v=C("core:propertyTypes:warn"),y=C("core:propertyTypes:warn"),E=T.exports.propertyTypes={},b=/[,> .[\]:]/,m=/\url\((.+)\)/;w("audio","",R),w("array",[],_,O),w("asset","",R),w("boolean",!1,Y),w("color","#FFF",L,P),w("int",0,J),w("number",0,j),w("map","",R),w("model","",R),w("selector",null,k,ue),w("selectorAll",null,te,xe),w("src","",Ee),w("string","",L,P),w("time",0,J),w("vec2",{x:0,y:0},V,g.stringify),w("vec3",{x:0,y:0,z:0},V,g.stringify),w("vec4",{x:0,y:0,z:0,w:1},V,g.stringify);function w(F,z,X,fe){if("type"in E){v("Property type "+F+" is already registered.");return}E[F]={default:z,parse:X||L,stringify:fe||P}}T.exports.registerPropertyType=w;function _(F){if(Array.isArray(F))return F;if(!F||typeof F!="string")return[];return F.split(",").map(z);function z(X){return X.trim()}}function O(F){return F.join(", ")}function R(F){var z,X;if(typeof F!="string")return F;if(X=F.match(m),X)return X[1];if(F.charAt(0)==="#"){if(z=document.getElementById(F.substring(1)),z)return z.tagName==="CANVAS"||z.tagName==="VIDEO"||z.tagName==="IMG"?z:z.getAttribute("src");y('"'+F+'" asset not found.');return}return F}function L(F){return F}function P(F){return F===null?"null":F.toString()}function Y(F){return F!=="false"&&F!==!1}function J(F){return parseInt(F,10)}function j(F){return parseFloat(F,10)}function k(F){return F?typeof F!="string"?F:F[0]==="#"&&!b.test(F)?document.getElementById(F.substring(1)):document.querySelector(F):null}function te(F){return F?typeof F!="string"?F:Array.prototype.slice.call(document.querySelectorAll(F),0):null}function ue(F){return F.getAttribute?"#"+F.getAttribute("id"):P(F)}function xe(F){return F instanceof Array?F.map(function(z){return"#"+z.getAttribute("id")}).join(", "):P(F)}function Ee(F){return y("`src` property type is deprecated. Use `asset` instead."),R(F)}function V(F){return g.parse(F,this.default)}function q(F,z){return F==="audio"&&typeof z!="string"||F==="array"&&!Array.isArray(z)||F==="asset"&&typeof z!="string"||F==="boolean"&&typeof z!="boolean"||F==="color"&&typeof z!="string"||F==="int"&&typeof z!="number"||F==="number"&&typeof z!="number"||F==="map"&&typeof z!="string"||F==="model"&&typeof z!="string"||F==="selector"&&typeof z!="string"&&z!==null||F==="selectorAll"&&typeof z!="string"&&z!==null||F==="src"&&typeof z!="string"||F==="string"&&typeof z!="string"||F==="time"&&typeof z!="number"?!1:F==="vec2"?Q(z,2):F==="vec3"?Q(z,3):F==="vec4"?Q(z,4):!0}T.exports.isValidDefaultValue=q;function Q(F,z){if(F===null)return!0;if(typeof F!="object"||Object.keys(F).length!==z)return!1;var X=F.x,fe=F.y,Ae=F.z,Se=F.w;return!(typeof X!="number"||typeof fe!="number"||z>2&&typeof Ae!="number"||z>3&&typeof Se!="number")}T.exports.isValidDefaultCoordinate=Q},"./src/core/scene/a-scene.js":(T,I,u)=>{var g=u("./src/core/scene/metaTags.js").inject,C=u("./src/core/scene/wakelock.js"),v=u("./src/core/scene/loadingScreen.js"),y=u("./src/core/scene/scenes.js"),E=u("./src/core/system.js").systems,b=u("./src/lib/three.js"),m=u("./src/utils/index.js"),w=u("./src/core/a-entity.js").AEntity,_=u("./src/core/a-node.js").ANode,O=u("./src/core/scene/postMessage.js"),R=m.bind,L=m.device.isIOS(),P=m.device.isMobile(),Y=m.device.isWebXRAvailable,J=m.debug("core:a-scene:warn");L&&u("./src/utils/ios-orientationchange-blank-bug.js");class j extends w{constructor(){var Q;super(),Q=this,Q.clock=new b.Clock,Q.isIOS=L,Q.isMobile=P,Q.hasWebXR=Y,Q.isAR=!1,Q.isScene=!0,Q.object3D=new b.Scene,Q.object3D.onAfterRender=function(F,z,X){Q.isPlaying&&Q.tock(Q.time,Q.delta,X)},Q.resize=R(Q.resize,Q),Q.render=R(Q.render,Q),Q.systems={},Q.systemNames=[],Q.time=Q.delta=0,Q.behaviors={tick:[],tock:[]},Q.hasLoaded=!1,Q.isPlaying=!1,Q.originalHTML=Q.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var Q=this,F=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.connectedCallback(),V(this),this.setupRenderer(),v.setup(this,te),this.resize(),F||this.addFullScreenStyles(),O(this),g(this),C(this),this.onVRPresentChangeBound=R(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){Q.enterVR()},this.exitVRBound=function(){Q.exitVR()},this.exitVRTrueBound=function(){Q.exitVR(!0)},this.pointerRestrictedBound=function(){Q.pointerRestricted()},this.pointerUnrestrictedBound=function(){Q.pointerUnrestricted()},Q.hasWebXR||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){Q.attachedCallbackPostCamera()}),this.initSystems(),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){Q.enterVR()})}attachedCallbackPostCamera(){var Q,F=this;window.addEventListener("load",Q),window.addEventListener("resize",function(){F.isIOS?setTimeout(F.resize,100):F.resize()}),this.play(),y.push(this)}initSystems(){var Q;this.initSystem("camera");for(Q in E)Q!=="camera"&&this.initSystem(Q)}initSystem(Q){this.systems[Q]||(this.systems[Q]=new E[Q](this),this.systemNames.push(Q))}disconnectedCallback(){var Q=y.indexOf(this);super.disconnectedCallback(),y.splice(Q,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.dispose()}addBehavior(Q){var F,z=this.behaviors,X;for(X in z)!Q[X]||(F=this.behaviors[X],F.indexOf(Q)===-1&&F.push(Q))}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return m.device.checkHeadsetConnected()}enterAR(){var Q;if(!this.hasWebXR)throw Q="Failed to enter AR mode, WebXR not supported.",new Error(Q);if(!m.device.checkARSupport())throw Q="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(Q);return this.enterVR(!0)}enterVR(Q){var F=this,z,X=F.renderer.xr,fe;if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var Ae=F.getAttribute("renderer");if(X.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var Se=this.sceneEl.systems.webxr.sessionReferenceSpaceType;X.setReferenceSpaceType(Se);var Be=Q?"immersive-ar":"immersive-vr";return fe=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(at,Gt){navigator.xr.requestSession(Be,fe).then(function(Yt){F.xrSession=Yt,X.layersEnabled=fe.requiredFeatures.indexOf("layers")!==-1,X.setSession(Yt).then(function(){X.setFoveation(Ae.foveationLevel)}),F.systems.renderer.setWebXRFrameRate(Yt),Yt.addEventListener("end",F.exitVRBound),ht(at)},function(Yt){var Mn=Be==="immersive-ar",je=Mn?"AR":"VR";throw new Error("Failed to enter "+je+" mode (`requestSession`) "+Yt)})})}else{if(z=m.device.getVRDisplay(),X.setDevice(z),z.isPresenting&&!window.hasNativeWebVRImplementation)return ht(),Promise.resolve();var Ge={highRefreshRate:Ae.highRefreshRate};return z.requestPresent([{source:this.canvas,attributes:Ge}]).then(ht,xt)}}return ht(),Promise.resolve();function ht(at){var Gt;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(Gt=new CustomEvent("vrdisplaypresentchange",{detail:{display:m.device.getVRDisplay()}}),window.dispatchEvent(Gt)),Q?F.addState("ar-mode"):F.addState("vr-mode"),F.emit("enter-vr",{target:F}),!F.hasWebXR&&F.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),F.addFullScreenStyles(),!F.isMobile&&!F.checkHeadsetConnected()&&xe(F.canvas),F.resize(),at&&at()}function xt(at){throw F.removeState("vr-mode"),at&&at.message?new Error("Failed to enter VR mode (`requestPresent`): "+at.message):new Error("Failed to enter VR mode (`requestPresent`).")}}exitVR(){var Q=this,F,z=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(z.enabled=!1,F=m.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0;else if(F.isPresenting)return F.exitPresent().then(X,fe)}else Ee();return X(),Promise.resolve();function X(){Q.removeState("vr-mode"),Q.removeState("ar-mode"),Q.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),Q.hasAttribute("embedded")&&Q.removeFullScreenStyles(),Q.resize(),Q.isIOS&&m.forceCanvasResizeSafariMobile(Q.canvas),Q.renderer.setPixelRatio(window.devicePixelRatio),Q.emit("exit-vr",{target:Q})}function fe(Ae){throw Ae&&Ae.message?new Error("Failed to exit VR mode (`exitPresent`): "+Ae.message):new Error("Failed to exit VR mode (`exitPresent`).")}}pointerRestricted(){if(this.canvas){var Q=this.getPointerLockElement();Q&&Q!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}pointerUnrestricted(){var Q=this.getPointerLockElement();Q&&Q===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}onVRPresentChange(Q){var F=Q.display||Q.detail.display;if(F&&F.isPresenting){this.enterVR();return}this.exitVR()}getAttribute(Q){var F=this.systems[Q];return F?F.data:w.prototype.getAttribute.call(this,Q)}getComputedAttribut(Q){J("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(Q)}getDOMAttribute(Q){var F=this.systems[Q];return F?F.data:w.prototype.getDOMAttribute.call(this,Q)}setAttribute(Q,F,z){var X=this.systems[Q];if(X){_.prototype.setAttribute.call(this,Q,F),X.updateProperties(F);return}w.prototype.setAttribute.call(this,Q,F,z)}removeBehavior(Q){var F,z,X=this.behaviors,fe;for(z in X)!Q[z]||(F=this.behaviors[z],fe=F.indexOf(Q),fe!==-1&&F.splice(fe,1))}resize(){var Q=this.camera,F=this.canvas,z,X,fe,Ae=this.renderer.xr.isPresenting;X=this.renderer.xr.enabled&&Ae,!(!Q||!F||this.is("vr-mode")&&(this.isMobile||X))&&(z=this.getAttribute("embedded")&&!this.is("vr-mode"),fe=te(F,z,this.maxCanvasSize,this.is("vr-mode")),Q.aspect=fe.width/fe.height,Q.updateProjectionMatrix(),this.renderer.setSize(fe.width,fe.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var Q=this,F,z,X,fe;fe={alpha:!0,antialias:!P,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:1920,width:1920},this.hasAttribute("renderer")&&(X=this.getAttribute("renderer"),z=m.styleParser.parse(X),z.precision&&(fe.precision=z.precision+"p"),z.antialias&&z.antialias!=="auto"&&(fe.antialias=z.antialias==="true"),z.logarithmicDepthBuffer&&z.logarithmicDepthBuffer!=="auto"&&(fe.logarithmicDepthBuffer=z.logarithmicDepthBuffer==="true"),z.alpha&&(fe.alpha=z.alpha==="true"),this.maxCanvasSize={width:z.maxCanvasWidth?parseInt(z.maxCanvasWidth):this.maxCanvasSize.width,height:z.maxCanvasHeight?parseInt(z.maxCanvasHeight):this.maxCanvasSize.height}),F=this.renderer=new b.WebGLRenderer(fe),F.setPixelRatio(window.devicePixelRatio),F.sortObjects=!1,this.camera&&F.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){F.xr.setPoseTarget(Q.camera.el.object3D)})}play(){var Q=this,F=this;if(this.renderStarted){w.prototype.play.call(this);return}this.addEventListener("loaded",function(){var z=this.renderer,X,fe=this.renderer.xr;w.prototype.play.call(this),!F.renderStarted&&(F.resize(),F.renderer&&(window.performance&&window.performance.mark("render-started"),v.remove(),X=m.device.getVRDisplay(),X&&X.isPresenting&&(fe.setDevice(X),fe.enabled=!0,F.enterVR()),z.setAnimationLoop(this.render),F.renderStarted=!0,F.emit("renderstart")))}),setTimeout(function(){w.prototype.load.call(Q)})}updateComponent(Q){Q in E||w.prototype.updateComponent.apply(this,arguments)}tick(Q,F){var z,X=this.systems;for(z=0;z<this.behaviors.tick.length;z++)!this.behaviors.tick[z].el.isPlaying||this.behaviors.tick[z].tick(Q,F);for(z=0;z<this.systemNames.length;z++)!X[this.systemNames[z]].tick||X[this.systemNames[z]].tick(Q,F)}tock(Q,F,z){var X,fe=this.systems;for(X=0;X<this.behaviors.tock.length;X++)!this.behaviors.tock[X].el.isPlaying||this.behaviors.tock[X].tock(Q,F,z);for(X=0;X<this.systemNames.length;X++)!fe[this.systemNames[X]].tock||fe[this.systemNames[X]].tock(Q,F,z)}render(Q,F){var z=this.renderer;this.frame=F,this.delta=this.clock.getDelta()*1e3,this.time=this.clock.elapsedTime*1e3,this.isPlaying&&this.tick(this.time,this.delta);var X=null;this.is("ar-mode")&&(X=this.object3D.background,this.object3D.background=null),z.render(this.object3D,this.camera),X&&(this.object3D.background=X)}}function k(q,Q){var F,z=window.devicePixelRatio;return!Q||Q.width===-1&&Q.height===-1||q.width*z<Q.width&&q.height*z<Q.height||(F=q.width/q.height,q.width*z>Q.width&&Q.width!==-1&&(q.width=Math.round(Q.width/z),q.height=Math.round(Q.width/F/z)),q.height*z>Q.height&&Q.height!==-1&&(q.height=Math.round(Q.height/z),q.width=Math.round(Q.height*F/z))),q}window.customElements.define("a-scene",j);function te(q,Q,F,z){if(!q.parentElement)return{height:0,width:0};if(Q){var X;return X={height:q.parentElement.offsetHeight,width:q.parentElement.offsetWidth},k(X,F)}return ue(F,z)}function ue(q,Q){var F;return F={height:document.body.offsetHeight,width:document.body.offsetWidth},Q?F:k(F,q)}function xe(q){var Q=q.requestFullscreen||q.webkitRequestFullscreen||q.mozRequestFullScreen||q.msRequestFullscreen;Q.apply(q,[{navigationUI:"hide"}])}function Ee(){var q=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;!q||(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function V(q){var Q;Q=document.createElement("canvas"),Q.classList.add("a-canvas"),Q.dataset.aframeCanvas=!0,q.appendChild(Q),document.addEventListener("fullscreenchange",F),document.addEventListener("mozfullscreenchange",F),document.addEventListener("webkitfullscreenchange",F),document.addEventListener("MSFullscreenChange",F),Q.addEventListener("touchmove",function(z){z.preventDefault()}),q.canvas=Q,q.emit("render-target-loaded",{target:Q}),setTimeout(R(q.resize,q),0);function F(){var z=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;z||q.exitVR(),document.activeElement.blur(),document.body.focus()}}T.exports.setupCanvas=V,T.exports.AScene=j},"./src/core/scene/loadingScreen.js":(T,I,u)=>{var g=u("./src/utils/index.js"),C=g.styleParser,v,y,E,b="loading-screen",m="a-loader-title";T.exports.setup=function(R,L){v=R,E=L;var P=v.hasAttribute(b)?C.parse(v.getAttribute(b)):void 0,Y=P&&P.dotsColor||"white",J=P&&P.backgroundColor||"#24CAFF",j=P===void 0||P.enabled==="true"||P.enabled===void 0,k,te,ue,xe,Ee,V,q,Q,F,z;!j||(k=new THREE.Scene,te=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),ue=new THREE.MeshBasicMaterial({color:Y}),xe=new THREE.Mesh(te,ue),Ee=xe.clone(),V=xe.clone(),q=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),Q=new THREE.Clock,F=0,z=function(){v.renderer.render(k,q),F=Q.getElapsedTime()%4,xe.visible=F>=1,Ee.visible=F>=2,V.visible=F>=3},k.background=new THREE.Color(J),k.add(q),xe.position.set(-1,0,-15),Ee.position.set(0,0,-15),V.position.set(1,0,-15),q.add(xe),q.add(Ee),q.add(V),_(),setTimeout(function(){v.hasLoaded||(w(q),y.style.display="block",window.addEventListener("resize",function(){w(q)}),v.renderer.setAnimationLoop(z))},200))},T.exports.remove=function(){window.removeEventListener("resize",w),y&&(y.style.display="none")};function w(O){var R=v.hasAttribute("embedded"),L=E(v.canvas,R,v.maxCanvasSize,v.is("vr-mode"));O.aspect=L.width/L.height,O.updateProjectionMatrix(),v.renderer.setSize(L.width,L.height,!1)}function _(){y=document.createElement("div"),y.className=m,y.innerHTML=document.title,y.style.display="none",v.appendChild(y)}},"./src/core/scene/metaTags.js":(T,I,u)=>{var g=u("./src/constants/index.js"),C=u("./src/utils/index.js").extend,v=T.exports.MOBILE_HEAD_TAGS=[E({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),E({name:"mobile-web-app-capable",content:"yes"}),E({name:"theme-color",content:"black"})],y=[E({name:"apple-mobile-web-app-capable",content:"yes"}),E({name:"apple-mobile-web-app-status-bar-style",content:"black"}),b({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function E(w){return{tagName:"meta",attributes:w,exists:function(){return document.querySelector('meta[name="'+w.name+'"]')}}}function b(w){return{tagName:"link",attributes:w,exists:function(){return document.querySelector('link[rel="'+w.rel+'"]')}}}T.exports.inject=function(_){var O=document.head,R=O.querySelector("script"),L,P=[];return v.forEach(Y),_.isIOS&&y.forEach(Y),P;function Y(J){!J||J.exists()||(L=m(J),L&&(R?R.parentNode.insertBefore(L,R):O.appendChild(L),P.push(L)))}};function m(w){if(!(!w||!w.tagName)){var _=document.createElement(w.tagName);return _.setAttribute(g.AFRAME_INJECTED,""),C(_,w.attributes)}}},"./src/core/scene/postMessage.js":(T,I,u)=>{var g=u("./src/utils/bind.js"),C=u("./src/utils/index.js").isIframed;T.exports=function(E){!C()||window.addEventListener("message",g(v,E))};function v(y){var E=this;if(!!y.data)switch(y.data.type){case"vr":switch(y.data.data){case"enter":E.enterVR();break;case"exit":E.exitVR();break}}}},"./src/core/scene/scenes.js":T=>{T.exports=[]},"./src/core/scene/wakelock.js":(T,I,u)=>{var g=u("./vendor/wakelock/wakelock.js");T.exports=function(v){if(!!v.isMobile){var y=v.wakelock=new g;v.addEventListener("enter-vr",function(){y.request()}),v.addEventListener("exit-vr",function(){y.release()})}}},"./src/core/schema.js":(T,I,u)=>{var g=u("./src/utils/index.js"),C=u("./src/core/propertyTypes.js"),v=g.debug,y=C.isValidDefaultValue,E=C.propertyTypes,b=v("core:schema:warn");function m(R){return"type"in R?typeof R.type=="string":"default"in R}T.exports.isSingleProperty=m,T.exports.process=function(R,L){var P;if(m(R))return w(R,L);for(P in R)R[P]=w(R[P],L);return R};function w(R,L){var P=R.default,Y,J,j=R.type;return R.type?R.type==="bool"?j="boolean":R.type==="float"&&(j="number"):P!==void 0&&(typeof P=="boolean"||typeof P=="number")?j=typeof P:Array.isArray(P)?j="array":j="string",J=E[j],J||b("Unknown property type for component `"+L+"`: "+j),Y=!!R.parse,R.parse=R.parse||J.parse,R.stringify=R.stringify||J.stringify,R.type=j,"default"in R?!Y&&!y(j,P)&&b("Default value `"+P+"` does not match type `"+j+"` in component `"+L+"`"):R.default=J.default,R}T.exports.processPropertyDefinition=w,T.exports.parseProperties=function(){var R=[];return function(L,P,Y,J,j){var k,te,ue,xe;R.length=0;for(te in Y?L:P)Y&&L[te]===void 0||R.push(te);if(L===null||typeof L!="object")return L;for(te in L)L[te]!==void 0&&!P[te]&&!j&&b("Unknown property `"+te+"` for component/system `"+J+"`.");for(k=0;k<R.length;k++){if(te=R[k],ue=P[te],xe=L[te],!P[te])return;L[te]=_(xe,ue)}return L}}();function _(R,L){return(R==null||R==="")&&(R=L.default,Array.isArray(R)&&(R=R.slice())),L.parse(R,L.default)}T.exports.parseProperty=_,T.exports.stringifyProperties=function(R,L){var P,Y,J,j={},k;for(P in R)Y=L[P],J=R[P],k=J,typeof k=="object"&&(k=O(J,Y),Y||b("Unknown component property: "+P)),j[P]=k;return j};function O(R,L){return typeof R!="object"?R:!L||R===null?JSON.stringify(R):L.stringify(R)}T.exports.stringifyProperty=O},"./src/core/shader.js":(T,I,u)=>{var g=u("./src/core/schema.js"),C=g.process,v=T.exports.shaders={},y=T.exports.shaderNames=[],E=u("./src/lib/three.js"),b=u("./src/utils/index.js"),m={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},w=T.exports.Shader=function(){};w.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(_){return this.attributes=this.initVariables(_,"attribute"),this.uniforms=this.initVariables(_,"uniform"),this.material=new(this.raw?E.RawShaderMaterial:E.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(_,O){var R,L=this.schema,P={},Y;for(R in L)L[R].is===O&&(Y=m[L[R].type],P[R]={type:Y,value:void 0});return P},update:function(_){this.updateVariables(_,"attribute"),this.updateVariables(_,"uniform")},updateVariables:function(_,O){var R,L,P=this.schema,Y;Y=O==="uniform"?this.uniforms:this.attributes;for(R in _)if(!(!P[R]||P[R].is!==O)){if(P[R].type==="map"){if(!Y[R]||Y[R].value===_[R])continue;L="_texture_"+R,this.setMapOnTextureLoad(Y,R,L),b.material.updateMapMaterialFromData(L,R,this,_);continue}Y[R].value=this.parseValue(P[R].type,_[R]),Y[R].needsUpdate=!0}},parseValue:function(_,O){var R;switch(_){case"vec2":return new E.Vector2(O.x,O.y);case"vec3":return new E.Vector3(O.x,O.y,O.z);case"vec4":return new E.Vector4(O.x,O.y,O.z,O.w);case"color":return R=new E.Color(O),new E.Vector3(R.r,R.g,R.b);case"map":return E.ImageUtils.loadTexture(O);default:return O}},setMapOnTextureLoad:function(_,O,R){var L=this;this.el.addEventListener("materialtextureloaded",function(){_[O].value=L.material[R],_[O].needsUpdate=!0})}},T.exports.registerShader=function(_,O){var R,L={};if(Object.keys(O).forEach(function(P){L[P]={value:O[P],writable:!0}}),v[_])throw new Error("The shader "+_+" has been already registered");return R=function(){w.call(this)},R.prototype=Object.create(w.prototype,L),R.prototype.name=_,R.prototype.constructor=R,v[_]={Shader:R,schema:C(R.prototype.schema)},y.push(_),R}},"./src/core/system.js":(T,I,u)=>{var g=u("./src/core/component.js"),C=u("./src/core/schema.js"),v=u("./src/utils/index.js"),y=C.parseProperties,E=C.parseProperty,b=C.process,m=C.isSingleProperty,w=v.styleParser,_=T.exports.systems={},O=T.exports.System=function(R){var L=g&&g.components[this.name];this.el=R,this.sceneEl=R,L&&(L.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};O.prototype={schema:{},init:function(){},update:function(R){},updateProperties:function(R){var L=this.data;!Object.keys(C).length||(this.buildData(R),this.update(L))},buildData:function(R){var L=this.schema;!Object.keys(L).length||(R=R||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),m(L)?this.data=E(R,L):this.data=y(w.parse(R)||{},L))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},T.exports.registerSystem=function(R,L){var P,Y,J={},j=v.findAllScenes(document);if(Object.keys(L).forEach(function(k){J[k]={value:L[k],writable:!0}}),_[R])throw new Error("The system `"+R+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(Y=function(k){O.call(this,k)},Y.prototype=Object.create(O.prototype,J),Y.prototype.name=R,Y.prototype.constructor=Y,Y.prototype.schema=v.extend(b(Y.prototype.schema)),_[R]=Y,P=0;P<j.length;P++)j[P].initSystem(R)}},"./src/extras/components/index.js":(T,I,u)=>{u("./src/extras/components/pivot.js")},"./src/extras/components/pivot.js":(T,I,u)=>{var g=u("./src/core/component.js").registerComponent,C=u("./src/lib/three.js"),v=new C.Vector3,y=new C.Vector3;g("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var E=this.data,b=this.el,m=b.object3D.parent,w=b.object3D,_=new C.Group;v.copy(w.position),y.copy(w.rotation),m.remove(w),_.add(w),m.add(_),b.object3D=_,w.position.set(-1*E.x,-1*E.y,-1*E.z),_.position.set(E.x+v.x,E.y+v.y,E.z+v.z),_.rotation.copy(w.rotation),w.rotation.set(0,0,0)}})},"./src/extras/primitives/getMeshMixin.js":(T,I,u)=>{var g=u("./src/core/component.js").components,C=u("./src/core/shader.js").shaders,v=u("./src/utils/index.js"),y={};Object.keys(g.material.schema).forEach(E),Object.keys(C.standard.schema).forEach(E);function E(b){var m=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();b==="fog"&&(m="material-fog"),b==="visible"&&(m="material-visible"),y[m]="material."+b}T.exports=function(){return{defaultComponents:{material:{}},mappings:v.extend({},y)}}},"./src/extras/primitives/index.js":(T,I,u)=>{u("./src/extras/primitives/primitives/a-camera.js"),u("./src/extras/primitives/primitives/a-cursor.js"),u("./src/extras/primitives/primitives/a-curvedimage.js"),u("./src/extras/primitives/primitives/a-gltf-model.js"),u("./src/extras/primitives/primitives/a-image.js"),u("./src/extras/primitives/primitives/a-light.js"),u("./src/extras/primitives/primitives/a-link.js"),u("./src/extras/primitives/primitives/a-obj-model.js"),u("./src/extras/primitives/primitives/a-sky.js"),u("./src/extras/primitives/primitives/a-sound.js"),u("./src/extras/primitives/primitives/a-text.js"),u("./src/extras/primitives/primitives/a-video.js"),u("./src/extras/primitives/primitives/a-videosphere.js"),u("./src/extras/primitives/primitives/meshPrimitives.js")},"./src/extras/primitives/primitives.js":(T,I,u)=>{var g=u("./src/core/a-node.js").knownTags,C=u("./src/core/a-entity.js").AEntity,v=u("./src/core/component.js").components,y=u("./src/utils/index.js"),E=y.debug,b=y.entity.setComponentProperty,m=E("extras:primitives:debug"),w=E("extras:primitives:warn"),_=E("extras:primitives:error"),O=T.exports.primitives={};T.exports.registerPrimitive=function(Y,J){if(Y=Y.toLowerCase(),g[Y]){_("Trying to register primitive "+Y+" that has been already previously registered");return}g[Y]=!0,m("Registering <%s>",Y),J.defaultAttributes&&w("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var j=J.mappings||{},k=class extends C{constructor(){super(),this.defaultComponentsFromPrimitive=J.defaultComponents||J.defaultAttributes||{},this.deprecated=J.deprecated||null,this.deprecatedMappings=J.deprecatedMappings||{},this.mappings=j,J.deprecated&&console.warn(J.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var te=this.mappings,ue=this;Object.keys(te).forEach(function(Ee){var V;Ee!==Ee.toLowerCase()&&w("Mapping keys should be specified in lower case. The mapping key "+Ee+" may not be recognized"),v[Ee]&&(V=te[Ee].replace(".","-"),te[V]=te[Ee],delete te[Ee],console.warn("The primitive "+ue.tagName.toLowerCase()+" has a mapping collision. The attribute "+Ee+" has the same name as a registered component and has been renamed to "+V))})}getExtraComponents(){var te,ue,xe,Ee,V,q,Q=this;for(ue=y.clone(this.defaultComponentsFromPrimitive),V=this.getAttribute("mixin"),V&&(V=V.trim().split(" "),V.forEach(function(Se){var Be=Q.sceneEl.querySelector("#"+Se).componentCache;Object.keys(Be).forEach(function(ht){ue[ht]=F(ue[ht],Be[ht])})})),xe=0;xe<this.attributes.length;xe++)if(te=this.attributes[xe],Ee=this.mappings[te.name],Ee){q=y.entity.getComponentPropertyPath(Ee),q.constructor===Array?(ue[q[0]]=ue[q[0]]||{},ue[q[0]][q[1]]=te.value.trim()):ue[q]=te.value.trim();continue}return ue;function F(Ae,Se){return z(Ae)?X(Se):z(Se)?X(Ae):fe(Ae)&&fe(Se)?y.extendDeep(Ae,Se):X(Se)}function z(Ae){return typeof Ae>"u"}function X(Ae){return fe(Ae)?y.extendDeep({},Ae):Ae}function fe(Ae){return Ae!==null&&Ae.constructor===Object}}attributeChangedCallback(te,ue,xe){var Ee=this.mappings[te];if(te in this.deprecatedMappings&&console.warn(this.deprecatedMappings[te]),!te||!Ee){super.attributeChangedCallback(te,ue,xe);return}b(this,Ee,xe)}};return customElements.define(Y,k),k.mappings=j,O[Y]=k,k};function R(P,Y){var J=v[P].schema;Object.keys(J).map(function(j){var k=j.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();Y[k]!==void 0&&(k=P+"-"+j),Y[k]=P+"."+j})}function L(P,Y,J){J=J||{},Object.keys(Y).map(function(k){R(k,J)}),T.exports.registerPrimitive(P,y.extendDeep({},null,{defaultComponents:Y,mappings:J}))}T.exports.definePrimitive=L},"./src/extras/primitives/primitives/a-camera.js":(T,I,u)=>{var g=u("./src/extras/primitives/primitives.js").registerPrimitive;g("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},"./src/extras/primitives/primitives/a-cursor.js":(T,I,u)=>{var g=u("./src/extras/primitives/getMeshMixin.js"),C=u("./src/extras/primitives/primitives.js").registerPrimitive,v=u("./src/utils/index.js");C("a-cursor",v.extendDeep({},g(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},"./src/extras/primitives/primitives/a-curvedimage.js":(T,I,u)=>{var g=u("./src/extras/primitives/getMeshMixin.js"),C=u("./src/extras/primitives/primitives.js").registerPrimitive,v=u("./src/utils/index.js");C("a-curvedimage",v.extendDeep({},g(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},"./src/extras/primitives/primitives/a-gltf-model.js":(T,I,u)=>{var g=u("./src/extras/primitives/primitives.js").registerPrimitive;g("a-gltf-model",{mappings:{src:"gltf-model"}})},"./src/extras/primitives/primitives/a-image.js":(T,I,u)=>{var g=u("./src/extras/primitives/getMeshMixin.js"),C=u("./src/extras/primitives/primitives.js").registerPrimitive,v=u("./src/utils/index.js");C("a-image",v.extendDeep({},g(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-light.js":(T,I,u)=>{var g=u("./src/extras/primitives/primitives.js").registerPrimitive;g("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}})},"./src/extras/primitives/primitives/a-link.js":(T,I,u)=>{var g=u("./src/extras/primitives/primitives.js").registerPrimitive;g("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},"./src/extras/primitives/primitives/a-obj-model.js":(T,I,u)=>{var g=u("./src/extras/primitives/getMeshMixin.js")(),C=u("./src/extras/primitives/primitives.js").registerPrimitive,v=u("./src/utils/index.js");C("a-obj-model",v.extendDeep({},g,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},"./src/extras/primitives/primitives/a-sky.js":(T,I,u)=>{var g=u("./src/extras/primitives/getMeshMixin.js"),C=u("./src/extras/primitives/primitives.js").registerPrimitive,v=u("./src/utils/index.js"),y=u("./src/extras/primitives/primitives/meshPrimitives.js");C("a-sky",v.extendDeep({},g(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:v.extendDeep({},y["a-sphere"].mappings)}))},"./src/extras/primitives/primitives/a-sound.js":(T,I,u)=>{var g=u("./src/extras/primitives/primitives.js").registerPrimitive;g("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},"./src/extras/primitives/primitives/a-text.js":(T,I,u)=>{var g=u("./src/extras/primitives/primitives.js").definePrimitive;g("a-text",{text:{anchor:"align",width:5}})},"./src/extras/primitives/primitives/a-video.js":(T,I,u)=>{var g=u("./src/extras/primitives/getMeshMixin.js"),C=u("./src/extras/primitives/primitives.js").registerPrimitive,v=u("./src/utils/index.js");C("a-video",v.extendDeep({},g(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-videosphere.js":(T,I,u)=>{var g=u("./src/extras/primitives/getMeshMixin.js"),C=u("./src/extras/primitives/primitives.js").registerPrimitive,v=u("./src/utils/index.js");C("a-videosphere",v.extendDeep({},g(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},"./src/extras/primitives/primitives/meshPrimitives.js":(T,I,u)=>{var g=u("./src/extras/primitives/getMeshMixin.js"),C=u("./src/core/geometry.js").geometries,v=u("./src/core/geometry.js").geometryNames,y=u("./src/extras/primitives/primitives.js").registerPrimitive,E=u("./src/utils/index.js"),b=T.exports={};v.forEach(function(_){var O=C[_],R=m(_),L={};Object.keys(O.schema).forEach(function(j){L[m(j)]="geometry."+j});var P="a-"+R,Y=y(P,E.extendDeep({},g(),{defaultComponents:{geometry:{primitive:_}},mappings:L}));b[P]=Y});function m(w){return w.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},"./src/geometries/box.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js");g("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(v){this.geometry=new C.BoxGeometry(v.width,v.height,v.depth,v.segmentsWidth,v.segmentsHeight,v.segmentsDepth)}})},"./src/geometries/circle.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js"),v=C.MathUtils.degToRad;g("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new C.CircleGeometry(y.radius,y.segments,v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/cone.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js"),v=C.MathUtils.degToRad;g("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new C.CylinderGeometry(y.radiusTop,y.radiusBottom,y.height,y.segmentsRadial,y.segmentsHeight,y.openEnded,v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/cylinder.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js"),v=C.MathUtils.degToRad;g("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new C.CylinderGeometry(y.radius,y.radius,y.height,y.segmentsRadial,y.segmentsHeight,y.openEnded,v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/dodecahedron.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js");g("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(v){this.geometry=new C.DodecahedronGeometry(v.radius,v.detail)}})},"./src/geometries/icosahedron.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js");g("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(v){this.geometry=new C.IcosahedronGeometry(v.radius,v.detail)}})},"./src/geometries/index.js":(T,I,u)=>{u("./src/geometries/box.js"),u("./src/geometries/circle.js"),u("./src/geometries/cone.js"),u("./src/geometries/cylinder.js"),u("./src/geometries/dodecahedron.js"),u("./src/geometries/icosahedron.js"),u("./src/geometries/octahedron.js"),u("./src/geometries/plane.js"),u("./src/geometries/ring.js"),u("./src/geometries/sphere.js"),u("./src/geometries/tetrahedron.js"),u("./src/geometries/torus.js"),u("./src/geometries/torusKnot.js"),u("./src/geometries/triangle.js")},"./src/geometries/octahedron.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js");g("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(v){this.geometry=new C.OctahedronGeometry(v.radius,v.detail)}})},"./src/geometries/plane.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js");g("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(v){this.geometry=new C.PlaneGeometry(v.width,v.height,v.segmentsWidth,v.segmentsHeight)}})},"./src/geometries/ring.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js"),v=C.MathUtils.degToRad;g("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new C.RingGeometry(y.radiusInner,y.radiusOuter,y.segmentsTheta,y.segmentsPhi,v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/sphere.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js"),v=C.MathUtils.degToRad;g("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(y){this.geometry=new C.SphereGeometry(y.radius,y.segmentsWidth,y.segmentsHeight,v(y.phiStart),v(y.phiLength),v(y.thetaStart),v(y.thetaLength))}})},"./src/geometries/tetrahedron.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js");g("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(v){this.geometry=new C.TetrahedronGeometry(v.radius,v.detail)}})},"./src/geometries/torus.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js"),v=C.MathUtils.degToRad;g("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(y){this.geometry=new C.TorusGeometry(y.radius,y.radiusTubular*2,y.segmentsRadial,y.segmentsTubular,v(y.arc))}})},"./src/geometries/torusKnot.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js");g("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(v){this.geometry=new C.TorusKnotGeometry(v.radius,v.radiusTubular*2,v.segmentsTubular,v.segmentsRadial,v.p,v.q)}})},"./src/geometries/triangle.js":(T,I,u)=>{var g=u("./src/core/geometry.js").registerGeometry,C=u("./src/lib/three.js"),v=new C.Quaternion,y=new C.Vector3(0,0,1),E=new C.Vector2,b=new C.Vector2,m=new C.Vector2;g("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(w){var _,O,R,L,P,Y,J,j,k;R=new C.Triangle,R.a.set(w.vertexA.x,w.vertexA.y,w.vertexA.z),R.b.set(w.vertexB.x,w.vertexB.y,w.vertexB.z),R.c.set(w.vertexC.x,w.vertexC.y,w.vertexC.z),O=R.getNormal(new C.Vector3),v.setFromUnitVectors(O,y),L=R.a.clone().applyQuaternion(v),P=R.b.clone().applyQuaternion(v),Y=R.c.clone().applyQuaternion(v),E.set(Math.min(L.x,P.x,Y.x),Math.min(L.y,P.y,Y.y)),b.set(Math.max(L.x,P.x,Y.x),Math.max(L.y,P.y,Y.y)),m.set(0,0).subVectors(b,E),L=new C.Vector2().subVectors(L,E).divide(m),P=new C.Vector2().subVectors(P,E).divide(m),Y=new C.Vector2().subVectors(Y,E).divide(m),_=this.geometry=new C.BufferGeometry,J=[R.a.x,R.a.y,R.a.z,R.b.x,R.b.y,R.b.z,R.c.x,R.c.y,R.c.z],j=[O.x,O.y,O.z,O.x,O.y,O.z,O.x,O.y,O.z],k=[L.x,L.y,P.x,P.y,Y.x,Y.y],_.setAttribute("position",new C.Float32BufferAttribute(J,3)),_.setAttribute("normal",new C.Float32BufferAttribute(j,3)),_.setAttribute("uv",new C.Float32BufferAttribute(k,2))}})},"./src/index.js":(T,I,u)=>{if(window.Promise=window.Promise||u("./node_modules/promise-polyfill/Promise.js"),u("./node_modules/@ungap/custom-elements/index.js"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var g=u("./src/utils/isIOSOlderThan10.js"),C=g(window.navigator.userAgent)?1/window.devicePixelRatio:1,v=u("./node_modules/webvr-polyfill/build/webvr-polyfill.js"),y={BUFFER_SCALE:C,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new v(y)}var E=u("./src/utils/index.js"),b=E.debug;E.isIE11&&(u("./node_modules/custom-event-polyfill/polyfill.js"),u("./vendor/starts-with-polyfill.js"));var m=b("A-Frame:error"),w=b("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&w("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),!window.cordova&&window.location.protocol==="file:"&&m("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),u("./node_modules/present/lib/present-browser.js"),E.device.isBrowserEnvironment&&(u("./src/style/aframe.css"),u("./src/style/rStats.css"));var _=u("./src/core/scene/a-scene.js").AScene,O=u("./src/core/component.js").components,R=u("./src/core/component.js").registerComponent,L=u("./src/core/geometry.js").registerGeometry,P=u("./src/extras/primitives/primitives.js").registerPrimitive,Y=u("./src/core/shader.js").registerShader,J=u("./src/core/system.js").registerSystem,j=u("./src/core/shader.js").shaders,k=u("./src/core/system.js").systems,te=window.THREE=u("./src/lib/three.js"),ue=u("./package.json");u("./src/components/index.js"),u("./src/geometries/index.js"),u("./src/shaders/index.js"),u("./src/systems/index.js");var xe=u("./src/core/a-node.js").ANode,Ee=u("./src/core/a-entity.js").AEntity;u("./src/core/a-assets.js"),u("./src/core/a-cubemap.js"),u("./src/core/a-mixin.js"),u("./src/extras/components/index.js"),u("./src/extras/primitives/index.js"),console.log("A-Frame Version: 1.4.2 (Date 2023-04-22, Commit #4e521f1f)"),console.log("THREE Version (https://github.com/supermedium/three.js):",ue.dependencies["super-three"]),console.log("WebVR Polyfill Version:",ue.dependencies["webvr-polyfill"]),T.exports=window.AFRAME={AComponent:u("./src/core/component.js").Component,AEntity:Ee,ANode:xe,ANIME:u("./node_modules/super-animejs/lib/anime.es.js").default,AScene:_,components:O,coreComponents:Object.keys(O),geometries:u("./src/core/geometry.js").geometries,registerComponent:R,registerGeometry:L,registerPrimitive:P,registerShader:Y,registerSystem:J,primitives:{getMeshMixin:u("./src/extras/primitives/getMeshMixin.js"),primitives:u("./src/extras/primitives/primitives.js").primitives},scenes:u("./src/core/scene/scenes.js"),schema:u("./src/core/schema.js"),shaders:j,systems:k,THREE:te,utils:E,version:ue.version}},"./src/lib/rStatsAframe.js":T=>{window.aframeStats=function(I){var u=null,g=I,C={te:{caption:"Entities"},lt:{caption:"Load Time"}},v=[{caption:"A-Frame",values:["te","lt"]}];function y(){u("te").set(E()),window.performance.getEntriesByName&&u("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function E(){var _=g.querySelectorAll("*");return Array.prototype.slice.call(_).filter(function(O){return O.isEntity}),_.length}function b(){}function m(){}function w(_){u=_}return{update:y,start:b,end:m,attach:w,values:C,groups:v,fractions:[]}},T.exports={aframeStats:window.aframeStats}},"./src/lib/three.js":(T,I,u)=>{var g=u("./src/lib/three.module.js").default;g.TextureLoader&&(g.TextureLoader.prototype.crossOrigin="anonymous"),g.ImageLoader&&(g.ImageLoader.prototype.crossOrigin="anonymous"),g.Cache&&(g.Cache.enabled=!0),g.DRACOLoader.prototype.crossOrigin="anonymous",g.GLTFLoader.prototype.crossOrigin="anonymous",g.KTX2Loader.prototype.crossOrigin="anonymous",g.MTLLoader.prototype.crossOrigin="anonymous",g.OBJLoader.prototype.crossOrigin="anonymous",T.exports=g},"./src/lib/three.module.js":(T,I,u)=>{u.r(I),u.d(I,{default:()=>R});var g=u("./node_modules/super-three/build/three.module.js"),C=u("./node_modules/super-three/examples/jsm/loaders/DRACOLoader.js"),v=u("./node_modules/super-three/examples/jsm/loaders/GLTFLoader.js"),y=u("./node_modules/super-three/examples/jsm/loaders/KTX2Loader.js"),E=u("./node_modules/super-three/examples/jsm/loaders/OBJLoader.js"),b=u("./node_modules/super-three/examples/jsm/loaders/MTLLoader.js"),m=u("./node_modules/super-three/examples/jsm/utils/BufferGeometryUtils.js"),w=u("./node_modules/super-three/examples/jsm/lights/LightProbeGenerator.js"),_=u("./node_modules/object-assign/index.js"),O=window.THREE=_({},g);u("./vendor/DeviceOrientationControls.js"),O.DRACOLoader=C.DRACOLoader,O.GLTFLoader=v.GLTFLoader,O.KTX2Loader=y.KTX2Loader,O.OBJLoader=E.OBJLoader,O.MTLLoader=b.MTLLoader,O.BufferGeometryUtils=m,O.LightProbeGenerator=w.LightProbeGenerator;const R=O},"./src/shaders/flat.js":(T,I,u)=>{var g=u("./src/core/shader.js").registerShader,C=u("./src/lib/three.js"),v=u("./src/utils/index.js");T.exports.Shader=g("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(E){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new C.Color},this.textureSrc=null,y(E,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new C.MeshBasicMaterial(this.materialData)},update:function(E){this.updateMaterial(E),v.material.updateMap(this,E)},updateMaterial:function(E){var b;y(E,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(b in this.materialData)this.material[b]=this.materialData[b]}});function y(E,b){return b.color.set(E.color),b.fog=E.fog,b.wireframe=E.wireframe,b.toneMapped=E.toneMapped,b.wireframeLinewidth=E.wireframeLinewidth,b}},"./src/shaders/index.js":(T,I,u)=>{u("./src/shaders/flat.js"),u("./src/shaders/standard.js"),u("./src/shaders/phong.js"),u("./src/shaders/sdf.js"),u("./src/shaders/msdf.js"),u("./src/shaders/ios10hls.js"),u("./src/shaders/shadow.js")},"./src/shaders/ios10hls.js":(T,I,u)=>{var g=u("./src/core/shader.js").registerShader;T.exports.Shader=g("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join(`
`)})},"./src/shaders/msdf.js":(T,I,u)=>{var g=u("./src/core/shader.js").registerShader,C=!!document.createElement("canvas").getContext("webgl2"),v=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),y=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),E=C?y:v,b=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture2D(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),m=["#version 300 es","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  fragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),w=C?m:b;T.exports.Shader=g("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:E,fragmentShader:w})},"./src/shaders/phong.js":(T,I,u)=>{var g=u("./src/core/shader.js").registerShader,C=u("./src/lib/three.js"),v=u("./src/utils/index.js"),y=new C.CubeTextureLoader,E={};T.exports.Shader=g("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(m){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new C.Color,specular:new C.Color,emissive:new C.Color},this.textureSrc=null,b(m,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new C.MeshPhongMaterial(this.materialData),v.material.updateMap(this,m)},update:function(m){this.updateMaterial(m),v.material.updateMap(this,m),m.normalMap&&v.material.updateDistortionMap("normal",this,m),m.displacementMap&&v.material.updateDistortionMap("displacement",this,m),m.ambientOcclusionMap&&v.material.updateDistortionMap("ambientOcclusion",this,m),m.bump&&v.material.updateDistortionMap("bump",this,m),this.updateEnvMap(m)},updateMaterial:function(m){var w;b(m,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(w in this.materialData)this.material[w]=this.materialData[w]},updateEnvMap:function(m){var w=this,_=this.material,O=m.envMap,R=m.sphericalEnvMap,L=m.refract,P=this.el.sceneEl;if(!O&&!R||this.isLoadingEnvMap){Object.defineProperty(_,"envMap",{get:function(){return P.object3D.environment},set:function(Y){delete this.envMap,this.envMap=Y}}),_.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,delete _.envMap,R){this.el.sceneEl.systems.material.loadTexture(R,{src:R},function(J){w.isLoadingEnvMap=!1,J.mapping=L?C.EquirectangularRefractionMapping:C.EquirectangularReflectionMapping,_.envMap=J,v.material.handleTextureEvents(w.el,J),_.needsUpdate=!0});return}if(E[O]){E[O].then(function(Y){w.isLoadingEnvMap=!1,_.envMap=Y,v.material.handleTextureEvents(w.el,Y),_.needsUpdate=!0});return}E[O]=new Promise(function(Y){v.srcLoader.validateCubemapSrc(O,function(j){y.load(j,function(k){w.isLoadingEnvMap=!1,_.envMap=k,k.mapping=L?C.CubeRefractionMapping:C.CubeReflectionMapping,v.material.handleTextureEvents(w.el,k),Y(k)})})})}});function b(m,w){switch(w.color.set(m.color),w.specular.set(m.emissive),w.emissive.set(m.emissive),w.emissiveIntensity=m.emissiveIntensity,w.fog=m.fog,w.transparent=m.transparent,w.wireframe=m.wireframe,w.wireframeLinewidth=m.wireframeLinewidth,w.shininess=m.shininess,w.flatShading=m.flatShading,w.wireframe=m.wireframe,w.wireframeLinewidth=m.wireframeLinewidth,w.reflectivity=m.reflectivity,w.refractionRatio=m.refractionRatio,m.combine){case"mix":w.combine=C.MixOperation;break;case"multiply":w.combine=C.MultiplyOperation;break;case"add":w.combine=C.AddOperation;break}return m.normalMap&&(w.normalScale=m.normalScale),m.ambientOcclusionMap&&(w.aoMapIntensity=m.ambientOcclusionMapIntensity),m.bumpMap&&(w.aoMapIntensity=m.bumpMapScale),m.displacementMap&&(w.displacementScale=m.displacementScale,w.displacementBias=m.displacementBias),w}},"./src/shaders/sdf.js":(T,I,u)=>{var g=u("./src/core/shader.js").registerShader,C=!!document.createElement("canvas").getContext("webgl2"),v=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),y=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),E=C?y:v,b=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture2D(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture2D(map, box.xy).a, width)","        + contour(texture2D(map, box.zw).a, width)","        + contour(texture2D(map, box.xw).a, width)","        + contour(texture2D(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture2D(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join(`
`),m=["#version 300 es","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture(map, box.xy).a, width)","        + contour(texture(map, box.zw).a, width)","        + contour(texture(map, box.xw).a, width)","        + contour(texture(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  fragColor = vec4(color, opacity * alpha);","}"].join(`
`),w=C?m:b;T.exports.Shader=g("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:E,fragmentShader:w})},"./src/shaders/shadow.js":(T,I,u)=>{var g=u("./src/core/shader.js").registerShader,C=u("./src/lib/three.js");T.exports.Shader=g("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(v){this.rendererSystem=this.el.sceneEl.systems.renderer,this.material=new C.ShadowMaterial},update:function(v){this.material.opacity=v.opacity,this.material.alphaToCoverage=v.alphaToCoverage,this.material.transparent=v.transparent}})},"./src/shaders/standard.js":(T,I,u)=>{var g=u("./src/core/shader.js").registerShader,C=u("./src/lib/three.js"),v=u("./src/utils/index.js"),y=new C.CubeTextureLoader,E={};T.exports.Shader=g("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(m){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new C.Color,emissive:new C.Color},b(m,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.material=new C.MeshStandardMaterial(this.materialData)},update:function(m){this.updateMaterial(m),v.material.updateMap(this,m),m.normalMap&&v.material.updateDistortionMap("normal",this,m),m.displacementMap&&v.material.updateDistortionMap("displacement",this,m),m.ambientOcclusionMap&&v.material.updateDistortionMap("ambientOcclusion",this,m),m.metalnessMap&&v.material.updateDistortionMap("metalness",this,m),m.roughnessMap&&v.material.updateDistortionMap("roughness",this,m),this.updateEnvMap(m)},updateMaterial:function(m){var w,_=this.material;b(m,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive);for(w in this.materialData)_[w]=this.materialData[w]},updateEnvMap:function(m){var w=this,_=this.material,O=m.envMap,R=m.sphericalEnvMap;if(!O&&!R||this.isLoadingEnvMap){_.envMap=null,_.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,R){this.el.sceneEl.systems.material.loadTexture(R,{src:R},function(P){w.isLoadingEnvMap=!1,P.mapping=C.EquirectangularReflectionMapping,_.envMap=P,v.material.handleTextureEvents(w.el,P),_.needsUpdate=!0});return}if(E[O]){E[O].then(function(L){w.isLoadingEnvMap=!1,_.envMap=L,v.material.handleTextureEvents(w.el,L),_.needsUpdate=!0});return}E[O]=new Promise(function(L){v.srcLoader.validateCubemapSrc(O,function(Y){y.load(Y,function(J){w.isLoadingEnvMap=!1,_.envMap=J,v.material.handleTextureEvents(w.el,J),L(J)})})})}});function b(m,w){return w.color.set(m.color),w.emissive.set(m.emissive),w.emissiveIntensity=m.emissiveIntensity,w.fog=m.fog,w.metalness=m.metalness,w.roughness=m.roughness,w.wireframe=m.wireframe,w.wireframeLinewidth=m.wireframeLinewidth,m.normalMap&&(w.normalScale=m.normalScale),m.ambientOcclusionMap&&(w.aoMapIntensity=m.ambientOcclusionMapIntensity),m.displacementMap&&(w.displacementScale=m.displacementScale,w.displacementBias=m.displacementBias),w}},"./src/systems/camera.js":(T,I,u)=>{var g=u("./src/constants/index.js"),C=u("./src/core/system.js").registerSystem,v="data-aframe-default-camera";T.exports.System=C("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var E,b,m=this.sceneEl,w=this;if(m.camera&&!m.camera.el.getAttribute("camera").spectator){m.emit("cameraready",{cameraEl:m.camera.el});return}if(E=m.querySelectorAll("a-camera, :not(a-mixin)[camera]"),!E.length){this.createDefaultCamera();return}for(this.numUserCameras=E.length,b=0;b<E.length;b++)E[b].addEventListener("object3dset",function(_){_.detail.type==="camera"&&w.checkUserCamera(this)}),E[b].isNode?E[b].load():E[b].addEventListener("nodeready",function(){this.load()})},checkUserCamera:function(E){var b,m=this.el.sceneEl;if(this.numUserCamerasChecked++,!this.initialCameraFound){if(b=E.getAttribute("camera"),!b.active||b.spectator){this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera();return}this.initialCameraFound=!0,m.camera=E.getObject3D("camera"),m.emit("cameraready",{cameraEl:E})}},createDefaultCamera:function(){var E,b=this.sceneEl;E=document.createElement("a-entity"),E.setAttribute("camera",{active:!0}),E.setAttribute("position",{x:0,y:g.DEFAULT_CAMERA_HEIGHT,z:0}),E.setAttribute("wasd-controls",""),E.setAttribute("look-controls",""),E.setAttribute(g.AFRAME_INJECTED,""),E.addEventListener("object3dset",function(m){m.detail.type==="camera"&&(b.camera=m.detail.object,b.emit("cameraready",{cameraEl:E}))}),b.appendChild(E)},disableActiveCamera:function(){var E,b;E=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"),b=E[E.length-1],b.setAttribute("camera","active",!0)},setActiveCamera:function(E){var b,m,w,_,O=this.activeCameraEl,R=this.sceneEl;if(_=E.getObject3D("camera"),!(!_||E===this.activeCameraEl)){var L=R.querySelector("["+v+"]"),P=L&&L.querySelector(":not(a-mixin)[camera]");for(E!==P&&y(R),this.activeCameraEl=E,this.activeCameraEl.play(),R.camera=_,O&&O.setAttribute("camera","active",!1),m=R.querySelectorAll(":not(a-mixin)[camera]"),w=0;w<m.length;w++)b=m[w],!(!b.isEntity||E===b)&&(b.setAttribute("camera","active",!1),b.pause());R.emit("camera-set-active",{cameraEl:E})}},setSpectatorCamera:function(E){var b,m=this.spectatorCameraEl,w=this.sceneEl,_;b=E.getObject3D("camera"),!(!b||E===this.spectatorCameraEl)&&(m&&m.setAttribute("camera","spectator",!1),_=this.spectatorCameraEl=E,w.addEventListener("enter-vr",this.wrapRender),w.addEventListener("exit-vr",this.unwrapRender),_.setAttribute("camera","active",!1),_.play(),w.emit("camera-set-spectator",{cameraEl:E}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){!this.spectatorCameraEl||this.originalRender||(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){!this.originalRender||(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(E,b){var m,w=this.sceneEl,_;m=w.renderer.xr.enabled,this.originalRender.call(w.renderer,E,b),!(!this.spectatorCameraEl||w.isMobile||!m)&&(_=this.spectatorCameraEl.components.camera.camera,w.renderer.xr.enabled=!1,this.originalRender.call(w.renderer,E,_),w.renderer.xr.enabled=m)}});function y(E){var b,m=E.camera;!m||(b=E.querySelector("["+v+"]"),b&&E.removeChild(b))}},"./src/systems/geometry.js":(T,I,u)=>{var g=u("./src/core/geometry.js").geometries,C=u("./src/core/system.js").registerSystem;T.exports.System=C("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(b){var m=this.cache,w,_;return b.skipCache?v(b):(_=this.hash(b),w=m[_],E(this.cacheCount,_),w||(w=v(b),m[_]=w,w))},unuseGeometry:function(b){var m=this.cache,w=this.cacheCount,_,O;b.skipCache||(O=this.hash(b),m[O]&&(y(w,O),!(w[O]>0)&&(_=m[O],_.dispose(),delete m[O],delete w[O])))},hash:function(b){return JSON.stringify(b)}});function v(b){var m=b.primitive,w=g[m]&&g[m].Geometry,_=new w;if(!w)throw new Error("Unknown geometry `"+m+"`");return _.init(b),_.geometry}function y(b,m){b[m]--}function E(b,m){b[m]=b[m]===void 0?1:b[m]+1}},"./src/systems/gltf-model.js":(T,I,u)=>{var g=u("./src/core/system.js").registerSystem,C=u("./src/lib/three.js");function v(y){return new Promise(function(E,b){var m=document.createElement("script");document.body.appendChild(m),m.onload=E,m.onerror=b,m.async=!0,m.src=y})}T.exports.System=g("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.6/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var y=this.data.dracoDecoderPath,E=this.data.basisTranscoderPath,b=this.data.meshoptDecoderPath;!this.dracoLoader&&y&&(this.dracoLoader=new C.DRACOLoader,this.dracoLoader.setDecoderPath(y)),!this.ktx2Loader&&E&&(this.ktx2Loader=new C.KTX2Loader,this.ktx2Loader.setTranscoderPath(E).detectSupport(this.el.renderer)),!this.meshoptDecoder&&b&&(this.meshoptDecoder=v(b).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}})},"./src/systems/index.js":(T,I,u)=>{u("./src/systems/camera.js"),u("./src/systems/geometry.js"),u("./src/systems/gltf-model.js"),u("./src/systems/light.js"),u("./src/systems/material.js"),u("./src/systems/renderer.js"),u("./src/systems/shadow.js"),u("./src/systems/tracked-controls-webvr.js"),u("./src/systems/tracked-controls-webxr.js"),u("./src/systems/webxr.js")},"./src/systems/light.js":(T,I,u)=>{var g=u("./src/core/system.js").registerSystem,C=u("./src/utils/bind.js"),v=u("./src/constants/index.js"),y="data-aframe-default-light";T.exports.System=g("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",C(this.setupDefaultLights,this))},registerLight:function(E){E.hasAttribute(y)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var E,b=this.sceneEl;if(!!this.defaultLights){E=document.querySelectorAll("["+y+"]");for(var m=0;m<E.length;m++)b.removeChild(E[m]);this.defaultLights=!1}},setupDefaultLights:function(){var E=this.sceneEl,b,m;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(b=document.createElement("a-entity"),b.setAttribute("light",{color:"#BBB",type:"ambient"}),b.setAttribute(y,""),b.setAttribute(v.AFRAME_INJECTED,""),E.appendChild(b),m=document.createElement("a-entity"),m.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),m.setAttribute("position",{x:-.5,y:1,z:1}),m.setAttribute(y,""),m.setAttribute(v.AFRAME_INJECTED,""),E.appendChild(m),this.defaultLights=!0)}})},"./src/systems/material.js":(T,I,u)=>{var g=u("./src/core/system.js").registerSystem,C=u("./src/lib/three.js"),v=u("./src/utils/index.js"),y=u("./src/utils/material.js").isHLS,E=u("./src/utils/material.js").setTextureProperties,b=v.bind,m=v.debug,w=m("components:texture:error"),_=new C.TextureLoader,O=m("components:texture:warn");_.setCrossOrigin("anonymous"),T.exports.System=g("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",b(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(J,j,k){var te=this;if(J.tagName==="CANVAS"){this.loadCanvas(J,j,k);return}if(J.tagName==="VIDEO"){!J.src&&!J.srcObject&&!J.childElementCount&&O("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),this.loadVideo(J,j,k);return}v.srcLoader.validateSrc(J,ue,xe);function ue(Ee){te.loadImage(Ee,j,k)}function xe(Ee){te.loadVideo(Ee,j,k)}},loadImage:function(J,j,k){var te=this.hash(j),ue=this.textureCache;if(ue[te]){ue[te].then(k);return}ue[te]=L(J,j),ue[te].then(k)},loadCanvas:function(J,j,k){var te;te=new C.CanvasTexture(J),E(te,j),k(te)},loadVideo:function(J,j,k){var te,ue,xe=this.textureCache,Ee,V;function q(Q){Q.texture.needsUpdate=!0,k(Q.texture,Q.videoEl)}if(typeof J!="string"){if(Ee=J,te=this.hashVideo(j,Ee),xe[te]){xe[te].then(q);return}Y(Ee)}if(Ee=Ee||P(J,j.width,j.height),te=this.hashVideo(j,Ee),xe[te]){xe[te].then(q);return}ue=new C.VideoTexture(Ee),ue.minFilter=C.LinearFilter,E(ue,j),this.sceneEl.isIOS&&y(Ee.src||Ee.getAttribute("src"),Ee.type||Ee.getAttribute("type"))&&(ue.format=C.RGBAFormat,ue.needsCorrectionBGRA=!0,ue.flipY=!1,ue.needsCorrectionFlipY=!0),V={texture:ue,videoEl:Ee},xe[te]=Promise.resolve(V),q(V)},hash:function(J){return J.src.tagName&&(J=v.extendDeep({},J),J.src=J.src.src),JSON.stringify(J)},hashVideo:function(J,j){return R(J,j)},registerMaterial:function(J){this.materials[J.uuid]=J},unregisterMaterial:function(J){delete this.materials[J.uuid];var j=this.textureCounts;Object.keys(J).filter(function(k){return J[k]&&J[k].isTexture}).forEach(function(k){j[J[k].uuid]--,j[J[k].uuid]<=0&&J[k].dispose()})},updateMaterials:function(J){var j=this.materials;Object.keys(j).forEach(function(k){j[k].needsUpdate=!0})},onMaterialTextureLoaded:function(J){this.textureCounts[J.detail.texture.uuid]||(this.textureCounts[J.detail.texture.uuid]=0),this.textureCounts[J.detail.texture.uuid]++}});function R(J,j){var k,te=j.getAttribute("id"),ue,xe;if(te)return te;for(ue="",xe=J||{},k=0;k<j.attributes.length;k++)xe[j.attributes[k].name]=j.attributes[k].value;return Object.keys(xe).sort().forEach(function(Ee){ue+=Ee+":"+xe[Ee]+";"}),ue}function L(J,j){return new Promise(k);function k(te,ue){var xe=typeof J!="string";function Ee(V){E(V,j),V.needsUpdate=!0,te(V)}if(xe){Ee(new C.Texture(J));return}_.load(J,Ee,function(){},function(V){w("`$s` could not be fetched (Error code: %s; Response: %s)",V.status,V.statusText)})}}function P(J,j,k){var te=document.createElement("video");return te.width=j,te.height=k,te.setAttribute("playsinline",""),te.setAttribute("webkit-playsinline",""),te.autoplay=!0,te.loop=!0,te.crossOrigin="anonymous",te.addEventListener("error",function(){O("`$s` is not a valid video",J)},!0),te.src=J,te}function Y(J){return J.autoplay=J.hasAttribute("autoplay")&&J.getAttribute("autoplay")!=="false",J.controls=J.hasAttribute("controls")&&J.getAttribute("controls")!=="false",J.getAttribute("loop")==="false"&&J.removeAttribute("loop"),J.getAttribute("preload")==="false"&&(J.preload="none"),J.crossOrigin=J.crossOrigin||"anonymous",J.setAttribute("playsinline",""),J.setAttribute("webkit-playsinline",""),J}},"./src/systems/renderer.js":(T,I,u)=>{var g=u("./src/core/system.js").registerSystem,C=u("./src/utils/index.js"),v=u("./src/lib/three.js"),y=C.debug,E=y("components:renderer:warn");T.exports.System=g("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:C.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:1920},maxCanvasHeight:{default:1920},physicallyCorrectLights:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon"]},precision:{default:"high",oneOf:["high","medium","low"]},sortObjects:{default:!1},colorManagement:{default:!1},gammaOutput:{default:!1},alpha:{default:!0},foveationLevel:{default:1}},init:function(){var b=this.data,m=this.el,w=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),_=m.renderer;_.sortObjects=b.sortObjects,_.physicallyCorrectLights=b.physicallyCorrectLights,_.toneMapping=v[w+"ToneMapping"],(b.colorManagement||b.gammaOutput)&&(_.outputEncoding=v.sRGBEncoding,b.gammaOutput&&E('Property `gammaOutput` is deprecated. Use `renderer="colorManagement: true;"` instead.')),m.hasAttribute("antialias")&&E('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),m.hasAttribute("logarithmicDepthBuffer")&&E('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.')},update:function(){var b=this.data,m=this.el,w=m.renderer,_=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);w.toneMapping=v[_+"ToneMapping"],w.toneMappingExposure=b.exposure,w.xr.setFoveation(b.foveationLevel)},applyColorCorrection:function(b){!this.data.colorManagement||!b||(b.isColor?b.convertSRGBToLinear():b.isTexture&&(b.encoding=v.sRGBEncoding))},setWebXRFrameRate:function(b){var m=this.data,w=b.supportedFrameRates;if(w&&b.updateTargetFrameRate){let _;w.includes(90)?_=m.highRefreshRate?90:72:_=m.highRefreshRate?72:60,b.updateTargetFrameRate(_).catch(function(O){console.warn("failed to set target frame rate of "+_+". Error info: "+O)})}}})},"./src/systems/shadow.js":(T,I,u)=>{var g=u("./src/core/system.js").registerSystem,C=u("./src/lib/three.js"),v={basic:C.BasicShadowMap,pcf:C.PCFShadowMap,pcfsoft:C.PCFSoftShadowMap};T.exports.System=g("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var y=this.sceneEl,E=this.data;this.shadowMapEnabled=!1,y.renderer&&(y.renderer.shadowMap.type=v[E.type],y.renderer.shadowMap.autoUpdate=E.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},update:function(y){y.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.data.enabled)},setShadowMapEnabled:function(y){var E=this.sceneEl.renderer;this.shadowMapEnabled=this.data.enabled&&y,E&&(E.shadowMap.enabled=this.shadowMapEnabled)}})},"./src/systems/tracked-controls-webvr.js":(T,I,u)=>{var g=u("./src/core/system.js").registerSystem,C=u("./src/utils/index.js"),v=C.device.isWebXRAvailable;T.exports.System=g("tracked-controls-webvr",{init:function(){var y=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=C.throttle(this.updateControllerList,500,this),!v&&(!navigator.getVRDisplays||this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(E){E.length&&(y.vrDisplay=E[0])})}))},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var y=this.controllers,E,b,m,w;if(b=navigator.getGamepads&&navigator.getGamepads(),!!b){for(w=y.length,y.length=0,m=0;m<b.length;++m)E=b[m],E&&E.pose&&y.push(E);y.length!==w&&this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/tracked-controls-webxr.js":(T,I,u)=>{var g=u("./src/core/system.js").registerSystem,C=u("./src/utils/index.js");T.exports.System=g("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=C.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var v=this,y=this.el.xrSession;if(!y){this.referenceSpace=void 0,this.controllers=[],this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1));return}var E=v.el.sceneEl.systems.webxr.sessionReferenceSpaceType;y.requestReferenceSpace(E).then(function(b){v.referenceSpace=b}).catch(function(b){throw v.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(E,'tracked-controls-webxr uses reference space "'+E+'".'),b})},updateControllerList:function(){var v=this.el.xrSession,y=this.oldControllers,E;if(!v){if(this.oldControllersLength===0)return;this.oldControllersLength=0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1);return}if(!!v.inputSources){if(this.controllers=v.inputSources,this.oldControllersLength===this.controllers.length){var b=!0;for(E=0;E<this.controllers.length;++E)if(!(this.controllers[E]===y[E]&&this.controllers[E].gamepad===y[E].gamepad)){b=!1;break}if(b)return}for(y.length=0,E=0;E<this.controllers.length;E++)y.push(this.controllers[E]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/webxr.js":(T,I,u)=>{var g=u("./src/core/system.js").registerSystem,C=u("./src/utils/index.js"),v=C.debug("systems:webxr:warn");T.exports.System=g("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var y=this.data;this.sessionConfiguration={requiredFeatures:y.requiredFeatures,optionalFeatures:y.optionalFeatures},this.sessionReferenceSpaceType=y.referenceSpaceType,y.overlayElement&&(y.overlayElement.classList.remove("a-dom-overlay"),y.optionalFeatures.includes("dom-overlay")||(y.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",y)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:y.overlayElement},y.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(y){return!!(y==="viewer"||y==="local"||this.sessionConfiguration.requiredFeatures.includes(y)||this.sessionConfiguration.optionalFeatures.includes(y))},warnIfFeatureNotRequested:function(y,E){if(!this.wasFeatureRequested(y)){var b='Please add the feature "'+y+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`;v((E?E+" ":"")+b)}}})},"./src/utils/bind.js":T=>{T.exports=function(u,g){return function(C){return function(){var y=C.concat(Array.prototype.slice.call(arguments,0));return u.apply(g,y)}}(Array.prototype.slice.call(arguments,2))}},"./src/utils/coordinates.js":(T,I,u)=>{var g=u("./src/utils/debug.js"),C=u("./node_modules/object-assign/index.js"),v=g("utils:coordinates:warn"),y=["x","y","z","w"],E=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;T.exports.regex=E;var b="object",m=/\s+/g;function w(L,P){var Y,J,j,k,te,ue,xe,Ee,V;if(L&&L instanceof Object)return ue=L.x===void 0?P&&P.x:L.x,xe=L.y===void 0?P&&P.y:L.y,Ee=L.z===void 0?P&&P.z:L.z,V=L.w===void 0?P&&P.w:L.w,ue!=null&&(L.x=R(ue)),xe!=null&&(L.y=R(xe)),Ee!=null&&(L.z=R(Ee)),V!=null&&(L.w=R(V)),L;if(L==null)return typeof P===b?C({},P):P;for(Y=L.trim().split(m),te={},k=0;k<y.length;k++)if(j=y[k],Y[k])te[j]=parseFloat(Y[k],10);else{if(J=P&&P[j],J===void 0)continue;te[j]=R(J)}return te}T.exports.parse=w;function _(L){var P;return typeof L!==b?L:(P=L.x+" "+L.y,L.z!=null&&(P+=" "+L.z),L.w!=null&&(P+=" "+L.w),P)}T.exports.stringify=_;function O(L){return E.test(L)}T.exports.isCoordinates=O,T.exports.isCoordinate=function(L){return v("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),O(L)};function R(L){return L!=null&&L.constructor===String?parseFloat(L,10):L}T.exports.toVector3=function(L){return new THREE.Vector3(L.x,L.y,L.z)}},"./src/utils/debug.js":(T,I,u)=>{var g=u("./node_modules/process/browser.js"),C=u("./node_modules/debug/browser.js"),v=u("./node_modules/object-assign/index.js"),y={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},E=function(O){var R=C(O);return R.color=m(O),R};v(E,C);function b(O){var R=O.split(":");return R[R.length-1]}function m(O){var R=b(O),L=y.colors&&y.colors[R];return L||null}function w(){try{return window.localStorage}catch{}}var _=w();_&&(parseInt(_.logs,10)||_.logs==="true")?E.enable("*"):E.enable("*:error,*:info,*:warn"),g.browser&&(window.logs=E),T.exports=E},"./src/utils/device.js":(T,I,u)=>{var g=u("./node_modules/process/browser.js"),C=u("./node_modules/debug/browser.js")("device:error"),v,y=!1,E=!1,b=T.exports.isWebXRAvailable=!window.debug&&navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(Ee){var V;b||(V=document.createElement("canvas"),v=Ee.display,V.getContext("webgl",{}),v.requestPresent([{source:V}]).then(function(){},function(){}))}),b){var m=function(){var Ee=document.querySelector("a-scene");if(!Ee){window.addEventListener("DOMContentLoaded",m);return}Ee.hasLoaded?Ee.components["vr-mode-ui"].updateEnterInterfaces():Ee.addEventListener("loaded",m)},w=function(Ee){C("WebXR session support error: "+Ee.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(Ee){y=Ee,m()}).catch(w),navigator.xr.isSessionSupported("immersive-ar").then(function(Ee){E=Ee,m()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){y=!0,m()}).catch(w),navigator.xr.supportsSession("immersive-ar").then(function(){E=!0,m()}).catch(function(){})):C("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(Ee){var V=document.querySelector("a-scene");v=Ee.length&&Ee[0],V&&V.emit("displayconnected",{vrDisplay:v})});function _(){return v}T.exports.getVRDisplay=_;function O(){return y||E||!!_()}T.exports.checkHeadsetConnected=O;function R(){return E}T.exports.checkARSupport=R;function L(){return y}T.exports.checkVRSupport=L;var P=function(){var Ee=!1;return function(V){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(V)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(V.substr(0,4)))&&(Ee=!0),(J()||Y()||xe())&&(Ee=!0),ue()&&(Ee=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return Ee}}();T.exports.isMobile=P;function Y(Ee){var V=Ee||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(V)}T.exports.isTablet=Y;function J(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}T.exports.isIOS=J;function j(){return!P()&&!ue()&&window.orientation!==void 0}T.exports.isMobileDeviceRequestingDesktopSite=j;function k(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}T.exports.isOculusBrowser=k;function te(){return/(Mobile VR)/i.test(window.navigator.userAgent)}T.exports.isFirefoxReality=te;function ue(){return k()||te()}T.exports.isMobileVR=ue;function xe(){return/R7 Build/.test(window.navigator.userAgent)}T.exports.isR7=xe,T.exports.isLandscape=function(){var Ee=window.orientation;return xe()&&(Ee+=90),Ee===90||Ee===-90},T.exports.isBrowserEnvironment=!!(!g||g.browser),T.exports.isNodeEnvironment=!T.exports.isBrowserEnvironment},"./src/utils/entity.js":T=>{var I={};function u(g,C){return C=C||".",I[C]||(I[C]={}),g.indexOf(C)!==-1?I[C][g]=g.split(C):I[C][g]=g,I[C][g]}T.exports.getComponentPropertyPath=u,T.exports.propertyPathCache=I,T.exports.getComponentProperty=function(g,C,v){var y;return v=v||".",C.indexOf(v)!==-1?(y=u(C,v),y.constructor===String?g.getAttribute(y):g.getAttribute(y[0])[y[1]]):g.getAttribute(C)},T.exports.setComponentProperty=function(g,C,v,y){var E;if(y=y||".",C.indexOf(y)!==-1){E=u(C,y),E.constructor===String?g.setAttribute(E,v):g.setAttribute(E[0],E[1],v);return}g.setAttribute(C,v)}},"./src/utils/forceCanvasResizeSafariMobile.js":T=>{T.exports=function(u){var g=u.style.width,C=u.style.height;u.style.width=parseInt(g,10)+1+"px",u.style.height=parseInt(C,10)+1+"px",setTimeout(function(){u.style.width=g,u.style.height=C},200)}},"./src/utils/index.js":(T,I,u)=>{var g=u("./src/utils/debug.js"),C=u("./node_modules/deep-assign/index.js"),v=u("./src/utils/device.js"),y=u("./node_modules/object-assign/index.js"),E=u("./src/utils/object-pool.js"),b=g("utils:warn");T.exports.bind=u("./src/utils/bind.js"),T.exports.coordinates=u("./src/utils/coordinates.js"),T.exports.debug=g,T.exports.device=v,T.exports.entity=u("./src/utils/entity.js"),T.exports.forceCanvasResizeSafariMobile=u("./src/utils/forceCanvasResizeSafariMobile.js"),T.exports.isIE11=u("./src/utils/is-ie11.js"),T.exports.material=u("./src/utils/material.js"),T.exports.objectPool=E,T.exports.split=u("./src/utils/split.js").split,T.exports.styleParser=u("./src/utils/styleParser.js"),T.exports.trackedControls=u("./src/utils/tracked-controls.js"),T.exports.checkHeadsetConnected=function(){return b("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),v.checkHeadsetConnected(arguments)},T.exports.isGearVR=T.exports.device.isGearVR=function(){b("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},T.exports.isIOS=function(){return b("`utils.isIOS` has moved to `utils.device.isIOS`"),v.isIOS(arguments)},T.exports.isOculusGo=T.exports.device.isOculusGo=function(){b("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},T.exports.isMobile=function(){return b("`utils.isMobile has moved to `utils.device.isMobile`"),v.isMobile(arguments)},T.exports.throttle=function(w,_,O){var R;return O&&(w=T.exports.bind(w,O)),function(){var L=Date.now(),P=typeof R>"u"?_:L-R;(typeof R>"u"||P>=_)&&(R=L,w.apply(null,arguments))}},T.exports.throttleLeadingAndTrailing=function(w,_,O){var R,L;return O&&(w=T.exports.bind(w,O)),function(){var P=Date.now(),Y=typeof R>"u"?_:P-R,J=arguments;typeof R>"u"||Y>=_?(clearTimeout(L),R=P,w.apply(null,J)):(clearTimeout(L),L=setTimeout(function(){R=Date.now(),w.apply(this,J)},_-Y))}},T.exports.throttleTick=function(w,_,O){var R;return O&&(w=T.exports.bind(w,O)),function(L,P){var Y=typeof R>"u"?P:L-R;(typeof R>"u"||Y>=_)&&(R=L,w(L,Y))}},T.exports.debounce=function(w,_,O){var R;return function(){var L=this,P=arguments,Y=function(){R=null,O||w.apply(L,P)},J=O&&!R;clearTimeout(R),R=setTimeout(Y,_),J&&w.apply(L,P)}},T.exports.extend=y,T.exports.extendDeep=C,T.exports.clone=function(w){return JSON.parse(JSON.stringify(w))};var m=function(){var w=E.createPool(function(){return[]});return function(_,O){var R,L,P,Y,J,j;if(_===void 0||O===void 0||_===null||O===null||!(_&&O&&_.constructor===Object&&O.constructor===Object||_.constructor===Array&&O.constructor===Array))return _===O;L=w.use(),P=w.use(),L.length=0,P.length=0;for(R in _)L.push(R);for(R in O)P.push(R);if(L.length!==P.length)return w.recycle(L),w.recycle(P),!1;for(Y=0;Y<L.length;++Y)if(J=_[L[Y]],j=O[L[Y]],typeof J=="object"||typeof j=="object"||Array.isArray(J)&&Array.isArray(j)){if(J===j)continue;if(!m(J,j))return w.recycle(L),w.recycle(P),!1}else if(J!==j)return w.recycle(L),w.recycle(P),!1;return w.recycle(L),w.recycle(P),!0}}();T.exports.deepEqual=m,T.exports.diff=function(){var w=[];return function(_,O,R){var L,P,Y,J,j,k,te;J=R||{},w.length=0;for(j in _)w.push(j);if(!O)return J;for(Y in O)w.indexOf(Y)===-1&&w.push(Y);for(k=0;k<w.length;k++)j=w[k],L=_[j],P=O[j],te=L&&P&&L.constructor===Object&&P.constructor===Object,(te&&!m(L,P)||!te&&L!==P)&&(J[j]=P);return J}}(),T.exports.shouldCaptureKeyEvent=function(w){return w.metaKey?!1:document.activeElement===document.body},T.exports.splitString=function(w,_){typeof _>"u"&&(_=" ");var O=new RegExp(_,"g");return w=(w||"").replace(O,_),w.split(_)},T.exports.getElData=function(w,_){_=_||{};var O={};Object.keys(_).forEach(R);function R(L){w.hasAttribute(L)&&(O[L]=w.getAttribute(L))}return O},T.exports.getUrlParameter=function(w){w=w.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var _=new RegExp("[\\?&]"+w+"=([^&#]*)"),O=_.exec(location.search);return O===null?"":decodeURIComponent(O[1].replace(/\+/g," "))},T.exports.isIframed=function(){return window.top!==window.self},T.exports.findAllScenes=function(w){for(var _=[],O=w.getElementsByTagName("*"),R=0,L=O.length;R<L;R++)O[R].isScene&&_.push(O[R]);return _},T.exports.srcLoader=u("./src/utils/src-loader.js")},"./src/utils/ios-orientationchange-blank-bug.js":()=>{window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},"./src/utils/is-ie11.js":T=>{function I(){var u=-1,g=navigator.userAgent,C;return navigator.appName==="Microsoft Internet Explorer"?(C=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),C.exec(g)!=null&&(u=parseFloat(RegExp.$1))):navigator.appName==="Netscape"&&(C=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),C.exec(g)!=null&&(u=parseFloat(RegExp.$1))),u}T.exports=I()===11},"./src/utils/isIOSOlderThan10.js":T=>{T.exports=function(u){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(u)}},"./src/utils/material.js":(T,I,u)=>{var g=u("./src/lib/three.js"),C=["application/x-mpegurl","application/vnd.apple.mpegurl"],v=new Set(["emissiveMap","envMap","map","specularMap"]);function y(b,m){var w=m.offset||{x:0,y:0},_=m.repeat||{x:1,y:1},O=m.npot||!1;O&&(b.wrapS=g.ClampToEdgeWrapping,b.wrapT=g.ClampToEdgeWrapping,b.magFilter=g.LinearFilter,b.minFilter=g.LinearFilter),(_.x!==1||_.y!==1)&&(b.wrapS=g.RepeatWrapping,b.wrapT=g.RepeatWrapping,b.repeat.set(_.x,_.y)),(w.x!==0||w.y!==0)&&b.offset.set(w.x,w.y)}T.exports.setTextureProperties=y,T.exports.updateMapMaterialFromData=function(b,m,w,_){var O=w.el,R=w.material,L=O.sceneEl.systems.renderer,P=_[m];if(w.materialSrcs||(w.materialSrcs={}),!P){delete w.materialSrcs[b],J(null);return}if(P===w.materialSrcs[b]&&R[b]){y(R[b],_);return}w.materialSrcs[b]=P,P instanceof g.Texture?J(P):O.sceneEl.systems.material.loadTexture(P,{src:P,repeat:_.repeat,offset:_.offset,npot:_.npot},Y);function Y(j){w.materialSrcs[b]===P&&J(j)}function J(j){R[b]=j,j&&v.has(b)&&L.applyColorCorrection(j),R.needsUpdate=!0,E(O,j)}},T.exports.updateMap=function(b,m){return T.exports.updateMapMaterialFromData("map","src",b,m)},T.exports.updateDistortionMap=function(b,m,w){var _=b;b==="ambientOcclusion"&&(_="ao");var O=m.el,R=m.material,L=O.sceneEl.systems.renderer,P=w[b+"Map"],Y={};if(Y.src=P,Y.offset=w[b+"TextureOffset"],Y.repeat=w[b+"TextureRepeat"],Y.wrap=w[b+"TextureWrap"],P){if(P===m[b+"TextureSrc"])return;m[b+"TextureSrc"]=P,O.sceneEl.systems.material.loadTexture(P,Y,J);return}if(!R.map)return;J(null);function J(j){var k=_+"Map";R[k]=j,j&&v.has(k)&&L.applyColorCorrection(j),j&&y(j,w),R.needsUpdate=!0,E(O,j)}};function E(b,m){!m||(b.emit("materialtextureloaded",{src:m.image,texture:m}),!(!m.image||m.image.tagName!=="VIDEO")&&(m.image.addEventListener("loadeddata",function(){!b.components||!b.components.material||(m.needsCorrectionBGRA&&m.needsCorrectionFlipY&&["standard","flat"].indexOf(b.components.material.data.shader)!==-1&&b.setAttribute("material","shader","ios10hls"),b.emit("materialvideoloadeddata",{src:m.image,texture:m}))}),m.image.addEventListener("ended",function(){b.emit("materialvideoended",{src:m.image,texture:m})})))}T.exports.handleTextureEvents=E,T.exports.isHLS=function(b,m){return!!(m&&C.includes(m.toLowerCase())||b&&b.toLowerCase().indexOf(".m3u8")>0)}},"./src/utils/math.js":T=>{function I(g,C,v){var y=C.dot(g);return(y-C.dot(v))/C.length()}function u(g,C,v,y){var E=I(g,C,v);return y.copy(C),y.multiplyScalar(E),y.add(v),y}T.exports.distanceOfPointFromPlane=I,T.exports.nearestPointInPlane=u},"./src/utils/object-pool.js":T=>{var I=Object.freeze(Object.create(null));function u(){return{}}T.exports.createPool=function(y){var E=[],b=null;y=y||u;function m(){var R;return(b===null||b===E.length)&&_(E.length||5),R=E[b],E[b++]=I,g(R),R}function w(R){if(R instanceof Object){if(b===null||b===-1){E[E.length]=R;return}E[--b]=R}}function _(R){var L,P;if(R=R===void 0?E.length:R,R>0&&b==null&&(b=0),R>0)for(L=E.length,E.length+=Number(R),P=L;P<E.length;P++)E[P]=y();return E.length}function O(){return E.length}return{grow:_,pool:E,recycle:w,size:O,use:m}};function g(v){var y;if(!(!v||v.constructor!==Object))for(y in v)v[y]=void 0}T.exports.clearObject=g;function C(v,y){var E;if(!(!v||v.constructor!==Object))for(E in v)E in y||delete v[E]}T.exports.removeUnusedKeys=C},"./src/utils/split.js":T=>{T.exports.split=function(){var I={};return function(u,g){return g in I||(I[g]={}),u in I[g]||(I[g][u]=u.split(g)),I[g][u]}}()},"./src/utils/src-loader.js":(T,I,u)=>{var g=u("./src/utils/debug.js"),C=g("utils:src-loader:warn");function v(_,O,R){b(_,function(P){if(P){O(_);return}R(_)})}function y(_,O){var R,L="",P,Y,J=[];for(P=0;P<5;P++)L+="(url\\((?:[^\\)]+)\\),\\s*)";L+="(url\\((?:[^\\)]+)\\)\\s*)",Y=_.match(new RegExp(L));function j(k){J.push(k),J.length===6&&O(J)}if(Y){for(P=1;P<7;P++)v(E(Y[P]),j);return}if(R=w(_),!!R){if(R.tagName==="A-CUBEMAP"&&R.srcs)return O(R.srcs);C('Selector "%s" does not point to <a-cubemap>',_)}}function E(_){var O=_.match(/\url\((.+)\)/);if(!!O)return O[1]}function b(_,O){var R;if(_.tagName){O(_.tagName==="IMG");return}R=new XMLHttpRequest,R.open("HEAD",_),R.addEventListener("load",function(L){var P;R.status>=200&&R.status<300?(P=R.getResponseHeader("Content-Type"),P==null?m(_,O):P.startsWith("image")?O(!0):O(!1)):m(_,O),R.abort()}),R.send()}function m(_,O){var R=new Image;R.addEventListener("load",L);function L(){O(!0)}R.addEventListener("error",P);function P(){O(!1)}R.src=_}function w(_){try{var O=document.querySelector(_);return O||C('No element was found matching the selector: "%s"',_),O}catch{C('"%s" is not a valid selector',_);return}}T.exports={parseUrl:E,validateSrc:v,validateCubemapSrc:y}},"./src/utils/styleParser.js":T=>{var I=/-([a-z])/g;T.exports.parse=function(b,m){var w;return typeof b!="string"||(w=v(b,m),w[""])?b:g(w)},T.exports.stringify=function(b){return typeof b=="string"?b:y(b)};function u(b){return b.replace(I,E)}T.exports.toCamelCase=u;function g(b){var m,w;for(w in b)m=u(w),w!==m&&(b[m]=b[w],delete b[w]);return b}T.exports.transformKeysToCamelCase=g;var C=function(){var b=[],m=/url\([^)]+$/;return function(_){var O="",R,L=0,P=";";for(b.length=0;L<_.length;){if(R=_.indexOf(P,L),R===-1&&(R=_.length),O+=_.substring(L,R),m.test(O)){O+=";",L=R+1;continue}b.push(O.trim()),O="",L=R+1}return b}}();function v(b,m){var w,_,O,R,L,P;for(m=m||{},w=C(b),_=0;_<w.length;_++)O=w[_],O&&(R=O.indexOf(":"),L=O.substr(0,R).trim(),P=O.substr(R+1).trim(),m[L]=P);return m}function y(b){var m,w=0,_=0,O="";for(m in b)w++;for(m in b)O+=m+": "+b[m],_<w-1&&(O+="; "),_++;return O}function E(b){return b[1].toUpperCase()}},"./src/utils/tracked-controls.js":(T,I,u)=>{var g=u("./src/constants/index.js").DEFAULT_HANDEDNESS,C=["x","y","z","w"],v=2;T.exports.checkControllerPresentAndSetup=function(w,_,O){var R=w.el,L,P=R.sceneEl.hasWebXR,Y=P?E:y,J;if(L=Y(w,_,O),J=!!L,w.controllerPresent&&!w.controllerEventsActive&&!P&&w.addEventListeners(),J===w.controllerPresent)return J;w.controllerPresent=J,J?(w.addEventListeners(),w.injectTrackedControls(L),R.emit("controllerconnected",{name:w.name,component:w})):(w.removeEventListeners(),R.emit("controllerdisconnected",{name:w.name,component:w}))};function y(w,_,O){var R,L=w.el.sceneEl,P,Y=O.index||0;return!_||(P=L&&L.systems["tracked-controls-webvr"],!P)||(R=P.controllers,!R.length)?!1:!!b(R,null,_,O.hand,Y)}function E(w,_,O){var R,L=w.el.sceneEl,P=L&&L.systems["tracked-controls-webxr"];return!P||(R=P.controllers,!R||!R.length)?!1:m(R,_,O.hand,O.index,O.iterateControllerProfiles,O.handTracking)}T.exports.isControllerPresentWebVR=y,T.exports.isControllerPresentWebXR=E;function b(w,_,O,R,L){var P,Y,J=0,j=L>=0?L:0;for(Y=0;Y<w.length;Y++)if(P=w[Y],!(O&&!P.id.startsWith(O))&&!(!O&&P.id!==_)&&!(R&&P.hand&&R!==P.hand)){if(R&&!P.hand)j=v*L+(R===g?0:1);else return P;if(J===j)return P;++J}}function m(w,_,O,R,L,P){var Y,J,j,k=!1,te,ue;for(Y=0;Y<w.length;Y++){if(j=w[Y],ue=j.profiles,P)k=j.hand;else if(L)for(J=0;J<ue.length&&(k=ue[J].startsWith(_),!k);J++);else k=ue.length>0&&ue[0].startsWith(_);if(!!k){if(te=j.handedness==="right"||j.handedness==="left",te){if(j.handedness===O)return w[Y]}else if(Y===R)return w[Y]}}}T.exports.findMatchingControllerWebVR=b,T.exports.findMatchingControllerWebXR=m,T.exports.emitIfAxesChanged=function(w,_,O){var R,L,P,Y,J;for(L in _){for(R=_[L],P=!1,J=0;J<R.length;J++)O.detail.changed[R[J]]&&(P=!0);if(!!P){for(Y={},J=0;J<R.length;J++)Y[C[J]]=O.detail.axis[R[J]];w.el.emit(L+"moved",Y)}}},T.exports.onButtonEvent=function(w,_,O,R){var L=R?O.mapping[R]:O.mapping,P=L.buttons[w];O.el.emit(P+_),O.updateModel&&O.updateModel(P,_)}},"./vendor/DeviceOrientationControls.js":()=>{THREE.DeviceOrientationControls=function(T){var I=this;this.object=T,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var u=function(v){I.deviceOrientation=v},g=function(){I.screenOrientation=window.orientation||0},C=function(){var v=new THREE.Vector3(0,0,1),y=new THREE.Euler,E=new THREE.Quaternion,b=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(m,w,_,O,R){y.set(_,w,-O,"YXZ"),m.setFromEuler(y),m.multiply(b),m.multiply(E.setFromAxisAngle(v,-R))}}();this.connect=function(){g(),window.addEventListener("orientationchange",g,!1),window.addEventListener("deviceorientation",u,!1),I.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",g,!1),window.removeEventListener("deviceorientation",u,!1),I.enabled=!1},this.update=function(){if(I.enabled!==!1){var v=I.deviceOrientation;if(v){var y=v.alpha?THREE.MathUtils.degToRad(v.alpha)+I.alphaOffset:0,E=v.beta?THREE.MathUtils.degToRad(v.beta):0,b=v.gamma?THREE.MathUtils.degToRad(v.gamma):0,m=I.screenOrientation?THREE.MathUtils.degToRad(I.screenOrientation):0;C(I.object.quaternion,y,E,b,m)}}},this.dispose=function(){I.disconnect()},this.connect()}},"./vendor/rStats.extras.js":T=>{window.glStats=function(){var I=null,u=0,g=0,C=0,v=0,y=0,E=0,b=0;function m(J,j){return function(){j.apply(this,arguments),J.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=m(WebGLRenderingContext.prototype.drawArrays,function(){u++,arguments[0]==this.POINTS?E+=arguments[2]:y+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=m(WebGLRenderingContext.prototype.drawElements,function(){g++,v+=arguments[1]/3,y+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=m(WebGLRenderingContext.prototype.useProgram,function(){C++}),WebGLRenderingContext.prototype.bindTexture=m(WebGLRenderingContext.prototype.bindTexture,function(){b++});var w={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},_=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],O=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function R(){I("allcalls").set(u+g),I("drawElements").set(g),I("drawArrays").set(u),I("bindTexture").set(b),I("useProgram").set(C),I("glfaces").set(v),I("glvertices").set(y),I("glpoints").set(E)}function L(){u=0,g=0,C=0,v=0,y=0,E=0,b=0}function P(){}function Y(J){I=J}return{update:R,start:L,end:P,attach:Y,values:w,groups:_,fractions:O}},window.threeStats=function(I){var u=null,g={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},C=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],v=[];function y(){u("renderer.info.memory.geometries").set(I.info.memory.geometries),u("renderer.info.programs").set(I.info.programs.length),u("renderer.info.memory.textures").set(I.info.memory.textures),u("renderer.info.render.calls").set(I.info.render.calls),u("renderer.info.render.triangles").set(I.info.render.triangles),u("renderer.info.render.points").set(I.info.render.points)}function E(){}function b(){}function m(w){u=w}return{update:y,start:E,end:b,attach:m,values:g,groups:C,fractions:v}},window.BrowserStats=function(){var I=null,u=0,g=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var C={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},v=[{caption:"Browser",values:["memory","total"]}],y=[{base:"total",steps:["memory"]}],E=Math.log(1024);function b(R){var L=100,P=Math.floor(Math.log(R)/E);return Math.round(R*L/Math.pow(1024,P))/L}function m(){u=b(performance.memory.usedJSHeapSize),g=b(performance.memory.totalJSHeapSize),I("memory").set(u),I("total").set(g)}function w(){u=0}function _(){}function O(R){I=R}return{update:m,start:w,end:_,attach:O,values:C,groups:v,fractions:y}},T.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},"./vendor/rStats.js":T=>{(function(){"performance"in window||(window.performance={});var I=window.performance;if(!("now"in I)){var u=Date.now();I.timing&&I.timing.navigationStart&&(u=I.timing.navigationStart),I.now=function(){return Date.now()-u}}I.mark||(I.mark=function(){}),I.measure||(I.measure=function(){})})(),window.rStats=function(u){function g(ue,xe){for(var Ee=Object.keys(ue),V=0,q=Ee.length;V<q;V++)xe(Ee[V])}function C(ue){var xe=document.createElement("link");xe.href=ue,xe.rel="stylesheet",xe.type="text/css",document.getElementsByTagName("head")[0].appendChild(xe)}var v=u||{},y=v.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],E="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",b=(v.CSSPath?v.CSSPath:"")+"rStats.css",m=v.css||[E,b];m.forEach(function(ue){C(ue)}),v.values||(v.values={});var w,_,O=10,R=200,L={};function P(ue,xe,Ee){var V=Ee||{},q=document.createElement("canvas"),Q=q.getContext("2d"),F=0,z=0,X=V.color?V.color:"#666666",fe=document.createElement("canvas"),Ae=fe.getContext("2d");fe.width=1,fe.height=2*O,Ae.fillStyle="#444444",Ae.fillRect(0,0,1,2*O),Ae.fillStyle=X,Ae.fillRect(0,O,1,O),Ae.fillStyle="#ffffff",Ae.globalAlpha=.5,Ae.fillRect(0,O,1,1),Ae.globalAlpha=1;var Se=document.createElement("canvas"),Be=Se.getContext("2d");Se.width=1,Se.height=2*O,Be.fillStyle="#444444",Be.fillRect(0,0,1,2*O),Be.fillStyle="#b70000",Be.fillRect(0,O,1,O),Be.globalAlpha=.5,Be.fillStyle="#ffffff",Be.fillRect(0,O,1,1),Be.globalAlpha=1;function Ge(){q.width=R,q.height=O,q.style.width=q.width+"px",q.style.height=q.height+"px",q.className="rs-canvas",ue.appendChild(q),Q.fillStyle="#444444",Q.fillRect(0,0,q.width,q.height)}function ht(xt,at){z+=(xt-z)*.1,F*=.99,z>F&&(F=z),Q.drawImage(q,1,0,q.width-1,q.height,0,0,q.width-1,q.height),at?Q.drawImage(Se,q.width-1,q.height-z*q.height/F-O):Q.drawImage(fe,q.width-1,q.height-z*q.height/F-O)}return Ge(),{draw:ht}}function Y(ue,xe){var Ee=document.createElement("canvas"),V=Ee.getContext("2d");function q(){Ee.width=R,Ee.height=O*xe,Ee.style.width=Ee.width+"px",Ee.style.height=Ee.height+"px",Ee.className="rs-canvas",ue.appendChild(Ee),V.fillStyle="#444444",V.fillRect(0,0,Ee.width,Ee.height)}function Q(F){V.drawImage(Ee,1,0,Ee.width-1,Ee.height,0,0,Ee.width-1,Ee.height);var z=0;g(F,function(X){var fe=F[X]*Ee.height;V.fillStyle=y[X],V.fillRect(Ee.width-1,z,1,fe),z+=fe})}return q(),{draw:Q}}function J(ue,xe){var Ee=ue,V,q=0,Q=0,F=0,z=0,X=performance.now(),fe=0,Ae=document.createElement("div"),Se=document.createElement("span"),Be=document.createElement("div"),Ge=document.createTextNode(""),ht=v?v.values[Ee.toLowerCase()]:null,xt=new P(Ae,Ee,ht),at=!1;Se.className="rs-counter-id",Se.textContent=ht&&ht.caption?ht.caption:Ee,Be.className="rs-counter-value",Be.appendChild(Ge),Ae.appendChild(Se),Ae.appendChild(Be),xe?xe.div.appendChild(Ae):_.appendChild(Ae),V=performance.now();function Gt(Bt){if(ht&&ht.average){z+=Bt,fe++;var Pt=performance.now();Pt-X>=(ht.avgMs||1e3)&&(F=z/fe,z=0,X=Pt,fe=0)}}function wt(){V=performance.now(),v.userTimingAPI&&performance.mark(Ee+"-start"),at=!0}function Yt(){q=performance.now()-V,v.userTimingAPI&&(performance.mark(Ee+"-end"),at&&performance.measure(Ee,Ee+"-start",Ee+"-end")),Gt(q)}function Mn(){Yt(),wt()}function je(){var Bt=ht&&ht.average?F:q;Ge.nodeValue=Math.round(Bt*100)/100;var Pt=ht&&(ht.below&&q<ht.below||ht.over&&q>ht.over);xt.draw(q,Pt),Ae.className=Pt?"rs-counter-base alarm":"rs-counter-base"}function rt(){var Bt=performance.now(),Pt=Bt-V;Q++,Pt>1e3&&(ht&&ht.interpolate===!1?q=Q:q=Q*1e3/Pt,Q=0,V=Bt,Gt(q))}function At(Bt){q=Bt,Gt(q)}return{set:At,start:wt,tick:Mn,end:Yt,frame:rt,value:function(){return q},draw:je}}function j(ue){var xe=ue.toLowerCase();if(xe===void 0&&(xe="default"),L[xe])return L[xe];var Ee=null;v&&v.groups&&g(v.groups,function(q){var Q=v.groups[parseInt(q,10)];!Ee&&Q.values.indexOf(xe.toLowerCase())!==-1&&(Ee=Q)});var V=new J(xe,Ee);return L[xe]=V,V}function k(){if(v.plugins){v.values||(v.values={}),v.groups||(v.groups=[]),v.fractions||(v.fractions=[]);for(var ue=0;ue<v.plugins.length;ue++)v.plugins[ue].attach(j),g(v.plugins[ue].values,function(xe){v.values[xe]=v.plugins[ue].values[xe]}),v.groups=v.groups.concat(v.plugins[ue].groups),v.fractions=v.fractions.concat(v.plugins[ue].fractions)}else v.plugins={};w=document.createElement("div"),w.className="rs-base",_=document.createElement("div"),_.className="rs-container",_.style.height="auto",w.appendChild(_),document.body.appendChild(w),v&&(v.groups&&g(v.groups,function(xe){var Ee=v.groups[parseInt(xe,10)],V=document.createElement("div");V.className="rs-group",Ee.div=V;var q=document.createElement("h1");q.textContent=Ee.caption,q.addEventListener("click",function(Q){this.classList.toggle("hidden"),Q.preventDefault()}.bind(V)),_.appendChild(q),_.appendChild(V)}),v.fractions&&g(v.fractions,function(xe){var Ee=v.fractions[parseInt(xe,10)],V=document.createElement("div");V.className="rs-fraction";var q=document.createElement("div");q.className="rs-legend";var Q=0;g(v.fractions[xe].steps,function(z){var X=document.createElement("p");X.textContent=v.fractions[xe].steps[z],X.style.color=y[Q],q.appendChild(X),Q++}),V.appendChild(q),V.style.height=Q*O+"px",Ee.div=V;var F=new Y(V,Q);Ee.graph=F,_.appendChild(V)}))}function te(){g(v.plugins,function(ue){v.plugins[ue].update()}),g(L,function(ue){L[ue].draw()}),v&&v.fractions&&g(v.fractions,function(ue){var xe=v.fractions[parseInt(ue,10)],Ee=[],V=L[xe.base.toLowerCase()];V&&(V=V.value(),g(v.fractions[ue].steps,function(q){var Q=v.fractions[ue].steps[parseInt(q,10)].toLowerCase(),F=L[Q];F&&Ee.push(F.value()/V)})),xe.graph.draw(Ee)})}return k(),function(ue){return ue?j(ue):{element:w,update:te}}},T.exports=window.rStats},"./vendor/starts-with-polyfill.js":()=>{String.prototype.startsWith||(String.prototype.startsWith=function(T,I){return I=I||0,this.substr(I,T.length)===T})},"./vendor/wakelock/util.js":T=>{var I={};I.base64=function(u,g){return"data:"+u+";base64,"+g},I.isMobile=function(){var u=!1;return function(g){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(g)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(g.substr(0,4)))&&(u=!0)}(navigator.userAgent||navigator.vendor||window.opera),u},I.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},I.isIFrame=function(){try{return window.self!==window.top}catch{return!0}},I.appendQueryParameter=function(u,g,C){var v=u.indexOf("?")<0?"?":"&";return u+=v+g+"="+C,u},I.getQueryParameter=function(u){u=u.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var g=new RegExp("[\\?&]"+u+"=([^&#]*)"),C=g.exec(location.search);return C===null?"":decodeURIComponent(C[1].replace(/\+/g," "))},I.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90},T.exports=I},"./vendor/wakelock/wakelock.js":(T,I,u)=>{var g=u("./vendor/wakelock/util.js");function C(){var E=document.createElement("video");E.addEventListener("ended",function(){E.play()}),this.request=function(){E.paused&&(E.src=g.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),E.play())},this.release=function(){E.pause(),E.src=""}}function v(){var E=null;this.request=function(){E||(E=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){E&&(clearInterval(E),E=null)}}function y(){var E=navigator.userAgent||navigator.vendor||window.opera;return E.match(/iPhone/i)||E.match(/iPod/i)?v:C}T.exports=y()},"./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css":(T,I,u)=>{u.r(I),u.d(I,{default:()=>te});var g=u("./node_modules/css-loader/dist/runtime/sourceMaps.js"),C=u.n(g),v=u("./node_modules/css-loader/dist/runtime/api.js"),y=u.n(v),E=u("./node_modules/css-loader/dist/runtime/getUrl.js"),b=u.n(E),m=new URL(u("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),u.b),w=new URL(u("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),u.b),_=new URL(u("data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"),u.b),O=new URL(u("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"),u.b),R=new URL(u("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"),u.b),L=y()(C()),P=b()(m),Y=b()(w),J=b()(_),j=b()(O),k=b()(R);L.push([T.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar {
  right: 80px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(`+P+`) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(`+Y+`) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(`+J+`);
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  margin-right: 10px;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}


.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(`+j+`) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(`+k+`) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;;AAGA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar {
  right: 80px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  margin-right: 10px;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}


.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const te=L},"./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css":(T,I,u)=>{u.r(I),u.d(I,{default:()=>b});var g=u("./node_modules/css-loader/dist/runtime/sourceMaps.js"),C=u.n(g),v=u("./node_modules/css-loader/dist/runtime/api.js"),y=u.n(v),E=y()(C());E.push([T.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const b=E},"./src/style/aframe.css":(T,I,u)=>{u.r(I),u.d(I,{default:()=>J});var g=u("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),C=u.n(g),v=u("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),y=u.n(v),E=u("./node_modules/style-loader/dist/runtime/insertBySelector.js"),b=u.n(E),m=u("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),w=u.n(m),_=u("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),O=u.n(_),R=u("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),L=u.n(R),P=u("./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css"),Y={};Y.styleTagTransform=L(),Y.setAttributes=w(),Y.insert=b().bind(null,"head"),Y.domAPI=y(),Y.insertStyleElement=O(),C()(P.default,Y);const J=P.default&&P.default.locals?P.default.locals:void 0},"./src/style/rStats.css":(T,I,u)=>{u.r(I),u.d(I,{default:()=>J});var g=u("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),C=u.n(g),v=u("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),y=u.n(v),E=u("./node_modules/style-loader/dist/runtime/insertBySelector.js"),b=u.n(E),m=u("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),w=u.n(m),_=u("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),O=u.n(_),R=u("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),L=u.n(R),P=u("./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css"),Y={};Y.styleTagTransform=L(),Y.setAttributes=w(),Y.insert=b().bind(null,"head"),Y.domAPI=y(),Y.insertStyleElement=O(),C()(P.default,Y);const J=P.default&&P.default.locals?P.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":T=>{var I=[];function u(v){for(var y=-1,E=0;E<I.length;E++)if(I[E].identifier===v){y=E;break}return y}function g(v,y){for(var E={},b=[],m=0;m<v.length;m++){var w=v[m],_=y.base?w[0]+y.base:w[0],O=E[_]||0,R="".concat(_," ").concat(O);E[_]=O+1;var L=u(R),P={css:w[1],media:w[2],sourceMap:w[3],supports:w[4],layer:w[5]};if(L!==-1)I[L].references++,I[L].updater(P);else{var Y=C(P,y);y.byIndex=m,I.splice(m,0,{identifier:R,updater:Y,references:1})}b.push(R)}return b}function C(v,y){var E=y.domAPI(y);E.update(v);var b=function(w){if(w){if(w.css===v.css&&w.media===v.media&&w.sourceMap===v.sourceMap&&w.supports===v.supports&&w.layer===v.layer)return;E.update(v=w)}else E.remove()};return b}T.exports=function(v,y){y=y||{},v=v||[];var E=g(v,y);return function(m){m=m||[];for(var w=0;w<E.length;w++){var _=E[w],O=u(_);I[O].references--}for(var R=g(m,y),L=0;L<E.length;L++){var P=E[L],Y=u(P);I[Y].references===0&&(I[Y].updater(),I.splice(Y,1))}E=R}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":T=>{var I={};function u(C){if(typeof I[C]>"u"){var v=document.querySelector(C);if(window.HTMLIFrameElement&&v instanceof window.HTMLIFrameElement)try{v=v.contentDocument.head}catch{v=null}I[C]=v}return I[C]}function g(C,v){var y=u(C);if(!y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");y.appendChild(v)}T.exports=g},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":T=>{function I(u){var g=document.createElement("style");return u.setAttributes(g,u.attributes),u.insert(g,u.options),g}T.exports=I},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(T,I,u)=>{function g(C){var v=u.nc;v&&C.setAttribute("nonce",v)}T.exports=g},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":T=>{function I(C,v,y){var E="";y.supports&&(E+="@supports (".concat(y.supports,") {")),y.media&&(E+="@media ".concat(y.media," {"));var b=typeof y.layer<"u";b&&(E+="@layer".concat(y.layer.length>0?" ".concat(y.layer):""," {")),E+=y.css,b&&(E+="}"),y.media&&(E+="}"),y.supports&&(E+="}");var m=y.sourceMap;m&&typeof btoa<"u"&&(E+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(m))))," */")),v.styleTagTransform(E,C,v.options)}function u(C){if(C.parentNode===null)return!1;C.parentNode.removeChild(C)}function g(C){if(typeof document>"u")return{update:function(){},remove:function(){}};var v=C.insertStyleElement(C);return{update:function(E){I(v,C,E)},remove:function(){u(v)}}}T.exports=g},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":T=>{function I(u,g){if(g.styleSheet)g.styleSheet.cssText=u;else{for(;g.firstChild;)g.removeChild(g.firstChild);g.appendChild(document.createTextNode(u))}}T.exports=I},"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E":T=>{T.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":T=>{T.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":T=>{T.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E":T=>{T.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E":T=>{T.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"},"./node_modules/super-three/build/three.module.js":(T,I,u)=>{u.r(I),u.d(I,{ACESFilmicToneMapping:()=>zt,AddEquation:()=>Ee,AddOperation:()=>dn,AdditiveAnimationBlendMode:()=>fr,AdditiveBlending:()=>k,AlphaFormat:()=>bi,AlwaysDepth:()=>Yt,AlwaysStencilFunc:()=>rh,AmbientLight:()=>Sy,AmbientLightProbe:()=>kE,AnimationClip:()=>Ug,AnimationLoader:()=>CE,AnimationMixer:()=>ib,AnimationObjectGroup:()=>eb,AnimationUtils:()=>Xu,ArcCurve:()=>kt,ArrayCamera:()=>Cg,ArrowHelper:()=>Cb,Audio:()=>Gy,AudioAnalyser:()=>QE,AudioContext:()=>r1,AudioListener:()=>HE,AudioLoader:()=>FE,AxesHelper:()=>Mb,BackSide:()=>P,BasicDepthPacking:()=>Ts,BasicShadowMap:()=>w,Bone:()=>_c,BooleanKeyframeTrack:()=>hf,Box2:()=>hb,Box3:()=>xa,Box3Helper:()=>_b,BoxBufferGeometry:()=>Fb,BoxGeometry:()=>Ja,BoxHelper:()=>bb,BufferAttribute:()=>Is,BufferGeometry:()=>Pr,BufferGeometryLoader:()=>Ly,ByteType:()=>on,Cache:()=>ff,Camera:()=>Za,CameraHelper:()=>Eb,CanvasTexture:()=>pt,CapsuleBufferGeometry:()=>Nb,CapsuleGeometry:()=>gs,CatmullRomCurve3:()=>Wn,CineonToneMapping:()=>ni,CircleBufferGeometry:()=>kb,CircleGeometry:()=>Ct,ClampToEdgeWrapping:()=>Oe,Clock:()=>Ny,Color:()=>Si,ColorKeyframeTrack:()=>Zv,ColorManagement:()=>Io,CompressedArrayTexture:()=>lt,CompressedTexture:()=>it,CompressedTextureLoader:()=>ME,ConeBufferGeometry:()=>Ub,ConeGeometry:()=>ts,CubeCamera:()=>qf,CubeReflectionMapping:()=>Ye,CubeRefractionMapping:()=>ze,CubeTexture:()=>zc,CubeTextureLoader:()=>TE,CubeUVReflectionMapping:()=>Me,CubicBezierCurve:()=>Cn,CubicBezierCurve3:()=>zn,CubicInterpolant:()=>Ay,CullFaceBack:()=>E,CullFaceFront:()=>b,CullFaceFrontBack:()=>m,CullFaceNone:()=>y,Curve:()=>mt,CurvePath:()=>pr,CustomBlending:()=>xe,CustomToneMapping:()=>Ue,CylinderBufferGeometry:()=>Gb,CylinderGeometry:()=>Cr,Cylindrical:()=>ub,Data3DTexture:()=>Fl,DataArrayTexture:()=>al,DataTexture:()=>Hh,DataTexture2DArray:()=>Pb,DataTexture3D:()=>Ob,DataTextureLoader:()=>SE,DataUtils:()=>Bb,DecrementStencilOp:()=>Ia,DecrementWrapStencilOp:()=>Ba,DefaultLoadingManager:()=>xy,DepthFormat:()=>Gr,DepthStencilFormat:()=>Dr,DepthTexture:()=>Sg,DirectionalLight:()=>Ty,DirectionalLightHelper:()=>xb,DiscreteInterpolant:()=>vy,DodecahedronBufferGeometry:()=>Hb,DodecahedronGeometry:()=>eo,DoubleSide:()=>Y,DstAlphaFactor:()=>Ge,DstColorFactor:()=>xt,DynamicCopyUsage:()=>oh,DynamicDrawUsage:()=>sd,DynamicReadUsage:()=>no,EdgesGeometry:()=>qp,EllipseCurve:()=>ot,EqualDepth:()=>rt,EqualStencilFunc:()=>Dl,EquirectangularReflectionMapping:()=>He,EquirectangularRefractionMapping:()=>et,Euler:()=>Ho,EventDispatcher:()=>ia,ExtrudeBufferGeometry:()=>zb,ExtrudeGeometry:()=>Jr,FileLoader:()=>qu,Float16BufferAttribute:()=>Yf,Float32BufferAttribute:()=>Yi,Float64BufferAttribute:()=>yh,FloatType:()=>vn,Fog:()=>qd,FogExp2:()=>Qp,FramebufferTexture:()=>Xe,FrontSide:()=>L,Frustum:()=>ul,GLBufferAttribute:()=>ab,GLSL1:()=>Ff,GLSL3:()=>ah,GreaterDepth:()=>Bt,GreaterEqualDepth:()=>At,GreaterEqualStencilFunc:()=>rd,GreaterStencilFunc:()=>Oo,GridHelper:()=>vb,Group:()=>Wl,HalfFloatType:()=>Ft,HemisphereLight:()=>Ey,HemisphereLightHelper:()=>Ab,HemisphereLightProbe:()=>NE,IcosahedronBufferGeometry:()=>Vb,IcosahedronGeometry:()=>tu,ImageBitmapLoader:()=>OE,ImageLoader:()=>Gg,ImageUtils:()=>dh,ImmediateRenderObject:()=>Lb,IncrementStencilOp:()=>Ll,IncrementWrapStencilOp:()=>Ra,InstancedBufferAttribute:()=>wc,InstancedBufferGeometry:()=>By,InstancedInterleavedBuffer:()=>ob,InstancedMesh:()=>hA,Int16BufferAttribute:()=>wm,Int32BufferAttribute:()=>xu,Int8BufferAttribute:()=>u0,IntType:()=>fi,InterleavedBuffer:()=>jp,InterleavedBufferAttribute:()=>Uu,Interpolant:()=>Ml,InterpolateDiscrete:()=>xn,InterpolateLinear:()=>Nt,InterpolateSmooth:()=>an,InvertStencilOp:()=>Qa,KeepStencilOp:()=>Qs,KeyframeTrack:()=>Mc,LOD:()=>cA,LatheBufferGeometry:()=>Qb,LatheGeometry:()=>br,Layers:()=>ps,LessDepth:()=>Mn,LessEqualDepth:()=>je,LessEqualStencilFunc:()=>qs,LessStencilFunc:()=>ec,Light:()=>jh,LightProbe:()=>gA,Line:()=>f,Line3:()=>db,LineBasicMaterial:()=>ga,LineCurve:()=>hr,LineCurve3:()=>Fn,LineDashedMaterial:()=>ds,LineLoop:()=>G,LineSegments:()=>D,LinearEncoding:()=>Yr,LinearFilter:()=>Ke,LinearInterpolant:()=>Jv,LinearMipMapLinearFilter:()=>Xt,LinearMipMapNearestFilter:()=>Vt,LinearMipmapLinearFilter:()=>$t,LinearMipmapNearestFilter:()=>$e,LinearSRGBColorSpace:()=>bo,LinearToneMapping:()=>tn,Loader:()=>Tl,LoaderUtils:()=>i1,LoadingManager:()=>$v,LoopOnce:()=>yt,LoopPingPong:()=>wn,LoopRepeat:()=>St,LuminanceAlphaFormat:()=>Ki,LuminanceFormat:()=>Lr,MOUSE:()=>C,Material:()=>Zo,MaterialLoader:()=>AA,MathUtils:()=>Hf,Matrix3:()=>Fo,Matrix4:()=>Gi,MaxEquation:()=>F,Mesh:()=>$s,MeshBasicMaterial:()=>lo,MeshDepthMaterial:()=>bg,MeshDistanceMaterial:()=>_g,MeshLambertMaterial:()=>cf,MeshMatcapMaterial:()=>cn,MeshNormalMaterial:()=>Ku,MeshPhongMaterial:()=>tm,MeshPhysicalMaterial:()=>em,MeshStandardMaterial:()=>Qh,MeshToonMaterial:()=>nm,MinEquation:()=>Q,MirroredRepeatWrapping:()=>Ze,MixOperation:()=>un,MultiplyBlending:()=>ue,MultiplyOperation:()=>qt,NearestFilter:()=>ae,NearestMipMapLinearFilter:()=>We,NearestMipMapNearestFilter:()=>se,NearestMipmapLinearFilter:()=>Ie,NearestMipmapNearestFilter:()=>ee,NeverDepth:()=>wt,NeverStencilFunc:()=>rl,NoBlending:()=>J,NoColorSpace:()=>Ps,NoToneMapping:()=>bn,NormalAnimationBlendMode:()=>Xi,NormalBlending:()=>j,NotEqualDepth:()=>Pt,NotEqualStencilFunc:()=>id,NumberKeyframeTrack:()=>Ng,Object3D:()=>hs,ObjectLoader:()=>DE,ObjectSpaceNormalMap:()=>qr,OctahedronBufferGeometry:()=>jb,OctahedronGeometry:()=>Yl,OneFactor:()=>X,OneMinusDstAlphaFactor:()=>ht,OneMinusDstColorFactor:()=>at,OneMinusSrcAlphaFactor:()=>Be,OneMinusSrcColorFactor:()=>Ae,OrthographicCamera:()=>Su,PCFShadowMap:()=>_,PCFSoftShadowMap:()=>O,PMREMGenerator:()=>Dh,Path:()=>Ri,PerspectiveCamera:()=>Ao,Plane:()=>Vo,PlaneBufferGeometry:()=>Wb,PlaneGeometry:()=>_u,PlaneHelper:()=>wb,PointLight:()=>My,PointLightHelper:()=>mb,Points:()=>we,PointsMaterial:()=>$,PolarGridHelper:()=>yb,PolyhedronBufferGeometry:()=>Kb,PolyhedronGeometry:()=>Mr,PositionalAudio:()=>VE,PropertyBinding:()=>ws,PropertyMixer:()=>zy,QuadraticBezierCurve:()=>jn,QuadraticBezierCurve3:()=>Sn,Quaternion:()=>Co,QuaternionKeyframeTrack:()=>im,QuaternionLinearInterpolant:()=>yy,REVISION:()=>g,RGBADepthPacking:()=>po,RGBAFormat:()=>Zi,RGBAIntegerFormat:()=>ut,RGBA_ASTC_10x10_Format:()=>ge,RGBA_ASTC_10x5_Format:()=>to,RGBA_ASTC_10x6_Format:()=>os,RGBA_ASTC_10x8_Format:()=>ce,RGBA_ASTC_12x10_Format:()=>_e,RGBA_ASTC_12x12_Format:()=>Le,RGBA_ASTC_4x4_Format:()=>Wr,RGBA_ASTC_5x4_Format:()=>zi,RGBA_ASTC_5x5_Format:()=>er,RGBA_ASTC_6x5_Format:()=>Nr,RGBA_ASTC_6x6_Format:()=>Ds,RGBA_ASTC_8x5_Format:()=>ro,RGBA_ASTC_8x6_Format:()=>pi,RGBA_ASTC_8x8_Format:()=>Ir,RGBA_BPTC_Format:()=>qe,RGBA_ETC2_EAC_Format:()=>Ti,RGBA_PVRTC_2BPPV1_Format:()=>pn,RGBA_PVRTC_4BPPV1_Format:()=>ei,RGBA_S3TC_DXT1_Format:()=>nn,RGBA_S3TC_DXT3_Format:()=>Wt,RGBA_S3TC_DXT5_Format:()=>mn,RGBFormat:()=>Pi,RGB_ETC1_Format:()=>Oi,RGB_ETC2_Format:()=>Mi,RGB_PVRTC_2BPPV1_Format:()=>Xn,RGB_PVRTC_4BPPV1_Format:()=>Un,RGB_S3TC_DXT1_Format:()=>_t,RGFormat:()=>ys,RGIntegerFormat:()=>Qe,RawShaderMaterial:()=>su,Ray:()=>Jo,Raycaster:()=>lb,RectAreaLight:()=>Iy,RedFormat:()=>ar,RedIntegerFormat:()=>zr,ReinhardToneMapping:()=>ri,RepeatWrapping:()=>Te,ReplaceStencilOp:()=>il,ReverseSubtractEquation:()=>q,RingBufferGeometry:()=>Xb,RingGeometry:()=>nu,SRGBColorSpace:()=>Ls,Scene:()=>Bg,ShaderChunk:()=>Qr,ShaderLib:()=>Ca,ShaderMaterial:()=>ea,ShadowMaterial:()=>lf,Shape:()=>$a,ShapeBufferGeometry:()=>Yb,ShapeGeometry:()=>iu,ShapePath:()=>Tb,ShapeUtils:()=>Bi,ShortType:()=>In,Skeleton:()=>of,SkeletonHelper:()=>pb,SkinnedMesh:()=>xl,Source:()=>Da,Sphere:()=>qo,SphereBufferGeometry:()=>qb,SphereGeometry:()=>ru,Spherical:()=>cb,SphericalHarmonics3:()=>Ry,SplineCurve:()=>Ii,SpotLight:()=>wy,SpotLightHelper:()=>fb,Sprite:()=>aA,SpriteMaterial:()=>Wp,SrcAlphaFactor:()=>Se,SrcAlphaSaturateFactor:()=>Gt,SrcColorFactor:()=>fe,StaticCopyUsage:()=>Pf,StaticDrawUsage:()=>Lc,StaticReadUsage:()=>Lf,StereoCamera:()=>UE,StreamCopyUsage:()=>Of,StreamDrawUsage:()=>sh,StreamReadUsage:()=>Df,StringKeyframeTrack:()=>df,SubtractEquation:()=>V,SubtractiveBlending:()=>te,TOUCH:()=>v,TangentSpaceNormalMap:()=>Vs,TetrahedronBufferGeometry:()=>Jb,TetrahedronGeometry:()=>Vu,Texture:()=>js,TextureLoader:()=>IE,TorusBufferGeometry:()=>Zb,TorusGeometry:()=>Qu,TorusKnotBufferGeometry:()=>$b,TorusKnotGeometry:()=>ju,Triangle:()=>Fa,TriangleFanDrawMode:()=>us,TriangleStripDrawMode:()=>Vi,TrianglesDrawMode:()=>ur,TubeBufferGeometry:()=>e_,TubeGeometry:()=>Wu,UVMapping:()=>Pe,Uint16BufferAttribute:()=>Kf,Uint32BufferAttribute:()=>Xf,Uint8BufferAttribute:()=>bm,Uint8ClampedBufferAttribute:()=>_m,Uniform:()=>a1,UniformsGroup:()=>sb,UniformsLib:()=>gi,UniformsUtils:()=>Cm,UnsignedByteType:()=>jt,UnsignedInt248Type:()=>Dn,UnsignedIntType:()=>Nn,UnsignedShort4444Type:()=>yn,UnsignedShort5551Type:()=>Gn,UnsignedShortType:()=>di,VSMShadowMap:()=>R,Vector2:()=>On,Vector3:()=>nt,Vector4:()=>Zr,VectorKeyframeTrack:()=>kg,VideoTexture:()=>ke,WebGL1Renderer:()=>oA,WebGL3DRenderTarget:()=>mo,WebGLArrayRenderTarget:()=>Yo,WebGLCubeRenderTarget:()=>Jf,WebGLMultipleRenderTargets:()=>ph,WebGLMultisampleRenderTarget:()=>Db,WebGLRenderTarget:()=>No,WebGLRenderer:()=>Rg,WebGLUtils:()=>wg,WireframeGeometry:()=>mA,WrapAroundEnding:()=>Ui,ZeroCurvatureEnding:()=>Pn,ZeroFactor:()=>z,ZeroSlopeEnding:()=>xi,ZeroStencilOp:()=>Va,_SRGBAFormat:()=>du,sRGBEncoding:()=>Ar});/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const g="147",C={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},v={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},y=0,E=1,b=2,m=3,w=0,_=1,O=2,R=3,L=0,P=1,Y=2,J=0,j=1,k=2,te=3,ue=4,xe=5,Ee=100,V=101,q=102,Q=103,F=104,z=200,X=201,fe=202,Ae=203,Se=204,Be=205,Ge=206,ht=207,xt=208,at=209,Gt=210,wt=0,Yt=1,Mn=2,je=3,rt=4,At=5,Bt=6,Pt=7,qt=0,un=1,dn=2,bn=0,tn=1,ri=2,ni=3,zt=4,Ue=5,Pe=300,Ye=301,ze=302,He=303,et=304,Me=306,Te=1e3,Oe=1001,Ze=1002,ae=1003,ee=1004,se=1004,Ie=1005,We=1005,Ke=1006,$e=1007,Vt=1007,$t=1008,Xt=1008,jt=1009,on=1010,In=1011,di=1012,fi=1013,Nn=1014,vn=1015,Ft=1016,yn=1017,Gn=1018,Dn=1020,bi=1021,Pi=1022,Zi=1023,Lr=1024,Ki=1025,Gr=1026,Dr=1027,ar=1028,zr=1029,ys=1030,Qe=1031,ut=1033,_t=33776,nn=33777,Wt=33778,mn=33779,Un=35840,Xn=35841,ei=35842,pn=35843,Oi=36196,Mi=37492,Ti=37496,Wr=37808,zi=37809,er=37810,Nr=37811,Ds=37812,ro=37813,pi=37814,Ir=37815,to=37816,os=37817,ce=37818,ge=37819,_e=37820,Le=37821,qe=36492,yt=2200,St=2201,wn=2202,xn=2300,Nt=2301,an=2302,Pn=2400,xi=2401,Ui=2402,Xi=2500,fr=2501,ur=0,Vi=1,us=2,Yr=3e3,Ar=3001,Ts=3200,po=3201,Vs=0,qr=1,Ps="",Ls="srgb",bo="srgb-linear",Va=0,Qs=7680,il=7681,Ll=7682,Ia=7683,Ra=34055,Ba=34056,Qa=5386,rl=512,ec=513,Dl=514,qs=515,Oo=516,id=517,rd=518,rh=519,Lc=35044,sd=35048,sh=35040,Lf=35045,no=35049,Df=35041,Pf=35046,oh=35050,Of=35042,Ff="100",ah="300 es",du=1035;class ia{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const c=a.indexOf(n);c!==-1&&a.splice(c,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const a=r.slice(0);for(let c=0,p=a.length;c<p;c++)a[c].call(this,e);e.target=null}}}const _o=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let od=1234567;const sl=Math.PI/180,Dc=180/Math.PI;function wo(){const x=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(_o[x&255]+_o[x>>8&255]+_o[x>>16&255]+_o[x>>24&255]+"-"+_o[e&255]+_o[e>>8&255]+"-"+_o[e>>16&15|64]+_o[e>>24&255]+"-"+_o[n&63|128]+_o[n>>8&255]+"-"+_o[n>>16&255]+_o[n>>24&255]+_o[r&255]+_o[r>>8&255]+_o[r>>16&255]+_o[r>>24&255]).toLowerCase()}function Os(x,e,n){return Math.max(e,Math.min(n,x))}function Js(x,e){return(x%e+e)%e}function fu(x,e,n,r,a){return r+(x-e)*(a-r)/(n-e)}function ol(x,e,n){return x!==e?(n-x)/(e-x):0}function ja(x,e,n){return(1-n)*x+n*e}function ad(x,e,n,r){return ja(x,e,1-Math.exp(-n*r))}function ld(x,e=1){return e-Math.abs(Js(x,e*2)-e)}function cd(x,e,n){return x<=e?0:x>=n?1:(x=(x-e)/(n-e),x*x*(3-2*x))}function Nf(x,e,n){return x<=e?0:x>=n?1:(x=(x-e)/(n-e),x*x*x*(x*(x*6-15)+10))}function tc(x,e){return x+Math.floor(Math.random()*(e-x+1))}function kf(x,e){return x+Math.random()*(e-x)}function Uf(x){return x*(.5-Math.random())}function ud(x){x!==void 0&&(od=x);let e=od+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function hd(x){return x*sl}function Gf(x){return x*Dc}function lh(x){return(x&x-1)===0&&x!==0}function dd(x){return Math.pow(2,Math.ceil(Math.log(x)/Math.LN2))}function pu(x){return Math.pow(2,Math.floor(Math.log(x)/Math.LN2))}function fd(x,e,n,r,a){const c=Math.cos,p=Math.sin,A=c(n/2),N=p(n/2),H=c((e+r)/2),Z=p((e+r)/2),ne=c((e-r)/2),re=p((e-r)/2),le=c((r-e)/2),me=p((r-e)/2);switch(a){case"XYX":x.set(A*Z,N*ne,N*re,A*H);break;case"YZY":x.set(N*re,A*Z,N*ne,A*H);break;case"ZXZ":x.set(N*ne,N*re,A*Z,A*H);break;case"XZX":x.set(A*Z,N*me,N*le,A*H);break;case"YXY":x.set(N*le,A*Z,N*me,A*H);break;case"ZYZ":x.set(N*me,N*le,A*Z,A*H);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function La(x,e){switch(e.constructor){case Float32Array:return x;case Uint16Array:return x/65535;case Uint8Array:return x/255;case Int16Array:return Math.max(x/32767,-1);case Int8Array:return Math.max(x/127,-1);default:throw new Error("Invalid component type.")}}function Ss(x,e){switch(e.constructor){case Float32Array:return x;case Uint16Array:return Math.round(x*65535);case Uint8Array:return Math.round(x*255);case Int16Array:return Math.round(x*32767);case Int8Array:return Math.round(x*127);default:throw new Error("Invalid component type.")}}var Hf=Object.freeze({__proto__:null,DEG2RAD:sl,RAD2DEG:Dc,generateUUID:wo,clamp:Os,euclideanModulo:Js,mapLinear:fu,inverseLerp:ol,lerp:ja,damp:ad,pingpong:ld,smoothstep:cd,smootherstep:Nf,randInt:tc,randFloat:kf,randFloatSpread:Uf,seededRandom:ud,degToRad:hd,radToDeg:Gf,isPowerOfTwo:lh,ceilPowerOfTwo:dd,floorPowerOfTwo:pu,setQuaternionFromProperEuler:fd,normalize:Ss,denormalize:La});class On{constructor(e=0,n=0){On.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6],this.y=a[1]*n+a[4]*r+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),a=Math.sin(n),c=this.x-e.x,p=this.y-e.y;return this.x=c*r-p*a+e.x,this.y=c*a+p*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Fo{constructor(){Fo.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,r,a,c,p,A,N,H){const Z=this.elements;return Z[0]=e,Z[1]=a,Z[2]=A,Z[3]=n,Z[4]=c,Z[5]=N,Z[6]=r,Z[7]=p,Z[8]=H,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,a=n.elements,c=this.elements,p=r[0],A=r[3],N=r[6],H=r[1],Z=r[4],ne=r[7],re=r[2],le=r[5],me=r[8],pe=a[0],de=a[3],Ce=a[6],Fe=a[1],Re=a[4],De=a[7],Ve=a[2],ct=a[5],bt=a[8];return c[0]=p*pe+A*Fe+N*Ve,c[3]=p*de+A*Re+N*ct,c[6]=p*Ce+A*De+N*bt,c[1]=H*pe+Z*Fe+ne*Ve,c[4]=H*de+Z*Re+ne*ct,c[7]=H*Ce+Z*De+ne*bt,c[2]=re*pe+le*Fe+me*Ve,c[5]=re*de+le*Re+me*ct,c[8]=re*Ce+le*De+me*bt,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],a=e[2],c=e[3],p=e[4],A=e[5],N=e[6],H=e[7],Z=e[8];return n*p*Z-n*A*H-r*c*Z+r*A*N+a*c*H-a*p*N}invert(){const e=this.elements,n=e[0],r=e[1],a=e[2],c=e[3],p=e[4],A=e[5],N=e[6],H=e[7],Z=e[8],ne=Z*p-A*H,re=A*N-Z*c,le=H*c-p*N,me=n*ne+r*re+a*le;if(me===0)return this.set(0,0,0,0,0,0,0,0,0);const pe=1/me;return e[0]=ne*pe,e[1]=(a*H-Z*r)*pe,e[2]=(A*r-a*p)*pe,e[3]=re*pe,e[4]=(Z*n-a*N)*pe,e[5]=(a*c-A*n)*pe,e[6]=le*pe,e[7]=(r*N-H*n)*pe,e[8]=(p*n-r*c)*pe,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,a,c,p,A){const N=Math.cos(c),H=Math.sin(c);return this.set(r*N,r*H,-r*(N*p+H*A)+p+e,-a*H,a*N,-a*(-H*p+N*A)+A+n,0,0,1),this}scale(e,n){return this.premultiply(ch.makeScale(e,n)),this}rotate(e){return this.premultiply(ch.makeRotation(-e)),this}translate(e,n){return this.premultiply(ch.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let a=0;a<9;a++)if(n[a]!==r[a])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ch=new Fo;function pd(x){for(let e=x.length-1;e>=0;--e)if(x[e]>=65535)return!0;return!1}const zf={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function nc(x,e){return new zf[x](e)}function Pl(x){return document.createElementNS("http://www.w3.org/1999/xhtml",x)}function Ol(x){return x<.04045?x*.0773993808:Math.pow(x*.9478672986+.0521327014,2.4)}function mu(x){return x<.0031308?x*12.92:1.055*Math.pow(x,.41666)-.055}const uh={[Ls]:{[bo]:Ol},[bo]:{[Ls]:mu}},Io={legacyMode:!0,get workingColorSpace(){return bo},set workingColorSpace(x){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(x,e,n){if(this.legacyMode||e===n||!e||!n)return x;if(uh[e]&&uh[e][n]!==void 0){const r=uh[e][n];return x.r=r(x.r),x.g=r(x.g),x.b=r(x.b),x}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(x,e){return this.convert(x,this.workingColorSpace,e)},toWorkingColorSpace:function(x,e){return this.convert(x,e,this.workingColorSpace)}},Pc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},so={r:0,g:0,b:0},ya={h:0,s:0,l:0},Wa={h:0,s:0,l:0};function hh(x,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?x+(e-x)*6*n:n<.5?e:n<.6666666666666666?x+(e-x)*6*(.6666666666666666-n):x}function gu(x,e){return e.r=x.r,e.g=x.g,e.b=x.b,e}class Si{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ls){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Io.toWorkingColorSpace(this,n),this}setRGB(e,n,r,a=Io.workingColorSpace){return this.r=e,this.g=n,this.b=r,Io.toWorkingColorSpace(this,a),this}setHSL(e,n,r,a=Io.workingColorSpace){if(e=Js(e,1),n=Os(n,0,1),r=Os(r,0,1),n===0)this.r=this.g=this.b=r;else{const c=r<=.5?r*(1+n):r+n-r*n,p=2*r-c;this.r=hh(p,c,e+.3333333333333333),this.g=hh(p,c,e),this.b=hh(p,c,e-.3333333333333333)}return Io.toWorkingColorSpace(this,a),this}setStyle(e,n=Ls){function r(c){c!==void 0&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let c;const p=a[1],A=a[2];switch(p){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,Io.toWorkingColorSpace(this,n),r(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,Io.toWorkingColorSpace(this,n),r(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(A)){const N=parseFloat(c[1])/360,H=parseFloat(c[2])/100,Z=parseFloat(c[3])/100;return r(c[4]),this.setHSL(N,H,Z,n)}break}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const c=a[1],p=c.length;if(p===3)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,Io.toWorkingColorSpace(this,n),this;if(p===6)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,Io.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=Ls){const r=Pc[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ol(e.r),this.g=Ol(e.g),this.b=Ol(e.b),this}copyLinearToSRGB(e){return this.r=mu(e.r),this.g=mu(e.g),this.b=mu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ls){return Io.fromWorkingColorSpace(gu(this,so),e),Os(so.r*255,0,255)<<16^Os(so.g*255,0,255)<<8^Os(so.b*255,0,255)<<0}getHexString(e=Ls){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Io.workingColorSpace){Io.fromWorkingColorSpace(gu(this,so),n);const r=so.r,a=so.g,c=so.b,p=Math.max(r,a,c),A=Math.min(r,a,c);let N,H;const Z=(A+p)/2;if(A===p)N=0,H=0;else{const ne=p-A;switch(H=Z<=.5?ne/(p+A):ne/(2-p-A),p){case r:N=(a-c)/ne+(a<c?6:0);break;case a:N=(c-r)/ne+2;break;case c:N=(r-a)/ne+4;break}N/=6}return e.h=N,e.s=H,e.l=Z,e}getRGB(e,n=Io.workingColorSpace){return Io.fromWorkingColorSpace(gu(this,so),n),e.r=so.r,e.g=so.g,e.b=so.b,e}getStyle(e=Ls){return Io.fromWorkingColorSpace(gu(this,so),e),e!==Ls?`color(${e} ${so.r} ${so.g} ${so.b})`:`rgb(${so.r*255|0},${so.g*255|0},${so.b*255|0})`}offsetHSL(e,n,r){return this.getHSL(ya),ya.h+=e,ya.s+=n,ya.l+=r,this.setHSL(ya.h,ya.s,ya.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ya),e.getHSL(Wa);const r=ja(ya.h,Wa.h,n),a=ja(ya.s,Wa.s,n),c=ja(ya.l,Wa.l,n);return this.setHSL(r,a,c),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Si.NAMES=Pc;let ic;class dh{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ic===void 0&&(ic=Pl("canvas")),ic.width=e.width,ic.height=e.height;const r=ic.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=ic}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Pl("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const a=r.getImageData(0,0,e.width,e.height),c=a.data;for(let p=0;p<c.length;p++)c[p]=Ol(c[p]/255)*255;return r.putImageData(a,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Ol(n[r]/255)*255):n[r]=Ol(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Da{constructor(e=null){this.isSource=!0,this.uuid=wo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},a=this.data;if(a!==null){let c;if(Array.isArray(a)){c=[];for(let p=0,A=a.length;p<A;p++)a[p].isDataTexture?c.push(rc(a[p].image)):c.push(rc(a[p]))}else c=rc(a);r.url=c}return n||(e.images[this.uuid]=r),r}}function rc(x){return typeof HTMLImageElement<"u"&&x instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&x instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&x instanceof ImageBitmap?dh.getDataURL(x):x.data?{data:Array.from(x.data),width:x.width,height:x.height,type:x.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let fh=0;class js extends ia{constructor(e=js.DEFAULT_IMAGE,n=js.DEFAULT_MAPPING,r=Oe,a=Oe,c=Ke,p=$t,A=Zi,N=jt,H=js.DEFAULT_ANISOTROPY,Z=Yr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fh++}),this.uuid=wo(),this.name="",this.source=new Da(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=a,this.magFilter=c,this.minFilter=p,this.anisotropy=H,this.format=A,this.internalFormat=null,this.type=N,this.offset=new On(0,0),this.repeat=new On(1,1),this.center=new On(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Z,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Pe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Te:e.x=e.x-Math.floor(e.x);break;case Oe:e.x=e.x<0?0:1;break;case Ze:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Te:e.y=e.y-Math.floor(e.y);break;case Oe:e.y=e.y<0?0:1;break;case Ze:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}js.DEFAULT_IMAGE=null,js.DEFAULT_MAPPING=Pe,js.DEFAULT_ANISOTROPY=1;class Zr{constructor(e=0,n=0,r=0,a=1){Zr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,a){return this.x=e,this.y=n,this.z=r,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,a=this.z,c=this.w,p=e.elements;return this.x=p[0]*n+p[4]*r+p[8]*a+p[12]*c,this.y=p[1]*n+p[5]*r+p[9]*a+p[13]*c,this.z=p[2]*n+p[6]*r+p[10]*a+p[14]*c,this.w=p[3]*n+p[7]*r+p[11]*a+p[15]*c,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,a,c;const N=e.elements,H=N[0],Z=N[4],ne=N[8],re=N[1],le=N[5],me=N[9],pe=N[2],de=N[6],Ce=N[10];if(Math.abs(Z-re)<.01&&Math.abs(ne-pe)<.01&&Math.abs(me-de)<.01){if(Math.abs(Z+re)<.1&&Math.abs(ne+pe)<.1&&Math.abs(me+de)<.1&&Math.abs(H+le+Ce-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const Re=(H+1)/2,De=(le+1)/2,Ve=(Ce+1)/2,ct=(Z+re)/4,bt=(ne+pe)/4,Ne=(me+de)/4;return Re>De&&Re>Ve?Re<.01?(r=0,a=.707106781,c=.707106781):(r=Math.sqrt(Re),a=ct/r,c=bt/r):De>Ve?De<.01?(r=.707106781,a=0,c=.707106781):(a=Math.sqrt(De),r=ct/a,c=Ne/a):Ve<.01?(r=.707106781,a=.707106781,c=0):(c=Math.sqrt(Ve),r=bt/c,a=Ne/c),this.set(r,a,c,n),this}let Fe=Math.sqrt((de-me)*(de-me)+(ne-pe)*(ne-pe)+(re-Z)*(re-Z));return Math.abs(Fe)<.001&&(Fe=1),this.x=(de-me)/Fe,this.y=(ne-pe)/Fe,this.z=(re-Z)/Fe,this.w=Math.acos((H+le+Ce-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class No extends ia{constructor(e=1,n=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Zr(0,0,e,n),this.scissorTest=!1,this.viewport=new Zr(0,0,e,n);const a={width:e,height:n,depth:1};this.texture=new js(a,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ke,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Da(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class al extends js{constructor(e=null,n=1,r=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:a},this.magFilter=ae,this.minFilter=ae,this.wrapR=Oe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Yo extends No{constructor(e=1,n=1,r=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new al(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Fl extends js{constructor(e=null,n=1,r=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:a},this.magFilter=ae,this.minFilter=ae,this.wrapR=Oe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mo extends No{constructor(e=1,n=1,r=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Fl(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class ph extends No{constructor(e=1,n=1,r=1,a={}){super(e,n,a),this.isWebGLMultipleRenderTargets=!0;const c=this.texture;this.texture=[];for(let p=0;p<r;p++)this.texture[p]=c.clone(),this.texture[p].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let a=0,c=this.texture.length;a<c;a++)this.texture[a].image.width=e,this.texture[a].image.height=n,this.texture[a].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Co{constructor(e=0,n=0,r=0,a=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=a}static slerpFlat(e,n,r,a,c,p,A){let N=r[a+0],H=r[a+1],Z=r[a+2],ne=r[a+3];const re=c[p+0],le=c[p+1],me=c[p+2],pe=c[p+3];if(A===0){e[n+0]=N,e[n+1]=H,e[n+2]=Z,e[n+3]=ne;return}if(A===1){e[n+0]=re,e[n+1]=le,e[n+2]=me,e[n+3]=pe;return}if(ne!==pe||N!==re||H!==le||Z!==me){let de=1-A;const Ce=N*re+H*le+Z*me+ne*pe,Fe=Ce>=0?1:-1,Re=1-Ce*Ce;if(Re>Number.EPSILON){const Ve=Math.sqrt(Re),ct=Math.atan2(Ve,Ce*Fe);de=Math.sin(de*ct)/Ve,A=Math.sin(A*ct)/Ve}const De=A*Fe;if(N=N*de+re*De,H=H*de+le*De,Z=Z*de+me*De,ne=ne*de+pe*De,de===1-A){const Ve=1/Math.sqrt(N*N+H*H+Z*Z+ne*ne);N*=Ve,H*=Ve,Z*=Ve,ne*=Ve}}e[n]=N,e[n+1]=H,e[n+2]=Z,e[n+3]=ne}static multiplyQuaternionsFlat(e,n,r,a,c,p){const A=r[a],N=r[a+1],H=r[a+2],Z=r[a+3],ne=c[p],re=c[p+1],le=c[p+2],me=c[p+3];return e[n]=A*me+Z*ne+N*le-H*re,e[n+1]=N*me+Z*re+H*ne-A*le,e[n+2]=H*me+Z*le+A*re-N*ne,e[n+3]=Z*me-A*ne-N*re-H*le,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,a){return this._x=e,this._y=n,this._z=r,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,a=e._y,c=e._z,p=e._order,A=Math.cos,N=Math.sin,H=A(r/2),Z=A(a/2),ne=A(c/2),re=N(r/2),le=N(a/2),me=N(c/2);switch(p){case"XYZ":this._x=re*Z*ne+H*le*me,this._y=H*le*ne-re*Z*me,this._z=H*Z*me+re*le*ne,this._w=H*Z*ne-re*le*me;break;case"YXZ":this._x=re*Z*ne+H*le*me,this._y=H*le*ne-re*Z*me,this._z=H*Z*me-re*le*ne,this._w=H*Z*ne+re*le*me;break;case"ZXY":this._x=re*Z*ne-H*le*me,this._y=H*le*ne+re*Z*me,this._z=H*Z*me+re*le*ne,this._w=H*Z*ne-re*le*me;break;case"ZYX":this._x=re*Z*ne-H*le*me,this._y=H*le*ne+re*Z*me,this._z=H*Z*me-re*le*ne,this._w=H*Z*ne+re*le*me;break;case"YZX":this._x=re*Z*ne+H*le*me,this._y=H*le*ne+re*Z*me,this._z=H*Z*me-re*le*ne,this._w=H*Z*ne-re*le*me;break;case"XZY":this._x=re*Z*ne-H*le*me,this._y=H*le*ne-re*Z*me,this._z=H*Z*me+re*le*ne,this._w=H*Z*ne+re*le*me;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+p)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,a=Math.sin(r);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],a=n[4],c=n[8],p=n[1],A=n[5],N=n[9],H=n[2],Z=n[6],ne=n[10],re=r+A+ne;if(re>0){const le=.5/Math.sqrt(re+1);this._w=.25/le,this._x=(Z-N)*le,this._y=(c-H)*le,this._z=(p-a)*le}else if(r>A&&r>ne){const le=2*Math.sqrt(1+r-A-ne);this._w=(Z-N)/le,this._x=.25*le,this._y=(a+p)/le,this._z=(c+H)/le}else if(A>ne){const le=2*Math.sqrt(1+A-r-ne);this._w=(c-H)/le,this._x=(a+p)/le,this._y=.25*le,this._z=(N+Z)/le}else{const le=2*Math.sqrt(1+ne-r-A);this._w=(p-a)/le,this._x=(c+H)/le,this._y=(N+Z)/le,this._z=.25*le}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Os(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const a=Math.min(1,n/r);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,a=e._y,c=e._z,p=e._w,A=n._x,N=n._y,H=n._z,Z=n._w;return this._x=r*Z+p*A+a*H-c*N,this._y=a*Z+p*N+c*A-r*H,this._z=c*Z+p*H+r*N-a*A,this._w=p*Z-r*A-a*N-c*H,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,a=this._y,c=this._z,p=this._w;let A=p*e._w+r*e._x+a*e._y+c*e._z;if(A<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,A=-A):this.copy(e),A>=1)return this._w=p,this._x=r,this._y=a,this._z=c,this;const N=1-A*A;if(N<=Number.EPSILON){const le=1-n;return this._w=le*p+n*this._w,this._x=le*r+n*this._x,this._y=le*a+n*this._y,this._z=le*c+n*this._z,this.normalize(),this._onChangeCallback(),this}const H=Math.sqrt(N),Z=Math.atan2(H,A),ne=Math.sin((1-n)*Z)/H,re=Math.sin(n*Z)/H;return this._w=p*ne+this._w*re,this._x=r*ne+this._x*re,this._y=a*ne+this._y*re,this._z=c*ne+this._z*re,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),a=2*Math.PI*Math.random(),c=2*Math.PI*Math.random();return this.set(n*Math.cos(a),r*Math.sin(c),r*Math.cos(c),n*Math.sin(a))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class nt{constructor(e=0,n=0,r=0){nt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(sc.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(sc.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,a=this.z,c=e.elements;return this.x=c[0]*n+c[3]*r+c[6]*a,this.y=c[1]*n+c[4]*r+c[7]*a,this.z=c[2]*n+c[5]*r+c[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,a=this.z,c=e.elements,p=1/(c[3]*n+c[7]*r+c[11]*a+c[15]);return this.x=(c[0]*n+c[4]*r+c[8]*a+c[12])*p,this.y=(c[1]*n+c[5]*r+c[9]*a+c[13])*p,this.z=(c[2]*n+c[6]*r+c[10]*a+c[14])*p,this}applyQuaternion(e){const n=this.x,r=this.y,a=this.z,c=e.x,p=e.y,A=e.z,N=e.w,H=N*n+p*a-A*r,Z=N*r+A*n-c*a,ne=N*a+c*r-p*n,re=-c*n-p*r-A*a;return this.x=H*N+re*-c+Z*-A-ne*-p,this.y=Z*N+re*-p+ne*-c-H*-A,this.z=ne*N+re*-A+H*-p-Z*-c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,a=this.z,c=e.elements;return this.x=c[0]*n+c[4]*r+c[8]*a,this.y=c[1]*n+c[5]*r+c[9]*a,this.z=c[2]*n+c[6]*r+c[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,a=e.y,c=e.z,p=n.x,A=n.y,N=n.z;return this.x=a*N-c*A,this.y=c*p-r*N,this.z=r*A-a*p,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Au.copy(this).projectOnVector(e),this.sub(Au)}reflect(e){return this.sub(Au.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Os(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,a=this.z-e.z;return n*n+r*r+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const a=Math.sin(n)*e;return this.x=a*Math.sin(r),this.y=Math.cos(n)*e,this.z=a*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=a,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Au=new nt,sc=new Co;class xa{constructor(e=new nt(1/0,1/0,1/0),n=new nt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,r=1/0,a=1/0,c=-1/0,p=-1/0,A=-1/0;for(let N=0,H=e.length;N<H;N+=3){const Z=e[N],ne=e[N+1],re=e[N+2];Z<n&&(n=Z),ne<r&&(r=ne),re<a&&(a=re),Z>c&&(c=Z),ne>p&&(p=ne),re>A&&(A=re)}return this.min.set(n,r,a),this.max.set(c,p,A),this}setFromBufferAttribute(e){let n=1/0,r=1/0,a=1/0,c=-1/0,p=-1/0,A=-1/0;for(let N=0,H=e.count;N<H;N++){const Z=e.getX(N),ne=e.getY(N),re=e.getZ(N);Z<n&&(n=Z),ne<r&&(r=ne),re<a&&(a=re),Z>c&&(c=Z),ne>p&&(p=ne),re>A&&(A=re)}return this.min.set(n,r,a),this.max.set(c,p,A),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Nl.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(n&&r.attributes!=null&&r.attributes.position!==void 0){const c=r.attributes.position;for(let p=0,A=c.count;p<A;p++)Nl.fromBufferAttribute(c,p).applyMatrix4(e.matrixWorld),this.expandByPoint(Nl)}else r.boundingBox===null&&r.computeBoundingBox(),oc.copy(r.boundingBox),oc.applyMatrix4(e.matrixWorld),this.union(oc);const a=e.children;for(let c=0,p=a.length;c<p;c++)this.expandByObject(a[c],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Nl),Nl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(lc),ma.subVectors(this.max,lc),ac.subVectors(e.a,lc),Xa.subVectors(e.b,lc),ra.subVectors(e.c,lc),Ea.subVectors(Xa,ac),ll.subVectors(ra,Xa),kl.subVectors(ac,ra);let n=[0,-Ea.z,Ea.y,0,-ll.z,ll.y,0,-kl.z,kl.y,Ea.z,0,-Ea.x,ll.z,0,-ll.x,kl.z,0,-kl.x,-Ea.y,Ea.x,0,-ll.y,ll.x,0,-kl.y,kl.x,0];return!ko(n,ac,Xa,ra,ma)||(n=[1,0,0,0,1,0,0,0,1],!ko(n,ac,Xa,ra,ma))?!1:(Oc.crossVectors(Ea,ll),n=[Oc.x,Oc.y,Oc.z],ko(n,ac,Xa,ra,ma))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Nl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Nl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ka[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ka[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ka[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ka[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ka[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ka[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ka[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ka[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ka),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ka=[new nt,new nt,new nt,new nt,new nt,new nt,new nt,new nt],Nl=new nt,oc=new xa,ac=new nt,Xa=new nt,ra=new nt,Ea=new nt,ll=new nt,kl=new nt,lc=new nt,ma=new nt,Oc=new nt,xs=new nt;function ko(x,e,n,r,a){for(let c=0,p=x.length-3;c<=p;c+=3){xs.fromArray(x,c);const A=a.x*Math.abs(xs.x)+a.y*Math.abs(xs.y)+a.z*Math.abs(xs.z),N=e.dot(xs),H=n.dot(xs),Z=r.dot(xs);if(Math.max(-Math.max(N,H,Z),Math.min(N,H,Z))>A)return!1}return!0}const md=new xa,cl=new nt,mh=new nt;class qo{constructor(e=new nt,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):md.setFromPoints(e).getCenter(r);let a=0;for(let c=0,p=e.length;c<p;c++)a=Math.max(a,r.distanceToSquared(e[c]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;cl.subVectors(e,this.center);const n=cl.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),a=(r-this.radius)*.5;this.center.addScaledVector(cl,a/r),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(mh.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(cl.copy(e.center).add(mh)),this.expandByPoint(cl.copy(e.center).sub(mh))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const sa=new nt,gh=new nt,Ci=new nt,mr=new nt,$r=new nt,oo=new nt,as=new nt;class Jo{constructor(e=new nt,n=new nt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,sa)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=sa.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(sa.copy(this.direction).multiplyScalar(n).add(this.origin),sa.distanceToSquared(e))}distanceSqToSegment(e,n,r,a){gh.copy(e).add(n).multiplyScalar(.5),Ci.copy(n).sub(e).normalize(),mr.copy(this.origin).sub(gh);const c=e.distanceTo(n)*.5,p=-this.direction.dot(Ci),A=mr.dot(this.direction),N=-mr.dot(Ci),H=mr.lengthSq(),Z=Math.abs(1-p*p);let ne,re,le,me;if(Z>0)if(ne=p*N-A,re=p*A-N,me=c*Z,ne>=0)if(re>=-me)if(re<=me){const pe=1/Z;ne*=pe,re*=pe,le=ne*(ne+p*re+2*A)+re*(p*ne+re+2*N)+H}else re=c,ne=Math.max(0,-(p*re+A)),le=-ne*ne+re*(re+2*N)+H;else re=-c,ne=Math.max(0,-(p*re+A)),le=-ne*ne+re*(re+2*N)+H;else re<=-me?(ne=Math.max(0,-(-p*c+A)),re=ne>0?-c:Math.min(Math.max(-c,-N),c),le=-ne*ne+re*(re+2*N)+H):re<=me?(ne=0,re=Math.min(Math.max(-c,-N),c),le=re*(re+2*N)+H):(ne=Math.max(0,-(p*c+A)),re=ne>0?c:Math.min(Math.max(-c,-N),c),le=-ne*ne+re*(re+2*N)+H);else re=p>0?-c:c,ne=Math.max(0,-(p*re+A)),le=-ne*ne+re*(re+2*N)+H;return r&&r.copy(this.direction).multiplyScalar(ne).add(this.origin),a&&a.copy(Ci).multiplyScalar(re).add(gh),le}intersectSphere(e,n){sa.subVectors(e.center,this.origin);const r=sa.dot(this.direction),a=sa.dot(sa)-r*r,c=e.radius*e.radius;if(a>c)return null;const p=Math.sqrt(c-a),A=r-p,N=r+p;return A<0&&N<0?null:A<0?this.at(N,n):this.at(A,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,a,c,p,A,N;const H=1/this.direction.x,Z=1/this.direction.y,ne=1/this.direction.z,re=this.origin;return H>=0?(r=(e.min.x-re.x)*H,a=(e.max.x-re.x)*H):(r=(e.max.x-re.x)*H,a=(e.min.x-re.x)*H),Z>=0?(c=(e.min.y-re.y)*Z,p=(e.max.y-re.y)*Z):(c=(e.max.y-re.y)*Z,p=(e.min.y-re.y)*Z),r>p||c>a||((c>r||isNaN(r))&&(r=c),(p<a||isNaN(a))&&(a=p),ne>=0?(A=(e.min.z-re.z)*ne,N=(e.max.z-re.z)*ne):(A=(e.max.z-re.z)*ne,N=(e.min.z-re.z)*ne),r>N||A>a)||((A>r||r!==r)&&(r=A),(N<a||a!==a)&&(a=N),a<0)?null:this.at(r>=0?r:a,n)}intersectsBox(e){return this.intersectBox(e,sa)!==null}intersectTriangle(e,n,r,a,c){$r.subVectors(n,e),oo.subVectors(r,e),as.crossVectors($r,oo);let p=this.direction.dot(as),A;if(p>0){if(a)return null;A=1}else if(p<0)A=-1,p=-p;else return null;mr.subVectors(this.origin,e);const N=A*this.direction.dot(oo.crossVectors(mr,oo));if(N<0)return null;const H=A*this.direction.dot($r.cross(mr));if(H<0||N+H>p)return null;const Z=-A*mr.dot(as);return Z<0?null:this.at(Z/p,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Gi{constructor(){Gi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,r,a,c,p,A,N,H,Z,ne,re,le,me,pe,de){const Ce=this.elements;return Ce[0]=e,Ce[4]=n,Ce[8]=r,Ce[12]=a,Ce[1]=c,Ce[5]=p,Ce[9]=A,Ce[13]=N,Ce[2]=H,Ce[6]=Z,Ce[10]=ne,Ce[14]=re,Ce[3]=le,Ce[7]=me,Ce[11]=pe,Ce[15]=de,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Gi().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,a=1/oa.setFromMatrixColumn(e,0).length(),c=1/oa.setFromMatrixColumn(e,1).length(),p=1/oa.setFromMatrixColumn(e,2).length();return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n[3]=0,n[4]=r[4]*c,n[5]=r[5]*c,n[6]=r[6]*c,n[7]=0,n[8]=r[8]*p,n[9]=r[9]*p,n[10]=r[10]*p,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,a=e.y,c=e.z,p=Math.cos(r),A=Math.sin(r),N=Math.cos(a),H=Math.sin(a),Z=Math.cos(c),ne=Math.sin(c);if(e.order==="XYZ"){const re=p*Z,le=p*ne,me=A*Z,pe=A*ne;n[0]=N*Z,n[4]=-N*ne,n[8]=H,n[1]=le+me*H,n[5]=re-pe*H,n[9]=-A*N,n[2]=pe-re*H,n[6]=me+le*H,n[10]=p*N}else if(e.order==="YXZ"){const re=N*Z,le=N*ne,me=H*Z,pe=H*ne;n[0]=re+pe*A,n[4]=me*A-le,n[8]=p*H,n[1]=p*ne,n[5]=p*Z,n[9]=-A,n[2]=le*A-me,n[6]=pe+re*A,n[10]=p*N}else if(e.order==="ZXY"){const re=N*Z,le=N*ne,me=H*Z,pe=H*ne;n[0]=re-pe*A,n[4]=-p*ne,n[8]=me+le*A,n[1]=le+me*A,n[5]=p*Z,n[9]=pe-re*A,n[2]=-p*H,n[6]=A,n[10]=p*N}else if(e.order==="ZYX"){const re=p*Z,le=p*ne,me=A*Z,pe=A*ne;n[0]=N*Z,n[4]=me*H-le,n[8]=re*H+pe,n[1]=N*ne,n[5]=pe*H+re,n[9]=le*H-me,n[2]=-H,n[6]=A*N,n[10]=p*N}else if(e.order==="YZX"){const re=p*N,le=p*H,me=A*N,pe=A*H;n[0]=N*Z,n[4]=pe-re*ne,n[8]=me*ne+le,n[1]=ne,n[5]=p*Z,n[9]=-A*Z,n[2]=-H*Z,n[6]=le*ne+me,n[10]=re-pe*ne}else if(e.order==="XZY"){const re=p*N,le=p*H,me=A*N,pe=A*H;n[0]=N*Z,n[4]=-ne,n[8]=H*Z,n[1]=re*ne+pe,n[5]=p*Z,n[9]=le*ne-me,n[2]=me*ne-le,n[6]=A*Z,n[10]=pe*ne+re}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Fc,e,cc)}lookAt(e,n,r){const a=this.elements;return Er.subVectors(e,n),Er.lengthSq()===0&&(Er.z=1),Er.normalize(),Uo.crossVectors(r,Er),Uo.lengthSq()===0&&(Math.abs(r.z)===1?Er.x+=1e-4:Er.z+=1e-4,Er.normalize(),Uo.crossVectors(r,Er)),Uo.normalize(),Go.crossVectors(Er,Uo),a[0]=Uo.x,a[4]=Go.x,a[8]=Er.x,a[1]=Uo.y,a[5]=Go.y,a[9]=Er.y,a[2]=Uo.z,a[6]=Go.z,a[10]=Er.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,a=n.elements,c=this.elements,p=r[0],A=r[4],N=r[8],H=r[12],Z=r[1],ne=r[5],re=r[9],le=r[13],me=r[2],pe=r[6],de=r[10],Ce=r[14],Fe=r[3],Re=r[7],De=r[11],Ve=r[15],ct=a[0],bt=a[4],Ne=a[8],dt=a[12],vt=a[1],Ut=a[5],hn=a[9],Kt=a[13],Dt=a[2],sn=a[6],kn=a[10],Zn=a[14],Ln=a[3],ui=a[7],si=a[11],Qi=a[15];return c[0]=p*ct+A*vt+N*Dt+H*Ln,c[4]=p*bt+A*Ut+N*sn+H*ui,c[8]=p*Ne+A*hn+N*kn+H*si,c[12]=p*dt+A*Kt+N*Zn+H*Qi,c[1]=Z*ct+ne*vt+re*Dt+le*Ln,c[5]=Z*bt+ne*Ut+re*sn+le*ui,c[9]=Z*Ne+ne*hn+re*kn+le*si,c[13]=Z*dt+ne*Kt+re*Zn+le*Qi,c[2]=me*ct+pe*vt+de*Dt+Ce*Ln,c[6]=me*bt+pe*Ut+de*sn+Ce*ui,c[10]=me*Ne+pe*hn+de*kn+Ce*si,c[14]=me*dt+pe*Kt+de*Zn+Ce*Qi,c[3]=Fe*ct+Re*vt+De*Dt+Ve*Ln,c[7]=Fe*bt+Re*Ut+De*sn+Ve*ui,c[11]=Fe*Ne+Re*hn+De*kn+Ve*si,c[15]=Fe*dt+Re*Kt+De*Zn+Ve*Qi,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],a=e[8],c=e[12],p=e[1],A=e[5],N=e[9],H=e[13],Z=e[2],ne=e[6],re=e[10],le=e[14],me=e[3],pe=e[7],de=e[11],Ce=e[15];return me*(+c*N*ne-a*H*ne-c*A*re+r*H*re+a*A*le-r*N*le)+pe*(+n*N*le-n*H*re+c*p*re-a*p*le+a*H*Z-c*N*Z)+de*(+n*H*ne-n*A*le-c*p*ne+r*p*le+c*A*Z-r*H*Z)+Ce*(-a*A*Z-n*N*ne+n*A*re+a*p*ne-r*p*re+r*N*Z)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=n,a[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],a=e[2],c=e[3],p=e[4],A=e[5],N=e[6],H=e[7],Z=e[8],ne=e[9],re=e[10],le=e[11],me=e[12],pe=e[13],de=e[14],Ce=e[15],Fe=ne*de*H-pe*re*H+pe*N*le-A*de*le-ne*N*Ce+A*re*Ce,Re=me*re*H-Z*de*H-me*N*le+p*de*le+Z*N*Ce-p*re*Ce,De=Z*pe*H-me*ne*H+me*A*le-p*pe*le-Z*A*Ce+p*ne*Ce,Ve=me*ne*N-Z*pe*N-me*A*re+p*pe*re+Z*A*de-p*ne*de,ct=n*Fe+r*Re+a*De+c*Ve;if(ct===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const bt=1/ct;return e[0]=Fe*bt,e[1]=(pe*re*c-ne*de*c-pe*a*le+r*de*le+ne*a*Ce-r*re*Ce)*bt,e[2]=(A*de*c-pe*N*c+pe*a*H-r*de*H-A*a*Ce+r*N*Ce)*bt,e[3]=(ne*N*c-A*re*c-ne*a*H+r*re*H+A*a*le-r*N*le)*bt,e[4]=Re*bt,e[5]=(Z*de*c-me*re*c+me*a*le-n*de*le-Z*a*Ce+n*re*Ce)*bt,e[6]=(me*N*c-p*de*c-me*a*H+n*de*H+p*a*Ce-n*N*Ce)*bt,e[7]=(p*re*c-Z*N*c+Z*a*H-n*re*H-p*a*le+n*N*le)*bt,e[8]=De*bt,e[9]=(me*ne*c-Z*pe*c-me*r*le+n*pe*le+Z*r*Ce-n*ne*Ce)*bt,e[10]=(p*pe*c-me*A*c+me*r*H-n*pe*H-p*r*Ce+n*A*Ce)*bt,e[11]=(Z*A*c-p*ne*c-Z*r*H+n*ne*H+p*r*le-n*A*le)*bt,e[12]=Ve*bt,e[13]=(Z*pe*a-me*ne*a+me*r*re-n*pe*re-Z*r*de+n*ne*de)*bt,e[14]=(me*A*a-p*pe*a-me*r*N+n*pe*N+p*r*de-n*A*de)*bt,e[15]=(p*ne*a-Z*A*a+Z*r*N-n*ne*N-p*r*re+n*A*re)*bt,this}scale(e){const n=this.elements,r=e.x,a=e.y,c=e.z;return n[0]*=r,n[4]*=a,n[8]*=c,n[1]*=r,n[5]*=a,n[9]*=c,n[2]*=r,n[6]*=a,n[10]*=c,n[3]*=r,n[7]*=a,n[11]*=c,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,a))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),a=Math.sin(n),c=1-r,p=e.x,A=e.y,N=e.z,H=c*p,Z=c*A;return this.set(H*p+r,H*A-a*N,H*N+a*A,0,H*A+a*N,Z*A+r,Z*N-a*p,0,H*N-a*A,Z*N+a*p,c*N*N+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,a,c,p){return this.set(1,r,c,0,e,1,p,0,n,a,1,0,0,0,0,1),this}compose(e,n,r){const a=this.elements,c=n._x,p=n._y,A=n._z,N=n._w,H=c+c,Z=p+p,ne=A+A,re=c*H,le=c*Z,me=c*ne,pe=p*Z,de=p*ne,Ce=A*ne,Fe=N*H,Re=N*Z,De=N*ne,Ve=r.x,ct=r.y,bt=r.z;return a[0]=(1-(pe+Ce))*Ve,a[1]=(le+De)*Ve,a[2]=(me-Re)*Ve,a[3]=0,a[4]=(le-De)*ct,a[5]=(1-(re+Ce))*ct,a[6]=(de+Fe)*ct,a[7]=0,a[8]=(me+Re)*bt,a[9]=(de-Fe)*bt,a[10]=(1-(re+pe))*bt,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,n,r){const a=this.elements;let c=oa.set(a[0],a[1],a[2]).length();const p=oa.set(a[4],a[5],a[6]).length(),A=oa.set(a[8],a[9],a[10]).length();this.determinant()<0&&(c=-c),e.x=a[12],e.y=a[13],e.z=a[14],Vr.copy(this);const H=1/c,Z=1/p,ne=1/A;return Vr.elements[0]*=H,Vr.elements[1]*=H,Vr.elements[2]*=H,Vr.elements[4]*=Z,Vr.elements[5]*=Z,Vr.elements[6]*=Z,Vr.elements[8]*=ne,Vr.elements[9]*=ne,Vr.elements[10]*=ne,n.setFromRotationMatrix(Vr),r.x=c,r.y=p,r.z=A,this}makePerspective(e,n,r,a,c,p){const A=this.elements,N=2*c/(n-e),H=2*c/(r-a),Z=(n+e)/(n-e),ne=(r+a)/(r-a),re=-(p+c)/(p-c),le=-2*p*c/(p-c);return A[0]=N,A[4]=0,A[8]=Z,A[12]=0,A[1]=0,A[5]=H,A[9]=ne,A[13]=0,A[2]=0,A[6]=0,A[10]=re,A[14]=le,A[3]=0,A[7]=0,A[11]=-1,A[15]=0,this}makeOrthographic(e,n,r,a,c,p){const A=this.elements,N=1/(n-e),H=1/(r-a),Z=1/(p-c),ne=(n+e)*N,re=(r+a)*H,le=(p+c)*Z;return A[0]=2*N,A[4]=0,A[8]=0,A[12]=-ne,A[1]=0,A[5]=2*H,A[9]=0,A[13]=-re,A[2]=0,A[6]=0,A[10]=-2*Z,A[14]=-le,A[3]=0,A[7]=0,A[11]=0,A[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let a=0;a<16;a++)if(n[a]!==r[a])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const oa=new nt,Vr=new Gi,Fc=new nt(0,0,0),cc=new nt(1,1,1),Uo=new nt,Go=new nt,Er=new nt,Pa=new Gi,uc=new Co;class Ho{constructor(e=0,n=0,r=0,a=Ho.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,a=this._order){return this._x=e,this._y=n,this._z=r,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const a=e.elements,c=a[0],p=a[4],A=a[8],N=a[1],H=a[5],Z=a[9],ne=a[2],re=a[6],le=a[10];switch(n){case"XYZ":this._y=Math.asin(Os(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(-Z,le),this._z=Math.atan2(-p,c)):(this._x=Math.atan2(re,H),this._z=0);break;case"YXZ":this._x=Math.asin(-Os(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(A,le),this._z=Math.atan2(N,H)):(this._y=Math.atan2(-ne,c),this._z=0);break;case"ZXY":this._x=Math.asin(Os(re,-1,1)),Math.abs(re)<.9999999?(this._y=Math.atan2(-ne,le),this._z=Math.atan2(-p,H)):(this._y=0,this._z=Math.atan2(N,c));break;case"ZYX":this._y=Math.asin(-Os(ne,-1,1)),Math.abs(ne)<.9999999?(this._x=Math.atan2(re,le),this._z=Math.atan2(N,c)):(this._x=0,this._z=Math.atan2(-p,H));break;case"YZX":this._z=Math.asin(Os(N,-1,1)),Math.abs(N)<.9999999?(this._x=Math.atan2(-Z,H),this._y=Math.atan2(-ne,c)):(this._x=0,this._y=Math.atan2(A,le));break;case"XZY":this._z=Math.asin(-Os(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(re,H),this._y=Math.atan2(A,c)):(this._x=Math.atan2(-Z,le),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return Pa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Pa,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return uc.setFromEuler(this),this.setFromQuaternion(uc,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Ho.DefaultOrder="XYZ",Ho.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class ps{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ks=0;const Kr=new nt,ms=new Co,ao=new Gi,Ya=new nt,Ul=new nt,gd=new nt,Ad=new Co,Ah=new nt(1,0,0),vh=new nt(0,1,0),vd=new nt(0,0,1),Vf={type:"added"},yd={type:"removed"};class hs extends ia{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ks++}),this.uuid=wo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hs.DefaultUp.clone();const e=new nt,n=new Ho,r=new Co,a=new nt(1,1,1);function c(){r.setFromEuler(n,!1)}function p(){n.setFromQuaternion(r,void 0,!1)}n._onChange(c),r._onChange(p),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Gi},normalMatrix:{value:new Fo}}),this.matrix=new Gi,this.matrixWorld=new Gi,this.matrixAutoUpdate=hs.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=hs.DefaultMatrixWorldAutoUpdate,this.layers=new ps,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return ms.setFromAxisAngle(e,n),this.quaternion.multiply(ms),this}rotateOnWorldAxis(e,n){return ms.setFromAxisAngle(e,n),this.quaternion.premultiply(ms),this}rotateX(e){return this.rotateOnAxis(Ah,e)}rotateY(e){return this.rotateOnAxis(vh,e)}rotateZ(e){return this.rotateOnAxis(vd,e)}translateOnAxis(e,n){return Kr.copy(e).applyQuaternion(this.quaternion),this.position.add(Kr.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Ah,e)}translateY(e){return this.translateOnAxis(vh,e)}translateZ(e){return this.translateOnAxis(vd,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ao.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Ya.copy(e):Ya.set(e,n,r);const a=this.parent;this.updateWorldMatrix(!0,!1),Ul.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ao.lookAt(Ul,Ya,this.up):ao.lookAt(Ya,Ul,this.up),this.quaternion.setFromRotationMatrix(ao),a&&(ao.extractRotation(a.matrixWorld),ms.setFromRotationMatrix(ao),this.quaternion.premultiply(ms.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Vf)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(yd)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(yd)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ao.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ao.multiply(e.parent.matrixWorld)),e.applyMatrix4(ao),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,a=this.children.length;r<a;r++){const p=this.children[r].getObjectByProperty(e,n);if(p!==void 0)return p}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ul,e,gd),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ul,Ad,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,a=n.length;r<a;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,a=n.length;r<a;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,a=n.length;r<a;r++){const c=n[r];(c.matrixWorldAutoUpdate===!0||e===!0)&&c.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const a=this.children;for(let c=0,p=a.length;c<p;c++){const A=a[c];A.matrixWorldAutoUpdate===!0&&A.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON()));function c(A,N){return A[N.uuid]===void 0&&(A[N.uuid]=N.toJSON(e)),N.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=c(e.geometries,this.geometry);const A=this.geometry.parameters;if(A!==void 0&&A.shapes!==void 0){const N=A.shapes;if(Array.isArray(N))for(let H=0,Z=N.length;H<Z;H++){const ne=N[H];c(e.shapes,ne)}else c(e.shapes,N)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(c(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const A=[];for(let N=0,H=this.material.length;N<H;N++)A.push(c(e.materials,this.material[N]));a.material=A}else a.material=c(e.materials,this.material);if(this.children.length>0){a.children=[];for(let A=0;A<this.children.length;A++)a.children.push(this.children[A].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let A=0;A<this.animations.length;A++){const N=this.animations[A];a.animations.push(c(e.animations,N))}}if(n){const A=p(e.geometries),N=p(e.materials),H=p(e.textures),Z=p(e.images),ne=p(e.shapes),re=p(e.skeletons),le=p(e.animations),me=p(e.nodes);A.length>0&&(r.geometries=A),N.length>0&&(r.materials=N),H.length>0&&(r.textures=H),Z.length>0&&(r.images=Z),ne.length>0&&(r.shapes=ne),re.length>0&&(r.skeletons=re),le.length>0&&(r.animations=le),me.length>0&&(r.nodes=me)}return r.object=a,r;function p(A){const N=[];for(const H in A){const Z=A[H];delete Z.metadata,N.push(Z)}return N}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const a=e.children[r];this.add(a.clone())}return this}}hs.DefaultUp=new nt(0,1,0),hs.DefaultMatrixAutoUpdate=!0,hs.DefaultMatrixWorldAutoUpdate=!0;const ba=new nt,io=new nt,_a=new nt,Oa=new nt,Gl=new nt,vu=new nt,Em=new nt,Qf=new nt,jf=new nt,Wf=new nt;class Fa{constructor(e=new nt,n=new nt,r=new nt){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,a){a.subVectors(r,n),ba.subVectors(e,n),a.cross(ba);const c=a.lengthSq();return c>0?a.multiplyScalar(1/Math.sqrt(c)):a.set(0,0,0)}static getBarycoord(e,n,r,a,c){ba.subVectors(a,n),io.subVectors(r,n),_a.subVectors(e,n);const p=ba.dot(ba),A=ba.dot(io),N=ba.dot(_a),H=io.dot(io),Z=io.dot(_a),ne=p*H-A*A;if(ne===0)return c.set(-2,-1,-1);const re=1/ne,le=(H*N-A*Z)*re,me=(p*Z-A*N)*re;return c.set(1-le-me,me,le)}static containsPoint(e,n,r,a){return this.getBarycoord(e,n,r,a,Oa),Oa.x>=0&&Oa.y>=0&&Oa.x+Oa.y<=1}static getUV(e,n,r,a,c,p,A,N){return this.getBarycoord(e,n,r,a,Oa),N.set(0,0),N.addScaledVector(c,Oa.x),N.addScaledVector(p,Oa.y),N.addScaledVector(A,Oa.z),N}static isFrontFacing(e,n,r,a){return ba.subVectors(r,n),io.subVectors(e,n),ba.cross(io).dot(a)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,a){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,n,r,a){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ba.subVectors(this.c,this.b),io.subVectors(this.a,this.b),ba.cross(io).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(.3333333333333333)}getNormal(e){return Fa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Fa.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,a,c){return Fa.getUV(e,this.a,this.b,this.c,n,r,a,c)}containsPoint(e){return Fa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,a=this.b,c=this.c;let p,A;Gl.subVectors(a,r),vu.subVectors(c,r),Qf.subVectors(e,r);const N=Gl.dot(Qf),H=vu.dot(Qf);if(N<=0&&H<=0)return n.copy(r);jf.subVectors(e,a);const Z=Gl.dot(jf),ne=vu.dot(jf);if(Z>=0&&ne<=Z)return n.copy(a);const re=N*ne-Z*H;if(re<=0&&N>=0&&Z<=0)return p=N/(N-Z),n.copy(r).addScaledVector(Gl,p);Wf.subVectors(e,c);const le=Gl.dot(Wf),me=vu.dot(Wf);if(me>=0&&le<=me)return n.copy(c);const pe=le*H-N*me;if(pe<=0&&H>=0&&me<=0)return A=H/(H-me),n.copy(r).addScaledVector(vu,A);const de=Z*me-le*ne;if(de<=0&&ne-Z>=0&&le-me>=0)return Em.subVectors(c,a),A=(ne-Z)/(ne-Z+(le-me)),n.copy(a).addScaledVector(Em,A);const Ce=1/(de+pe+re);return p=pe*Ce,A=re*Ce,n.copy(r).addScaledVector(Gl,p).addScaledVector(vu,A)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let c0=0;class Zo extends ia{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:c0++}),this.uuid=wo(),this.name="",this.type="Material",this.blending=j,this.side=L,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Se,this.blendDst=Be,this.blendEquation=Ee,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=je,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=rh,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Qs,this.stencilZFail=Qs,this.stencilZPass=Qs,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}const a=this[n];if(a===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}a&&a.isColor?a.set(r):a&&a.isVector3&&r&&r.isVector3?a.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==j&&(r.blending=this.blending),this.side!==L&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function a(c){const p=[];for(const A in c){const N=c[A];delete N.metadata,p.push(N)}return p}if(n){const c=a(e.textures),p=a(e.images);c.length>0&&(r.textures=c),p.length>0&&(r.images=p)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const a=n.length;r=new Array(a);for(let c=0;c!==a;++c)r[c]=n[c].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class lo extends Zo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Zs=new nt,yu=new On;class Is{constructor(e,n,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r===!0,this.usage=Lc,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let a=0,c=this.itemSize;a<c;a++)this.array[e+a]=n.array[r+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)yu.fromBufferAttribute(this,n),yu.applyMatrix3(e),this.setXY(n,yu.x,yu.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Zs.fromBufferAttribute(this,n),Zs.applyMatrix3(e),this.setXYZ(n,Zs.x,Zs.y,Zs.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Zs.fromBufferAttribute(this,n),Zs.applyMatrix4(e),this.setXYZ(n,Zs.x,Zs.y,Zs.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Zs.fromBufferAttribute(this,n),Zs.applyNormalMatrix(e),this.setXYZ(n,Zs.x,Zs.y,Zs.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Zs.fromBufferAttribute(this,n),Zs.transformDirection(e),this.setXYZ(n,Zs.x,Zs.y,Zs.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=La(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ss(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=La(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ss(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=La(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ss(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=La(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ss(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ss(n,this.array),r=Ss(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,a){return e*=this.itemSize,this.normalized&&(n=Ss(n,this.array),r=Ss(r,this.array),a=Ss(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=a,this}setXYZW(e,n,r,a,c){return e*=this.itemSize,this.normalized&&(n=Ss(n,this.array),r=Ss(r,this.array),a=Ss(a,this.array),c=Ss(c,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=a,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Lc&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class u0 extends Is{constructor(e,n,r){super(new Int8Array(e),n,r)}}class bm extends Is{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class _m extends Is{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class wm extends Is{constructor(e,n,r){super(new Int16Array(e),n,r)}}class Kf extends Is{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class xu extends Is{constructor(e,n,r){super(new Int32Array(e),n,r)}}class Xf extends Is{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Yf extends Is{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}}class Yi extends Is{constructor(e,n,r){super(new Float32Array(e),n,r)}}class yh extends Is{constructor(e,n,r){super(new Float64Array(e),n,r)}}let Eu=0;const wa=new Gi,Ro=new hs,Nc=new nt,qi=new xa,Qn=new xa,ls=new nt;class Pr extends ia{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Eu++}),this.uuid=wo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(pd(e)?Xf:Kf)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const c=new Fo().getNormalMatrix(e);r.applyNormalMatrix(c),r.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return wa.makeRotationFromQuaternion(e),this.applyMatrix4(wa),this}rotateX(e){return wa.makeRotationX(e),this.applyMatrix4(wa),this}rotateY(e){return wa.makeRotationY(e),this.applyMatrix4(wa),this}rotateZ(e){return wa.makeRotationZ(e),this.applyMatrix4(wa),this}translate(e,n,r){return wa.makeTranslation(e,n,r),this.applyMatrix4(wa),this}scale(e,n,r){return wa.makeScale(e,n,r),this.applyMatrix4(wa),this}lookAt(e){return Ro.lookAt(e),Ro.updateMatrix(),this.applyMatrix4(Ro.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nc).negate(),this.translate(Nc.x,Nc.y,Nc.z),this}setFromPoints(e){const n=[];for(let r=0,a=e.length;r<a;r++){const c=e[r];n.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new Yi(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new nt(-1/0,-1/0,-1/0),new nt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,a=n.length;r<a;r++){const c=n[r];qi.setFromBufferAttribute(c),this.morphTargetsRelative?(ls.addVectors(this.boundingBox.min,qi.min),this.boundingBox.expandByPoint(ls),ls.addVectors(this.boundingBox.max,qi.max),this.boundingBox.expandByPoint(ls)):(this.boundingBox.expandByPoint(qi.min),this.boundingBox.expandByPoint(qi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new qo);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new nt,1/0);return}if(e){const r=this.boundingSphere.center;if(qi.setFromBufferAttribute(e),n)for(let c=0,p=n.length;c<p;c++){const A=n[c];Qn.setFromBufferAttribute(A),this.morphTargetsRelative?(ls.addVectors(qi.min,Qn.min),qi.expandByPoint(ls),ls.addVectors(qi.max,Qn.max),qi.expandByPoint(ls)):(qi.expandByPoint(Qn.min),qi.expandByPoint(Qn.max))}qi.getCenter(r);let a=0;for(let c=0,p=e.count;c<p;c++)ls.fromBufferAttribute(e,c),a=Math.max(a,r.distanceToSquared(ls));if(n)for(let c=0,p=n.length;c<p;c++){const A=n[c],N=this.morphTargetsRelative;for(let H=0,Z=A.count;H<Z;H++)ls.fromBufferAttribute(A,H),N&&(Nc.fromBufferAttribute(e,H),ls.add(Nc)),a=Math.max(a,r.distanceToSquared(ls))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,a=n.position.array,c=n.normal.array,p=n.uv.array,A=a.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Is(new Float32Array(4*A),4));const N=this.getAttribute("tangent").array,H=[],Z=[];for(let vt=0;vt<A;vt++)H[vt]=new nt,Z[vt]=new nt;const ne=new nt,re=new nt,le=new nt,me=new On,pe=new On,de=new On,Ce=new nt,Fe=new nt;function Re(vt,Ut,hn){ne.fromArray(a,vt*3),re.fromArray(a,Ut*3),le.fromArray(a,hn*3),me.fromArray(p,vt*2),pe.fromArray(p,Ut*2),de.fromArray(p,hn*2),re.sub(ne),le.sub(ne),pe.sub(me),de.sub(me);const Kt=1/(pe.x*de.y-de.x*pe.y);!isFinite(Kt)||(Ce.copy(re).multiplyScalar(de.y).addScaledVector(le,-pe.y).multiplyScalar(Kt),Fe.copy(le).multiplyScalar(pe.x).addScaledVector(re,-de.x).multiplyScalar(Kt),H[vt].add(Ce),H[Ut].add(Ce),H[hn].add(Ce),Z[vt].add(Fe),Z[Ut].add(Fe),Z[hn].add(Fe))}let De=this.groups;De.length===0&&(De=[{start:0,count:r.length}]);for(let vt=0,Ut=De.length;vt<Ut;++vt){const hn=De[vt],Kt=hn.start,Dt=hn.count;for(let sn=Kt,kn=Kt+Dt;sn<kn;sn+=3)Re(r[sn+0],r[sn+1],r[sn+2])}const Ve=new nt,ct=new nt,bt=new nt,Ne=new nt;function dt(vt){bt.fromArray(c,vt*3),Ne.copy(bt);const Ut=H[vt];Ve.copy(Ut),Ve.sub(bt.multiplyScalar(bt.dot(Ut))).normalize(),ct.crossVectors(Ne,Ut);const Kt=ct.dot(Z[vt])<0?-1:1;N[vt*4]=Ve.x,N[vt*4+1]=Ve.y,N[vt*4+2]=Ve.z,N[vt*4+3]=Kt}for(let vt=0,Ut=De.length;vt<Ut;++vt){const hn=De[vt],Kt=hn.start,Dt=hn.count;for(let sn=Kt,kn=Kt+Dt;sn<kn;sn+=3)dt(r[sn+0]),dt(r[sn+1]),dt(r[sn+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Is(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let re=0,le=r.count;re<le;re++)r.setXYZ(re,0,0,0);const a=new nt,c=new nt,p=new nt,A=new nt,N=new nt,H=new nt,Z=new nt,ne=new nt;if(e)for(let re=0,le=e.count;re<le;re+=3){const me=e.getX(re+0),pe=e.getX(re+1),de=e.getX(re+2);a.fromBufferAttribute(n,me),c.fromBufferAttribute(n,pe),p.fromBufferAttribute(n,de),Z.subVectors(p,c),ne.subVectors(a,c),Z.cross(ne),A.fromBufferAttribute(r,me),N.fromBufferAttribute(r,pe),H.fromBufferAttribute(r,de),A.add(Z),N.add(Z),H.add(Z),r.setXYZ(me,A.x,A.y,A.z),r.setXYZ(pe,N.x,N.y,N.z),r.setXYZ(de,H.x,H.y,H.z)}else for(let re=0,le=n.count;re<le;re+=3)a.fromBufferAttribute(n,re+0),c.fromBufferAttribute(n,re+1),p.fromBufferAttribute(n,re+2),Z.subVectors(p,c),ne.subVectors(a,c),Z.cross(ne),r.setXYZ(re+0,Z.x,Z.y,Z.z),r.setXYZ(re+1,Z.x,Z.y,Z.z),r.setXYZ(re+2,Z.x,Z.y,Z.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)ls.fromBufferAttribute(e,n),ls.normalize(),e.setXYZ(n,ls.x,ls.y,ls.z)}toNonIndexed(){function e(A,N){const H=A.array,Z=A.itemSize,ne=A.normalized,re=new H.constructor(N.length*Z);let le=0,me=0;for(let pe=0,de=N.length;pe<de;pe++){A.isInterleavedBufferAttribute?le=N[pe]*A.data.stride+A.offset:le=N[pe]*Z;for(let Ce=0;Ce<Z;Ce++)re[me++]=H[le++]}return new Is(re,Z,ne)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Pr,r=this.index.array,a=this.attributes;for(const A in a){const N=a[A],H=e(N,r);n.setAttribute(A,H)}const c=this.morphAttributes;for(const A in c){const N=[],H=c[A];for(let Z=0,ne=H.length;Z<ne;Z++){const re=H[Z],le=e(re,r);N.push(le)}n.morphAttributes[A]=N}n.morphTargetsRelative=this.morphTargetsRelative;const p=this.groups;for(let A=0,N=p.length;A<N;A++){const H=p[A];n.addGroup(H.start,H.count,H.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const N=this.parameters;for(const H in N)N[H]!==void 0&&(e[H]=N[H]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const N in r){const H=r[N];e.data.attributes[N]=H.toJSON(e.data)}const a={};let c=!1;for(const N in this.morphAttributes){const H=this.morphAttributes[N],Z=[];for(let ne=0,re=H.length;ne<re;ne++){const le=H[ne];Z.push(le.toJSON(e.data))}Z.length>0&&(a[N]=Z,c=!0)}c&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));const A=this.boundingSphere;return A!==null&&(e.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const a=e.attributes;for(const H in a){const Z=a[H];this.setAttribute(H,Z.clone(n))}const c=e.morphAttributes;for(const H in c){const Z=[],ne=c[H];for(let re=0,le=ne.length;re<le;re++)Z.push(ne[re].clone(n));this.morphAttributes[H]=Z}this.morphTargetsRelative=e.morphTargetsRelative;const p=e.groups;for(let H=0,Z=p.length;H<Z;H++){const ne=p[H];this.addGroup(ne.start,ne.count,ne.materialIndex)}const A=e.boundingBox;A!==null&&(this.boundingBox=A.clone());const N=e.boundingSphere;return N!==null&&(this.boundingSphere=N.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const kc=new Gi,xh=new Jo,go=new qo,rs=new nt,aa=new nt,hc=new nt,Mo=new nt,Je=new nt,xd=new nt,Ed=new nt,$o=new nt,qa=new nt,Uc=new On,Eh=new On,dc=new On,Gc=new nt,fc=new nt;class $s extends hs{constructor(e=new Pr,n=new lo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,p=a.length;c<p;c++){const A=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=c}}}}raycast(e,n){const r=this.geometry,a=this.material,c=this.matrixWorld;if(a===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),go.copy(r.boundingSphere),go.applyMatrix4(c),e.ray.intersectsSphere(go)===!1)||(kc.copy(c).invert(),xh.copy(e.ray).applyMatrix4(kc),r.boundingBox!==null&&xh.intersectsBox(r.boundingBox)===!1))return;let p;const A=r.index,N=r.attributes.position,H=r.morphAttributes.position,Z=r.morphTargetsRelative,ne=r.attributes.uv,re=r.attributes.uv2,le=r.groups,me=r.drawRange;if(A!==null)if(Array.isArray(a))for(let pe=0,de=le.length;pe<de;pe++){const Ce=le[pe],Fe=a[Ce.materialIndex],Re=Math.max(Ce.start,me.start),De=Math.min(A.count,Math.min(Ce.start+Ce.count,me.start+me.count));for(let Ve=Re,ct=De;Ve<ct;Ve+=3){const bt=A.getX(Ve),Ne=A.getX(Ve+1),dt=A.getX(Ve+2);p=Hl(this,Fe,e,xh,N,H,Z,ne,re,bt,Ne,dt),p&&(p.faceIndex=Math.floor(Ve/3),p.face.materialIndex=Ce.materialIndex,n.push(p))}}else{const pe=Math.max(0,me.start),de=Math.min(A.count,me.start+me.count);for(let Ce=pe,Fe=de;Ce<Fe;Ce+=3){const Re=A.getX(Ce),De=A.getX(Ce+1),Ve=A.getX(Ce+2);p=Hl(this,a,e,xh,N,H,Z,ne,re,Re,De,Ve),p&&(p.faceIndex=Math.floor(Ce/3),n.push(p))}}else if(N!==void 0)if(Array.isArray(a))for(let pe=0,de=le.length;pe<de;pe++){const Ce=le[pe],Fe=a[Ce.materialIndex],Re=Math.max(Ce.start,me.start),De=Math.min(N.count,Math.min(Ce.start+Ce.count,me.start+me.count));for(let Ve=Re,ct=De;Ve<ct;Ve+=3){const bt=Ve,Ne=Ve+1,dt=Ve+2;p=Hl(this,Fe,e,xh,N,H,Z,ne,re,bt,Ne,dt),p&&(p.faceIndex=Math.floor(Ve/3),p.face.materialIndex=Ce.materialIndex,n.push(p))}}else{const pe=Math.max(0,me.start),de=Math.min(N.count,me.start+me.count);for(let Ce=pe,Fe=de;Ce<Fe;Ce+=3){const Re=Ce,De=Ce+1,Ve=Ce+2;p=Hl(this,a,e,xh,N,H,Z,ne,re,Re,De,Ve),p&&(p.faceIndex=Math.floor(Ce/3),n.push(p))}}}}function Hc(x,e,n,r,a,c,p,A){let N;if(e.side===P?N=r.intersectTriangle(p,c,a,!0,A):N=r.intersectTriangle(a,c,p,e.side!==Y,A),N===null)return null;fc.copy(A),fc.applyMatrix4(x.matrixWorld);const H=n.ray.origin.distanceTo(fc);return H<n.near||H>n.far?null:{distance:H,point:fc.clone(),object:x}}function Hl(x,e,n,r,a,c,p,A,N,H,Z,ne){rs.fromBufferAttribute(a,H),aa.fromBufferAttribute(a,Z),hc.fromBufferAttribute(a,ne);const re=x.morphTargetInfluences;if(c&&re){Ed.set(0,0,0),$o.set(0,0,0),qa.set(0,0,0);for(let me=0,pe=c.length;me<pe;me++){const de=re[me],Ce=c[me];de!==0&&(Mo.fromBufferAttribute(Ce,H),Je.fromBufferAttribute(Ce,Z),xd.fromBufferAttribute(Ce,ne),p?(Ed.addScaledVector(Mo,de),$o.addScaledVector(Je,de),qa.addScaledVector(xd,de)):(Ed.addScaledVector(Mo.sub(rs),de),$o.addScaledVector(Je.sub(aa),de),qa.addScaledVector(xd.sub(hc),de)))}rs.add(Ed),aa.add($o),hc.add(qa)}x.isSkinnedMesh&&(x.boneTransform(H,rs),x.boneTransform(Z,aa),x.boneTransform(ne,hc));const le=Hc(x,e,n,r,rs,aa,hc,Gc);if(le){A&&(Uc.fromBufferAttribute(A,H),Eh.fromBufferAttribute(A,Z),dc.fromBufferAttribute(A,ne),le.uv=Fa.getUV(Gc,rs,aa,hc,Uc,Eh,dc,new On)),N&&(Uc.fromBufferAttribute(N,H),Eh.fromBufferAttribute(N,Z),dc.fromBufferAttribute(N,ne),le.uv2=Fa.getUV(Gc,rs,aa,hc,Uc,Eh,dc,new On));const me={a:H,b:Z,c:ne,normal:new nt,materialIndex:0};Fa.getNormal(rs,aa,hc,me.normal),le.face=me}return le}class Ja extends Pr{constructor(e=1,n=1,r=1,a=1,c=1,p=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:a,heightSegments:c,depthSegments:p};const A=this;a=Math.floor(a),c=Math.floor(c),p=Math.floor(p);const N=[],H=[],Z=[],ne=[];let re=0,le=0;me("z","y","x",-1,-1,r,n,e,p,c,0),me("z","y","x",1,-1,r,n,-e,p,c,1),me("x","z","y",1,1,e,r,n,a,p,2),me("x","z","y",1,-1,e,r,-n,a,p,3),me("x","y","z",1,-1,e,n,r,a,c,4),me("x","y","z",-1,-1,e,n,-r,a,c,5),this.setIndex(N),this.setAttribute("position",new Yi(H,3)),this.setAttribute("normal",new Yi(Z,3)),this.setAttribute("uv",new Yi(ne,2));function me(pe,de,Ce,Fe,Re,De,Ve,ct,bt,Ne,dt){const vt=De/bt,Ut=Ve/Ne,hn=De/2,Kt=Ve/2,Dt=ct/2,sn=bt+1,kn=Ne+1;let Zn=0,Ln=0;const ui=new nt;for(let si=0;si<kn;si++){const Qi=si*Ut-Kt;for(let Li=0;Li<sn;Li++){const gn=Li*vt-hn;ui[pe]=gn*Fe,ui[de]=Qi*Re,ui[Ce]=Dt,H.push(ui.x,ui.y,ui.z),ui[pe]=0,ui[de]=0,ui[Ce]=ct>0?1:-1,Z.push(ui.x,ui.y,ui.z),ne.push(Li/bt),ne.push(1-si/Ne),Zn+=1}}for(let si=0;si<Ne;si++)for(let Qi=0;Qi<bt;Qi++){const Li=re+Qi+sn*si,gn=re+Qi+sn*(si+1),$n=re+(Qi+1)+sn*(si+1),_i=re+(Qi+1)+sn*si;N.push(Li,gn,_i),N.push(gn,$n,_i),Ln+=6}A.addGroup(le,Ln,dt),le+=Ln,re+=Zn}}static fromJSON(e){return new Ja(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function pc(x){const e={};for(const n in x){e[n]={};for(const r in x[n]){const a=x[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?e[n][r]=a.clone():Array.isArray(a)?e[n][r]=a.slice():e[n][r]=a}}return e}function zo(x){const e={};for(let n=0;n<x.length;n++){const r=pc(x[n]);for(const a in r)e[a]=r[a]}return e}function bu(x){const e=[];for(let n=0;n<x.length;n++)e.push(x[n].clone());return e}function h0(x){return x.getRenderTarget()===null&&x.outputEncoding===Ar?Ls:bo}const Cm={clone:pc,merge:zo};var Mm=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Tm=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ea extends Zo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Mm,this.fragmentShader=Tm,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pc(e.uniforms),this.uniformsGroups=bu(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const a in this.uniforms){const p=this.uniforms[a].value;p&&p.isTexture?n.uniforms[a]={type:"t",value:p.toJSON(e).uuid}:p&&p.isColor?n.uniforms[a]={type:"c",value:p.getHex()}:p&&p.isVector2?n.uniforms[a]={type:"v2",value:p.toArray()}:p&&p.isVector3?n.uniforms[a]={type:"v3",value:p.toArray()}:p&&p.isVector4?n.uniforms[a]={type:"v4",value:p.toArray()}:p&&p.isMatrix3?n.uniforms[a]={type:"m3",value:p.toArray()}:p&&p.isMatrix4?n.uniforms[a]={type:"m4",value:p.toArray()}:n.uniforms[a]={value:p}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const r={};for(const a in this.extensions)this.extensions[a]===!0&&(r[a]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Za extends hs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Gi,this.projectionMatrix=new Gi,this.projectionMatrixInverse=new Gi}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ao extends Za{constructor(e=50,n=1,r=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=a,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Dc*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(sl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Dc*2*Math.atan(Math.tan(sl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,a,c,p){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=a,this.view.width=c,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(sl*.5*this.fov)/this.zoom,r=2*n,a=this.aspect*r,c=-.5*a;const p=this.view;if(this.view!==null&&this.view.enabled){const N=p.fullWidth,H=p.fullHeight;c+=p.offsetX*a/N,n-=p.offsetY*r/H,a*=p.width/N,r*=p.height/H}const A=this.filmOffset;A!==0&&(c+=e*A/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+a,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const mc=-90,Na=1;class qf extends hs{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r;const a=new Ao(mc,Na,e,n);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(1,0,0),this.add(a);const c=new Ao(mc,Na,e,n);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(-1,0,0),this.add(c);const p=new Ao(mc,Na,e,n);p.layers=this.layers,p.up.set(0,0,-1),p.lookAt(0,1,0),this.add(p);const A=new Ao(mc,Na,e,n);A.layers=this.layers,A.up.set(0,0,1),A.lookAt(0,-1,0),this.add(A);const N=new Ao(mc,Na,e,n);N.layers=this.layers,N.up.set(0,1,0),N.lookAt(0,0,1),this.add(N);const H=new Ao(mc,Na,e,n);H.layers=this.layers,H.up.set(0,1,0),H.lookAt(0,0,-1),this.add(H)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[a,c,p,A,N,H]=this.children,Z=e.getRenderTarget(),ne=e.toneMapping,re=e.xr.enabled;e.toneMapping=bn,e.xr.enabled=!1;const le=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,a),e.setRenderTarget(r,1),e.render(n,c),e.setRenderTarget(r,2),e.render(n,p),e.setRenderTarget(r,3),e.render(n,A),e.setRenderTarget(r,4),e.render(n,N),r.texture.generateMipmaps=le,e.setRenderTarget(r,5),e.render(n,H),e.setRenderTarget(Z),e.toneMapping=ne,e.xr.enabled=re,r.texture.needsPMREMUpdate=!0}}class zc extends js{constructor(e,n,r,a,c,p,A,N,H,Z){e=e!==void 0?e:[],n=n!==void 0?n:Ye,super(e,n,r,a,c,p,A,N,H,Z),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Jf extends No{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},a=[r,r,r,r,r,r];this.texture=new zc(a,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ke}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Ja(5,5,5),c=new ea({name:"CubemapFromEquirect",uniforms:pc(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:P,blending:J});c.uniforms.tEquirect.value=n;const p=new $s(a,c),A=n.minFilter;return n.minFilter===$t&&(n.minFilter=Ke),new qf(1,10,this).update(e,p),n.minFilter=A,p.geometry.dispose(),p.material.dispose(),this}clear(e,n,r,a){const c=e.getRenderTarget();for(let p=0;p<6;p++)e.setRenderTarget(this,p),e.clear(n,r,a);e.setRenderTarget(c)}}const zl=new nt,ir=new nt,bh=new Fo;class Vo{constructor(e=new nt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,a){return this.normal.set(e,n,r),this.constant=a,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const a=zl.subVectors(r,n).cross(ir.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const r=e.delta(zl),a=this.normal.dot(r);if(a===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const c=-(e.start.dot(this.normal)+this.constant)/a;return c<0||c>1?null:n.copy(r).multiplyScalar(c).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||bh.getNormalMatrix(e),a=this.coplanarPoint(zl).applyMatrix4(e),c=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _h=new qo,Zf=new nt;class ul{constructor(e=new Vo,n=new Vo,r=new Vo,a=new Vo,c=new Vo,p=new Vo){this.planes=[e,n,r,a,c,p]}set(e,n,r,a,c,p){const A=this.planes;return A[0].copy(e),A[1].copy(n),A[2].copy(r),A[3].copy(a),A[4].copy(c),A[5].copy(p),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,a=r[0],c=r[1],p=r[2],A=r[3],N=r[4],H=r[5],Z=r[6],ne=r[7],re=r[8],le=r[9],me=r[10],pe=r[11],de=r[12],Ce=r[13],Fe=r[14],Re=r[15];return n[0].setComponents(A-a,ne-N,pe-re,Re-de).normalize(),n[1].setComponents(A+a,ne+N,pe+re,Re+de).normalize(),n[2].setComponents(A+c,ne+H,pe+le,Re+Ce).normalize(),n[3].setComponents(A-c,ne-H,pe-le,Re-Ce).normalize(),n[4].setComponents(A-p,ne-Z,pe-me,Re-Fe).normalize(),n[5].setComponents(A+p,ne+Z,pe+me,Re+Fe).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),_h.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSprite(e){return _h.center.set(0,0,0),_h.radius=.7071067811865476,_h.applyMatrix4(e.matrixWorld),this.intersectsSphere(_h)}intersectsSphere(e){const n=this.planes,r=e.center,a=-e.radius;for(let c=0;c<6;c++)if(n[c].distanceToPoint(r)<a)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const a=n[r];if(Zf.x=a.normal.x>0?e.max.x:e.min.x,Zf.y=a.normal.y>0?e.max.y:e.min.y,Zf.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(Zf)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function wh(){let x=null,e=!1,n=null,r=null;function a(c,p){n(c,p),r=x.requestAnimationFrame(a)}return{start:function(){e!==!0&&n!==null&&(r=x.requestAnimationFrame(a),e=!0)},stop:function(){x.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(c){n=c},setContext:function(c){x=c}}}function ka(x,e){const n=e.isWebGL2,r=new WeakMap;function a(H,Z){const ne=H.array,re=H.usage,le=x.createBuffer();x.bindBuffer(Z,le),x.bufferData(Z,ne,re),H.onUploadCallback();let me;if(ne instanceof Float32Array)me=5126;else if(ne instanceof Uint16Array)if(H.isFloat16BufferAttribute)if(n)me=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else me=5123;else if(ne instanceof Int16Array)me=5122;else if(ne instanceof Uint32Array)me=5125;else if(ne instanceof Int32Array)me=5124;else if(ne instanceof Int8Array)me=5120;else if(ne instanceof Uint8Array)me=5121;else if(ne instanceof Uint8ClampedArray)me=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+ne);return{buffer:le,type:me,bytesPerElement:ne.BYTES_PER_ELEMENT,version:H.version}}function c(H,Z,ne){const re=Z.array,le=Z.updateRange;x.bindBuffer(ne,H),le.count===-1?x.bufferSubData(ne,0,re):(n?x.bufferSubData(ne,le.offset*re.BYTES_PER_ELEMENT,re,le.offset,le.count):x.bufferSubData(ne,le.offset*re.BYTES_PER_ELEMENT,re.subarray(le.offset,le.offset+le.count)),le.count=-1),Z.onUploadCallback()}function p(H){return H.isInterleavedBufferAttribute&&(H=H.data),r.get(H)}function A(H){H.isInterleavedBufferAttribute&&(H=H.data);const Z=r.get(H);Z&&(x.deleteBuffer(Z.buffer),r.delete(H))}function N(H,Z){if(H.isGLBufferAttribute){const re=r.get(H);(!re||re.version<H.version)&&r.set(H,{buffer:H.buffer,type:H.type,bytesPerElement:H.elementSize,version:H.version});return}H.isInterleavedBufferAttribute&&(H=H.data);const ne=r.get(H);ne===void 0?r.set(H,a(H,Z)):ne.version<H.version&&(c(ne.buffer,H,Z),ne.version=H.version)}return{get:p,remove:A,update:N}}class _u extends Pr{constructor(e=1,n=1,r=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:a};const c=e/2,p=n/2,A=Math.floor(r),N=Math.floor(a),H=A+1,Z=N+1,ne=e/A,re=n/N,le=[],me=[],pe=[],de=[];for(let Ce=0;Ce<Z;Ce++){const Fe=Ce*re-p;for(let Re=0;Re<H;Re++){const De=Re*ne-c;me.push(De,-Fe,0),pe.push(0,0,1),de.push(Re/A),de.push(1-Ce/N)}}for(let Ce=0;Ce<N;Ce++)for(let Fe=0;Fe<A;Fe++){const Re=Fe+H*Ce,De=Fe+H*(Ce+1),Ve=Fe+1+H*(Ce+1),ct=Fe+1+H*Ce;le.push(Re,De,ct),le.push(De,Ve,ct)}this.setIndex(le),this.setAttribute("position",new Yi(me,3)),this.setAttribute("normal",new Yi(pe,3)),this.setAttribute("uv",new Yi(de,2))}static fromJSON(e){return new _u(e.width,e.height,e.widthSegments,e.heightSegments)}}var d0=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,wu=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Sm=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,tv=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,f0=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ch=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gc="vec3 transformed = vec3( position );",$f=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bd=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,nv=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,iv=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,p0=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,m0=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,g0=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,rv=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,A0=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Im=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,sv=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,ov=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,hl=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,dl=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ac=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Rm=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vc=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Mh=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Th=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,v0="gl_FragColor = linearToOutputTexel( gl_FragColor );",Bm=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Lm=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Dm=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,vo=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,av=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,y0=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fl=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ep=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Fi=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,yc=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ws=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,tp=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lv=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cv=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Vl=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Pm=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Sh=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Ua=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,_d=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Qo=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,x0=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ih=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Om=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Vc=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Qc=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,jc=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Fm=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Nm=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,km=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,np=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,ip=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rp=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sp=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,op=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ap=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Um=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,lp=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Cu=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,E0=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,uv=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,hv=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,cp=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Rh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,up=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Bh=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Lh=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,hp=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,wd=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Cd=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,es=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Ei=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,pl=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Gm=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Hm=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,b0=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dv=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fv=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_0=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,w0=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,C0=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,M0=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,T0=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,S0=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,zm=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,pv=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,mv=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,gv=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Av=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,vv=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dp=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fp=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,yv=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,xv=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Vm=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Mu=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,I0=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Md=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Td=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,pp=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Qr={alphamap_fragment:d0,alphamap_pars_fragment:wu,alphatest_fragment:Sm,alphatest_pars_fragment:tv,aomap_fragment:f0,aomap_pars_fragment:Ch,begin_vertex:gc,beginnormal_vertex:$f,bsdfs:bd,iridescence_fragment:nv,bumpmap_pars_fragment:iv,clipping_planes_fragment:p0,clipping_planes_pars_fragment:m0,clipping_planes_pars_vertex:g0,clipping_planes_vertex:rv,color_fragment:A0,color_pars_fragment:Im,color_pars_vertex:sv,color_vertex:ov,common:hl,cube_uv_reflection_fragment:dl,defaultnormal_vertex:Ac,displacementmap_pars_vertex:Rm,displacementmap_vertex:vc,emissivemap_fragment:Mh,emissivemap_pars_fragment:Th,encodings_fragment:v0,encodings_pars_fragment:Bm,envmap_fragment:Lm,envmap_common_pars_fragment:Dm,envmap_pars_fragment:vo,envmap_pars_vertex:av,envmap_physical_pars_fragment:Sh,envmap_vertex:y0,fog_vertex:fl,fog_pars_vertex:ep,fog_fragment:Fi,fog_pars_fragment:yc,gradientmap_pars_fragment:Ws,lightmap_fragment:tp,lightmap_pars_fragment:lv,lights_lambert_fragment:cv,lights_lambert_pars_fragment:Vl,lights_pars_begin:Pm,lights_toon_fragment:Ua,lights_toon_pars_fragment:_d,lights_phong_fragment:Qo,lights_phong_pars_fragment:x0,lights_physical_fragment:Ih,lights_physical_pars_fragment:Om,lights_fragment_begin:Vc,lights_fragment_maps:Qc,lights_fragment_end:jc,logdepthbuf_fragment:Fm,logdepthbuf_pars_fragment:Nm,logdepthbuf_pars_vertex:km,logdepthbuf_vertex:np,map_fragment:ip,map_pars_fragment:rp,map_particle_fragment:sp,map_particle_pars_fragment:op,metalnessmap_fragment:ap,metalnessmap_pars_fragment:Um,morphcolor_vertex:lp,morphnormal_vertex:Cu,morphtarget_pars_vertex:E0,morphtarget_vertex:uv,normal_fragment_begin:hv,normal_fragment_maps:cp,normal_pars_fragment:Rh,normal_pars_vertex:up,normal_vertex:Bh,normalmap_pars_fragment:Lh,clearcoat_normal_fragment_begin:hp,clearcoat_normal_fragment_maps:wd,clearcoat_pars_fragment:Cd,iridescence_pars_fragment:es,output_fragment:Ei,packing:pl,premultiplied_alpha_fragment:Gm,project_vertex:Hm,dithering_fragment:b0,dithering_pars_fragment:dv,roughnessmap_fragment:fv,roughnessmap_pars_fragment:_0,shadowmap_pars_fragment:w0,shadowmap_pars_vertex:C0,shadowmap_vertex:M0,shadowmask_pars_fragment:T0,skinbase_vertex:S0,skinning_pars_vertex:zm,skinning_vertex:pv,skinnormal_vertex:mv,specularmap_fragment:gv,specularmap_pars_fragment:Av,tonemapping_fragment:vv,tonemapping_pars_fragment:dp,transmission_fragment:fp,transmission_pars_fragment:yv,uv_pars_fragment:xv,uv_pars_vertex:Vm,uv_vertex:Mu,uv2_pars_fragment:I0,uv2_pars_vertex:Md,uv2_vertex:Td,worldpos_vertex:pp,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`},gi={common:{diffuse:{value:new Si(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Fo},uv2Transform:{value:new Fo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new On(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Si(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Si(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fo}},sprite:{diffuse:{value:new Si(16777215)},opacity:{value:1},center:{value:new On(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fo}}},Ca={basic:{uniforms:zo([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.fog]),vertexShader:Qr.meshbasic_vert,fragmentShader:Qr.meshbasic_frag},lambert:{uniforms:zo([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.fog,gi.lights,{emissive:{value:new Si(0)}}]),vertexShader:Qr.meshlambert_vert,fragmentShader:Qr.meshlambert_frag},phong:{uniforms:zo([gi.common,gi.specularmap,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.fog,gi.lights,{emissive:{value:new Si(0)},specular:{value:new Si(1118481)},shininess:{value:30}}]),vertexShader:Qr.meshphong_vert,fragmentShader:Qr.meshphong_frag},standard:{uniforms:zo([gi.common,gi.envmap,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.roughnessmap,gi.metalnessmap,gi.fog,gi.lights,{emissive:{value:new Si(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qr.meshphysical_vert,fragmentShader:Qr.meshphysical_frag},toon:{uniforms:zo([gi.common,gi.aomap,gi.lightmap,gi.emissivemap,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.gradientmap,gi.fog,gi.lights,{emissive:{value:new Si(0)}}]),vertexShader:Qr.meshtoon_vert,fragmentShader:Qr.meshtoon_frag},matcap:{uniforms:zo([gi.common,gi.bumpmap,gi.normalmap,gi.displacementmap,gi.fog,{matcap:{value:null}}]),vertexShader:Qr.meshmatcap_vert,fragmentShader:Qr.meshmatcap_frag},points:{uniforms:zo([gi.points,gi.fog]),vertexShader:Qr.points_vert,fragmentShader:Qr.points_frag},dashed:{uniforms:zo([gi.common,gi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qr.linedashed_vert,fragmentShader:Qr.linedashed_frag},depth:{uniforms:zo([gi.common,gi.displacementmap]),vertexShader:Qr.depth_vert,fragmentShader:Qr.depth_frag},normal:{uniforms:zo([gi.common,gi.bumpmap,gi.normalmap,gi.displacementmap,{opacity:{value:1}}]),vertexShader:Qr.meshnormal_vert,fragmentShader:Qr.meshnormal_frag},sprite:{uniforms:zo([gi.sprite,gi.fog]),vertexShader:Qr.sprite_vert,fragmentShader:Qr.sprite_frag},background:{uniforms:{uvTransform:{value:new Fo},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Qr.background_vert,fragmentShader:Qr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Qr.backgroundCube_vert,fragmentShader:Qr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qr.cube_vert,fragmentShader:Qr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qr.equirect_vert,fragmentShader:Qr.equirect_frag},distanceRGBA:{uniforms:zo([gi.common,gi.displacementmap,{referencePosition:{value:new nt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qr.distanceRGBA_vert,fragmentShader:Qr.distanceRGBA_frag},shadow:{uniforms:zo([gi.lights,gi.fog,{color:{value:new Si(0)},opacity:{value:1}}]),vertexShader:Qr.shadow_vert,fragmentShader:Qr.shadow_frag}};Ca.physical={uniforms:zo([Ca.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new On(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Si(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new On},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Si(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Si(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Qr.meshphysical_vert,fragmentShader:Qr.meshphysical_frag};const Ld={r:0,b:0,g:0};function B0(x,e,n,r,a,c,p){const A=new Si(0);let N=c===!0?0:1,H,Z,ne=null,re=0,le=null;function me(de,Ce){let Fe=!1,Re=Ce.isScene===!0?Ce.background:null;Re&&Re.isTexture&&(Re=(Ce.backgroundBlurriness>0?n:e).get(Re));const De=x.xr,Ve=De.getSession&&De.getSession();Ve&&Ve.environmentBlendMode==="additive"&&(Re=null),Re===null?pe(A,N):Re&&Re.isColor&&(pe(Re,1),Fe=!0),(x.autoClear||Fe)&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil),Re&&(Re.isCubeTexture||Re.mapping===Me)?(Z===void 0&&(Z=new $s(new Ja(1,1,1),new ea({name:"BackgroundCubeMaterial",uniforms:pc(Ca.backgroundCube.uniforms),vertexShader:Ca.backgroundCube.vertexShader,fragmentShader:Ca.backgroundCube.fragmentShader,side:P,depthTest:!1,depthWrite:!1,fog:!1})),Z.geometry.deleteAttribute("normal"),Z.geometry.deleteAttribute("uv"),Z.onBeforeRender=function(ct,bt,Ne){this.matrixWorld.copyPosition(Ne.matrixWorld)},Object.defineProperty(Z.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(Z)),Z.material.uniforms.envMap.value=Re,Z.material.uniforms.flipEnvMap.value=Re.isCubeTexture&&Re.isRenderTargetTexture===!1?-1:1,Z.material.uniforms.backgroundBlurriness.value=Ce.backgroundBlurriness,Z.material.uniforms.backgroundIntensity.value=Ce.backgroundIntensity,(ne!==Re||re!==Re.version||le!==x.toneMapping)&&(Z.material.needsUpdate=!0,ne=Re,re=Re.version,le=x.toneMapping),Z.layers.enableAll(),de.unshift(Z,Z.geometry,Z.material,0,0,null)):Re&&Re.isTexture&&(H===void 0&&(H=new $s(new _u(2,2),new ea({name:"BackgroundMaterial",uniforms:pc(Ca.background.uniforms),vertexShader:Ca.background.vertexShader,fragmentShader:Ca.background.fragmentShader,side:L,depthTest:!1,depthWrite:!1,fog:!1})),H.geometry.deleteAttribute("normal"),Object.defineProperty(H.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(H)),H.material.uniforms.t2D.value=Re,H.material.uniforms.backgroundIntensity.value=Ce.backgroundIntensity,Re.matrixAutoUpdate===!0&&Re.updateMatrix(),H.material.uniforms.uvTransform.value.copy(Re.matrix),(ne!==Re||re!==Re.version||le!==x.toneMapping)&&(H.material.needsUpdate=!0,ne=Re,re=Re.version,le=x.toneMapping),H.layers.enableAll(),de.unshift(H,H.geometry,H.material,0,0,null))}function pe(de,Ce){de.getRGB(Ld,h0(x)),r.buffers.color.setClear(Ld.r,Ld.g,Ld.b,Ce,p)}return{getClearColor:function(){return A},setClearColor:function(de,Ce=1){A.set(de),N=Ce,pe(A,N)},getClearAlpha:function(){return N},setClearAlpha:function(de){N=de,pe(A,N)},render:me}}function Jm(x,e,n,r){const a=x.getParameter(34921),c=r.isWebGL2?null:e.get("OES_vertex_array_object"),p=r.isWebGL2||c!==null,A={},N=de(null);let H=N,Z=!1;function ne(Dt,sn,kn,Zn,Ln){let ui=!1;if(p){const si=pe(Zn,kn,sn);H!==si&&(H=si,le(H.object)),ui=Ce(Dt,Zn,kn,Ln),ui&&Fe(Dt,Zn,kn,Ln)}else{const si=sn.wireframe===!0;(H.geometry!==Zn.id||H.program!==kn.id||H.wireframe!==si)&&(H.geometry=Zn.id,H.program=kn.id,H.wireframe=si,ui=!0)}Ln!==null&&n.update(Ln,34963),(ui||Z)&&(Z=!1,Ne(Dt,sn,kn,Zn),Ln!==null&&x.bindBuffer(34963,n.get(Ln).buffer))}function re(){return r.isWebGL2?x.createVertexArray():c.createVertexArrayOES()}function le(Dt){return r.isWebGL2?x.bindVertexArray(Dt):c.bindVertexArrayOES(Dt)}function me(Dt){return r.isWebGL2?x.deleteVertexArray(Dt):c.deleteVertexArrayOES(Dt)}function pe(Dt,sn,kn){const Zn=kn.wireframe===!0;let Ln=A[Dt.id];Ln===void 0&&(Ln={},A[Dt.id]=Ln);let ui=Ln[sn.id];ui===void 0&&(ui={},Ln[sn.id]=ui);let si=ui[Zn];return si===void 0&&(si=de(re()),ui[Zn]=si),si}function de(Dt){const sn=[],kn=[],Zn=[];for(let Ln=0;Ln<a;Ln++)sn[Ln]=0,kn[Ln]=0,Zn[Ln]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:sn,enabledAttributes:kn,attributeDivisors:Zn,object:Dt,attributes:{},index:null}}function Ce(Dt,sn,kn,Zn){const Ln=H.attributes,ui=sn.attributes;let si=0;const Qi=kn.getAttributes();for(const Li in Qi)if(Qi[Li].location>=0){const $n=Ln[Li];let _i=ui[Li];if(_i===void 0&&(Li==="instanceMatrix"&&Dt.instanceMatrix&&(_i=Dt.instanceMatrix),Li==="instanceColor"&&Dt.instanceColor&&(_i=Dt.instanceColor)),$n===void 0||$n.attribute!==_i||_i&&$n.data!==_i.data)return!0;si++}return H.attributesNum!==si||H.index!==Zn}function Fe(Dt,sn,kn,Zn){const Ln={},ui=sn.attributes;let si=0;const Qi=kn.getAttributes();for(const Li in Qi)if(Qi[Li].location>=0){let $n=ui[Li];$n===void 0&&(Li==="instanceMatrix"&&Dt.instanceMatrix&&($n=Dt.instanceMatrix),Li==="instanceColor"&&Dt.instanceColor&&($n=Dt.instanceColor));const _i={};_i.attribute=$n,$n&&$n.data&&(_i.data=$n.data),Ln[Li]=_i,si++}H.attributes=Ln,H.attributesNum=si,H.index=Zn}function Re(){const Dt=H.newAttributes;for(let sn=0,kn=Dt.length;sn<kn;sn++)Dt[sn]=0}function De(Dt){Ve(Dt,0)}function Ve(Dt,sn){const kn=H.newAttributes,Zn=H.enabledAttributes,Ln=H.attributeDivisors;kn[Dt]=1,Zn[Dt]===0&&(x.enableVertexAttribArray(Dt),Zn[Dt]=1),Ln[Dt]!==sn&&((r.isWebGL2?x:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Dt,sn),Ln[Dt]=sn)}function ct(){const Dt=H.newAttributes,sn=H.enabledAttributes;for(let kn=0,Zn=sn.length;kn<Zn;kn++)sn[kn]!==Dt[kn]&&(x.disableVertexAttribArray(kn),sn[kn]=0)}function bt(Dt,sn,kn,Zn,Ln,ui){r.isWebGL2===!0&&(kn===5124||kn===5125)?x.vertexAttribIPointer(Dt,sn,kn,Ln,ui):x.vertexAttribPointer(Dt,sn,kn,Zn,Ln,ui)}function Ne(Dt,sn,kn,Zn){if(r.isWebGL2===!1&&(Dt.isInstancedMesh||Zn.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;Re();const Ln=Zn.attributes,ui=kn.getAttributes(),si=sn.defaultAttributeValues;for(const Qi in ui){const Li=ui[Qi];if(Li.location>=0){let gn=Ln[Qi];if(gn===void 0&&(Qi==="instanceMatrix"&&Dt.instanceMatrix&&(gn=Dt.instanceMatrix),Qi==="instanceColor"&&Dt.instanceColor&&(gn=Dt.instanceColor)),gn!==void 0){const $n=gn.normalized,_i=gn.itemSize,ln=n.get(gn);if(ln===void 0)continue;const Wi=ln.buffer,wi=ln.type,gr=ln.bytesPerElement;if(gn.isInterleavedBufferAttribute){const mi=gn.data,ns=mi.stride,Hn=gn.offset;if(mi.isInstancedInterleavedBuffer){for(let Rn=0;Rn<Li.locationSize;Rn++)Ve(Li.location+Rn,mi.meshPerAttribute);Dt.isInstancedMesh!==!0&&Zn._maxInstanceCount===void 0&&(Zn._maxInstanceCount=mi.meshPerAttribute*mi.count)}else for(let Rn=0;Rn<Li.locationSize;Rn++)De(Li.location+Rn);x.bindBuffer(34962,Wi);for(let Rn=0;Rn<Li.locationSize;Rn++)bt(Li.location+Rn,_i/Li.locationSize,wi,$n,ns*gr,(Hn+_i/Li.locationSize*Rn)*gr)}else{if(gn.isInstancedBufferAttribute){for(let mi=0;mi<Li.locationSize;mi++)Ve(Li.location+mi,gn.meshPerAttribute);Dt.isInstancedMesh!==!0&&Zn._maxInstanceCount===void 0&&(Zn._maxInstanceCount=gn.meshPerAttribute*gn.count)}else for(let mi=0;mi<Li.locationSize;mi++)De(Li.location+mi);x.bindBuffer(34962,Wi);for(let mi=0;mi<Li.locationSize;mi++)bt(Li.location+mi,_i/Li.locationSize,wi,$n,_i*gr,_i/Li.locationSize*mi*gr)}}else if(si!==void 0){const $n=si[Qi];if($n!==void 0)switch($n.length){case 2:x.vertexAttrib2fv(Li.location,$n);break;case 3:x.vertexAttrib3fv(Li.location,$n);break;case 4:x.vertexAttrib4fv(Li.location,$n);break;default:x.vertexAttrib1fv(Li.location,$n)}}}}ct()}function dt(){hn();for(const Dt in A){const sn=A[Dt];for(const kn in sn){const Zn=sn[kn];for(const Ln in Zn)me(Zn[Ln].object),delete Zn[Ln];delete sn[kn]}delete A[Dt]}}function vt(Dt){if(A[Dt.id]===void 0)return;const sn=A[Dt.id];for(const kn in sn){const Zn=sn[kn];for(const Ln in Zn)me(Zn[Ln].object),delete Zn[Ln];delete sn[kn]}delete A[Dt.id]}function Ut(Dt){for(const sn in A){const kn=A[sn];if(kn[Dt.id]===void 0)continue;const Zn=kn[Dt.id];for(const Ln in Zn)me(Zn[Ln].object),delete Zn[Ln];delete kn[Dt.id]}}function hn(){Kt(),Z=!0,H!==N&&(H=N,le(H.object))}function Kt(){N.geometry=null,N.program=null,N.wireframe=!1}return{setup:ne,reset:hn,resetDefaultState:Kt,dispose:dt,releaseStatesOfGeometry:vt,releaseStatesOfProgram:Ut,initAttributes:Re,enableAttribute:De,disableUnusedAttributes:ct}}function Tu(x,e,n,r){const a=r.isWebGL2;let c;function p(H){c=H}function A(H,Z){x.drawArrays(c,H,Z),n.update(Z,c,1)}function N(H,Z,ne){if(ne===0)return;let re,le;if(a)re=x,le="drawArraysInstanced";else if(re=e.get("ANGLE_instanced_arrays"),le="drawArraysInstancedANGLE",re===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}re[le](c,H,Z,ne),n.update(Z,c,ne)}this.setMode=p,this.render=A,this.renderInstances=N}function L0(x,e,n){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const bt=e.get("EXT_texture_filter_anisotropic");r=x.getParameter(bt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function c(bt){if(bt==="highp"){if(x.getShaderPrecisionFormat(35633,36338).precision>0&&x.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";bt="mediump"}return bt==="mediump"&&x.getShaderPrecisionFormat(35633,36337).precision>0&&x.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const p=typeof WebGL2RenderingContext<"u"&&x instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&x instanceof WebGL2ComputeRenderingContext;let A=n.precision!==void 0?n.precision:"highp";const N=c(A);N!==A&&(console.warn("THREE.WebGLRenderer:",A,"not supported, using",N,"instead."),A=N);const H=p||e.has("WEBGL_draw_buffers"),Z=n.logarithmicDepthBuffer===!0,ne=x.getParameter(34930),re=x.getParameter(35660),le=x.getParameter(3379),me=x.getParameter(34076),pe=x.getParameter(34921),de=x.getParameter(36347),Ce=x.getParameter(36348),Fe=x.getParameter(36349),Re=re>0,De=p||e.has("OES_texture_float"),Ve=Re&&De,ct=p?x.getParameter(36183):0;return{isWebGL2:p,drawBuffers:H,getMaxAnisotropy:a,getMaxPrecision:c,precision:A,logarithmicDepthBuffer:Z,maxTextures:ne,maxVertexTextures:re,maxTextureSize:le,maxCubemapSize:me,maxAttributes:pe,maxVertexUniforms:de,maxVaryings:Ce,maxFragmentUniforms:Fe,vertexTextures:Re,floatFragmentTextures:De,floatVertexTextures:Ve,maxSamples:ct}}function Zm(x){const e=this;let n=null,r=0,a=!1,c=!1;const p=new Vo,A=new Fo,N={value:null,needsUpdate:!1};this.uniform=N,this.numPlanes=0,this.numIntersection=0,this.init=function(ne,re,le){const me=ne.length!==0||re||r!==0||a;return a=re,n=Z(ne,le,0),r=ne.length,me},this.beginShadows=function(){c=!0,Z(null)},this.endShadows=function(){c=!1,H()},this.setState=function(ne,re,le){const me=ne.clippingPlanes,pe=ne.clipIntersection,de=ne.clipShadows,Ce=x.get(ne);if(!a||me===null||me.length===0||c&&!de)c?Z(null):H();else{const Fe=c?0:r,Re=Fe*4;let De=Ce.clippingState||null;N.value=De,De=Z(me,re,Re,le);for(let Ve=0;Ve!==Re;++Ve)De[Ve]=n[Ve];Ce.clippingState=De,this.numIntersection=pe?this.numPlanes:0,this.numPlanes+=Fe}};function H(){N.value!==n&&(N.value=n,N.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function Z(ne,re,le,me){const pe=ne!==null?ne.length:0;let de=null;if(pe!==0){if(de=N.value,me!==!0||de===null){const Ce=le+pe*4,Fe=re.matrixWorldInverse;A.getNormalMatrix(Fe),(de===null||de.length<Ce)&&(de=new Float32Array(Ce));for(let Re=0,De=le;Re!==pe;++Re,De+=4)p.copy(ne[Re]).applyMatrix4(Fe,A),p.normal.toArray(de,De),de[De+3]=p.constant}N.value=de,N.needsUpdate=!0}return e.numPlanes=pe,e.numIntersection=0,de}}function yp(x){let e=new WeakMap;function n(p,A){return A===He?p.mapping=Ye:A===et&&(p.mapping=ze),p}function r(p){if(p&&p.isTexture&&p.isRenderTargetTexture===!1){const A=p.mapping;if(A===He||A===et)if(e.has(p)){const N=e.get(p).texture;return n(N,p.mapping)}else{const N=p.image;if(N&&N.height>0){const H=new Jf(N.height/2);return H.fromEquirectangularTexture(x,p),e.set(p,H),p.addEventListener("dispose",a),n(H.texture,p.mapping)}else return null}}return p}function a(p){const A=p.target;A.removeEventListener("dispose",a);const N=e.get(A);N!==void 0&&(e.delete(A),N.dispose())}function c(){e=new WeakMap}return{get:r,dispose:c}}class Su extends Za{constructor(e=-1,n=1,r=1,a=-1,c=.1,p=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=a,this.near=c,this.far=p,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,a,c,p){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=a,this.view.width=c,this.view.height=p,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let c=r-e,p=r+e,A=a+n,N=a-n;if(this.view!==null&&this.view.enabled){const H=(this.right-this.left)/this.view.fullWidth/this.zoom,Z=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=H*this.view.offsetX,p=c+H*this.view.width,A-=Z*this.view.offsetY,N=A-Z*this.view.height}this.projectionMatrix.makeOrthographic(c,p,A,N,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Iu=4,xp=[.125,.215,.35,.446,.526,.582],Wc=20,Ep=new Su,Dd=new Si;let Kc=null;const Ql=(1+Math.sqrt(5))/2,Ga=1/Ql,Pd=[new nt(1,1,1),new nt(-1,1,1),new nt(1,1,-1),new nt(-1,1,-1),new nt(0,Ql,Ga),new nt(0,Ql,-Ga),new nt(Ga,0,Ql),new nt(-Ga,0,Ql),new nt(Ql,Ga,0),new nt(-Ql,Ga,0)];class Dh{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,a=100){Kc=this._renderer.getRenderTarget(),this._setSize(256);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,r,a,c),n>0&&this._blur(c,0,0,n),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=jl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=D0(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Kc),e.scissorTest=!1,Ru(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Ye||e.mapping===ze?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Kc=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Ke,minFilter:Ke,generateMipmaps:!1,type:Ft,format:Zi,encoding:Yr,depthBuffer:!1},a=_p(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_p(e,n,r);const{_lodMax:c}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bp(c)),this._blurMaterial=$m(c,e,n)}return a}_compileMaterial(e){const n=new $s(this._lodPlanes[0],e);this._renderer.compile(n,Ep)}_sceneToCubeUV(e,n,r,a){const A=new Ao(90,1,n,r),N=[1,-1,1,1,1,1],H=[1,1,1,-1,-1,-1],Z=this._renderer,ne=Z.autoClear,re=Z.toneMapping;Z.getClearColor(Dd),Z.toneMapping=bn,Z.autoClear=!1;const le=new lo({name:"PMREM.Background",side:P,depthWrite:!1,depthTest:!1}),me=new $s(new Ja,le);let pe=!1;const de=e.background;de?de.isColor&&(le.color.copy(de),e.background=null,pe=!0):(le.color.copy(Dd),pe=!0);for(let Ce=0;Ce<6;Ce++){const Fe=Ce%3;Fe===0?(A.up.set(0,N[Ce],0),A.lookAt(H[Ce],0,0)):Fe===1?(A.up.set(0,0,N[Ce]),A.lookAt(0,H[Ce],0)):(A.up.set(0,N[Ce],0),A.lookAt(0,0,H[Ce]));const Re=this._cubeSize;Ru(a,Fe*Re,Ce>2?Re:0,Re,Re),Z.setRenderTarget(a),pe&&Z.render(me,A),Z.render(e,A)}me.geometry.dispose(),me.material.dispose(),Z.toneMapping=re,Z.autoClear=ne,e.background=de}_textureToCubeUV(e,n){const r=this._renderer,a=e.mapping===Ye||e.mapping===ze;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=jl()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=D0());const c=a?this._cubemapMaterial:this._equirectMaterial,p=new $s(this._lodPlanes[0],c),A=c.uniforms;A.envMap.value=e;const N=this._cubeSize;Ru(n,0,0,3*N,2*N),r.setRenderTarget(n),r.render(p,Ep)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let a=1;a<this._lodPlanes.length;a++){const c=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),p=Pd[(a-1)%Pd.length];this._blur(e,a-1,a,c,p)}n.autoClear=r}_blur(e,n,r,a,c){const p=this._pingPongRenderTarget;this._halfBlur(e,p,n,r,a,"latitudinal",c),this._halfBlur(p,e,r,r,a,"longitudinal",c)}_halfBlur(e,n,r,a,c,p,A){const N=this._renderer,H=this._blurMaterial;p!=="latitudinal"&&p!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const Z=3,ne=new $s(this._lodPlanes[a],H),re=H.uniforms,le=this._sizeLods[r]-1,me=isFinite(c)?Math.PI/(2*le):2*Math.PI/(2*Wc-1),pe=c/me,de=isFinite(c)?1+Math.floor(Z*pe):Wc;de>Wc&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${de} samples when the maximum is set to ${Wc}`);const Ce=[];let Fe=0;for(let bt=0;bt<Wc;++bt){const Ne=bt/pe,dt=Math.exp(-Ne*Ne/2);Ce.push(dt),bt===0?Fe+=dt:bt<de&&(Fe+=2*dt)}for(let bt=0;bt<Ce.length;bt++)Ce[bt]=Ce[bt]/Fe;re.envMap.value=e.texture,re.samples.value=de,re.weights.value=Ce,re.latitudinal.value=p==="latitudinal",A&&(re.poleAxis.value=A);const{_lodMax:Re}=this;re.dTheta.value=me,re.mipInt.value=Re-r;const De=this._sizeLods[a],Ve=3*De*(a>Re-Iu?a-Re+Iu:0),ct=4*(this._cubeSize-De);Ru(n,Ve,ct,3*De,2*De),N.setRenderTarget(n),N.render(ne,Ep)}}function bp(x){const e=[],n=[],r=[];let a=x;const c=x-Iu+1+xp.length;for(let p=0;p<c;p++){const A=Math.pow(2,a);n.push(A);let N=1/A;p>x-Iu?N=xp[p-x+Iu-1]:p===0&&(N=0),r.push(N);const H=1/(A-2),Z=-H,ne=1+H,re=[Z,Z,ne,Z,ne,ne,Z,Z,ne,ne,Z,ne],le=6,me=6,pe=3,de=2,Ce=1,Fe=new Float32Array(pe*me*le),Re=new Float32Array(de*me*le),De=new Float32Array(Ce*me*le);for(let ct=0;ct<le;ct++){const bt=ct%3*2/3-1,Ne=ct>2?0:-1,dt=[bt,Ne,0,bt+2/3,Ne,0,bt+2/3,Ne+1,0,bt,Ne,0,bt+2/3,Ne+1,0,bt,Ne+1,0];Fe.set(dt,pe*me*ct),Re.set(re,de*me*ct);const vt=[ct,ct,ct,ct,ct,ct];De.set(vt,Ce*me*ct)}const Ve=new Pr;Ve.setAttribute("position",new Is(Fe,pe)),Ve.setAttribute("uv",new Is(Re,de)),Ve.setAttribute("faceIndex",new Is(De,Ce)),e.push(Ve),a>Iu&&a--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function _p(x,e,n){const r=new No(x,e,n);return r.texture.mapping=Me,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ru(x,e,n,r,a){x.viewport.set(e,n,r,a),x.scissor.set(e,n,r,a)}function $m(x,e,n){const r=new Float32Array(Wc),a=new nt(0,1,0);return new ea({name:"SphericalGaussianBlur",defines:{n:Wc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${x}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:ml(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:J,depthTest:!1,depthWrite:!1})}function D0(){return new ea({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ml(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:J,depthTest:!1,depthWrite:!1})}function jl(){return new ea({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ml(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:J,depthTest:!1,depthWrite:!1})}function ml(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ov(x){let e=new WeakMap,n=null;function r(A){if(A&&A.isTexture){const N=A.mapping,H=N===He||N===et,Z=N===Ye||N===ze;if(H||Z)if(A.isRenderTargetTexture&&A.needsPMREMUpdate===!0){A.needsPMREMUpdate=!1;let ne=e.get(A);return n===null&&(n=new Dh(x)),ne=H?n.fromEquirectangular(A,ne):n.fromCubemap(A,ne),e.set(A,ne),ne.texture}else{if(e.has(A))return e.get(A).texture;{const ne=A.image;if(H&&ne&&ne.height>0||Z&&ne&&a(ne)){n===null&&(n=new Dh(x));const re=H?n.fromEquirectangular(A):n.fromCubemap(A);return e.set(A,re),A.addEventListener("dispose",c),re.texture}else return null}}}return A}function a(A){let N=0;const H=6;for(let Z=0;Z<H;Z++)A[Z]!==void 0&&N++;return N===H}function c(A){const N=A.target;N.removeEventListener("dispose",c);const H=e.get(N);H!==void 0&&(e.delete(N),H.dispose())}function p(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:p}}function wp(x){const e={};function n(r){if(e[r]!==void 0)return e[r];let a;switch(r){case"WEBGL_depth_texture":a=x.getExtension("WEBGL_depth_texture")||x.getExtension("MOZ_WEBGL_depth_texture")||x.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=x.getExtension("WEBGL_compressed_texture_s3tc")||x.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=x.getExtension(r)}return e[r]=a,a}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const a=n(r);return a===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),a}}}function Cp(x,e,n,r){const a={},c=new WeakMap;function p(ne){const re=ne.target;re.index!==null&&e.remove(re.index);for(const me in re.attributes)e.remove(re.attributes[me]);re.removeEventListener("dispose",p),delete a[re.id];const le=c.get(re);le&&(e.remove(le),c.delete(re)),r.releaseStatesOfGeometry(re),re.isInstancedBufferGeometry===!0&&delete re._maxInstanceCount,n.memory.geometries--}function A(ne,re){return a[re.id]===!0||(re.addEventListener("dispose",p),a[re.id]=!0,n.memory.geometries++),re}function N(ne){const re=ne.attributes;for(const me in re)e.update(re[me],34962);const le=ne.morphAttributes;for(const me in le){const pe=le[me];for(let de=0,Ce=pe.length;de<Ce;de++)e.update(pe[de],34962)}}function H(ne){const re=[],le=ne.index,me=ne.attributes.position;let pe=0;if(le!==null){const Fe=le.array;pe=le.version;for(let Re=0,De=Fe.length;Re<De;Re+=3){const Ve=Fe[Re+0],ct=Fe[Re+1],bt=Fe[Re+2];re.push(Ve,ct,ct,bt,bt,Ve)}}else{const Fe=me.array;pe=me.version;for(let Re=0,De=Fe.length/3-1;Re<De;Re+=3){const Ve=Re+0,ct=Re+1,bt=Re+2;re.push(Ve,ct,ct,bt,bt,Ve)}}const de=new(pd(re)?Xf:Kf)(re,1);de.version=pe;const Ce=c.get(ne);Ce&&e.remove(Ce),c.set(ne,de)}function Z(ne){const re=c.get(ne);if(re){const le=ne.index;le!==null&&re.version<le.version&&H(ne)}else H(ne);return c.get(ne)}return{get:A,update:N,getWireframeAttribute:Z}}function Od(x,e,n,r){const a=r.isWebGL2;let c;function p(re){c=re}let A,N;function H(re){A=re.type,N=re.bytesPerElement}function Z(re,le){x.drawElements(c,le,A,re*N),n.update(le,c,1)}function ne(re,le,me){if(me===0)return;let pe,de;if(a)pe=x,de="drawElementsInstanced";else if(pe=e.get("ANGLE_instanced_arrays"),de="drawElementsInstancedANGLE",pe===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}pe[de](c,le,A,re*N,me),n.update(le,c,me)}this.setMode=p,this.setIndex=H,this.render=Z,this.renderInstances=ne}function Mp(x){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(c,p,A){switch(n.calls++,p){case 4:n.triangles+=A*(c/3);break;case 1:n.lines+=A*(c/2);break;case 3:n.lines+=A*(c-1);break;case 2:n.lines+=A*c;break;case 0:n.points+=A*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",p);break}}function a(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:a,update:r}}function Fd(x,e){return x[0]-e[0]}function Nd(x,e){return Math.abs(e[1])-Math.abs(x[1])}function Tp(x,e,n){const r={},a=new Float32Array(8),c=new WeakMap,p=new Zr,A=[];for(let H=0;H<8;H++)A[H]=[H,0];function N(H,Z,ne,re){const le=H.morphTargetInfluences;if(e.isWebGL2===!0){const pe=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,de=pe!==void 0?pe.length:0;let Ce=c.get(Z);if(Ce===void 0||Ce.count!==de){let kn=function(){Dt.dispose(),c.delete(Z),Z.removeEventListener("dispose",kn)};var me=kn;Ce!==void 0&&Ce.texture.dispose();const De=Z.morphAttributes.position!==void 0,Ve=Z.morphAttributes.normal!==void 0,ct=Z.morphAttributes.color!==void 0,bt=Z.morphAttributes.position||[],Ne=Z.morphAttributes.normal||[],dt=Z.morphAttributes.color||[];let vt=0;De===!0&&(vt=1),Ve===!0&&(vt=2),ct===!0&&(vt=3);let Ut=Z.attributes.position.count*vt,hn=1;Ut>e.maxTextureSize&&(hn=Math.ceil(Ut/e.maxTextureSize),Ut=e.maxTextureSize);const Kt=new Float32Array(Ut*hn*4*de),Dt=new al(Kt,Ut,hn,de);Dt.type=vn,Dt.needsUpdate=!0;const sn=vt*4;for(let Zn=0;Zn<de;Zn++){const Ln=bt[Zn],ui=Ne[Zn],si=dt[Zn],Qi=Ut*hn*4*Zn;for(let Li=0;Li<Ln.count;Li++){const gn=Li*sn;De===!0&&(p.fromBufferAttribute(Ln,Li),Kt[Qi+gn+0]=p.x,Kt[Qi+gn+1]=p.y,Kt[Qi+gn+2]=p.z,Kt[Qi+gn+3]=0),Ve===!0&&(p.fromBufferAttribute(ui,Li),Kt[Qi+gn+4]=p.x,Kt[Qi+gn+5]=p.y,Kt[Qi+gn+6]=p.z,Kt[Qi+gn+7]=0),ct===!0&&(p.fromBufferAttribute(si,Li),Kt[Qi+gn+8]=p.x,Kt[Qi+gn+9]=p.y,Kt[Qi+gn+10]=p.z,Kt[Qi+gn+11]=si.itemSize===4?p.w:1)}}Ce={count:de,texture:Dt,size:new On(Ut,hn)},c.set(Z,Ce),Z.addEventListener("dispose",kn)}let Fe=0;for(let De=0;De<le.length;De++)Fe+=le[De];const Re=Z.morphTargetsRelative?1:1-Fe;re.getUniforms().setValue(x,"morphTargetBaseInfluence",Re),re.getUniforms().setValue(x,"morphTargetInfluences",le),re.getUniforms().setValue(x,"morphTargetsTexture",Ce.texture,n),re.getUniforms().setValue(x,"morphTargetsTextureSize",Ce.size)}else{const pe=le===void 0?0:le.length;let de=r[Z.id];if(de===void 0||de.length!==pe){de=[];for(let Ve=0;Ve<pe;Ve++)de[Ve]=[Ve,0];r[Z.id]=de}for(let Ve=0;Ve<pe;Ve++){const ct=de[Ve];ct[0]=Ve,ct[1]=le[Ve]}de.sort(Nd);for(let Ve=0;Ve<8;Ve++)Ve<pe&&de[Ve][1]?(A[Ve][0]=de[Ve][0],A[Ve][1]=de[Ve][1]):(A[Ve][0]=Number.MAX_SAFE_INTEGER,A[Ve][1]=0);A.sort(Fd);const Ce=Z.morphAttributes.position,Fe=Z.morphAttributes.normal;let Re=0;for(let Ve=0;Ve<8;Ve++){const ct=A[Ve],bt=ct[0],Ne=ct[1];bt!==Number.MAX_SAFE_INTEGER&&Ne?(Ce&&Z.getAttribute("morphTarget"+Ve)!==Ce[bt]&&Z.setAttribute("morphTarget"+Ve,Ce[bt]),Fe&&Z.getAttribute("morphNormal"+Ve)!==Fe[bt]&&Z.setAttribute("morphNormal"+Ve,Fe[bt]),a[Ve]=Ne,Re+=Ne):(Ce&&Z.hasAttribute("morphTarget"+Ve)===!0&&Z.deleteAttribute("morphTarget"+Ve),Fe&&Z.hasAttribute("morphNormal"+Ve)===!0&&Z.deleteAttribute("morphNormal"+Ve),a[Ve]=0)}const De=Z.morphTargetsRelative?1:1-Re;re.getUniforms().setValue(x,"morphTargetBaseInfluence",De),re.getUniforms().setValue(x,"morphTargetInfluences",a)}}return{update:N}}function Sp(x,e,n,r){let a=new WeakMap;function c(N){const H=r.render.frame,Z=N.geometry,ne=e.get(N,Z);return a.get(ne)!==H&&(e.update(ne),a.set(ne,H)),N.isInstancedMesh&&(N.hasEventListener("dispose",A)===!1&&N.addEventListener("dispose",A),n.update(N.instanceMatrix,34962),N.instanceColor!==null&&n.update(N.instanceColor,34962)),ne}function p(){a=new WeakMap}function A(N){const H=N.target;H.removeEventListener("dispose",A),n.remove(H.instanceMatrix),H.instanceColor!==null&&n.remove(H.instanceColor)}return{update:c,dispose:p}}const kd=new js,Ud=new al,Gd=new Fl,Ip=new zc,la=[],Rp=[],Bu=new Float32Array(16),Bp=new Float32Array(9),Lp=new Float32Array(4);function Xc(x,e,n){const r=x[0];if(r<=0||r>0)return x;const a=e*n;let c=la[a];if(c===void 0&&(c=new Float32Array(a),la[a]=c),e!==0){r.toArray(c,0);for(let p=1,A=0;p!==e;++p)A+=n,x[p].toArray(c,A)}return c}function yo(x,e){if(x.length!==e.length)return!1;for(let n=0,r=x.length;n<r;n++)if(x[n]!==e[n])return!1;return!0}function xo(x,e){for(let n=0,r=e.length;n<r;n++)x[n]=e[n]}function Ph(x,e){let n=Rp[e];n===void 0&&(n=new Int32Array(e),Rp[e]=n);for(let r=0;r!==e;++r)n[r]=x.allocateTextureUnit();return n}function Fv(x,e){const n=this.cache;n[0]!==e&&(x.uniform1f(this.addr,e),n[0]=e)}function Ks(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(x.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;x.uniform2fv(this.addr,e),xo(n,e)}}function gl(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(x.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(x.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(yo(n,e))return;x.uniform3fv(this.addr,e),xo(n,e)}}function Lu(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(x.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;x.uniform4fv(this.addr,e),xo(n,e)}}function eg(x,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;x.uniformMatrix2fv(this.addr,!1,e),xo(n,e)}else{if(yo(n,r))return;Lp.set(r),x.uniformMatrix2fv(this.addr,!1,Lp),xo(n,r)}}function Hd(x,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;x.uniformMatrix3fv(this.addr,!1,e),xo(n,e)}else{if(yo(n,r))return;Bp.set(r),x.uniformMatrix3fv(this.addr,!1,Bp),xo(n,r)}}function Oh(x,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;x.uniformMatrix4fv(this.addr,!1,e),xo(n,e)}else{if(yo(n,r))return;Bu.set(r),x.uniformMatrix4fv(this.addr,!1,Bu),xo(n,r)}}function Du(x,e){const n=this.cache;n[0]!==e&&(x.uniform1i(this.addr,e),n[0]=e)}function zd(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(x.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;x.uniform2iv(this.addr,e),xo(n,e)}}function Vd(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(x.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yo(n,e))return;x.uniform3iv(this.addr,e),xo(n,e)}}function Pu(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(x.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;x.uniform4iv(this.addr,e),xo(n,e)}}function P0(x,e){const n=this.cache;n[0]!==e&&(x.uniform1ui(this.addr,e),n[0]=e)}function Al(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(x.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;x.uniform2uiv(this.addr,e),xo(n,e)}}function Nv(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(x.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yo(n,e))return;x.uniform3uiv(this.addr,e),xo(n,e)}}function Dp(x,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(x.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;x.uniform4uiv(this.addr,e),xo(n,e)}}function O0(x,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(x.uniform1i(this.addr,a),r[0]=a),n.setTexture2D(e||kd,a)}function Qd(x,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(x.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(e||Gd,a)}function tg(x,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(x.uniform1i(this.addr,a),r[0]=a),n.setTextureCube(e||Ip,a)}function Pp(x,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(x.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(e||Ud,a)}function ng(x){switch(x){case 5126:return Fv;case 35664:return Ks;case 35665:return gl;case 35666:return Lu;case 35674:return eg;case 35675:return Hd;case 35676:return Oh;case 5124:case 35670:return Du;case 35667:case 35671:return zd;case 35668:case 35672:return Vd;case 35669:case 35673:return Pu;case 5125:return P0;case 36294:return Al;case 36295:return Nv;case 36296:return Dp;case 35678:case 36198:case 36298:case 36306:case 35682:return O0;case 35679:case 36299:case 36307:return Qd;case 35680:case 36300:case 36308:case 36293:return tg;case 36289:case 36303:case 36311:case 36292:return Pp}}function ig(x,e){x.uniform1fv(this.addr,e)}function rg(x,e){const n=Xc(e,this.size,2);x.uniform2fv(this.addr,n)}function sg(x,e){const n=Xc(e,this.size,3);x.uniform3fv(this.addr,n)}function Op(x,e){const n=Xc(e,this.size,4);x.uniform4fv(this.addr,n)}function og(x,e){const n=Xc(e,this.size,4);x.uniformMatrix2fv(this.addr,!1,n)}function jd(x,e){const n=Xc(e,this.size,9);x.uniformMatrix3fv(this.addr,!1,n)}function F0(x,e){const n=Xc(e,this.size,16);x.uniformMatrix4fv(this.addr,!1,n)}function Fp(x,e){x.uniform1iv(this.addr,e)}function ag(x,e){x.uniform2iv(this.addr,e)}function Np(x,e){x.uniform3iv(this.addr,e)}function lg(x,e){x.uniform4iv(this.addr,e)}function N0(x,e){x.uniform1uiv(this.addr,e)}function Wd(x,e){x.uniform2uiv(this.addr,e)}function Yc(x,e){x.uniform3uiv(this.addr,e)}function vl(x,e){x.uniform4uiv(this.addr,e)}function cg(x,e,n){const r=this.cache,a=e.length,c=Ph(n,a);yo(r,c)||(x.uniform1iv(this.addr,c),xo(r,c));for(let p=0;p!==a;++p)n.setTexture2D(e[p]||kd,c[p])}function k0(x,e,n){const r=this.cache,a=e.length,c=Ph(n,a);yo(r,c)||(x.uniform1iv(this.addr,c),xo(r,c));for(let p=0;p!==a;++p)n.setTexture3D(e[p]||Gd,c[p])}function U0(x,e,n){const r=this.cache,a=e.length,c=Ph(n,a);yo(r,c)||(x.uniform1iv(this.addr,c),xo(r,c));for(let p=0;p!==a;++p)n.setTextureCube(e[p]||Ip,c[p])}function G0(x,e,n){const r=this.cache,a=e.length,c=Ph(n,a);yo(r,c)||(x.uniform1iv(this.addr,c),xo(r,c));for(let p=0;p!==a;++p)n.setTexture2DArray(e[p]||Ud,c[p])}function ug(x){switch(x){case 5126:return ig;case 35664:return rg;case 35665:return sg;case 35666:return Op;case 35674:return og;case 35675:return jd;case 35676:return F0;case 5124:case 35670:return Fp;case 35667:case 35671:return ag;case 35668:case 35672:return Np;case 35669:case 35673:return lg;case 5125:return N0;case 36294:return Wd;case 36295:return Yc;case 36296:return vl;case 35678:case 36198:case 36298:case 36306:case 35682:return cg;case 35679:case 36299:case 36307:return k0;case 35680:case 36300:case 36308:case 36293:return U0;case 36289:case 36303:case 36311:case 36292:return G0}}class H0{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=ng(n.type)}}class hg{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=ug(n.type)}}class z0{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const a=this.seq;for(let c=0,p=a.length;c!==p;++c){const A=a[c];A.setValue(e,n[A.id],r)}}}const Ou=/(\w+)(\])?(\[|\.)?/g;function kp(x,e){x.seq.push(e),x.map[e.id]=e}function V0(x,e,n){const r=x.name,a=r.length;for(Ou.lastIndex=0;;){const c=Ou.exec(r),p=Ou.lastIndex;let A=c[1];const N=c[2]==="]",H=c[3];if(N&&(A=A|0),H===void 0||H==="["&&p+2===a){kp(n,H===void 0?new H0(A,x,e):new hg(A,x,e));break}else{let ne=n.map[A];ne===void 0&&(ne=new z0(A),kp(n,ne)),n=ne}}}class Fh{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,35718);for(let a=0;a<r;++a){const c=e.getActiveUniform(n,a),p=e.getUniformLocation(n,c.name);V0(c,p,this)}}setValue(e,n,r,a){const c=this.map[n];c!==void 0&&c.setValue(e,r,a)}setOptional(e,n,r){const a=n[r];a!==void 0&&this.setValue(e,r,a)}static upload(e,n,r,a){for(let c=0,p=n.length;c!==p;++c){const A=n[c],N=r[A.id];N.needsUpdate!==!1&&A.setValue(e,N.value,a)}}static seqWithValue(e,n){const r=[];for(let a=0,c=e.length;a!==c;++a){const p=e[a];p.id in n&&r.push(p)}return r}}function Nh(x,e,n){const r=x.createShader(e);return x.shaderSource(r,n),x.compileShader(r),r}let Q0=0;function dg(x,e){const n=x.split(`
`),r=[],a=Math.max(e-6,0),c=Math.min(e+6,n.length);for(let p=a;p<c;p++){const A=p+1;r.push(`${A===e?">":" "} ${A}: ${n[p]}`)}return r.join(`
`)}function fg(x){switch(x){case Yr:return["Linear","( value )"];case Ar:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",x),["Linear","( value )"]}}function Up(x,e,n){const r=x.getShaderParameter(e,35713),a=x.getShaderInfoLog(e).trim();if(r&&a==="")return"";const c=/ERROR: 0:(\d+)/.exec(a);if(c){const p=parseInt(c[1]);return n.toUpperCase()+`

`+a+`

`+dg(x.getShaderSource(e),p)}else return a}function pg(x,e){const n=fg(e);return"vec4 "+x+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Kd(x,e){let n;switch(e){case tn:n="Linear";break;case ri:n="Reinhard";break;case ni:n="OptimizedCineon";break;case zt:n="ACESFilmic";break;case Ue:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+x+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function j0(x){return[x.extensionDerivatives||!!x.envMapCubeUVHeight||x.bumpMap||x.tangentSpaceNormalMap||x.clearcoatNormalMap||x.flatShading||x.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(x.extensionFragDepth||x.logarithmicDepthBuffer)&&x.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",x.extensionDrawBuffers&&x.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(x.extensionShaderTextureLOD||x.envMap||x.transmission)&&x.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xd).join(`
`)}function mg(x){const e=[];for(const n in x){const r=x[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function W0(x,e){const n={},r=x.getProgramParameter(e,35721);for(let a=0;a<r;a++){const c=x.getActiveAttrib(e,a),p=c.name;let A=1;c.type===35674&&(A=2),c.type===35675&&(A=3),c.type===35676&&(A=4),n[p]={type:c.type,location:x.getAttribLocation(e,p),locationSize:A}}return n}function Xd(x){return x!==""}function K0(x,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return x.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function gg(x,e){return x.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const X0=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gp(x){return x.replace(X0,Ag)}function Ag(x,e){const n=Qr[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return Gp(n)}const kv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Yd(x){return x.replace(kv,vg)}function vg(x,e,n,r){let a="";for(let c=parseInt(e);c<parseInt(n);c++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return a}function yg(x){let e="precision "+x.precision+` float;
precision `+x.precision+" int;";return x.precision==="highp"?e+=`
#define HIGH_PRECISION`:x.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:x.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Y0(x){let e="SHADOWMAP_TYPE_BASIC";return x.shadowMapType===_?e="SHADOWMAP_TYPE_PCF":x.shadowMapType===O?e="SHADOWMAP_TYPE_PCF_SOFT":x.shadowMapType===R&&(e="SHADOWMAP_TYPE_VSM"),e}function q0(x){let e="ENVMAP_TYPE_CUBE";if(x.envMap)switch(x.envMapMode){case Ye:case ze:e="ENVMAP_TYPE_CUBE";break;case Me:e="ENVMAP_TYPE_CUBE_UV";break}return e}function J0(x){let e="ENVMAP_MODE_REFLECTION";if(x.envMap)switch(x.envMapMode){case ze:e="ENVMAP_MODE_REFRACTION";break}return e}function Z0(x){let e="ENVMAP_BLENDING_NONE";if(x.envMap)switch(x.combine){case qt:e="ENVMAP_BLENDING_MULTIPLY";break;case un:e="ENVMAP_BLENDING_MIX";break;case dn:e="ENVMAP_BLENDING_ADD";break}return e}function Uv(x){const e=x.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function $0(x,e,n,r){const a=x.getContext(),c=n.defines;let p=n.vertexShader,A=n.fragmentShader;const N=Y0(n),H=q0(n),Z=J0(n),ne=Z0(n),re=Uv(n),le=n.isWebGL2?"":j0(n),me=mg(c),pe=a.createProgram();let de,Ce,Fe=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(de=[me].filter(Xd).join(`
`),de.length>0&&(de+=`
`),Ce=[le,me].filter(Xd).join(`
`),Ce.length>0&&(Ce+=`
`)):(de=[yg(n),"#define SHADER_NAME "+n.shaderName,me,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+Z:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+N:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xd).join(`
`),Ce=[le,yg(n),"#define SHADER_NAME "+n.shaderName,me,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+H:"",n.envMap?"#define "+Z:"",n.envMap?"#define "+ne:"",re?"#define CUBEUV_TEXEL_WIDTH "+re.texelWidth:"",re?"#define CUBEUV_TEXEL_HEIGHT "+re.texelHeight:"",re?"#define CUBEUV_MAX_MIP "+re.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+N:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==bn?"#define TONE_MAPPING":"",n.toneMapping!==bn?Qr.tonemapping_pars_fragment:"",n.toneMapping!==bn?Kd("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Qr.encodings_pars_fragment,pg("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Xd).join(`
`)),p=Gp(p),p=K0(p,n),p=gg(p,n),A=Gp(A),A=K0(A,n),A=gg(A,n),p=Yd(p),A=Yd(A),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(Fe=`#version 300 es
`,de=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+de,Ce=["#define varying in",n.glslVersion===ah?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ah?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ce);const Re=Fe+de+p,De=Fe+Ce+A,Ve=Nh(a,35633,Re),ct=Nh(a,35632,De);if(a.attachShader(pe,Ve),a.attachShader(pe,ct),n.index0AttributeName!==void 0?a.bindAttribLocation(pe,0,n.index0AttributeName):n.morphTargets===!0&&a.bindAttribLocation(pe,0,"position"),a.linkProgram(pe),x.debug.checkShaderErrors){const dt=a.getProgramInfoLog(pe).trim(),vt=a.getShaderInfoLog(Ve).trim(),Ut=a.getShaderInfoLog(ct).trim();let hn=!0,Kt=!0;if(a.getProgramParameter(pe,35714)===!1){hn=!1;const Dt=Up(a,Ve,"vertex"),sn=Up(a,ct,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(pe,35715)+`

Program Info Log: `+dt+`
`+Dt+`
`+sn)}else dt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",dt):(vt===""||Ut==="")&&(Kt=!1);Kt&&(this.diagnostics={runnable:hn,programLog:dt,vertexShader:{log:vt,prefix:de},fragmentShader:{log:Ut,prefix:Ce}})}a.deleteShader(Ve),a.deleteShader(ct);let bt;this.getUniforms=function(){return bt===void 0&&(bt=new Fh(a,pe)),bt};let Ne;return this.getAttributes=function(){return Ne===void 0&&(Ne=W0(a,pe)),Ne},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(pe),this.program=void 0},this.name=n.shaderName,this.id=Q0++,this.cacheKey=e,this.usedTimes=1,this.program=pe,this.vertexShader=Ve,this.fragmentShader=ct,this}let Fu=0;class eA{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,a=this._getShaderStage(n),c=this._getShaderStage(r),p=this._getShaderCacheForMaterial(e);return p.has(a)===!1&&(p.add(a),a.usedTimes++),p.has(c)===!1&&(p.add(c),c.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Gv(e),n.set(e,r)),r}}class Gv{constructor(e){this.id=Fu++,this.code=e,this.usedTimes=0}}function Nu(x,e,n,r,a,c,p){const A=new ps,N=new eA,H=[],Z=a.isWebGL2,ne=a.logarithmicDepthBuffer,re=a.vertexTextures;let le=a.precision;const me={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function pe(Ne,dt,vt,Ut,hn){const Kt=Ut.fog,Dt=hn.geometry,sn=Ne.isMeshStandardMaterial?Ut.environment:null,kn=(Ne.isMeshStandardMaterial?n:e).get(Ne.envMap||sn),Zn=!!kn&&kn.mapping===Me?kn.image.height:null,Ln=me[Ne.type];Ne.precision!==null&&(le=a.getMaxPrecision(Ne.precision),le!==Ne.precision&&console.warn("THREE.WebGLProgram.getParameters:",Ne.precision,"not supported, using",le,"instead."));const ui=Dt.morphAttributes.position||Dt.morphAttributes.normal||Dt.morphAttributes.color,si=ui!==void 0?ui.length:0;let Qi=0;Dt.morphAttributes.position!==void 0&&(Qi=1),Dt.morphAttributes.normal!==void 0&&(Qi=2),Dt.morphAttributes.color!==void 0&&(Qi=3);let Li,gn,$n,_i;if(Ln){const ns=Ca[Ln];Li=ns.vertexShader,gn=ns.fragmentShader}else Li=Ne.vertexShader,gn=Ne.fragmentShader,N.update(Ne),$n=N.getVertexShaderID(Ne),_i=N.getFragmentShaderID(Ne);const ln=x.getRenderTarget(),Wi=Ne.alphaTest>0,wi=Ne.clearcoat>0,gr=Ne.iridescence>0;return{isWebGL2:Z,shaderID:Ln,shaderName:Ne.type,vertexShader:Li,fragmentShader:gn,defines:Ne.defines,customVertexShaderID:$n,customFragmentShaderID:_i,isRawShaderMaterial:Ne.isRawShaderMaterial===!0,glslVersion:Ne.glslVersion,precision:le,instancing:hn.isInstancedMesh===!0,instancingColor:hn.isInstancedMesh===!0&&hn.instanceColor!==null,supportsVertexTextures:re,outputEncoding:ln===null?x.outputEncoding:ln.isXRRenderTarget===!0?ln.texture.encoding:Yr,map:!!Ne.map,matcap:!!Ne.matcap,envMap:!!kn,envMapMode:kn&&kn.mapping,envMapCubeUVHeight:Zn,lightMap:!!Ne.lightMap,aoMap:!!Ne.aoMap,emissiveMap:!!Ne.emissiveMap,bumpMap:!!Ne.bumpMap,normalMap:!!Ne.normalMap,objectSpaceNormalMap:Ne.normalMapType===qr,tangentSpaceNormalMap:Ne.normalMapType===Vs,decodeVideoTexture:!!Ne.map&&Ne.map.isVideoTexture===!0&&Ne.map.encoding===Ar,clearcoat:wi,clearcoatMap:wi&&!!Ne.clearcoatMap,clearcoatRoughnessMap:wi&&!!Ne.clearcoatRoughnessMap,clearcoatNormalMap:wi&&!!Ne.clearcoatNormalMap,iridescence:gr,iridescenceMap:gr&&!!Ne.iridescenceMap,iridescenceThicknessMap:gr&&!!Ne.iridescenceThicknessMap,displacementMap:!!Ne.displacementMap,roughnessMap:!!Ne.roughnessMap,metalnessMap:!!Ne.metalnessMap,specularMap:!!Ne.specularMap,specularIntensityMap:!!Ne.specularIntensityMap,specularColorMap:!!Ne.specularColorMap,opaque:Ne.transparent===!1&&Ne.blending===j,alphaMap:!!Ne.alphaMap,alphaTest:Wi,gradientMap:!!Ne.gradientMap,sheen:Ne.sheen>0,sheenColorMap:!!Ne.sheenColorMap,sheenRoughnessMap:!!Ne.sheenRoughnessMap,transmission:Ne.transmission>0,transmissionMap:!!Ne.transmissionMap,thicknessMap:!!Ne.thicknessMap,combine:Ne.combine,vertexTangents:!!Ne.normalMap&&!!Dt.attributes.tangent,vertexColors:Ne.vertexColors,vertexAlphas:Ne.vertexColors===!0&&!!Dt.attributes.color&&Dt.attributes.color.itemSize===4,vertexUvs:!!Ne.map||!!Ne.bumpMap||!!Ne.normalMap||!!Ne.specularMap||!!Ne.alphaMap||!!Ne.emissiveMap||!!Ne.roughnessMap||!!Ne.metalnessMap||!!Ne.clearcoatMap||!!Ne.clearcoatRoughnessMap||!!Ne.clearcoatNormalMap||!!Ne.iridescenceMap||!!Ne.iridescenceThicknessMap||!!Ne.displacementMap||!!Ne.transmissionMap||!!Ne.thicknessMap||!!Ne.specularIntensityMap||!!Ne.specularColorMap||!!Ne.sheenColorMap||!!Ne.sheenRoughnessMap,uvsVertexOnly:!(!!Ne.map||!!Ne.bumpMap||!!Ne.normalMap||!!Ne.specularMap||!!Ne.alphaMap||!!Ne.emissiveMap||!!Ne.roughnessMap||!!Ne.metalnessMap||!!Ne.clearcoatNormalMap||!!Ne.iridescenceMap||!!Ne.iridescenceThicknessMap||Ne.transmission>0||!!Ne.transmissionMap||!!Ne.thicknessMap||!!Ne.specularIntensityMap||!!Ne.specularColorMap||Ne.sheen>0||!!Ne.sheenColorMap||!!Ne.sheenRoughnessMap)&&!!Ne.displacementMap,fog:!!Kt,useFog:Ne.fog===!0,fogExp2:Kt&&Kt.isFogExp2,flatShading:!!Ne.flatShading,sizeAttenuation:Ne.sizeAttenuation,logarithmicDepthBuffer:ne,skinning:hn.isSkinnedMesh===!0,morphTargets:Dt.morphAttributes.position!==void 0,morphNormals:Dt.morphAttributes.normal!==void 0,morphColors:Dt.morphAttributes.color!==void 0,morphTargetsCount:si,morphTextureStride:Qi,numDirLights:dt.directional.length,numPointLights:dt.point.length,numSpotLights:dt.spot.length,numSpotLightMaps:dt.spotLightMap.length,numRectAreaLights:dt.rectArea.length,numHemiLights:dt.hemi.length,numDirLightShadows:dt.directionalShadowMap.length,numPointLightShadows:dt.pointShadowMap.length,numSpotLightShadows:dt.spotShadowMap.length,numSpotLightShadowsWithMaps:dt.numSpotLightShadowsWithMaps,numClippingPlanes:p.numPlanes,numClipIntersection:p.numIntersection,dithering:Ne.dithering,shadowMapEnabled:x.shadowMap.enabled&&vt.length>0,shadowMapType:x.shadowMap.type,toneMapping:Ne.toneMapped?x.toneMapping:bn,physicallyCorrectLights:x.physicallyCorrectLights,premultipliedAlpha:Ne.premultipliedAlpha,doubleSided:Ne.side===Y,flipSided:Ne.side===P,useDepthPacking:!!Ne.depthPacking,depthPacking:Ne.depthPacking||0,index0AttributeName:Ne.index0AttributeName,extensionDerivatives:Ne.extensions&&Ne.extensions.derivatives,extensionFragDepth:Ne.extensions&&Ne.extensions.fragDepth,extensionDrawBuffers:Ne.extensions&&Ne.extensions.drawBuffers,extensionShaderTextureLOD:Ne.extensions&&Ne.extensions.shaderTextureLOD,rendererExtensionFragDepth:Z||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:Z||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:Z||r.has("EXT_shader_texture_lod"),customProgramCacheKey:Ne.customProgramCacheKey()}}function de(Ne){const dt=[];if(Ne.shaderID?dt.push(Ne.shaderID):(dt.push(Ne.customVertexShaderID),dt.push(Ne.customFragmentShaderID)),Ne.defines!==void 0)for(const vt in Ne.defines)dt.push(vt),dt.push(Ne.defines[vt]);return Ne.isRawShaderMaterial===!1&&(Ce(dt,Ne),Fe(dt,Ne),dt.push(x.outputEncoding)),dt.push(Ne.customProgramCacheKey),dt.join()}function Ce(Ne,dt){Ne.push(dt.precision),Ne.push(dt.outputEncoding),Ne.push(dt.envMapMode),Ne.push(dt.envMapCubeUVHeight),Ne.push(dt.combine),Ne.push(dt.vertexUvs),Ne.push(dt.fogExp2),Ne.push(dt.sizeAttenuation),Ne.push(dt.morphTargetsCount),Ne.push(dt.morphAttributeCount),Ne.push(dt.numDirLights),Ne.push(dt.numPointLights),Ne.push(dt.numSpotLights),Ne.push(dt.numSpotLightMaps),Ne.push(dt.numHemiLights),Ne.push(dt.numRectAreaLights),Ne.push(dt.numDirLightShadows),Ne.push(dt.numPointLightShadows),Ne.push(dt.numSpotLightShadows),Ne.push(dt.numSpotLightShadowsWithMaps),Ne.push(dt.shadowMapType),Ne.push(dt.toneMapping),Ne.push(dt.numClippingPlanes),Ne.push(dt.numClipIntersection),Ne.push(dt.depthPacking)}function Fe(Ne,dt){A.disableAll(),dt.isWebGL2&&A.enable(0),dt.supportsVertexTextures&&A.enable(1),dt.instancing&&A.enable(2),dt.instancingColor&&A.enable(3),dt.map&&A.enable(4),dt.matcap&&A.enable(5),dt.envMap&&A.enable(6),dt.lightMap&&A.enable(7),dt.aoMap&&A.enable(8),dt.emissiveMap&&A.enable(9),dt.bumpMap&&A.enable(10),dt.normalMap&&A.enable(11),dt.objectSpaceNormalMap&&A.enable(12),dt.tangentSpaceNormalMap&&A.enable(13),dt.clearcoat&&A.enable(14),dt.clearcoatMap&&A.enable(15),dt.clearcoatRoughnessMap&&A.enable(16),dt.clearcoatNormalMap&&A.enable(17),dt.iridescence&&A.enable(18),dt.iridescenceMap&&A.enable(19),dt.iridescenceThicknessMap&&A.enable(20),dt.displacementMap&&A.enable(21),dt.specularMap&&A.enable(22),dt.roughnessMap&&A.enable(23),dt.metalnessMap&&A.enable(24),dt.gradientMap&&A.enable(25),dt.alphaMap&&A.enable(26),dt.alphaTest&&A.enable(27),dt.vertexColors&&A.enable(28),dt.vertexAlphas&&A.enable(29),dt.vertexUvs&&A.enable(30),dt.vertexTangents&&A.enable(31),dt.uvsVertexOnly&&A.enable(32),Ne.push(A.mask),A.disableAll(),dt.fog&&A.enable(0),dt.useFog&&A.enable(1),dt.flatShading&&A.enable(2),dt.logarithmicDepthBuffer&&A.enable(3),dt.skinning&&A.enable(4),dt.morphTargets&&A.enable(5),dt.morphNormals&&A.enable(6),dt.morphColors&&A.enable(7),dt.premultipliedAlpha&&A.enable(8),dt.shadowMapEnabled&&A.enable(9),dt.physicallyCorrectLights&&A.enable(10),dt.doubleSided&&A.enable(11),dt.flipSided&&A.enable(12),dt.useDepthPacking&&A.enable(13),dt.dithering&&A.enable(14),dt.specularIntensityMap&&A.enable(15),dt.specularColorMap&&A.enable(16),dt.transmission&&A.enable(17),dt.transmissionMap&&A.enable(18),dt.thicknessMap&&A.enable(19),dt.sheen&&A.enable(20),dt.sheenColorMap&&A.enable(21),dt.sheenRoughnessMap&&A.enable(22),dt.decodeVideoTexture&&A.enable(23),dt.opaque&&A.enable(24),Ne.push(A.mask)}function Re(Ne){const dt=me[Ne.type];let vt;if(dt){const Ut=Ca[dt];vt=Cm.clone(Ut.uniforms)}else vt=Ne.uniforms;return vt}function De(Ne,dt){let vt;for(let Ut=0,hn=H.length;Ut<hn;Ut++){const Kt=H[Ut];if(Kt.cacheKey===dt){vt=Kt,++vt.usedTimes;break}}return vt===void 0&&(vt=new $0(x,dt,Ne,c),H.push(vt)),vt}function Ve(Ne){if(--Ne.usedTimes===0){const dt=H.indexOf(Ne);H[dt]=H[H.length-1],H.pop(),Ne.destroy()}}function ct(Ne){N.remove(Ne)}function bt(){N.dispose()}return{getParameters:pe,getProgramCacheKey:de,getUniforms:Re,acquireProgram:De,releaseProgram:Ve,releaseShaderCache:ct,programs:H,dispose:bt}}function Hv(){let x=new WeakMap;function e(c){let p=x.get(c);return p===void 0&&(p={},x.set(c,p)),p}function n(c){x.delete(c)}function r(c,p,A){x.get(c)[p]=A}function a(){x=new WeakMap}return{get:e,remove:n,update:r,dispose:a}}function xg(x,e){return x.groupOrder!==e.groupOrder?x.groupOrder-e.groupOrder:x.renderOrder!==e.renderOrder?x.renderOrder-e.renderOrder:x.material.id!==e.material.id?x.material.id-e.material.id:x.z!==e.z?x.z-e.z:x.id-e.id}function qc(x,e){return x.groupOrder!==e.groupOrder?x.groupOrder-e.groupOrder:x.renderOrder!==e.renderOrder?x.renderOrder-e.renderOrder:x.z!==e.z?e.z-x.z:x.id-e.id}function Eg(){const x=[];let e=0;const n=[],r=[],a=[];function c(){e=0,n.length=0,r.length=0,a.length=0}function p(ne,re,le,me,pe,de){let Ce=x[e];return Ce===void 0?(Ce={id:ne.id,object:ne,geometry:re,material:le,groupOrder:me,renderOrder:ne.renderOrder,z:pe,group:de},x[e]=Ce):(Ce.id=ne.id,Ce.object=ne,Ce.geometry=re,Ce.material=le,Ce.groupOrder=me,Ce.renderOrder=ne.renderOrder,Ce.z=pe,Ce.group=de),e++,Ce}function A(ne,re,le,me,pe,de){const Ce=p(ne,re,le,me,pe,de);le.transmission>0?r.push(Ce):le.transparent===!0?a.push(Ce):n.push(Ce)}function N(ne,re,le,me,pe,de){const Ce=p(ne,re,le,me,pe,de);le.transmission>0?r.unshift(Ce):le.transparent===!0?a.unshift(Ce):n.unshift(Ce)}function H(ne,re){n.length>1&&n.sort(ne||xg),r.length>1&&r.sort(re||qc),a.length>1&&a.sort(re||qc)}function Z(){for(let ne=e,re=x.length;ne<re;ne++){const le=x[ne];if(le.id===null)break;le.id=null,le.object=null,le.geometry=null,le.material=null,le.group=null}}return{opaque:n,transmissive:r,transparent:a,init:c,push:A,unshift:N,finish:Z,sort:H}}function zv(){let x=new WeakMap;function e(r,a){const c=x.get(r);let p;return c===void 0?(p=new Eg,x.set(r,[p])):a>=c.length?(p=new Eg,c.push(p)):p=c[a],p}function n(){x=new WeakMap}return{get:e,dispose:n}}function ku(){const x={};return{get:function(e){if(x[e.id]!==void 0)return x[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new nt,color:new Si};break;case"SpotLight":n={position:new nt,direction:new nt,color:new Si,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new nt,color:new Si,distance:0,decay:0};break;case"HemisphereLight":n={direction:new nt,skyColor:new Si,groundColor:new Si};break;case"RectAreaLight":n={color:new Si,position:new nt,halfWidth:new nt,halfHeight:new nt};break}return x[e.id]=n,n}}}function Vv(){const x={};return{get:function(e){if(x[e.id]!==void 0)return x[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new On,shadowCameraNear:1,shadowCameraFar:1e3};break}return x[e.id]=n,n}}}let tA=0;function nA(x,e){return(e.castShadow?2:0)-(x.castShadow?2:0)+(e.map?1:0)-(x.map?1:0)}function Qv(x,e){const n=new ku,r=Vv(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let Z=0;Z<9;Z++)a.probe.push(new nt);const c=new nt,p=new Gi,A=new Gi;function N(Z,ne){let re=0,le=0,me=0;for(let Ut=0;Ut<9;Ut++)a.probe[Ut].set(0,0,0);let pe=0,de=0,Ce=0,Fe=0,Re=0,De=0,Ve=0,ct=0,bt=0,Ne=0;Z.sort(nA);const dt=ne!==!0?Math.PI:1;for(let Ut=0,hn=Z.length;Ut<hn;Ut++){const Kt=Z[Ut],Dt=Kt.color,sn=Kt.intensity,kn=Kt.distance,Zn=Kt.shadow&&Kt.shadow.map?Kt.shadow.map.texture:null;if(Kt.isAmbientLight)re+=Dt.r*sn*dt,le+=Dt.g*sn*dt,me+=Dt.b*sn*dt;else if(Kt.isLightProbe)for(let Ln=0;Ln<9;Ln++)a.probe[Ln].addScaledVector(Kt.sh.coefficients[Ln],sn);else if(Kt.isDirectionalLight){const Ln=n.get(Kt);if(Ln.color.copy(Kt.color).multiplyScalar(Kt.intensity*dt),Kt.castShadow){const ui=Kt.shadow,si=r.get(Kt);si.shadowBias=ui.bias,si.shadowNormalBias=ui.normalBias,si.shadowRadius=ui.radius,si.shadowMapSize=ui.mapSize,a.directionalShadow[pe]=si,a.directionalShadowMap[pe]=Zn,a.directionalShadowMatrix[pe]=Kt.shadow.matrix,De++}a.directional[pe]=Ln,pe++}else if(Kt.isSpotLight){const Ln=n.get(Kt);Ln.position.setFromMatrixPosition(Kt.matrixWorld),Ln.color.copy(Dt).multiplyScalar(sn*dt),Ln.distance=kn,Ln.coneCos=Math.cos(Kt.angle),Ln.penumbraCos=Math.cos(Kt.angle*(1-Kt.penumbra)),Ln.decay=Kt.decay,a.spot[Ce]=Ln;const ui=Kt.shadow;if(Kt.map&&(a.spotLightMap[bt]=Kt.map,bt++,ui.updateMatrices(Kt),Kt.castShadow&&Ne++),a.spotLightMatrix[Ce]=ui.matrix,Kt.castShadow){const si=r.get(Kt);si.shadowBias=ui.bias,si.shadowNormalBias=ui.normalBias,si.shadowRadius=ui.radius,si.shadowMapSize=ui.mapSize,a.spotShadow[Ce]=si,a.spotShadowMap[Ce]=Zn,ct++}Ce++}else if(Kt.isRectAreaLight){const Ln=n.get(Kt);Ln.color.copy(Dt).multiplyScalar(sn),Ln.halfWidth.set(Kt.width*.5,0,0),Ln.halfHeight.set(0,Kt.height*.5,0),a.rectArea[Fe]=Ln,Fe++}else if(Kt.isPointLight){const Ln=n.get(Kt);if(Ln.color.copy(Kt.color).multiplyScalar(Kt.intensity*dt),Ln.distance=Kt.distance,Ln.decay=Kt.decay,Kt.castShadow){const ui=Kt.shadow,si=r.get(Kt);si.shadowBias=ui.bias,si.shadowNormalBias=ui.normalBias,si.shadowRadius=ui.radius,si.shadowMapSize=ui.mapSize,si.shadowCameraNear=ui.camera.near,si.shadowCameraFar=ui.camera.far,a.pointShadow[de]=si,a.pointShadowMap[de]=Zn,a.pointShadowMatrix[de]=Kt.shadow.matrix,Ve++}a.point[de]=Ln,de++}else if(Kt.isHemisphereLight){const Ln=n.get(Kt);Ln.skyColor.copy(Kt.color).multiplyScalar(sn*dt),Ln.groundColor.copy(Kt.groundColor).multiplyScalar(sn*dt),a.hemi[Re]=Ln,Re++}}Fe>0&&(e.isWebGL2||x.has("OES_texture_float_linear")===!0?(a.rectAreaLTC1=gi.LTC_FLOAT_1,a.rectAreaLTC2=gi.LTC_FLOAT_2):x.has("OES_texture_half_float_linear")===!0?(a.rectAreaLTC1=gi.LTC_HALF_1,a.rectAreaLTC2=gi.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=re,a.ambient[1]=le,a.ambient[2]=me;const vt=a.hash;(vt.directionalLength!==pe||vt.pointLength!==de||vt.spotLength!==Ce||vt.rectAreaLength!==Fe||vt.hemiLength!==Re||vt.numDirectionalShadows!==De||vt.numPointShadows!==Ve||vt.numSpotShadows!==ct||vt.numSpotMaps!==bt)&&(a.directional.length=pe,a.spot.length=Ce,a.rectArea.length=Fe,a.point.length=de,a.hemi.length=Re,a.directionalShadow.length=De,a.directionalShadowMap.length=De,a.pointShadow.length=Ve,a.pointShadowMap.length=Ve,a.spotShadow.length=ct,a.spotShadowMap.length=ct,a.directionalShadowMatrix.length=De,a.pointShadowMatrix.length=Ve,a.spotLightMatrix.length=ct+bt-Ne,a.spotLightMap.length=bt,a.numSpotLightShadowsWithMaps=Ne,vt.directionalLength=pe,vt.pointLength=de,vt.spotLength=Ce,vt.rectAreaLength=Fe,vt.hemiLength=Re,vt.numDirectionalShadows=De,vt.numPointShadows=Ve,vt.numSpotShadows=ct,vt.numSpotMaps=bt,a.version=tA++)}function H(Z,ne){let re=0,le=0,me=0,pe=0,de=0;const Ce=ne.matrixWorldInverse;for(let Fe=0,Re=Z.length;Fe<Re;Fe++){const De=Z[Fe];if(De.isDirectionalLight){const Ve=a.directional[re];Ve.direction.setFromMatrixPosition(De.matrixWorld),c.setFromMatrixPosition(De.target.matrixWorld),Ve.direction.sub(c),Ve.direction.transformDirection(Ce),re++}else if(De.isSpotLight){const Ve=a.spot[me];Ve.position.setFromMatrixPosition(De.matrixWorld),Ve.position.applyMatrix4(Ce),Ve.direction.setFromMatrixPosition(De.matrixWorld),c.setFromMatrixPosition(De.target.matrixWorld),Ve.direction.sub(c),Ve.direction.transformDirection(Ce),me++}else if(De.isRectAreaLight){const Ve=a.rectArea[pe];Ve.position.setFromMatrixPosition(De.matrixWorld),Ve.position.applyMatrix4(Ce),A.identity(),p.copy(De.matrixWorld),p.premultiply(Ce),A.extractRotation(p),Ve.halfWidth.set(De.width*.5,0,0),Ve.halfHeight.set(0,De.height*.5,0),Ve.halfWidth.applyMatrix4(A),Ve.halfHeight.applyMatrix4(A),pe++}else if(De.isPointLight){const Ve=a.point[le];Ve.position.setFromMatrixPosition(De.matrixWorld),Ve.position.applyMatrix4(Ce),le++}else if(De.isHemisphereLight){const Ve=a.hemi[de];Ve.direction.setFromMatrixPosition(De.matrixWorld),Ve.direction.transformDirection(Ce),de++}}}return{setup:N,setupView:H,state:a}}function iA(x,e){const n=new Qv(x,e),r=[],a=[];function c(){r.length=0,a.length=0}function p(ne){r.push(ne)}function A(ne){a.push(ne)}function N(ne){n.setup(r,ne)}function H(ne){n.setupView(r,ne)}return{init:c,state:{lightsArray:r,shadowsArray:a,lights:n},setupLights:N,setupLightsView:H,pushLight:p,pushShadow:A}}function jv(x,e){let n=new WeakMap;function r(c,p=0){const A=n.get(c);let N;return A===void 0?(N=new iA(x,e),n.set(c,[N])):p>=A.length?(N=new iA(x,e),A.push(N)):N=A[p],N}function a(){n=new WeakMap}return{get:r,dispose:a}}class bg extends Zo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ts,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class _g extends Zo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new nt,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Wv=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Kv=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Xv(x,e,n){let r=new ul;const a=new On,c=new On,p=new Zr,A=new bg({depthPacking:po}),N=new _g,H={},Z=n.maxTextureSize,ne={0:P,1:L,2:Y},re=new ea({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new On},radius:{value:4}},vertexShader:Wv,fragmentShader:Kv}),le=re.clone();le.defines.HORIZONTAL_PASS=1;const me=new Pr;me.setAttribute("position",new Is(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const pe=new $s(me,re),de=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=_,this.render=function(De,Ve,ct){if(de.enabled===!1||de.autoUpdate===!1&&de.needsUpdate===!1||De.length===0)return;const bt=x.getRenderTarget(),Ne=x.getActiveCubeFace(),dt=x.getActiveMipmapLevel(),vt=x.state;vt.setBlending(J),vt.buffers.color.setClear(1,1,1,1),vt.buffers.depth.setTest(!0),vt.setScissorTest(!1);for(let Ut=0,hn=De.length;Ut<hn;Ut++){const Kt=De[Ut],Dt=Kt.shadow;if(Dt===void 0){console.warn("THREE.WebGLShadowMap:",Kt,"has no shadow.");continue}if(Dt.autoUpdate===!1&&Dt.needsUpdate===!1)continue;a.copy(Dt.mapSize);const sn=Dt.getFrameExtents();if(a.multiply(sn),c.copy(Dt.mapSize),(a.x>Z||a.y>Z)&&(a.x>Z&&(c.x=Math.floor(Z/sn.x),a.x=c.x*sn.x,Dt.mapSize.x=c.x),a.y>Z&&(c.y=Math.floor(Z/sn.y),a.y=c.y*sn.y,Dt.mapSize.y=c.y)),Dt.map===null){const Zn=this.type!==R?{minFilter:ae,magFilter:ae}:{};Dt.map=new No(a.x,a.y,Zn),Dt.map.texture.name=Kt.name+".shadowMap",Dt.camera.updateProjectionMatrix()}x.setRenderTarget(Dt.map),x.clear();const kn=Dt.getViewportCount();for(let Zn=0;Zn<kn;Zn++){const Ln=Dt.getViewport(Zn);p.set(c.x*Ln.x,c.y*Ln.y,c.x*Ln.z,c.y*Ln.w),vt.viewport(p),Dt.updateMatrices(Kt,Zn),r=Dt.getFrustum(),Re(Ve,ct,Dt.camera,Kt,this.type)}Dt.isPointLightShadow!==!0&&this.type===R&&Ce(Dt,ct),Dt.needsUpdate=!1}de.needsUpdate=!1,x.setRenderTarget(bt,Ne,dt)};function Ce(De,Ve){const ct=e.update(pe);re.defines.VSM_SAMPLES!==De.blurSamples&&(re.defines.VSM_SAMPLES=De.blurSamples,le.defines.VSM_SAMPLES=De.blurSamples,re.needsUpdate=!0,le.needsUpdate=!0),De.mapPass===null&&(De.mapPass=new No(a.x,a.y)),re.uniforms.shadow_pass.value=De.map.texture,re.uniforms.resolution.value=De.mapSize,re.uniforms.radius.value=De.radius,x.setRenderTarget(De.mapPass),x.clear(),x.renderBufferDirect(Ve,null,ct,re,pe,null),le.uniforms.shadow_pass.value=De.mapPass.texture,le.uniforms.resolution.value=De.mapSize,le.uniforms.radius.value=De.radius,x.setRenderTarget(De.map),x.clear(),x.renderBufferDirect(Ve,null,ct,le,pe,null)}function Fe(De,Ve,ct,bt,Ne,dt){let vt=null;const Ut=ct.isPointLight===!0?De.customDistanceMaterial:De.customDepthMaterial;if(Ut!==void 0?vt=Ut:vt=ct.isPointLight===!0?N:A,x.localClippingEnabled&&Ve.clipShadows===!0&&Array.isArray(Ve.clippingPlanes)&&Ve.clippingPlanes.length!==0||Ve.displacementMap&&Ve.displacementScale!==0||Ve.alphaMap&&Ve.alphaTest>0||Ve.map&&Ve.alphaTest>0){const hn=vt.uuid,Kt=Ve.uuid;let Dt=H[hn];Dt===void 0&&(Dt={},H[hn]=Dt);let sn=Dt[Kt];sn===void 0&&(sn=vt.clone(),Dt[Kt]=sn),vt=sn}return vt.visible=Ve.visible,vt.wireframe=Ve.wireframe,dt===R?vt.side=Ve.shadowSide!==null?Ve.shadowSide:Ve.side:vt.side=Ve.shadowSide!==null?Ve.shadowSide:ne[Ve.side],vt.alphaMap=Ve.alphaMap,vt.alphaTest=Ve.alphaTest,vt.map=Ve.map,vt.clipShadows=Ve.clipShadows,vt.clippingPlanes=Ve.clippingPlanes,vt.clipIntersection=Ve.clipIntersection,vt.displacementMap=Ve.displacementMap,vt.displacementScale=Ve.displacementScale,vt.displacementBias=Ve.displacementBias,vt.wireframeLinewidth=Ve.wireframeLinewidth,vt.linewidth=Ve.linewidth,ct.isPointLight===!0&&vt.isMeshDistanceMaterial===!0&&(vt.referencePosition.setFromMatrixPosition(ct.matrixWorld),vt.nearDistance=bt,vt.farDistance=Ne),vt}function Re(De,Ve,ct,bt,Ne){if(De.visible===!1)return;if(De.layers.test(Ve.layers)&&(De.isMesh||De.isLine||De.isPoints)&&(De.castShadow||De.receiveShadow&&Ne===R)&&(!De.frustumCulled||r.intersectsObject(De))){De.modelViewMatrix.multiplyMatrices(ct.matrixWorldInverse,De.matrixWorld);const Ut=e.update(De),hn=De.material;if(Array.isArray(hn)){const Kt=Ut.groups;for(let Dt=0,sn=Kt.length;Dt<sn;Dt++){const kn=Kt[Dt],Zn=hn[kn.materialIndex];if(Zn&&Zn.visible){const Ln=Fe(De,Zn,bt,ct.near,ct.far,Ne);x.renderBufferDirect(ct,null,Ut,Ln,De,kn)}}}else if(hn.visible){const Kt=Fe(De,hn,bt,ct.near,ct.far,Ne);x.renderBufferDirect(ct,null,Ut,Kt,De,null)}}const vt=De.children;for(let Ut=0,hn=vt.length;Ut<hn;Ut++)Re(vt[Ut],Ve,ct,bt,Ne)}}function rA(x,e,n){const r=n.isWebGL2;function a(){let Lt=!1;const _n=new Zr;let li=null;const ji=new Zr(0,0,0,0);return{setMask:function(dr){li!==dr&&!Lt&&(x.colorMask(dr,dr,dr,dr),li=dr)},setLocked:function(dr){Lt=dr},setClear:function(dr,Fs,ha,Ta,yf){yf===!0&&(dr*=Ta,Fs*=Ta,ha*=Ta),_n.set(dr,Fs,ha,Ta),ji.equals(_n)===!1&&(x.clearColor(dr,Fs,ha,Ta),ji.copy(_n))},reset:function(){Lt=!1,li=null,ji.set(-1,0,0,0)}}}function c(){let Lt=!1,_n=null,li=null,ji=null;return{setTest:function(dr){dr?Wi(2929):wi(2929)},setMask:function(dr){_n!==dr&&!Lt&&(x.depthMask(dr),_n=dr)},setFunc:function(dr){if(li!==dr){switch(dr){case wt:x.depthFunc(512);break;case Yt:x.depthFunc(519);break;case Mn:x.depthFunc(513);break;case je:x.depthFunc(515);break;case rt:x.depthFunc(514);break;case At:x.depthFunc(518);break;case Bt:x.depthFunc(516);break;case Pt:x.depthFunc(517);break;default:x.depthFunc(515)}li=dr}},setLocked:function(dr){Lt=dr},setClear:function(dr){ji!==dr&&(x.clearDepth(dr),ji=dr)},reset:function(){Lt=!1,_n=null,li=null,ji=null}}}function p(){let Lt=!1,_n=null,li=null,ji=null,dr=null,Fs=null,ha=null,Ta=null,yf=null;return{setTest:function(uo){Lt||(uo?Wi(2960):wi(2960))},setMask:function(uo){_n!==uo&&!Lt&&(x.stencilMask(uo),_n=uo)},setFunc:function(uo,Zu,ql){(li!==uo||ji!==Zu||dr!==ql)&&(x.stencilFunc(uo,Zu,ql),li=uo,ji=Zu,dr=ql)},setOp:function(uo,Zu,ql){(Fs!==uo||ha!==Zu||Ta!==ql)&&(x.stencilOp(uo,Zu,ql),Fs=uo,ha=Zu,Ta=ql)},setLocked:function(uo){Lt=uo},setClear:function(uo){yf!==uo&&(x.clearStencil(uo),yf=uo)},reset:function(){Lt=!1,_n=null,li=null,ji=null,dr=null,Fs=null,ha=null,Ta=null,yf=null}}}const A=new a,N=new c,H=new p,Z=new WeakMap,ne=new WeakMap;let re={},le={},me=new WeakMap,pe=[],de=null,Ce=!1,Fe=null,Re=null,De=null,Ve=null,ct=null,bt=null,Ne=null,dt=!1,vt=null,Ut=null,hn=null,Kt=null,Dt=null;const sn=x.getParameter(35661);let kn=!1,Zn=0;const Ln=x.getParameter(7938);Ln.indexOf("WebGL")!==-1?(Zn=parseFloat(/^WebGL (\d)/.exec(Ln)[1]),kn=Zn>=1):Ln.indexOf("OpenGL ES")!==-1&&(Zn=parseFloat(/^OpenGL ES (\d)/.exec(Ln)[1]),kn=Zn>=2);let ui=null,si={};const Qi=x.getParameter(3088),Li=x.getParameter(2978),gn=new Zr().fromArray(Qi),$n=new Zr().fromArray(Li);function _i(Lt,_n,li){const ji=new Uint8Array(4),dr=x.createTexture();x.bindTexture(Lt,dr),x.texParameteri(Lt,10241,9728),x.texParameteri(Lt,10240,9728);for(let Fs=0;Fs<li;Fs++)x.texImage2D(_n+Fs,0,6408,1,1,0,6408,5121,ji);return dr}const ln={};ln[3553]=_i(3553,3553,1),ln[34067]=_i(34067,34069,6),A.setClear(0,0,0,1),N.setClear(1),H.setClear(0),Wi(2929),N.setFunc(je),Di(!1),Hr(E),Wi(2884),yi(J);function Wi(Lt){re[Lt]!==!0&&(x.enable(Lt),re[Lt]=!0)}function wi(Lt){re[Lt]!==!1&&(x.disable(Lt),re[Lt]=!1)}function gr(Lt,_n){return le[Lt]!==_n?(x.bindFramebuffer(Lt,_n),le[Lt]=_n,r&&(Lt===36009&&(le[36160]=_n),Lt===36160&&(le[36009]=_n)),!0):!1}function mi(Lt,_n){let li=pe,ji=!1;if(Lt)if(li=me.get(_n),li===void 0&&(li=[],me.set(_n,li)),Lt.isWebGLMultipleRenderTargets){const dr=Lt.texture;if(li.length!==dr.length||li[0]!==36064){for(let Fs=0,ha=dr.length;Fs<ha;Fs++)li[Fs]=36064+Fs;li.length=dr.length,ji=!0}}else li[0]!==36064&&(li[0]=36064,ji=!0);else li[0]!==1029&&(li[0]=1029,ji=!0);ji&&(n.isWebGL2?x.drawBuffers(li):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(li))}function ns(Lt){return de!==Lt?(x.useProgram(Lt),de=Lt,!0):!1}const Hn={[Ee]:32774,[V]:32778,[q]:32779};if(r)Hn[Q]=32775,Hn[F]=32776;else{const Lt=e.get("EXT_blend_minmax");Lt!==null&&(Hn[Q]=Lt.MIN_EXT,Hn[F]=Lt.MAX_EXT)}const Rn={[z]:0,[X]:1,[fe]:768,[Se]:770,[Gt]:776,[xt]:774,[Ge]:772,[Ae]:769,[Be]:771,[at]:775,[ht]:773};function yi(Lt,_n,li,ji,dr,Fs,ha,Ta){if(Lt===J){Ce===!0&&(wi(3042),Ce=!1);return}if(Ce===!1&&(Wi(3042),Ce=!0),Lt!==xe){if(Lt!==Fe||Ta!==dt){if((Re!==Ee||ct!==Ee)&&(x.blendEquation(32774),Re=Ee,ct=Ee),Ta)switch(Lt){case j:x.blendFuncSeparate(1,771,1,771);break;case k:x.blendFunc(1,1);break;case te:x.blendFuncSeparate(0,769,0,1);break;case ue:x.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Lt);break}else switch(Lt){case j:x.blendFuncSeparate(770,771,1,771);break;case k:x.blendFunc(770,1);break;case te:x.blendFuncSeparate(0,769,0,1);break;case ue:x.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Lt);break}De=null,Ve=null,bt=null,Ne=null,Fe=Lt,dt=Ta}return}dr=dr||_n,Fs=Fs||li,ha=ha||ji,(_n!==Re||dr!==ct)&&(x.blendEquationSeparate(Hn[_n],Hn[dr]),Re=_n,ct=dr),(li!==De||ji!==Ve||Fs!==bt||ha!==Ne)&&(x.blendFuncSeparate(Rn[li],Rn[ji],Rn[Fs],Rn[ha]),De=li,Ve=ji,bt=Fs,Ne=ha),Fe=Lt,dt=!1}function cr(Lt,_n){Lt.side===Y?wi(2884):Wi(2884);let li=Lt.side===P;_n&&(li=!li),Di(li),Lt.blending===j&&Lt.transparent===!1?yi(J):yi(Lt.blending,Lt.blendEquation,Lt.blendSrc,Lt.blendDst,Lt.blendEquationAlpha,Lt.blendSrcAlpha,Lt.blendDstAlpha,Lt.premultipliedAlpha),N.setFunc(Lt.depthFunc),N.setTest(Lt.depthTest),N.setMask(Lt.depthWrite),A.setMask(Lt.colorWrite);const ji=Lt.stencilWrite;H.setTest(ji),ji&&(H.setMask(Lt.stencilWriteMask),H.setFunc(Lt.stencilFunc,Lt.stencilRef,Lt.stencilFuncMask),H.setOp(Lt.stencilFail,Lt.stencilZFail,Lt.stencilZPass)),vr(Lt.polygonOffset,Lt.polygonOffsetFactor,Lt.polygonOffsetUnits),Lt.alphaToCoverage===!0?Wi(32926):wi(32926)}function Di(Lt){vt!==Lt&&(Lt?x.frontFace(2304):x.frontFace(2305),vt=Lt)}function Hr(Lt){Lt!==y?(Wi(2884),Lt!==Ut&&(Lt===E?x.cullFace(1029):Lt===b?x.cullFace(1028):x.cullFace(1032))):wi(2884),Ut=Lt}function Tr(Lt){Lt!==hn&&(kn&&x.lineWidth(Lt),hn=Lt)}function vr(Lt,_n,li){Lt?(Wi(32823),(Kt!==_n||Dt!==li)&&(x.polygonOffset(_n,li),Kt=_n,Dt=li)):wi(32823)}function Xs(Lt){Lt?Wi(3089):wi(3089)}function Hs(Lt){Lt===void 0&&(Lt=33984+sn-1),ui!==Lt&&(x.activeTexture(Lt),ui=Lt)}function ft(Lt,_n,li){li===void 0&&(ui===null?li=33984+sn-1:li=ui);let ji=si[li];ji===void 0&&(ji={type:void 0,texture:void 0},si[li]=ji),(ji.type!==Lt||ji.texture!==_n)&&(ui!==li&&(x.activeTexture(li),ui=li),x.bindTexture(Lt,_n||ln[Lt]),ji.type=Lt,ji.texture=_n)}function tt(){const Lt=si[ui];Lt!==void 0&&Lt.type!==void 0&&(x.bindTexture(Lt.type,null),Lt.type=void 0,Lt.texture=void 0)}function fn(){try{x.compressedTexImage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function hi(){try{x.compressedTexImage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Ai(){try{x.texSubImage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function ki(){try{x.texSubImage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Ur(){try{x.compressedTexSubImage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Hi(){try{x.compressedTexSubImage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Bn(){try{x.texStorage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function yr(){try{x.texStorage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Br(){try{x.texImage2D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function or(){try{x.texImage3D.apply(x,arguments)}catch(Lt){console.error("THREE.WebGLState:",Lt)}}function Sr(Lt){gn.equals(Lt)===!1&&(x.scissor(Lt.x,Lt.y,Lt.z,Lt.w),gn.copy(Lt))}function xr(Lt){$n.equals(Lt)===!1&&(x.viewport(Lt.x,Lt.y,Lt.z,Lt.w),$n.copy(Lt))}function Rs(Lt,_n){let li=ne.get(_n);li===void 0&&(li=new WeakMap,ne.set(_n,li));let ji=li.get(Lt);ji===void 0&&(ji=x.getUniformBlockIndex(_n,Lt.name),li.set(Lt,ji))}function co(Lt,_n){const ji=ne.get(_n).get(Lt);Z.get(Lt)!==ji&&(x.uniformBlockBinding(_n,ji,Lt.__bindingPointIndex),Z.set(Lt,ji))}function ua(){x.disable(3042),x.disable(2884),x.disable(2929),x.disable(32823),x.disable(3089),x.disable(2960),x.disable(32926),x.blendEquation(32774),x.blendFunc(1,0),x.blendFuncSeparate(1,0,1,0),x.colorMask(!0,!0,!0,!0),x.clearColor(0,0,0,0),x.depthMask(!0),x.depthFunc(513),x.clearDepth(1),x.stencilMask(4294967295),x.stencilFunc(519,0,4294967295),x.stencilOp(7680,7680,7680),x.clearStencil(0),x.cullFace(1029),x.frontFace(2305),x.polygonOffset(0,0),x.activeTexture(33984),x.bindFramebuffer(36160,null),r===!0&&(x.bindFramebuffer(36009,null),x.bindFramebuffer(36008,null)),x.useProgram(null),x.lineWidth(1),x.scissor(0,0,x.canvas.width,x.canvas.height),x.viewport(0,0,x.canvas.width,x.canvas.height),re={},ui=null,si={},le={},me=new WeakMap,pe=[],de=null,Ce=!1,Fe=null,Re=null,De=null,Ve=null,ct=null,bt=null,Ne=null,dt=!1,vt=null,Ut=null,hn=null,Kt=null,Dt=null,gn.set(0,0,x.canvas.width,x.canvas.height),$n.set(0,0,x.canvas.width,x.canvas.height),A.reset(),N.reset(),H.reset()}return{buffers:{color:A,depth:N,stencil:H},enable:Wi,disable:wi,bindFramebuffer:gr,drawBuffers:mi,useProgram:ns,setBlending:yi,setMaterial:cr,setFlipSided:Di,setCullFace:Hr,setLineWidth:Tr,setPolygonOffset:vr,setScissorTest:Xs,activeTexture:Hs,bindTexture:ft,unbindTexture:tt,compressedTexImage2D:fn,compressedTexImage3D:hi,texImage2D:Br,texImage3D:or,updateUBOMapping:Rs,uniformBlockBinding:co,texStorage2D:Bn,texStorage3D:yr,texSubImage2D:Ai,texSubImage3D:ki,compressedTexSubImage2D:Ur,compressedTexSubImage3D:Hi,scissor:Sr,viewport:xr,reset:ua}}function Yv(x,e,n,r,a,c,p){const A=a.isWebGL2,N=a.maxTextures,H=a.maxCubemapSize,Z=a.maxTextureSize,ne=a.maxSamples,re=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,le=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),me=new WeakMap;let pe;const de=new WeakMap;let Ce=!1;try{Ce=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Fe(ft,tt){return Ce?new OffscreenCanvas(ft,tt):Pl("canvas")}function Re(ft,tt,fn,hi){let Ai=1;if((ft.width>hi||ft.height>hi)&&(Ai=hi/Math.max(ft.width,ft.height)),Ai<1||tt===!0)if(typeof HTMLImageElement<"u"&&ft instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ft instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ft instanceof ImageBitmap){const ki=tt?pu:Math.floor,Ur=ki(Ai*ft.width),Hi=ki(Ai*ft.height);pe===void 0&&(pe=Fe(Ur,Hi));const Bn=fn?Fe(Ur,Hi):pe;return Bn.width=Ur,Bn.height=Hi,Bn.getContext("2d").drawImage(ft,0,0,Ur,Hi),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ft.width+"x"+ft.height+") to ("+Ur+"x"+Hi+")."),Bn}else return"data"in ft&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ft.width+"x"+ft.height+")."),ft;return ft}function De(ft){return lh(ft.width)&&lh(ft.height)}function Ve(ft){return A?!1:ft.wrapS!==Oe||ft.wrapT!==Oe||ft.minFilter!==ae&&ft.minFilter!==Ke}function ct(ft,tt){return ft.generateMipmaps&&tt&&ft.minFilter!==ae&&ft.minFilter!==Ke}function bt(ft){x.generateMipmap(ft)}function Ne(ft,tt,fn,hi,Ai=!1){if(A===!1)return tt;if(ft!==null){if(x[ft]!==void 0)return x[ft];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ft+"'")}let ki=tt;return tt===6403&&(fn===5126&&(ki=33326),fn===5131&&(ki=33325),fn===5121&&(ki=33321)),tt===33319&&(fn===5126&&(ki=33328),fn===5131&&(ki=33327),fn===5121&&(ki=33323)),tt===6408&&(fn===5126&&(ki=34836),fn===5131&&(ki=34842),fn===5121&&(ki=hi===Ar&&Ai===!1?35907:32856),fn===32819&&(ki=32854),fn===32820&&(ki=32855)),(ki===33325||ki===33326||ki===33327||ki===33328||ki===34842||ki===34836)&&e.get("EXT_color_buffer_float"),ki}function dt(ft,tt,fn){return ct(ft,fn)===!0||ft.isFramebufferTexture&&ft.minFilter!==ae&&ft.minFilter!==Ke?Math.log2(Math.max(tt.width,tt.height))+1:ft.mipmaps!==void 0&&ft.mipmaps.length>0?ft.mipmaps.length:ft.isCompressedTexture&&Array.isArray(ft.image)?tt.mipmaps.length:1}function vt(ft){return ft===ae||ft===ee||ft===Ie?9728:9729}function Ut(ft){const tt=ft.target;tt.removeEventListener("dispose",Ut),Kt(tt),tt.isVideoTexture&&me.delete(tt)}function hn(ft){const tt=ft.target;tt.removeEventListener("dispose",hn),sn(tt)}function Kt(ft){const tt=r.get(ft);if(tt.__webglInit===void 0)return;const fn=ft.source,hi=de.get(fn);if(hi){const Ai=hi[tt.__cacheKey];Ai.usedTimes--,Ai.usedTimes===0&&Dt(ft),Object.keys(hi).length===0&&de.delete(fn)}r.remove(ft)}function Dt(ft){const tt=r.get(ft);x.deleteTexture(tt.__webglTexture);const fn=ft.source,hi=de.get(fn);delete hi[tt.__cacheKey],p.memory.textures--}function sn(ft){const tt=ft.texture,fn=r.get(ft),hi=r.get(tt);if(hi.__webglTexture!==void 0&&(x.deleteTexture(hi.__webglTexture),p.memory.textures--),ft.depthTexture&&ft.depthTexture.dispose(),ft.isWebGLCubeRenderTarget)for(let Ai=0;Ai<6;Ai++)x.deleteFramebuffer(fn.__webglFramebuffer[Ai]),fn.__webglDepthbuffer&&x.deleteRenderbuffer(fn.__webglDepthbuffer[Ai]);else{if(x.deleteFramebuffer(fn.__webglFramebuffer),fn.__webglDepthbuffer&&x.deleteRenderbuffer(fn.__webglDepthbuffer),fn.__webglMultisampledFramebuffer&&x.deleteFramebuffer(fn.__webglMultisampledFramebuffer),fn.__webglColorRenderbuffer)for(let Ai=0;Ai<fn.__webglColorRenderbuffer.length;Ai++)fn.__webglColorRenderbuffer[Ai]&&x.deleteRenderbuffer(fn.__webglColorRenderbuffer[Ai]);fn.__webglDepthRenderbuffer&&x.deleteRenderbuffer(fn.__webglDepthRenderbuffer)}if(ft.isWebGLMultipleRenderTargets)for(let Ai=0,ki=tt.length;Ai<ki;Ai++){const Ur=r.get(tt[Ai]);Ur.__webglTexture&&(x.deleteTexture(Ur.__webglTexture),p.memory.textures--),r.remove(tt[Ai])}r.remove(tt),r.remove(ft)}let kn=0;function Zn(){kn=0}function Ln(){const ft=kn;return ft>=N&&console.warn("THREE.WebGLTextures: Trying to use "+ft+" texture units while this GPU supports only "+N),kn+=1,ft}function ui(ft){const tt=[];return tt.push(ft.wrapS),tt.push(ft.wrapT),tt.push(ft.wrapR||0),tt.push(ft.magFilter),tt.push(ft.minFilter),tt.push(ft.anisotropy),tt.push(ft.internalFormat),tt.push(ft.format),tt.push(ft.type),tt.push(ft.generateMipmaps),tt.push(ft.premultiplyAlpha),tt.push(ft.flipY),tt.push(ft.unpackAlignment),tt.push(ft.encoding),tt.join()}function si(ft,tt){const fn=r.get(ft);if(ft.isVideoTexture&&Xs(ft),ft.isRenderTargetTexture===!1&&ft.version>0&&fn.__version!==ft.version){const hi=ft.image;if(hi===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(hi.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{wi(fn,ft,tt);return}}n.bindTexture(3553,fn.__webglTexture,33984+tt)}function Qi(ft,tt){const fn=r.get(ft);if(ft.version>0&&fn.__version!==ft.version){wi(fn,ft,tt);return}n.bindTexture(35866,fn.__webglTexture,33984+tt)}function Li(ft,tt){const fn=r.get(ft);if(ft.version>0&&fn.__version!==ft.version){wi(fn,ft,tt);return}n.bindTexture(32879,fn.__webglTexture,33984+tt)}function gn(ft,tt){const fn=r.get(ft);if(ft.version>0&&fn.__version!==ft.version){gr(fn,ft,tt);return}n.bindTexture(34067,fn.__webglTexture,33984+tt)}const $n={[Te]:10497,[Oe]:33071,[Ze]:33648},_i={[ae]:9728,[ee]:9984,[Ie]:9986,[Ke]:9729,[$e]:9985,[$t]:9987};function ln(ft,tt,fn){if(fn?(x.texParameteri(ft,10242,$n[tt.wrapS]),x.texParameteri(ft,10243,$n[tt.wrapT]),(ft===32879||ft===35866)&&x.texParameteri(ft,32882,$n[tt.wrapR]),x.texParameteri(ft,10240,_i[tt.magFilter]),x.texParameteri(ft,10241,_i[tt.minFilter])):(x.texParameteri(ft,10242,33071),x.texParameteri(ft,10243,33071),(ft===32879||ft===35866)&&x.texParameteri(ft,32882,33071),(tt.wrapS!==Oe||tt.wrapT!==Oe)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),x.texParameteri(ft,10240,vt(tt.magFilter)),x.texParameteri(ft,10241,vt(tt.minFilter)),tt.minFilter!==ae&&tt.minFilter!==Ke&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const hi=e.get("EXT_texture_filter_anisotropic");if(tt.type===vn&&e.has("OES_texture_float_linear")===!1||A===!1&&tt.type===Ft&&e.has("OES_texture_half_float_linear")===!1)return;(tt.anisotropy>1||r.get(tt).__currentAnisotropy)&&(x.texParameterf(ft,hi.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(tt.anisotropy,a.getMaxAnisotropy())),r.get(tt).__currentAnisotropy=tt.anisotropy)}}function Wi(ft,tt){let fn=!1;ft.__webglInit===void 0&&(ft.__webglInit=!0,tt.addEventListener("dispose",Ut));const hi=tt.source;let Ai=de.get(hi);Ai===void 0&&(Ai={},de.set(hi,Ai));const ki=ui(tt);if(ki!==ft.__cacheKey){Ai[ki]===void 0&&(Ai[ki]={texture:x.createTexture(),usedTimes:0},p.memory.textures++,fn=!0),Ai[ki].usedTimes++;const Ur=Ai[ft.__cacheKey];Ur!==void 0&&(Ai[ft.__cacheKey].usedTimes--,Ur.usedTimes===0&&Dt(tt)),ft.__cacheKey=ki,ft.__webglTexture=Ai[ki].texture}return fn}function wi(ft,tt,fn){let hi=3553;(tt.isDataArrayTexture||tt.isCompressedArrayTexture)&&(hi=35866),tt.isData3DTexture&&(hi=32879);const Ai=Wi(ft,tt),ki=tt.source;n.bindTexture(hi,ft.__webglTexture,33984+fn);const Ur=r.get(ki);if(ki.version!==Ur.__version||Ai===!0){n.activeTexture(33984+fn),x.pixelStorei(37440,tt.flipY),x.pixelStorei(37441,tt.premultiplyAlpha),x.pixelStorei(3317,tt.unpackAlignment),x.pixelStorei(37443,0);const Hi=Ve(tt)&&De(tt.image)===!1;let Bn=Re(tt.image,Hi,!1,Z);Bn=Hs(tt,Bn);const yr=De(Bn)||A,Br=c.convert(tt.format,tt.encoding);let or=c.convert(tt.type),Sr=Ne(tt.internalFormat,Br,or,tt.encoding,tt.isVideoTexture);ln(hi,tt,yr);let xr;const Rs=tt.mipmaps,co=A&&tt.isVideoTexture!==!0,ua=Ur.__version===void 0||Ai===!0,Lt=dt(tt,Bn,yr);if(tt.isDepthTexture)Sr=6402,A?tt.type===vn?Sr=36012:tt.type===Nn?Sr=33190:tt.type===Dn?Sr=35056:Sr=33189:tt.type===vn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),tt.format===Gr&&Sr===6402&&tt.type!==di&&tt.type!==Nn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),tt.type=Nn,or=c.convert(tt.type)),tt.format===Dr&&Sr===6402&&(Sr=34041,tt.type!==Dn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),tt.type=Dn,or=c.convert(tt.type))),ua&&(co?n.texStorage2D(3553,1,Sr,Bn.width,Bn.height):n.texImage2D(3553,0,Sr,Bn.width,Bn.height,0,Br,or,null));else if(tt.isDataTexture)if(Rs.length>0&&yr){co&&ua&&n.texStorage2D(3553,Lt,Sr,Rs[0].width,Rs[0].height);for(let _n=0,li=Rs.length;_n<li;_n++)xr=Rs[_n],co?n.texSubImage2D(3553,_n,0,0,xr.width,xr.height,Br,or,xr.data):n.texImage2D(3553,_n,Sr,xr.width,xr.height,0,Br,or,xr.data);tt.generateMipmaps=!1}else co?(ua&&n.texStorage2D(3553,Lt,Sr,Bn.width,Bn.height),n.texSubImage2D(3553,0,0,0,Bn.width,Bn.height,Br,or,Bn.data)):n.texImage2D(3553,0,Sr,Bn.width,Bn.height,0,Br,or,Bn.data);else if(tt.isCompressedTexture)if(tt.isCompressedArrayTexture){co&&ua&&n.texStorage3D(35866,Lt,Sr,Rs[0].width,Rs[0].height,Bn.depth);for(let _n=0,li=Rs.length;_n<li;_n++)xr=Rs[_n],tt.format!==Zi?Br!==null?co?n.compressedTexSubImage3D(35866,_n,0,0,0,xr.width,xr.height,Bn.depth,Br,xr.data,0,0):n.compressedTexImage3D(35866,_n,Sr,xr.width,xr.height,Bn.depth,0,xr.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):co?n.texSubImage3D(35866,_n,0,0,0,xr.width,xr.height,Bn.depth,Br,or,xr.data):n.texImage3D(35866,_n,Sr,xr.width,xr.height,Bn.depth,0,Br,or,xr.data)}else{co&&ua&&n.texStorage2D(3553,Lt,Sr,Rs[0].width,Rs[0].height);for(let _n=0,li=Rs.length;_n<li;_n++)xr=Rs[_n],tt.format!==Zi?Br!==null?co?n.compressedTexSubImage2D(3553,_n,0,0,xr.width,xr.height,Br,xr.data):n.compressedTexImage2D(3553,_n,Sr,xr.width,xr.height,0,xr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):co?n.texSubImage2D(3553,_n,0,0,xr.width,xr.height,Br,or,xr.data):n.texImage2D(3553,_n,Sr,xr.width,xr.height,0,Br,or,xr.data)}else if(tt.isDataArrayTexture)co?(ua&&n.texStorage3D(35866,Lt,Sr,Bn.width,Bn.height,Bn.depth),n.texSubImage3D(35866,0,0,0,0,Bn.width,Bn.height,Bn.depth,Br,or,Bn.data)):n.texImage3D(35866,0,Sr,Bn.width,Bn.height,Bn.depth,0,Br,or,Bn.data);else if(tt.isData3DTexture)co?(ua&&n.texStorage3D(32879,Lt,Sr,Bn.width,Bn.height,Bn.depth),n.texSubImage3D(32879,0,0,0,0,Bn.width,Bn.height,Bn.depth,Br,or,Bn.data)):n.texImage3D(32879,0,Sr,Bn.width,Bn.height,Bn.depth,0,Br,or,Bn.data);else if(tt.isFramebufferTexture){if(ua)if(co)n.texStorage2D(3553,Lt,Sr,Bn.width,Bn.height);else{let _n=Bn.width,li=Bn.height;for(let ji=0;ji<Lt;ji++)n.texImage2D(3553,ji,Sr,_n,li,0,Br,or,null),_n>>=1,li>>=1}}else if(Rs.length>0&&yr){co&&ua&&n.texStorage2D(3553,Lt,Sr,Rs[0].width,Rs[0].height);for(let _n=0,li=Rs.length;_n<li;_n++)xr=Rs[_n],co?n.texSubImage2D(3553,_n,0,0,Br,or,xr):n.texImage2D(3553,_n,Sr,Br,or,xr);tt.generateMipmaps=!1}else co?(ua&&n.texStorage2D(3553,Lt,Sr,Bn.width,Bn.height),n.texSubImage2D(3553,0,0,0,Br,or,Bn)):n.texImage2D(3553,0,Sr,Br,or,Bn);ct(tt,yr)&&bt(hi),Ur.__version=ki.version,tt.onUpdate&&tt.onUpdate(tt)}ft.__version=tt.version}function gr(ft,tt,fn){if(tt.image.length!==6)return;const hi=Wi(ft,tt),Ai=tt.source;n.bindTexture(34067,ft.__webglTexture,33984+fn);const ki=r.get(Ai);if(Ai.version!==ki.__version||hi===!0){n.activeTexture(33984+fn),x.pixelStorei(37440,tt.flipY),x.pixelStorei(37441,tt.premultiplyAlpha),x.pixelStorei(3317,tt.unpackAlignment),x.pixelStorei(37443,0);const Ur=tt.isCompressedTexture||tt.image[0].isCompressedTexture,Hi=tt.image[0]&&tt.image[0].isDataTexture,Bn=[];for(let _n=0;_n<6;_n++)!Ur&&!Hi?Bn[_n]=Re(tt.image[_n],!1,!0,H):Bn[_n]=Hi?tt.image[_n].image:tt.image[_n],Bn[_n]=Hs(tt,Bn[_n]);const yr=Bn[0],Br=De(yr)||A,or=c.convert(tt.format,tt.encoding),Sr=c.convert(tt.type),xr=Ne(tt.internalFormat,or,Sr,tt.encoding),Rs=A&&tt.isVideoTexture!==!0,co=ki.__version===void 0||hi===!0;let ua=dt(tt,yr,Br);ln(34067,tt,Br);let Lt;if(Ur){Rs&&co&&n.texStorage2D(34067,ua,xr,yr.width,yr.height);for(let _n=0;_n<6;_n++){Lt=Bn[_n].mipmaps;for(let li=0;li<Lt.length;li++){const ji=Lt[li];tt.format!==Zi?or!==null?Rs?n.compressedTexSubImage2D(34069+_n,li,0,0,ji.width,ji.height,or,ji.data):n.compressedTexImage2D(34069+_n,li,xr,ji.width,ji.height,0,ji.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Rs?n.texSubImage2D(34069+_n,li,0,0,ji.width,ji.height,or,Sr,ji.data):n.texImage2D(34069+_n,li,xr,ji.width,ji.height,0,or,Sr,ji.data)}}}else{Lt=tt.mipmaps,Rs&&co&&(Lt.length>0&&ua++,n.texStorage2D(34067,ua,xr,Bn[0].width,Bn[0].height));for(let _n=0;_n<6;_n++)if(Hi){Rs?n.texSubImage2D(34069+_n,0,0,0,Bn[_n].width,Bn[_n].height,or,Sr,Bn[_n].data):n.texImage2D(34069+_n,0,xr,Bn[_n].width,Bn[_n].height,0,or,Sr,Bn[_n].data);for(let li=0;li<Lt.length;li++){const dr=Lt[li].image[_n].image;Rs?n.texSubImage2D(34069+_n,li+1,0,0,dr.width,dr.height,or,Sr,dr.data):n.texImage2D(34069+_n,li+1,xr,dr.width,dr.height,0,or,Sr,dr.data)}}else{Rs?n.texSubImage2D(34069+_n,0,0,0,or,Sr,Bn[_n]):n.texImage2D(34069+_n,0,xr,or,Sr,Bn[_n]);for(let li=0;li<Lt.length;li++){const ji=Lt[li];Rs?n.texSubImage2D(34069+_n,li+1,0,0,or,Sr,ji.image[_n]):n.texImage2D(34069+_n,li+1,xr,or,Sr,ji.image[_n])}}}ct(tt,Br)&&bt(34067),ki.__version=Ai.version,tt.onUpdate&&tt.onUpdate(tt)}ft.__version=tt.version}function mi(ft,tt,fn,hi,Ai){const ki=c.convert(fn.format,fn.encoding),Ur=c.convert(fn.type),Hi=Ne(fn.internalFormat,ki,Ur,fn.encoding);r.get(tt).__hasExternalTextures||(Ai===32879||Ai===35866?n.texImage3D(Ai,0,Hi,tt.width,tt.height,tt.depth,0,ki,Ur,null):n.texImage2D(Ai,0,Hi,tt.width,tt.height,0,ki,Ur,null)),n.bindFramebuffer(36160,ft),vr(tt)?re.framebufferTexture2DMultisampleEXT(36160,hi,Ai,r.get(fn).__webglTexture,0,Tr(tt)):(Ai===3553||Ai>=34069&&Ai<=34074)&&x.framebufferTexture2D(36160,hi,Ai,r.get(fn).__webglTexture,0),n.bindFramebuffer(36160,null)}function ns(ft,tt,fn){if(x.bindRenderbuffer(36161,ft),tt.depthBuffer&&!tt.stencilBuffer){let hi=33189;if(fn||vr(tt)){const Ai=tt.depthTexture;Ai&&Ai.isDepthTexture&&(Ai.type===vn?hi=36012:Ai.type===Nn&&(hi=33190));const ki=Tr(tt);vr(tt)?re.renderbufferStorageMultisampleEXT(36161,ki,hi,tt.width,tt.height):x.renderbufferStorageMultisample(36161,ki,hi,tt.width,tt.height)}else x.renderbufferStorage(36161,hi,tt.width,tt.height);x.framebufferRenderbuffer(36160,36096,36161,ft)}else if(tt.depthBuffer&&tt.stencilBuffer){const hi=Tr(tt);fn&&vr(tt)===!1?x.renderbufferStorageMultisample(36161,hi,35056,tt.width,tt.height):vr(tt)?re.renderbufferStorageMultisampleEXT(36161,hi,35056,tt.width,tt.height):x.renderbufferStorage(36161,34041,tt.width,tt.height),x.framebufferRenderbuffer(36160,33306,36161,ft)}else{const hi=tt.isWebGLMultipleRenderTargets===!0?tt.texture:[tt.texture];for(let Ai=0;Ai<hi.length;Ai++){const ki=hi[Ai],Ur=c.convert(ki.format,ki.encoding),Hi=c.convert(ki.type),Bn=Ne(ki.internalFormat,Ur,Hi,ki.encoding),yr=Tr(tt);fn&&vr(tt)===!1?x.renderbufferStorageMultisample(36161,yr,Bn,tt.width,tt.height):vr(tt)?re.renderbufferStorageMultisampleEXT(36161,yr,Bn,tt.width,tt.height):x.renderbufferStorage(36161,Bn,tt.width,tt.height)}}x.bindRenderbuffer(36161,null)}function Hn(ft,tt){if(tt&&tt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,ft),!(tt.depthTexture&&tt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(tt.depthTexture).__webglTexture||tt.depthTexture.image.width!==tt.width||tt.depthTexture.image.height!==tt.height)&&(tt.depthTexture.image.width=tt.width,tt.depthTexture.image.height=tt.height,tt.depthTexture.needsUpdate=!0),si(tt.depthTexture,0);const hi=r.get(tt.depthTexture).__webglTexture,Ai=Tr(tt);if(tt.depthTexture.format===Gr)vr(tt)?re.framebufferTexture2DMultisampleEXT(36160,36096,3553,hi,0,Ai):x.framebufferTexture2D(36160,36096,3553,hi,0);else if(tt.depthTexture.format===Dr)vr(tt)?re.framebufferTexture2DMultisampleEXT(36160,33306,3553,hi,0,Ai):x.framebufferTexture2D(36160,33306,3553,hi,0);else throw new Error("Unknown depthTexture format")}function Rn(ft){const tt=r.get(ft),fn=ft.isWebGLCubeRenderTarget===!0;if(ft.depthTexture&&!tt.__autoAllocateDepthBuffer){if(fn)throw new Error("target.depthTexture not supported in Cube render targets");Hn(tt.__webglFramebuffer,ft)}else if(fn){tt.__webglDepthbuffer=[];for(let hi=0;hi<6;hi++)n.bindFramebuffer(36160,tt.__webglFramebuffer[hi]),tt.__webglDepthbuffer[hi]=x.createRenderbuffer(),ns(tt.__webglDepthbuffer[hi],ft,!1)}else n.bindFramebuffer(36160,tt.__webglFramebuffer),tt.__webglDepthbuffer=x.createRenderbuffer(),ns(tt.__webglDepthbuffer,ft,!1);n.bindFramebuffer(36160,null)}function yi(ft,tt,fn){const hi=r.get(ft);tt!==void 0&&mi(hi.__webglFramebuffer,ft,ft.texture,36064,3553),fn!==void 0&&Rn(ft)}function cr(ft){const tt=ft.texture,fn=r.get(ft),hi=r.get(tt);ft.addEventListener("dispose",hn),ft.isWebGLMultipleRenderTargets!==!0&&(hi.__webglTexture===void 0&&(hi.__webglTexture=x.createTexture()),hi.__version=tt.version,p.memory.textures++);const Ai=ft.isWebGLCubeRenderTarget===!0,ki=ft.isWebGLMultipleRenderTargets===!0,Ur=De(ft)||A;if(Ai){fn.__webglFramebuffer=[];for(let Hi=0;Hi<6;Hi++)fn.__webglFramebuffer[Hi]=x.createFramebuffer()}else{if(fn.__webglFramebuffer=x.createFramebuffer(),ki)if(a.drawBuffers){const Hi=ft.texture;for(let Bn=0,yr=Hi.length;Bn<yr;Bn++){const Br=r.get(Hi[Bn]);Br.__webglTexture===void 0&&(Br.__webglTexture=x.createTexture(),p.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(A&&ft.samples>0&&vr(ft)===!1){const Hi=ki?tt:[tt];fn.__webglMultisampledFramebuffer=x.createFramebuffer(),fn.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,fn.__webglMultisampledFramebuffer);for(let Bn=0;Bn<Hi.length;Bn++){const yr=Hi[Bn];fn.__webglColorRenderbuffer[Bn]=x.createRenderbuffer(),x.bindRenderbuffer(36161,fn.__webglColorRenderbuffer[Bn]);const Br=c.convert(yr.format,yr.encoding),or=c.convert(yr.type),Sr=Ne(yr.internalFormat,Br,or,yr.encoding,ft.isXRRenderTarget===!0),xr=Tr(ft);x.renderbufferStorageMultisample(36161,xr,Sr,ft.width,ft.height),x.framebufferRenderbuffer(36160,36064+Bn,36161,fn.__webglColorRenderbuffer[Bn])}x.bindRenderbuffer(36161,null),ft.depthBuffer&&(fn.__webglDepthRenderbuffer=x.createRenderbuffer(),ns(fn.__webglDepthRenderbuffer,ft,!0)),n.bindFramebuffer(36160,null)}}if(Ai){n.bindTexture(34067,hi.__webglTexture),ln(34067,tt,Ur);for(let Hi=0;Hi<6;Hi++)mi(fn.__webglFramebuffer[Hi],ft,tt,36064,34069+Hi);ct(tt,Ur)&&bt(34067),n.unbindTexture()}else if(ki){const Hi=ft.texture;for(let Bn=0,yr=Hi.length;Bn<yr;Bn++){const Br=Hi[Bn],or=r.get(Br);n.bindTexture(3553,or.__webglTexture),ln(3553,Br,Ur),mi(fn.__webglFramebuffer,ft,Br,36064+Bn,3553),ct(Br,Ur)&&bt(3553)}n.unbindTexture()}else{let Hi=3553;(ft.isWebGL3DRenderTarget||ft.isWebGLArrayRenderTarget)&&(A?Hi=ft.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Hi,hi.__webglTexture),ln(Hi,tt,Ur),mi(fn.__webglFramebuffer,ft,tt,36064,Hi),ct(tt,Ur)&&bt(Hi),n.unbindTexture()}ft.depthBuffer&&Rn(ft)}function Di(ft){const tt=De(ft)||A,fn=ft.isWebGLMultipleRenderTargets===!0?ft.texture:[ft.texture];for(let hi=0,Ai=fn.length;hi<Ai;hi++){const ki=fn[hi];if(ct(ki,tt)){const Ur=ft.isWebGLCubeRenderTarget?34067:3553,Hi=r.get(ki).__webglTexture;n.bindTexture(Ur,Hi),bt(Ur),n.unbindTexture()}}}function Hr(ft){if(A&&ft.samples>0&&vr(ft)===!1){const tt=ft.isWebGLMultipleRenderTargets?ft.texture:[ft.texture],fn=ft.width,hi=ft.height;let Ai=16384;const ki=[],Ur=ft.stencilBuffer?33306:36096,Hi=r.get(ft),Bn=ft.isWebGLMultipleRenderTargets===!0;if(Bn)for(let yr=0;yr<tt.length;yr++)n.bindFramebuffer(36160,Hi.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(36160,36064+yr,36161,null),n.bindFramebuffer(36160,Hi.__webglFramebuffer),x.framebufferTexture2D(36009,36064+yr,3553,null,0);n.bindFramebuffer(36008,Hi.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Hi.__webglFramebuffer);for(let yr=0;yr<tt.length;yr++){ki.push(36064+yr),ft.depthBuffer&&ki.push(Ur);const Br=Hi.__ignoreDepthValues!==void 0?Hi.__ignoreDepthValues:!1;if(Br===!1&&(ft.depthBuffer&&(Ai|=256),ft.stencilBuffer&&(Ai|=1024)),Bn&&x.framebufferRenderbuffer(36008,36064,36161,Hi.__webglColorRenderbuffer[yr]),Br===!0&&(x.invalidateFramebuffer(36008,[Ur]),x.invalidateFramebuffer(36009,[Ur])),Bn){const or=r.get(tt[yr]).__webglTexture;x.framebufferTexture2D(36009,36064,3553,or,0)}x.blitFramebuffer(0,0,fn,hi,0,0,fn,hi,Ai,9728),le&&x.invalidateFramebuffer(36008,ki)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),Bn)for(let yr=0;yr<tt.length;yr++){n.bindFramebuffer(36160,Hi.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(36160,36064+yr,36161,Hi.__webglColorRenderbuffer[yr]);const Br=r.get(tt[yr]).__webglTexture;n.bindFramebuffer(36160,Hi.__webglFramebuffer),x.framebufferTexture2D(36009,36064+yr,3553,Br,0)}n.bindFramebuffer(36009,Hi.__webglMultisampledFramebuffer)}}function Tr(ft){return Math.min(ne,ft.samples)}function vr(ft){const tt=r.get(ft);return A&&ft.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&tt.__useRenderToTexture!==!1}function Xs(ft){const tt=p.render.frame;me.get(ft)!==tt&&(me.set(ft,tt),ft.update())}function Hs(ft,tt){const fn=ft.encoding,hi=ft.format,Ai=ft.type;return ft.isCompressedTexture===!0||ft.isVideoTexture===!0||ft.format===du||fn!==Yr&&(fn===Ar?A===!1?e.has("EXT_sRGB")===!0&&hi===Zi?(ft.format=du,ft.minFilter=Ke,ft.generateMipmaps=!1):tt=dh.sRGBToLinear(tt):(hi!==Zi||Ai!==jt)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fn)),tt}this.allocateTextureUnit=Ln,this.resetTextureUnits=Zn,this.setTexture2D=si,this.setTexture2DArray=Qi,this.setTexture3D=Li,this.setTextureCube=gn,this.rebindTextures=yi,this.setupRenderTarget=cr,this.updateRenderTargetMipmap=Di,this.updateMultisampleRenderTarget=Hr,this.setupDepthRenderbuffer=Rn,this.setupFrameBufferTexture=mi,this.useMultisampledRTT=vr}function wg(x,e,n){const r=n.isWebGL2;function a(c,p=null){let A;if(c===jt)return 5121;if(c===yn)return 32819;if(c===Gn)return 32820;if(c===on)return 5120;if(c===In)return 5122;if(c===di)return 5123;if(c===fi)return 5124;if(c===Nn)return 5125;if(c===vn)return 5126;if(c===Ft)return r?5131:(A=e.get("OES_texture_half_float"),A!==null?A.HALF_FLOAT_OES:null);if(c===bi)return 6406;if(c===Zi)return 6408;if(c===Lr)return 6409;if(c===Ki)return 6410;if(c===Gr)return 6402;if(c===Dr)return 34041;if(c===Pi)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(c===du)return A=e.get("EXT_sRGB"),A!==null?A.SRGB_ALPHA_EXT:null;if(c===ar)return 6403;if(c===zr)return 36244;if(c===ys)return 33319;if(c===Qe)return 33320;if(c===ut)return 36249;if(c===_t||c===nn||c===Wt||c===mn)if(p===Ar)if(A=e.get("WEBGL_compressed_texture_s3tc_srgb"),A!==null){if(c===_t)return A.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(c===nn)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(c===Wt)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(c===mn)return A.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(A=e.get("WEBGL_compressed_texture_s3tc"),A!==null){if(c===_t)return A.COMPRESSED_RGB_S3TC_DXT1_EXT;if(c===nn)return A.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(c===Wt)return A.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(c===mn)return A.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(c===Un||c===Xn||c===ei||c===pn)if(A=e.get("WEBGL_compressed_texture_pvrtc"),A!==null){if(c===Un)return A.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(c===Xn)return A.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(c===ei)return A.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(c===pn)return A.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(c===Oi)return A=e.get("WEBGL_compressed_texture_etc1"),A!==null?A.COMPRESSED_RGB_ETC1_WEBGL:null;if(c===Mi||c===Ti)if(A=e.get("WEBGL_compressed_texture_etc"),A!==null){if(c===Mi)return p===Ar?A.COMPRESSED_SRGB8_ETC2:A.COMPRESSED_RGB8_ETC2;if(c===Ti)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:A.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(c===Wr||c===zi||c===er||c===Nr||c===Ds||c===ro||c===pi||c===Ir||c===to||c===os||c===ce||c===ge||c===_e||c===Le)if(A=e.get("WEBGL_compressed_texture_astc"),A!==null){if(c===Wr)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:A.COMPRESSED_RGBA_ASTC_4x4_KHR;if(c===zi)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:A.COMPRESSED_RGBA_ASTC_5x4_KHR;if(c===er)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:A.COMPRESSED_RGBA_ASTC_5x5_KHR;if(c===Nr)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:A.COMPRESSED_RGBA_ASTC_6x5_KHR;if(c===Ds)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:A.COMPRESSED_RGBA_ASTC_6x6_KHR;if(c===ro)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:A.COMPRESSED_RGBA_ASTC_8x5_KHR;if(c===pi)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:A.COMPRESSED_RGBA_ASTC_8x6_KHR;if(c===Ir)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:A.COMPRESSED_RGBA_ASTC_8x8_KHR;if(c===to)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:A.COMPRESSED_RGBA_ASTC_10x5_KHR;if(c===os)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:A.COMPRESSED_RGBA_ASTC_10x6_KHR;if(c===ce)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:A.COMPRESSED_RGBA_ASTC_10x8_KHR;if(c===ge)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:A.COMPRESSED_RGBA_ASTC_10x10_KHR;if(c===_e)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:A.COMPRESSED_RGBA_ASTC_12x10_KHR;if(c===Le)return p===Ar?A.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:A.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(c===qe)if(A=e.get("EXT_texture_compression_bptc"),A!==null){if(c===qe)return p===Ar?A.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:A.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return c===Dn?r?34042:(A=e.get("WEBGL_depth_texture"),A!==null?A.UNSIGNED_INT_24_8_WEBGL:null):x[c]!==void 0?x[c]:null}return{convert:a}}class Wl extends hs{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Cg extends Ao{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}var sA=new nt,Mg=new nt;function kh(x,e,n){sA.setFromMatrixPosition(e.matrixWorld),Mg.setFromMatrixPosition(n.matrixWorld);var r=sA.distanceTo(Mg),a=e.projectionMatrix.elements,c=n.projectionMatrix.elements,p=a[14]/(a[10]-1),A=a[14]/(a[10]+1),N=(a[9]+1)/a[5],H=(a[9]-1)/a[5],Z=(a[8]-1)/a[0],ne=(c[8]+1)/c[0],re=p*Z,le=p*ne,me=r/(-Z+ne),pe=me*-Z;e.matrixWorld.decompose(x.position,x.quaternion,x.scale),x.translateX(pe),x.translateZ(me),x.matrixWorld.compose(x.position,x.quaternion,x.scale),x.matrixWorldInverse.copy(x.matrixWorld).invert();var de=p+me,Ce=A+me,Fe=re-pe,Re=le+(r-pe),De=N*A/Ce*de,Ve=H*A/Ce*de;x.projectionMatrix.makePerspective(Fe,Re,De,Ve,de,Ce)}function Tg(x){var e,n,r=this,a=null,c=null,p=null,A=[],N=new Gi,H=new Gi,Z=1,ne="local-floor";typeof window<"u"&&"VRFrameData"in window&&(c=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",De,!1));var re=new Gi,le=new Co,me=new nt,pe=new Ao;pe.viewport=new Zr,pe.layers.enable(1);var de=new Ao;de.viewport=new Zr,de.layers.enable(2);var Ce=new Cg([pe,de]);Ce.layers.enable(1),Ce.layers.enable(2);var Fe=new On,Re;function De(){var Ut=r.isPresenting=a!==null&&a.isPresenting===!0;if(Ut){var hn=a.getEyeParameters("left");e=2*hn.renderWidth*Z,n=hn.renderHeight*Z,Re=x.getPixelRatio(),x.getSize(Fe),x.setDrawingBufferSize(e,n,1),pe.viewport.set(0,0,e/2,n),de.viewport.set(e/2,0,e/2,n),vt.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&x.setDrawingBufferSize(Fe.width,Fe.height,Re),vt.stop(),r.dispatchEvent({type:"sessionend"})}var Ve=[],ct=[];function bt(Ut){for(var hn=navigator.getGamepads&&navigator.getGamepads(),Kt=0,Dt=hn.length;Kt<Dt;Kt++){var sn=hn[Kt];if(sn&&(sn.id==="Daydream Controller"||sn.id==="Gear VR Controller"||sn.id==="Oculus Go Controller"||sn.id==="OpenVR Gamepad"||sn.id.startsWith("Oculus Touch")||sn.id.startsWith("HTC Vive Focus")||sn.id.startsWith("Spatial Controller"))){var kn=sn.hand;if(Ut===0&&(kn===""||kn==="right")||Ut===1&&kn==="left")return sn}}}function Ne(){for(var Ut=0;Ut<A.length;Ut++){var hn=A[Ut],Kt=bt(Ut);if(Kt!==void 0&&Kt.pose!==void 0){if(Kt.pose===null)return;var Dt=Kt.pose;Dt.hasPosition===!1&&hn.position.set(.2,-.6,-.05),Dt.position!==null&&hn.position.fromArray(Dt.position),Dt.orientation!==null&&hn.quaternion.fromArray(Dt.orientation),hn.matrix.compose(hn.position,hn.quaternion,hn.scale),hn.matrix.premultiply(N),hn.matrix.decompose(hn.position,hn.quaternion,hn.scale),hn.matrixWorldNeedsUpdate=!0,hn.visible=!0;var sn=Kt.id==="Daydream Controller"?0:1;Ve[Ut]===void 0&&(Ve[Ut]=!1),Ve[Ut]!==Kt.buttons[sn].pressed&&(Ve[Ut]=Kt.buttons[sn].pressed,Ve[Ut]===!0?hn.dispatchEvent({type:"selectstart"}):(hn.dispatchEvent({type:"selectend"}),hn.dispatchEvent({type:"select"}))),sn=2,ct[Ut]===void 0&&(ct[Ut]=!1),Kt.buttons[sn]!==void 0&&ct[Ut]!==Kt.buttons[sn].pressed&&(ct[Ut]=Kt.buttons[sn].pressed,ct[Ut]===!0?hn.dispatchEvent({type:"squeezestart"}):(hn.dispatchEvent({type:"squeezeend"}),hn.dispatchEvent({type:"squeeze"})))}else hn.visible=!1}}function dt(Ut,hn){hn!==null&&hn.length===4&&Ut.set(hn[0]*e,hn[1]*n,hn[2]*e,hn[3]*n)}this.enabled=!1,this.getController=function(Ut){var hn=A[Ut];return hn===void 0&&(hn=new Wl,hn.matrixAutoUpdate=!1,hn.visible=!1,A[Ut]=hn),hn},this.getDevice=function(){return a},this.setDevice=function(Ut){Ut!==void 0&&(a=Ut),vt.setContext(Ut)},this.setFramebufferScaleFactor=function(Ut){Z=Ut},this.setReferenceSpaceType=function(Ut){ne=Ut},this.setPoseTarget=function(Ut){Ut!==void 0&&(p=Ut)},this.cameraAutoUpdate=!0,this.updateCamera=function(Ut){var hn=ne==="local-floor"?1.6:0;if(a.depthNear=Ut.near,a.depthFar=Ut.far,a.getFrameData(c),ne==="local-floor"){var Kt=a.stageParameters;Kt?N.fromArray(Kt.sittingToStandingTransform):N.makeTranslation(0,hn,0)}var Dt=c.pose,sn=p!==null?p:Ut;sn.matrix.copy(N),sn.matrix.decompose(sn.position,sn.quaternion,sn.scale),Dt.orientation!==null&&(le.fromArray(Dt.orientation),sn.quaternion.multiply(le)),Dt.position!==null&&(le.setFromRotationMatrix(N),me.fromArray(Dt.position),me.applyQuaternion(le),sn.position.add(me)),sn.updateMatrixWorld();for(var kn=sn.children,Zn=0,Ln=kn.length;Zn<Ln;Zn++)kn[Zn].updateMatrixWorld(!0);pe.near=Ut.near,de.near=Ut.near,pe.far=Ut.far,de.far=Ut.far,pe.matrixWorldInverse.fromArray(c.leftViewMatrix),de.matrixWorldInverse.fromArray(c.rightViewMatrix),H.copy(N).invert(),ne==="local-floor"&&(pe.matrixWorldInverse.multiply(H),de.matrixWorldInverse.multiply(H));var ui=sn.parent;ui!==null&&(re.copy(ui.matrixWorld).invert(),pe.matrixWorldInverse.multiply(re),de.matrixWorldInverse.multiply(re)),pe.matrixWorld.copy(pe.matrixWorldInverse).invert(),de.matrixWorld.copy(de.matrixWorldInverse).invert(),pe.projectionMatrix.fromArray(c.leftProjectionMatrix),de.projectionMatrix.fromArray(c.rightProjectionMatrix),kh(Ce,pe,de);var si=a.getLayers();if(si.length){var Qi=si[0];dt(pe.viewport,Qi.leftBounds),dt(de.viewport,Qi.rightBounds)}return Ne(),Ce},this.getCamera=function(){return Ce},this.getFoveation=function(){return 1},this.setFoveation=function(Ut){Ut!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getStandingMatrix=function(){return N},this.isPresenting=!1;var vt=new wh;this.setAnimationLoop=function(Ut){vt.setAnimationLoop(Ut),this.isPresenting&&vt.start()},this.submitFrame=function(){this.isPresenting&&a.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",De)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(Tg.prototype,{addEventListener:ia.prototype.addEventListener,hasEventListener:ia.prototype.hasEventListener,removeEventListener:ia.prototype.removeEventListener,dispatchEvent:ia.prototype.dispatchEvent});const Hp={type:"move"};class zp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new nt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new nt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new nt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new nt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let a=null,c=null,p=null;const A=this._targetRay,N=this._grip,H=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(H&&e.hand){p=!0;for(const pe of e.hand.values()){const de=n.getJointPose(pe,r),Ce=this._getHandJoint(H,pe);de!==null&&(Ce.matrix.fromArray(de.transform.matrix),Ce.matrix.decompose(Ce.position,Ce.rotation,Ce.scale),Ce.jointRadius=de.radius),Ce.visible=de!==null}const Z=H.joints["index-finger-tip"],ne=H.joints["thumb-tip"],re=Z.position.distanceTo(ne.position),le=.02,me=.005;H.inputState.pinching&&re>le+me?(H.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!H.inputState.pinching&&re<=le-me&&(H.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else N!==null&&e.gripSpace&&(c=n.getPose(e.gripSpace,r),c!==null&&(N.matrix.fromArray(c.transform.matrix),N.matrix.decompose(N.position,N.rotation,N.scale),c.linearVelocity?(N.hasLinearVelocity=!0,N.linearVelocity.copy(c.linearVelocity)):N.hasLinearVelocity=!1,c.angularVelocity?(N.hasAngularVelocity=!0,N.angularVelocity.copy(c.angularVelocity)):N.hasAngularVelocity=!1));A!==null&&(a=n.getPose(e.targetRaySpace,r),a===null&&c!==null&&(a=c),a!==null&&(A.matrix.fromArray(a.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),a.linearVelocity?(A.hasLinearVelocity=!0,A.linearVelocity.copy(a.linearVelocity)):A.hasLinearVelocity=!1,a.angularVelocity?(A.hasAngularVelocity=!0,A.angularVelocity.copy(a.angularVelocity)):A.hasAngularVelocity=!1,this.dispatchEvent(Hp)))}return A!==null&&(A.visible=a!==null),N!==null&&(N.visible=c!==null),H!==null&&(H.visible=p!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Wl;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Sg extends js{constructor(e,n,r,a,c,p,A,N,H,Z){if(Z=Z!==void 0?Z:Gr,Z!==Gr&&Z!==Dr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&Z===Gr&&(r=Nn),r===void 0&&Z===Dr&&(r=Dn),super(null,a,c,p,A,N,Z,r,H),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=A!==void 0?A:ae,this.minFilter=N!==void 0?N:ae,this.flipY=!1,this.generateMipmaps=!1}}class qv extends ia{constructor(e,n){super();const r=this;let a=null,c=1;var p=null;let A=null,N="local-floor",H=null,Z=null;var ne=[];let re=null,le=null,me=null,pe=null;const de=n.getContextAttributes();let Ce=null,Fe=null;const Re=[],De=[],Ve=new Set,ct=new Map,bt=new Ao;bt.layers.enable(1),bt.viewport=new Zr;const Ne=new Ao;Ne.layers.enable(2),Ne.viewport=new Zr;const dt=[bt,Ne],vt=new Cg;vt.layers.enable(1),vt.layers.enable(2);let Ut=null,hn=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.getCameraPose=function(){return Z},this.getController=function(gn){let $n=Re[gn];return $n===void 0&&($n=new zp,Re[gn]=$n),$n.getTargetRaySpace()},this.getControllerGrip=function(gn){let $n=Re[gn];return $n===void 0&&($n=new zp,Re[gn]=$n),$n.getGripSpace()},this.getHand=function(gn){let $n=Re[gn];return $n===void 0&&($n=new zp,Re[gn]=$n),$n.getHandSpace()};function Kt(gn){const $n=De.indexOf(gn.inputSource);if($n===-1)return;const _i=Re[$n];_i!==void 0&&_i.dispatchEvent({type:gn.type,data:gn.inputSource})}function Dt(){a.removeEventListener("select",Kt),a.removeEventListener("selectstart",Kt),a.removeEventListener("selectend",Kt),a.removeEventListener("squeeze",Kt),a.removeEventListener("squeezestart",Kt),a.removeEventListener("squeezeend",Kt),a.removeEventListener("end",Dt),a.removeEventListener("inputsourceschange",sn);for(let gn=0;gn<Re.length;gn++){const $n=De[gn];$n!==null&&(De[gn]=null,Re[gn].disconnect($n))}Ut=null,hn=null,e.setRenderTarget(Ce),me=null,le=null,re=null,a=null,Fe=null,Li.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(gn){c=gn,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(gn){N=gn,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return H||A},this.setReferenceSpace=function(gn){H=gn},this.getBaseLayer=function(){return le!==null?le:me},this.getBinding=function(){return re},this.getFrame=function(){return pe},this.getSession=function(){return a},this.setSession=async function(gn){if(a=gn,a!==null){if(Ce=e.getRenderTarget(),a.addEventListener("select",Kt),a.addEventListener("selectstart",Kt),a.addEventListener("selectend",Kt),a.addEventListener("squeeze",Kt),a.addEventListener("squeezestart",Kt),a.addEventListener("squeezeend",Kt),a.addEventListener("end",Dt),a.addEventListener("inputsourceschange",sn),de.xrCompatible!==!0&&await n.makeXRCompatible(),a.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const $n={antialias:a.renderState.layers===void 0?de.antialias:!0,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:c};me=new XRWebGLLayer(a,n,$n),a.updateRenderState({baseLayer:me}),Fe=new No(me.framebufferWidth,me.framebufferHeight,{format:Zi,type:jt,encoding:e.outputEncoding,stencilBuffer:de.stencil})}else{let $n=null,_i=null,ln=null;de.depth&&(ln=de.stencil?35056:33190,$n=de.stencil?Dr:Gr,_i=de.stencil?Dn:Nn);const Wi={colorFormat:32856,depthFormat:ln,scaleFactor:c};re=new XRWebGLBinding(a,n),le=re.createProjectionLayer(Wi),a.updateRenderState({layers:[le]}),Fe=new No(le.textureWidth,le.textureHeight,{format:Zi,type:jt,depthTexture:new Sg(le.textureWidth,le.textureHeight,_i,void 0,void 0,void 0,void 0,void 0,void 0,$n),stencilBuffer:de.stencil,encoding:e.outputEncoding,samples:de.antialias?4:0});const wi=e.properties.get(Fe);wi.__ignoreDepthValues=le.ignoreDepthValues}Fe.isXRRenderTarget=!0,this.setFoveation(1),H=null,A=await a.requestReferenceSpace(N),Li.setContext(a),Li.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.addLayer=function(gn){!window.XRWebGLBinding||!this.layersEnabled||!a||(ne.push(gn),this.updateLayers())},this.removeLayer=function(gn){ne.splice(ne.indexOf(gn),1),!(!window.XRWebGLBinding||!this.layersEnabled||!a)&&this.updateLayers()},this.updateLayers=function(){var gn=ne.map(function($n){return $n});gn.unshift(a.renderState.layers[0]),a.updateRenderState({layers:gn})};function sn(gn){for(let $n=0;$n<gn.removed.length;$n++){const _i=gn.removed[$n],ln=De.indexOf(_i);ln>=0&&(De[ln]=null,Re[ln].disconnect(_i))}for(let $n=0;$n<gn.added.length;$n++){const _i=gn.added[$n];let ln=De.indexOf(_i);if(ln===-1){for(let wi=0;wi<Re.length;wi++)if(wi>=De.length){De.push(_i),ln=wi;break}else if(De[wi]===null){De[wi]=_i,ln=wi;break}if(ln===-1)break}const Wi=Re[ln];Wi&&Wi.connect(_i)}}const kn=new nt,Zn=new nt;function Ln(gn,$n,_i){kn.setFromMatrixPosition($n.matrixWorld),Zn.setFromMatrixPosition(_i.matrixWorld);const ln=kn.distanceTo(Zn),Wi=$n.projectionMatrix.elements,wi=_i.projectionMatrix.elements,gr=Wi[14]/(Wi[10]-1),mi=Wi[14]/(Wi[10]+1),ns=(Wi[9]+1)/Wi[5],Hn=(Wi[9]-1)/Wi[5],Rn=(Wi[8]-1)/Wi[0],yi=(wi[8]+1)/wi[0],cr=gr*Rn,Di=gr*yi,Hr=ln/(-Rn+yi),Tr=Hr*-Rn;$n.matrixWorld.decompose(gn.position,gn.quaternion,gn.scale),gn.translateX(Tr),gn.translateZ(Hr),gn.matrixWorld.compose(gn.position,gn.quaternion,gn.scale),gn.matrixWorldInverse.copy(gn.matrixWorld).invert();const vr=gr+Hr,Xs=mi+Hr,Hs=cr-Tr,ft=Di+(ln-Tr),tt=ns*mi/Xs*vr,fn=Hn*mi/Xs*vr;gn.projectionMatrix.makePerspective(Hs,ft,tt,fn,vr,Xs)}function ui(gn,$n){$n===null?gn.matrixWorld.copy(gn.matrix):gn.matrixWorld.multiplyMatrices($n.matrixWorld,gn.matrix),gn.matrixWorldInverse.copy(gn.matrixWorld).invert()}this.setPoseTarget=function(gn){gn!==void 0&&(p=gn)},this.updateCamera=function(gn){if(a===null)return;vt.near=Ne.near=bt.near=gn.near,vt.far=Ne.far=bt.far=gn.far,(Ut!==vt.near||hn!==vt.far)&&(a.updateRenderState({depthNear:vt.near,depthFar:vt.far}),Ut=vt.near,hn=vt.far);const $n=vt.cameras;var _i=p||gn;const ln=_i.parent;ui(vt,ln);for(let wi=0;wi<$n.length;wi++)ui($n[wi],ln);vt.matrixWorld.decompose(vt.position,vt.quaternion,vt.scale),_i.matrixWorld.copy(vt.matrixWorld),_i.matrix.copy(vt.matrix),_i.matrix.decompose(_i.position,_i.quaternion,_i.scale);const Wi=_i.children;for(let wi=0,gr=Wi.length;wi<gr;wi++)Wi[wi].updateMatrixWorld(!0);$n.length===2?Ln(vt,bt,Ne):vt.projectionMatrix.copy(bt.projectionMatrix)},this.getCamera=function(){return vt},this.getFoveation=function(){if(le!==null)return le.fixedFoveation;if(me!==null)return me.fixedFoveation},this.setFoveation=function(gn){le!==null&&(le.fixedFoveation=gn),me!==null&&me.fixedFoveation!==void 0&&(me.fixedFoveation=gn)},this.getPlanes=function(){return Ve};let si=null;function Qi(gn,$n){if(Z=$n.getViewerPose(H||A),pe=$n,Z!==null){const _i=Z.views;me!==null&&(e.setRenderTargetFramebuffer(Fe,me.framebuffer),e.setRenderTarget(Fe));let ln=!1;_i.length!==vt.cameras.length&&(vt.cameras.length=0,ln=!0);for(let Wi=0;Wi<_i.length;Wi++){const wi=_i[Wi];let gr=null;if(me!==null)gr=me.getViewport(wi);else{const ns=re.getViewSubImage(le,wi);gr=ns.viewport,Wi===0&&(e.setRenderTargetTextures(Fe,ns.colorTexture,le.ignoreDepthValues?void 0:ns.depthStencilTexture),e.setRenderTarget(Fe))}let mi=dt[Wi];mi===void 0&&(mi=new Ao,mi.layers.enable(Wi),mi.viewport=new Zr,dt[Wi]=mi),mi.matrix.fromArray(wi.transform.matrix),mi.projectionMatrix.fromArray(wi.projectionMatrix),mi.viewport.set(gr.x,gr.y,gr.width,gr.height),Wi===0&&vt.matrix.copy(mi.matrix),ln===!0&&vt.cameras.push(mi)}}for(let _i=0;_i<Re.length;_i++){const ln=De[_i],Wi=Re[_i];ln!==null&&Wi!==void 0&&Wi.update(ln,$n,H||A)}if(si&&si(gn,$n),$n.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:$n.detectedPlanes});let _i=null;for(const ln of Ve)$n.detectedPlanes.has(ln)||(_i===null&&(_i=[]),_i.push(ln));if(_i!==null)for(const ln of _i)Ve.delete(ln),ct.delete(ln),r.dispatchEvent({type:"planeremoved",data:ln});for(const ln of $n.detectedPlanes)if(!Ve.has(ln))Ve.add(ln),ct.set(ln,$n.lastChangedTime),r.dispatchEvent({type:"planeadded",data:ln});else{const Wi=ct.get(ln);ln.lastChangedTime>Wi&&(ct.set(ln,ln.lastChangedTime),r.dispatchEvent({type:"planechanged",data:ln}))}}pe=null}const Li=new wh;Li.setAnimationLoop(Qi),this.setAnimationLoop=function(gn){si=gn},this.dispose=function(){}}}function Jc(x,e){function n(pe,de){de.color.getRGB(pe.fogColor.value,h0(x)),de.isFog?(pe.fogNear.value=de.near,pe.fogFar.value=de.far):de.isFogExp2&&(pe.fogDensity.value=de.density)}function r(pe,de,Ce,Fe,Re){de.isMeshBasicMaterial||de.isMeshLambertMaterial?a(pe,de):de.isMeshToonMaterial?(a(pe,de),Z(pe,de)):de.isMeshPhongMaterial?(a(pe,de),H(pe,de)):de.isMeshStandardMaterial?(a(pe,de),ne(pe,de),de.isMeshPhysicalMaterial&&re(pe,de,Re)):de.isMeshMatcapMaterial?(a(pe,de),le(pe,de)):de.isMeshDepthMaterial?a(pe,de):de.isMeshDistanceMaterial?(a(pe,de),me(pe,de)):de.isMeshNormalMaterial?a(pe,de):de.isLineBasicMaterial?(c(pe,de),de.isLineDashedMaterial&&p(pe,de)):de.isPointsMaterial?A(pe,de,Ce,Fe):de.isSpriteMaterial?N(pe,de):de.isShadowMaterial?(pe.color.value.copy(de.color),pe.opacity.value=de.opacity):de.isShaderMaterial&&(de.uniformsNeedUpdate=!1)}function a(pe,de){pe.opacity.value=de.opacity,de.color&&pe.diffuse.value.copy(de.color),de.emissive&&pe.emissive.value.copy(de.emissive).multiplyScalar(de.emissiveIntensity),de.map&&(pe.map.value=de.map),de.alphaMap&&(pe.alphaMap.value=de.alphaMap),de.bumpMap&&(pe.bumpMap.value=de.bumpMap,pe.bumpScale.value=de.bumpScale,de.side===P&&(pe.bumpScale.value*=-1)),de.displacementMap&&(pe.displacementMap.value=de.displacementMap,pe.displacementScale.value=de.displacementScale,pe.displacementBias.value=de.displacementBias),de.emissiveMap&&(pe.emissiveMap.value=de.emissiveMap),de.normalMap&&(pe.normalMap.value=de.normalMap,pe.normalScale.value.copy(de.normalScale),de.side===P&&pe.normalScale.value.negate()),de.specularMap&&(pe.specularMap.value=de.specularMap),de.alphaTest>0&&(pe.alphaTest.value=de.alphaTest);const Ce=e.get(de).envMap;if(Ce&&(pe.envMap.value=Ce,pe.flipEnvMap.value=Ce.isCubeTexture&&Ce.isRenderTargetTexture===!1?-1:1,pe.reflectivity.value=de.reflectivity,pe.ior.value=de.ior,pe.refractionRatio.value=de.refractionRatio),de.lightMap){pe.lightMap.value=de.lightMap;const De=x.physicallyCorrectLights!==!0?Math.PI:1;pe.lightMapIntensity.value=de.lightMapIntensity*De}de.aoMap&&(pe.aoMap.value=de.aoMap,pe.aoMapIntensity.value=de.aoMapIntensity);let Fe;de.map?Fe=de.map:de.specularMap?Fe=de.specularMap:de.displacementMap?Fe=de.displacementMap:de.normalMap?Fe=de.normalMap:de.bumpMap?Fe=de.bumpMap:de.roughnessMap?Fe=de.roughnessMap:de.metalnessMap?Fe=de.metalnessMap:de.alphaMap?Fe=de.alphaMap:de.emissiveMap?Fe=de.emissiveMap:de.clearcoatMap?Fe=de.clearcoatMap:de.clearcoatNormalMap?Fe=de.clearcoatNormalMap:de.clearcoatRoughnessMap?Fe=de.clearcoatRoughnessMap:de.iridescenceMap?Fe=de.iridescenceMap:de.iridescenceThicknessMap?Fe=de.iridescenceThicknessMap:de.specularIntensityMap?Fe=de.specularIntensityMap:de.specularColorMap?Fe=de.specularColorMap:de.transmissionMap?Fe=de.transmissionMap:de.thicknessMap?Fe=de.thicknessMap:de.sheenColorMap?Fe=de.sheenColorMap:de.sheenRoughnessMap&&(Fe=de.sheenRoughnessMap),Fe!==void 0&&(Fe.isWebGLRenderTarget&&(Fe=Fe.texture),Fe.matrixAutoUpdate===!0&&Fe.updateMatrix(),pe.uvTransform.value.copy(Fe.matrix));let Re;de.aoMap?Re=de.aoMap:de.lightMap&&(Re=de.lightMap),Re!==void 0&&(Re.isWebGLRenderTarget&&(Re=Re.texture),Re.matrixAutoUpdate===!0&&Re.updateMatrix(),pe.uv2Transform.value.copy(Re.matrix))}function c(pe,de){pe.diffuse.value.copy(de.color),pe.opacity.value=de.opacity}function p(pe,de){pe.dashSize.value=de.dashSize,pe.totalSize.value=de.dashSize+de.gapSize,pe.scale.value=de.scale}function A(pe,de,Ce,Fe){pe.diffuse.value.copy(de.color),pe.opacity.value=de.opacity,pe.size.value=de.size*Ce,pe.scale.value=Fe*.5,de.map&&(pe.map.value=de.map),de.alphaMap&&(pe.alphaMap.value=de.alphaMap),de.alphaTest>0&&(pe.alphaTest.value=de.alphaTest);let Re;de.map?Re=de.map:de.alphaMap&&(Re=de.alphaMap),Re!==void 0&&(Re.matrixAutoUpdate===!0&&Re.updateMatrix(),pe.uvTransform.value.copy(Re.matrix))}function N(pe,de){pe.diffuse.value.copy(de.color),pe.opacity.value=de.opacity,pe.rotation.value=de.rotation,de.map&&(pe.map.value=de.map),de.alphaMap&&(pe.alphaMap.value=de.alphaMap),de.alphaTest>0&&(pe.alphaTest.value=de.alphaTest);let Ce;de.map?Ce=de.map:de.alphaMap&&(Ce=de.alphaMap),Ce!==void 0&&(Ce.matrixAutoUpdate===!0&&Ce.updateMatrix(),pe.uvTransform.value.copy(Ce.matrix))}function H(pe,de){pe.specular.value.copy(de.specular),pe.shininess.value=Math.max(de.shininess,1e-4)}function Z(pe,de){de.gradientMap&&(pe.gradientMap.value=de.gradientMap)}function ne(pe,de){pe.roughness.value=de.roughness,pe.metalness.value=de.metalness,de.roughnessMap&&(pe.roughnessMap.value=de.roughnessMap),de.metalnessMap&&(pe.metalnessMap.value=de.metalnessMap),e.get(de).envMap&&(pe.envMapIntensity.value=de.envMapIntensity)}function re(pe,de,Ce){pe.ior.value=de.ior,de.sheen>0&&(pe.sheenColor.value.copy(de.sheenColor).multiplyScalar(de.sheen),pe.sheenRoughness.value=de.sheenRoughness,de.sheenColorMap&&(pe.sheenColorMap.value=de.sheenColorMap),de.sheenRoughnessMap&&(pe.sheenRoughnessMap.value=de.sheenRoughnessMap)),de.clearcoat>0&&(pe.clearcoat.value=de.clearcoat,pe.clearcoatRoughness.value=de.clearcoatRoughness,de.clearcoatMap&&(pe.clearcoatMap.value=de.clearcoatMap),de.clearcoatRoughnessMap&&(pe.clearcoatRoughnessMap.value=de.clearcoatRoughnessMap),de.clearcoatNormalMap&&(pe.clearcoatNormalScale.value.copy(de.clearcoatNormalScale),pe.clearcoatNormalMap.value=de.clearcoatNormalMap,de.side===P&&pe.clearcoatNormalScale.value.negate())),de.iridescence>0&&(pe.iridescence.value=de.iridescence,pe.iridescenceIOR.value=de.iridescenceIOR,pe.iridescenceThicknessMinimum.value=de.iridescenceThicknessRange[0],pe.iridescenceThicknessMaximum.value=de.iridescenceThicknessRange[1],de.iridescenceMap&&(pe.iridescenceMap.value=de.iridescenceMap),de.iridescenceThicknessMap&&(pe.iridescenceThicknessMap.value=de.iridescenceThicknessMap)),de.transmission>0&&(pe.transmission.value=de.transmission,pe.transmissionSamplerMap.value=Ce.texture,pe.transmissionSamplerSize.value.set(Ce.width,Ce.height),de.transmissionMap&&(pe.transmissionMap.value=de.transmissionMap),pe.thickness.value=de.thickness,de.thicknessMap&&(pe.thicknessMap.value=de.thicknessMap),pe.attenuationDistance.value=de.attenuationDistance,pe.attenuationColor.value.copy(de.attenuationColor)),pe.specularIntensity.value=de.specularIntensity,pe.specularColor.value.copy(de.specularColor),de.specularIntensityMap&&(pe.specularIntensityMap.value=de.specularIntensityMap),de.specularColorMap&&(pe.specularColorMap.value=de.specularColorMap)}function le(pe,de){de.matcap&&(pe.matcap.value=de.matcap)}function me(pe,de){pe.referencePosition.value.copy(de.referencePosition),pe.nearDistance.value=de.nearDistance,pe.farDistance.value=de.farDistance}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function Vp(x,e,n,r){let a={},c={},p=[];const A=n.isWebGL2?x.getParameter(35375):0;function N(Fe,Re){const De=Re.program;r.uniformBlockBinding(Fe,De)}function H(Fe,Re){let De=a[Fe.id];De===void 0&&(me(Fe),De=Z(Fe),a[Fe.id]=De,Fe.addEventListener("dispose",de));const Ve=Re.program;r.updateUBOMapping(Fe,Ve);const ct=e.render.frame;c[Fe.id]!==ct&&(re(Fe),c[Fe.id]=ct)}function Z(Fe){const Re=ne();Fe.__bindingPointIndex=Re;const De=x.createBuffer(),Ve=Fe.__size,ct=Fe.usage;return x.bindBuffer(35345,De),x.bufferData(35345,Ve,ct),x.bindBuffer(35345,null),x.bindBufferBase(35345,Re,De),De}function ne(){for(let Fe=0;Fe<A;Fe++)if(p.indexOf(Fe)===-1)return p.push(Fe),Fe;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function re(Fe){const Re=a[Fe.id],De=Fe.uniforms,Ve=Fe.__cache;x.bindBuffer(35345,Re);for(let ct=0,bt=De.length;ct<bt;ct++){const Ne=De[ct];if(le(Ne,ct,Ve)===!0){const dt=Ne.value,vt=Ne.__offset;typeof dt=="number"?(Ne.__data[0]=dt,x.bufferSubData(35345,vt,Ne.__data)):(Ne.value.isMatrix3?(Ne.__data[0]=Ne.value.elements[0],Ne.__data[1]=Ne.value.elements[1],Ne.__data[2]=Ne.value.elements[2],Ne.__data[3]=Ne.value.elements[0],Ne.__data[4]=Ne.value.elements[3],Ne.__data[5]=Ne.value.elements[4],Ne.__data[6]=Ne.value.elements[5],Ne.__data[7]=Ne.value.elements[0],Ne.__data[8]=Ne.value.elements[6],Ne.__data[9]=Ne.value.elements[7],Ne.__data[10]=Ne.value.elements[8],Ne.__data[11]=Ne.value.elements[0]):dt.toArray(Ne.__data),x.bufferSubData(35345,vt,Ne.__data))}}x.bindBuffer(35345,null)}function le(Fe,Re,De){const Ve=Fe.value;if(De[Re]===void 0)return typeof Ve=="number"?De[Re]=Ve:De[Re]=Ve.clone(),!0;if(typeof Ve=="number"){if(De[Re]!==Ve)return De[Re]=Ve,!0}else{const ct=De[Re];if(ct.equals(Ve)===!1)return ct.copy(Ve),!0}return!1}function me(Fe){const Re=Fe.uniforms;let De=0;const Ve=16;let ct=0;for(let bt=0,Ne=Re.length;bt<Ne;bt++){const dt=Re[bt],vt=pe(dt);if(dt.__data=new Float32Array(vt.storage/Float32Array.BYTES_PER_ELEMENT),dt.__offset=De,bt>0){ct=De%Ve;const Ut=Ve-ct;ct!==0&&Ut-vt.boundary<0&&(De+=Ve-ct,dt.__offset=De)}De+=vt.storage}return ct=De%Ve,ct>0&&(De+=Ve-ct),Fe.__size=De,Fe.__cache={},this}function pe(Fe){const Re=Fe.value,De={boundary:0,storage:0};return typeof Re=="number"?(De.boundary=4,De.storage=4):Re.isVector2?(De.boundary=8,De.storage=8):Re.isVector3||Re.isColor?(De.boundary=16,De.storage=12):Re.isVector4?(De.boundary=16,De.storage=16):Re.isMatrix3?(De.boundary=48,De.storage=48):Re.isMatrix4?(De.boundary=64,De.storage=64):Re.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Re),De}function de(Fe){const Re=Fe.target;Re.removeEventListener("dispose",de);const De=p.indexOf(Re.__bindingPointIndex);p.splice(De,1),x.deleteBuffer(a[Re.id]),delete a[Re.id],delete c[Re.id]}function Ce(){for(const Fe in a)x.deleteBuffer(a[Fe]);p=[],a={},c={}}return{bind:N,update:H,dispose:Ce}}function Ig(){const x=Pl("canvas");return x.style.display="block",x}function Rg(x={}){this.isWebGLRenderer=!0;const e=x.canvas!==void 0?x.canvas:Ig(),n=x.context!==void 0?x.context:null,r=x.depth!==void 0?x.depth:!0,a=x.stencil!==void 0?x.stencil:!0,c=x.antialias!==void 0?x.antialias:!1,p=x.premultipliedAlpha!==void 0?x.premultipliedAlpha:!0,A=x.preserveDrawingBuffer!==void 0?x.preserveDrawingBuffer:!1,N=x.powerPreference!==void 0?x.powerPreference:"default",H=x.failIfMajorPerformanceCaveat!==void 0?x.failIfMajorPerformanceCaveat:!1;let Z;n!==null?Z=n.getContextAttributes().alpha:Z=x.alpha!==void 0?x.alpha:!1;let ne=null,re=null;const le=[],me=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Yr,this.physicallyCorrectLights=!1,this.toneMapping=bn,this.toneMappingExposure=1;const pe=this;let de=!1,Ce=0,Fe=0,Re=null,De=-1,Ve=null;const ct=new Zr,bt=new Zr;let Ne=null,dt=e.width,vt=e.height,Ut=1,hn=null,Kt=null;const Dt=new Zr(0,0,dt,vt),sn=new Zr(0,0,dt,vt);let kn=!1;const Zn=new ul;let Ln=!1,ui=!1,si=null;const Qi=new Gi,Li=new On,gn=new nt,$n={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function _i(){return Re===null?Ut:1}let ln=n;function Wi(st,rn){for(let An=0;An<st.length;An++){const Jt=st[An],Tn=e.getContext(Jt,rn);if(Tn!==null)return Tn}return null}try{const st={alpha:!0,depth:r,stencil:a,antialias:c,premultipliedAlpha:p,preserveDrawingBuffer:A,powerPreference:N,failIfMajorPerformanceCaveat:H};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${g}`),e.addEventListener("webglcontextlost",Sr,!1),e.addEventListener("webglcontextrestored",xr,!1),e.addEventListener("webglcontextcreationerror",Rs,!1),ln===null){const rn=["webgl2","webgl","experimental-webgl"];if(pe.isWebGL1Renderer===!0&&rn.shift(),ln=Wi(rn,st),ln===null)throw Wi(rn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ln.getShaderPrecisionFormat===void 0&&(ln.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(st){throw console.error("THREE.WebGLRenderer: "+st.message),st}let wi,gr,mi,ns,Hn,Rn,yi,cr,Di,Hr,Tr,vr,Xs,Hs,ft,tt,fn,hi,Ai,ki,Ur,Hi,Bn,yr;function Br(){wi=new wp(ln),gr=new L0(ln,wi,x),wi.init(gr),Hi=new wg(ln,wi,gr),mi=new rA(ln,wi,gr),ns=new Mp,Hn=new Hv,Rn=new Yv(ln,wi,mi,Hn,gr,Hi,ns),yi=new yp(pe),cr=new Ov(pe),Di=new ka(ln,gr),Bn=new Jm(ln,wi,Di,gr),Hr=new Cp(ln,Di,ns,Bn),Tr=new Sp(ln,Hr,Di,ns),Ai=new Tp(ln,gr,Rn),tt=new Zm(Hn),vr=new Nu(pe,yi,cr,wi,gr,Bn,tt),Xs=new Jc(pe,Hn),Hs=new zv,ft=new jv(wi,gr),hi=new B0(pe,yi,cr,mi,Tr,Z,p),fn=new Xv(pe,Tr,gr),yr=new Vp(ln,ns,gr,mi),ki=new Tu(ln,wi,ns,gr),Ur=new Od(ln,wi,ns,gr),ns.programs=vr.programs,pe.capabilities=gr,pe.extensions=wi,pe.properties=Hn,pe.renderLists=Hs,pe.shadowMap=fn,pe.state=mi,pe.info=ns}Br();const or=typeof navigator<"u"&&"xr"in navigator?new qv(pe,ln):new Tg(pe);this.xr=or,this.getContext=function(){return ln},this.getContextAttributes=function(){return ln.getContextAttributes()},this.forceContextLoss=function(){const st=wi.get("WEBGL_lose_context");st&&st.loseContext()},this.forceContextRestore=function(){const st=wi.get("WEBGL_lose_context");st&&st.restoreContext()},this.getPixelRatio=function(){return Ut},this.setPixelRatio=function(st){st!==void 0&&(Ut=st,this.setSize(dt,vt,!1))},this.getSize=function(st){return st.set(dt,vt)},this.setSize=function(st,rn,An){if(or.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}dt=st,vt=rn,e.width=Math.floor(st*Ut),e.height=Math.floor(rn*Ut),An!==!1&&(e.style.width=st+"px",e.style.height=rn+"px"),this.setViewport(0,0,st,rn)},this.getDrawingBufferSize=function(st){return st.set(dt*Ut,vt*Ut).floor()},this.setDrawingBufferSize=function(st,rn,An){dt=st,vt=rn,Ut=An,e.width=Math.floor(st*An),e.height=Math.floor(rn*An),this.setViewport(0,0,st,rn)},this.getCurrentViewport=function(st){return st.copy(ct)},this.getViewport=function(st){return st.copy(Dt)},this.setViewport=function(st,rn,An,Jt){st.isVector4?Dt.set(st.x,st.y,st.z,st.w):Dt.set(st,rn,An,Jt),mi.viewport(ct.copy(Dt).multiplyScalar(Ut).floor())},this.getScissor=function(st){return st.copy(sn)},this.setScissor=function(st,rn,An,Jt){st.isVector4?sn.set(st.x,st.y,st.z,st.w):sn.set(st,rn,An,Jt),mi.scissor(bt.copy(sn).multiplyScalar(Ut).floor())},this.getScissorTest=function(){return kn},this.setScissorTest=function(st){mi.setScissorTest(kn=st)},this.setOpaqueSort=function(st){hn=st},this.setTransparentSort=function(st){Kt=st},this.getClearColor=function(st){return st.copy(hi.getClearColor())},this.setClearColor=function(){hi.setClearColor.apply(hi,arguments)},this.getClearAlpha=function(){return hi.getClearAlpha()},this.setClearAlpha=function(){hi.setClearAlpha.apply(hi,arguments)},this.clear=function(st=!0,rn=!0,An=!0){let Jt=0;st&&(Jt|=16384),rn&&(Jt|=256),An&&(Jt|=1024),ln.clear(Jt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Sr,!1),e.removeEventListener("webglcontextrestored",xr,!1),e.removeEventListener("webglcontextcreationerror",Rs,!1),Hs.dispose(),ft.dispose(),Hn.dispose(),yi.dispose(),cr.dispose(),Tr.dispose(),Bn.dispose(),yr.dispose(),vr.dispose(),or.dispose(),or.removeEventListener("sessionstart",ji),or.removeEventListener("sessionend",dr),si&&(si.dispose(),si=null),Fs.stop()};function Sr(st){st.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),de=!0}function xr(){console.log("THREE.WebGLRenderer: Context Restored."),de=!1;const st=ns.autoReset,rn=fn.enabled,An=fn.autoUpdate,Jt=fn.needsUpdate,Tn=fn.type;Br(),ns.autoReset=st,fn.enabled=rn,fn.autoUpdate=An,fn.needsUpdate=Jt,fn.type=Tn}function Rs(st){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",st.statusMessage)}function co(st){const rn=st.target;rn.removeEventListener("dispose",co),ua(rn)}function ua(st){Lt(st),Hn.remove(st)}function Lt(st){const rn=Hn.get(st).programs;rn!==void 0&&(rn.forEach(function(An){vr.releaseProgram(An)}),st.isShaderMaterial&&vr.releaseShaderCache(st))}this.renderBufferDirect=function(st,rn,An,Jt,Tn,wr){rn===null&&(rn=$n);const jr=Tn.isMesh&&Tn.matrixWorld.determinant()<0,cs=t_(st,rn,An,Jt,Tn);mi.setMaterial(Jt,jr);let fs=An.index,Bs=1;Jt.wireframe===!0&&(fs=Hr.getWireframeAttribute(An),Bs=2);const Es=An.drawRange,bs=An.attributes.position;let Wo=Es.start*Bs,Sl=(Es.start+Es.count)*Bs;wr!==null&&(Wo=Math.max(Wo,wr.start*Bs),Sl=Math.min(Sl,(wr.start+wr.count)*Bs)),fs!==null?(Wo=Math.max(Wo,0),Sl=Math.min(Sl,fs.count)):bs!=null&&(Wo=Math.max(Wo,0),Sl=Math.min(Sl,bs.count));const $u=Sl-Wo;if($u<0||$u===1/0)return;Bn.setup(Tn,Jt,cs,An,fs);let xf,Ko=ki;if(fs!==null&&(xf=Di.get(fs),Ko=Ur,Ko.setIndex(xf)),Tn.isMesh)Jt.wireframe===!0?(mi.setLineWidth(Jt.wireframeLinewidth*_i()),Ko.setMode(1)):Ko.setMode(4);else if(Tn.isLine){let _s=Jt.linewidth;_s===void 0&&(_s=1),mi.setLineWidth(_s*_i()),Tn.isLineSegments?Ko.setMode(1):Tn.isLineLoop?Ko.setMode(2):Ko.setMode(3)}else Tn.isPoints?Ko.setMode(0):Tn.isSprite&&Ko.setMode(4);if(Tn.isInstancedMesh)Ko.renderInstances(Wo,$u,Tn.count);else if(An.isInstancedBufferGeometry){const _s=An._maxInstanceCount!==void 0?An._maxInstanceCount:1/0,h1=Math.min(An.instanceCount,_s);Ko.renderInstances(Wo,$u,h1)}else Ko.render(Wo,$u)},this.compile=function(st,rn){function An(Jt,Tn,wr){Jt.transparent===!0&&Jt.side===Y?(Jt.side=P,Jt.needsUpdate=!0,ql(Jt,Tn,wr),Jt.side=L,Jt.needsUpdate=!0,ql(Jt,Tn,wr),Jt.side=Y):ql(Jt,Tn,wr)}re=ft.get(st),re.init(),me.push(re),st.traverseVisible(function(Jt){Jt.isLight&&Jt.layers.test(rn.layers)&&(re.pushLight(Jt),Jt.castShadow&&re.pushShadow(Jt))}),re.setupLights(pe.physicallyCorrectLights),st.traverse(function(Jt){const Tn=Jt.material;if(Tn)if(Array.isArray(Tn))for(let wr=0;wr<Tn.length;wr++){const jr=Tn[wr];An(jr,st,Jt)}else An(Tn,st,Jt)}),me.pop(),re=null};let _n=null;function li(st){_n&&_n(st)}function ji(){Fs.stop()}function dr(){Fs.start()}const Fs=new wh;Fs.setAnimationLoop(li),typeof self<"u"&&Fs.setContext(self),this.setAnimationLoop=function(st){_n=st,or.setAnimationLoop(st),st===null?Fs.stop():Fs.start()},or.addEventListener("sessionstart",ji),or.addEventListener("sessionend",dr),this.render=function(st,rn){if(rn!==void 0&&rn.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(de===!0)return;st.matrixWorldAutoUpdate===!0&&st.updateMatrixWorld(),rn.parent===null&&rn.matrixWorldAutoUpdate===!0&&rn.updateMatrixWorld(),or.enabled===!0&&or.isPresenting===!0&&(or.cameraAutoUpdate===!0&&or.updateCamera(rn),rn=or.getCamera()),st.isScene===!0&&st.onBeforeRender(pe,st,rn,Re),re=ft.get(st,me.length),re.init(),me.push(re),Qi.multiplyMatrices(rn.projectionMatrix,rn.matrixWorldInverse),Zn.setFromProjectionMatrix(Qi),ui=this.localClippingEnabled,Ln=tt.init(this.clippingPlanes,ui,rn),ne=Hs.get(st,le.length),ne.init(),le.push(ne),ha(st,rn,0,pe.sortObjects),ne.finish(),pe.sortObjects===!0&&ne.sort(hn,Kt),Ln===!0&&tt.beginShadows();const An=re.state.shadowsArray;if(fn.render(An,st,rn),Ln===!0&&tt.endShadows(),this.info.autoReset===!0&&this.info.reset(),hi.render(ne,st),re.setupLights(pe.physicallyCorrectLights),rn.isArrayCamera){const Jt=rn.cameras;for(let Tn=0,wr=Jt.length;Tn<wr;Tn++){const jr=Jt[Tn];Ta(ne,st,jr,jr.viewport)}}else Ta(ne,st,rn);Re!==null&&(Rn.updateMultisampleRenderTarget(Re),Rn.updateRenderTargetMipmap(Re)),st.isScene===!0&&st.onAfterRender(pe,st,rn),or.enabled&&or.submitFrame&&or.submitFrame(),Bn.resetDefaultState(),De=-1,Ve=null,me.pop(),me.length>0?re=me[me.length-1]:re=null,le.pop(),le.length>0?ne=le[le.length-1]:ne=null};function ha(st,rn,An,Jt){if(st.visible===!1)return;if(st.layers.test(rn.layers)){if(st.isGroup)An=st.renderOrder;else if(st.isLOD)st.autoUpdate===!0&&st.update(rn);else if(st.isLight)re.pushLight(st),st.castShadow&&re.pushShadow(st);else if(st.isSprite){if(!st.frustumCulled||Zn.intersectsSprite(st)){Jt&&gn.setFromMatrixPosition(st.matrixWorld).applyMatrix4(Qi);const jr=Tr.update(st),cs=st.material;cs.visible&&ne.push(st,jr,cs,An,gn.z,null)}}else if((st.isMesh||st.isLine||st.isPoints)&&(st.isSkinnedMesh&&st.skeleton.frame!==ns.render.frame&&(st.skeleton.update(),st.skeleton.frame=ns.render.frame),!st.frustumCulled||Zn.intersectsObject(st))){Jt&&gn.setFromMatrixPosition(st.matrixWorld).applyMatrix4(Qi);const jr=Tr.update(st),cs=st.material;if(Array.isArray(cs)){const fs=jr.groups;for(let Bs=0,Es=fs.length;Bs<Es;Bs++){const bs=fs[Bs],Wo=cs[bs.materialIndex];Wo&&Wo.visible&&ne.push(st,jr,Wo,An,gn.z,bs)}}else cs.visible&&ne.push(st,jr,cs,An,gn.z,null)}}const wr=st.children;for(let jr=0,cs=wr.length;jr<cs;jr++)ha(wr[jr],rn,An,Jt)}function Ta(st,rn,An,Jt){const Tn=st.opaque,wr=st.transmissive,jr=st.transparent;re.setupLightsView(An),wr.length>0&&yf(Tn,rn,An),Jt&&mi.viewport(ct.copy(Jt)),Tn.length>0&&uo(Tn,rn,An),wr.length>0&&uo(wr,rn,An),jr.length>0&&uo(jr,rn,An),mi.buffers.depth.setTest(!0),mi.buffers.depth.setMask(!0),mi.buffers.color.setMask(!0),mi.setPolygonOffset(!1)}function yf(st,rn,An){const Jt=gr.isWebGL2;si===null&&(si=new No(1,1,{generateMipmaps:!0,type:wi.has("EXT_color_buffer_half_float")?Ft:jt,minFilter:$t,samples:Jt&&c===!0?4:0})),pe.getDrawingBufferSize(Li),Jt?si.setSize(Li.x,Li.y):si.setSize(pu(Li.x),pu(Li.y));const Tn=pe.getRenderTarget();pe.setRenderTarget(si),pe.clear();const wr=pe.toneMapping;pe.toneMapping=bn,uo(st,rn,An),pe.toneMapping=wr,Rn.updateMultisampleRenderTarget(si),Rn.updateRenderTargetMipmap(si),pe.setRenderTarget(Tn)}function uo(st,rn,An){const Jt=rn.isScene===!0?rn.overrideMaterial:null;for(let Tn=0,wr=st.length;Tn<wr;Tn++){const jr=st[Tn],cs=jr.object,fs=jr.geometry,Bs=Jt===null?jr.material:Jt,Es=jr.group;cs.layers.test(An.layers)&&Zu(cs,rn,An,fs,Bs,Es)}}function Zu(st,rn,An,Jt,Tn,wr){st.onBeforeRender(pe,rn,An,Jt,Tn,wr),st.modelViewMatrix.multiplyMatrices(An.matrixWorldInverse,st.matrixWorld),st.normalMatrix.getNormalMatrix(st.modelViewMatrix),Tn.onBeforeRender(pe,rn,An,Jt,st,wr),Tn.transparent===!0&&Tn.side===Y?(Tn.side=P,Tn.needsUpdate=!0,pe.renderBufferDirect(An,rn,Jt,Tn,st,wr),Tn.side=L,Tn.needsUpdate=!0,pe.renderBufferDirect(An,rn,Jt,Tn,st,wr),Tn.side=Y):pe.renderBufferDirect(An,rn,Jt,Tn,st,wr),st.onAfterRender(pe,rn,An,Jt,Tn,wr)}function ql(st,rn,An){rn.isScene!==!0&&(rn=$n);const Jt=Hn.get(st),Tn=re.state.lights,wr=re.state.shadowsArray,jr=Tn.state.version,cs=vr.getParameters(st,Tn.state,wr,rn,An),fs=vr.getProgramCacheKey(cs);let Bs=Jt.programs;Jt.environment=st.isMeshStandardMaterial?rn.environment:null,Jt.fog=rn.fog,Jt.envMap=(st.isMeshStandardMaterial?cr:yi).get(st.envMap||Jt.environment),Bs===void 0&&(st.addEventListener("dispose",co),Bs=new Map,Jt.programs=Bs);let Es=Bs.get(fs);if(Es!==void 0){if(Jt.currentProgram===Es&&Jt.lightsStateVersion===jr)return $y(st,cs),Es}else cs.uniforms=vr.getUniforms(st),st.onBuild(An,cs,pe),st.onBeforeCompile(cs,pe),Es=vr.acquireProgram(cs,fs),Bs.set(fs,Es),Jt.uniforms=cs.uniforms;const bs=Jt.uniforms;(!st.isShaderMaterial&&!st.isRawShaderMaterial||st.clipping===!0)&&(bs.clippingPlanes=tt.uniform),$y(st,cs),Jt.needsLights=i_(st),Jt.lightsStateVersion=jr,Jt.needsLights&&(bs.ambientLightColor.value=Tn.state.ambient,bs.lightProbe.value=Tn.state.probe,bs.directionalLights.value=Tn.state.directional,bs.directionalLightShadows.value=Tn.state.directionalShadow,bs.spotLights.value=Tn.state.spot,bs.spotLightShadows.value=Tn.state.spotShadow,bs.rectAreaLights.value=Tn.state.rectArea,bs.ltc_1.value=Tn.state.rectAreaLTC1,bs.ltc_2.value=Tn.state.rectAreaLTC2,bs.pointLights.value=Tn.state.point,bs.pointLightShadows.value=Tn.state.pointShadow,bs.hemisphereLights.value=Tn.state.hemi,bs.directionalShadowMap.value=Tn.state.directionalShadowMap,bs.directionalShadowMatrix.value=Tn.state.directionalShadowMatrix,bs.spotShadowMap.value=Tn.state.spotShadowMap,bs.spotLightMatrix.value=Tn.state.spotLightMatrix,bs.spotLightMap.value=Tn.state.spotLightMap,bs.pointShadowMap.value=Tn.state.pointShadowMap,bs.pointShadowMatrix.value=Tn.state.pointShadowMatrix);const Wo=Es.getUniforms(),Sl=Fh.seqWithValue(Wo.seq,bs);return Jt.currentProgram=Es,Jt.uniformsList=Sl,Es}function $y(st,rn){const An=Hn.get(st);An.outputEncoding=rn.outputEncoding,An.instancing=rn.instancing,An.skinning=rn.skinning,An.morphTargets=rn.morphTargets,An.morphNormals=rn.morphNormals,An.morphColors=rn.morphColors,An.morphTargetsCount=rn.morphTargetsCount,An.numClippingPlanes=rn.numClippingPlanes,An.numIntersection=rn.numClipIntersection,An.vertexAlphas=rn.vertexAlphas,An.vertexTangents=rn.vertexTangents,An.toneMapping=rn.toneMapping}function t_(st,rn,An,Jt,Tn){rn.isScene!==!0&&(rn=$n),Rn.resetTextureUnits();const wr=rn.fog,jr=Jt.isMeshStandardMaterial?rn.environment:null,cs=Re===null?pe.outputEncoding:Re.isXRRenderTarget===!0?Re.texture.encoding:Yr,fs=(Jt.isMeshStandardMaterial?cr:yi).get(Jt.envMap||jr),Bs=Jt.vertexColors===!0&&!!An.attributes.color&&An.attributes.color.itemSize===4,Es=!!Jt.normalMap&&!!An.attributes.tangent,bs=!!An.morphAttributes.position,Wo=!!An.morphAttributes.normal,Sl=!!An.morphAttributes.color,$u=Jt.toneMapped?pe.toneMapping:bn,xf=An.morphAttributes.position||An.morphAttributes.normal||An.morphAttributes.color,Ko=xf!==void 0?xf.length:0,_s=Hn.get(Jt),h1=re.state.lights;if(Ln===!0&&(ui===!0||st!==Ve)){const Il=st===Ve&&Jt.id===De;tt.setState(Jt,st,Il)}let da=!1;Jt.version===_s.__version?(_s.needsLights&&_s.lightsStateVersion!==h1.state.version||_s.outputEncoding!==cs||Tn.isInstancedMesh&&_s.instancing===!1||!Tn.isInstancedMesh&&_s.instancing===!0||Tn.isSkinnedMesh&&_s.skinning===!1||!Tn.isSkinnedMesh&&_s.skinning===!0||_s.envMap!==fs||Jt.fog===!0&&_s.fog!==wr||_s.numClippingPlanes!==void 0&&(_s.numClippingPlanes!==tt.numPlanes||_s.numIntersection!==tt.numIntersection)||_s.vertexAlphas!==Bs||_s.vertexTangents!==Es||_s.morphTargets!==bs||_s.morphNormals!==Wo||_s.morphColors!==Sl||_s.toneMapping!==$u||gr.isWebGL2===!0&&_s.morphTargetsCount!==Ko)&&(da=!0):(da=!0,_s.__version=Jt.version);let Ef=_s.currentProgram;da===!0&&(Ef=ql(Jt,rn,Tn));let e2=!1,zg=!1,d1=!1;const Ha=Ef.getUniforms(),bf=_s.uniforms;if(mi.useProgram(Ef.program)&&(e2=!0,zg=!0,d1=!0),Jt.id!==De&&(De=Jt.id,zg=!0),e2||Ve!==st){if(Ha.setValue(ln,"projectionMatrix",st.projectionMatrix),gr.logarithmicDepthBuffer&&Ha.setValue(ln,"logDepthBufFC",2/(Math.log(st.far+1)/Math.LN2)),Ve!==st&&(Ve=st,zg=!0,d1=!0),Jt.isShaderMaterial||Jt.isMeshPhongMaterial||Jt.isMeshToonMaterial||Jt.isMeshStandardMaterial||Jt.envMap){const Il=Ha.map.cameraPosition;Il!==void 0&&Il.setValue(ln,gn.setFromMatrixPosition(st.matrixWorld))}(Jt.isMeshPhongMaterial||Jt.isMeshToonMaterial||Jt.isMeshLambertMaterial||Jt.isMeshBasicMaterial||Jt.isMeshStandardMaterial||Jt.isShaderMaterial)&&Ha.setValue(ln,"isOrthographic",st.isOrthographicCamera===!0),(Jt.isMeshPhongMaterial||Jt.isMeshToonMaterial||Jt.isMeshLambertMaterial||Jt.isMeshBasicMaterial||Jt.isMeshStandardMaterial||Jt.isShaderMaterial||Jt.isShadowMaterial||Tn.isSkinnedMesh)&&Ha.setValue(ln,"viewMatrix",st.matrixWorldInverse)}if(Tn.isSkinnedMesh){Ha.setOptional(ln,Tn,"bindMatrix"),Ha.setOptional(ln,Tn,"bindMatrixInverse");const Il=Tn.skeleton;Il&&(gr.floatVertexTextures?(Il.boneTexture===null&&Il.computeBoneTexture(),Ha.setValue(ln,"boneTexture",Il.boneTexture,Rn),Ha.setValue(ln,"boneTextureSize",Il.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const f1=An.morphAttributes;if((f1.position!==void 0||f1.normal!==void 0||f1.color!==void 0&&gr.isWebGL2===!0)&&Ai.update(Tn,An,Jt,Ef),(zg||_s.receiveShadow!==Tn.receiveShadow)&&(_s.receiveShadow=Tn.receiveShadow,Ha.setValue(ln,"receiveShadow",Tn.receiveShadow)),Jt.isMeshGouraudMaterial&&Jt.envMap!==null&&(bf.envMap.value=fs,bf.flipEnvMap.value=fs.isCubeTexture&&fs.isRenderTargetTexture===!1?-1:1),zg&&(Ha.setValue(ln,"toneMappingExposure",pe.toneMappingExposure),_s.needsLights&&n_(bf,d1),wr&&Jt.fog===!0&&Xs.refreshFogUniforms(bf,wr),Xs.refreshMaterialUniforms(bf,Jt,Ut,vt,si),Fh.upload(ln,_s.uniformsList,bf,Rn)),Jt.isShaderMaterial&&Jt.uniformsNeedUpdate===!0&&(Fh.upload(ln,_s.uniformsList,bf,Rn),Jt.uniformsNeedUpdate=!1),Jt.isSpriteMaterial&&Ha.setValue(ln,"center",Tn.center),Ha.setValue(ln,"modelViewMatrix",Tn.modelViewMatrix),Ha.setValue(ln,"normalMatrix",Tn.normalMatrix),Ha.setValue(ln,"modelMatrix",Tn.matrixWorld),Jt.isShaderMaterial||Jt.isRawShaderMaterial){const Il=Jt.uniformsGroups;for(let p1=0,r_=Il.length;p1<r_;p1++)if(gr.isWebGL2){const t2=Il[p1];yr.update(t2,Ef),yr.bind(t2,Ef)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ef}function n_(st,rn){st.ambientLightColor.needsUpdate=rn,st.lightProbe.needsUpdate=rn,st.directionalLights.needsUpdate=rn,st.directionalLightShadows.needsUpdate=rn,st.pointLights.needsUpdate=rn,st.pointLightShadows.needsUpdate=rn,st.spotLights.needsUpdate=rn,st.spotLightShadows.needsUpdate=rn,st.rectAreaLights.needsUpdate=rn,st.hemisphereLights.needsUpdate=rn}function i_(st){return st.isMeshLambertMaterial||st.isMeshToonMaterial||st.isMeshPhongMaterial||st.isMeshStandardMaterial||st.isShadowMaterial||st.isShaderMaterial&&st.lights===!0}this.setTexture2D=function(){var st=!1;return function(An,Jt){An&&An.isWebGLRenderTarget&&(st||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),st=!0),An=An.texture),Rn.setTexture2D(An,Jt)}}(),this.getActiveCubeFace=function(){return Ce},this.getActiveMipmapLevel=function(){return Fe},this.getRenderTarget=function(){return Re},this.setRenderTargetTextures=function(st,rn,An){Hn.get(st.texture).__webglTexture=rn,Hn.get(st.depthTexture).__webglTexture=An;const Jt=Hn.get(st);Jt.__hasExternalTextures=!0,Jt.__hasExternalTextures&&(Jt.__autoAllocateDepthBuffer=An===void 0,Jt.__autoAllocateDepthBuffer||wi.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Jt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(st,rn){const An=Hn.get(st);An.__webglFramebuffer=rn,An.__useDefaultFramebuffer=rn===void 0},this.setRenderTarget=function(st,rn=0,An=0){Re=st,Ce=rn,Fe=An;let Jt=!0,Tn=null,wr=!1,jr=!1;if(st){const fs=Hn.get(st);fs.__useDefaultFramebuffer!==void 0?(mi.bindFramebuffer(36160,null),Jt=!1):fs.__webglFramebuffer===void 0?Rn.setupRenderTarget(st):fs.__hasExternalTextures&&Rn.rebindTextures(st,Hn.get(st.texture).__webglTexture,Hn.get(st.depthTexture).__webglTexture);const Bs=st.texture;(Bs.isData3DTexture||Bs.isDataArrayTexture||Bs.isCompressedArrayTexture)&&(jr=!0);const Es=Hn.get(st).__webglFramebuffer;st.isWebGLCubeRenderTarget?(Tn=Es[rn],wr=!0):gr.isWebGL2&&st.samples>0&&Rn.useMultisampledRTT(st)===!1?Tn=Hn.get(st).__webglMultisampledFramebuffer:Tn=Es,ct.copy(st.viewport),bt.copy(st.scissor),Ne=st.scissorTest}else ct.copy(Dt).multiplyScalar(Ut).floor(),bt.copy(sn).multiplyScalar(Ut).floor(),Ne=kn;if(mi.bindFramebuffer(36160,Tn)&&gr.drawBuffers&&Jt&&mi.drawBuffers(st,Tn),mi.viewport(ct),mi.scissor(bt),mi.setScissorTest(Ne),wr){const fs=Hn.get(st.texture);ln.framebufferTexture2D(36160,36064,34069+rn,fs.__webglTexture,An)}else if(jr){const fs=Hn.get(st.texture),Bs=rn||0;ln.framebufferTextureLayer(36160,36064,fs.__webglTexture,An||0,Bs)}De=-1},this.readRenderTargetPixels=function(st,rn,An,Jt,Tn,wr,jr){if(!(st&&st.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let cs=Hn.get(st).__webglFramebuffer;if(st.isWebGLCubeRenderTarget&&jr!==void 0&&(cs=cs[jr]),cs){mi.bindFramebuffer(36160,cs);try{const fs=st.texture,Bs=fs.format,Es=fs.type;if(Bs!==Zi&&Hi.convert(Bs)!==ln.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const bs=Es===Ft&&(wi.has("EXT_color_buffer_half_float")||gr.isWebGL2&&wi.has("EXT_color_buffer_float"));if(Es!==jt&&Hi.convert(Es)!==ln.getParameter(35738)&&!(Es===vn&&(gr.isWebGL2||wi.has("OES_texture_float")||wi.has("WEBGL_color_buffer_float")))&&!bs){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}rn>=0&&rn<=st.width-Jt&&An>=0&&An<=st.height-Tn&&ln.readPixels(rn,An,Jt,Tn,Hi.convert(Bs),Hi.convert(Es),wr)}finally{const fs=Re!==null?Hn.get(Re).__webglFramebuffer:null;mi.bindFramebuffer(36160,fs)}}},this.copyFramebufferToTexture=function(st,rn,An=0){const Jt=Math.pow(2,-An),Tn=Math.floor(rn.image.width*Jt),wr=Math.floor(rn.image.height*Jt);Rn.setTexture2D(rn,0),ln.copyTexSubImage2D(3553,An,0,0,st.x,st.y,Tn,wr),mi.unbindTexture()},this.copyTextureToTexture=function(st,rn,An,Jt=0){const Tn=rn.image.width,wr=rn.image.height,jr=Hi.convert(An.format),cs=Hi.convert(An.type);Rn.setTexture2D(An,0),ln.pixelStorei(37440,An.flipY),ln.pixelStorei(37441,An.premultiplyAlpha),ln.pixelStorei(3317,An.unpackAlignment),rn.isDataTexture?ln.texSubImage2D(3553,Jt,st.x,st.y,Tn,wr,jr,cs,rn.image.data):rn.isCompressedTexture?ln.compressedTexSubImage2D(3553,Jt,st.x,st.y,rn.mipmaps[0].width,rn.mipmaps[0].height,jr,rn.mipmaps[0].data):ln.texSubImage2D(3553,Jt,st.x,st.y,jr,cs,rn.image),Jt===0&&An.generateMipmaps&&ln.generateMipmap(3553),mi.unbindTexture()},this.copyTextureToTexture3D=function(st,rn,An,Jt,Tn=0){if(pe.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const wr=st.max.x-st.min.x+1,jr=st.max.y-st.min.y+1,cs=st.max.z-st.min.z+1,fs=Hi.convert(Jt.format),Bs=Hi.convert(Jt.type);let Es;if(Jt.isData3DTexture)Rn.setTexture3D(Jt,0),Es=32879;else if(Jt.isDataArrayTexture)Rn.setTexture2DArray(Jt,0),Es=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ln.pixelStorei(37440,Jt.flipY),ln.pixelStorei(37441,Jt.premultiplyAlpha),ln.pixelStorei(3317,Jt.unpackAlignment);const bs=ln.getParameter(3314),Wo=ln.getParameter(32878),Sl=ln.getParameter(3316),$u=ln.getParameter(3315),xf=ln.getParameter(32877),Ko=An.isCompressedTexture?An.mipmaps[0]:An.image;ln.pixelStorei(3314,Ko.width),ln.pixelStorei(32878,Ko.height),ln.pixelStorei(3316,st.min.x),ln.pixelStorei(3315,st.min.y),ln.pixelStorei(32877,st.min.z),An.isDataTexture||An.isData3DTexture?ln.texSubImage3D(Es,Tn,rn.x,rn.y,rn.z,wr,jr,cs,fs,Bs,Ko.data):An.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ln.compressedTexSubImage3D(Es,Tn,rn.x,rn.y,rn.z,wr,jr,cs,fs,Ko.data)):ln.texSubImage3D(Es,Tn,rn.x,rn.y,rn.z,wr,jr,cs,fs,Bs,Ko),ln.pixelStorei(3314,bs),ln.pixelStorei(32878,Wo),ln.pixelStorei(3316,Sl),ln.pixelStorei(3315,$u),ln.pixelStorei(32877,xf),Tn===0&&Jt.generateMipmaps&&ln.generateMipmap(Es),mi.unbindTexture()},this.initTexture=function(st){st.isCubeTexture?Rn.setTextureCube(st,0):st.isData3DTexture?Rn.setTexture3D(st,0):st.isDataArrayTexture||st.isCompressedArrayTexture?Rn.setTexture2DArray(st,0):Rn.setTexture2D(st,0),mi.unbindTexture()},this.resetState=function(){Ce=0,Fe=0,Re=null,mi.reset(),Bn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class oA extends Rg{}oA.prototype.isWebGL1Renderer=!0;class Qp{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Si(e),this.density=n}clone(){return new Qp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class qd{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Si(e),this.near=n,this.far=r}clone(){return new qd(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Bg extends hs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class jp{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Lc,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=wo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let a=0,c=this.stride;a<c;a++)this.array[e+a]=n.array[r+a];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=wo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ca=new nt;class Uu{constructor(e,n,r,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=a===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.applyMatrix4(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.applyNormalMatrix(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.transformDirection(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}setX(e,n){return this.normalized&&(n=Ss(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Ss(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Ss(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Ss(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=La(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=La(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=La(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=La(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ss(n,this.array),r=Ss(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ss(n,this.array),r=Ss(r,this.array),a=Ss(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=a,this}setXYZW(e,n,r,a,c){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ss(n,this.array),r=Ss(r,this.array),a=Ss(a,this.array),c=Ss(c,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=a,this.data.array[e+3]=c,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const a=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)n.push(this.data.array[a+c])}return new Is(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Uu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const a=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)n.push(this.data.array[a+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Wp extends Zo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Si(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let xc;const Uh=new nt,Gh=new nt,Ec=new nt,Us=new On,Jd=new On,Zd=new Gi,$d=new nt,ef=new nt,Kp=new nt,Lg=new On,tf=new On,Dg=new On;class aA extends hs{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",xc===void 0){xc=new Pr;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new jp(n,5);xc.setIndex([0,1,2,0,2,3]),xc.setAttribute("position",new Uu(r,3,0,!1)),xc.setAttribute("uv",new Uu(r,2,3,!1))}this.geometry=xc,this.material=e!==void 0?e:new Wp,this.center=new On(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gh.setFromMatrixScale(this.matrixWorld),Zd.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ec.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gh.multiplyScalar(-Ec.z);const r=this.material.rotation;let a,c;r!==0&&(c=Math.cos(r),a=Math.sin(r));const p=this.center;nf($d.set(-.5,-.5,0),Ec,p,Gh,a,c),nf(ef.set(.5,-.5,0),Ec,p,Gh,a,c),nf(Kp.set(.5,.5,0),Ec,p,Gh,a,c),Lg.set(0,0),tf.set(1,0),Dg.set(1,1);let A=e.ray.intersectTriangle($d,ef,Kp,!1,Uh);if(A===null&&(nf(ef.set(-.5,.5,0),Ec,p,Gh,a,c),tf.set(0,1),A=e.ray.intersectTriangle($d,Kp,ef,!1,Uh),A===null))return;const N=e.ray.origin.distanceTo(Uh);N<e.near||N>e.far||n.push({distance:N,point:Uh.clone(),uv:Fa.getUV(Uh,$d,ef,Kp,Lg,tf,Dg,new On),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function nf(x,e,n,r,a,c){Us.subVectors(x,n).addScalar(.5).multiply(r),a!==void 0?(Jd.x=c*Us.x-a*Us.y,Jd.y=a*Us.x+c*Us.y):Jd.copy(Us),x.copy(e),x.x+=Jd.x,x.y+=Jd.y,x.applyMatrix4(Zd)}const rf=new nt,lA=new nt;class cA extends hs{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,a=n.length;r<a;r++){const c=n[r];this.addLevel(c.object.clone(),c.distance,c.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const a=this.levels;let c;for(c=0;c<a.length&&!(n<a[c].distance);c++);return a.splice(c,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,a;for(r=1,a=n.length;r<a;r++){let c=n[r].distance;if(n[r].object.visible&&(c-=c*n[r].hysteresis),e<c)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){rf.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(rf);this.getObjectForDistance(a).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){rf.setFromMatrixPosition(e.matrixWorld),lA.setFromMatrixPosition(this.matrixWorld);const r=rf.distanceTo(lA)/e.zoom;n[0].object.visible=!0;let a,c;for(a=1,c=n.length;a<c;a++){let p=n[a].distance;if(n[a].object.visible&&(p-=p*n[a].hysteresis),r>=p)n[a-1].object.visible=!1,n[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<c;a++)n[a].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let a=0,c=r.length;a<c;a++){const p=r[a];n.object.levels.push({object:p.object.uuid,distance:p.distance,hysteresis:p.hysteresis})}return n}}const Gu=new nt,bc=new Zr,yl=new Zr,uA=new nt,Pg=new Gi;class xl extends $s{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Gi,this.bindMatrixInverse=new Gi}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Zr,n=this.geometry.attributes.skinWeight;for(let r=0,a=n.count;r<a;r++){e.fromBufferAttribute(n,r);const c=1/e.manhattanLength();c!==1/0?e.multiplyScalar(c):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const r=this.skeleton,a=this.geometry;bc.fromBufferAttribute(a.attributes.skinIndex,e),yl.fromBufferAttribute(a.attributes.skinWeight,e),Gu.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let c=0;c<4;c++){const p=yl.getComponent(c);if(p!==0){const A=bc.getComponent(c);Pg.multiplyMatrices(r.bones[A].matrixWorld,r.boneInverses[A]),n.addScaledVector(uA.copy(Gu).applyMatrix4(Pg),p)}}return n.applyMatrix4(this.bindMatrixInverse)}}class _c extends hs{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Hh extends js{constructor(e=null,n=1,r=1,a,c,p,A,N,H=ae,Z=ae,ne,re){super(null,p,A,N,H,Z,a,c,ne,re),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Xp=new Gi,sf=new Gi;class of{constructor(e=[],n=[]){this.uuid=wo(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,a=this.bones.length;r<a;r++)this.boneInverses.push(new Gi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Gi;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,a=this.boneTexture;for(let c=0,p=e.length;c<p;c++){const A=e[c]?e[c].matrixWorld:sf;Xp.multiplyMatrices(A,n[c]),Xp.toArray(r,c*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new of(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=dd(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Hh(n,e,e,Zi,vn);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const a=this.bones[n];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,a=e.bones.length;r<a;r++){const c=e.bones[r];let p=n[c];p===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",c),p=new _c),this.bones.push(p),this.boneInverses.push(new Gi().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let a=0,c=n.length;a<c;a++){const p=n[a];e.bones.push(p.uuid);const A=r[a];e.boneInverses.push(A.toArray())}return e}}class wc extends Is{constructor(e,n,r,a=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Og=new Gi,Yp=new Gi,Kl=[],zh=new Gi,Vh=new $s;class hA extends $s{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new wc(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let a=0;a<r;a++)this.setMatrixAt(a,zh)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,a=this.count;if(Vh.geometry=this.geometry,Vh.material=this.material,Vh.material!==void 0)for(let c=0;c<a;c++){this.getMatrixAt(c,Og),Yp.multiplyMatrices(r,Og),Vh.matrixWorld=Yp,Vh.raycast(e,Kl);for(let p=0,A=Kl.length;p<A;p++){const N=Kl[p];N.instanceId=c,N.object=this,n.push(N)}Kl.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new wc(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ga extends Zo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Si(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const s=new nt,t=new nt,i=new Gi,o=new Jo,l=new qo;class f extends hs{constructor(e=new Pr,n=new ga){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let a=1,c=n.count;a<c;a++)s.fromBufferAttribute(n,a-1),t.fromBufferAttribute(n,a),r[a]=r[a-1],r[a]+=s.distanceTo(t);e.setAttribute("lineDistance",new Yi(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,a=this.matrixWorld,c=e.params.Line.threshold,p=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),l.copy(r.boundingSphere),l.applyMatrix4(a),l.radius+=c,e.ray.intersectsSphere(l)===!1)return;i.copy(a).invert(),o.copy(e.ray).applyMatrix4(i);const A=c/((this.scale.x+this.scale.y+this.scale.z)/3),N=A*A,H=new nt,Z=new nt,ne=new nt,re=new nt,le=this.isLineSegments?2:1,me=r.index,de=r.attributes.position;if(me!==null){const Ce=Math.max(0,p.start),Fe=Math.min(me.count,p.start+p.count);for(let Re=Ce,De=Fe-1;Re<De;Re+=le){const Ve=me.getX(Re),ct=me.getX(Re+1);if(H.fromBufferAttribute(de,Ve),Z.fromBufferAttribute(de,ct),o.distanceSqToSegment(H,Z,re,ne)>N)continue;re.applyMatrix4(this.matrixWorld);const Ne=e.ray.origin.distanceTo(re);Ne<e.near||Ne>e.far||n.push({distance:Ne,point:ne.clone().applyMatrix4(this.matrixWorld),index:Re,face:null,faceIndex:null,object:this})}}else{const Ce=Math.max(0,p.start),Fe=Math.min(de.count,p.start+p.count);for(let Re=Ce,De=Fe-1;Re<De;Re+=le){if(H.fromBufferAttribute(de,Re),Z.fromBufferAttribute(de,Re+1),o.distanceSqToSegment(H,Z,re,ne)>N)continue;re.applyMatrix4(this.matrixWorld);const ct=e.ray.origin.distanceTo(re);ct<e.near||ct>e.far||n.push({distance:ct,point:ne.clone().applyMatrix4(this.matrixWorld),index:Re,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,p=a.length;c<p;c++){const A=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=c}}}}}const B=new nt,M=new nt;class D extends f{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let a=0,c=n.count;a<c;a+=2)B.fromBufferAttribute(n,a),M.fromBufferAttribute(n,a+1),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+B.distanceTo(M);e.setAttribute("lineDistance",new Yi(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class G extends f{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class $ extends Zo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Si(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ie=new Gi,oe=new Jo,he=new qo,ye=new nt;class we extends hs{constructor(e=new Pr,n=new $){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,a=this.matrixWorld,c=e.params.Points.threshold,p=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),he.copy(r.boundingSphere),he.applyMatrix4(a),he.radius+=c,e.ray.intersectsSphere(he)===!1)return;ie.copy(a).invert(),oe.copy(e.ray).applyMatrix4(ie);const A=c/((this.scale.x+this.scale.y+this.scale.z)/3),N=A*A,H=r.index,ne=r.attributes.position;if(H!==null){const re=Math.max(0,p.start),le=Math.min(H.count,p.start+p.count);for(let me=re,pe=le;me<pe;me++){const de=H.getX(me);ye.fromBufferAttribute(ne,de),be(ye,de,N,a,e,n,this)}}else{const re=Math.max(0,p.start),le=Math.min(ne.count,p.start+p.count);for(let me=re,pe=le;me<pe;me++)ye.fromBufferAttribute(ne,me),be(ye,me,N,a,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,p=a.length;c<p;c++){const A=a[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[A]=c}}}}}function be(x,e,n,r,a,c,p){const A=oe.distanceSqToPoint(x);if(A<n){const N=new nt;oe.closestPointToPoint(x,N),N.applyMatrix4(r);const H=a.ray.origin.distanceTo(N);if(H<a.near||H>a.far)return;c.push({distance:H,distanceToRay:Math.sqrt(A),point:N,index:e,face:null,object:p})}}class ke extends js{constructor(e,n,r,a,c,p,A,N,H){super(e,n,r,a,c,p,A,N,H),this.isVideoTexture=!0,this.minFilter=p!==void 0?p:Ke,this.magFilter=c!==void 0?c:Ke,this.generateMipmaps=!1;const Z=this;function ne(){Z.needsUpdate=!0,e.requestVideoFrameCallback(ne)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(ne)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Xe extends js{constructor(e,n,r){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=ae,this.minFilter=ae,this.generateMipmaps=!1,this.needsUpdate=!0}}class it extends js{constructor(e,n,r,a,c,p,A,N,H,Z,ne,re){super(null,p,A,N,H,Z,a,c,ne,re),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class lt extends it{constructor(e,n,r,a,c,p){super(e,n,r,c,p),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=Oe}}class pt extends js{constructor(e,n,r,a,c,p,A,N,H){super(e,n,r,a,c,p,A,N,H),this.isCanvasTexture=!0,this.needsUpdate=!0}}class mt{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,a=this.getPoint(0),c=0;n.push(0);for(let p=1;p<=e;p++)r=this.getPoint(p/e),c+=r.distanceTo(a),n.push(c),a=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let a=0;const c=r.length;let p;n?p=n:p=e*r[c-1];let A=0,N=c-1,H;for(;A<=N;)if(a=Math.floor(A+(N-A)/2),H=r[a]-p,H<0)A=a+1;else if(H>0)N=a-1;else{N=a;break}if(a=N,r[a]===p)return a/(c-1);const Z=r[a],re=r[a+1]-Z,le=(p-Z)/re;return(a+le)/(c-1)}getTangent(e,n){let a=e-1e-4,c=e+1e-4;a<0&&(a=0),c>1&&(c=1);const p=this.getPoint(a),A=this.getPoint(c),N=n||(p.isVector2?new On:new nt);return N.copy(A).sub(p).normalize(),N}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new nt,a=[],c=[],p=[],A=new nt,N=new Gi;for(let le=0;le<=e;le++){const me=le/e;a[le]=this.getTangentAt(me,new nt)}c[0]=new nt,p[0]=new nt;let H=Number.MAX_VALUE;const Z=Math.abs(a[0].x),ne=Math.abs(a[0].y),re=Math.abs(a[0].z);Z<=H&&(H=Z,r.set(1,0,0)),ne<=H&&(H=ne,r.set(0,1,0)),re<=H&&r.set(0,0,1),A.crossVectors(a[0],r).normalize(),c[0].crossVectors(a[0],A),p[0].crossVectors(a[0],c[0]);for(let le=1;le<=e;le++){if(c[le]=c[le-1].clone(),p[le]=p[le-1].clone(),A.crossVectors(a[le-1],a[le]),A.length()>Number.EPSILON){A.normalize();const me=Math.acos(Os(a[le-1].dot(a[le]),-1,1));c[le].applyMatrix4(N.makeRotationAxis(A,me))}p[le].crossVectors(a[le],c[le])}if(n===!0){let le=Math.acos(Os(c[0].dot(c[e]),-1,1));le/=e,a[0].dot(A.crossVectors(c[0],c[e]))>0&&(le=-le);for(let me=1;me<=e;me++)c[me].applyMatrix4(N.makeRotationAxis(a[me],le*me)),p[me].crossVectors(a[me],c[me])}return{tangents:a,normals:c,binormals:p}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ot extends mt{constructor(e=0,n=0,r=1,a=1,c=0,p=Math.PI*2,A=!1,N=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=a,this.aStartAngle=c,this.aEndAngle=p,this.aClockwise=A,this.aRotation=N}getPoint(e,n){const r=n||new On,a=Math.PI*2;let c=this.aEndAngle-this.aStartAngle;const p=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=a;for(;c>a;)c-=a;c<Number.EPSILON&&(p?c=0:c=a),this.aClockwise===!0&&!p&&(c===a?c=-a:c=c-a);const A=this.aStartAngle+e*c;let N=this.aX+this.xRadius*Math.cos(A),H=this.aY+this.yRadius*Math.sin(A);if(this.aRotation!==0){const Z=Math.cos(this.aRotation),ne=Math.sin(this.aRotation),re=N-this.aX,le=H-this.aY;N=re*Z-le*ne+this.aX,H=re*ne+le*Z+this.aY}return r.set(N,H)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class kt extends ot{constructor(e,n,r,a,c,p){super(e,n,r,r,a,c,p),this.isArcCurve=!0,this.type="ArcCurve"}}function gt(){let x=0,e=0,n=0,r=0;function a(c,p,A,N){x=c,e=A,n=-3*c+3*p-2*A-N,r=2*c-2*p+A+N}return{initCatmullRom:function(c,p,A,N,H){a(p,A,H*(A-c),H*(N-p))},initNonuniformCatmullRom:function(c,p,A,N,H,Z,ne){let re=(p-c)/H-(A-c)/(H+Z)+(A-p)/Z,le=(A-p)/Z-(N-p)/(Z+ne)+(N-A)/ne;re*=Z,le*=Z,a(p,A,re,le)},calc:function(c){const p=c*c,A=p*c;return x+e*c+n*p+r*A}}}const Ht=new nt,Zt=new gt,Qt=new gt,en=new gt;class Wn extends mt{constructor(e=[],n=!1,r="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=a}getPoint(e,n=new nt){const r=n,a=this.points,c=a.length,p=(c-(this.closed?0:1))*e;let A=Math.floor(p),N=p-A;this.closed?A+=A>0?0:(Math.floor(Math.abs(A)/c)+1)*c:N===0&&A===c-1&&(A=c-2,N=1);let H,Z;this.closed||A>0?H=a[(A-1)%c]:(Ht.subVectors(a[0],a[1]).add(a[0]),H=Ht);const ne=a[A%c],re=a[(A+1)%c];if(this.closed||A+2<c?Z=a[(A+2)%c]:(Ht.subVectors(a[c-1],a[c-2]).add(a[c-1]),Z=Ht),this.curveType==="centripetal"||this.curveType==="chordal"){const le=this.curveType==="chordal"?.5:.25;let me=Math.pow(H.distanceToSquared(ne),le),pe=Math.pow(ne.distanceToSquared(re),le),de=Math.pow(re.distanceToSquared(Z),le);pe<1e-4&&(pe=1),me<1e-4&&(me=pe),de<1e-4&&(de=pe),Zt.initNonuniformCatmullRom(H.x,ne.x,re.x,Z.x,me,pe,de),Qt.initNonuniformCatmullRom(H.y,ne.y,re.y,Z.y,me,pe,de),en.initNonuniformCatmullRom(H.z,ne.z,re.z,Z.z,me,pe,de)}else this.curveType==="catmullrom"&&(Zt.initCatmullRom(H.x,ne.x,re.x,Z.x,this.tension),Qt.initCatmullRom(H.y,ne.y,re.y,Z.y,this.tension),en.initCatmullRom(H.z,ne.z,re.z,Z.z,this.tension));return r.set(Zt.calc(N),Qt.calc(N),en.calc(N)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const a=this.points[n];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(new nt().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ii(x,e,n,r,a){const c=(r-e)*.5,p=(a-n)*.5,A=x*x,N=x*A;return(2*n-2*r+c+p)*N+(-3*n+3*r-2*c-p)*A+c*x+n}function lr(x,e){const n=1-x;return n*n*e}function oi(x,e){return 2*(1-x)*x*e}function qn(x,e){return x*x*e}function $i(x,e,n,r){return lr(x,e)+oi(x,n)+qn(x,r)}function Ji(x,e){const n=1-x;return n*n*n*e}function Xr(x,e){const n=1-x;return 3*n*n*x*e}function Tt(x,e){return 3*(1-x)*x*x*e}function Mt(x,e){return x*x*x*e}function Yn(x,e,n,r,a){return Ji(x,e)+Xr(x,n)+Tt(x,r)+Mt(x,a)}class Cn extends mt{constructor(e=new On,n=new On,r=new On,a=new On){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=a}getPoint(e,n=new On){const r=n,a=this.v0,c=this.v1,p=this.v2,A=this.v3;return r.set(Yn(e,a.x,c.x,p.x,A.x),Yn(e,a.y,c.y,p.y,A.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zn extends mt{constructor(e=new nt,n=new nt,r=new nt,a=new nt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=a}getPoint(e,n=new nt){const r=n,a=this.v0,c=this.v1,p=this.v2,A=this.v3;return r.set(Yn(e,a.x,c.x,p.x,A.x),Yn(e,a.y,c.y,p.y,A.y),Yn(e,a.z,c.z,p.z,A.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hr extends mt{constructor(e=new On,n=new On){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new On){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const r=n||new On;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Fn extends mt{constructor(e=new nt,n=new nt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new nt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jn extends mt{constructor(e=new On,n=new On,r=new On){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new On){const r=n,a=this.v0,c=this.v1,p=this.v2;return r.set($i(e,a.x,c.x,p.x),$i(e,a.y,c.y,p.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Sn extends mt{constructor(e=new nt,n=new nt,r=new nt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new nt){const r=n,a=this.v0,c=this.v1,p=this.v2;return r.set($i(e,a.x,c.x,p.x),$i(e,a.y,c.y,p.y),$i(e,a.z,c.z,p.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ii extends mt{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new On){const r=n,a=this.points,c=(a.length-1)*e,p=Math.floor(c),A=c-p,N=a[p===0?p:p-1],H=a[p],Z=a[p>a.length-2?a.length-1:p+1],ne=a[p>a.length-3?a.length-1:p+2];return r.set(ii(A,N.x,H.x,Z.x,ne.x),ii(A,N.y,H.y,Z.y,ne.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const a=this.points[n];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(new On().fromArray(a))}return this}}var vi=Object.freeze({__proto__:null,ArcCurve:kt,CatmullRomCurve3:Wn,CubicBezierCurve:Cn,CubicBezierCurve3:zn,EllipseCurve:ot,LineCurve:hr,LineCurve3:Fn,QuadraticBezierCurve:jn,QuadraticBezierCurve3:Sn,SplineCurve:Ii});class pr extends mt{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new hr(n,e))}getPoint(e,n){const r=e*this.getLength(),a=this.getCurveLengths();let c=0;for(;c<a.length;){if(a[c]>=r){const p=a[c]-r,A=this.curves[c],N=A.getLength(),H=N===0?0:1-p/N;return A.getPointAt(H,n)}c++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,a=this.curves.length;r<a;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let a=0,c=this.curves;a<c.length;a++){const p=c[a],A=p.isEllipseCurve?e*2:p.isLineCurve||p.isLineCurve3?1:p.isSplineCurve?e*p.points.length:e,N=p.getPoints(A);for(let H=0;H<N.length;H++){const Z=N[H];r&&r.equals(Z)||(n.push(Z),r=Z)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const a=e.curves[n];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const a=this.curves[n];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const a=e.curves[n];this.curves.push(new vi[a.type]().fromJSON(a))}return this}}class Ri extends pr{constructor(e){super(),this.type="Path",this.currentPoint=new On,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new hr(this.currentPoint.clone(),new On(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,a){const c=new jn(this.currentPoint.clone(),new On(e,n),new On(r,a));return this.curves.push(c),this.currentPoint.set(r,a),this}bezierCurveTo(e,n,r,a,c,p){const A=new Cn(this.currentPoint.clone(),new On(e,n),new On(r,a),new On(c,p));return this.curves.push(A),this.currentPoint.set(c,p),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new Ii(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,a,c,p){const A=this.currentPoint.x,N=this.currentPoint.y;return this.absarc(e+A,n+N,r,a,c,p),this}absarc(e,n,r,a,c,p){return this.absellipse(e,n,r,r,a,c,p),this}ellipse(e,n,r,a,c,p,A,N){const H=this.currentPoint.x,Z=this.currentPoint.y;return this.absellipse(e+H,n+Z,r,a,c,p,A,N),this}absellipse(e,n,r,a,c,p,A,N){const H=new ot(e,n,r,a,c,p,A,N);if(this.curves.length>0){const ne=H.getPoint(0);ne.equals(this.currentPoint)||this.lineTo(ne.x,ne.y)}this.curves.push(H);const Z=H.getPoint(1);return this.currentPoint.copy(Z),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class br extends Pr{constructor(e=[new On(0,-.5),new On(.5,0),new On(0,.5)],n=12,r=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:a},n=Math.floor(n),a=Os(a,0,Math.PI*2);const c=[],p=[],A=[],N=[],H=[],Z=1/n,ne=new nt,re=new On,le=new nt,me=new nt,pe=new nt;let de=0,Ce=0;for(let Fe=0;Fe<=e.length-1;Fe++)switch(Fe){case 0:de=e[Fe+1].x-e[Fe].x,Ce=e[Fe+1].y-e[Fe].y,le.x=Ce*1,le.y=-de,le.z=Ce*0,pe.copy(le),le.normalize(),N.push(le.x,le.y,le.z);break;case e.length-1:N.push(pe.x,pe.y,pe.z);break;default:de=e[Fe+1].x-e[Fe].x,Ce=e[Fe+1].y-e[Fe].y,le.x=Ce*1,le.y=-de,le.z=Ce*0,me.copy(le),le.x+=pe.x,le.y+=pe.y,le.z+=pe.z,le.normalize(),N.push(le.x,le.y,le.z),pe.copy(me)}for(let Fe=0;Fe<=n;Fe++){const Re=r+Fe*Z*a,De=Math.sin(Re),Ve=Math.cos(Re);for(let ct=0;ct<=e.length-1;ct++){ne.x=e[ct].x*De,ne.y=e[ct].y,ne.z=e[ct].x*Ve,p.push(ne.x,ne.y,ne.z),re.x=Fe/n,re.y=ct/(e.length-1),A.push(re.x,re.y);const bt=N[3*ct+0]*De,Ne=N[3*ct+1],dt=N[3*ct+0]*Ve;H.push(bt,Ne,dt)}}for(let Fe=0;Fe<n;Fe++)for(let Re=0;Re<e.length-1;Re++){const De=Re+Fe*e.length,Ve=De,ct=De+e.length,bt=De+e.length+1,Ne=De+1;c.push(Ve,ct,Ne),c.push(bt,Ne,ct)}this.setIndex(c),this.setAttribute("position",new Yi(p,3)),this.setAttribute("uv",new Yi(A,2)),this.setAttribute("normal",new Yi(H,3))}static fromJSON(e){return new br(e.points,e.segments,e.phiStart,e.phiLength)}}class gs extends br{constructor(e=1,n=1,r=4,a=8){const c=new Ri;c.absarc(0,-n/2,e,Math.PI*1.5,0),c.absarc(0,n/2,e,0,Math.PI*.5),super(c.getPoints(r),a),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:r,radialSegments:a}}static fromJSON(e){return new gs(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ct extends Pr{constructor(e=1,n=8,r=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:a},n=Math.max(3,n);const c=[],p=[],A=[],N=[],H=new nt,Z=new On;p.push(0,0,0),A.push(0,0,1),N.push(.5,.5);for(let ne=0,re=3;ne<=n;ne++,re+=3){const le=r+ne/n*a;H.x=e*Math.cos(le),H.y=e*Math.sin(le),p.push(H.x,H.y,H.z),A.push(0,0,1),Z.x=(p[re]/e+1)/2,Z.y=(p[re+1]/e+1)/2,N.push(Z.x,Z.y)}for(let ne=1;ne<=n;ne++)c.push(ne,ne+1,0);this.setIndex(c),this.setAttribute("position",new Yi(p,3)),this.setAttribute("normal",new Yi(A,3)),this.setAttribute("uv",new Yi(N,2))}static fromJSON(e){return new Ct(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cr extends Pr{constructor(e=1,n=1,r=1,a=8,c=1,p=!1,A=0,N=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:a,heightSegments:c,openEnded:p,thetaStart:A,thetaLength:N};const H=this;a=Math.floor(a),c=Math.floor(c);const Z=[],ne=[],re=[],le=[];let me=0;const pe=[],de=r/2;let Ce=0;Fe(),p===!1&&(e>0&&Re(!0),n>0&&Re(!1)),this.setIndex(Z),this.setAttribute("position",new Yi(ne,3)),this.setAttribute("normal",new Yi(re,3)),this.setAttribute("uv",new Yi(le,2));function Fe(){const De=new nt,Ve=new nt;let ct=0;const bt=(n-e)/r;for(let Ne=0;Ne<=c;Ne++){const dt=[],vt=Ne/c,Ut=vt*(n-e)+e;for(let hn=0;hn<=a;hn++){const Kt=hn/a,Dt=Kt*N+A,sn=Math.sin(Dt),kn=Math.cos(Dt);Ve.x=Ut*sn,Ve.y=-vt*r+de,Ve.z=Ut*kn,ne.push(Ve.x,Ve.y,Ve.z),De.set(sn,bt,kn).normalize(),re.push(De.x,De.y,De.z),le.push(Kt,1-vt),dt.push(me++)}pe.push(dt)}for(let Ne=0;Ne<a;Ne++)for(let dt=0;dt<c;dt++){const vt=pe[dt][Ne],Ut=pe[dt+1][Ne],hn=pe[dt+1][Ne+1],Kt=pe[dt][Ne+1];Z.push(vt,Ut,Kt),Z.push(Ut,hn,Kt),ct+=6}H.addGroup(Ce,ct,0),Ce+=ct}function Re(De){const Ve=me,ct=new On,bt=new nt;let Ne=0;const dt=De===!0?e:n,vt=De===!0?1:-1;for(let hn=1;hn<=a;hn++)ne.push(0,de*vt,0),re.push(0,vt,0),le.push(.5,.5),me++;const Ut=me;for(let hn=0;hn<=a;hn++){const Dt=hn/a*N+A,sn=Math.cos(Dt),kn=Math.sin(Dt);bt.x=dt*kn,bt.y=de*vt,bt.z=dt*sn,ne.push(bt.x,bt.y,bt.z),re.push(0,vt,0),ct.x=sn*.5+.5,ct.y=kn*.5*vt+.5,le.push(ct.x,ct.y),me++}for(let hn=0;hn<a;hn++){const Kt=Ve+hn,Dt=Ut+hn;De===!0?Z.push(Dt,Dt+1,Kt):Z.push(Dt+1,Dt,Kt),Ne+=3}H.addGroup(Ce,Ne,De===!0?1:2),Ce+=Ne}}static fromJSON(e){return new Cr(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ts extends Cr{constructor(e=1,n=1,r=8,a=1,c=!1,p=0,A=Math.PI*2){super(0,e,n,r,a,c,p,A),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:a,openEnded:c,thetaStart:p,thetaLength:A}}static fromJSON(e){return new ts(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Mr extends Pr{constructor(e=[],n=[],r=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:a};const c=[],p=[];A(a),H(r),Z(),this.setAttribute("position",new Yi(c,3)),this.setAttribute("normal",new Yi(c.slice(),3)),this.setAttribute("uv",new Yi(p,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function A(Fe){const Re=new nt,De=new nt,Ve=new nt;for(let ct=0;ct<n.length;ct+=3)le(n[ct+0],Re),le(n[ct+1],De),le(n[ct+2],Ve),N(Re,De,Ve,Fe)}function N(Fe,Re,De,Ve){const ct=Ve+1,bt=[];for(let Ne=0;Ne<=ct;Ne++){bt[Ne]=[];const dt=Fe.clone().lerp(De,Ne/ct),vt=Re.clone().lerp(De,Ne/ct),Ut=ct-Ne;for(let hn=0;hn<=Ut;hn++)hn===0&&Ne===ct?bt[Ne][hn]=dt:bt[Ne][hn]=dt.clone().lerp(vt,hn/Ut)}for(let Ne=0;Ne<ct;Ne++)for(let dt=0;dt<2*(ct-Ne)-1;dt++){const vt=Math.floor(dt/2);dt%2===0?(re(bt[Ne][vt+1]),re(bt[Ne+1][vt]),re(bt[Ne][vt])):(re(bt[Ne][vt+1]),re(bt[Ne+1][vt+1]),re(bt[Ne+1][vt]))}}function H(Fe){const Re=new nt;for(let De=0;De<c.length;De+=3)Re.x=c[De+0],Re.y=c[De+1],Re.z=c[De+2],Re.normalize().multiplyScalar(Fe),c[De+0]=Re.x,c[De+1]=Re.y,c[De+2]=Re.z}function Z(){const Fe=new nt;for(let Re=0;Re<c.length;Re+=3){Fe.x=c[Re+0],Fe.y=c[Re+1],Fe.z=c[Re+2];const De=de(Fe)/2/Math.PI+.5,Ve=Ce(Fe)/Math.PI+.5;p.push(De,1-Ve)}me(),ne()}function ne(){for(let Fe=0;Fe<p.length;Fe+=6){const Re=p[Fe+0],De=p[Fe+2],Ve=p[Fe+4],ct=Math.max(Re,De,Ve),bt=Math.min(Re,De,Ve);ct>.9&&bt<.1&&(Re<.2&&(p[Fe+0]+=1),De<.2&&(p[Fe+2]+=1),Ve<.2&&(p[Fe+4]+=1))}}function re(Fe){c.push(Fe.x,Fe.y,Fe.z)}function le(Fe,Re){const De=Fe*3;Re.x=e[De+0],Re.y=e[De+1],Re.z=e[De+2]}function me(){const Fe=new nt,Re=new nt,De=new nt,Ve=new nt,ct=new On,bt=new On,Ne=new On;for(let dt=0,vt=0;dt<c.length;dt+=9,vt+=6){Fe.set(c[dt+0],c[dt+1],c[dt+2]),Re.set(c[dt+3],c[dt+4],c[dt+5]),De.set(c[dt+6],c[dt+7],c[dt+8]),ct.set(p[vt+0],p[vt+1]),bt.set(p[vt+2],p[vt+3]),Ne.set(p[vt+4],p[vt+5]),Ve.copy(Fe).add(Re).add(De).divideScalar(3);const Ut=de(Ve);pe(ct,vt+0,Fe,Ut),pe(bt,vt+2,Re,Ut),pe(Ne,vt+4,De,Ut)}}function pe(Fe,Re,De,Ve){Ve<0&&Fe.x===1&&(p[Re]=Fe.x-1),De.x===0&&De.z===0&&(p[Re]=Ve/2/Math.PI+.5)}function de(Fe){return Math.atan2(Fe.z,-Fe.x)}function Ce(Fe){return Math.atan2(-Fe.y,Math.sqrt(Fe.x*Fe.x+Fe.z*Fe.z))}}static fromJSON(e){return new Mr(e.vertices,e.indices,e.radius,e.details)}}class eo extends Mr{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,a=1/r,c=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-r,0,-a,r,0,a,-r,0,a,r,-a,-r,0,-a,r,0,a,-r,0,a,r,0,-r,0,-a,r,0,-a,-r,0,a,r,0,a],p=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(c,p,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new eo(e.radius,e.detail)}}const vs=new nt,Bo=new nt,El=new nt,bl=new Fa;class qp extends Pr{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const a=Math.pow(10,4),c=Math.cos(sl*n),p=e.getIndex(),A=e.getAttribute("position"),N=p?p.count:A.count,H=[0,0,0],Z=["a","b","c"],ne=new Array(3),re={},le=[];for(let me=0;me<N;me+=3){p?(H[0]=p.getX(me),H[1]=p.getX(me+1),H[2]=p.getX(me+2)):(H[0]=me,H[1]=me+1,H[2]=me+2);const{a:pe,b:de,c:Ce}=bl;if(pe.fromBufferAttribute(A,H[0]),de.fromBufferAttribute(A,H[1]),Ce.fromBufferAttribute(A,H[2]),bl.getNormal(El),ne[0]=`${Math.round(pe.x*a)},${Math.round(pe.y*a)},${Math.round(pe.z*a)}`,ne[1]=`${Math.round(de.x*a)},${Math.round(de.y*a)},${Math.round(de.z*a)}`,ne[2]=`${Math.round(Ce.x*a)},${Math.round(Ce.y*a)},${Math.round(Ce.z*a)}`,!(ne[0]===ne[1]||ne[1]===ne[2]||ne[2]===ne[0]))for(let Fe=0;Fe<3;Fe++){const Re=(Fe+1)%3,De=ne[Fe],Ve=ne[Re],ct=bl[Z[Fe]],bt=bl[Z[Re]],Ne=`${De}_${Ve}`,dt=`${Ve}_${De}`;dt in re&&re[dt]?(El.dot(re[dt].normal)<=c&&(le.push(ct.x,ct.y,ct.z),le.push(bt.x,bt.y,bt.z)),re[dt]=null):Ne in re||(re[Ne]={index0:H[Fe],index1:H[Re],normal:El.clone()})}}for(const me in re)if(re[me]){const{index0:pe,index1:de}=re[me];vs.fromBufferAttribute(A,pe),Bo.fromBufferAttribute(A,de),le.push(vs.x,vs.y,vs.z),le.push(Bo.x,Bo.y,Bo.z)}this.setAttribute("position",new Yi(le,3))}}}class $a extends Ri{constructor(e){super(e),this.uuid=wo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,a=this.holes.length;r<a;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const a=e.holes[n];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const a=this.holes[n];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const a=e.holes[n];this.holes.push(new Ri().fromJSON(a))}return this}}const Hu={triangulate:function(x,e,n=2){const r=e&&e.length,a=r?e[0]*n:x.length;let c=Jp(x,0,a,n,!0);const p=[];if(!c||c.next===c.prev)return p;let A,N,H,Z,ne,re,le;if(r&&(c=fA(x,e,c,n)),x.length>80*n){A=H=x[0],N=Z=x[1];for(let me=n;me<a;me+=n)ne=x[me],re=x[me+1],ne<A&&(A=ne),re<N&&(N=re),ne>H&&(H=ne),re>Z&&(Z=re);le=Math.max(H-A,Z-N),le=le!==0?32767/le:0}return Zc(c,p,n,A,N,le,0),p}};function Jp(x,e,n,r,a){let c,p;if(a===nr(x,e,n,r)>0)for(c=e;c<n;c+=r)p=_r(c,x[c],x[c+1],p);else for(c=n-r;c>=e;c-=r)p=_r(c,x[c],x[c+1],p);return p&&En(p,p.next)&&(rr(p),p=p.next),p}function Xl(x,e){if(!x)return x;e||(e=x);let n=x,r;do if(r=!1,!n.steiner&&(En(n,n.next)||It(n.prev,n,n.next)===0)){if(rr(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Zc(x,e,n,r,a,c,p){if(!x)return;!p&&c&&Fg(x,r,a,c);let A=x,N,H;for(;x.prev!==x.next;){if(N=x.prev,H=x.next,c?_l(x,r,a,c):Cc(x)){e.push(N.i/n|0),e.push(x.i/n|0),e.push(H.i/n|0),rr(x),x=H.next,A=H.next;continue}if(x=H,x===A){p?p===1?(x=$c(Xl(x),e,n),Zc(x,e,n,r,a,c,2)):p===2&&dA(x,e,n,r,a,c):Zc(Xl(x),e,n,r,a,c,1);break}}}function Cc(x){const e=x.prev,n=x,r=x.next;if(It(e,n,r)>=0)return!1;const a=e.x,c=n.x,p=r.x,A=e.y,N=n.y,H=r.y,Z=a<c?a<p?a:p:c<p?c:p,ne=A<N?A<H?A:H:N<H?N:H,re=a>c?a>p?a:p:c>p?c:p,le=A>N?A>H?A:H:N>H?N:H;let me=r.next;for(;me!==e;){if(me.x>=Z&&me.x<=re&&me.y>=ne&&me.y<=le&&Et(a,A,c,N,p,H,me.x,me.y)&&It(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function _l(x,e,n,r){const a=x.prev,c=x,p=x.next;if(It(a,c,p)>=0)return!1;const A=a.x,N=c.x,H=p.x,Z=a.y,ne=c.y,re=p.y,le=A<N?A<H?A:H:N<H?N:H,me=Z<ne?Z<re?Z:re:ne<re?ne:re,pe=A>N?A>H?A:H:N>H?N:H,de=Z>ne?Z>re?Z:re:ne>re?ne:re,Ce=ve(le,me,e,n,r),Fe=ve(pe,de,e,n,r);let Re=x.prevZ,De=x.nextZ;for(;Re&&Re.z>=Ce&&De&&De.z<=Fe;){if(Re.x>=le&&Re.x<=pe&&Re.y>=me&&Re.y<=de&&Re!==a&&Re!==p&&Et(A,Z,N,ne,H,re,Re.x,Re.y)&&It(Re.prev,Re,Re.next)>=0||(Re=Re.prevZ,De.x>=le&&De.x<=pe&&De.y>=me&&De.y<=de&&De!==a&&De!==p&&Et(A,Z,N,ne,H,re,De.x,De.y)&&It(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;Re&&Re.z>=Ce;){if(Re.x>=le&&Re.x<=pe&&Re.y>=me&&Re.y<=de&&Re!==a&&Re!==p&&Et(A,Z,N,ne,H,re,Re.x,Re.y)&&It(Re.prev,Re,Re.next)>=0)return!1;Re=Re.prevZ}for(;De&&De.z<=Fe;){if(De.x>=le&&De.x<=pe&&De.y>=me&&De.y<=de&&De!==a&&De!==p&&Et(A,Z,N,ne,H,re,De.x,De.y)&&It(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function $c(x,e,n){let r=x;do{const a=r.prev,c=r.next.next;!En(a,c)&&Kn(a,r,r.next,c)&&ai(a,c)&&ai(c,a)&&(e.push(a.i/n|0),e.push(r.i/n|0),e.push(c.i/n|0),rr(r),rr(r.next),r=x=c),r=r.next}while(r!==x);return Xl(r)}function dA(x,e,n,r,a,c){let p=x;do{let A=p.next.next;for(;A!==p.prev;){if(p.i!==A.i&&Ot(p,A)){let N=tr(p,A);p=Xl(p,p.next),N=Xl(N,N.next),Zc(p,e,n,r,a,c,0),Zc(N,e,n,r,a,c,0);return}A=A.next}p=p.next}while(p!==x)}function fA(x,e,n,r){const a=[];let c,p,A,N,H;for(c=0,p=e.length;c<p;c++)A=e[c]*r,N=c<p-1?e[c+1]*r:x.length,H=Jp(x,A,N,r,!1),H===H.next&&(H.steiner=!0),a.push(Rt(H));for(a.sort(pA),c=0;c<a.length;c++)n=wl(a[c],n);return n}function pA(x,e){return x.x-e.x}function wl(x,e){const n=Ma(x,e);if(!n)return e;const r=tr(n,x);return Xl(r,r.next),Xl(n,n.next)}function Ma(x,e){let n=e,r=-1/0,a;const c=x.x,p=x.y;do{if(p<=n.y&&p>=n.next.y&&n.next.y!==n.y){const re=n.x+(p-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(re<=c&&re>r&&(r=re,a=n.x<n.next.x?n:n.next,re===c))return a}n=n.next}while(n!==e);if(!a)return null;const A=a,N=a.x,H=a.y;let Z=1/0,ne;n=a;do c>=n.x&&n.x>=N&&c!==n.x&&Et(p<H?c:r,p,N,H,p<H?r:c,p,n.x,n.y)&&(ne=Math.abs(p-n.y)/(c-n.x),ai(n,x)&&(ne<Z||ne===Z&&(n.x>a.x||n.x===a.x&&Cl(a,n)))&&(a=n,Z=ne)),n=n.next;while(n!==A);return a}function Cl(x,e){return It(x.prev,x,e.prev)<0&&It(e.next,x,x.next)<0}function Fg(x,e,n,r){let a=x;do a.z===0&&(a.z=ve(a.x,a.y,e,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==x);a.prevZ.nextZ=null,a.prevZ=null,zu(a)}function zu(x){let e,n,r,a,c,p,A,N,H=1;do{for(n=x,x=null,c=null,p=0;n;){for(p++,r=n,A=0,e=0;e<H&&(A++,r=r.nextZ,!!r);e++);for(N=H;A>0||N>0&&r;)A!==0&&(N===0||!r||n.z<=r.z)?(a=n,n=n.nextZ,A--):(a=r,r=r.nextZ,N--),c?c.nextZ=a:x=a,a.prevZ=c,c=a;n=r}c.nextZ=null,H*=2}while(p>1);return x}function ve(x,e,n,r,a){return x=(x-n)*a|0,e=(e-r)*a|0,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,x|e<<1}function Rt(x){let e=x,n=x;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==x);return n}function Et(x,e,n,r,a,c,p,A){return(a-p)*(e-A)>=(x-p)*(c-A)&&(x-p)*(r-A)>=(n-p)*(e-A)&&(n-p)*(c-A)>=(a-p)*(r-A)}function Ot(x,e){return x.next.i!==e.i&&x.prev.i!==e.i&&!Vn(x,e)&&(ai(x,e)&&ai(e,x)&&ci(x,e)&&(It(x.prev,x,e.prev)||It(x,e.prev,e))||En(x,e)&&It(x.prev,x,x.next)>0&&It(e.prev,e,e.next)>0)}function It(x,e,n){return(e.y-x.y)*(n.x-e.x)-(e.x-x.x)*(n.y-e.y)}function En(x,e){return x.x===e.x&&x.y===e.y}function Kn(x,e,n,r){const a=Jn(It(x,e,n)),c=Jn(It(x,e,r)),p=Jn(It(n,r,x)),A=Jn(It(n,r,e));return!!(a!==c&&p!==A||a===0&&ti(x,n,e)||c===0&&ti(x,r,e)||p===0&&ti(n,x,r)||A===0&&ti(n,e,r))}function ti(x,e,n){return e.x<=Math.max(x.x,n.x)&&e.x>=Math.min(x.x,n.x)&&e.y<=Math.max(x.y,n.y)&&e.y>=Math.min(x.y,n.y)}function Jn(x){return x>0?1:x<0?-1:0}function Vn(x,e){let n=x;do{if(n.i!==x.i&&n.next.i!==x.i&&n.i!==e.i&&n.next.i!==e.i&&Kn(n,n.next,x,e))return!0;n=n.next}while(n!==x);return!1}function ai(x,e){return It(x.prev,x,x.next)<0?It(x,e,x.next)>=0&&It(x,x.prev,e)>=0:It(x,e,x.prev)<0||It(x,x.next,e)<0}function ci(x,e){let n=x,r=!1;const a=(x.x+e.x)/2,c=(x.y+e.y)/2;do n.y>c!=n.next.y>c&&n.next.y!==n.y&&a<(n.next.x-n.x)*(c-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==x);return r}function tr(x,e){const n=new Ni(x.i,x.x,x.y),r=new Ni(e.i,e.x,e.y),a=x.next,c=e.prev;return x.next=e,e.prev=x,n.next=a,a.prev=n,r.next=n,n.prev=r,c.next=r,r.prev=c,r}function _r(x,e,n,r){const a=new Ni(x,e,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function rr(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function Ni(x,e,n){this.i=x,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nr(x,e,n,r){let a=0;for(let c=e,p=n-r;c<n;c+=r)a+=(x[p]-x[c])*(x[c+1]+x[p+1]),p=c;return a}class Bi{static area(e){const n=e.length;let r=0;for(let a=n-1,c=0;c<n;a=c++)r+=e[a].x*e[c].y-e[c].x*e[a].y;return r*.5}static isClockWise(e){return Bi.area(e)<0}static triangulateShape(e,n){const r=[],a=[],c=[];sr(e),kr(r,e);let p=e.length;n.forEach(sr);for(let N=0;N<n.length;N++)a.push(p),p+=n[N].length,kr(r,n[N]);const A=Hu.triangulate(r,a);for(let N=0;N<A.length;N+=3)c.push(A.slice(N,N+3));return c}}function sr(x){const e=x.length;e>2&&x[e-1].equals(x[0])&&x.pop()}function kr(x,e){for(let n=0;n<e.length;n++)x.push(e[n].x),x.push(e[n].y)}class Jr extends Pr{constructor(e=new $a([new On(.5,.5),new On(-.5,.5),new On(-.5,-.5),new On(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,a=[],c=[];for(let A=0,N=e.length;A<N;A++){const H=e[A];p(H)}this.setAttribute("position",new Yi(a,3)),this.setAttribute("uv",new Yi(c,2)),this.computeVertexNormals();function p(A){const N=[],H=n.curveSegments!==void 0?n.curveSegments:12,Z=n.steps!==void 0?n.steps:1,ne=n.depth!==void 0?n.depth:1;let re=n.bevelEnabled!==void 0?n.bevelEnabled:!0,le=n.bevelThickness!==void 0?n.bevelThickness:.2,me=n.bevelSize!==void 0?n.bevelSize:le-.1,pe=n.bevelOffset!==void 0?n.bevelOffset:0,de=n.bevelSegments!==void 0?n.bevelSegments:3;const Ce=n.extrudePath,Fe=n.UVGenerator!==void 0?n.UVGenerator:Eo;let Re,De=!1,Ve,ct,bt,Ne;Ce&&(Re=Ce.getSpacedPoints(Z),De=!0,re=!1,Ve=Ce.computeFrenetFrames(Z,!1),ct=new nt,bt=new nt,Ne=new nt),re||(de=0,le=0,me=0,pe=0);const dt=A.extractPoints(H);let vt=dt.shape;const Ut=dt.holes;if(!Bi.isClockWise(vt)){vt=vt.reverse();for(let Hn=0,Rn=Ut.length;Hn<Rn;Hn++){const yi=Ut[Hn];Bi.isClockWise(yi)&&(Ut[Hn]=yi.reverse())}}const Kt=Bi.triangulateShape(vt,Ut),Dt=vt;for(let Hn=0,Rn=Ut.length;Hn<Rn;Hn++){const yi=Ut[Hn];vt=vt.concat(yi)}function sn(Hn,Rn,yi){return Rn||console.error("THREE.ExtrudeGeometry: vec does not exist"),Rn.clone().multiplyScalar(yi).add(Hn)}const kn=vt.length,Zn=Kt.length;function Ln(Hn,Rn,yi){let cr,Di,Hr;const Tr=Hn.x-Rn.x,vr=Hn.y-Rn.y,Xs=yi.x-Hn.x,Hs=yi.y-Hn.y,ft=Tr*Tr+vr*vr,tt=Tr*Hs-vr*Xs;if(Math.abs(tt)>Number.EPSILON){const fn=Math.sqrt(ft),hi=Math.sqrt(Xs*Xs+Hs*Hs),Ai=Rn.x-vr/fn,ki=Rn.y+Tr/fn,Ur=yi.x-Hs/hi,Hi=yi.y+Xs/hi,Bn=((Ur-Ai)*Hs-(Hi-ki)*Xs)/(Tr*Hs-vr*Xs);cr=Ai+Tr*Bn-Hn.x,Di=ki+vr*Bn-Hn.y;const yr=cr*cr+Di*Di;if(yr<=2)return new On(cr,Di);Hr=Math.sqrt(yr/2)}else{let fn=!1;Tr>Number.EPSILON?Xs>Number.EPSILON&&(fn=!0):Tr<-Number.EPSILON?Xs<-Number.EPSILON&&(fn=!0):Math.sign(vr)===Math.sign(Hs)&&(fn=!0),fn?(cr=-vr,Di=Tr,Hr=Math.sqrt(ft)):(cr=Tr,Di=vr,Hr=Math.sqrt(ft/2))}return new On(cr/Hr,Di/Hr)}const ui=[];for(let Hn=0,Rn=Dt.length,yi=Rn-1,cr=Hn+1;Hn<Rn;Hn++,yi++,cr++)yi===Rn&&(yi=0),cr===Rn&&(cr=0),ui[Hn]=Ln(Dt[Hn],Dt[yi],Dt[cr]);const si=[];let Qi,Li=ui.concat();for(let Hn=0,Rn=Ut.length;Hn<Rn;Hn++){const yi=Ut[Hn];Qi=[];for(let cr=0,Di=yi.length,Hr=Di-1,Tr=cr+1;cr<Di;cr++,Hr++,Tr++)Hr===Di&&(Hr=0),Tr===Di&&(Tr=0),Qi[cr]=Ln(yi[cr],yi[Hr],yi[Tr]);si.push(Qi),Li=Li.concat(Qi)}for(let Hn=0;Hn<de;Hn++){const Rn=Hn/de,yi=le*Math.cos(Rn*Math.PI/2),cr=me*Math.sin(Rn*Math.PI/2)+pe;for(let Di=0,Hr=Dt.length;Di<Hr;Di++){const Tr=sn(Dt[Di],ui[Di],cr);Wi(Tr.x,Tr.y,-yi)}for(let Di=0,Hr=Ut.length;Di<Hr;Di++){const Tr=Ut[Di];Qi=si[Di];for(let vr=0,Xs=Tr.length;vr<Xs;vr++){const Hs=sn(Tr[vr],Qi[vr],cr);Wi(Hs.x,Hs.y,-yi)}}}const gn=me+pe;for(let Hn=0;Hn<kn;Hn++){const Rn=re?sn(vt[Hn],Li[Hn],gn):vt[Hn];De?(bt.copy(Ve.normals[0]).multiplyScalar(Rn.x),ct.copy(Ve.binormals[0]).multiplyScalar(Rn.y),Ne.copy(Re[0]).add(bt).add(ct),Wi(Ne.x,Ne.y,Ne.z)):Wi(Rn.x,Rn.y,0)}for(let Hn=1;Hn<=Z;Hn++)for(let Rn=0;Rn<kn;Rn++){const yi=re?sn(vt[Rn],Li[Rn],gn):vt[Rn];De?(bt.copy(Ve.normals[Hn]).multiplyScalar(yi.x),ct.copy(Ve.binormals[Hn]).multiplyScalar(yi.y),Ne.copy(Re[Hn]).add(bt).add(ct),Wi(Ne.x,Ne.y,Ne.z)):Wi(yi.x,yi.y,ne/Z*Hn)}for(let Hn=de-1;Hn>=0;Hn--){const Rn=Hn/de,yi=le*Math.cos(Rn*Math.PI/2),cr=me*Math.sin(Rn*Math.PI/2)+pe;for(let Di=0,Hr=Dt.length;Di<Hr;Di++){const Tr=sn(Dt[Di],ui[Di],cr);Wi(Tr.x,Tr.y,ne+yi)}for(let Di=0,Hr=Ut.length;Di<Hr;Di++){const Tr=Ut[Di];Qi=si[Di];for(let vr=0,Xs=Tr.length;vr<Xs;vr++){const Hs=sn(Tr[vr],Qi[vr],cr);De?Wi(Hs.x,Hs.y+Re[Z-1].y,Re[Z-1].x+yi):Wi(Hs.x,Hs.y,ne+yi)}}}$n(),_i();function $n(){const Hn=a.length/3;if(re){let Rn=0,yi=kn*Rn;for(let cr=0;cr<Zn;cr++){const Di=Kt[cr];wi(Di[2]+yi,Di[1]+yi,Di[0]+yi)}Rn=Z+de*2,yi=kn*Rn;for(let cr=0;cr<Zn;cr++){const Di=Kt[cr];wi(Di[0]+yi,Di[1]+yi,Di[2]+yi)}}else{for(let Rn=0;Rn<Zn;Rn++){const yi=Kt[Rn];wi(yi[2],yi[1],yi[0])}for(let Rn=0;Rn<Zn;Rn++){const yi=Kt[Rn];wi(yi[0]+kn*Z,yi[1]+kn*Z,yi[2]+kn*Z)}}r.addGroup(Hn,a.length/3-Hn,0)}function _i(){const Hn=a.length/3;let Rn=0;ln(Dt,Rn),Rn+=Dt.length;for(let yi=0,cr=Ut.length;yi<cr;yi++){const Di=Ut[yi];ln(Di,Rn),Rn+=Di.length}r.addGroup(Hn,a.length/3-Hn,1)}function ln(Hn,Rn){let yi=Hn.length;for(;--yi>=0;){const cr=yi;let Di=yi-1;Di<0&&(Di=Hn.length-1);for(let Hr=0,Tr=Z+de*2;Hr<Tr;Hr++){const vr=kn*Hr,Xs=kn*(Hr+1),Hs=Rn+cr+vr,ft=Rn+Di+vr,tt=Rn+Di+Xs,fn=Rn+cr+Xs;gr(Hs,ft,tt,fn)}}}function Wi(Hn,Rn,yi){N.push(Hn),N.push(Rn),N.push(yi)}function wi(Hn,Rn,yi){mi(Hn),mi(Rn),mi(yi);const cr=a.length/3,Di=Fe.generateTopUV(r,a,cr-3,cr-2,cr-1);ns(Di[0]),ns(Di[1]),ns(Di[2])}function gr(Hn,Rn,yi,cr){mi(Hn),mi(Rn),mi(cr),mi(Rn),mi(yi),mi(cr);const Di=a.length/3,Hr=Fe.generateSideWallUV(r,a,Di-6,Di-3,Di-2,Di-1);ns(Hr[0]),ns(Hr[1]),ns(Hr[3]),ns(Hr[1]),ns(Hr[2]),ns(Hr[3])}function mi(Hn){a.push(N[Hn*3+0]),a.push(N[Hn*3+1]),a.push(N[Hn*3+2])}function ns(Hn){c.push(Hn.x),c.push(Hn.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return eu(n,r,e)}static fromJSON(e,n){const r=[];for(let c=0,p=e.shapes.length;c<p;c++){const A=n[e.shapes[c]];r.push(A)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new vi[a.type]().fromJSON(a)),new Jr(r,e.options)}}const Eo={generateTopUV:function(x,e,n,r,a){const c=e[n*3],p=e[n*3+1],A=e[r*3],N=e[r*3+1],H=e[a*3],Z=e[a*3+1];return[new On(c,p),new On(A,N),new On(H,Z)]},generateSideWallUV:function(x,e,n,r,a,c){const p=e[n*3],A=e[n*3+1],N=e[n*3+2],H=e[r*3],Z=e[r*3+1],ne=e[r*3+2],re=e[a*3],le=e[a*3+1],me=e[a*3+2],pe=e[c*3],de=e[c*3+1],Ce=e[c*3+2];return Math.abs(A-Z)<Math.abs(p-H)?[new On(p,1-N),new On(H,1-ne),new On(re,1-me),new On(pe,1-Ce)]:[new On(A,1-N),new On(Z,1-ne),new On(le,1-me),new On(de,1-Ce)]}};function eu(x,e,n){if(n.shapes=[],Array.isArray(x))for(let r=0,a=x.length;r<a;r++){const c=x[r];n.shapes.push(c.uuid)}else n.shapes.push(x.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class tu extends Mr{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,a=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],c=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,c,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new tu(e.radius,e.detail)}}class Yl extends Mr{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,a,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Yl(e.radius,e.detail)}}class nu extends Pr{constructor(e=.5,n=1,r=8,a=1,c=0,p=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:a,thetaStart:c,thetaLength:p},r=Math.max(3,r),a=Math.max(1,a);const A=[],N=[],H=[],Z=[];let ne=e;const re=(n-e)/a,le=new nt,me=new On;for(let pe=0;pe<=a;pe++){for(let de=0;de<=r;de++){const Ce=c+de/r*p;le.x=ne*Math.cos(Ce),le.y=ne*Math.sin(Ce),N.push(le.x,le.y,le.z),H.push(0,0,1),me.x=(le.x/n+1)/2,me.y=(le.y/n+1)/2,Z.push(me.x,me.y)}ne+=re}for(let pe=0;pe<a;pe++){const de=pe*(r+1);for(let Ce=0;Ce<r;Ce++){const Fe=Ce+de,Re=Fe,De=Fe+r+1,Ve=Fe+r+2,ct=Fe+1;A.push(Re,De,ct),A.push(De,Ve,ct)}}this.setIndex(A),this.setAttribute("position",new Yi(N,3)),this.setAttribute("normal",new Yi(H,3)),this.setAttribute("uv",new Yi(Z,2))}static fromJSON(e){return new nu(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class iu extends Pr{constructor(e=new $a([new On(0,.5),new On(-.5,-.5),new On(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],a=[],c=[],p=[];let A=0,N=0;if(Array.isArray(e)===!1)H(e);else for(let Z=0;Z<e.length;Z++)H(e[Z]),this.addGroup(A,N,Z),A+=N,N=0;this.setIndex(r),this.setAttribute("position",new Yi(a,3)),this.setAttribute("normal",new Yi(c,3)),this.setAttribute("uv",new Yi(p,2));function H(Z){const ne=a.length/3,re=Z.extractPoints(n);let le=re.shape;const me=re.holes;Bi.isClockWise(le)===!1&&(le=le.reverse());for(let de=0,Ce=me.length;de<Ce;de++){const Fe=me[de];Bi.isClockWise(Fe)===!0&&(me[de]=Fe.reverse())}const pe=Bi.triangulateShape(le,me);for(let de=0,Ce=me.length;de<Ce;de++){const Fe=me[de];le=le.concat(Fe)}for(let de=0,Ce=le.length;de<Ce;de++){const Fe=le[de];a.push(Fe.x,Fe.y,0),c.push(0,0,1),p.push(Fe.x,Fe.y)}for(let de=0,Ce=pe.length;de<Ce;de++){const Fe=pe[de],Re=Fe[0]+ne,De=Fe[1]+ne,Ve=Fe[2]+ne;r.push(Re,De,Ve),N+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Zp(n,e)}static fromJSON(e,n){const r=[];for(let a=0,c=e.shapes.length;a<c;a++){const p=n[e.shapes[a]];r.push(p)}return new iu(r,e.curveSegments)}}function Zp(x,e){if(e.shapes=[],Array.isArray(x))for(let n=0,r=x.length;n<r;n++){const a=x[n];e.shapes.push(a.uuid)}else e.shapes.push(x.uuid);return e}class ru extends Pr{constructor(e=1,n=32,r=16,a=0,c=Math.PI*2,p=0,A=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:a,phiLength:c,thetaStart:p,thetaLength:A},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const N=Math.min(p+A,Math.PI);let H=0;const Z=[],ne=new nt,re=new nt,le=[],me=[],pe=[],de=[];for(let Ce=0;Ce<=r;Ce++){const Fe=[],Re=Ce/r;let De=0;Ce==0&&p==0?De=.5/n:Ce==r&&N==Math.PI&&(De=-.5/n);for(let Ve=0;Ve<=n;Ve++){const ct=Ve/n;ne.x=-e*Math.cos(a+ct*c)*Math.sin(p+Re*A),ne.y=e*Math.cos(p+Re*A),ne.z=e*Math.sin(a+ct*c)*Math.sin(p+Re*A),me.push(ne.x,ne.y,ne.z),re.copy(ne).normalize(),pe.push(re.x,re.y,re.z),de.push(ct+De,1-Re),Fe.push(H++)}Z.push(Fe)}for(let Ce=0;Ce<r;Ce++)for(let Fe=0;Fe<n;Fe++){const Re=Z[Ce][Fe+1],De=Z[Ce][Fe],Ve=Z[Ce+1][Fe],ct=Z[Ce+1][Fe+1];(Ce!==0||p>0)&&le.push(Re,De,ct),(Ce!==r-1||N<Math.PI)&&le.push(De,Ve,ct)}this.setIndex(le),this.setAttribute("position",new Yi(me,3)),this.setAttribute("normal",new Yi(pe,3)),this.setAttribute("uv",new Yi(de,2))}static fromJSON(e){return new ru(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Vu extends Mr{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,a,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Vu(e.radius,e.detail)}}class Qu extends Pr{constructor(e=1,n=.4,r=8,a=6,c=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:a,arc:c},r=Math.floor(r),a=Math.floor(a);const p=[],A=[],N=[],H=[],Z=new nt,ne=new nt,re=new nt;for(let le=0;le<=r;le++)for(let me=0;me<=a;me++){const pe=me/a*c,de=le/r*Math.PI*2;ne.x=(e+n*Math.cos(de))*Math.cos(pe),ne.y=(e+n*Math.cos(de))*Math.sin(pe),ne.z=n*Math.sin(de),A.push(ne.x,ne.y,ne.z),Z.x=e*Math.cos(pe),Z.y=e*Math.sin(pe),re.subVectors(ne,Z).normalize(),N.push(re.x,re.y,re.z),H.push(me/a),H.push(le/r)}for(let le=1;le<=r;le++)for(let me=1;me<=a;me++){const pe=(a+1)*le+me-1,de=(a+1)*(le-1)+me-1,Ce=(a+1)*(le-1)+me,Fe=(a+1)*le+me;p.push(pe,de,Fe),p.push(de,Ce,Fe)}this.setIndex(p),this.setAttribute("position",new Yi(A,3)),this.setAttribute("normal",new Yi(N,3)),this.setAttribute("uv",new Yi(H,2))}static fromJSON(e){return new Qu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ju extends Pr{constructor(e=1,n=.4,r=64,a=8,c=2,p=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:a,p:c,q:p},r=Math.floor(r),a=Math.floor(a);const A=[],N=[],H=[],Z=[],ne=new nt,re=new nt,le=new nt,me=new nt,pe=new nt,de=new nt,Ce=new nt;for(let Re=0;Re<=r;++Re){const De=Re/r*c*Math.PI*2;Fe(De,c,p,e,le),Fe(De+.01,c,p,e,me),de.subVectors(me,le),Ce.addVectors(me,le),pe.crossVectors(de,Ce),Ce.crossVectors(pe,de),pe.normalize(),Ce.normalize();for(let Ve=0;Ve<=a;++Ve){const ct=Ve/a*Math.PI*2,bt=-n*Math.cos(ct),Ne=n*Math.sin(ct);ne.x=le.x+(bt*Ce.x+Ne*pe.x),ne.y=le.y+(bt*Ce.y+Ne*pe.y),ne.z=le.z+(bt*Ce.z+Ne*pe.z),N.push(ne.x,ne.y,ne.z),re.subVectors(ne,le).normalize(),H.push(re.x,re.y,re.z),Z.push(Re/r),Z.push(Ve/a)}}for(let Re=1;Re<=r;Re++)for(let De=1;De<=a;De++){const Ve=(a+1)*(Re-1)+(De-1),ct=(a+1)*Re+(De-1),bt=(a+1)*Re+De,Ne=(a+1)*(Re-1)+De;A.push(Ve,ct,Ne),A.push(ct,bt,Ne)}this.setIndex(A),this.setAttribute("position",new Yi(N,3)),this.setAttribute("normal",new Yi(H,3)),this.setAttribute("uv",new Yi(Z,2));function Fe(Re,De,Ve,ct,bt){const Ne=Math.cos(Re),dt=Math.sin(Re),vt=Ve/De*Re,Ut=Math.cos(vt);bt.x=ct*(2+Ut)*.5*Ne,bt.y=ct*(2+Ut)*dt*.5,bt.z=ct*Math.sin(vt)*.5}}static fromJSON(e){return new ju(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Wu extends Pr{constructor(e=new Sn(new nt(-1,-1,0),new nt(-1,1,0),new nt(1,1,0)),n=64,r=1,a=8,c=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:a,closed:c};const p=e.computeFrenetFrames(n,c);this.tangents=p.tangents,this.normals=p.normals,this.binormals=p.binormals;const A=new nt,N=new nt,H=new On;let Z=new nt;const ne=[],re=[],le=[],me=[];pe(),this.setIndex(me),this.setAttribute("position",new Yi(ne,3)),this.setAttribute("normal",new Yi(re,3)),this.setAttribute("uv",new Yi(le,2));function pe(){for(let Re=0;Re<n;Re++)de(Re);de(c===!1?n:0),Fe(),Ce()}function de(Re){Z=e.getPointAt(Re/n,Z);const De=p.normals[Re],Ve=p.binormals[Re];for(let ct=0;ct<=a;ct++){const bt=ct/a*Math.PI*2,Ne=Math.sin(bt),dt=-Math.cos(bt);N.x=dt*De.x+Ne*Ve.x,N.y=dt*De.y+Ne*Ve.y,N.z=dt*De.z+Ne*Ve.z,N.normalize(),re.push(N.x,N.y,N.z),A.x=Z.x+r*N.x,A.y=Z.y+r*N.y,A.z=Z.z+r*N.z,ne.push(A.x,A.y,A.z)}}function Ce(){for(let Re=1;Re<=n;Re++)for(let De=1;De<=a;De++){const Ve=(a+1)*(Re-1)+(De-1),ct=(a+1)*Re+(De-1),bt=(a+1)*Re+De,Ne=(a+1)*(Re-1)+De;me.push(Ve,ct,Ne),me.push(ct,bt,Ne)}}function Fe(){for(let Re=0;Re<=n;Re++)for(let De=0;De<=a;De++)H.x=Re/n,H.y=De/a,le.push(H.x,H.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Wu(new vi[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class mA extends Pr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,a=new nt,c=new nt;if(e.index!==null){const p=e.attributes.position,A=e.index;let N=e.groups;N.length===0&&(N=[{start:0,count:A.count,materialIndex:0}]);for(let H=0,Z=N.length;H<Z;++H){const ne=N[H],re=ne.start,le=ne.count;for(let me=re,pe=re+le;me<pe;me+=3)for(let de=0;de<3;de++){const Ce=A.getX(me+de),Fe=A.getX(me+(de+1)%3);a.fromBufferAttribute(p,Ce),c.fromBufferAttribute(p,Fe),$p(a,c,r)===!0&&(n.push(a.x,a.y,a.z),n.push(c.x,c.y,c.z))}}}else{const p=e.attributes.position;for(let A=0,N=p.count/3;A<N;A++)for(let H=0;H<3;H++){const Z=3*A+H,ne=3*A+(H+1)%3;a.fromBufferAttribute(p,Z),c.fromBufferAttribute(p,ne),$p(a,c,r)===!0&&(n.push(a.x,a.y,a.z),n.push(c.x,c.y,c.z))}}this.setAttribute("position",new Yi(n,3))}}}function $p(x,e,n){const r=`${x.x},${x.y},${x.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${x.x},${x.y},${x.z}`;return n.has(r)===!0||n.has(a)===!0?!1:(n.add(r),n.add(a),!0)}var af=Object.freeze({__proto__:null,BoxGeometry:Ja,CapsuleGeometry:gs,CircleGeometry:Ct,ConeGeometry:ts,CylinderGeometry:Cr,DodecahedronGeometry:eo,EdgesGeometry:qp,ExtrudeGeometry:Jr,IcosahedronGeometry:tu,LatheGeometry:br,OctahedronGeometry:Yl,PlaneGeometry:_u,PolyhedronGeometry:Mr,RingGeometry:nu,ShapeGeometry:iu,SphereGeometry:ru,TetrahedronGeometry:Vu,TorusGeometry:Qu,TorusKnotGeometry:ju,TubeGeometry:Wu,WireframeGeometry:mA});class lf extends Zo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Si(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class su extends ea{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Qh extends Zo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Si(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class em extends Qh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new On(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Os(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Si(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Si(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Si(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class tm extends Zo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Si(16777215),this.specular=new Si(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nm extends Zo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Si(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Ku extends Zo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class cf extends Zo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=qt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cn extends Zo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Si(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vs,this.normalScale=new On(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ds extends ga{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Rr(x,e,n){return Or(x)?new x.constructor(x.subarray(e,n!==void 0?n:x.length)):x.slice(e,n)}function Gs(x,e,n){return!x||!n&&x.constructor===e?x:typeof e.BYTES_PER_ELEMENT=="number"?new e(x):Array.prototype.slice.call(x)}function Or(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}function jo(x){function e(a,c){return x[a]-x[c]}const n=x.length,r=new Array(n);for(let a=0;a!==n;++a)r[a]=a;return r.sort(e),r}function Aa(x,e,n){const r=x.length,a=new x.constructor(r);for(let c=0,p=0;p!==r;++c){const A=n[c]*e;for(let N=0;N!==e;++N)a[p++]=x[A+N]}return a}function va(x,e,n,r){let a=1,c=x[0];for(;c!==void 0&&c[r]===void 0;)c=x[a++];if(c===void 0)return;let p=c[r];if(p!==void 0)if(Array.isArray(p))do p=c[r],p!==void 0&&(e.push(c.time),n.push.apply(n,p)),c=x[a++];while(c!==void 0);else if(p.toArray!==void 0)do p=c[r],p!==void 0&&(e.push(c.time),p.toArray(n,n.length)),c=x[a++];while(c!==void 0);else do p=c[r],p!==void 0&&(e.push(c.time),n.push(p)),c=x[a++];while(c!==void 0)}function uf(x,e,n,r,a=30){const c=x.clone();c.name=e;const p=[];for(let N=0;N<c.tracks.length;++N){const H=c.tracks[N],Z=H.getValueSize(),ne=[],re=[];for(let le=0;le<H.times.length;++le){const me=H.times[le]*a;if(!(me<n||me>=r)){ne.push(H.times[le]);for(let pe=0;pe<Z;++pe)re.push(H.values[le*Z+pe])}}ne.length!==0&&(H.times=Gs(ne,H.times.constructor),H.values=Gs(re,H.values.constructor),p.push(H))}c.tracks=p;let A=1/0;for(let N=0;N<c.tracks.length;++N)A>c.tracks[N].times[0]&&(A=c.tracks[N].times[0]);for(let N=0;N<c.tracks.length;++N)c.tracks[N].shift(-1*A);return c.resetDuration(),c}function Lo(x,e=0,n=x,r=30){r<=0&&(r=30);const a=n.tracks.length,c=e/r;for(let p=0;p<a;++p){const A=n.tracks[p],N=A.ValueTypeName;if(N==="bool"||N==="string")continue;const H=x.tracks.find(function(Ce){return Ce.name===A.name&&Ce.ValueTypeName===N});if(H===void 0)continue;let Z=0;const ne=A.getValueSize();A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=ne/3);let re=0;const le=H.getValueSize();H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(re=le/3);const me=A.times.length-1;let pe;if(c<=A.times[0]){const Ce=Z,Fe=ne-Z;pe=Rr(A.values,Ce,Fe)}else if(c>=A.times[me]){const Ce=me*ne+Z,Fe=Ce+ne-Z;pe=Rr(A.values,Ce,Fe)}else{const Ce=A.createInterpolant(),Fe=Z,Re=ne-Z;Ce.evaluate(c),pe=Rr(Ce.resultBuffer,Fe,Re)}N==="quaternion"&&new Co().fromArray(pe).normalize().conjugate().toArray(pe);const de=H.times.length;for(let Ce=0;Ce<de;++Ce){const Fe=Ce*le+re;if(N==="quaternion")Co.multiplyQuaternionsFlat(H.values,Fe,pe,0,H.values,Fe);else{const Re=le-re*2;for(let De=0;De<Re;++De)H.values[Fe+De]-=pe[De]}}}return x.blendMode=fr,x}var Xu=Object.freeze({__proto__:null,arraySlice:Rr,convertArray:Gs,isTypedArray:Or,getKeyframeOrder:jo,sortedArray:Aa,flattenJSON:va,subclip:uf,makeClipAdditive:Lo});class Ml{constructor(e,n,r,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,a=n[r],c=n[r-1];e:{t:{let p;n:{i:if(!(e<a)){for(let A=r+2;;){if(a===void 0){if(e<c)break i;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===A)break;if(c=a,a=n[++r],e<a)break t}p=n.length;break n}if(!(e>=c)){const A=n[1];e<A&&(r=2,c=A);for(let N=r-2;;){if(c===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===N)break;if(a=c,c=n[--r-1],e>=c)break t}p=r,r=0;break n}break e}for(;r<p;){const A=r+p>>>1;e<n[A]?p=A:r=A+1}if(a=n[r],c=n[r-1],c===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,c,a)}return this.interpolate_(r,c,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,a=this.valueSize,c=e*a;for(let p=0;p!==a;++p)n[p]=r[c+p];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ay extends Ml{constructor(e,n,r,a){super(e,n,r,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Pn,endingEnd:Pn}}intervalChanged_(e,n,r){const a=this.parameterPositions;let c=e-2,p=e+1,A=a[c],N=a[p];if(A===void 0)switch(this.getSettings_().endingStart){case xi:c=e,A=2*n-r;break;case Ui:c=a.length-2,A=n+a[c]-a[c+1];break;default:c=e,A=r}if(N===void 0)switch(this.getSettings_().endingEnd){case xi:p=e,N=2*r-n;break;case Ui:p=1,N=r+a[1]-a[0];break;default:p=e-1,N=n}const H=(r-n)*.5,Z=this.valueSize;this._weightPrev=H/(n-A),this._weightNext=H/(N-r),this._offsetPrev=c*Z,this._offsetNext=p*Z}interpolate_(e,n,r,a){const c=this.resultBuffer,p=this.sampleValues,A=this.valueSize,N=e*A,H=N-A,Z=this._offsetPrev,ne=this._offsetNext,re=this._weightPrev,le=this._weightNext,me=(r-n)/(a-n),pe=me*me,de=pe*me,Ce=-re*de+2*re*pe-re*me,Fe=(1+re)*de+(-1.5-2*re)*pe+(-.5+re)*me+1,Re=(-1-le)*de+(1.5+le)*pe+.5*me,De=le*de-le*pe;for(let Ve=0;Ve!==A;++Ve)c[Ve]=Ce*p[Z+Ve]+Fe*p[H+Ve]+Re*p[N+Ve]+De*p[ne+Ve];return c}}class Jv extends Ml{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e,n,r,a){const c=this.resultBuffer,p=this.sampleValues,A=this.valueSize,N=e*A,H=N-A,Z=(r-n)/(a-n),ne=1-Z;for(let re=0;re!==A;++re)c[re]=p[H+re]*ne+p[N+re]*Z;return c}}class vy extends Ml{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Mc{constructor(e,n,r,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gs(n,this.TimeBufferType),this.values=Gs(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Gs(e.times,Array),values:Gs(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(r.interpolation=a)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new vy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ay(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case xn:n=this.InterpolantFactoryMethodDiscrete;break;case Nt:n=this.InterpolantFactoryMethodLinear;break;case an:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xn;case this.InterpolantFactoryMethodLinear:return Nt;case this.InterpolantFactoryMethodSmooth:return an}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,a=n.length;r!==a;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,a=n.length;r!==a;++r)n[r]*=e}return this}trim(e,n){const r=this.times,a=r.length;let c=0,p=a-1;for(;c!==a&&r[c]<e;)++c;for(;p!==-1&&r[p]>n;)--p;if(++p,c!==0||p!==a){c>=p&&(p=Math.max(p,1),c=p-1);const A=this.getValueSize();this.times=Rr(r,c,p),this.values=Rr(this.values,c*A,p*A)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,a=this.values,c=r.length;c===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let p=null;for(let A=0;A!==c;A++){const N=r[A];if(typeof N=="number"&&isNaN(N)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,A,N),e=!1;break}if(p!==null&&p>N){console.error("THREE.KeyframeTrack: Out of order keys.",this,A,N,p),e=!1;break}p=N}if(a!==void 0&&Or(a))for(let A=0,N=a.length;A!==N;++A){const H=a[A];if(isNaN(H)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,A,H),e=!1;break}}return e}optimize(){const e=Rr(this.times),n=Rr(this.values),r=this.getValueSize(),a=this.getInterpolation()===an,c=e.length-1;let p=1;for(let A=1;A<c;++A){let N=!1;const H=e[A],Z=e[A+1];if(H!==Z&&(A!==1||H!==e[0]))if(a)N=!0;else{const ne=A*r,re=ne-r,le=ne+r;for(let me=0;me!==r;++me){const pe=n[ne+me];if(pe!==n[re+me]||pe!==n[le+me]){N=!0;break}}}if(N){if(A!==p){e[p]=e[A];const ne=A*r,re=p*r;for(let le=0;le!==r;++le)n[re+le]=n[ne+le]}++p}}if(c>0){e[p]=e[c];for(let A=c*r,N=p*r,H=0;H!==r;++H)n[N+H]=n[A+H];++p}return p!==e.length?(this.times=Rr(e,0,p),this.values=Rr(n,0,p*r)):(this.times=e,this.values=n),this}clone(){const e=Rr(this.times,0),n=Rr(this.values,0),r=this.constructor,a=new r(this.name,e,n);return a.createInterpolant=this.createInterpolant,a}}Mc.prototype.TimeBufferType=Float32Array,Mc.prototype.ValueBufferType=Float32Array,Mc.prototype.DefaultInterpolation=Nt;class hf extends Mc{}hf.prototype.ValueTypeName="bool",hf.prototype.ValueBufferType=Array,hf.prototype.DefaultInterpolation=xn,hf.prototype.InterpolantFactoryMethodLinear=void 0,hf.prototype.InterpolantFactoryMethodSmooth=void 0;class Zv extends Mc{}Zv.prototype.ValueTypeName="color";class Ng extends Mc{}Ng.prototype.ValueTypeName="number";class yy extends Ml{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e,n,r,a){const c=this.resultBuffer,p=this.sampleValues,A=this.valueSize,N=(r-n)/(a-n);let H=e*A;for(let Z=H+A;H!==Z;H+=4)Co.slerpFlat(c,0,p,H-A,p,H,N);return c}}class im extends Mc{InterpolantFactoryMethodLinear(e){return new yy(this.times,this.values,this.getValueSize(),e)}}im.prototype.ValueTypeName="quaternion",im.prototype.DefaultInterpolation=Nt,im.prototype.InterpolantFactoryMethodSmooth=void 0;class df extends Mc{}df.prototype.ValueTypeName="string",df.prototype.ValueBufferType=Array,df.prototype.DefaultInterpolation=xn,df.prototype.InterpolantFactoryMethodLinear=void 0,df.prototype.InterpolantFactoryMethodSmooth=void 0;class kg extends Mc{}kg.prototype.ValueTypeName="vector";class Ug{constructor(e,n=-1,r,a=Xi){this.name=e,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=wo(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,a=1/(e.fps||1);for(let p=0,A=r.length;p!==A;++p)n.push(_E(r[p]).scale(a));const c=new this(e.name,e.duration,n,e.blendMode);return c.uuid=e.uuid,c}static toJSON(e){const n=[],r=e.tracks,a={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let c=0,p=r.length;c!==p;++c)n.push(Mc.toJSON(r[c]));return a}static CreateFromMorphTargetSequence(e,n,r,a){const c=n.length,p=[];for(let A=0;A<c;A++){let N=[],H=[];N.push((A+c-1)%c,A,(A+1)%c),H.push(0,1,0);const Z=jo(N);N=Aa(N,1,Z),H=Aa(H,1,Z),!a&&N[0]===0&&(N.push(c),H.push(H[0])),p.push(new Ng(".morphTargetInfluences["+n[A].name+"]",N,H).scale(1/r))}return new this(e,-1,p)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const a=e;r=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<r.length;a++)if(r[a].name===n)return r[a];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const a={},c=/^([\w-]*?)([\d]+)$/;for(let A=0,N=e.length;A<N;A++){const H=e[A],Z=H.name.match(c);if(Z&&Z.length>1){const ne=Z[1];let re=a[ne];re||(a[ne]=re=[]),re.push(H)}}const p=[];for(const A in a)p.push(this.CreateFromMorphTargetSequence(A,a[A],n,r));return p}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(ne,re,le,me,pe){if(le.length!==0){const de=[],Ce=[];va(le,de,Ce,me),de.length!==0&&pe.push(new ne(re,de,Ce))}},a=[],c=e.name||"default",p=e.fps||30,A=e.blendMode;let N=e.length||-1;const H=e.hierarchy||[];for(let ne=0;ne<H.length;ne++){const re=H[ne].keys;if(!(!re||re.length===0))if(re[0].morphTargets){const le={};let me;for(me=0;me<re.length;me++)if(re[me].morphTargets)for(let pe=0;pe<re[me].morphTargets.length;pe++)le[re[me].morphTargets[pe]]=-1;for(const pe in le){const de=[],Ce=[];for(let Fe=0;Fe!==re[me].morphTargets.length;++Fe){const Re=re[me];de.push(Re.time),Ce.push(Re.morphTarget===pe?1:0)}a.push(new Ng(".morphTargetInfluence["+pe+"]",de,Ce))}N=le.length*p}else{const le=".bones["+n[ne].name+"]";r(kg,le+".position",re,"pos",a),r(im,le+".quaternion",re,"rot",a),r(kg,le+".scale",re,"scl",a)}}return a.length===0?null:new this(c,N,a,A)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,a=e.length;r!==a;++r){const c=this.tracks[r];n=Math.max(n,c.times[c.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function bE(x){switch(x.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ng;case"vector":case"vector2":case"vector3":case"vector4":return kg;case"color":return Zv;case"quaternion":return im;case"bool":case"boolean":return hf;case"string":return df}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+x)}function _E(x){if(x.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=bE(x.type);if(x.times===void 0){const n=[],r=[];va(x.keys,n,r,"value"),x.times=n,x.values=r}return e.parse!==void 0?e.parse(x):new e(x.name,x.times,x.values,x.interpolation)}const ff={enabled:!1,files:{},add:function(x,e){this.enabled!==!1&&(this.files[x]=e)},get:function(x){if(this.enabled!==!1)return this.files[x]},remove:function(x){delete this.files[x]},clear:function(){this.files={}}};class $v{constructor(e,n,r){const a=this;let c=!1,p=0,A=0,N;const H=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(Z){A++,c===!1&&a.onStart!==void 0&&a.onStart(Z,p,A),c=!0},this.itemEnd=function(Z){p++,a.onProgress!==void 0&&a.onProgress(Z,p,A),p===A&&(c=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(Z){a.onError!==void 0&&a.onError(Z)},this.resolveURL=function(Z){return N?N(Z):Z},this.setURLModifier=function(Z){return N=Z,this},this.addHandler=function(Z,ne){return H.push(Z,ne),this},this.removeHandler=function(Z){const ne=H.indexOf(Z);return ne!==-1&&H.splice(ne,2),this},this.getHandler=function(Z){for(let ne=0,re=H.length;ne<re;ne+=2){const le=H[ne],me=H[ne+1];if(le.global&&(le.lastIndex=0),le.test(Z))return me}return null}}}const xy=new $v;class Tl{constructor(e){this.manager=e!==void 0?e:xy,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(a,c){r.load(e,a,n,c)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Yu={};class wE extends Error{constructor(e,n){super(e),this.response=n}}class qu extends Tl{constructor(e){super(e)}load(e,n,r,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=ff.get(e);if(c!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(c),this.manager.itemEnd(e)},0),c;if(Yu[e]!==void 0){Yu[e].push({onLoad:n,onProgress:r,onError:a});return}Yu[e]=[],Yu[e].push({onLoad:n,onProgress:r,onError:a});const p=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),A=this.mimeType,N=this.responseType;fetch(p).then(H=>{if(H.status===200||H.status===0){if(H.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||H.body===void 0||H.body.getReader===void 0)return H;const Z=Yu[e],ne=H.body.getReader(),re=H.headers.get("Content-Length")||H.headers.get("X-File-Size"),le=re?parseInt(re):0,me=le!==0;let pe=0;const de=new ReadableStream({start(Ce){Fe();function Fe(){ne.read().then(({done:Re,value:De})=>{if(Re)Ce.close();else{pe+=De.byteLength;const Ve=new ProgressEvent("progress",{lengthComputable:me,loaded:pe,total:le});for(let ct=0,bt=Z.length;ct<bt;ct++){const Ne=Z[ct];Ne.onProgress&&Ne.onProgress(Ve)}Ce.enqueue(De),Fe()}})}}});return new Response(de)}else throw new wE(`fetch for "${H.url}" responded with ${H.status}: ${H.statusText}`,H)}).then(H=>{switch(N){case"arraybuffer":return H.arrayBuffer();case"blob":return H.blob();case"document":return H.text().then(Z=>new DOMParser().parseFromString(Z,A));case"json":return H.json();default:if(A===void 0)return H.text();{const ne=/charset="?([^;"\s]*)"?/i.exec(A),re=ne&&ne[1]?ne[1].toLowerCase():void 0,le=new TextDecoder(re);return H.arrayBuffer().then(me=>le.decode(me))}}}).then(H=>{ff.add(e,H);const Z=Yu[e];delete Yu[e];for(let ne=0,re=Z.length;ne<re;ne++){const le=Z[ne];le.onLoad&&le.onLoad(H)}}).catch(H=>{const Z=Yu[e];if(Z===void 0)throw this.manager.itemError(e),H;delete Yu[e];for(let ne=0,re=Z.length;ne<re;ne++){const le=Z[ne];le.onError&&le.onError(H)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class CE extends Tl{constructor(e){super(e)}load(e,n,r,a){const c=this,p=new qu(this.manager);p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(e,function(A){try{n(c.parse(JSON.parse(A)))}catch(N){a?a(N):console.error(N),c.manager.itemError(e)}},r,a)}parse(e){const n=[];for(let r=0;r<e.length;r++){const a=Ug.parse(e[r]);n.push(a)}return n}}class ME extends Tl{constructor(e){super(e)}load(e,n,r,a){const c=this,p=[],A=new it,N=new qu(this.manager);N.setPath(this.path),N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setWithCredentials(c.withCredentials);let H=0;function Z(ne){N.load(e[ne],function(re){const le=c.parse(re,!0);p[ne]={width:le.width,height:le.height,format:le.format,mipmaps:le.mipmaps},H+=1,H===6&&(le.mipmapCount===1&&(A.minFilter=Ke),A.image=p,A.format=le.format,A.needsUpdate=!0,n&&n(A))},r,a)}if(Array.isArray(e))for(let ne=0,re=e.length;ne<re;++ne)Z(ne);else N.load(e,function(ne){const re=c.parse(ne,!0);if(re.isCubemap){const le=re.mipmaps.length/re.mipmapCount;for(let me=0;me<le;me++){p[me]={mipmaps:[]};for(let pe=0;pe<re.mipmapCount;pe++)p[me].mipmaps.push(re.mipmaps[me*re.mipmapCount+pe]),p[me].format=re.format,p[me].width=re.width,p[me].height=re.height}A.image=p}else A.image.width=re.width,A.image.height=re.height,A.mipmaps=re.mipmaps;re.mipmapCount===1&&(A.minFilter=Ke),A.format=re.format,A.needsUpdate=!0,n&&n(A)},r,a);return A}}class Gg extends Tl{constructor(e){super(e)}load(e,n,r,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,p=ff.get(e);if(p!==void 0)return c.manager.itemStart(e),setTimeout(function(){n&&n(p),c.manager.itemEnd(e)},0),p;const A=Pl("img");function N(){Z(),ff.add(e,this),n&&n(this),c.manager.itemEnd(e)}function H(ne){Z(),a&&a(ne),c.manager.itemError(e),c.manager.itemEnd(e)}function Z(){A.removeEventListener("load",N,!1),A.removeEventListener("error",H,!1)}return A.addEventListener("load",N,!1),A.addEventListener("error",H,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(A.crossOrigin=this.crossOrigin),c.manager.itemStart(e),A.src=e,A}}class TE extends Tl{constructor(e){super(e)}load(e,n,r,a){const c=new zc,p=new Gg(this.manager);p.setCrossOrigin(this.crossOrigin),p.setPath(this.path);let A=0;function N(H){p.load(e[H],function(Z){c.images[H]=Z,A++,A===6&&(c.needsUpdate=!0,n&&n(c))},void 0,a)}for(let H=0;H<e.length;++H)N(H);return c}}class SE extends Tl{constructor(e){super(e)}load(e,n,r,a){const c=this,p=new Hh,A=new qu(this.manager);return A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(c.withCredentials),A.load(e,function(N){const H=c.parse(N);!H||(H.image!==void 0?p.image=H.image:H.data!==void 0&&(p.image.width=H.width,p.image.height=H.height,p.image.data=H.data),p.wrapS=H.wrapS!==void 0?H.wrapS:Oe,p.wrapT=H.wrapT!==void 0?H.wrapT:Oe,p.magFilter=H.magFilter!==void 0?H.magFilter:Ke,p.minFilter=H.minFilter!==void 0?H.minFilter:Ke,p.anisotropy=H.anisotropy!==void 0?H.anisotropy:1,H.encoding!==void 0&&(p.encoding=H.encoding),H.flipY!==void 0&&(p.flipY=H.flipY),H.format!==void 0&&(p.format=H.format),H.type!==void 0&&(p.type=H.type),H.mipmaps!==void 0&&(p.mipmaps=H.mipmaps,p.minFilter=$t),H.mipmapCount===1&&(p.minFilter=Ke),H.generateMipmaps!==void 0&&(p.generateMipmaps=H.generateMipmaps),p.needsUpdate=!0,n&&n(p,H))},r,a),p}}class IE extends Tl{constructor(e){super(e)}load(e,n,r,a){const c=new js,p=new Gg(this.manager);return p.setCrossOrigin(this.crossOrigin),p.setPath(this.path),p.load(e,function(A){c.image=A,c.needsUpdate=!0,n!==void 0&&n(c)},r,a),c}}class jh extends hs{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Si(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Ey extends jh{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(hs.DefaultUp),this.updateMatrix(),this.groundColor=new Si(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const e1=new Gi,by=new nt,_y=new nt;class t1{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new On(512,512),this.map=null,this.mapPass=null,this.matrix=new Gi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ul,this._frameExtents=new On(1,1),this._viewportCount=1,this._viewports=[new Zr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;by.setFromMatrixPosition(e.matrixWorld),n.position.copy(by),_y.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(_y),n.updateMatrixWorld(),e1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(e1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(e1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class RE extends t1{constructor(){super(new Ao(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Dc*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,c=e.distance||n.far;(r!==n.fov||a!==n.aspect||c!==n.far)&&(n.fov=r,n.aspect=a,n.far=c,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class wy extends jh{constructor(e,n,r=0,a=Math.PI/3,c=0,p=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hs.DefaultUp),this.updateMatrix(),this.target=new hs,this.distance=r,this.angle=a,this.penumbra=c,this.decay=p,this.map=null,this.shadow=new RE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Cy=new Gi,Hg=new nt,n1=new nt;class BE extends t1{constructor(){super(new Ao(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new On(4,2),this._viewportCount=6,this._viewports=[new Zr(2,1,1,1),new Zr(0,1,1,1),new Zr(3,1,1,1),new Zr(1,1,1,1),new Zr(3,0,1,1),new Zr(1,0,1,1)],this._cubeDirections=[new nt(1,0,0),new nt(-1,0,0),new nt(0,0,1),new nt(0,0,-1),new nt(0,1,0),new nt(0,-1,0)],this._cubeUps=[new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,0,1),new nt(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,a=this.matrix,c=e.distance||r.far;c!==r.far&&(r.far=c,r.updateProjectionMatrix()),Hg.setFromMatrixPosition(e.matrixWorld),r.position.copy(Hg),n1.copy(r.position),n1.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(n1),r.updateMatrixWorld(),a.makeTranslation(-Hg.x,-Hg.y,-Hg.z),Cy.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Cy)}}class My extends jh{constructor(e,n,r=0,a=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=a,this.shadow=new BE}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class LE extends t1{constructor(){super(new Su(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ty extends jh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hs.DefaultUp),this.updateMatrix(),this.target=new hs,this.shadow=new LE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Sy extends jh{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Iy extends jh{constructor(e,n,r=10,a=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Ry{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new nt)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,a=e.y,c=e.z,p=this.coefficients;return n.copy(p[0]).multiplyScalar(.282095),n.addScaledVector(p[1],.488603*a),n.addScaledVector(p[2],.488603*c),n.addScaledVector(p[3],.488603*r),n.addScaledVector(p[4],1.092548*(r*a)),n.addScaledVector(p[5],1.092548*(a*c)),n.addScaledVector(p[6],.315392*(3*c*c-1)),n.addScaledVector(p[7],1.092548*(r*c)),n.addScaledVector(p[8],.546274*(r*r-a*a)),n}getIrradianceAt(e,n){const r=e.x,a=e.y,c=e.z,p=this.coefficients;return n.copy(p[0]).multiplyScalar(.886227),n.addScaledVector(p[1],1.023328*a),n.addScaledVector(p[2],1.023328*c),n.addScaledVector(p[3],1.023328*r),n.addScaledVector(p[4],.858086*r*a),n.addScaledVector(p[5],.858086*a*c),n.addScaledVector(p[6],.743125*c*c-.247708),n.addScaledVector(p[7],.858086*r*c),n.addScaledVector(p[8],.429043*(r*r-a*a)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let a=0;a<9;a++)r[a].fromArray(e,n+a*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let a=0;a<9;a++)r[a].toArray(e,n+a*3);return e}static getBasisAt(e,n){const r=e.x,a=e.y,c=e.z;n[0]=.282095,n[1]=.488603*a,n[2]=.488603*c,n[3]=.488603*r,n[4]=1.092548*r*a,n[5]=1.092548*a*c,n[6]=.315392*(3*c*c-1),n[7]=1.092548*r*c,n[8]=.546274*(r*r-a*a)}}class gA extends jh{constructor(e=new Ry,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class AA extends Tl{constructor(e){super(e),this.textures={}}load(e,n,r,a){const c=this,p=new qu(c.manager);p.setPath(c.path),p.setRequestHeader(c.requestHeader),p.setWithCredentials(c.withCredentials),p.load(e,function(A){try{n(c.parse(JSON.parse(A)))}catch(N){a?a(N):console.error(N),c.manager.itemError(e)}},r,a)}parse(e){const n=this.textures;function r(c){return n[c]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",c),n[c]}const a=AA.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Si().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==1&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const c in e.uniforms){const p=e.uniforms[c];switch(a.uniforms[c]={},p.type){case"t":a.uniforms[c].value=r(p.value);break;case"c":a.uniforms[c].value=new Si().setHex(p.value);break;case"v2":a.uniforms[c].value=new On().fromArray(p.value);break;case"v3":a.uniforms[c].value=new nt().fromArray(p.value);break;case"v4":a.uniforms[c].value=new Zr().fromArray(p.value);break;case"m3":a.uniforms[c].value=new Fo().fromArray(p.value);break;case"m4":a.uniforms[c].value=new Gi().fromArray(p.value);break;default:a.uniforms[c].value=p.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const c in e.extensions)a.extensions[c]=e.extensions[c];if(e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=r(e.map)),e.matcap!==void 0&&(a.matcap=r(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let c=e.normalScale;Array.isArray(c)===!1&&(c=[c,c]),a.normalScale=new On().fromArray(c)}return e.displacementMap!==void 0&&(a.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new On().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=r(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:lf,SpriteMaterial:Wp,RawShaderMaterial:su,ShaderMaterial:ea,PointsMaterial:$,MeshPhysicalMaterial:em,MeshStandardMaterial:Qh,MeshPhongMaterial:tm,MeshToonMaterial:nm,MeshNormalMaterial:Ku,MeshLambertMaterial:cf,MeshDepthMaterial:bg,MeshDistanceMaterial:_g,MeshBasicMaterial:lo,MeshMatcapMaterial:cn,LineDashedMaterial:ds,LineBasicMaterial:ga,Material:Zo};return new n[e]}}class i1{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class By extends Pr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Ly extends Tl{constructor(e){super(e)}load(e,n,r,a){const c=this,p=new qu(c.manager);p.setPath(c.path),p.setRequestHeader(c.requestHeader),p.setWithCredentials(c.withCredentials),p.load(e,function(A){try{n(c.parse(JSON.parse(A)))}catch(N){a?a(N):console.error(N),c.manager.itemError(e)}},r,a)}parse(e){const n={},r={};function a(le,me){if(n[me]!==void 0)return n[me];const de=le.interleavedBuffers[me],Ce=c(le,de.buffer),Fe=nc(de.type,Ce),Re=new jp(Fe,de.stride);return Re.uuid=de.uuid,n[me]=Re,Re}function c(le,me){if(r[me]!==void 0)return r[me];const de=le.arrayBuffers[me],Ce=new Uint32Array(de).buffer;return r[me]=Ce,Ce}const p=e.isInstancedBufferGeometry?new By:new Pr,A=e.data.index;if(A!==void 0){const le=nc(A.type,A.array);p.setIndex(new Is(le,1))}const N=e.data.attributes;for(const le in N){const me=N[le];let pe;if(me.isInterleavedBufferAttribute){const de=a(e.data,me.data);pe=new Uu(de,me.itemSize,me.offset,me.normalized)}else{const de=nc(me.type,me.array),Ce=me.isInstancedBufferAttribute?wc:Is;pe=new Ce(de,me.itemSize,me.normalized)}me.name!==void 0&&(pe.name=me.name),me.usage!==void 0&&pe.setUsage(me.usage),me.updateRange!==void 0&&(pe.updateRange.offset=me.updateRange.offset,pe.updateRange.count=me.updateRange.count),p.setAttribute(le,pe)}const H=e.data.morphAttributes;if(H)for(const le in H){const me=H[le],pe=[];for(let de=0,Ce=me.length;de<Ce;de++){const Fe=me[de];let Re;if(Fe.isInterleavedBufferAttribute){const De=a(e.data,Fe.data);Re=new Uu(De,Fe.itemSize,Fe.offset,Fe.normalized)}else{const De=nc(Fe.type,Fe.array);Re=new Is(De,Fe.itemSize,Fe.normalized)}Fe.name!==void 0&&(Re.name=Fe.name),pe.push(Re)}p.morphAttributes[le]=pe}e.data.morphTargetsRelative&&(p.morphTargetsRelative=!0);const ne=e.data.groups||e.data.drawcalls||e.data.offsets;if(ne!==void 0)for(let le=0,me=ne.length;le!==me;++le){const pe=ne[le];p.addGroup(pe.start,pe.count,pe.materialIndex)}const re=e.data.boundingSphere;if(re!==void 0){const le=new nt;re.center!==void 0&&le.fromArray(re.center),p.boundingSphere=new qo(le,re.radius)}return e.name&&(p.name=e.name),e.userData&&(p.userData=e.userData),p}}class DE extends Tl{constructor(e){super(e)}load(e,n,r,a){const c=this,p=this.path===""?i1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||p;const A=new qu(this.manager);A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(N){let H=null;try{H=JSON.parse(N)}catch(ne){a!==void 0&&a(ne),console.error("THREE:ObjectLoader: Can't parse "+e+".",ne.message);return}const Z=H.metadata;if(Z===void 0||Z.type===void 0||Z.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}c.parse(H,n)},r,a)}async loadAsync(e,n){const r=this,a=this.path===""?i1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const c=new qu(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials);const p=await c.loadAsync(e,n),A=JSON.parse(p),N=A.metadata;if(N===void 0||N.type===void 0||N.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(A)}parse(e,n){const r=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),c=this.parseGeometries(e.geometries,a),p=this.parseImages(e.images,function(){n!==void 0&&n(H)}),A=this.parseTextures(e.textures,p),N=this.parseMaterials(e.materials,A),H=this.parseObject(e.object,c,N,A,r),Z=this.parseSkeletons(e.skeletons,H);if(this.bindSkeletons(H,Z),n!==void 0){let ne=!1;for(const re in p)if(p[re].data instanceof HTMLImageElement){ne=!0;break}ne===!1&&n(H)}return H}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),c=await this.parseImagesAsync(e.images),p=this.parseTextures(e.textures,c),A=this.parseMaterials(e.materials,p),N=this.parseObject(e.object,a,A,p,n),H=this.parseSkeletons(e.skeletons,N);return this.bindSkeletons(N,H),N}parseShapes(e){const n={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const c=new $a().fromJSON(e[r]);n[c.uuid]=c}return n}parseSkeletons(e,n){const r={},a={};if(n.traverse(function(c){c.isBone&&(a[c.uuid]=c)}),e!==void 0)for(let c=0,p=e.length;c<p;c++){const A=new of().fromJSON(e[c],a);r[A.uuid]=A}return r}parseGeometries(e,n){const r={};if(e!==void 0){const c=new Ly;for(let p=0,A=e.length;p<A;p++){let N;const H=e[p];switch(H.type){case"BufferGeometry":case"InstancedBufferGeometry":N=c.parse(H);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var a=new THREE.LegacyJSONLoader;N=a.parse(H,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:H.type in af?N=af[H.type].fromJSON(H,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${H.type}"`)}N.uuid=H.uuid,H.name!==void 0&&(N.name=H.name),N.isBufferGeometry===!0&&H.userData!==void 0&&(N.userData=H.userData),r[H.uuid]=N}}return r}parseMaterials(e,n){const r={},a={};if(e!==void 0){const c=new AA;c.setTextures(n);for(let p=0,A=e.length;p<A;p++){const N=e[p];r[N.uuid]===void 0&&(r[N.uuid]=c.parse(N)),a[N.uuid]=r[N.uuid]}}return a}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const a=e[r],c=Ug.parse(a);n[c.uuid]=c}return n}parseImages(e,n){const r=this,a={};let c;function p(N){return r.manager.itemStart(N),c.load(N,function(){r.manager.itemEnd(N)},void 0,function(){r.manager.itemError(N),r.manager.itemEnd(N)})}function A(N){if(typeof N=="string"){const H=N,Z=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(H)?H:r.resourcePath+H;return p(Z)}else return N.data?{data:nc(N.type,N.data),width:N.width,height:N.height}:null}if(e!==void 0&&e.length>0){const N=new $v(n);c=new Gg(N),c.setCrossOrigin(this.crossOrigin);for(let H=0,Z=e.length;H<Z;H++){const ne=e[H],re=ne.url;if(Array.isArray(re)){const le=[];for(let me=0,pe=re.length;me<pe;me++){const de=re[me],Ce=A(de);Ce!==null&&(Ce instanceof HTMLImageElement?le.push(Ce):le.push(new Hh(Ce.data,Ce.width,Ce.height)))}a[ne.uuid]=new Da(le)}else{const le=A(ne.url);a[ne.uuid]=new Da(le)}}}return a}async parseImagesAsync(e){const n=this,r={};let a;async function c(p){if(typeof p=="string"){const A=p,N=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(A)?A:n.resourcePath+A;return await a.loadAsync(N)}else return p.data?{data:nc(p.type,p.data),width:p.width,height:p.height}:null}if(e!==void 0&&e.length>0){a=new Gg(this.manager),a.setCrossOrigin(this.crossOrigin);for(let p=0,A=e.length;p<A;p++){const N=e[p],H=N.url;if(Array.isArray(H)){const Z=[];for(let ne=0,re=H.length;ne<re;ne++){const le=H[ne],me=await c(le);me!==null&&(me instanceof HTMLImageElement?Z.push(me):Z.push(new Hh(me.data,me.width,me.height)))}r[N.uuid]=new Da(Z)}else{const Z=await c(N.url);r[N.uuid]=new Da(Z)}}}return r}parseTextures(e,n){function r(c,p){return typeof c=="number"?c:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",c),p[c])}const a={};if(e!==void 0)for(let c=0,p=e.length;c<p;c++){const A=e[c];A.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',A.uuid),n[A.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",A.image);const N=n[A.image],H=N.data;let Z;Array.isArray(H)?(Z=new zc,H.length===6&&(Z.needsUpdate=!0)):(H&&H.data?Z=new Hh:Z=new js,H&&(Z.needsUpdate=!0)),Z.source=N,Z.uuid=A.uuid,A.name!==void 0&&(Z.name=A.name),A.mapping!==void 0&&(Z.mapping=r(A.mapping,PE)),A.offset!==void 0&&Z.offset.fromArray(A.offset),A.repeat!==void 0&&Z.repeat.fromArray(A.repeat),A.center!==void 0&&Z.center.fromArray(A.center),A.rotation!==void 0&&(Z.rotation=A.rotation),A.wrap!==void 0&&(Z.wrapS=r(A.wrap[0],Dy),Z.wrapT=r(A.wrap[1],Dy)),A.format!==void 0&&(Z.format=A.format),A.type!==void 0&&(Z.type=A.type),A.encoding!==void 0&&(Z.encoding=A.encoding),A.minFilter!==void 0&&(Z.minFilter=r(A.minFilter,Py)),A.magFilter!==void 0&&(Z.magFilter=r(A.magFilter,Py)),A.anisotropy!==void 0&&(Z.anisotropy=A.anisotropy),A.flipY!==void 0&&(Z.flipY=A.flipY),A.premultiplyAlpha!==void 0&&(Z.premultiplyAlpha=A.premultiplyAlpha),A.unpackAlignment!==void 0&&(Z.unpackAlignment=A.unpackAlignment),A.userData!==void 0&&(Z.userData=A.userData),a[A.uuid]=Z}return a}parseObject(e,n,r,a,c){let p;function A(re){return n[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",re),n[re]}function N(re){if(re!==void 0){if(Array.isArray(re)){const le=[];for(let me=0,pe=re.length;me<pe;me++){const de=re[me];r[de]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",de),le.push(r[de])}return le}return r[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",re),r[re]}}function H(re){return a[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",re),a[re]}let Z,ne;switch(e.type){case"Scene":p=new Bg,e.background!==void 0&&(Number.isInteger(e.background)?p.background=new Si(e.background):p.background=H(e.background)),e.environment!==void 0&&(p.environment=H(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?p.fog=new qd(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(p.fog=new Qp(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":p=new Ao(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(p.focus=e.focus),e.zoom!==void 0&&(p.zoom=e.zoom),e.filmGauge!==void 0&&(p.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(p.filmOffset=e.filmOffset),e.view!==void 0&&(p.view=Object.assign({},e.view));break;case"OrthographicCamera":p=new Su(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(p.zoom=e.zoom),e.view!==void 0&&(p.view=Object.assign({},e.view));break;case"AmbientLight":p=new Sy(e.color,e.intensity);break;case"DirectionalLight":p=new Ty(e.color,e.intensity);break;case"PointLight":p=new My(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":p=new Iy(e.color,e.intensity,e.width,e.height);break;case"SpotLight":p=new wy(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":p=new Ey(e.color,e.groundColor,e.intensity);break;case"LightProbe":p=new gA().fromJSON(e);break;case"SkinnedMesh":Z=A(e.geometry),ne=N(e.material),p=new xl(Z,ne),e.bindMode!==void 0&&(p.bindMode=e.bindMode),e.bindMatrix!==void 0&&p.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(p.skeleton=e.skeleton);break;case"Mesh":Z=A(e.geometry),ne=N(e.material),p=new $s(Z,ne);break;case"InstancedMesh":Z=A(e.geometry),ne=N(e.material);const re=e.count,le=e.instanceMatrix,me=e.instanceColor;p=new hA(Z,ne,re),p.instanceMatrix=new wc(new Float32Array(le.array),16),me!==void 0&&(p.instanceColor=new wc(new Float32Array(me.array),me.itemSize));break;case"LOD":p=new cA;break;case"Line":p=new f(A(e.geometry),N(e.material));break;case"LineLoop":p=new G(A(e.geometry),N(e.material));break;case"LineSegments":p=new D(A(e.geometry),N(e.material));break;case"PointCloud":case"Points":p=new we(A(e.geometry),N(e.material));break;case"Sprite":p=new aA(N(e.material));break;case"Group":p=new Wl;break;case"Bone":p=new _c;break;default:p=new hs}if(p.uuid=e.uuid,e.name!==void 0&&(p.name=e.name),e.matrix!==void 0?(p.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(p.matrixAutoUpdate=e.matrixAutoUpdate),p.matrixAutoUpdate&&p.matrix.decompose(p.position,p.quaternion,p.scale)):(e.position!==void 0&&p.position.fromArray(e.position),e.rotation!==void 0&&p.rotation.fromArray(e.rotation),e.quaternion!==void 0&&p.quaternion.fromArray(e.quaternion),e.scale!==void 0&&p.scale.fromArray(e.scale)),e.castShadow!==void 0&&(p.castShadow=e.castShadow),e.receiveShadow!==void 0&&(p.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(p.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(p.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(p.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&p.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(p.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(p.visible=e.visible),e.frustumCulled!==void 0&&(p.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(p.renderOrder=e.renderOrder),e.userData!==void 0&&(p.userData=e.userData),e.layers!==void 0&&(p.layers.mask=e.layers),e.children!==void 0){const re=e.children;for(let le=0;le<re.length;le++)p.add(this.parseObject(re[le],n,r,a,c))}if(e.animations!==void 0){const re=e.animations;for(let le=0;le<re.length;le++){const me=re[le];p.animations.push(c[me])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(p.autoUpdate=e.autoUpdate);const re=e.levels;for(let le=0;le<re.length;le++){const me=re[le],pe=p.getObjectByProperty("uuid",me.object);pe!==void 0&&p.addLevel(pe,me.distance,me.hysteresis)}}return p}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const a=n[r.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(a,r.bindMatrix)}})}}const PE={UVMapping:Pe,CubeReflectionMapping:Ye,CubeRefractionMapping:ze,EquirectangularReflectionMapping:He,EquirectangularRefractionMapping:et,CubeUVReflectionMapping:Me},Dy={RepeatWrapping:Te,ClampToEdgeWrapping:Oe,MirroredRepeatWrapping:Ze},Py={NearestFilter:ae,NearestMipmapNearestFilter:ee,NearestMipmapLinearFilter:Ie,LinearFilter:Ke,LinearMipmapNearestFilter:$e,LinearMipmapLinearFilter:$t};class OE extends Tl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,p=ff.get(e);if(p!==void 0)return c.manager.itemStart(e),setTimeout(function(){n&&n(p),c.manager.itemEnd(e)},0),p;const A={};A.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",A.headers=this.requestHeader,fetch(e,A).then(function(N){return N.blob()}).then(function(N){return createImageBitmap(N,Object.assign(c.options,{colorSpaceConversion:"none"}))}).then(function(N){ff.add(e,N),n&&n(N),c.manager.itemEnd(e)}).catch(function(N){a&&a(N),c.manager.itemError(e),c.manager.itemEnd(e)}),c.manager.itemStart(e)}}let vA;class r1{static getContext(){return vA===void 0&&(vA=new(window.AudioContext||window.webkitAudioContext)),vA}static setContext(e){vA=e}}class FE extends Tl{constructor(e){super(e)}load(e,n,r,a){const c=this,p=new qu(this.manager);p.setResponseType("arraybuffer"),p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(e,function(A){try{const N=A.slice(0);r1.getContext().decodeAudioData(N,function(Z){n(Z)})}catch(N){a?a(N):console.error(N),c.manager.itemError(e)}},r,a)}}class NE extends gA{constructor(e,n,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const a=new Si().set(e),c=new Si().set(n),p=new nt(a.r,a.g,a.b),A=new nt(c.r,c.g,c.b),N=Math.sqrt(Math.PI),H=N*Math.sqrt(.75);this.sh.coefficients[0].copy(p).add(A).multiplyScalar(N),this.sh.coefficients[1].copy(p).sub(A).multiplyScalar(H)}}class kE extends gA{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const r=new Si().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Oy=new Gi,Fy=new Gi,pf=new Gi;class UE{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ao,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ao,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,pf.copy(e.projectionMatrix);const a=n.eyeSep/2,c=a*n.near/n.focus,p=n.near*Math.tan(sl*n.fov*.5)/n.zoom;let A,N;Fy.elements[12]=-a,Oy.elements[12]=a,A=-p*n.aspect+c,N=p*n.aspect+c,pf.elements[0]=2*n.near/(N-A),pf.elements[8]=(N+A)/(N-A),this.cameraL.projectionMatrix.copy(pf),A=-p*n.aspect-c,N=p*n.aspect-c,pf.elements[0]=2*n.near/(N-A),pf.elements[8]=(N+A)/(N-A),this.cameraR.projectionMatrix.copy(pf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Fy),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Oy)}}class Ny{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ky(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=ky();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function ky(){return(typeof performance>"u"?Date:performance).now()}const mf=new nt,Uy=new Co,GE=new nt,gf=new nt;class HE extends hs{constructor(){super(),this.type="AudioListener",this.context=r1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Ny}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(mf,Uy,GE),gf.set(0,0,-1).applyQuaternion(Uy),n.positionX){const a=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(mf.x,a),n.positionY.linearRampToValueAtTime(mf.y,a),n.positionZ.linearRampToValueAtTime(mf.z,a),n.forwardX.linearRampToValueAtTime(gf.x,a),n.forwardY.linearRampToValueAtTime(gf.y,a),n.forwardZ.linearRampToValueAtTime(gf.z,a),n.upX.linearRampToValueAtTime(r.x,a),n.upY.linearRampToValueAtTime(r.y,a),n.upZ.linearRampToValueAtTime(r.z,a)}else n.setPosition(mf.x,mf.y,mf.z),n.setOrientation(gf.x,gf.y,gf.z,r.x,r.y,r.z)}}class Gy extends hs{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Af=new nt,Hy=new Co,zE=new nt,vf=new nt;class VE extends Gy{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Af,Hy,zE),vf.set(0,0,1).applyQuaternion(Hy);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Af.x,r),n.positionY.linearRampToValueAtTime(Af.y,r),n.positionZ.linearRampToValueAtTime(Af.z,r),n.orientationX.linearRampToValueAtTime(vf.x,r),n.orientationY.linearRampToValueAtTime(vf.y,r),n.orientationZ.linearRampToValueAtTime(vf.z,r)}else n.setPosition(Af.x,Af.y,Af.z),n.setOrientation(vf.x,vf.y,vf.z)}}class QE{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class zy{constructor(e,n,r){this.binding=e,this.valueSize=r;let a,c,p;switch(n){case"quaternion":a=this._slerp,c=this._slerpAdditive,p=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":a=this._select,c=this._select,p=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:a=this._lerp,c=this._lerpAdditive,p=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=c,this._setIdentity=p,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,a=this.valueSize,c=e*a+a;let p=this.cumulativeWeight;if(p===0){for(let A=0;A!==a;++A)r[c+A]=r[A];p=n}else{p+=n;const A=n/p;this._mixBufferRegion(r,c,0,A,a)}this.cumulativeWeight=p}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,a=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,a,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,a=e*n+n,c=this.cumulativeWeight,p=this.cumulativeWeightAdditive,A=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1){const N=n*this._origIndex;this._mixBufferRegion(r,a,N,1-c,n)}p>0&&this._mixBufferRegionAdditive(r,a,this._addIndex*n,1,n);for(let N=n,H=n+n;N!==H;++N)if(r[N]!==r[N+n]){A.setValue(r,a);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,a=r*this._origIndex;e.getValue(n,a);for(let c=r,p=a;c!==p;++c)n[c]=n[a+c%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,a,c){if(a>=.5)for(let p=0;p!==c;++p)e[n+p]=e[r+p]}_slerp(e,n,r,a){Co.slerpFlat(e,n,e,n,e,r,a)}_slerpAdditive(e,n,r,a,c){const p=this._workIndex*c;Co.multiplyQuaternionsFlat(e,p,e,n,e,r),Co.slerpFlat(e,n,e,n,e,p,a)}_lerp(e,n,r,a,c){const p=1-a;for(let A=0;A!==c;++A){const N=n+A;e[N]=e[N]*p+e[r+A]*a}}_lerpAdditive(e,n,r,a,c){for(let p=0;p!==c;++p){const A=n+p;e[A]=e[A]+e[r+p]*a}}}const s1="\\[\\]\\.:\\/",jE=new RegExp("["+s1+"]","g"),o1="[^"+s1+"]",WE="[^"+s1.replace("\\.","")+"]",KE=/((?:WC+[\/:])*)/.source.replace("WC",o1),XE=/(WCOD+)?/.source.replace("WCOD",WE),YE=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",o1),qE=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",o1),JE=new RegExp("^"+KE+XE+YE+qE+"$"),ZE=["material","materials","bones","map"];class $E{constructor(e,n,r){const a=r||ws.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,a)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,a=this._bindings[r];a!==void 0&&a.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let a=this._targetGroup.nCachedObjects_,c=r.length;a!==c;++a)r[a].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class ws{constructor(e,n,r){this.path=n,this.parsedPath=r||ws.parseTrackName(n),this.node=ws.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new ws.Composite(e,n,r):new ws(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jE,"")}static parseTrackName(e){const n=JE.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},a=r.nodeName&&r.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const c=r.nodeName.substring(a+1);ZE.indexOf(c)!==-1&&(r.nodeName=r.nodeName.substring(0,a),r.objectName=c)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(c){for(let p=0;p<c.length;p++){const A=c[p];if(A.name===n||A.uuid===n)return A;const N=r(A.children);if(N)return N}return null},a=r(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let a=0,c=r.length;a!==c;++a)e[n++]=r[a]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let a=0,c=r.length;a!==c;++a)r[a]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let a=0,c=r.length;a!==c;++a)r[a]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let a=0,c=r.length;a!==c;++a)r[a]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,a=n.propertyName;let c=n.propertyIndex;if(e||(e=ws.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let H=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let Z=0;Z<e.length;Z++)if(e[Z].name===H){H=Z;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(H!==void 0){if(e[H]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[H]}}const p=e[a];if(p===void 0){const H=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+H+"."+a+" but it wasn't found.",e);return}let A=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?A=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(A=this.Versioning.MatrixWorldNeedsUpdate);let N=this.BindingType.Direct;if(c!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[c]!==void 0&&(c=e.morphTargetDictionary[c])}N=this.BindingType.ArrayElement,this.resolvedProperty=p,this.propertyIndex=c}else p.fromArray!==void 0&&p.toArray!==void 0?(N=this.BindingType.HasFromToArray,this.resolvedProperty=p):Array.isArray(p)?(N=this.BindingType.EntireArray,this.resolvedProperty=p):this.propertyName=a;this.getValue=this.GetterByBindingType[N],this.setValue=this.SetterByBindingTypeAndVersioning[N][A]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ws.Composite=$E,ws.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ws.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ws.prototype.GetterByBindingType=[ws.prototype._getValue_direct,ws.prototype._getValue_array,ws.prototype._getValue_arrayElement,ws.prototype._getValue_toArray],ws.prototype.SetterByBindingTypeAndVersioning=[[ws.prototype._setValue_direct,ws.prototype._setValue_direct_setNeedsUpdate,ws.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ws.prototype._setValue_array,ws.prototype._setValue_array_setNeedsUpdate,ws.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ws.prototype._setValue_arrayElement,ws.prototype._setValue_arrayElement_setNeedsUpdate,ws.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ws.prototype._setValue_fromArray,ws.prototype._setValue_fromArray_setNeedsUpdate,ws.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class eb{constructor(){this.isAnimationObjectGroup=!0,this.uuid=wo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,a=arguments.length;r!==a;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,c=this._bindings,p=c.length;let A,N=e.length,H=this.nCachedObjects_;for(let Z=0,ne=arguments.length;Z!==ne;++Z){const re=arguments[Z],le=re.uuid;let me=n[le];if(me===void 0){me=N++,n[le]=me,e.push(re);for(let pe=0,de=p;pe!==de;++pe)c[pe].push(new ws(re,r[pe],a[pe]))}else if(me<H){A=e[me];const pe=--H,de=e[pe];n[de.uuid]=me,e[me]=de,n[le]=pe,e[pe]=re;for(let Ce=0,Fe=p;Ce!==Fe;++Ce){const Re=c[Ce],De=Re[pe];let Ve=Re[me];Re[me]=De,Ve===void 0&&(Ve=new ws(re,r[Ce],a[Ce])),Re[pe]=Ve}}else e[me]!==A&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=H}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,a=r.length;let c=this.nCachedObjects_;for(let p=0,A=arguments.length;p!==A;++p){const N=arguments[p],H=N.uuid,Z=n[H];if(Z!==void 0&&Z>=c){const ne=c++,re=e[ne];n[re.uuid]=Z,e[Z]=re,n[H]=ne,e[ne]=N;for(let le=0,me=a;le!==me;++le){const pe=r[le],de=pe[ne],Ce=pe[Z];pe[Z]=de,pe[ne]=Ce}}}this.nCachedObjects_=c}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,a=r.length;let c=this.nCachedObjects_,p=e.length;for(let A=0,N=arguments.length;A!==N;++A){const H=arguments[A],Z=H.uuid,ne=n[Z];if(ne!==void 0)if(delete n[Z],ne<c){const re=--c,le=e[re],me=--p,pe=e[me];n[le.uuid]=ne,e[ne]=le,n[pe.uuid]=re,e[re]=pe,e.pop();for(let de=0,Ce=a;de!==Ce;++de){const Fe=r[de],Re=Fe[re],De=Fe[me];Fe[ne]=Re,Fe[re]=De,Fe.pop()}}else{const re=--p,le=e[re];re>0&&(n[le.uuid]=ne),e[ne]=le,e.pop();for(let me=0,pe=a;me!==pe;++me){const de=r[me];de[ne]=de[re],de.pop()}}}this.nCachedObjects_=c}subscribe_(e,n){const r=this._bindingsIndicesByPath;let a=r[e];const c=this._bindings;if(a!==void 0)return c[a];const p=this._paths,A=this._parsedPaths,N=this._objects,H=N.length,Z=this.nCachedObjects_,ne=new Array(H);a=c.length,r[e]=a,p.push(e),A.push(n),c.push(ne);for(let re=Z,le=N.length;re!==le;++re){const me=N[re];ne[re]=new ws(me,e,n)}return ne}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const a=this._paths,c=this._parsedPaths,p=this._bindings,A=p.length-1,N=p[A],H=e[A];n[H]=r,p[r]=N,p.pop(),c[r]=c[A],c.pop(),a[r]=a[A],a.pop()}}}class tb{constructor(e,n,r=null,a=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=a;const c=n.tracks,p=c.length,A=new Array(p),N={endingStart:Pn,endingEnd:Pn};for(let H=0;H!==p;++H){const Z=c[H].createInterpolant(null);A[H]=Z,Z.settings=N}this._interpolantSettings=N,this._interpolants=A,this._propertyBindings=new Array(p),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=St,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const a=this._clip.duration,c=e._clip.duration,p=c/a,A=a/c;e.warp(1,p,n),this.warp(A,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const a=this._mixer,c=a.time,p=this.timeScale;let A=this._timeScaleInterpolant;A===null&&(A=a._lendControlInterpolant(),this._timeScaleInterpolant=A);const N=A.parameterPositions,H=A.sampleValues;return N[0]=c,N[1]=c+r,H[0]=e/p,H[1]=n/p,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,a){if(!this.enabled){this._updateWeight(e);return}const c=this._startTime;if(c!==null){const N=(e-c)*r;N<0||r===0?n=0:(this._startTime=null,n=r*N)}n*=this._updateTimeScale(e);const p=this._updateTime(n),A=this._updateWeight(e);if(A>0){const N=this._interpolants,H=this._propertyBindings;switch(this.blendMode){case fr:for(let Z=0,ne=N.length;Z!==ne;++Z)N[Z].evaluate(p),H[Z].accumulateAdditive(A);break;case Xi:default:for(let Z=0,ne=N.length;Z!==ne;++Z)N[Z].evaluate(p),H[Z].accumulate(a,A)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const a=r.evaluate(e)[0];n*=a,e>r.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const a=r.evaluate(e)[0];n*=a,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let a=this.time+e,c=this._loopCount;const p=r===wn;if(e===0)return c===-1?a:p&&(c&1)===1?n-a:a;if(r===yt){c===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=n)a=n;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(c===-1&&(e>=0?(c=0,this._setEndings(!0,this.repetitions===0,p)):this._setEndings(this.repetitions===0,!0,p)),a>=n||a<0){const A=Math.floor(a/n);a-=n*A,c+=Math.abs(A);const N=this.repetitions-c;if(N<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?n:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(N===1){const H=e<0;this._setEndings(H,!H,p)}else this._setEndings(!1,!1,p);this._loopCount=c,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:A})}}else this.time=a;if(p&&(c&1)===1)return n-a}return a}_setEndings(e,n,r){const a=this._interpolantSettings;r?(a.endingStart=xi,a.endingEnd=xi):(e?a.endingStart=this.zeroSlopeAtStart?xi:Pn:a.endingStart=Ui,n?a.endingEnd=this.zeroSlopeAtEnd?xi:Pn:a.endingEnd=Ui)}_scheduleFading(e,n,r){const a=this._mixer,c=a.time;let p=this._weightInterpolant;p===null&&(p=a._lendControlInterpolant(),this._weightInterpolant=p);const A=p.parameterPositions,N=p.sampleValues;return A[0]=c,N[0]=n,A[1]=c+e,N[1]=r,this}}const nb=new Float32Array(1);class ib extends ia{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,a=e._clip.tracks,c=a.length,p=e._propertyBindings,A=e._interpolants,N=r.uuid,H=this._bindingsByRootAndName;let Z=H[N];Z===void 0&&(Z={},H[N]=Z);for(let ne=0;ne!==c;++ne){const re=a[ne],le=re.name;let me=Z[le];if(me!==void 0)++me.referenceCount,p[ne]=me;else{if(me=p[ne],me!==void 0){me._cacheIndex===null&&(++me.referenceCount,this._addInactiveBinding(me,N,le));continue}const pe=n&&n._propertyBindings[ne].binding.parsedPath;me=new zy(ws.create(r,le,pe),re.ValueTypeName,re.getValueSize()),++me.referenceCount,this._addInactiveBinding(me,N,le),p[ne]=me}A[ne].resultBuffer=me.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,a=e._clip.uuid,c=this._actionsByClip[a];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,a,r)}const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const c=n[r];c.useCount++===0&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const c=n[r];--c.useCount===0&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const a=this._actions,c=this._actionsByClip;let p=c[n];if(p===void 0)p={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,c[n]=p;else{const A=p.knownActions;e._byClipCacheIndex=A.length,A.push(e)}e._cacheIndex=a.length,a.push(e),p.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],a=e._cacheIndex;r._cacheIndex=a,n[a]=r,n.pop(),e._cacheIndex=null;const c=e._clip.uuid,p=this._actionsByClip,A=p[c],N=A.knownActions,H=N[N.length-1],Z=e._byClipCacheIndex;H._byClipCacheIndex=Z,N[Z]=H,N.pop(),e._byClipCacheIndex=null;const ne=A.actionByRoot,re=(e._localRoot||this._root).uuid;delete ne[re],N.length===0&&delete p[c],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const c=n[r];--c.referenceCount===0&&this._removeInactiveBinding(c)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,a=this._nActiveActions++,c=n[a];e._cacheIndex=a,n[a]=e,c._cacheIndex=r,n[r]=c}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,a=--this._nActiveActions,c=n[a];e._cacheIndex=a,n[a]=e,c._cacheIndex=r,n[r]=c}_addInactiveBinding(e,n,r){const a=this._bindingsByRootAndName,c=this._bindings;let p=a[n];p===void 0&&(p={},a[n]=p),p[r]=e,e._cacheIndex=c.length,c.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,a=r.rootNode.uuid,c=r.path,p=this._bindingsByRootAndName,A=p[a],N=n[n.length-1],H=e._cacheIndex;N._cacheIndex=H,n[H]=N,n.pop(),delete A[c],Object.keys(A).length===0&&delete p[a]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,a=this._nActiveBindings++,c=n[a];e._cacheIndex=a,n[a]=e,c._cacheIndex=r,n[r]=c}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,a=--this._nActiveBindings,c=n[a];e._cacheIndex=a,n[a]=e,c._cacheIndex=r,n[r]=c}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new Jv(new Float32Array(2),new Float32Array(2),1,nb),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,a=--this._nActiveControlInterpolants,c=n[a];e.__cacheIndex=a,n[a]=e,c.__cacheIndex=r,n[r]=c}clipAction(e,n,r){const a=n||this._root,c=a.uuid;let p=typeof e=="string"?Ug.findByName(a,e):e;const A=p!==null?p.uuid:e,N=this._actionsByClip[A];let H=null;if(r===void 0&&(p!==null?r=p.blendMode:r=Xi),N!==void 0){const ne=N.actionByRoot[c];if(ne!==void 0&&ne.blendMode===r)return ne;H=N.knownActions[0],p===null&&(p=H._clip)}if(p===null)return null;const Z=new tb(this,p,n,r);return this._bindAction(Z,H),this._addInactiveAction(Z,A,c),Z}existingAction(e,n){const r=n||this._root,a=r.uuid,c=typeof e=="string"?Ug.findByName(r,e):e,p=c?c.uuid:e,A=this._actionsByClip[p];return A!==void 0&&A.actionByRoot[a]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,a=this.time+=e,c=Math.sign(e),p=this._accuIndex^=1;for(let H=0;H!==r;++H)n[H]._update(a,e,c,p);const A=this._bindings,N=this._nActiveBindings;for(let H=0;H!==N;++H)A[H].apply(p);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,a=this._actionsByClip,c=a[r];if(c!==void 0){const p=c.knownActions;for(let A=0,N=p.length;A!==N;++A){const H=p[A];this._deactivateAction(H);const Z=H._cacheIndex,ne=n[n.length-1];H._cacheIndex=null,H._byClipCacheIndex=null,ne._cacheIndex=Z,n[Z]=ne,n.pop(),this._removeInactiveBindingsForAction(H)}delete a[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const p in r){const A=r[p].actionByRoot,N=A[n];N!==void 0&&(this._deactivateAction(N),this._removeInactiveAction(N))}const a=this._bindingsByRootAndName,c=a[n];if(c!==void 0)for(const p in c){const A=c[p];A.restoreOriginalState(),this._removeInactiveBinding(A)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class a1{constructor(e){this.value=e}clone(){return new a1(this.value.clone===void 0?this.value:this.value.clone())}}let rb=0;class sb extends ia{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:rb++}),this.name="",this.usage=Lc,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,a=n.length;r<a;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class ob extends jp{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class ab{constructor(e,n,r,a,c){this.isGLBufferAttribute=!0,this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=a,this.count=c,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class lb{constructor(e,n,r=0,a=1/0){this.ray=new Jo(e,n),this.near=r,this.far=a,this.camera=null,this.layers=new ps,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return l1(e,this,r,n),r.sort(Vy),r}intersectObjects(e,n=!0,r=[]){for(let a=0,c=e.length;a<c;a++)l1(e[a],this,r,n);return r.sort(Vy),r}}function Vy(x,e){return x.distance-e.distance}function l1(x,e,n,r){if(x.layers.test(e.layers)&&x.raycast(e,n),r===!0){const a=x.children;for(let c=0,p=a.length;c<p;c++)l1(a[c],e,n,!0)}}class cb{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Os(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ub{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const Qy=new On;class hb{constructor(e=new On(1/0,1/0),n=new On(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Qy.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Qy.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jy=new nt,yA=new nt;class db{constructor(e=new nt,n=new nt){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){jy.subVectors(e,this.start),yA.subVectors(this.end,this.start);const r=yA.dot(yA);let c=yA.dot(jy)/r;return n&&(c=Os(c,0,1)),c}closestPointToPoint(e,n,r){const a=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(a).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Wy=new nt;class fb extends hs{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Pr,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let p=0,A=1,N=32;p<N;p++,A++){const H=p/N*Math.PI*2,Z=A/N*Math.PI*2;a.push(Math.cos(H),Math.sin(H),1,Math.cos(Z),Math.sin(Z),1)}r.setAttribute("position",new Yi(a,3));const c=new ga({fog:!1,toneMapped:!1});this.cone=new D(r,c),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),Wy.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Wy),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Wh=new nt,xA=new Gi,c1=new Gi;class pb extends D{constructor(e){const n=Ky(e),r=new Pr,a=[],c=[],p=new Si(0,0,1),A=new Si(0,1,0);for(let H=0;H<n.length;H++){const Z=n[H];Z.parent&&Z.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),c.push(p.r,p.g,p.b),c.push(A.r,A.g,A.b))}r.setAttribute("position",new Yi(a,3)),r.setAttribute("color",new Yi(c,3));const N=new ga({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,N),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,a=r.getAttribute("position");c1.copy(this.root.matrixWorld).invert();for(let c=0,p=0;c<n.length;c++){const A=n[c];A.parent&&A.parent.isBone&&(xA.multiplyMatrices(c1,A.matrixWorld),Wh.setFromMatrixPosition(xA),a.setXYZ(p,Wh.x,Wh.y,Wh.z),xA.multiplyMatrices(c1,A.parent.matrixWorld),Wh.setFromMatrixPosition(xA),a.setXYZ(p+1,Wh.x,Wh.y,Wh.z),p+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ky(x){const e=[];x.isBone===!0&&e.push(x);for(let n=0;n<x.children.length;n++)e.push.apply(e,Ky(x.children[n]));return e}class mb extends $s{constructor(e,n,r){const a=new ru(n,4,2),c=new lo({wireframe:!0,fog:!1,toneMapped:!1});super(a,c),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gb=new nt,Xy=new Si,Yy=new Si;class Ab extends hs{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const a=new Yl(n);a.rotateY(Math.PI*.5),this.material=new lo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const c=a.getAttribute("position"),p=new Float32Array(c.count*3);a.setAttribute("color",new Is(p,3)),this.add(new $s(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");Xy.copy(this.light.color),Yy.copy(this.light.groundColor);for(let r=0,a=n.count;r<a;r++){const c=r<a/2?Xy:Yy;n.setXYZ(r,c.r,c.g,c.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(gb.setFromMatrixPosition(this.light.matrixWorld).negate())}}class vb extends D{constructor(e=10,n=10,r=4473924,a=8947848){r=new Si(r),a=new Si(a);const c=n/2,p=e/n,A=e/2,N=[],H=[];for(let re=0,le=0,me=-A;re<=n;re++,me+=p){N.push(-A,0,me,A,0,me),N.push(me,0,-A,me,0,A);const pe=re===c?r:a;pe.toArray(H,le),le+=3,pe.toArray(H,le),le+=3,pe.toArray(H,le),le+=3,pe.toArray(H,le),le+=3}const Z=new Pr;Z.setAttribute("position",new Yi(N,3)),Z.setAttribute("color",new Yi(H,3));const ne=new ga({vertexColors:!0,toneMapped:!1});super(Z,ne),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class yb extends D{constructor(e=10,n=16,r=8,a=64,c=4473924,p=8947848){c=new Si(c),p=new Si(p);const A=[],N=[];if(n>1)for(let ne=0;ne<n;ne++){const re=ne/n*(Math.PI*2),le=Math.sin(re)*e,me=Math.cos(re)*e;A.push(0,0,0),A.push(le,0,me);const pe=ne&1?c:p;N.push(pe.r,pe.g,pe.b),N.push(pe.r,pe.g,pe.b)}for(let ne=0;ne<r;ne++){const re=ne&1?c:p,le=e-e/r*ne;for(let me=0;me<a;me++){let pe=me/a*(Math.PI*2),de=Math.sin(pe)*le,Ce=Math.cos(pe)*le;A.push(de,0,Ce),N.push(re.r,re.g,re.b),pe=(me+1)/a*(Math.PI*2),de=Math.sin(pe)*le,Ce=Math.cos(pe)*le,A.push(de,0,Ce),N.push(re.r,re.g,re.b)}}const H=new Pr;H.setAttribute("position",new Yi(A,3)),H.setAttribute("color",new Yi(N,3));const Z=new ga({vertexColors:!0,toneMapped:!1});super(H,Z),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const qy=new nt,EA=new nt,Jy=new nt;class xb extends hs{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let a=new Pr;a.setAttribute("position",new Yi([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const c=new ga({fog:!1,toneMapped:!1});this.lightPlane=new f(a,c),this.add(this.lightPlane),a=new Pr,a.setAttribute("position",new Yi([0,0,0,0,0,1],3)),this.targetLine=new f(a,c),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),qy.setFromMatrixPosition(this.light.matrixWorld),EA.setFromMatrixPosition(this.light.target.matrixWorld),Jy.subVectors(EA,qy),this.lightPlane.lookAt(EA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(EA),this.targetLine.scale.z=Jy.length()}}const bA=new nt,So=new Za;class Eb extends D{constructor(e){const n=new Pr,r=new ga({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],c=[],p={};A("n1","n2"),A("n2","n4"),A("n4","n3"),A("n3","n1"),A("f1","f2"),A("f2","f4"),A("f4","f3"),A("f3","f1"),A("n1","f1"),A("n2","f2"),A("n3","f3"),A("n4","f4"),A("p","n1"),A("p","n2"),A("p","n3"),A("p","n4"),A("u1","u2"),A("u2","u3"),A("u3","u1"),A("c","t"),A("p","c"),A("cn1","cn2"),A("cn3","cn4"),A("cf1","cf2"),A("cf3","cf4");function A(me,pe){N(me),N(pe)}function N(me){a.push(0,0,0),c.push(0,0,0),p[me]===void 0&&(p[me]=[]),p[me].push(a.length/3-1)}n.setAttribute("position",new Yi(a,3)),n.setAttribute("color",new Yi(c,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=p,this.update();const H=new Si(16755200),Z=new Si(16711680),ne=new Si(43775),re=new Si(16777215),le=new Si(3355443);this.setColors(H,Z,ne,re,le)}setColors(e,n,r,a,c){const A=this.geometry.getAttribute("color");A.setXYZ(0,e.r,e.g,e.b),A.setXYZ(1,e.r,e.g,e.b),A.setXYZ(2,e.r,e.g,e.b),A.setXYZ(3,e.r,e.g,e.b),A.setXYZ(4,e.r,e.g,e.b),A.setXYZ(5,e.r,e.g,e.b),A.setXYZ(6,e.r,e.g,e.b),A.setXYZ(7,e.r,e.g,e.b),A.setXYZ(8,e.r,e.g,e.b),A.setXYZ(9,e.r,e.g,e.b),A.setXYZ(10,e.r,e.g,e.b),A.setXYZ(11,e.r,e.g,e.b),A.setXYZ(12,e.r,e.g,e.b),A.setXYZ(13,e.r,e.g,e.b),A.setXYZ(14,e.r,e.g,e.b),A.setXYZ(15,e.r,e.g,e.b),A.setXYZ(16,e.r,e.g,e.b),A.setXYZ(17,e.r,e.g,e.b),A.setXYZ(18,e.r,e.g,e.b),A.setXYZ(19,e.r,e.g,e.b),A.setXYZ(20,e.r,e.g,e.b),A.setXYZ(21,e.r,e.g,e.b),A.setXYZ(22,e.r,e.g,e.b),A.setXYZ(23,e.r,e.g,e.b),A.setXYZ(24,n.r,n.g,n.b),A.setXYZ(25,n.r,n.g,n.b),A.setXYZ(26,n.r,n.g,n.b),A.setXYZ(27,n.r,n.g,n.b),A.setXYZ(28,n.r,n.g,n.b),A.setXYZ(29,n.r,n.g,n.b),A.setXYZ(30,n.r,n.g,n.b),A.setXYZ(31,n.r,n.g,n.b),A.setXYZ(32,r.r,r.g,r.b),A.setXYZ(33,r.r,r.g,r.b),A.setXYZ(34,r.r,r.g,r.b),A.setXYZ(35,r.r,r.g,r.b),A.setXYZ(36,r.r,r.g,r.b),A.setXYZ(37,r.r,r.g,r.b),A.setXYZ(38,a.r,a.g,a.b),A.setXYZ(39,a.r,a.g,a.b),A.setXYZ(40,c.r,c.g,c.b),A.setXYZ(41,c.r,c.g,c.b),A.setXYZ(42,c.r,c.g,c.b),A.setXYZ(43,c.r,c.g,c.b),A.setXYZ(44,c.r,c.g,c.b),A.setXYZ(45,c.r,c.g,c.b),A.setXYZ(46,c.r,c.g,c.b),A.setXYZ(47,c.r,c.g,c.b),A.setXYZ(48,c.r,c.g,c.b),A.setXYZ(49,c.r,c.g,c.b),A.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,a=1;So.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Do("c",n,e,So,0,0,-1),Do("t",n,e,So,0,0,1),Do("n1",n,e,So,-r,-a,-1),Do("n2",n,e,So,r,-a,-1),Do("n3",n,e,So,-r,a,-1),Do("n4",n,e,So,r,a,-1),Do("f1",n,e,So,-r,-a,1),Do("f2",n,e,So,r,-a,1),Do("f3",n,e,So,-r,a,1),Do("f4",n,e,So,r,a,1),Do("u1",n,e,So,r*.7,a*1.1,-1),Do("u2",n,e,So,-r*.7,a*1.1,-1),Do("u3",n,e,So,0,a*2,-1),Do("cf1",n,e,So,-r,0,1),Do("cf2",n,e,So,r,0,1),Do("cf3",n,e,So,0,-a,1),Do("cf4",n,e,So,0,a,1),Do("cn1",n,e,So,-r,0,-1),Do("cn2",n,e,So,r,0,-1),Do("cn3",n,e,So,0,-a,-1),Do("cn4",n,e,So,0,a,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Do(x,e,n,r,a,c,p){bA.set(a,c,p).unproject(r);const A=e[x];if(A!==void 0){const N=n.getAttribute("position");for(let H=0,Z=A.length;H<Z;H++)N.setXYZ(A[H],bA.x,bA.y,bA.z)}}const _A=new xa;class bb extends D{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(8*3),c=new Pr;c.setIndex(new Is(r,1)),c.setAttribute("position",new Is(a,3)),super(c,new ga({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_A.setFromObject(this.object),_A.isEmpty())return;const n=_A.min,r=_A.max,a=this.geometry.attributes.position,c=a.array;c[0]=r.x,c[1]=r.y,c[2]=r.z,c[3]=n.x,c[4]=r.y,c[5]=r.z,c[6]=n.x,c[7]=n.y,c[8]=r.z,c[9]=r.x,c[10]=n.y,c[11]=r.z,c[12]=r.x,c[13]=r.y,c[14]=n.z,c[15]=n.x,c[16]=r.y,c[17]=n.z,c[18]=n.x,c[19]=n.y,c[20]=n.z,c[21]=r.x,c[22]=n.y,c[23]=n.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _b extends D{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],c=new Pr;c.setIndex(new Is(r,1)),c.setAttribute("position",new Yi(a,3)),super(c,new ga({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class wb extends f{constructor(e,n=1,r=16776960){const a=r,c=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],p=new Pr;p.setAttribute("position",new Yi(c,3)),p.computeBoundingSphere(),super(p,new ga({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const A=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],N=new Pr;N.setAttribute("position",new Yi(A,3)),N.computeBoundingSphere(),this.add(new $s(N,new lo({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Zy=new nt;let wA,u1;class Cb extends hs{constructor(e=new nt(0,0,1),n=new nt(0,0,0),r=1,a=16776960,c=r*.2,p=c*.2){super(),this.type="ArrowHelper",wA===void 0&&(wA=new Pr,wA.setAttribute("position",new Yi([0,0,0,0,1,0],3)),u1=new Cr(0,.5,1,5,1),u1.translate(0,-.5,0)),this.position.copy(n),this.line=new f(wA,new ga({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $s(u1,new lo({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,c,p)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Zy.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(Zy,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Mb extends D{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Pr;a.setAttribute("position",new Yi(n,3)),a.setAttribute("color",new Yi(r,3));const c=new ga({vertexColors:!0,toneMapped:!1});super(a,c),this.type="AxesHelper"}setColors(e,n,r){const a=new Si,c=this.geometry.attributes.color.array;return a.set(e),a.toArray(c,0),a.toArray(c,3),a.set(n),a.toArray(c,6),a.toArray(c,9),a.set(r),a.toArray(c,12),a.toArray(c,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tb{constructor(){this.type="ShapePath",this.color=new Si,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Ri,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,a){return this.currentPath.quadraticCurveTo(e,n,r,a),this}bezierCurveTo(e,n,r,a,c,p){return this.currentPath.bezierCurveTo(e,n,r,a,c,p),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(Ce){const Fe=[];for(let Re=0,De=Ce.length;Re<De;Re++){const Ve=Ce[Re],ct=new $a;ct.curves=Ve.curves,Fe.push(ct)}return Fe}function r(Ce,Fe){const Re=Fe.length;let De=!1;for(let Ve=Re-1,ct=0;ct<Re;Ve=ct++){let bt=Fe[Ve],Ne=Fe[ct],dt=Ne.x-bt.x,vt=Ne.y-bt.y;if(Math.abs(vt)>Number.EPSILON){if(vt<0&&(bt=Fe[ct],dt=-dt,Ne=Fe[Ve],vt=-vt),Ce.y<bt.y||Ce.y>Ne.y)continue;if(Ce.y===bt.y){if(Ce.x===bt.x)return!0}else{const Ut=vt*(Ce.x-bt.x)-dt*(Ce.y-bt.y);if(Ut===0)return!0;if(Ut<0)continue;De=!De}}else{if(Ce.y!==bt.y)continue;if(Ne.x<=Ce.x&&Ce.x<=bt.x||bt.x<=Ce.x&&Ce.x<=Ne.x)return!0}}return De}const a=Bi.isClockWise,c=this.subPaths;if(c.length===0)return[];let p,A,N;const H=[];if(c.length===1)return A=c[0],N=new $a,N.curves=A.curves,H.push(N),H;let Z=!a(c[0].getPoints());Z=e?!Z:Z;const ne=[],re=[];let le=[],me=0,pe;re[me]=void 0,le[me]=[];for(let Ce=0,Fe=c.length;Ce<Fe;Ce++)A=c[Ce],pe=A.getPoints(),p=a(pe),p=e?!p:p,p?(!Z&&re[me]&&me++,re[me]={s:new $a,p:pe},re[me].s.curves=A.curves,Z&&me++,le[me]=[]):le[me].push({h:A,p:pe[0]});if(!re[0])return n(c);if(re.length>1){let Ce=!1,Fe=0;for(let Re=0,De=re.length;Re<De;Re++)ne[Re]=[];for(let Re=0,De=re.length;Re<De;Re++){const Ve=le[Re];for(let ct=0;ct<Ve.length;ct++){const bt=Ve[ct];let Ne=!0;for(let dt=0;dt<re.length;dt++)r(bt.p,re[dt].p)&&(Re!==dt&&Fe++,Ne?(Ne=!1,ne[dt].push(bt)):Ce=!0);Ne&&ne[Re].push(bt)}}Fe>0&&Ce===!1&&(le=ne)}let de;for(let Ce=0,Fe=re.length;Ce<Fe;Ce++){N=re[Ce].s,H.push(N),de=le[Ce];for(let Re=0,De=de.length;Re<De;Re++)N.holes.push(de[Re].h)}return H}}const Ju=Sb();function Sb(){const x=new ArrayBuffer(4),e=new Float32Array(x),n=new Uint32Array(x),r=new Uint32Array(512),a=new Uint32Array(512);for(let N=0;N<256;++N){const H=N-127;H<-27?(r[N]=0,r[N|256]=32768,a[N]=24,a[N|256]=24):H<-14?(r[N]=1024>>-H-14,r[N|256]=1024>>-H-14|32768,a[N]=-H-1,a[N|256]=-H-1):H<=15?(r[N]=H+15<<10,r[N|256]=H+15<<10|32768,a[N]=13,a[N|256]=13):H<128?(r[N]=31744,r[N|256]=64512,a[N]=24,a[N|256]=24):(r[N]=31744,r[N|256]=64512,a[N]=13,a[N|256]=13)}const c=new Uint32Array(2048),p=new Uint32Array(64),A=new Uint32Array(64);for(let N=1;N<1024;++N){let H=N<<13,Z=0;for(;(H&8388608)===0;)H<<=1,Z-=8388608;H&=-8388609,Z+=947912704,c[N]=H|Z}for(let N=1024;N<2048;++N)c[N]=939524096+(N-1024<<13);for(let N=1;N<31;++N)p[N]=N<<23;p[31]=1199570944,p[32]=2147483648;for(let N=33;N<63;++N)p[N]=2147483648+(N-32<<23);p[63]=3347054592;for(let N=1;N<64;++N)N!==32&&(A[N]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:a,mantissaTable:c,exponentTable:p,offsetTable:A}}function Ib(x){Math.abs(x)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),x=Os(x,-65504,65504),Ju.floatView[0]=x;const e=Ju.uint32View[0],n=e>>23&511;return Ju.baseTable[n]+((e&8388607)>>Ju.shiftTable[n])}function Rb(x){const e=x>>10;return Ju.uint32View[0]=Ju.mantissaTable[Ju.offsetTable[e]+(x&1023)]+Ju.exponentTable[e],Ju.floatView[0]}var Bb=Object.freeze({__proto__:null,toHalfFloat:Ib,fromHalfFloat:Rb});function Lb(){console.error("THREE.ImmediateRenderObject has been removed.")}class Db extends No{constructor(e,n,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,n,r),this.samples=4}}class Pb extends al{constructor(e,n,r,a){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,n,r,a)}}class Ob extends Fl{constructor(e,n,r,a){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,n,r,a)}}class Fb extends Ja{constructor(e,n,r,a,c,p){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,r,a,c,p)}}class Nb extends gs{constructor(e,n,r,a){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,r,a)}}class kb extends Ct{constructor(e,n,r,a){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,r,a)}}class Ub extends ts{constructor(e,n,r,a,c,p,A){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,r,a,c,p,A)}}class Gb extends Cr{constructor(e,n,r,a,c,p,A,N){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,r,a,c,p,A,N)}}class Hb extends eo{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class zb extends Jr{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class Vb extends tu{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class Qb extends br{constructor(e,n,r,a){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,r,a)}}class jb extends Yl{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class Wb extends _u{constructor(e,n,r,a){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,r,a)}}class Kb extends Mr{constructor(e,n,r,a){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,r,a)}}class Xb extends nu{constructor(e,n,r,a,c,p){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,r,a,c,p)}}class Yb extends iu{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class qb extends ru{constructor(e,n,r,a,c,p,A){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,r,a,c,p,A)}}class Jb extends Vu{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class Zb extends Qu{constructor(e,n,r,a,c){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,r,a,c)}}class $b extends ju{constructor(e,n,r,a,c,p){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,r,a,c,p)}}class e_ extends Wu{constructor(e,n,r,a,c){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,r,a,c)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:g}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=g)},"./node_modules/super-three/examples/jsm/libs/ktx-parse.module.js":(T,I,u)=>{u.r(I),u.d(I,{KHR_DF_CHANNEL_RGBSDA_ALPHA:()=>Ue,KHR_DF_CHANNEL_RGBSDA_BLUE:()=>ri,KHR_DF_CHANNEL_RGBSDA_DEPTH:()=>zt,KHR_DF_CHANNEL_RGBSDA_GREEN:()=>tn,KHR_DF_CHANNEL_RGBSDA_RED:()=>bn,KHR_DF_CHANNEL_RGBSDA_STENCIL:()=>ni,KHR_DF_FLAG_ALPHA_PREMULTIPLIED:()=>j,KHR_DF_FLAG_ALPHA_STRAIGHT:()=>J,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT:()=>b,KHR_DF_MODEL_ASTC:()=>P,KHR_DF_MODEL_ETC1:()=>R,KHR_DF_MODEL_ETC1S:()=>Y,KHR_DF_MODEL_ETC2:()=>L,KHR_DF_MODEL_RGBSDA:()=>O,KHR_DF_MODEL_UNSPECIFIED:()=>_,KHR_DF_PRIMARIES_ACES:()=>At,KHR_DF_PRIMARIES_ACESCC:()=>Bt,KHR_DF_PRIMARIES_ADOBERGB:()=>dn,KHR_DF_PRIMARIES_BT2020:()=>je,KHR_DF_PRIMARIES_BT601_EBU:()=>Yt,KHR_DF_PRIMARIES_BT601_SMPTE:()=>Mn,KHR_DF_PRIMARIES_BT709:()=>wt,KHR_DF_PRIMARIES_CIEXYZ:()=>rt,KHR_DF_PRIMARIES_DISPLAYP3:()=>un,KHR_DF_PRIMARIES_NTSC1953:()=>Pt,KHR_DF_PRIMARIES_PAL525:()=>qt,KHR_DF_PRIMARIES_UNSPECIFIED:()=>Gt,KHR_DF_SAMPLE_DATATYPE_EXPONENT:()=>ze,KHR_DF_SAMPLE_DATATYPE_FLOAT:()=>Pe,KHR_DF_SAMPLE_DATATYPE_LINEAR:()=>He,KHR_DF_SAMPLE_DATATYPE_SIGNED:()=>Ye,KHR_DF_TRANSFER_ACESCC:()=>ht,KHR_DF_TRANSFER_ACESCCT:()=>xt,KHR_DF_TRANSFER_ADOBERGB:()=>at,KHR_DF_TRANSFER_BT1886:()=>Q,KHR_DF_TRANSFER_DCIP3:()=>Ae,KHR_DF_TRANSFER_HLG_EOTF:()=>z,KHR_DF_TRANSFER_HLG_OETF:()=>F,KHR_DF_TRANSFER_ITU:()=>xe,KHR_DF_TRANSFER_LINEAR:()=>te,KHR_DF_TRANSFER_NTSC:()=>Ee,KHR_DF_TRANSFER_PAL625_EOTF:()=>Be,KHR_DF_TRANSFER_PAL_OETF:()=>Se,KHR_DF_TRANSFER_PQ_EOTF:()=>X,KHR_DF_TRANSFER_PQ_OETF:()=>fe,KHR_DF_TRANSFER_SLOG:()=>V,KHR_DF_TRANSFER_SLOG2:()=>q,KHR_DF_TRANSFER_SRGB:()=>ue,KHR_DF_TRANSFER_ST240:()=>Ge,KHR_DF_TRANSFER_UNSPECIFIED:()=>k,KHR_DF_VENDORID_KHRONOS:()=>m,KHR_DF_VERSION:()=>w,KHR_SUPERCOMPRESSION_BASISLZ:()=>v,KHR_SUPERCOMPRESSION_NONE:()=>C,KHR_SUPERCOMPRESSION_ZLIB:()=>E,KHR_SUPERCOMPRESSION_ZSTD:()=>y,KTX2Container:()=>lc,VK_FORMAT_A1R5G5B5_UNORM_PACK16:()=>Ie,VK_FORMAT_A2B10G10R10_SINT_PACK32:()=>Oi,VK_FORMAT_A2B10G10R10_SNORM_PACK32:()=>ei,VK_FORMAT_A2B10G10R10_UINT_PACK32:()=>pn,VK_FORMAT_A2B10G10R10_UNORM_PACK32:()=>Xn,VK_FORMAT_A2R10G10B10_SINT_PACK32:()=>Un,VK_FORMAT_A2R10G10B10_SNORM_PACK32:()=>Wt,VK_FORMAT_A2R10G10B10_UINT_PACK32:()=>mn,VK_FORMAT_A2R10G10B10_UNORM_PACK32:()=>nn,VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT:()=>kl,VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT:()=>ll,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:()=>Xa,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:()=>Pl,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:()=>nc,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:()=>Nl,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:()=>On,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:()=>Hf,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:()=>oc,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:()=>ch,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:()=>Fo,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:()=>ac,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:()=>zf,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:()=>pd,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:()=>ra,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:()=>mu,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:()=>Ol,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:()=>Ea,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:()=>Io,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:()=>uh,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:()=>mo,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:()=>ld,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:()=>ad,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:()=>ph,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:()=>Nf,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:()=>cd,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:()=>Co,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:()=>kf,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:()=>tc,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:()=>nt,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:()=>ud,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:()=>Uf,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:()=>Au,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:()=>Gf,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:()=>hd,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:()=>sc,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:()=>dd,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:()=>lh,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:()=>xa,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:()=>fd,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:()=>pu,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:()=>Ka,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:()=>Ss,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:()=>La,VK_FORMAT_B10G11R11_UFLOAT_PACK32:()=>Ia,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:()=>hh,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:()=>Da,VK_FORMAT_B4G4R4A4_UNORM_PACK16:()=>Oe,VK_FORMAT_B5G5R5A1_UNORM_PACK16:()=>se,VK_FORMAT_B5G6R5_UNORM_PACK16:()=>ae,VK_FORMAT_B8G8R8A8_SINT:()=>ut,VK_FORMAT_B8G8R8A8_SNORM:()=>ys,VK_FORMAT_B8G8R8A8_SRGB:()=>_t,VK_FORMAT_B8G8R8A8_UINT:()=>Qe,VK_FORMAT_B8G8R8A8_UNORM:()=>zr,VK_FORMAT_B8G8R8_SINT:()=>Pi,VK_FORMAT_B8G8R8_SNORM:()=>Dn,VK_FORMAT_B8G8R8_SRGB:()=>Zi,VK_FORMAT_B8G8R8_UINT:()=>bi,VK_FORMAT_B8G8R8_UNORM:()=>Gn,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:()=>Lc,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:()=>rh,VK_FORMAT_BC1_RGB_SRGB_BLOCK:()=>rd,VK_FORMAT_BC1_RGB_UNORM_BLOCK:()=>id,VK_FORMAT_BC2_SRGB_BLOCK:()=>sh,VK_FORMAT_BC2_UNORM_BLOCK:()=>sd,VK_FORMAT_BC3_SRGB_BLOCK:()=>no,VK_FORMAT_BC3_UNORM_BLOCK:()=>Lf,VK_FORMAT_BC4_SNORM_BLOCK:()=>Pf,VK_FORMAT_BC4_UNORM_BLOCK:()=>Df,VK_FORMAT_BC5_SNORM_BLOCK:()=>Of,VK_FORMAT_BC5_UNORM_BLOCK:()=>oh,VK_FORMAT_BC6H_SFLOAT_BLOCK:()=>ah,VK_FORMAT_BC6H_UFLOAT_BLOCK:()=>Ff,VK_FORMAT_BC7_SRGB_BLOCK:()=>ia,VK_FORMAT_BC7_UNORM_BLOCK:()=>du,VK_FORMAT_D16_UNORM:()=>Ba,VK_FORMAT_D16_UNORM_S8_UINT:()=>Dl,VK_FORMAT_D24_UNORM_S8_UINT:()=>qs,VK_FORMAT_D32_SFLOAT:()=>rl,VK_FORMAT_D32_SFLOAT_S8_UINT:()=>Oo,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:()=>Ra,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:()=>ja,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:()=>ol,VK_FORMAT_EAC_R11_SNORM_BLOCK:()=>fu,VK_FORMAT_EAC_R11_UNORM_BLOCK:()=>Js,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:()=>Dc,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:()=>sl,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:()=>Os,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:()=>wo,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:()=>od,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:()=>_o,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:()=>Wa,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:()=>dh,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:()=>No,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:()=>rc,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:()=>al,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:()=>fh,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:()=>Yo,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:()=>js,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:()=>Fl,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:()=>Zr,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:()=>ya,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:()=>so,VK_FORMAT_R10X6_UNORM_PACK16:()=>Pc,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:()=>ic,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:()=>Si,VK_FORMAT_R12X4_UNORM_PACK16:()=>gu,VK_FORMAT_R16G16B16A16_SFLOAT:()=>wn,VK_FORMAT_R16G16B16A16_SINT:()=>St,VK_FORMAT_R16G16B16A16_SNORM:()=>qe,VK_FORMAT_R16G16B16A16_UINT:()=>yt,VK_FORMAT_R16G16B16A16_UNORM:()=>Le,VK_FORMAT_R16G16B16_SFLOAT:()=>_e,VK_FORMAT_R16G16B16_SINT:()=>ge,VK_FORMAT_R16G16B16_SNORM:()=>os,VK_FORMAT_R16G16B16_UINT:()=>ce,VK_FORMAT_R16G16B16_UNORM:()=>to,VK_FORMAT_R16G16_SFLOAT:()=>Ir,VK_FORMAT_R16G16_SINT:()=>pi,VK_FORMAT_R16G16_SNORM:()=>Ds,VK_FORMAT_R16G16_UINT:()=>ro,VK_FORMAT_R16G16_UNORM:()=>Nr,VK_FORMAT_R16_SFLOAT:()=>er,VK_FORMAT_R16_SINT:()=>zi,VK_FORMAT_R16_SNORM:()=>Ti,VK_FORMAT_R16_UINT:()=>Wr,VK_FORMAT_R16_UNORM:()=>Mi,VK_FORMAT_R32G32B32A32_SFLOAT:()=>Yr,VK_FORMAT_R32G32B32A32_SINT:()=>us,VK_FORMAT_R32G32B32A32_UINT:()=>Vi,VK_FORMAT_R32G32B32_SFLOAT:()=>ur,VK_FORMAT_R32G32B32_SINT:()=>fr,VK_FORMAT_R32G32B32_UINT:()=>Xi,VK_FORMAT_R32G32_SFLOAT:()=>Ui,VK_FORMAT_R32G32_SINT:()=>xi,VK_FORMAT_R32G32_UINT:()=>Pn,VK_FORMAT_R32_SFLOAT:()=>an,VK_FORMAT_R32_SINT:()=>Nt,VK_FORMAT_R32_UINT:()=>xn,VK_FORMAT_R4G4B4A4_UNORM_PACK16:()=>Te,VK_FORMAT_R4G4_UNORM_PACK8:()=>Me,VK_FORMAT_R5G5B5A1_UNORM_PACK16:()=>ee,VK_FORMAT_R5G6B5_UNORM_PACK16:()=>Ze,VK_FORMAT_R64G64B64A64_SFLOAT:()=>Ll,VK_FORMAT_R64G64B64A64_SINT:()=>il,VK_FORMAT_R64G64B64A64_UINT:()=>Qs,VK_FORMAT_R64G64B64_SFLOAT:()=>Va,VK_FORMAT_R64G64B64_SINT:()=>bo,VK_FORMAT_R64G64B64_UINT:()=>Ls,VK_FORMAT_R64G64_SFLOAT:()=>Ps,VK_FORMAT_R64G64_SINT:()=>qr,VK_FORMAT_R64G64_UINT:()=>Vs,VK_FORMAT_R64_SFLOAT:()=>po,VK_FORMAT_R64_SINT:()=>Ts,VK_FORMAT_R64_UINT:()=>Ar,VK_FORMAT_R8G8B8A8_SINT:()=>Dr,VK_FORMAT_R8G8B8A8_SNORM:()=>Ki,VK_FORMAT_R8G8B8A8_SRGB:()=>ar,VK_FORMAT_R8G8B8A8_UINT:()=>Gr,VK_FORMAT_R8G8B8A8_UNORM:()=>Lr,VK_FORMAT_R8G8B8_SINT:()=>Ft,VK_FORMAT_R8G8B8_SNORM:()=>Nn,VK_FORMAT_R8G8B8_SRGB:()=>yn,VK_FORMAT_R8G8B8_UINT:()=>vn,VK_FORMAT_R8G8B8_UNORM:()=>fi,VK_FORMAT_R8G8_SINT:()=>In,VK_FORMAT_R8G8_SNORM:()=>jt,VK_FORMAT_R8G8_SRGB:()=>di,VK_FORMAT_R8G8_UINT:()=>on,VK_FORMAT_R8G8_UNORM:()=>Xt,VK_FORMAT_R8_SINT:()=>Vt,VK_FORMAT_R8_SNORM:()=>Ke,VK_FORMAT_R8_SRGB:()=>$t,VK_FORMAT_R8_UINT:()=>$e,VK_FORMAT_R8_UNORM:()=>We,VK_FORMAT_S8_UINT:()=>ec,VK_FORMAT_UNDEFINED:()=>et,VK_FORMAT_X8_D24_UNORM_PACK32:()=>Qa,read:()=>mh,write:()=>gh});var g=u("./node_modules/buffer/index.js").Buffer;const C=0,v=1,y=2,E=3,b=0,m=0,w=2,_=0,O=1,R=160,L=161,P=162,Y=163,J=0,j=1,k=0,te=1,ue=2,xe=3,Ee=4,V=5,q=6,Q=7,F=8,z=9,X=10,fe=11,Ae=12,Se=13,Be=14,Ge=15,ht=16,xt=17,at=18,Gt=0,wt=1,Yt=2,Mn=3,je=4,rt=5,At=6,Bt=7,Pt=8,qt=9,un=10,dn=11,bn=0,tn=1,ri=2,ni=13,zt=14,Ue=15,Pe=128,Ye=64,ze=32,He=16,et=0,Me=1,Te=2,Oe=3,Ze=4,ae=5,ee=6,se=7,Ie=8,We=9,Ke=10,$e=13,Vt=14,$t=15,Xt=16,jt=17,on=20,In=21,di=22,fi=23,Nn=24,vn=27,Ft=28,yn=29,Gn=30,Dn=31,bi=34,Pi=35,Zi=36,Lr=37,Ki=38,Gr=41,Dr=42,ar=43,zr=44,ys=45,Qe=48,ut=49,_t=50,nn=58,Wt=59,mn=62,Un=63,Xn=64,ei=65,pn=68,Oi=69,Mi=70,Ti=71,Wr=74,zi=75,er=76,Nr=77,Ds=78,ro=81,pi=82,Ir=83,to=84,os=85,ce=88,ge=89,_e=90,Le=91,qe=92,yt=95,St=96,wn=97,xn=98,Nt=99,an=100,Pn=101,xi=102,Ui=103,Xi=104,fr=105,ur=106,Vi=107,us=108,Yr=109,Ar=110,Ts=111,po=112,Vs=113,qr=114,Ps=115,Ls=116,bo=117,Va=118,Qs=119,il=120,Ll=121,Ia=122,Ra=123,Ba=124,Qa=125,rl=126,ec=127,Dl=128,qs=129,Oo=130,id=131,rd=132,rh=133,Lc=134,sd=135,sh=136,Lf=137,no=138,Df=139,Pf=140,oh=141,Of=142,Ff=143,ah=144,du=145,ia=146,_o=147,od=148,sl=149,Dc=150,wo=151,Os=152,Js=153,fu=154,ol=155,ja=156,ad=157,ld=158,cd=159,Nf=160,tc=161,kf=162,Uf=163,ud=164,hd=165,Gf=166,lh=167,dd=168,pu=169,fd=170,La=171,Ss=172,Hf=173,On=174,Fo=175,ch=176,pd=177,zf=178,nc=179,Pl=180,Ol=181,mu=182,uh=183,Io=184,Pc=1000156007,so=1000156008,ya=1000156009,Wa=1000156010,hh=1000156011,gu=1000156017,Si=1000156018,ic=1000156019,dh=1000156020,Da=1000156021,rc=1000054e3,fh=1000054001,js=1000054002,Zr=1000054003,No=1000054004,al=1000054005,Yo=1000054006,Fl=1000054007,mo=1000066e3,ph=1000066001,Co=1000066002,nt=1000066003,Au=1000066004,sc=1000066005,xa=1000066006,Ka=1000066007,Nl=1000066008,oc=1000066009,ac=1000066010,Xa=1000066011,ra=1000066012,Ea=1000066013,ll=100034e4,kl=1000340001;class lc{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class ma{constructor(mr,$r,oo,as){this._dataView=new DataView(mr.buffer,mr.byteOffset+$r,oo),this._littleEndian=as,this._offset=0}_nextUint8(){const mr=this._dataView.getUint8(this._offset);return this._offset+=1,mr}_nextUint16(){const mr=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,mr}_nextUint32(){const mr=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,mr}_nextUint64(){const mr=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,mr}_nextInt32(){const mr=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,mr}_skip(mr){return this._offset+=mr,this}_scan(mr,$r=0){const oo=this._offset;let as=0;for(;this._dataView.getUint8(this._offset)!==$r&&as<mr;)as++,this._offset++;return as<mr&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+oo,as)}}const Oc=new Uint8Array([0]),xs=[171,75,84,88,32,50,48,187,13,10,26,10];function ko(Ci){return typeof TextEncoder<"u"?new TextEncoder().encode(Ci):g.from(Ci)}function md(Ci){return typeof TextDecoder<"u"?new TextDecoder().decode(Ci):g.from(Ci).toString("utf8")}function cl(Ci){let mr=0;for(const as of Ci)mr+=as.byteLength;const $r=new Uint8Array(mr);let oo=0;for(const as of Ci)$r.set(new Uint8Array(as),oo),oo+=as.byteLength;return $r}function mh(Ci){const mr=new Uint8Array(Ci.buffer,Ci.byteOffset,xs.length);if(mr[0]!==xs[0]||mr[1]!==xs[1]||mr[2]!==xs[2]||mr[3]!==xs[3]||mr[4]!==xs[4]||mr[5]!==xs[5]||mr[6]!==xs[6]||mr[7]!==xs[7]||mr[8]!==xs[8]||mr[9]!==xs[9]||mr[10]!==xs[10]||mr[11]!==xs[11])throw new Error("Missing KTX 2.0 identifier.");const $r=new lc,oo=17*Uint32Array.BYTES_PER_ELEMENT,as=new ma(Ci,xs.length,oo,!0);$r.vkFormat=as._nextUint32(),$r.typeSize=as._nextUint32(),$r.pixelWidth=as._nextUint32(),$r.pixelHeight=as._nextUint32(),$r.pixelDepth=as._nextUint32(),$r.layerCount=as._nextUint32(),$r.faceCount=as._nextUint32();const Jo=as._nextUint32();$r.supercompressionScheme=as._nextUint32();const Gi=as._nextUint32(),oa=as._nextUint32(),Vr=as._nextUint32(),Fc=as._nextUint32(),cc=as._nextUint64(),Uo=as._nextUint64(),Go=new ma(Ci,xs.length+oo,3*Jo*8,!0);for(let io=0;io<Jo;io++)$r.levels.push({levelData:new Uint8Array(Ci.buffer,Ci.byteOffset+Go._nextUint64(),Go._nextUint64()),uncompressedByteLength:Go._nextUint64()});const Er=new ma(Ci,Gi,oa,!0),Pa={vendorId:Er._skip(4)._nextUint16(),descriptorType:Er._nextUint16(),versionNumber:Er._nextUint16(),descriptorBlockSize:Er._nextUint16(),colorModel:Er._nextUint8(),colorPrimaries:Er._nextUint8(),transferFunction:Er._nextUint8(),flags:Er._nextUint8(),texelBlockDimension:[Er._nextUint8(),Er._nextUint8(),Er._nextUint8(),Er._nextUint8()],bytesPlane:[Er._nextUint8(),Er._nextUint8(),Er._nextUint8(),Er._nextUint8(),Er._nextUint8(),Er._nextUint8(),Er._nextUint8(),Er._nextUint8()],samples:[]},uc=(Pa.descriptorBlockSize/4-6)/4;for(let io=0;io<uc;io++){const _a={bitOffset:Er._nextUint16(),bitLength:Er._nextUint8(),channelType:Er._nextUint8(),samplePosition:[Er._nextUint8(),Er._nextUint8(),Er._nextUint8(),Er._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&_a.channelType?(_a.sampleLower=Er._nextInt32(),_a.sampleUpper=Er._nextInt32()):(_a.sampleLower=Er._nextUint32(),_a.sampleUpper=Er._nextUint32()),Pa.samples[io]=_a}$r.dataFormatDescriptor.length=0,$r.dataFormatDescriptor.push(Pa);const Ho=new ma(Ci,Vr,Fc,!0);for(;Ho._offset<Fc;){const io=Ho._nextUint32(),_a=Ho._scan(io),Oa=md(_a),Gl=Ho._scan(io-_a.byteLength);$r.keyValue[Oa]=Oa.match(/^ktx/i)?md(Gl):Gl,Ho._offset%4&&Ho._skip(4-Ho._offset%4)}if(Uo<=0)return $r;const ps=new ma(Ci,cc,Uo,!0),ks=ps._nextUint16(),Kr=ps._nextUint16(),ms=ps._nextUint32(),ao=ps._nextUint32(),Ya=ps._nextUint32(),Ul=ps._nextUint32(),gd=[];for(let io=0;io<Jo;io++)gd.push({imageFlags:ps._nextUint32(),rgbSliceByteOffset:ps._nextUint32(),rgbSliceByteLength:ps._nextUint32(),alphaSliceByteOffset:ps._nextUint32(),alphaSliceByteLength:ps._nextUint32()});const Ad=cc+ps._offset,Ah=Ad+ms,vh=Ah+ao,vd=vh+Ya,Vf=new Uint8Array(Ci.buffer,Ci.byteOffset+Ad,ms),yd=new Uint8Array(Ci.buffer,Ci.byteOffset+Ah,ao),hs=new Uint8Array(Ci.buffer,Ci.byteOffset+vh,Ya),ba=new Uint8Array(Ci.buffer,Ci.byteOffset+vd,Ul);return $r.globalData={endpointCount:ks,selectorCount:Kr,imageDescs:gd,endpointsData:Vf,selectorsData:yd,tablesData:hs,extendedData:ba},$r}function qo(){return(qo=Object.assign||function(Ci){for(var mr=1;mr<arguments.length;mr++){var $r=arguments[mr];for(var oo in $r)Object.prototype.hasOwnProperty.call($r,oo)&&(Ci[oo]=$r[oo])}return Ci}).apply(this,arguments)}const sa={keepWriter:!1};function gh(Ci,mr={}){mr=qo({},sa,mr);let $r=new ArrayBuffer(0);if(Ci.globalData){const ks=new ArrayBuffer(20+5*Ci.globalData.imageDescs.length*4),Kr=new DataView(ks);Kr.setUint16(0,Ci.globalData.endpointCount,!0),Kr.setUint16(2,Ci.globalData.selectorCount,!0),Kr.setUint32(4,Ci.globalData.endpointsData.byteLength,!0),Kr.setUint32(8,Ci.globalData.selectorsData.byteLength,!0),Kr.setUint32(12,Ci.globalData.tablesData.byteLength,!0),Kr.setUint32(16,Ci.globalData.extendedData.byteLength,!0);for(let ms=0;ms<Ci.globalData.imageDescs.length;ms++){const ao=Ci.globalData.imageDescs[ms];Kr.setUint32(20+5*ms*4+0,ao.imageFlags,!0),Kr.setUint32(20+5*ms*4+4,ao.rgbSliceByteOffset,!0),Kr.setUint32(20+5*ms*4+8,ao.rgbSliceByteLength,!0),Kr.setUint32(20+5*ms*4+12,ao.alphaSliceByteOffset,!0),Kr.setUint32(20+5*ms*4+16,ao.alphaSliceByteLength,!0)}$r=cl([ks,Ci.globalData.endpointsData,Ci.globalData.selectorsData,Ci.globalData.tablesData,Ci.globalData.extendedData])}const oo=[];let as=Ci.keyValue;mr.keepWriter||(as=qo({},Ci.keyValue,{KTXwriter:"KTX-Parse v0.3.1"}));for(const ks in as){const Kr=as[ks],ms=ko(ks),ao=typeof Kr=="string"?ko(Kr):Kr,Ya=ms.byteLength+1+ao.byteLength+1,Ul=Ya%4?4-Ya%4:0;oo.push(cl([new Uint32Array([Ya]),ms,Oc,ao,Oc,new Uint8Array(Ul).fill(0)]))}const Jo=cl(oo);if(Ci.dataFormatDescriptor.length!==1||Ci.dataFormatDescriptor[0].descriptorType!==0)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const Gi=Ci.dataFormatDescriptor[0],oa=new ArrayBuffer(28+16*Gi.samples.length),Vr=new DataView(oa),Fc=24+16*Gi.samples.length;if(Vr.setUint32(0,oa.byteLength,!0),Vr.setUint16(4,Gi.vendorId,!0),Vr.setUint16(6,Gi.descriptorType,!0),Vr.setUint16(8,Gi.versionNumber,!0),Vr.setUint16(10,Fc,!0),Vr.setUint8(12,Gi.colorModel),Vr.setUint8(13,Gi.colorPrimaries),Vr.setUint8(14,Gi.transferFunction),Vr.setUint8(15,Gi.flags),!Array.isArray(Gi.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");Vr.setUint8(16,Gi.texelBlockDimension[0]),Vr.setUint8(17,Gi.texelBlockDimension[1]),Vr.setUint8(18,Gi.texelBlockDimension[2]),Vr.setUint8(19,Gi.texelBlockDimension[3]);for(let ks=0;ks<8;ks++)Vr.setUint8(20+ks,Gi.bytesPlane[ks]);for(let ks=0;ks<Gi.samples.length;ks++){const Kr=Gi.samples[ks],ms=28+16*ks;if(Kr.channelID)throw new Error("channelID has been renamed to channelType.");Vr.setUint16(ms+0,Kr.bitOffset,!0),Vr.setUint8(ms+2,Kr.bitLength),Vr.setUint8(ms+3,Kr.channelType),Vr.setUint8(ms+4,Kr.samplePosition[0]),Vr.setUint8(ms+5,Kr.samplePosition[1]),Vr.setUint8(ms+6,Kr.samplePosition[2]),Vr.setUint8(ms+7,Kr.samplePosition[3]),64&Kr.channelType?(Vr.setInt32(ms+8,Kr.sampleLower,!0),Vr.setInt32(ms+12,Kr.sampleUpper,!0)):(Vr.setUint32(ms+8,Kr.sampleLower,!0),Vr.setUint32(ms+12,Kr.sampleUpper,!0))}const cc=xs.length+68+3*Ci.levels.length*8,Uo=cc+oa.byteLength;let Go=$r.byteLength>0?Uo+Jo.byteLength:0;Go%8&&(Go+=8-Go%8);const Er=[],Pa=new DataView(new ArrayBuffer(3*Ci.levels.length*8));let uc=(Go||Uo+Jo.byteLength)+$r.byteLength;for(let ks=0;ks<Ci.levels.length;ks++){const Kr=Ci.levels[ks];Er.push(Kr.levelData),Pa.setBigUint64(24*ks+0,BigInt(uc),!0),Pa.setBigUint64(24*ks+8,BigInt(Kr.levelData.byteLength),!0),Pa.setBigUint64(24*ks+16,BigInt(Kr.uncompressedByteLength),!0),uc+=Kr.levelData.byteLength}const Ho=new ArrayBuffer(68),ps=new DataView(Ho);return ps.setUint32(0,Ci.vkFormat,!0),ps.setUint32(4,Ci.typeSize,!0),ps.setUint32(8,Ci.pixelWidth,!0),ps.setUint32(12,Ci.pixelHeight,!0),ps.setUint32(16,Ci.pixelDepth,!0),ps.setUint32(20,Ci.layerCount,!0),ps.setUint32(24,Ci.faceCount,!0),ps.setUint32(28,Ci.levels.length,!0),ps.setUint32(32,Ci.supercompressionScheme,!0),ps.setUint32(36,cc,!0),ps.setUint32(40,oa.byteLength,!0),ps.setUint32(44,Uo,!0),ps.setUint32(48,Jo.byteLength,!0),ps.setBigUint64(52,BigInt($r.byteLength>0?Go:0),!0),ps.setBigUint64(60,BigInt($r.byteLength),!0),new Uint8Array(cl([new Uint8Array(xs).buffer,Ho,Pa.buffer,oa,Jo,Go>0?new ArrayBuffer(Go-(Uo+Jo.byteLength)):new ArrayBuffer(0),$r,...Er]))}},"./node_modules/super-three/examples/jsm/libs/zstddec.module.js":(T,I,u)=>{u.r(I),u.d(I,{ZSTDDecoder:()=>b});var g=u("./node_modules/buffer/index.js").Buffer;let C,v,y;const E={env:{emscripten_notify_memory_growth:function(w){y=new Uint8Array(v.exports.memory.buffer)}}};class b{init(){return C||(C=typeof fetch<"u"?fetch("data:application/wasm;base64,"+m).then(_=>_.arrayBuffer()).then(_=>WebAssembly.instantiate(_,E)).then(this._init):WebAssembly.instantiate(g.from(m,"base64"),E).then(this._init),C)}_init(_){v=_.instance,E.env.emscripten_notify_memory_growth(0)}decode(_,O=0){if(!v)throw new Error("ZSTDDecoder: Await .init() before decoding.");const R=_.byteLength,L=v.exports.malloc(R);y.set(_,L),O=O||Number(v.exports.ZSTD_findDecompressedSize(L,R));const P=v.exports.malloc(O),Y=v.exports.ZSTD_decompress(P,O,L,R),J=y.slice(P,P+Y);return v.exports.free(L),v.exports.free(P),J}}const m="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"},"./node_modules/super-three/examples/jsm/lights/LightProbeGenerator.js":(T,I,u)=>{u.r(I),u.d(I,{LightProbeGenerator:()=>C});var g=u("./node_modules/super-three/build/three.module.js");class C{static fromCubeTexture(E){let b=0;const m=new g.Vector3,w=new g.Vector3,_=new g.Color,O=[0,0,0,0,0,0,0,0,0],R=new g.SphericalHarmonics3,L=R.coefficients;for(let Y=0;Y<6;Y++){const J=E.image[Y],j=J.width,k=J.height,te=document.createElement("canvas");te.width=j,te.height=k;const ue=te.getContext("2d");ue.drawImage(J,0,0,j,k);const xe=ue.getImageData(0,0,j,k),Ee=xe.data,V=xe.width,q=2/V;for(let Q=0,F=Ee.length;Q<F;Q+=4){_.setRGB(Ee[Q]/255,Ee[Q+1]/255,Ee[Q+2]/255),v(_,E.encoding);const z=Q/4,X=-1+(z%V+.5)*q,fe=1-(Math.floor(z/V)+.5)*q;switch(Y){case 0:m.set(-1,fe,-X);break;case 1:m.set(1,fe,X);break;case 2:m.set(-X,1,-fe);break;case 3:m.set(-X,-1,fe);break;case 4:m.set(-X,fe,1);break;case 5:m.set(X,fe,-1);break}const Ae=m.lengthSq(),Se=4/(Math.sqrt(Ae)*Ae);b+=Se,w.copy(m).normalize(),g.SphericalHarmonics3.getBasisAt(w,O);for(let Be=0;Be<9;Be++)L[Be].x+=O[Be]*_.r*Se,L[Be].y+=O[Be]*_.g*Se,L[Be].z+=O[Be]*_.b*Se}}const P=4*Math.PI/b;for(let Y=0;Y<9;Y++)L[Y].x*=P,L[Y].y*=P,L[Y].z*=P;return new g.LightProbe(R)}static fromCubeRenderTarget(E,b){let m=0;const w=new g.Vector3,_=new g.Vector3,O=new g.Color,R=[0,0,0,0,0,0,0,0,0],L=new g.SphericalHarmonics3,P=L.coefficients;for(let J=0;J<6;J++){const j=b.width,k=new Uint8Array(j*j*4);E.readRenderTargetPixels(b,0,0,j,j,k,J);const te=2/j;for(let ue=0,xe=k.length;ue<xe;ue+=4){O.setRGB(k[ue]/255,k[ue+1]/255,k[ue+2]/255),v(O,b.texture.encoding);const Ee=ue/4,V=-1+(Ee%j+.5)*te,q=1-(Math.floor(Ee/j)+.5)*te;switch(J){case 0:w.set(1,q,-V);break;case 1:w.set(-1,q,V);break;case 2:w.set(V,1,-q);break;case 3:w.set(V,-1,q);break;case 4:w.set(V,q,1);break;case 5:w.set(-V,q,-1);break}const Q=w.lengthSq(),F=4/(Math.sqrt(Q)*Q);m+=F,_.copy(w).normalize(),g.SphericalHarmonics3.getBasisAt(_,R);for(let z=0;z<9;z++)P[z].x+=R[z]*O.r*F,P[z].y+=R[z]*O.g*F,P[z].z+=R[z]*O.b*F}}const Y=4*Math.PI/m;for(let J=0;J<9;J++)P[J].x*=Y,P[J].y*=Y,P[J].z*=Y;return new g.LightProbe(L)}}function v(y,E){switch(E){case g.sRGBEncoding:y.convertSRGBToLinear();break;case g.LinearEncoding:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported encoding.");break}return y}},"./node_modules/super-three/examples/jsm/loaders/DRACOLoader.js":(T,I,u)=>{u.r(I),u.d(I,{DRACOLoader:()=>v});var g=u("./node_modules/super-three/build/three.module.js");const C=new WeakMap;class v extends g.Loader{constructor(b){super(b),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(b){return this.decoderPath=b,this}setDecoderConfig(b){return this.decoderConfig=b,this}setWorkerLimit(b){return this.workerLimit=b,this}load(b,m,w,_){const O=new g.FileLoader(this.manager);O.setPath(this.path),O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setWithCredentials(this.withCredentials),O.load(b,R=>{this.decodeDracoFile(R,m).catch(_)},w,_)}decodeDracoFile(b,m,w,_){const O={attributeIDs:w||this.defaultAttributeIDs,attributeTypes:_||this.defaultAttributeTypes,useUniqueIDs:!!w};return this.decodeGeometry(b,O).then(m)}decodeGeometry(b,m){const w=JSON.stringify(m);if(C.has(b)){const P=C.get(b);if(P.key===w)return P.promise;if(b.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let _;const O=this.workerNextTaskID++,R=b.byteLength,L=this._getWorker(O,R).then(P=>(_=P,new Promise((Y,J)=>{_._callbacks[O]={resolve:Y,reject:J},_.postMessage({type:"decode",id:O,taskConfig:m,buffer:b},[b])}))).then(P=>this._createGeometry(P.geometry));return L.catch(()=>!0).then(()=>{_&&O&&this._releaseTask(_,O)}),C.set(b,{key:w,promise:L}),L}_createGeometry(b){const m=new g.BufferGeometry;b.index&&m.setIndex(new g.BufferAttribute(b.index.array,1));for(let w=0;w<b.attributes.length;w++){const _=b.attributes[w],O=_.name,R=_.array,L=_.itemSize;m.setAttribute(O,new g.BufferAttribute(R,L))}return m}_loadLibrary(b,m){const w=new g.FileLoader(this.manager);return w.setPath(this.decoderPath),w.setResponseType(m),w.setWithCredentials(this.withCredentials),new Promise((_,O)=>{w.load(b,_,void 0,O)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const b=typeof WebAssembly!="object"||this.decoderConfig.type==="js",m=[];return b?m.push(this._loadLibrary("draco_decoder.js","text")):(m.push(this._loadLibrary("draco_wasm_wrapper.js","text")),m.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(m).then(w=>{const _=w[0];b||(this.decoderConfig.wasmBinary=w[1]);const O=y.toString(),R=["/* draco decoder */",_,"","/* worker */",O.substring(O.indexOf("{")+1,O.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([R]))}),this.decoderPending}_getWorker(b,m){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const _=new Worker(this.workerSourceURL);_._callbacks={},_._taskCosts={},_._taskLoad=0,_.postMessage({type:"init",decoderConfig:this.decoderConfig}),_.onmessage=function(O){const R=O.data;switch(R.type){case"decode":_._callbacks[R.id].resolve(R);break;case"error":_._callbacks[R.id].reject(R);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+R.type+'"')}},this.workerPool.push(_)}else this.workerPool.sort(function(_,O){return _._taskLoad>O._taskLoad?-1:1});const w=this.workerPool[this.workerPool.length-1];return w._taskCosts[b]=m,w._taskLoad+=m,w})}_releaseTask(b,m){b._taskLoad-=b._taskCosts[m],delete b._callbacks[m],delete b._taskCosts[m]}debug(){console.log("Task load: ",this.workerPool.map(b=>b._taskLoad))}dispose(){for(let b=0;b<this.workerPool.length;++b)this.workerPool[b].terminate();return this.workerPool.length=0,this}}function y(){let E,b;onmessage=function(R){const L=R.data;switch(L.type){case"init":E=L.decoderConfig,b=new Promise(function(J){E.onModuleLoaded=function(j){J({draco:j})},DracoDecoderModule(E)});break;case"decode":const P=L.buffer,Y=L.taskConfig;b.then(J=>{const j=J.draco,k=new j.Decoder,te=new j.DecoderBuffer;te.Init(new Int8Array(P),P.byteLength);try{const ue=m(j,k,te,Y),xe=ue.attributes.map(Ee=>Ee.array.buffer);ue.index&&xe.push(ue.index.array.buffer),self.postMessage({type:"decode",id:L.id,geometry:ue},xe)}catch(ue){console.error(ue),self.postMessage({type:"error",id:L.id,error:ue.message})}finally{j.destroy(te),j.destroy(k)}});break}};function m(R,L,P,Y){const J=Y.attributeIDs,j=Y.attributeTypes;let k,te;const ue=L.GetEncodedGeometryType(P);if(ue===R.TRIANGULAR_MESH)k=new R.Mesh,te=L.DecodeBufferToMesh(P,k);else if(ue===R.POINT_CLOUD)k=new R.PointCloud,te=L.DecodeBufferToPointCloud(P,k);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!te.ok()||k.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+te.error_msg());const xe={index:null,attributes:[]};for(const Ee in J){const V=self[j[Ee]];let q,Q;if(Y.useUniqueIDs)Q=J[Ee],q=L.GetAttributeByUniqueId(k,Q);else{if(Q=L.GetAttributeId(k,R[J[Ee]]),Q===-1)continue;q=L.GetAttribute(k,Q)}xe.attributes.push(_(R,L,k,Ee,V,q))}return ue===R.TRIANGULAR_MESH&&(xe.index=w(R,L,k)),R.destroy(k),xe}function w(R,L,P){const J=P.num_faces()*3,j=J*4,k=R._malloc(j);L.GetTrianglesUInt32Array(P,j,k);const te=new Uint32Array(R.HEAPF32.buffer,k,J).slice();return R._free(k),{array:te,itemSize:1}}function _(R,L,P,Y,J,j){const k=j.num_components(),ue=P.num_points()*k,xe=ue*J.BYTES_PER_ELEMENT,Ee=O(R,J),V=R._malloc(xe);L.GetAttributeDataArrayForAllPoints(P,j,Ee,xe,V);const q=new J(R.HEAPF32.buffer,V,ue).slice();return R._free(V),{name:Y,array:q,itemSize:k}}function O(R,L){switch(L){case Float32Array:return R.DT_FLOAT32;case Int8Array:return R.DT_INT8;case Int16Array:return R.DT_INT16;case Int32Array:return R.DT_INT32;case Uint8Array:return R.DT_UINT8;case Uint16Array:return R.DT_UINT16;case Uint32Array:return R.DT_UINT32}}}},"./node_modules/super-three/examples/jsm/loaders/GLTFLoader.js":(T,I,u)=>{u.r(I),u.d(I,{GLTFLoader:()=>C});var g=u("./node_modules/super-three/build/three.module.js");class C extends g.Loader{constructor(Ue){super(Ue),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(Pe){return new w(Pe)}),this.register(function(Pe){return new J(Pe)}),this.register(function(Pe){return new j(Pe)}),this.register(function(Pe){return new O(Pe)}),this.register(function(Pe){return new R(Pe)}),this.register(function(Pe){return new L(Pe)}),this.register(function(Pe){return new P(Pe)}),this.register(function(Pe){return new m(Pe)}),this.register(function(Pe){return new Y(Pe)}),this.register(function(Pe){return new _(Pe)}),this.register(function(Pe){return new E(Pe)}),this.register(function(Pe){return new k(Pe)}),this.register(function(Pe){return new te(Pe)})}load(Ue,Pe,Ye,ze){const He=this;let et;this.resourcePath!==""?et=this.resourcePath:this.path!==""?et=this.path:et=g.LoaderUtils.extractUrlBase(Ue),this.manager.itemStart(Ue);const Me=function(Oe){ze?ze(Oe):console.error(Oe),He.manager.itemError(Ue),He.manager.itemEnd(Ue)},Te=new g.FileLoader(this.manager);Te.setPath(this.path),Te.setResponseType("arraybuffer"),Te.setRequestHeader(this.requestHeader),Te.setWithCredentials(this.withCredentials),Te.load(Ue,function(Oe){try{He.parse(Oe,et,function(Ze){Pe(Ze),He.manager.itemEnd(Ue)},Me)}catch(Ze){Me(Ze)}},Ye,Me)}setDRACOLoader(Ue){return this.dracoLoader=Ue,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(Ue){return this.ktx2Loader=Ue,this}setMeshoptDecoder(Ue){return this.meshoptDecoder=Ue,this}register(Ue){return this.pluginCallbacks.indexOf(Ue)===-1&&this.pluginCallbacks.push(Ue),this}unregister(Ue){return this.pluginCallbacks.indexOf(Ue)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(Ue),1),this}parse(Ue,Pe,Ye,ze){let He;const et={},Me={};if(typeof Ue=="string")He=JSON.parse(Ue);else if(Ue instanceof ArrayBuffer)if(g.LoaderUtils.decodeText(new Uint8Array(Ue,0,4))===ue){try{et[y.KHR_BINARY_GLTF]=new V(Ue)}catch(Ze){ze&&ze(Ze);return}He=JSON.parse(et[y.KHR_BINARY_GLTF].content)}else He=JSON.parse(g.LoaderUtils.decodeText(new Uint8Array(Ue)));else He=Ue;if(He.asset===void 0||He.asset.version[0]<2){ze&&ze(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Te=new dn(He,{path:Pe||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Te.fileLoader.setRequestHeader(this.requestHeader);for(let Oe=0;Oe<this.pluginCallbacks.length;Oe++){const Ze=this.pluginCallbacks[Oe](Te);Me[Ze.name]=Ze,et[Ze.name]=!0}if(He.extensionsUsed)for(let Oe=0;Oe<He.extensionsUsed.length;++Oe){const Ze=He.extensionsUsed[Oe],ae=He.extensionsRequired||[];switch(Ze){case y.KHR_MATERIALS_UNLIT:et[Ze]=new b;break;case y.KHR_DRACO_MESH_COMPRESSION:et[Ze]=new q(He,this.dracoLoader);break;case y.KHR_TEXTURE_TRANSFORM:et[Ze]=new Q;break;case y.KHR_MESH_QUANTIZATION:et[Ze]=new F;break;default:ae.indexOf(Ze)>=0&&Me[Ze]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Ze+'".')}}Te.setExtensions(et),Te.setPlugins(Me),Te.parse(Ye,ze)}parseAsync(Ue,Pe){const Ye=this;return new Promise(function(ze,He){Ye.parse(Ue,Pe,ze,He)})}}function v(){let zt={};return{get:function(Ue){return zt[Ue]},add:function(Ue,Pe){zt[Ue]=Pe},remove:function(Ue){delete zt[Ue]},removeAll:function(){zt={}}}}const y={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class E{constructor(Ue){this.parser=Ue,this.name=y.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const Ue=this.parser,Pe=this.parser.json.nodes||[];for(let Ye=0,ze=Pe.length;Ye<ze;Ye++){const He=Pe[Ye];He.extensions&&He.extensions[this.name]&&He.extensions[this.name].light!==void 0&&Ue._addNodeRef(this.cache,He.extensions[this.name].light)}}_loadLight(Ue){const Pe=this.parser,Ye="light:"+Ue;let ze=Pe.cache.get(Ye);if(ze)return ze;const He=Pe.json,Te=((He.extensions&&He.extensions[this.name]||{}).lights||[])[Ue];let Oe;const Ze=new g.Color(16777215);Te.color!==void 0&&Ze.fromArray(Te.color);const ae=Te.range!==void 0?Te.range:0;switch(Te.type){case"directional":Oe=new g.DirectionalLight(Ze),Oe.target.position.set(0,0,-1),Oe.add(Oe.target);break;case"point":Oe=new g.PointLight(Ze),Oe.distance=ae;break;case"spot":Oe=new g.SpotLight(Ze),Oe.distance=ae,Te.spot=Te.spot||{},Te.spot.innerConeAngle=Te.spot.innerConeAngle!==void 0?Te.spot.innerConeAngle:0,Te.spot.outerConeAngle=Te.spot.outerConeAngle!==void 0?Te.spot.outerConeAngle:Math.PI/4,Oe.angle=Te.spot.outerConeAngle,Oe.penumbra=1-Te.spot.innerConeAngle/Te.spot.outerConeAngle,Oe.target.position.set(0,0,-1),Oe.add(Oe.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Te.type)}return Oe.position.set(0,0,0),Oe.decay=2,je(Oe,Te),Te.intensity!==void 0&&(Oe.intensity=Te.intensity),Oe.name=Pe.createUniqueName(Te.name||"light_"+Ue),ze=Promise.resolve(Oe),Pe.cache.add(Ye,ze),ze}getDependency(Ue,Pe){if(Ue==="light")return this._loadLight(Pe)}createNodeAttachment(Ue){const Pe=this,Ye=this.parser,He=Ye.json.nodes[Ue],Me=(He.extensions&&He.extensions[this.name]||{}).light;return Me===void 0?null:this._loadLight(Me).then(function(Te){return Ye._getNodeRef(Pe.cache,Me,Te)})}}class b{constructor(){this.name=y.KHR_MATERIALS_UNLIT}getMaterialType(){return g.MeshBasicMaterial}extendParams(Ue,Pe,Ye){const ze=[];Ue.color=new g.Color(1,1,1),Ue.opacity=1;const He=Pe.pbrMetallicRoughness;if(He){if(Array.isArray(He.baseColorFactor)){const et=He.baseColorFactor;Ue.color.fromArray(et),Ue.opacity=et[3]}He.baseColorTexture!==void 0&&ze.push(Ye.assignTexture(Ue,"map",He.baseColorTexture,g.sRGBEncoding))}return Promise.all(ze)}}class m{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(Ue,Pe){const ze=this.parser.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=ze.extensions[this.name].emissiveStrength;return He!==void 0&&(Pe.emissiveIntensity=He),Promise.resolve()}}class w{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_CLEARCOAT}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];if(et.clearcoatFactor!==void 0&&(Pe.clearcoat=et.clearcoatFactor),et.clearcoatTexture!==void 0&&He.push(Ye.assignTexture(Pe,"clearcoatMap",et.clearcoatTexture)),et.clearcoatRoughnessFactor!==void 0&&(Pe.clearcoatRoughness=et.clearcoatRoughnessFactor),et.clearcoatRoughnessTexture!==void 0&&He.push(Ye.assignTexture(Pe,"clearcoatRoughnessMap",et.clearcoatRoughnessTexture)),et.clearcoatNormalTexture!==void 0&&(He.push(Ye.assignTexture(Pe,"clearcoatNormalMap",et.clearcoatNormalTexture)),et.clearcoatNormalTexture.scale!==void 0)){const Me=et.clearcoatNormalTexture.scale;Pe.clearcoatNormalScale=new g.Vector2(Me,Me)}return Promise.all(He)}}class _{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_IRIDESCENCE}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];return et.iridescenceFactor!==void 0&&(Pe.iridescence=et.iridescenceFactor),et.iridescenceTexture!==void 0&&He.push(Ye.assignTexture(Pe,"iridescenceMap",et.iridescenceTexture)),et.iridescenceIor!==void 0&&(Pe.iridescenceIOR=et.iridescenceIor),Pe.iridescenceThicknessRange===void 0&&(Pe.iridescenceThicknessRange=[100,400]),et.iridescenceThicknessMinimum!==void 0&&(Pe.iridescenceThicknessRange[0]=et.iridescenceThicknessMinimum),et.iridescenceThicknessMaximum!==void 0&&(Pe.iridescenceThicknessRange[1]=et.iridescenceThicknessMaximum),et.iridescenceThicknessTexture!==void 0&&He.push(Ye.assignTexture(Pe,"iridescenceThicknessMap",et.iridescenceThicknessTexture)),Promise.all(He)}}class O{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_SHEEN}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[];Pe.sheenColor=new g.Color(0,0,0),Pe.sheenRoughness=0,Pe.sheen=1;const et=ze.extensions[this.name];return et.sheenColorFactor!==void 0&&Pe.sheenColor.fromArray(et.sheenColorFactor),et.sheenRoughnessFactor!==void 0&&(Pe.sheenRoughness=et.sheenRoughnessFactor),et.sheenColorTexture!==void 0&&He.push(Ye.assignTexture(Pe,"sheenColorMap",et.sheenColorTexture,g.sRGBEncoding)),et.sheenRoughnessTexture!==void 0&&He.push(Ye.assignTexture(Pe,"sheenRoughnessMap",et.sheenRoughnessTexture)),Promise.all(He)}}class R{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_TRANSMISSION}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];return et.transmissionFactor!==void 0&&(Pe.transmission=et.transmissionFactor),et.transmissionTexture!==void 0&&He.push(Ye.assignTexture(Pe,"transmissionMap",et.transmissionTexture)),Promise.all(He)}}class L{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_VOLUME}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];Pe.thickness=et.thicknessFactor!==void 0?et.thicknessFactor:0,et.thicknessTexture!==void 0&&He.push(Ye.assignTexture(Pe,"thicknessMap",et.thicknessTexture)),Pe.attenuationDistance=et.attenuationDistance||1/0;const Me=et.attenuationColor||[1,1,1];return Pe.attenuationColor=new g.Color(Me[0],Me[1],Me[2]),Promise.all(He)}}class P{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_IOR}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const ze=this.parser.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=ze.extensions[this.name];return Pe.ior=He.ior!==void 0?He.ior:1.5,Promise.resolve()}}class Y{constructor(Ue){this.parser=Ue,this.name=y.KHR_MATERIALS_SPECULAR}getMaterialType(Ue){const Ye=this.parser.json.materials[Ue];return!Ye.extensions||!Ye.extensions[this.name]?null:g.MeshPhysicalMaterial}extendMaterialParams(Ue,Pe){const Ye=this.parser,ze=Ye.json.materials[Ue];if(!ze.extensions||!ze.extensions[this.name])return Promise.resolve();const He=[],et=ze.extensions[this.name];Pe.specularIntensity=et.specularFactor!==void 0?et.specularFactor:1,et.specularTexture!==void 0&&He.push(Ye.assignTexture(Pe,"specularIntensityMap",et.specularTexture));const Me=et.specularColorFactor||[1,1,1];return Pe.specularColor=new g.Color(Me[0],Me[1],Me[2]),et.specularColorTexture!==void 0&&He.push(Ye.assignTexture(Pe,"specularColorMap",et.specularColorTexture,g.sRGBEncoding)),Promise.all(He)}}class J{constructor(Ue){this.parser=Ue,this.name=y.KHR_TEXTURE_BASISU}loadTexture(Ue){const Pe=this.parser,Ye=Pe.json,ze=Ye.textures[Ue];if(!ze.extensions||!ze.extensions[this.name])return null;const He=ze.extensions[this.name],et=Pe.options.ktx2Loader;if(!et){if(Ye.extensionsRequired&&Ye.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return Pe.loadTextureImage(Ue,He.source,et)}}class j{constructor(Ue){this.parser=Ue,this.name=y.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(Ue){const Pe=this.name,Ye=this.parser,ze=Ye.json,He=ze.textures[Ue];if(!He.extensions||!He.extensions[Pe])return null;const et=He.extensions[Pe],Me=ze.images[et.source];let Te=Ye.textureLoader;if(Me.uri){const Oe=Ye.options.manager.getHandler(Me.uri);Oe!==null&&(Te=Oe)}return this.detectSupport().then(function(Oe){if(Oe)return Ye.loadTextureImage(Ue,et.source,Te);if(ze.extensionsRequired&&ze.extensionsRequired.indexOf(Pe)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Ye.loadTexture(Ue)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(Ue){const Pe=new Image;Pe.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",Pe.onload=Pe.onerror=function(){Ue(Pe.height===1)}})),this.isSupported}}class k{constructor(Ue){this.name=y.EXT_MESHOPT_COMPRESSION,this.parser=Ue}loadBufferView(Ue){const Pe=this.parser.json,Ye=Pe.bufferViews[Ue];if(Ye.extensions&&Ye.extensions[this.name]){const ze=Ye.extensions[this.name],He=this.parser.getDependency("buffer",ze.buffer),et=this.parser.options.meshoptDecoder;if(!et||!et.supported){if(Pe.extensionsRequired&&Pe.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return He.then(function(Me){const Te=ze.byteOffset||0,Oe=ze.byteLength||0,Ze=ze.count,ae=ze.byteStride,ee=new Uint8Array(Me,Te,Oe);return et.decodeGltfBufferAsync?et.decodeGltfBufferAsync(Ze,ae,ee,ze.mode,ze.filter).then(function(se){return se.buffer}):et.ready.then(function(){const se=new ArrayBuffer(Ze*ae);return et.decodeGltfBuffer(new Uint8Array(se),Ze,ae,ee,ze.mode,ze.filter),se})})}else return null}}class te{constructor(Ue){this.name=y.EXT_MESH_GPU_INSTANCING,this.parser=Ue}createNodeMesh(Ue){const Pe=this.parser.json,Ye=Pe.nodes[Ue];if(!Ye.extensions||!Ye.extensions[this.name]||Ye.mesh===void 0)return null;const ze=Pe.meshes[Ye.mesh];for(const Oe of ze.primitives)if(Oe.mode!==Ae.TRIANGLES&&Oe.mode!==Ae.TRIANGLE_STRIP&&Oe.mode!==Ae.TRIANGLE_FAN&&Oe.mode!==void 0)return null;const et=Ye.extensions[this.name].attributes,Me=[],Te={};for(const Oe in et)Me.push(this.parser.getDependency("accessor",et[Oe]).then(Ze=>(Te[Oe]=Ze,Te[Oe])));return Me.length<1?null:(Me.push(this.parser.createNodeMesh(Ue)),Promise.all(Me).then(Oe=>{const Ze=Oe.pop(),ae=Ze.isGroup?Ze.children:[Ze],ee=Oe[0].count,se=[];for(const Ie of ae){const We=new g.Matrix4,Ke=new g.Vector3,$e=new g.Quaternion,Vt=new g.Vector3(1,1,1),$t=new g.InstancedMesh(Ie.geometry,Ie.material,ee);for(let Xt=0;Xt<ee;Xt++)Te.TRANSLATION&&Ke.fromBufferAttribute(Te.TRANSLATION,Xt),Te.ROTATION&&$e.fromBufferAttribute(Te.ROTATION,Xt),Te.SCALE&&Vt.fromBufferAttribute(Te.SCALE,Xt),$t.setMatrixAt(Xt,We.compose(Ke,$e,Vt));for(const Xt in Te)Xt!=="TRANSLATION"&&Xt!=="ROTATION"&&Xt!=="SCALE"&&Ie.geometry.setAttribute(Xt,Te[Xt]);g.Object3D.prototype.copy.call($t,Ie),$t.frustumCulled=!1,this.parser.assignFinalMaterial($t),se.push($t)}return Ze.isGroup?(Ze.clear(),Ze.add(...se),Ze):se[0]}))}}const ue="glTF",xe=12,Ee={JSON:1313821514,BIN:5130562};class V{constructor(Ue){this.name=y.KHR_BINARY_GLTF,this.content=null,this.body=null;const Pe=new DataView(Ue,0,xe);if(this.header={magic:g.LoaderUtils.decodeText(new Uint8Array(Ue.slice(0,4))),version:Pe.getUint32(4,!0),length:Pe.getUint32(8,!0)},this.header.magic!==ue)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const Ye=this.header.length-xe,ze=new DataView(Ue,xe);let He=0;for(;He<Ye;){const et=ze.getUint32(He,!0);He+=4;const Me=ze.getUint32(He,!0);if(He+=4,Me===Ee.JSON){const Te=new Uint8Array(Ue,xe+He,et);this.content=g.LoaderUtils.decodeText(Te)}else if(Me===Ee.BIN){const Te=xe+He;this.body=Ue.slice(Te,Te+et)}He+=et}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class q{constructor(Ue,Pe){if(!Pe)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=y.KHR_DRACO_MESH_COMPRESSION,this.json=Ue,this.dracoLoader=Pe,this.dracoLoader.preload()}decodePrimitive(Ue,Pe){const Ye=this.json,ze=this.dracoLoader,He=Ue.extensions[this.name].bufferView,et=Ue.extensions[this.name].attributes,Me={},Te={},Oe={};for(const Ze in et){const ae=xt[Ze]||Ze.toLowerCase();Me[ae]=et[Ze]}for(const Ze in Ue.attributes){const ae=xt[Ze]||Ze.toLowerCase();if(et[Ze]!==void 0){const ee=Ye.accessors[Ue.attributes[Ze]],se=Se[ee.componentType];Oe[ae]=se.name,Te[ae]=ee.normalized===!0}}return Pe.getDependency("bufferView",He).then(function(Ze){return new Promise(function(ae){ze.decodeDracoFile(Ze,function(ee){for(const se in ee.attributes){const Ie=ee.attributes[se],We=Te[se];We!==void 0&&(Ie.normalized=We)}ae(ee)},Me,Oe)})})}}class Q{constructor(){this.name=y.KHR_TEXTURE_TRANSFORM}extendTexture(Ue,Pe){return Pe.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),Pe.offset===void 0&&Pe.rotation===void 0&&Pe.scale===void 0||(Ue=Ue.clone(),Pe.offset!==void 0&&Ue.offset.fromArray(Pe.offset),Pe.rotation!==void 0&&(Ue.rotation=Pe.rotation),Pe.scale!==void 0&&Ue.repeat.fromArray(Pe.scale),Ue.needsUpdate=!0),Ue}}class F{constructor(){this.name=y.KHR_MESH_QUANTIZATION}}class z extends g.Interpolant{constructor(Ue,Pe,Ye,ze){super(Ue,Pe,Ye,ze)}copySampleValue_(Ue){const Pe=this.resultBuffer,Ye=this.sampleValues,ze=this.valueSize,He=Ue*ze*3+ze;for(let et=0;et!==ze;et++)Pe[et]=Ye[He+et];return Pe}interpolate_(Ue,Pe,Ye,ze){const He=this.resultBuffer,et=this.sampleValues,Me=this.valueSize,Te=Me*2,Oe=Me*3,Ze=ze-Pe,ae=(Ye-Pe)/Ze,ee=ae*ae,se=ee*ae,Ie=Ue*Oe,We=Ie-Oe,Ke=-2*se+3*ee,$e=se-ee,Vt=1-Ke,$t=$e-ee+ae;for(let Xt=0;Xt!==Me;Xt++){const jt=et[We+Xt+Me],on=et[We+Xt+Te]*Ze,In=et[Ie+Xt+Me],di=et[Ie+Xt]*Ze;He[Xt]=Vt*jt+$t*on+Ke*In+$e*di}return He}}const X=new g.Quaternion;class fe extends z{interpolate_(Ue,Pe,Ye,ze){const He=super.interpolate_(Ue,Pe,Ye,ze);return X.fromArray(He).normalize().toArray(He),He}}const Ae={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Se={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Be={9728:g.NearestFilter,9729:g.LinearFilter,9984:g.NearestMipmapNearestFilter,9985:g.LinearMipmapNearestFilter,9986:g.NearestMipmapLinearFilter,9987:g.LinearMipmapLinearFilter},Ge={33071:g.ClampToEdgeWrapping,33648:g.MirroredRepeatWrapping,10497:g.RepeatWrapping},ht={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},at={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Gt={CUBICSPLINE:void 0,LINEAR:g.InterpolateLinear,STEP:g.InterpolateDiscrete},wt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Yt(zt){return zt.DefaultMaterial===void 0&&(zt.DefaultMaterial=new g.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:g.FrontSide})),zt.DefaultMaterial}function Mn(zt,Ue,Pe){for(const Ye in Pe.extensions)zt[Ye]===void 0&&(Ue.userData.gltfExtensions=Ue.userData.gltfExtensions||{},Ue.userData.gltfExtensions[Ye]=Pe.extensions[Ye])}function je(zt,Ue){Ue.extras!==void 0&&(typeof Ue.extras=="object"?Object.assign(zt.userData,Ue.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Ue.extras))}function rt(zt,Ue,Pe){let Ye=!1,ze=!1,He=!1;for(let Oe=0,Ze=Ue.length;Oe<Ze;Oe++){const ae=Ue[Oe];if(ae.POSITION!==void 0&&(Ye=!0),ae.NORMAL!==void 0&&(ze=!0),ae.COLOR_0!==void 0&&(He=!0),Ye&&ze&&He)break}if(!Ye&&!ze&&!He)return Promise.resolve(zt);const et=[],Me=[],Te=[];for(let Oe=0,Ze=Ue.length;Oe<Ze;Oe++){const ae=Ue[Oe];if(Ye){const ee=ae.POSITION!==void 0?Pe.getDependency("accessor",ae.POSITION):zt.attributes.position;et.push(ee)}if(ze){const ee=ae.NORMAL!==void 0?Pe.getDependency("accessor",ae.NORMAL):zt.attributes.normal;Me.push(ee)}if(He){const ee=ae.COLOR_0!==void 0?Pe.getDependency("accessor",ae.COLOR_0):zt.attributes.color;Te.push(ee)}}return Promise.all([Promise.all(et),Promise.all(Me),Promise.all(Te)]).then(function(Oe){const Ze=Oe[0],ae=Oe[1],ee=Oe[2];return Ye&&(zt.morphAttributes.position=Ze),ze&&(zt.morphAttributes.normal=ae),He&&(zt.morphAttributes.color=ee),zt.morphTargetsRelative=!0,zt})}function At(zt,Ue){if(zt.updateMorphTargets(),Ue.weights!==void 0)for(let Pe=0,Ye=Ue.weights.length;Pe<Ye;Pe++)zt.morphTargetInfluences[Pe]=Ue.weights[Pe];if(Ue.extras&&Array.isArray(Ue.extras.targetNames)){const Pe=Ue.extras.targetNames;if(zt.morphTargetInfluences.length===Pe.length){zt.morphTargetDictionary={};for(let Ye=0,ze=Pe.length;Ye<ze;Ye++)zt.morphTargetDictionary[Pe[Ye]]=Ye}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Bt(zt){const Ue=zt.extensions&&zt.extensions[y.KHR_DRACO_MESH_COMPRESSION];let Pe;return Ue?Pe="draco:"+Ue.bufferView+":"+Ue.indices+":"+Pt(Ue.attributes):Pe=zt.indices+":"+Pt(zt.attributes)+":"+zt.mode,Pe}function Pt(zt){let Ue="";const Pe=Object.keys(zt).sort();for(let Ye=0,ze=Pe.length;Ye<ze;Ye++)Ue+=Pe[Ye]+":"+zt[Pe[Ye]]+";";return Ue}function qt(zt){switch(zt){case Int8Array:return .007874015748031496;case Uint8Array:return .00392156862745098;case Int16Array:return 3051850947599719e-20;case Uint16Array:return 15259021896696422e-21;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function un(zt){return zt.search(/\.jpe?g($|\?)/i)>0||zt.search(/^data\:image\/jpeg/)===0?"image/jpeg":zt.search(/\.webp($|\?)/i)>0||zt.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class dn{constructor(Ue={},Pe={}){this.json=Ue,this.extensions={},this.plugins={},this.options=Pe,this.cache=new v,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let Ye=!1,ze=!1,He=-1;typeof navigator<"u"&&(Ye=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,ze=navigator.userAgent.indexOf("Firefox")>-1,He=ze?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||Ye||ze&&He<98?this.textureLoader=new g.TextureLoader(this.options.manager):this.textureLoader=new g.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new g.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(Ue){this.extensions=Ue}setPlugins(Ue){this.plugins=Ue}parse(Ue,Pe){const Ye=this,ze=this.json,He=this.extensions;this.cache.removeAll(),this._invokeAll(function(et){return et._markDefs&&et._markDefs()}),Promise.all(this._invokeAll(function(et){return et.beforeRoot&&et.beforeRoot()})).then(function(){return Promise.all([Ye.getDependencies("scene"),Ye.getDependencies("animation"),Ye.getDependencies("camera")])}).then(function(et){const Me={scene:et[0][ze.scene||0],scenes:et[0],animations:et[1],cameras:et[2],asset:ze.asset,parser:Ye,userData:{}};Mn(He,Me,ze),je(Me,ze),Promise.all(Ye._invokeAll(function(Te){return Te.afterRoot&&Te.afterRoot(Me)})).then(function(){Ue(Me)})}).catch(Pe)}_markDefs(){const Ue=this.json.nodes||[],Pe=this.json.skins||[],Ye=this.json.meshes||[];for(let ze=0,He=Pe.length;ze<He;ze++){const et=Pe[ze].joints;for(let Me=0,Te=et.length;Me<Te;Me++)Ue[et[Me]].isBone=!0}for(let ze=0,He=Ue.length;ze<He;ze++){const et=Ue[ze];et.mesh!==void 0&&(this._addNodeRef(this.meshCache,et.mesh),et.skin!==void 0&&(Ye[et.mesh].isSkinnedMesh=!0)),et.camera!==void 0&&this._addNodeRef(this.cameraCache,et.camera)}}_addNodeRef(Ue,Pe){Pe!==void 0&&(Ue.refs[Pe]===void 0&&(Ue.refs[Pe]=Ue.uses[Pe]=0),Ue.refs[Pe]++)}_getNodeRef(Ue,Pe,Ye){if(Ue.refs[Pe]<=1)return Ye;const ze=Ye.clone(),He=(et,Me)=>{const Te=this.associations.get(et);Te!=null&&this.associations.set(Me,Te);for(const[Oe,Ze]of et.children.entries())He(Ze,Me.children[Oe])};return He(Ye,ze),ze.name+="_instance_"+Ue.uses[Pe]++,ze}_invokeOne(Ue){const Pe=Object.values(this.plugins);Pe.push(this);for(let Ye=0;Ye<Pe.length;Ye++){const ze=Ue(Pe[Ye]);if(ze)return ze}return null}_invokeAll(Ue){const Pe=Object.values(this.plugins);Pe.unshift(this);const Ye=[];for(let ze=0;ze<Pe.length;ze++){const He=Ue(Pe[ze]);He&&Ye.push(He)}return Ye}getDependency(Ue,Pe){const Ye=Ue+":"+Pe;let ze=this.cache.get(Ye);if(!ze){switch(Ue){case"scene":ze=this.loadScene(Pe);break;case"node":ze=this.loadNode(Pe);break;case"mesh":ze=this._invokeOne(function(He){return He.loadMesh&&He.loadMesh(Pe)});break;case"accessor":ze=this.loadAccessor(Pe);break;case"bufferView":ze=this._invokeOne(function(He){return He.loadBufferView&&He.loadBufferView(Pe)});break;case"buffer":ze=this.loadBuffer(Pe);break;case"material":ze=this._invokeOne(function(He){return He.loadMaterial&&He.loadMaterial(Pe)});break;case"texture":ze=this._invokeOne(function(He){return He.loadTexture&&He.loadTexture(Pe)});break;case"skin":ze=this.loadSkin(Pe);break;case"animation":ze=this._invokeOne(function(He){return He.loadAnimation&&He.loadAnimation(Pe)});break;case"camera":ze=this.loadCamera(Pe);break;default:if(ze=this._invokeOne(function(He){return He!=this&&He.getDependency&&He.getDependency(Ue,Pe)}),!ze)throw new Error("Unknown type: "+Ue);break}this.cache.add(Ye,ze)}return ze}getDependencies(Ue){let Pe=this.cache.get(Ue);if(!Pe){const Ye=this,ze=this.json[Ue+(Ue==="mesh"?"es":"s")]||[];Pe=Promise.all(ze.map(function(He,et){return Ye.getDependency(Ue,et)})),this.cache.add(Ue,Pe)}return Pe}loadBuffer(Ue){const Pe=this.json.buffers[Ue],Ye=this.fileLoader;if(Pe.type&&Pe.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+Pe.type+" buffer type is not supported.");if(Pe.uri===void 0&&Ue===0)return Promise.resolve(this.extensions[y.KHR_BINARY_GLTF].body);const ze=this.options;return new Promise(function(He,et){Ye.load(g.LoaderUtils.resolveURL(Pe.uri,ze.path),He,void 0,function(){et(new Error('THREE.GLTFLoader: Failed to load buffer "'+Pe.uri+'".'))})})}loadBufferView(Ue){const Pe=this.json.bufferViews[Ue];return this.getDependency("buffer",Pe.buffer).then(function(Ye){const ze=Pe.byteLength||0,He=Pe.byteOffset||0;return Ye.slice(He,He+ze)})}loadAccessor(Ue){const Pe=this,Ye=this.json,ze=this.json.accessors[Ue];if(ze.bufferView===void 0&&ze.sparse===void 0){const et=ht[ze.type],Me=Se[ze.componentType],Te=ze.normalized===!0,Oe=new Me(ze.count*et);return Promise.resolve(new g.BufferAttribute(Oe,et,Te))}const He=[];return ze.bufferView!==void 0?He.push(this.getDependency("bufferView",ze.bufferView)):He.push(null),ze.sparse!==void 0&&(He.push(this.getDependency("bufferView",ze.sparse.indices.bufferView)),He.push(this.getDependency("bufferView",ze.sparse.values.bufferView))),Promise.all(He).then(function(et){const Me=et[0],Te=ht[ze.type],Oe=Se[ze.componentType],Ze=Oe.BYTES_PER_ELEMENT,ae=Ze*Te,ee=ze.byteOffset||0,se=ze.bufferView!==void 0?Ye.bufferViews[ze.bufferView].byteStride:void 0,Ie=ze.normalized===!0;let We,Ke;if(se&&se!==ae){const $e=Math.floor(ee/se),Vt="InterleavedBuffer:"+ze.bufferView+":"+ze.componentType+":"+$e+":"+ze.count;let $t=Pe.cache.get(Vt);$t||(We=new Oe(Me,$e*se,ze.count*se/Ze),$t=new g.InterleavedBuffer(We,se/Ze),Pe.cache.add(Vt,$t)),Ke=new g.InterleavedBufferAttribute($t,Te,ee%se/Ze,Ie)}else Me===null?We=new Oe(ze.count*Te):We=new Oe(Me,ee,ze.count*Te),Ke=new g.BufferAttribute(We,Te,Ie);if(ze.sparse!==void 0){const $e=ht.SCALAR,Vt=Se[ze.sparse.indices.componentType],$t=ze.sparse.indices.byteOffset||0,Xt=ze.sparse.values.byteOffset||0,jt=new Vt(et[1],$t,ze.sparse.count*$e),on=new Oe(et[2],Xt,ze.sparse.count*Te);Me!==null&&(Ke=new g.BufferAttribute(Ke.array.slice(),Ke.itemSize,Ke.normalized));for(let In=0,di=jt.length;In<di;In++){const fi=jt[In];if(Ke.setX(fi,on[In*Te]),Te>=2&&Ke.setY(fi,on[In*Te+1]),Te>=3&&Ke.setZ(fi,on[In*Te+2]),Te>=4&&Ke.setW(fi,on[In*Te+3]),Te>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Ke})}loadTexture(Ue){const Pe=this.json,Ye=this.options,He=Pe.textures[Ue].source,et=Pe.images[He];let Me=this.textureLoader;if(et.uri){const Te=Ye.manager.getHandler(et.uri);Te!==null&&(Me=Te)}return this.loadTextureImage(Ue,He,Me)}loadTextureImage(Ue,Pe,Ye){const ze=this,He=this.json,et=He.textures[Ue],Me=He.images[Pe],Te=(Me.uri||Me.bufferView)+":"+et.sampler;if(this.textureCache[Te])return this.textureCache[Te];const Oe=this.loadImageSource(Pe,Ye).then(function(Ze){Ze.flipY=!1,Ze.name=et.name||Me.name||"";const ee=(He.samplers||{})[et.sampler]||{};return Ze.magFilter=Be[ee.magFilter]||g.LinearFilter,Ze.minFilter=Be[ee.minFilter]||g.LinearMipmapLinearFilter,Ze.wrapS=Ge[ee.wrapS]||g.RepeatWrapping,Ze.wrapT=Ge[ee.wrapT]||g.RepeatWrapping,ze.associations.set(Ze,{textures:Ue}),Ze}).catch(function(){return null});return this.textureCache[Te]=Oe,Oe}loadImageSource(Ue,Pe){const Ye=this,ze=this.json,He=this.options;if(this.sourceCache[Ue]!==void 0)return this.sourceCache[Ue].then(ae=>ae.clone());const et=ze.images[Ue],Me=self.URL||self.webkitURL;let Te=et.uri||"",Oe=!1;if(et.bufferView!==void 0)Te=Ye.getDependency("bufferView",et.bufferView).then(function(ae){Oe=!0;const ee=new Blob([ae],{type:et.mimeType});return Te=Me.createObjectURL(ee),Te});else if(et.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+Ue+" is missing URI and bufferView");const Ze=Promise.resolve(Te).then(function(ae){return new Promise(function(ee,se){let Ie=ee;Pe.isImageBitmapLoader===!0&&(Ie=function(We){const Ke=new g.Texture(We);Ke.needsUpdate=!0,ee(Ke)}),Pe.load(g.LoaderUtils.resolveURL(ae,He.path),Ie,void 0,se)})}).then(function(ae){return Oe===!0&&Me.revokeObjectURL(Te),ae.userData.mimeType=et.mimeType||un(et.uri),ae}).catch(function(ae){throw console.error("THREE.GLTFLoader: Couldn't load texture",Te),ae});return this.sourceCache[Ue]=Ze,Ze}assignTexture(Ue,Pe,Ye,ze){const He=this;return this.getDependency("texture",Ye.index).then(function(et){if(!et)return null;if(Ye.texCoord!==void 0&&Ye.texCoord!=0&&!(Pe==="aoMap"&&Ye.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+Ye.texCoord+" for texture "+Pe+" not yet supported."),He.extensions[y.KHR_TEXTURE_TRANSFORM]){const Me=Ye.extensions!==void 0?Ye.extensions[y.KHR_TEXTURE_TRANSFORM]:void 0;if(Me){const Te=He.associations.get(et);et=He.extensions[y.KHR_TEXTURE_TRANSFORM].extendTexture(et,Me),He.associations.set(et,Te)}}return ze!==void 0&&(et.encoding=ze),Ue[Pe]=et,et})}assignFinalMaterial(Ue){const Pe=Ue.geometry;let Ye=Ue.material;const ze=Pe.attributes.tangent===void 0,He=Pe.attributes.color!==void 0,et=Pe.attributes.normal===void 0;if(Ue.isPoints){const Me="PointsMaterial:"+Ye.uuid;let Te=this.cache.get(Me);Te||(Te=new g.PointsMaterial,g.Material.prototype.copy.call(Te,Ye),Te.color.copy(Ye.color),Te.map=Ye.map,Te.sizeAttenuation=!1,this.cache.add(Me,Te)),Ye=Te}else if(Ue.isLine){const Me="LineBasicMaterial:"+Ye.uuid;let Te=this.cache.get(Me);Te||(Te=new g.LineBasicMaterial,g.Material.prototype.copy.call(Te,Ye),Te.color.copy(Ye.color),this.cache.add(Me,Te)),Ye=Te}if(ze||He||et){let Me="ClonedMaterial:"+Ye.uuid+":";ze&&(Me+="derivative-tangents:"),He&&(Me+="vertex-colors:"),et&&(Me+="flat-shading:");let Te=this.cache.get(Me);Te||(Te=Ye.clone(),He&&(Te.vertexColors=!0),et&&(Te.flatShading=!0),ze&&(Te.normalScale&&(Te.normalScale.y*=-1),Te.clearcoatNormalScale&&(Te.clearcoatNormalScale.y*=-1)),this.cache.add(Me,Te),this.associations.set(Te,this.associations.get(Ye))),Ye=Te}Ye.aoMap&&Pe.attributes.uv2===void 0&&Pe.attributes.uv!==void 0&&Pe.setAttribute("uv2",Pe.attributes.uv),Ue.material=Ye}getMaterialType(){return g.MeshStandardMaterial}loadMaterial(Ue){const Pe=this,Ye=this.json,ze=this.extensions,He=Ye.materials[Ue];let et;const Me={},Te=He.extensions||{},Oe=[];if(Te[y.KHR_MATERIALS_UNLIT]){const ae=ze[y.KHR_MATERIALS_UNLIT];et=ae.getMaterialType(),Oe.push(ae.extendParams(Me,He,Pe))}else{const ae=He.pbrMetallicRoughness||{};if(Me.color=new g.Color(1,1,1),Me.opacity=1,Array.isArray(ae.baseColorFactor)){const ee=ae.baseColorFactor;Me.color.fromArray(ee),Me.opacity=ee[3]}ae.baseColorTexture!==void 0&&Oe.push(Pe.assignTexture(Me,"map",ae.baseColorTexture,g.sRGBEncoding)),Me.metalness=ae.metallicFactor!==void 0?ae.metallicFactor:1,Me.roughness=ae.roughnessFactor!==void 0?ae.roughnessFactor:1,ae.metallicRoughnessTexture!==void 0&&(Oe.push(Pe.assignTexture(Me,"metalnessMap",ae.metallicRoughnessTexture)),Oe.push(Pe.assignTexture(Me,"roughnessMap",ae.metallicRoughnessTexture))),et=this._invokeOne(function(ee){return ee.getMaterialType&&ee.getMaterialType(Ue)}),Oe.push(Promise.all(this._invokeAll(function(ee){return ee.extendMaterialParams&&ee.extendMaterialParams(Ue,Me)})))}He.doubleSided===!0&&(Me.side=g.DoubleSide);const Ze=He.alphaMode||wt.OPAQUE;if(Ze===wt.BLEND?(Me.transparent=!0,Me.depthWrite=!1):(Me.transparent=!1,Ze===wt.MASK&&(Me.alphaTest=He.alphaCutoff!==void 0?He.alphaCutoff:.5)),He.normalTexture!==void 0&&et!==g.MeshBasicMaterial&&(Oe.push(Pe.assignTexture(Me,"normalMap",He.normalTexture)),Me.normalScale=new g.Vector2(1,1),He.normalTexture.scale!==void 0)){const ae=He.normalTexture.scale;Me.normalScale.set(ae,ae)}return He.occlusionTexture!==void 0&&et!==g.MeshBasicMaterial&&(Oe.push(Pe.assignTexture(Me,"aoMap",He.occlusionTexture)),He.occlusionTexture.strength!==void 0&&(Me.aoMapIntensity=He.occlusionTexture.strength)),He.emissiveFactor!==void 0&&et!==g.MeshBasicMaterial&&(Me.emissive=new g.Color().fromArray(He.emissiveFactor)),He.emissiveTexture!==void 0&&et!==g.MeshBasicMaterial&&Oe.push(Pe.assignTexture(Me,"emissiveMap",He.emissiveTexture,g.sRGBEncoding)),Promise.all(Oe).then(function(){const ae=new et(Me);return He.name&&(ae.name=He.name),je(ae,He),Pe.associations.set(ae,{materials:Ue}),He.extensions&&Mn(ze,ae,He),ae})}createUniqueName(Ue){const Pe=g.PropertyBinding.sanitizeNodeName(Ue||"");let Ye=Pe;for(let ze=1;this.nodeNamesUsed[Ye];++ze)Ye=Pe+"_"+ze;return this.nodeNamesUsed[Ye]=!0,Ye}loadGeometries(Ue){const Pe=this,Ye=this.extensions,ze=this.primitiveCache;function He(Me){return Ye[y.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Me,Pe).then(function(Te){return ri(Te,Me,Pe)})}const et=[];for(let Me=0,Te=Ue.length;Me<Te;Me++){const Oe=Ue[Me],Ze=Bt(Oe),ae=ze[Ze];if(ae)et.push(ae.promise);else{let ee;Oe.extensions&&Oe.extensions[y.KHR_DRACO_MESH_COMPRESSION]?ee=He(Oe):ee=ri(new g.BufferGeometry,Oe,Pe),ze[Ze]={primitive:Oe,promise:ee},et.push(ee)}}return Promise.all(et)}loadMesh(Ue){const Pe=this,Ye=this.json,ze=this.extensions,He=Ye.meshes[Ue],et=He.primitives,Me=[];for(let Te=0,Oe=et.length;Te<Oe;Te++){const Ze=et[Te].material===void 0?Yt(this.cache):this.getDependency("material",et[Te].material);Me.push(Ze)}return Me.push(Pe.loadGeometries(et)),Promise.all(Me).then(function(Te){const Oe=Te.slice(0,Te.length-1),Ze=Te[Te.length-1],ae=[];for(let se=0,Ie=Ze.length;se<Ie;se++){const We=Ze[se],Ke=et[se];let $e;const Vt=Oe[se];if(Ke.mode===Ae.TRIANGLES||Ke.mode===Ae.TRIANGLE_STRIP||Ke.mode===Ae.TRIANGLE_FAN||Ke.mode===void 0)$e=He.isSkinnedMesh===!0?new g.SkinnedMesh(We,Vt):new g.Mesh(We,Vt),$e.isSkinnedMesh===!0&&!$e.geometry.attributes.skinWeight.normalized&&$e.normalizeSkinWeights(),Ke.mode===Ae.TRIANGLE_STRIP?$e.geometry=ni($e.geometry,g.TriangleStripDrawMode):Ke.mode===Ae.TRIANGLE_FAN&&($e.geometry=ni($e.geometry,g.TriangleFanDrawMode));else if(Ke.mode===Ae.LINES)$e=new g.LineSegments(We,Vt);else if(Ke.mode===Ae.LINE_STRIP)$e=new g.Line(We,Vt);else if(Ke.mode===Ae.LINE_LOOP)$e=new g.LineLoop(We,Vt);else if(Ke.mode===Ae.POINTS)$e=new g.Points(We,Vt);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Ke.mode);Object.keys($e.geometry.morphAttributes).length>0&&At($e,He),$e.name=Pe.createUniqueName(He.name||"mesh_"+Ue),je($e,He),Ke.extensions&&Mn(ze,$e,Ke),Pe.assignFinalMaterial($e),ae.push($e)}for(let se=0,Ie=ae.length;se<Ie;se++)Pe.associations.set(ae[se],{meshes:Ue,primitives:se});if(ae.length===1)return ae[0];const ee=new g.Group;Pe.associations.set(ee,{meshes:Ue});for(let se=0,Ie=ae.length;se<Ie;se++)ee.add(ae[se]);return ee})}loadCamera(Ue){let Pe;const Ye=this.json.cameras[Ue],ze=Ye[Ye.type];if(!ze){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Ye.type==="perspective"?Pe=new g.PerspectiveCamera(g.MathUtils.radToDeg(ze.yfov),ze.aspectRatio||1,ze.znear||1,ze.zfar||2e6):Ye.type==="orthographic"&&(Pe=new g.OrthographicCamera(-ze.xmag,ze.xmag,ze.ymag,-ze.ymag,ze.znear,ze.zfar)),Ye.name&&(Pe.name=this.createUniqueName(Ye.name)),je(Pe,Ye),Promise.resolve(Pe)}loadSkin(Ue){const Pe=this.json.skins[Ue],Ye=[];for(let ze=0,He=Pe.joints.length;ze<He;ze++)Ye.push(this.getDependency("node",Pe.joints[ze]));return Pe.inverseBindMatrices!==void 0?Ye.push(this.getDependency("accessor",Pe.inverseBindMatrices)):Ye.push(null),Promise.all(Ye).then(function(ze){const He=ze.pop(),et=ze,Me=[],Te=[];for(let Oe=0,Ze=et.length;Oe<Ze;Oe++){const ae=et[Oe];if(ae){Me.push(ae);const ee=new g.Matrix4;He!==null&&ee.fromArray(He.array,Oe*16),Te.push(ee)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Pe.joints[Oe])}return new g.Skeleton(Me,Te)})}loadAnimation(Ue){const Ye=this.json.animations[Ue],ze=[],He=[],et=[],Me=[],Te=[];for(let Oe=0,Ze=Ye.channels.length;Oe<Ze;Oe++){const ae=Ye.channels[Oe],ee=Ye.samplers[ae.sampler],se=ae.target,Ie=se.node,We=Ye.parameters!==void 0?Ye.parameters[ee.input]:ee.input,Ke=Ye.parameters!==void 0?Ye.parameters[ee.output]:ee.output;ze.push(this.getDependency("node",Ie)),He.push(this.getDependency("accessor",We)),et.push(this.getDependency("accessor",Ke)),Me.push(ee),Te.push(se)}return Promise.all([Promise.all(ze),Promise.all(He),Promise.all(et),Promise.all(Me),Promise.all(Te)]).then(function(Oe){const Ze=Oe[0],ae=Oe[1],ee=Oe[2],se=Oe[3],Ie=Oe[4],We=[];for(let $e=0,Vt=Ze.length;$e<Vt;$e++){const $t=Ze[$e],Xt=ae[$e],jt=ee[$e],on=se[$e],In=Ie[$e];if($t===void 0)continue;$t.updateMatrix();let di;switch(at[In.path]){case at.weights:di=g.NumberKeyframeTrack;break;case at.rotation:di=g.QuaternionKeyframeTrack;break;case at.position:case at.scale:default:di=g.VectorKeyframeTrack;break}const fi=$t.name?$t.name:$t.uuid,Nn=on.interpolation!==void 0?Gt[on.interpolation]:g.InterpolateLinear,vn=[];at[In.path]===at.weights?$t.traverse(function(yn){yn.morphTargetInfluences&&vn.push(yn.name?yn.name:yn.uuid)}):vn.push(fi);let Ft=jt.array;if(jt.normalized){const yn=qt(Ft.constructor),Gn=new Float32Array(Ft.length);for(let Dn=0,bi=Ft.length;Dn<bi;Dn++)Gn[Dn]=Ft[Dn]*yn;Ft=Gn}for(let yn=0,Gn=vn.length;yn<Gn;yn++){const Dn=new di(vn[yn]+"."+at[In.path],Xt.array,Ft,Nn);on.interpolation==="CUBICSPLINE"&&(Dn.createInterpolant=function(Pi){const Zi=this instanceof g.QuaternionKeyframeTrack?fe:z;return new Zi(this.times,this.values,this.getValueSize()/3,Pi)},Dn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),We.push(Dn)}}const Ke=Ye.name?Ye.name:"animation_"+Ue;return new g.AnimationClip(Ke,void 0,We)})}createNodeMesh(Ue){const Pe=this.json,Ye=this,ze=Pe.nodes[Ue];return ze.mesh===void 0?null:Ye.getDependency("mesh",ze.mesh).then(function(He){const et=Ye._getNodeRef(Ye.meshCache,ze.mesh,He);return ze.weights!==void 0&&et.traverse(function(Me){if(!!Me.isMesh)for(let Te=0,Oe=ze.weights.length;Te<Oe;Te++)Me.morphTargetInfluences[Te]=ze.weights[Te]}),et})}loadNode(Ue){const Pe=this.json,Ye=this.extensions,ze=this,He=Pe.nodes[Ue],et=He.name?ze.createUniqueName(He.name):"";return function(){const Me=[],Te=ze._invokeOne(function(Oe){return Oe.createNodeMesh&&Oe.createNodeMesh(Ue)});return Te&&Me.push(Te),He.camera!==void 0&&Me.push(ze.getDependency("camera",He.camera).then(function(Oe){return ze._getNodeRef(ze.cameraCache,He.camera,Oe)})),ze._invokeAll(function(Oe){return Oe.createNodeAttachment&&Oe.createNodeAttachment(Ue)}).forEach(function(Oe){Me.push(Oe)}),Promise.all(Me)}().then(function(Me){let Te;if(He.isBone===!0?Te=new g.Bone:Me.length>1?Te=new g.Group:Me.length===1?Te=Me[0]:Te=new g.Object3D,Te!==Me[0])for(let Oe=0,Ze=Me.length;Oe<Ze;Oe++)Te.add(Me[Oe]);if(He.name&&(Te.userData.name=He.name,Te.name=et),je(Te,He),He.extensions&&Mn(Ye,Te,He),He.matrix!==void 0){const Oe=new g.Matrix4;Oe.fromArray(He.matrix),Te.applyMatrix4(Oe)}else He.translation!==void 0&&Te.position.fromArray(He.translation),He.rotation!==void 0&&Te.quaternion.fromArray(He.rotation),He.scale!==void 0&&Te.scale.fromArray(He.scale);return ze.associations.has(Te)||ze.associations.set(Te,{}),ze.associations.get(Te).nodes=Ue,Te})}loadScene(Ue){const Pe=this.json,Ye=this.extensions,ze=this.json.scenes[Ue],He=this,et=new g.Group;ze.name&&(et.name=He.createUniqueName(ze.name)),je(et,ze),ze.extensions&&Mn(Ye,et,ze);const Me=ze.nodes||[],Te=[];for(let Oe=0,Ze=Me.length;Oe<Ze;Oe++)Te.push(bn(Me[Oe],et,Pe,He));return Promise.all(Te).then(function(){const Oe=Ze=>{const ae=new Map;for(const[ee,se]of He.associations)(ee instanceof g.Material||ee instanceof g.Texture)&&ae.set(ee,se);return Ze.traverse(ee=>{const se=He.associations.get(ee);se!=null&&ae.set(ee,se)}),ae};return He.associations=Oe(et),et})}}function bn(zt,Ue,Pe,Ye){const ze=Pe.nodes[zt];return Ye.getDependency("node",zt).then(function(He){return ze.skin===void 0?He:Ye.getDependency("skin",ze.skin).then(function(et){return He.traverse(function(Me){!Me.isSkinnedMesh||Me.bind(et,Me.matrixWorld)}),He})}).then(function(He){Ue.add(He);const et=[];if(ze.children){const Me=ze.children;for(let Te=0,Oe=Me.length;Te<Oe;Te++){const Ze=Me[Te];et.push(bn(Ze,He,Pe,Ye))}}return Promise.all(et)})}function tn(zt,Ue,Pe){const Ye=Ue.attributes,ze=new g.Box3;if(Ye.POSITION!==void 0){const Me=Pe.json.accessors[Ye.POSITION],Te=Me.min,Oe=Me.max;if(Te!==void 0&&Oe!==void 0){if(ze.set(new g.Vector3(Te[0],Te[1],Te[2]),new g.Vector3(Oe[0],Oe[1],Oe[2])),Me.normalized){const Ze=qt(Se[Me.componentType]);ze.min.multiplyScalar(Ze),ze.max.multiplyScalar(Ze)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const He=Ue.targets;if(He!==void 0){const Me=new g.Vector3,Te=new g.Vector3;for(let Oe=0,Ze=He.length;Oe<Ze;Oe++){const ae=He[Oe];if(ae.POSITION!==void 0){const ee=Pe.json.accessors[ae.POSITION],se=ee.min,Ie=ee.max;if(se!==void 0&&Ie!==void 0){if(Te.setX(Math.max(Math.abs(se[0]),Math.abs(Ie[0]))),Te.setY(Math.max(Math.abs(se[1]),Math.abs(Ie[1]))),Te.setZ(Math.max(Math.abs(se[2]),Math.abs(Ie[2]))),ee.normalized){const We=qt(Se[ee.componentType]);Te.multiplyScalar(We)}Me.max(Te)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}ze.expandByVector(Me)}zt.boundingBox=ze;const et=new g.Sphere;ze.getCenter(et.center),et.radius=ze.min.distanceTo(ze.max)/2,zt.boundingSphere=et}function ri(zt,Ue,Pe){const Ye=Ue.attributes,ze=[];function He(et,Me){return Pe.getDependency("accessor",et).then(function(Te){zt.setAttribute(Me,Te)})}for(const et in Ye){const Me=xt[et]||et.toLowerCase();Me in zt.attributes||ze.push(He(Ye[et],Me))}if(Ue.indices!==void 0&&!zt.index){const et=Pe.getDependency("accessor",Ue.indices).then(function(Me){zt.setIndex(Me)});ze.push(et)}return je(zt,Ue),tn(zt,Ue,Pe),Promise.all(ze).then(function(){return Ue.targets!==void 0?rt(zt,Ue.targets,Pe):zt})}function ni(zt,Ue){let Pe=zt.getIndex();if(Pe===null){const et=[],Me=zt.getAttribute("position");if(Me!==void 0){for(let Te=0;Te<Me.count;Te++)et.push(Te);zt.setIndex(et),Pe=zt.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),zt}const Ye=Pe.count-2,ze=[];if(Ue===g.TriangleFanDrawMode)for(let et=1;et<=Ye;et++)ze.push(Pe.getX(0)),ze.push(Pe.getX(et)),ze.push(Pe.getX(et+1));else for(let et=0;et<Ye;et++)et%2===0?(ze.push(Pe.getX(et)),ze.push(Pe.getX(et+1)),ze.push(Pe.getX(et+2))):(ze.push(Pe.getX(et+2)),ze.push(Pe.getX(et+1)),ze.push(Pe.getX(et)));ze.length/3!==Ye&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const He=zt.clone();return He.setIndex(ze),He}},"./node_modules/super-three/examples/jsm/loaders/KTX2Loader.js":(T,I,u)=>{u.r(I),u.d(I,{KTX2Loader:()=>w});var g=u("./node_modules/super-three/build/three.module.js"),C=u("./node_modules/super-three/examples/jsm/utils/WorkerPool.js"),v=u("./node_modules/super-three/examples/jsm/libs/ktx-parse.module.js"),y=u("./node_modules/super-three/examples/jsm/libs/zstddec.module.js");const E=new WeakMap;let b=0,m;class w extends g.Loader{constructor(Y){super(Y),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new C.WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(Y){return this.transcoderPath=Y,this}setWorkerLimit(Y){return this.workerPool.setWorkerLimit(Y),this}detectSupport(Y){return this.workerConfig={astcSupported:Y.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:Y.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:Y.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:Y.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:Y.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:Y.extensions.has("WEBGL_compressed_texture_pvrtc")||Y.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},Y.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const Y=new g.FileLoader(this.manager);Y.setPath(this.transcoderPath),Y.setWithCredentials(this.withCredentials);const J=Y.loadAsync("basis_transcoder.js"),j=new g.FileLoader(this.manager);j.setPath(this.transcoderPath),j.setResponseType("arraybuffer"),j.setWithCredentials(this.withCredentials);const k=j.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([J,k]).then(([te,ue])=>{const xe=w.BasisWorker.toString(),Ee=["/* constants */","let _EngineFormat = "+JSON.stringify(w.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(w.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(w.BasisFormat),"/* basis_transcoder.js */",te,"/* worker */",xe.substring(xe.indexOf("{")+1,xe.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Ee])),this.transcoderBinary=ue,this.workerPool.setWorkerCreator(()=>{const V=new Worker(this.workerSourceURL),q=this.transcoderBinary.slice(0);return V.postMessage({type:"init",config:this.workerConfig,transcoderBinary:q},[q]),V})}),b>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),b++}return this.transcoderPending}load(Y,J,j,k){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const te=new g.FileLoader(this.manager);te.setResponseType("arraybuffer"),te.setWithCredentials(this.withCredentials),te.load(Y,ue=>{if(E.has(ue))return E.get(ue).promise.then(J).catch(k);this._createTexture(ue).then(xe=>J?J(xe):null).catch(k)},j,k)}_createTextureFrom(Y,J){const{mipmaps:j,width:k,height:te,format:ue,type:xe,error:Ee,dfdTransferFn:V,dfdFlags:q}=Y;if(xe==="error")return Promise.reject(Ee);const Q=J.layerCount>1?new g.CompressedArrayTexture(j,k,te,J.layerCount,ue,g.UnsignedByteType):new g.CompressedTexture(j,k,te,ue,g.UnsignedByteType);return Q.minFilter=j.length===1?g.LinearFilter:g.LinearMipmapLinearFilter,Q.magFilter=g.LinearFilter,Q.generateMipmaps=!1,Q.needsUpdate=!0,Q.encoding=V===v.KHR_DF_TRANSFER_SRGB?g.sRGBEncoding:g.LinearEncoding,Q.premultiplyAlpha=!!(q&v.KHR_DF_FLAG_ALPHA_PREMULTIPLIED),Q}async _createTexture(Y,J={}){const j=(0,v.read)(new Uint8Array(Y));if(j.vkFormat!==v.VK_FORMAT_UNDEFINED)return L(j);const k=J,te=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:Y,taskConfig:k},[Y])).then(ue=>this._createTextureFrom(ue.data,j));return E.set(Y,{promise:te}),te}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),b--,this}}w.BasisFormat={ETC1S:0,UASTC_4x4:1},w.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},w.EngineFormat={RGBAFormat:g.RGBAFormat,RGBA_ASTC_4x4_Format:g.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:g.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:g.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:g.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:g.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:g.RGB_ETC1_Format,RGB_ETC2_Format:g.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:g.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:g.RGB_S3TC_DXT1_Format},w.BasisWorker=function(){let P,Y,J;const j=_EngineFormat,k=_TranscoderFormat,te=_BasisFormat;self.addEventListener("message",function(X){const fe=X.data;switch(fe.type){case"init":P=fe.config,ue(fe.transcoderBinary);break;case"transcode":Y.then(()=>{try{const{width:Ae,height:Se,hasAlpha:Be,mipmaps:Ge,format:ht,dfdTransferFn:xt,dfdFlags:at}=xe(fe.buffer),Gt=[];for(let wt=0;wt<Ge.length;++wt)Gt.push(Ge[wt].data.buffer);self.postMessage({type:"transcode",id:fe.id,width:Ae,height:Se,hasAlpha:Be,mipmaps:Ge,format:ht,dfdTransferFn:xt,dfdFlags:at},Gt)}catch(Ae){console.error(Ae),self.postMessage({type:"error",id:fe.id,error:Ae.message})}});break}});function ue(X){Y=new Promise(fe=>{J={wasmBinary:X,onRuntimeInitialized:fe},BASIS(J)}).then(()=>{J.initializeBasis(),J.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function xe(X){const fe=new J.KTX2File(new Uint8Array(X));function Ae(){fe.close(),fe.delete()}if(!fe.isValid())throw Ae(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const Se=fe.isUASTC()?te.UASTC_4x4:te.ETC1S,Be=fe.getWidth(),Ge=fe.getHeight(),ht=fe.getLayers()||1,xt=fe.getLevels(),at=fe.getHasAlpha(),Gt=fe.getDFDTransferFunc(),wt=fe.getDFDFlags(),{transcoderFormat:Yt,engineFormat:Mn}=Q(Se,Be,Ge,at);if(!Be||!Ge||!xt)throw Ae(),new Error("THREE.KTX2Loader:	Invalid texture");if(!fe.startTranscoding())throw Ae(),new Error("THREE.KTX2Loader: .startTranscoding failed");const je=[];for(let rt=0;rt<xt;rt++){const At=[];let Bt,Pt;for(let qt=0;qt<ht;qt++){const un=fe.getImageLevelInfo(rt,qt,0);Bt=un.origWidth,Pt=un.origHeight;const dn=new Uint8Array(fe.getImageTranscodedSizeInBytes(rt,qt,0,Yt));if(!fe.transcodeImage(dn,rt,qt,0,Yt,0,-1,-1))throw Ae(),new Error("THREE.KTX2Loader: .transcodeImage failed.");At.push(dn)}je.push({data:z(At),width:Bt,height:Pt})}return Ae(),{width:Be,height:Ge,hasAlpha:at,mipmaps:je,format:Mn,dfdTransferFn:Gt,dfdFlags:wt}}const Ee=[{if:"astcSupported",basisFormat:[te.UASTC_4x4],transcoderFormat:[k.ASTC_4x4,k.ASTC_4x4],engineFormat:[j.RGBA_ASTC_4x4_Format,j.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[k.BC7_M5,k.BC7_M5],engineFormat:[j.RGBA_BPTC_Format,j.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[k.BC1,k.BC3],engineFormat:[j.RGB_S3TC_DXT1_Format,j.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[k.ETC1,k.ETC2],engineFormat:[j.RGB_ETC2_Format,j.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[k.ETC1],engineFormat:[j.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[te.ETC1S,te.UASTC_4x4],transcoderFormat:[k.PVRTC1_4_RGB,k.PVRTC1_4_RGBA],engineFormat:[j.RGB_PVRTC_4BPPV1_Format,j.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],V=Ee.sort(function(X,fe){return X.priorityETC1S-fe.priorityETC1S}),q=Ee.sort(function(X,fe){return X.priorityUASTC-fe.priorityUASTC});function Q(X,fe,Ae,Se){let Be,Ge;const ht=X===te.ETC1S?V:q;for(let xt=0;xt<ht.length;xt++){const at=ht[xt];if(!!P[at.if]&&!!at.basisFormat.includes(X)&&!(Se&&at.transcoderFormat.length<2)&&!(at.needsPowerOfTwo&&!(F(fe)&&F(Ae))))return Be=at.transcoderFormat[Se?1:0],Ge=at.engineFormat[Se?1:0],{transcoderFormat:Be,engineFormat:Ge}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),Be=k.RGBA32,Ge=j.RGBAFormat,{transcoderFormat:Be,engineFormat:Ge}}function F(X){return X<=2?!0:(X&X-1)===0&&X!==0}function z(X){let fe=0;for(const Be of X)fe+=Be.byteLength;const Ae=new Uint8Array(fe);let Se=0;for(const Be of X)Ae.set(Be,Se),Se+=Be.byteLength;return Ae}};const _={[v.VK_FORMAT_R32G32B32A32_SFLOAT]:g.RGBAFormat,[v.VK_FORMAT_R16G16B16A16_SFLOAT]:g.RGBAFormat,[v.VK_FORMAT_R8G8B8A8_UNORM]:g.RGBAFormat,[v.VK_FORMAT_R8G8B8A8_SRGB]:g.RGBAFormat,[v.VK_FORMAT_R32G32_SFLOAT]:g.RGFormat,[v.VK_FORMAT_R16G16_SFLOAT]:g.RGFormat,[v.VK_FORMAT_R8G8_UNORM]:g.RGFormat,[v.VK_FORMAT_R8G8_SRGB]:g.RGFormat,[v.VK_FORMAT_R32_SFLOAT]:g.RedFormat,[v.VK_FORMAT_R16_SFLOAT]:g.RedFormat,[v.VK_FORMAT_R8_SRGB]:g.RedFormat,[v.VK_FORMAT_R8_UNORM]:g.RedFormat},O={[v.VK_FORMAT_R32G32B32A32_SFLOAT]:g.FloatType,[v.VK_FORMAT_R16G16B16A16_SFLOAT]:g.HalfFloatType,[v.VK_FORMAT_R8G8B8A8_UNORM]:g.UnsignedByteType,[v.VK_FORMAT_R8G8B8A8_SRGB]:g.UnsignedByteType,[v.VK_FORMAT_R32G32_SFLOAT]:g.FloatType,[v.VK_FORMAT_R16G16_SFLOAT]:g.HalfFloatType,[v.VK_FORMAT_R8G8_UNORM]:g.UnsignedByteType,[v.VK_FORMAT_R8G8_SRGB]:g.UnsignedByteType,[v.VK_FORMAT_R32_SFLOAT]:g.FloatType,[v.VK_FORMAT_R16_SFLOAT]:g.HalfFloatType,[v.VK_FORMAT_R8_SRGB]:g.UnsignedByteType,[v.VK_FORMAT_R8_UNORM]:g.UnsignedByteType},R={[v.VK_FORMAT_R8G8B8A8_SRGB]:g.sRGBEncoding,[v.VK_FORMAT_R8G8_SRGB]:g.sRGBEncoding,[v.VK_FORMAT_R8_SRGB]:g.sRGBEncoding};async function L(P){const{vkFormat:Y,pixelWidth:J,pixelHeight:j,pixelDepth:k}=P;if(_[Y]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const te=P.levels[0];let ue,xe;if(P.supercompressionScheme===v.KHR_SUPERCOMPRESSION_NONE)ue=te.levelData;else if(P.supercompressionScheme===v.KHR_SUPERCOMPRESSION_ZSTD)m||(m=new Promise(async V=>{const q=new y.ZSTDDecoder;await q.init(),V(q)})),ue=(await m).decode(te.levelData,te.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");O[Y]===g.FloatType?xe=new Float32Array(ue.buffer,ue.byteOffset,ue.byteLength/Float32Array.BYTES_PER_ELEMENT):O[Y]===g.HalfFloatType?xe=new Uint16Array(ue.buffer,ue.byteOffset,ue.byteLength/Uint16Array.BYTES_PER_ELEMENT):xe=ue;const Ee=k===0?new g.DataTexture(xe,J,j):new g.Data3DTexture(xe,J,j,k);return Ee.type=O[Y],Ee.format=_[Y],Ee.encoding=R[Y]||g.LinearEncoding,Ee.needsUpdate=!0,Promise.resolve(Ee)}},"./node_modules/super-three/examples/jsm/loaders/MTLLoader.js":(T,I,u)=>{u.r(I),u.d(I,{MTLLoader:()=>C});var g=u("./node_modules/super-three/build/three.module.js");class C extends g.Loader{constructor(E){super(E)}load(E,b,m,w){const _=this,O=this.path===""?g.LoaderUtils.extractUrlBase(E):this.path,R=new g.FileLoader(this.manager);R.setPath(this.path),R.setRequestHeader(this.requestHeader),R.setWithCredentials(this.withCredentials),R.load(E,function(L){try{b(_.parse(L,O))}catch(P){w?w(P):console.error(P),_.manager.itemError(E)}},m,w)}setMaterialOptions(E){return this.materialOptions=E,this}parse(E,b){const m=E.split(`
`);let w={};const _=/\s+/,O={};for(let L=0;L<m.length;L++){let P=m[L];if(P=P.trim(),P.length===0||P.charAt(0)==="#")continue;const Y=P.indexOf(" ");let J=Y>=0?P.substring(0,Y):P;J=J.toLowerCase();let j=Y>=0?P.substring(Y+1):"";if(j=j.trim(),J==="newmtl")w={name:j},O[j]=w;else if(J==="ka"||J==="kd"||J==="ks"||J==="ke"){const k=j.split(_,3);w[J]=[parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])]}else w[J]=j}const R=new v(this.resourcePath||b,this.materialOptions);return R.setCrossOrigin(this.crossOrigin),R.setManager(this.manager),R.setMaterials(O),R}}class v{constructor(E="",b={}){this.baseUrl=E,this.options=b,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:g.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:g.RepeatWrapping}setCrossOrigin(E){return this.crossOrigin=E,this}setManager(E){this.manager=E}setMaterials(E){this.materialsInfo=this.convert(E),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(E){if(!this.options)return E;const b={};for(const m in E){const w=E[m],_={};b[m]=_;for(const O in w){let R=!0,L=w[O];const P=O.toLowerCase();switch(P){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(L=[L[0]/255,L[1]/255,L[2]/255]),this.options&&this.options.ignoreZeroRGBs&&L[0]===0&&L[1]===0&&L[2]===0&&(R=!1);break}R&&(_[P]=L)}}return b}preload(){for(const E in this.materialsInfo)this.create(E)}getIndex(E){return this.nameLookup[E]}getAsArray(){let E=0;for(const b in this.materialsInfo)this.materialsArray[E]=this.create(b),this.nameLookup[b]=E,E++;return this.materialsArray}create(E){return this.materials[E]===void 0&&this.createMaterial_(E),this.materials[E]}createMaterial_(E){const b=this,m=this.materialsInfo[E],w={name:E,side:this.side};function _(R,L){return typeof L!="string"||L===""?"":/^https?:\/\//i.test(L)?L:R+L}function O(R,L){if(w[R])return;const P=b.getTextureParams(L,w),Y=b.loadTexture(_(b.baseUrl,P.url));Y.repeat.copy(P.scale),Y.offset.copy(P.offset),Y.wrapS=b.wrap,Y.wrapT=b.wrap,(R==="map"||R==="emissiveMap")&&(Y.encoding=g.sRGBEncoding),w[R]=Y}for(const R in m){const L=m[R];let P;if(L!=="")switch(R.toLowerCase()){case"kd":w.color=new g.Color().fromArray(L).convertSRGBToLinear();break;case"ks":w.specular=new g.Color().fromArray(L).convertSRGBToLinear();break;case"ke":w.emissive=new g.Color().fromArray(L).convertSRGBToLinear();break;case"map_kd":O("map",L);break;case"map_ks":O("specularMap",L);break;case"map_ke":O("emissiveMap",L);break;case"norm":O("normalMap",L);break;case"map_bump":case"bump":O("bumpMap",L);break;case"map_d":O("alphaMap",L),w.transparent=!0;break;case"ns":w.shininess=parseFloat(L);break;case"d":P=parseFloat(L),P<1&&(w.opacity=P,w.transparent=!0);break;case"tr":P=parseFloat(L),this.options&&this.options.invertTrProperty&&(P=1-P),P>0&&(w.opacity=1-P,w.transparent=!0);break}}return this.materials[E]=new g.MeshPhongMaterial(w),this.materials[E]}getTextureParams(E,b){const m={scale:new g.Vector2(1,1),offset:new g.Vector2(0,0)},w=E.split(/\s+/);let _;return _=w.indexOf("-bm"),_>=0&&(b.bumpScale=parseFloat(w[_+1]),w.splice(_,2)),_=w.indexOf("-s"),_>=0&&(m.scale.set(parseFloat(w[_+1]),parseFloat(w[_+2])),w.splice(_,4)),_=w.indexOf("-o"),_>=0&&(m.offset.set(parseFloat(w[_+1]),parseFloat(w[_+2])),w.splice(_,4)),m.url=w.join(" ").trim(),m}loadTexture(E,b,m,w,_){const O=this.manager!==void 0?this.manager:g.DefaultLoadingManager;let R=O.getHandler(E);R===null&&(R=new g.TextureLoader(O)),R.setCrossOrigin&&R.setCrossOrigin(this.crossOrigin);const L=R.load(E,m,w,_);return b!==void 0&&(L.mapping=b),L}}},"./node_modules/super-three/examples/jsm/loaders/OBJLoader.js":(T,I,u)=>{u.r(I),u.d(I,{OBJLoader:()=>Y});var g=u("./node_modules/super-three/build/three.module.js");const C=/^[og]\s*(.+)?/,v=/^mtllib /,y=/^usemtl /,E=/^usemap /,b=/\s+/,m=new g.Vector3,w=new g.Vector3,_=new g.Vector3,O=new g.Vector3,R=new g.Vector3,L=new g.Color;function P(){const J={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(j,k){if(this.object&&this.object.fromDeclaration===!1){this.object.name=j,this.object.fromDeclaration=k!==!1;return}const te=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:j||"",fromDeclaration:k!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(ue,xe){const Ee=this._finalize(!1);Ee&&(Ee.inherited||Ee.groupCount<=0)&&this.materials.splice(Ee.index,1);const V={index:this.materials.length,name:ue||"",mtllib:Array.isArray(xe)&&xe.length>0?xe[xe.length-1]:"",smooth:Ee!==void 0?Ee.smooth:this.smooth,groupStart:Ee!==void 0?Ee.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(q){const Q={index:typeof q=="number"?q:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return Q.clone=this.clone.bind(Q),Q}};return this.materials.push(V),V},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(ue){const xe=this.currentMaterial();if(xe&&xe.groupEnd===-1&&(xe.groupEnd=this.geometry.vertices.length/3,xe.groupCount=xe.groupEnd-xe.groupStart,xe.inherited=!1),ue&&this.materials.length>1)for(let Ee=this.materials.length-1;Ee>=0;Ee--)this.materials[Ee].groupCount<=0&&this.materials.splice(Ee,1);return ue&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),xe}},te&&te.name&&typeof te.clone=="function"){const ue=te.clone(0);ue.inherited=!0,this.object.materials.push(ue)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(j,k){const te=parseInt(j,10);return(te>=0?te-1:te+k/3)*3},parseNormalIndex:function(j,k){const te=parseInt(j,10);return(te>=0?te-1:te+k/3)*3},parseUVIndex:function(j,k){const te=parseInt(j,10);return(te>=0?te-1:te+k/2)*2},addVertex:function(j,k,te){const ue=this.vertices,xe=this.object.geometry.vertices;xe.push(ue[j+0],ue[j+1],ue[j+2]),xe.push(ue[k+0],ue[k+1],ue[k+2]),xe.push(ue[te+0],ue[te+1],ue[te+2])},addVertexPoint:function(j){const k=this.vertices;this.object.geometry.vertices.push(k[j+0],k[j+1],k[j+2])},addVertexLine:function(j){const k=this.vertices;this.object.geometry.vertices.push(k[j+0],k[j+1],k[j+2])},addNormal:function(j,k,te){const ue=this.normals,xe=this.object.geometry.normals;xe.push(ue[j+0],ue[j+1],ue[j+2]),xe.push(ue[k+0],ue[k+1],ue[k+2]),xe.push(ue[te+0],ue[te+1],ue[te+2])},addFaceNormal:function(j,k,te){const ue=this.vertices,xe=this.object.geometry.normals;m.fromArray(ue,j),w.fromArray(ue,k),_.fromArray(ue,te),R.subVectors(_,w),O.subVectors(m,w),R.cross(O),R.normalize(),xe.push(R.x,R.y,R.z),xe.push(R.x,R.y,R.z),xe.push(R.x,R.y,R.z)},addColor:function(j,k,te){const ue=this.colors,xe=this.object.geometry.colors;ue[j]!==void 0&&xe.push(ue[j+0],ue[j+1],ue[j+2]),ue[k]!==void 0&&xe.push(ue[k+0],ue[k+1],ue[k+2]),ue[te]!==void 0&&xe.push(ue[te+0],ue[te+1],ue[te+2])},addUV:function(j,k,te){const ue=this.uvs,xe=this.object.geometry.uvs;xe.push(ue[j+0],ue[j+1]),xe.push(ue[k+0],ue[k+1]),xe.push(ue[te+0],ue[te+1])},addDefaultUV:function(){const j=this.object.geometry.uvs;j.push(0,0),j.push(0,0),j.push(0,0)},addUVLine:function(j){const k=this.uvs;this.object.geometry.uvs.push(k[j+0],k[j+1])},addFace:function(j,k,te,ue,xe,Ee,V,q,Q){const F=this.vertices.length;let z=this.parseVertexIndex(j,F),X=this.parseVertexIndex(k,F),fe=this.parseVertexIndex(te,F);if(this.addVertex(z,X,fe),this.addColor(z,X,fe),V!==void 0&&V!==""){const Ae=this.normals.length;z=this.parseNormalIndex(V,Ae),X=this.parseNormalIndex(q,Ae),fe=this.parseNormalIndex(Q,Ae),this.addNormal(z,X,fe)}else this.addFaceNormal(z,X,fe);if(ue!==void 0&&ue!==""){const Ae=this.uvs.length;z=this.parseUVIndex(ue,Ae),X=this.parseUVIndex(xe,Ae),fe=this.parseUVIndex(Ee,Ae),this.addUV(z,X,fe),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(j){this.object.geometry.type="Points";const k=this.vertices.length;for(let te=0,ue=j.length;te<ue;te++){const xe=this.parseVertexIndex(j[te],k);this.addVertexPoint(xe),this.addColor(xe)}},addLineGeometry:function(j,k){this.object.geometry.type="Line";const te=this.vertices.length,ue=this.uvs.length;for(let xe=0,Ee=j.length;xe<Ee;xe++)this.addVertexLine(this.parseVertexIndex(j[xe],te));for(let xe=0,Ee=k.length;xe<Ee;xe++)this.addUVLine(this.parseUVIndex(k[xe],ue))}};return J.startObject("",!1),J}class Y extends g.Loader{constructor(j){super(j),this.materials=null}load(j,k,te,ue){const xe=this,Ee=new g.FileLoader(this.manager);Ee.setPath(this.path),Ee.setRequestHeader(this.requestHeader),Ee.setWithCredentials(this.withCredentials),Ee.load(j,function(V){try{k(xe.parse(V))}catch(q){ue?ue(q):console.error(q),xe.manager.itemError(j)}},te,ue)}setMaterials(j){return this.materials=j,this}parse(j){const k=new P;j.indexOf(`\r
`)!==-1&&(j=j.replace(/\r\n/g,`
`)),j.indexOf(`\\
`)!==-1&&(j=j.replace(/\\\n/g,""));const te=j.split(`
`);let ue=[];for(let V=0,q=te.length;V<q;V++){const Q=te[V].trimStart();if(Q.length===0)continue;const F=Q.charAt(0);if(F!=="#")if(F==="v"){const z=Q.split(b);switch(z[0]){case"v":k.vertices.push(parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3])),z.length>=7?(L.setRGB(parseFloat(z[4]),parseFloat(z[5]),parseFloat(z[6])).convertSRGBToLinear(),k.colors.push(L.r,L.g,L.b)):k.colors.push(void 0,void 0,void 0);break;case"vn":k.normals.push(parseFloat(z[1]),parseFloat(z[2]),parseFloat(z[3]));break;case"vt":k.uvs.push(parseFloat(z[1]),parseFloat(z[2]));break}}else if(F==="f"){const X=Q.slice(1).trim().split(b),fe=[];for(let Se=0,Be=X.length;Se<Be;Se++){const Ge=X[Se];if(Ge.length>0){const ht=Ge.split("/");fe.push(ht)}}const Ae=fe[0];for(let Se=1,Be=fe.length-1;Se<Be;Se++){const Ge=fe[Se],ht=fe[Se+1];k.addFace(Ae[0],Ge[0],ht[0],Ae[1],Ge[1],ht[1],Ae[2],Ge[2],ht[2])}}else if(F==="l"){const z=Q.substring(1).trim().split(" ");let X=[];const fe=[];if(Q.indexOf("/")===-1)X=z;else for(let Ae=0,Se=z.length;Ae<Se;Ae++){const Be=z[Ae].split("/");Be[0]!==""&&X.push(Be[0]),Be[1]!==""&&fe.push(Be[1])}k.addLineGeometry(X,fe)}else if(F==="p"){const X=Q.slice(1).trim().split(" ");k.addPointGeometry(X)}else if((ue=C.exec(Q))!==null){const z=(" "+ue[0].slice(1).trim()).slice(1);k.startObject(z)}else if(y.test(Q))k.object.startMaterial(Q.substring(7).trim(),k.materialLibraries);else if(v.test(Q))k.materialLibraries.push(Q.substring(7).trim());else if(E.test(Q))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(F==="s"){if(ue=Q.split(" "),ue.length>1){const X=ue[1].trim().toLowerCase();k.object.smooth=X!=="0"&&X!=="off"}else k.object.smooth=!0;const z=k.object.currentMaterial();z&&(z.smooth=k.object.smooth)}else{if(Q==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+Q+'"')}}k.finalize();const xe=new g.Group;if(xe.materialLibraries=[].concat(k.materialLibraries),!(k.objects.length===1&&k.objects[0].geometry.vertices.length===0)===!0)for(let V=0,q=k.objects.length;V<q;V++){const Q=k.objects[V],F=Q.geometry,z=Q.materials,X=F.type==="Line",fe=F.type==="Points";let Ae=!1;if(F.vertices.length===0)continue;const Se=new g.BufferGeometry;Se.setAttribute("position",new g.Float32BufferAttribute(F.vertices,3)),F.normals.length>0&&Se.setAttribute("normal",new g.Float32BufferAttribute(F.normals,3)),F.colors.length>0&&(Ae=!0,Se.setAttribute("color",new g.Float32BufferAttribute(F.colors,3))),F.hasUVIndices===!0&&Se.setAttribute("uv",new g.Float32BufferAttribute(F.uvs,2));const Be=[];for(let ht=0,xt=z.length;ht<xt;ht++){const at=z[ht],Gt=at.name+"_"+at.smooth+"_"+Ae;let wt=k.materials[Gt];if(this.materials!==null){if(wt=this.materials.create(at.name),X&&wt&&!(wt instanceof g.LineBasicMaterial)){const Yt=new g.LineBasicMaterial;g.Material.prototype.copy.call(Yt,wt),Yt.color.copy(wt.color),wt=Yt}else if(fe&&wt&&!(wt instanceof g.PointsMaterial)){const Yt=new g.PointsMaterial({size:10,sizeAttenuation:!1});g.Material.prototype.copy.call(Yt,wt),Yt.color.copy(wt.color),Yt.map=wt.map,wt=Yt}}wt===void 0&&(X?wt=new g.LineBasicMaterial:fe?wt=new g.PointsMaterial({size:1,sizeAttenuation:!1}):wt=new g.MeshPhongMaterial,wt.name=at.name,wt.flatShading=!at.smooth,wt.vertexColors=Ae,k.materials[Gt]=wt),Be.push(wt)}let Ge;if(Be.length>1){for(let ht=0,xt=z.length;ht<xt;ht++){const at=z[ht];Se.addGroup(at.groupStart,at.groupCount,ht)}X?Ge=new g.LineSegments(Se,Be):fe?Ge=new g.Points(Se,Be):Ge=new g.Mesh(Se,Be)}else X?Ge=new g.LineSegments(Se,Be[0]):fe?Ge=new g.Points(Se,Be[0]):Ge=new g.Mesh(Se,Be[0]);Ge.name=Q.name,xe.add(Ge)}else if(k.vertices.length>0){const V=new g.PointsMaterial({size:1,sizeAttenuation:!1}),q=new g.BufferGeometry;q.setAttribute("position",new g.Float32BufferAttribute(k.vertices,3)),k.colors.length>0&&k.colors[0]!==void 0&&(q.setAttribute("color",new g.Float32BufferAttribute(k.colors,3)),V.vertexColors=!0);const Q=new g.Points(q,V);xe.add(Q)}return xe}}},"./node_modules/super-three/examples/jsm/utils/BufferGeometryUtils.js":(T,I,u)=>{u.r(I),u.d(I,{computeMikkTSpaceTangents:()=>v,computeMorphedAttributes:()=>P,computeTangents:()=>C,deepCloneAttribute:()=>b,deinterleaveAttribute:()=>w,deinterleaveGeometry:()=>_,estimateBytesUsed:()=>O,interleaveAttributes:()=>m,mergeBufferAttributes:()=>E,mergeBufferGeometries:()=>y,mergeGroups:()=>Y,mergeVertices:()=>R,toCreasedNormals:()=>J,toTrianglesDrawMode:()=>L});var g=u("./node_modules/super-three/build/three.module.js");function C(){throw new Error("BufferGeometryUtils: computeTangents renamed to computeMikkTSpaceTangents.")}function v(j,k,te=!0){if(!k||!k.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!j.hasAttribute("position")||!j.hasAttribute("normal")||!j.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function ue(V){if(V.normalized||V.isInterleavedBufferAttribute){const q=new Float32Array(V.getCount()*V.itemSize);for(let Q=0,F=0;Q<V.getCount();Q++)q[F++]=V.getX(Q),q[F++]=V.getY(Q),V.itemSize>2&&(q[F++]=V.getZ(Q));return q}return V.array instanceof Float32Array?V.array:new Float32Array(V.array)}const xe=j.index?j.toNonIndexed():j,Ee=k.generateTangents(ue(xe.attributes.position),ue(xe.attributes.normal),ue(xe.attributes.uv));if(te)for(let V=3;V<Ee.length;V+=4)Ee[V]*=-1;return xe.setAttribute("tangent",new g.BufferAttribute(Ee,4)),j!==xe&&j.copy(xe),j}function y(j,k=!1){const te=j[0].index!==null,ue=new Set(Object.keys(j[0].attributes)),xe=new Set(Object.keys(j[0].morphAttributes)),Ee={},V={},q=j[0].morphTargetsRelative,Q=new g.BufferGeometry;let F=0;for(let z=0;z<j.length;++z){const X=j[z];let fe=0;if(te!==(X.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const Ae in X.attributes){if(!ue.has(Ae))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+'. All geometries must have compatible attributes; make sure "'+Ae+'" attribute exists among all geometries, or in none of them.'),null;Ee[Ae]===void 0&&(Ee[Ae]=[]),Ee[Ae].push(X.attributes[Ae]),fe++}if(fe!==ue.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+". Make sure all geometries have the same number of attributes."),null;if(q!==X.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const Ae in X.morphAttributes){if(!xe.has(Ae))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+".  .morphAttributes must be consistent throughout all geometries."),null;V[Ae]===void 0&&(V[Ae]=[]),V[Ae].push(X.morphAttributes[Ae])}if(k){let Ae;if(te)Ae=X.index.count;else if(X.attributes.position!==void 0)Ae=X.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+z+". The geometry must have either an index or a position attribute"),null;Q.addGroup(F,Ae,z),F+=Ae}}if(te){let z=0;const X=[];for(let fe=0;fe<j.length;++fe){const Ae=j[fe].index;for(let Se=0;Se<Ae.count;++Se)X.push(Ae.getX(Se)+z);z+=j[fe].attributes.position.count}Q.setIndex(X)}for(const z in Ee){const X=E(Ee[z]);if(!X)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+z+" attribute."),null;Q.setAttribute(z,X)}for(const z in V){const X=V[z][0].length;if(X===0)break;Q.morphAttributes=Q.morphAttributes||{},Q.morphAttributes[z]=[];for(let fe=0;fe<X;++fe){const Ae=[];for(let Be=0;Be<V[z].length;++Be)Ae.push(V[z][Be][fe]);const Se=E(Ae);if(!Se)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+z+" morphAttribute."),null;Q.morphAttributes[z].push(Se)}}return Q}function E(j){let k,te,ue,xe=0;for(let q=0;q<j.length;++q){const Q=j[q];if(Q.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(k===void 0&&(k=Q.array.constructor),k!==Q.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(te===void 0&&(te=Q.itemSize),te!==Q.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(ue===void 0&&(ue=Q.normalized),ue!==Q.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;xe+=Q.array.length}const Ee=new k(xe);let V=0;for(let q=0;q<j.length;++q)Ee.set(j[q].array,V),V+=j[q].array.length;return new g.BufferAttribute(Ee,te,ue)}function b(j){return j.isInstancedInterleavedBufferAttribute||j.isInterleavedBufferAttribute?w(j):j.isInstancedBufferAttribute?new g.InstancedBufferAttribute().copy(j):new g.BufferAttribute().copy(j)}function m(j){let k,te=0,ue=0;for(let F=0,z=j.length;F<z;++F){const X=j[F];if(k===void 0&&(k=X.array.constructor),k!==X.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;te+=X.array.length,ue+=X.itemSize}const xe=new g.InterleavedBuffer(new k(te),ue);let Ee=0;const V=[],q=["getX","getY","getZ","getW"],Q=["setX","setY","setZ","setW"];for(let F=0,z=j.length;F<z;F++){const X=j[F],fe=X.itemSize,Ae=X.count,Se=new g.InterleavedBufferAttribute(xe,fe,Ee,X.normalized);V.push(Se),Ee+=fe;for(let Be=0;Be<Ae;Be++)for(let Ge=0;Ge<fe;Ge++)Se[Q[Ge]](Be,X[q[Ge]](Be))}return V}function w(j){const k=j.data.array.constructor,te=j.count,ue=j.itemSize,xe=j.normalized,Ee=new k(te*ue);let V;j.isInstancedInterleavedBufferAttribute?V=new g.InstancedBufferAttribute(Ee,ue,xe,j.meshPerAttribute):V=new g.BufferAttribute(Ee,ue,xe);for(let q=0;q<te;q++)V.setX(q,j.getX(q)),ue>=2&&V.setY(q,j.getY(q)),ue>=3&&V.setZ(q,j.getZ(q)),ue>=4&&V.setW(q,j.getW(q));return V}function _(j){const k=j.attributes,te=j.morphTargets,ue=new Map;for(const xe in k){const Ee=k[xe];Ee.isInterleavedBufferAttribute&&(ue.has(Ee)||ue.set(Ee,w(Ee)),k[xe]=ue.get(Ee))}for(const xe in te){const Ee=te[xe];Ee.isInterleavedBufferAttribute&&(ue.has(Ee)||ue.set(Ee,w(Ee)),te[xe]=ue.get(Ee))}}function O(j){let k=0;for(const ue in j.attributes){const xe=j.getAttribute(ue);k+=xe.count*xe.itemSize*xe.array.BYTES_PER_ELEMENT}const te=j.getIndex();return k+=te?te.count*te.itemSize*te.array.BYTES_PER_ELEMENT:0,k}function R(j,k=1e-4){k=Math.max(k,Number.EPSILON);const te={},ue=j.getIndex(),xe=j.getAttribute("position"),Ee=ue?ue.count:xe.count;let V=0;const q=Object.keys(j.attributes),Q={},F={},z=[],X=["getX","getY","getZ","getW"],fe=["setX","setY","setZ","setW"];for(let Ge=0,ht=q.length;Ge<ht;Ge++){const xt=q[Ge],at=j.attributes[xt];Q[xt]=new g.BufferAttribute(new at.array.constructor(at.count*at.itemSize),at.itemSize,at.normalized);const Gt=j.morphAttributes[xt];Gt&&(F[xt]=new g.BufferAttribute(new Gt.array.constructor(Gt.count*Gt.itemSize),Gt.itemSize,Gt.normalized))}const Ae=Math.log10(1/k),Se=Math.pow(10,Ae);for(let Ge=0;Ge<Ee;Ge++){const ht=ue?ue.getX(Ge):Ge;let xt="";for(let at=0,Gt=q.length;at<Gt;at++){const wt=q[at],Yt=j.getAttribute(wt),Mn=Yt.itemSize;for(let je=0;je<Mn;je++)xt+=`${~~(Yt[X[je]](ht)*Se)},`}if(xt in te)z.push(te[xt]);else{for(let at=0,Gt=q.length;at<Gt;at++){const wt=q[at],Yt=j.getAttribute(wt),Mn=j.morphAttributes[wt],je=Yt.itemSize,rt=Q[wt],At=F[wt];for(let Bt=0;Bt<je;Bt++){const Pt=X[Bt],qt=fe[Bt];if(rt[qt](V,Yt[Pt](ht)),Mn)for(let un=0,dn=Mn.length;un<dn;un++)At[un][qt](V,Mn[un][Pt](ht))}}te[xt]=V,z.push(V),V++}}const Be=j.clone();for(const Ge in j.attributes){const ht=Q[Ge];if(Be.setAttribute(Ge,new g.BufferAttribute(ht.array.slice(0,V*ht.itemSize),ht.itemSize,ht.normalized)),Ge in F)for(let xt=0;xt<F[Ge].length;xt++){const at=F[Ge][xt];Be.morphAttributes[Ge][xt]=new g.BufferAttribute(at.array.slice(0,V*at.itemSize),at.itemSize,at.normalized)}}return Be.setIndex(z),Be}function L(j,k){if(k===g.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),j;if(k===g.TriangleFanDrawMode||k===g.TriangleStripDrawMode){let te=j.getIndex();if(te===null){const V=[],q=j.getAttribute("position");if(q!==void 0){for(let Q=0;Q<q.count;Q++)V.push(Q);j.setIndex(V),te=j.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),j}const ue=te.count-2,xe=[];if(k===g.TriangleFanDrawMode)for(let V=1;V<=ue;V++)xe.push(te.getX(0)),xe.push(te.getX(V)),xe.push(te.getX(V+1));else for(let V=0;V<ue;V++)V%2===0?(xe.push(te.getX(V)),xe.push(te.getX(V+1)),xe.push(te.getX(V+2))):(xe.push(te.getX(V+2)),xe.push(te.getX(V+1)),xe.push(te.getX(V)));xe.length/3!==ue&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const Ee=j.clone();return Ee.setIndex(xe),Ee.clearGroups(),Ee}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",k),j}function P(j){if(j.geometry.isBufferGeometry!==!0)return console.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;const k=new g.Vector3,te=new g.Vector3,ue=new g.Vector3,xe=new g.Vector3,Ee=new g.Vector3,V=new g.Vector3,q=new g.Vector3,Q=new g.Vector3,F=new g.Vector3;function z(ni,zt,Ue,Pe,Ye,ze,He,et){k.fromBufferAttribute(zt,Ye),te.fromBufferAttribute(zt,ze),ue.fromBufferAttribute(zt,He);const Me=ni.morphTargetInfluences;if(Ue&&Me){q.set(0,0,0),Q.set(0,0,0),F.set(0,0,0);for(let Te=0,Oe=Ue.length;Te<Oe;Te++){const Ze=Me[Te],ae=Ue[Te];Ze!==0&&(xe.fromBufferAttribute(ae,Ye),Ee.fromBufferAttribute(ae,ze),V.fromBufferAttribute(ae,He),Pe?(q.addScaledVector(xe,Ze),Q.addScaledVector(Ee,Ze),F.addScaledVector(V,Ze)):(q.addScaledVector(xe.sub(k),Ze),Q.addScaledVector(Ee.sub(te),Ze),F.addScaledVector(V.sub(ue),Ze)))}k.add(q),te.add(Q),ue.add(F)}ni.isSkinnedMesh&&(ni.boneTransform(Ye,k),ni.boneTransform(ze,te),ni.boneTransform(He,ue)),et[Ye*3+0]=k.x,et[Ye*3+1]=k.y,et[Ye*3+2]=k.z,et[ze*3+0]=te.x,et[ze*3+1]=te.y,et[ze*3+2]=te.z,et[He*3+0]=ue.x,et[He*3+1]=ue.y,et[He*3+2]=ue.z}const X=j.geometry,fe=j.material;let Ae,Se,Be;const Ge=X.index,ht=X.attributes.position,xt=X.morphAttributes.position,at=X.morphTargetsRelative,Gt=X.attributes.normal,wt=X.morphAttributes.position,Yt=X.groups,Mn=X.drawRange;let je,rt,At,Bt,Pt,qt,un;const dn=new Float32Array(ht.count*ht.itemSize),bn=new Float32Array(Gt.count*Gt.itemSize);if(Ge!==null)if(Array.isArray(fe))for(je=0,At=Yt.length;je<At;je++)for(Pt=Yt[je],qt=Math.max(Pt.start,Mn.start),un=Math.min(Pt.start+Pt.count,Mn.start+Mn.count),rt=qt,Bt=un;rt<Bt;rt+=3)Ae=Ge.getX(rt),Se=Ge.getX(rt+1),Be=Ge.getX(rt+2),z(j,ht,xt,at,Ae,Se,Be,dn),z(j,Gt,wt,at,Ae,Se,Be,bn);else for(qt=Math.max(0,Mn.start),un=Math.min(Ge.count,Mn.start+Mn.count),je=qt,At=un;je<At;je+=3)Ae=Ge.getX(je),Se=Ge.getX(je+1),Be=Ge.getX(je+2),z(j,ht,xt,at,Ae,Se,Be,dn),z(j,Gt,wt,at,Ae,Se,Be,bn);else if(Array.isArray(fe))for(je=0,At=Yt.length;je<At;je++)for(Pt=Yt[je],qt=Math.max(Pt.start,Mn.start),un=Math.min(Pt.start+Pt.count,Mn.start+Mn.count),rt=qt,Bt=un;rt<Bt;rt+=3)Ae=rt,Se=rt+1,Be=rt+2,z(j,ht,xt,at,Ae,Se,Be,dn),z(j,Gt,wt,at,Ae,Se,Be,bn);else for(qt=Math.max(0,Mn.start),un=Math.min(ht.count,Mn.start+Mn.count),je=qt,At=un;je<At;je+=3)Ae=je,Se=je+1,Be=je+2,z(j,ht,xt,at,Ae,Se,Be,dn),z(j,Gt,wt,at,Ae,Se,Be,bn);const tn=new g.Float32BufferAttribute(dn,3),ri=new g.Float32BufferAttribute(bn,3);return{positionAttribute:ht,normalAttribute:Gt,morphedPositionAttribute:tn,morphedNormalAttribute:ri}}function Y(j){if(j.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),j;let k=j.groups;if(k=k.sort((V,q)=>V.materialIndex!==q.materialIndex?V.materialIndex-q.materialIndex:V.start-q.start),j.getIndex()===null){const V=j.getAttribute("position"),q=[];for(let Q=0;Q<V.count;Q+=3)q.push(Q,Q+1,Q+2);j.setIndex(q)}const te=j.getIndex(),ue=[];for(let V=0;V<k.length;V++){const q=k[V],Q=q.start,F=Q+q.count;for(let z=Q;z<F;z++)ue.push(te.getX(z))}j.dispose(),j.setIndex(ue);let xe=0;for(let V=0;V<k.length;V++){const q=k[V];q.start=xe,xe+=q.count}let Ee=k[0];j.groups=[Ee];for(let V=1;V<k.length;V++){const q=k[V];Ee.materialIndex===q.materialIndex?Ee.count+=q.count:(Ee=q,j.groups.push(Ee))}return j}function J(j,k=Math.PI/3){const te=Math.cos(k),ue=(1+1e-10)*100,xe=[new g.Vector3,new g.Vector3,new g.Vector3],Ee=new g.Vector3,V=new g.Vector3,q=new g.Vector3,Q=new g.Vector3;function F(Be){const Ge=~~(Be.x*ue),ht=~~(Be.y*ue),xt=~~(Be.z*ue);return`${Ge},${ht},${xt}`}const z=j.toNonIndexed(),X=z.attributes.position,fe={};for(let Be=0,Ge=X.count/3;Be<Ge;Be++){const ht=3*Be,xt=xe[0].fromBufferAttribute(X,ht+0),at=xe[1].fromBufferAttribute(X,ht+1),Gt=xe[2].fromBufferAttribute(X,ht+2);Ee.subVectors(Gt,at),V.subVectors(xt,at);const wt=new g.Vector3().crossVectors(Ee,V).normalize();for(let Yt=0;Yt<3;Yt++){const Mn=xe[Yt],je=F(Mn);je in fe||(fe[je]=[]),fe[je].push(wt)}}const Ae=new Float32Array(X.count*3),Se=new g.BufferAttribute(Ae,3,!1);for(let Be=0,Ge=X.count/3;Be<Ge;Be++){const ht=3*Be,xt=xe[0].fromBufferAttribute(X,ht+0),at=xe[1].fromBufferAttribute(X,ht+1),Gt=xe[2].fromBufferAttribute(X,ht+2);Ee.subVectors(Gt,at),V.subVectors(xt,at),q.crossVectors(Ee,V).normalize();for(let wt=0;wt<3;wt++){const Yt=xe[wt],Mn=F(Yt),je=fe[Mn];Q.set(0,0,0);for(let rt=0,At=je.length;rt<At;rt++){const Bt=je[rt];q.dot(Bt)>te&&Q.add(Bt)}Q.normalize(),Se.setXYZ(ht+wt,Q.x,Q.y,Q.z)}}return z.setAttribute("normal",Se),z}},"./node_modules/super-three/examples/jsm/utils/WorkerPool.js":(T,I,u)=>{u.r(I),u.d(I,{WorkerPool:()=>g});class g{constructor(v=4){this.pool=v,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(v){if(!this.workers[v]){const y=this.workerCreator();y.addEventListener("message",this._onMessage.bind(this,v)),this.workers[v]=y}}_getIdleWorker(){for(let v=0;v<this.pool;v++)if(!(this.workerStatus&1<<v))return v;return-1}_onMessage(v,y){const E=this.workersResolve[v];if(E&&E(y),this.queue.length){const{resolve:b,msg:m,transfer:w}=this.queue.shift();this.workersResolve[v]=b,this.workers[v].postMessage(m,w)}else this.workerStatus^=1<<v}setWorkerCreator(v){this.workerCreator=v}setWorkerLimit(v){this.pool=v}postMessage(v,y){return new Promise(E=>{const b=this._getIdleWorker();b!==-1?(this._initWorker(b),this.workerStatus|=1<<b,this.workersResolve[b]=E,this.workers[b].postMessage(v,y)):this.queue.push({resolve:E,msg:v,transfer:y})})}dispose(){this.workers.forEach(v=>v.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}},"./package.json":T=>{T.exports=JSON.parse('{"name":"aframe","version":"1.4.2","description":"A web framework for building virtual reality experiences.","homepage":"https://aframe.io/","main":"dist/aframe-master.js","scripts":{"dev":"cross-env INSPECTOR_VERSION=dev webpack serve --port 8080","dist":"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"webpack --config webpack.config.js","dist:min":"webpack --config webpack.prod.config.js","docs":"markserv --dir docs --port 9001","preghpages":"node ./scripts/preghpages.js","ghpages":"ghpages -p gh-pages/","lint":"semistandard -v | snazzy","lint:fix":"semistandard --fix","precommit":"npm run lint","prepush":"node scripts/testOnlyCheck.js","prerelease":"node scripts/release.js 1.4.1 1.4.2","start":"npm run dev","start:https":"npm run dev -- --server-type https","test":"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"mocha --ui tdd tests/node"},"repository":"aframevr/aframe","license":"MIT","files":["dist/*","docs/**/*","src/**/*","vendor/**/*"],"dependencies":{"buffer":"^6.0.3","custom-event-polyfill":"^1.0.6","debug":"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","@ungap/custom-elements":"^1.1.0","load-bmfont":"^1.2.3","object-assign":"^4.0.1","present":"0.0.6","promise-polyfill":"^3.1.0","super-animejs":"^3.1.0","super-three":"^0.147.1","three-bmfont-text":"dmarcos/three-bmfont-text#21d017046216e318362c48abd1a48bddfb6e0733","webvr-polyfill":"^0.10.12"},"devDependencies":{"@babel/core":"^7.17.10","babel-loader":"^8.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","chai-shallow-deep-equal":"^1.4.0","chalk":"^1.1.3","cross-env":"^7.0.3","css-loader":"^6.7.1","ghpages":"0.0.8","git-rev":"^0.2.1","glob":"^8.0.3","husky":"^0.11.7","jsdom":"^20.0.0","karma":"^6.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sinon-chai":"^2.0.2","karma-webpack":"^5.0.0","markserv":"github:sukima/markserv#feature/fix-broken-websoketio-link","mocha":"^10.0.0","replace-in-file":"^2.5.3","semistandard":"^9.0.0","shelljs":"^0.7.7","shx":"^0.2.2","sinon":"<12.0.0","sinon-chai":"^3.7.0","snazzy":"^5.0.0","style-loader":"^3.3.1","too-wordy":"ngokevin/too-wordy","webpack":"^5.73.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.11.0","webpack-merge":"^5.8.0","write-good":"^1.0.8"},"link":true,"semistandard":{"ignore":["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},"keywords":["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","quest","meta","web-components","webvr","webxr"],"engines":{"node":">= 4.6.0","npm":">= 2.15.9"}}')}},d={};function U(T){var I=d[T];if(I!==void 0)return I.exports;var u=d[T]={id:T,exports:{}};return W[T].call(u.exports,u,u.exports,U),u.exports}U.m=W,U.n=T=>{var I=T&&T.__esModule?()=>T.default:()=>T;return U.d(I,{a:I}),I},U.d=(T,I)=>{for(var u in I)U.o(I,u)&&!U.o(T,u)&&Object.defineProperty(T,u,{enumerable:!0,get:I[u]})},U.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),U.o=(T,I)=>Object.prototype.hasOwnProperty.call(T,I),U.r=T=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})},U.b=document.baseURI||self.location.href,U.nc=void 0;var K=U("./src/index.js");return K})())})(GT);function BA(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}(function h(S,W,d){function U(I,u){if(!W[I]){if(!S[I]){var g=typeof BA=="function"&&BA;if(!u&&g)return g(I,!0);if(K)return K(I,!0);var C=new Error("Cannot find module '"+I+"'");throw C.code="MODULE_NOT_FOUND",C}var v=W[I]={exports:{}};S[I][0].call(v.exports,function(y){var E=S[I][1][y];return U(E||y)},v,v.exports,h,S,W,d)}return W[I].exports}for(var K=typeof BA=="function"&&BA,T=0;T<d.length;T++)U(d[T]);return U})({1:[function(h,S,W){h("./")},{"./":2}],2:[function(h,S,W){h("./src/controls"),h("./src/loaders"),h("./src/misc"),h("./src/pathfinding"),h("./src/primitives")},{"./src/controls":14,"./src/loaders":24,"./src/misc":29,"./src/pathfinding":32,"./src/primitives":39}],3:[function(h,S,W){S.exports=THREE.ColladaLoader=function(d){this.manager=d!==void 0?d:THREE.DefaultLoadingManager},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"anonymous",load:function(d,U,K,T){var I=this,u=I.path===void 0?THREE.LoaderUtils.extractUrlBase(d):I.path,g=new THREE.FileLoader(I.manager);g.setPath(I.path),g.load(d,function(C){U(I.parse(C,u))},K,T)},setPath:function(d){return this.path=d,this},setResourcePath:function(d){return this.resourcePath=d,this},options:{set convertUpAxis(d){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(d){return this.crossOrigin=d,this},parse:function(d,U){function K(Me,Te){for(var Oe=[],Ze=Me.childNodes,ae=0,ee=Ze.length;ae<ee;ae++){var se=Ze[ae];se.nodeName===Te&&Oe.push(se)}return Oe}function T(Me){if(Me.length===0)return[];for(var Te=Me.trim().split(/\s+/),Oe=new Array(Te.length),Ze=0,ae=Te.length;Ze<ae;Ze++)Oe[Ze]=Te[Ze];return Oe}function I(Me){if(Me.length===0)return[];for(var Te=Me.trim().split(/\s+/),Oe=new Array(Te.length),Ze=0,ae=Te.length;Ze<ae;Ze++)Oe[Ze]=parseFloat(Te[Ze]);return Oe}function u(Me){if(Me.length===0)return[];for(var Te=Me.trim().split(/\s+/),Oe=new Array(Te.length),Ze=0,ae=Te.length;Ze<ae;Ze++)Oe[Ze]=parseInt(Te[Ze]);return Oe}function g(Me){return Me.substring(1)}function C(){return"three_default_"+ze++}function v(Me){return Object.keys(Me).length===0}function y(Me,Te,Oe,Ze){var ae=K(Me,Te)[0];if(ae!==void 0)for(var ee=K(ae,Oe),se=0;se<ee.length;se++)Ze(ee[se])}function E(Me,Te){for(var Oe in Me)Me[Oe].build=Te(Me[Oe])}function b(Me,Te){return Me.build!==void 0||(Me.build=Te(Me)),Me.build}function m(Me){var Te=[],Oe=Me.channels,Ze=Me.samplers,ae=Me.sources;for(var ee in Oe)if(Oe.hasOwnProperty(ee)){var se=Oe[ee],Ie=Ze[se.sampler],We=Ie.inputs.INPUT,Ke=Ie.inputs.OUTPUT;(function($e,Vt){for(var $t=$e.keyframes,Xt=$e.name,jt=[],on=[],In=[],di=[],fi=0,Nn=$t.length;fi<Nn;fi++){var vn=$t[fi],Ft=vn.time,yn=vn.value;un.fromArray(yn).transpose(),un.decompose(Bt,qt,Pt),jt.push(Ft),on.push(Bt.x,Bt.y,Bt.z),In.push(qt.x,qt.y,qt.z,qt.w),di.push(Pt.x,Pt.y,Pt.z)}on.length>0&&Vt.push(new THREE.VectorKeyframeTrack(Xt+".position",jt,on)),In.length>0&&Vt.push(new THREE.QuaternionKeyframeTrack(Xt+".quaternion",jt,In)),di.length>0&&Vt.push(new THREE.VectorKeyframeTrack(Xt+".scale",jt,di))})(function($e,Vt,$t){var Xt,jt,on,In,di,fi,Nn=He.nodes[$e.id],vn=je(Nn.id),Ft=Nn.transforms[$e.sid],yn=Nn.matrix.clone().transpose(),Gn={};switch(Ft){case"matrix":for(on=0,In=Vt.array.length;on<In;on++)if(Xt=Vt.array[on],jt=on*$t.stride,Gn[Xt]===void 0&&(Gn[Xt]={}),$e.arraySyntax===!0){var Dn=$t.array[jt],bi=$e.indices[0]+4*$e.indices[1];Gn[Xt][bi]=Dn}else for(di=0,fi=$t.stride;di<fi;di++)Gn[Xt][di]=$t.array[jt+di];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Ft)}var Pi=function(Zi,Lr){var Ki=[];for(var Gr in Zi)Ki.push({time:parseFloat(Gr),value:Zi[Gr]});Ki.sort(function(ar,zr){return ar.time-zr.time});for(var Dr=0;Dr<16;Dr++)(function(ar,zr,ys){var Qe,ut,_t,nn=!0;for(ut=0,_t=ar.length;ut<_t;ut++)(Qe=ar[ut]).value[zr]===void 0?Qe.value[zr]=null:nn=!1;if(nn===!0)for(ut=0,_t=ar.length;ut<_t;ut++)(Qe=ar[ut]).value[zr]=ys;else(function(Wt,mn){for(var Un,Xn,ei=0,pn=Wt.length;ei<pn;ei++){var Oi=Wt[ei];if(Oi.value[mn]===null){if(Un=function(Mi,Ti,Wr){for(;Ti>=0;){var zi=Mi[Ti];if(zi.value[Wr]!==null)return zi;Ti--}return null}(Wt,ei,mn),Xn=function(Mi,Ti,Wr){for(;Ti<Mi.length;){var zi=Mi[Ti];if(zi.value[Wr]!==null)return zi;Ti++}return null}(Wt,ei,mn),Un===null){Oi.value[mn]=Xn.value[mn];continue}if(Xn===null){Oi.value[mn]=Un.value[mn];continue}(function(Mi,Ti,Wr,zi){if(Wr.time-Ti.time==0)return void(Mi.value[zi]=Ti.value[zi]);Mi.value[zi]=(Mi.time-Ti.time)*(Wr.value[zi]-Ti.value[zi])/(Wr.time-Ti.time)+Ti.value[zi]})(Oi,Un,Xn,mn)}}})(ar,zr)})(Ki,Dr,Lr.elements[Dr]);return Ki}(Gn,yn);return{name:vn.uuid,keyframes:Pi}}(se,ae[We],ae[Ke]),Te)}return Te}function w(Me){return b(He.animations[Me],m)}function _(Me){for(var Te=[],Oe=Me.name,Ze=Me.end-Me.start||-1,ae=Me.animations,ee=0,se=ae.length;ee<se;ee++)for(var Ie=w(ae[ee]),We=0,Ke=Ie.length;We<Ke;We++)Te.push(Ie[We]);return new THREE.AnimationClip(Oe,Ze,Te)}function O(Me){return b(He.clips[Me],_)}function R(Me){var Te={id:Me.id},Oe=He.geometries[Te.id];return Me.skin!==void 0&&(Te.skin=function(Ze){function ae(Zi,Lr){return Lr.weight-Zi.weight}var ee,se,Ie,We={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},Ke=Ze.sources,$e=Ze.vertexWeights,Vt=$e.vcount,$t=$e.v,Xt=$e.inputs.JOINT.offset,jt=$e.inputs.WEIGHT.offset,on=Ze.sources[Ze.joints.inputs.JOINT],In=Ze.sources[Ze.joints.inputs.INV_BIND_MATRIX],di=Ke[$e.inputs.WEIGHT.id].array,fi=0;for(ee=0,Ie=Vt.length;ee<Ie;ee++){var Nn=Vt[ee],vn=[];for(se=0;se<Nn;se++){var Ft=$t[fi+Xt],yn=$t[fi+jt],Gn=di[yn];vn.push({index:Ft,weight:Gn}),fi+=2}for(vn.sort(ae),se=0;se<4;se++){var Dn=vn[se];Dn!==void 0?(We.indices.array.push(Dn.index),We.weights.array.push(Dn.weight)):(We.indices.array.push(0),We.weights.array.push(0))}}for(Ze.bindShapeMatrix?We.bindMatrix=new THREE.Matrix4().fromArray(Ze.bindShapeMatrix).transpose():We.bindMatrix=new THREE.Matrix4().identity(),ee=0,Ie=on.array.length;ee<Ie;ee++){var bi=on.array[ee],Pi=new THREE.Matrix4().fromArray(In.array,ee*In.stride).transpose();We.joints.push({name:bi,boneInverse:Pi})}return We}(Me.skin),Oe.sources.skinIndices=Te.skin.indices,Oe.sources.skinWeights=Te.skin.weights),Te}function L(Me){return b(He.controllers[Me],R)}function P(Me){return Me.build!==void 0?Me.build:Me.init_from}function Y(Me){var Te=He.images[Me];return Te!==void 0?b(Te,P):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",Me),null)}function J(Me){for(var Te={},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"color":Te[ae.nodeName]=I(ae.textContent);break;case"float":Te[ae.nodeName]=parseFloat(ae.textContent);break;case"texture":Te[ae.nodeName]={id:ae.getAttribute("texture"),extra:function(ee){for(var se={technique:{}},Ie=0,We=ee.childNodes.length;Ie<We;Ie++){var Ke=ee.childNodes[Ie];if(Ke.nodeType===1)switch(Ke.nodeName){case"extra":(function($e,Vt){for(var $t=0,Xt=$e.childNodes.length;$t<Xt;$t++){var jt=$e.childNodes[$t];if(jt.nodeType===1)switch(jt.nodeName){case"technique":(function(on,In){for(var di=0,fi=on.childNodes.length;di<fi;di++){var Nn=on.childNodes[di];if(Nn.nodeType===1)switch(Nn.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":In.technique[Nn.nodeName]=parseFloat(Nn.textContent);break;case"wrapU":case"wrapV":Nn.textContent.toUpperCase()==="TRUE"?In.technique[Nn.nodeName]=1:Nn.textContent.toUpperCase()==="FALSE"?In.technique[Nn.nodeName]=0:In.technique[Nn.nodeName]=parseInt(Nn.textContent)}}})(jt,Vt)}}})(Ke,se)}}return se}(ae)}}}return Te}function j(Me){return Me}function k(Me){function Te($t){var Xt=Ze.profile.samplers[$t.id],jt=null;if(Xt!==void 0?jt=Y(Ze.profile.surfaces[Xt.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),jt=Y($t.id)),jt!==null){var on=function(Nn){var vn,Ft=Nn.slice(2+(Nn.lastIndexOf(".")-1>>>0));switch(Ft=Ft.toLowerCase()){case"tga":vn=Ue;break;default:vn=zt}return vn}(jt);if(on!==void 0){var In=on.load(jt),di=$t.extra;if(di!==void 0&&di.technique!==void 0&&v(di.technique)===!1){var fi=di.technique;In.wrapS=fi.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,In.wrapT=fi.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,In.offset.set(fi.offsetU||0,fi.offsetV||0),In.repeat.set(fi.repeatU||1,fi.repeatV||1)}else In.wrapS=THREE.RepeatWrapping,In.wrapT=THREE.RepeatWrapping;return In}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",jt),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",$t.id),null}var Oe,Ze=function($t){return b(He.effects[$t],j)}(Me.url),ae=Ze.profile.technique,ee=Ze.profile.extra;switch(ae.type){case"phong":case"blinn":Oe=new THREE.MeshPhongMaterial;break;case"lambert":Oe=new THREE.MeshLambertMaterial;break;default:Oe=new THREE.MeshBasicMaterial}Oe.name=Me.name;var se=ae.parameters;for(var Ie in se){var We=se[Ie];switch(Ie){case"diffuse":We.color&&Oe.color.fromArray(We.color),We.texture&&(Oe.map=Te(We.texture));break;case"specular":We.color&&Oe.specular&&Oe.specular.fromArray(We.color),We.texture&&(Oe.specularMap=Te(We.texture));break;case"bump":We.texture&&(Oe.normalMap=Te(We.texture));break;case"ambient":We.texture&&(Oe.lightMap=Te(We.texture));break;case"shininess":We.float&&Oe.shininess&&(Oe.shininess=We.float);break;case"emission":We.color&&Oe.emissive&&Oe.emissive.fromArray(We.color),We.texture&&(Oe.emissiveMap=Te(We.texture))}}var Ke=se.transparent,$e=se.transparency;if($e===void 0&&Ke&&($e={float:1}),Ke===void 0&&$e&&(Ke={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Ke&&$e)if(Ke.data.texture)Oe.transparent=!0;else{var Vt=Ke.data.color;switch(Ke.opaque){case"A_ONE":Oe.opacity=Vt[3]*$e.float;break;case"RGB_ZERO":Oe.opacity=1-Vt[0]*$e.float;break;case"A_ZERO":Oe.opacity=1-Vt[3]*$e.float;break;case"RGB_ONE":Oe.opacity=Vt[0]*$e.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Ke.opaque)}Oe.opacity<1&&(Oe.transparent=!0)}return ee!==void 0&&ee.technique!==void 0&&ee.technique.double_sided===1&&(Oe.side=THREE.DoubleSide),Oe}function te(Me){return b(He.materials[Me],k)}function ue(Me){var Te;switch(Me.optics.technique){case"perspective":Te=new THREE.PerspectiveCamera(Me.optics.parameters.yfov,Me.optics.parameters.aspect_ratio,Me.optics.parameters.znear,Me.optics.parameters.zfar);break;case"orthographic":var Oe=Me.optics.parameters.ymag,Ze=Me.optics.parameters.xmag,ae=Me.optics.parameters.aspect_ratio;Ze=Ze===void 0?Oe*ae:Ze,Oe=Oe===void 0?Ze/ae:Oe,Ze*=.5,Oe*=.5,Te=new THREE.OrthographicCamera(-Ze,Ze,Oe,-Oe,Me.optics.parameters.znear,Me.optics.parameters.zfar);break;default:Te=new THREE.PerspectiveCamera}return Te.name=Me.name,Te}function xe(Me){var Te=He.cameras[Me];return Te!==void 0?b(Te,ue):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",Me),null)}function Ee(Me){var Te;switch(Me.technique){case"directional":Te=new THREE.DirectionalLight;break;case"point":Te=new THREE.PointLight;break;case"spot":Te=new THREE.SpotLight;break;case"ambient":Te=new THREE.AmbientLight}return Me.parameters.color&&Te.color.copy(Me.parameters.color),Me.parameters.distance&&(Te.distance=Me.parameters.distance),Te}function V(Me){var Te=He.lights[Me];return Te!==void 0?b(Te,Ee):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",Me),null)}function q(Me){for(var Te={array:[],stride:3},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"float_array":Te.array=I(Ze.textContent);break;case"Name_array":Te.array=T(Ze.textContent);break;case"technique_common":var ae=K(Ze,"accessor")[0];ae!==void 0&&(Te.stride=parseInt(ae.getAttribute("stride")))}}return Te}function Q(Me){for(var Te=0,Oe=0,Ze=Me.length;Oe<Ze;Oe++)Me[Oe].hasUV===!0&&Te++;Te>0&&Te<Me.length&&(Me.uvsNeedsFix=!0)}function F(Me){var Te={},Oe=Me.sources,Ze=Me.vertices,ae=Me.primitives;if(ae.length===0)return{};var ee=function(We){for(var Ke={},$e=0;$e<We.length;$e++){var Vt=We[$e];Ke[Vt.type]===void 0&&(Ke[Vt.type]=[]),Ke[Vt.type].push(Vt)}return Ke}(ae);for(var se in ee){var Ie=ee[se];Q(Ie),Te[se]=function(We,Ke,$e){for(var Vt={},$t={array:[],stride:0},Xt={array:[],stride:0},jt={array:[],stride:0},on={array:[],stride:0},In={array:[],stride:0},di={array:[],stride:4},fi={array:[],stride:4},Nn=new THREE.BufferGeometry,vn=[],Ft=0,yn=0;yn<We.length;yn++){var Gn=We[yn],Dn=Gn.inputs,bi=0;switch(Gn.type){case"lines":case"linestrips":bi=2*Gn.count;break;case"triangles":bi=3*Gn.count;break;case"polylist":for(var Pi=0;Pi<Gn.count;Pi++){var Zi=Gn.vcount[Pi];switch(Zi){case 3:bi+=3;break;case 4:bi+=6;break;default:bi+=3*(Zi-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",Gn.type)}Nn.addGroup(Ft,bi,yn),Ft+=bi,Gn.material&&vn.push(Gn.material);for(var Lr in Dn){var Ki=Dn[Lr];switch(Lr){case"VERTEX":for(var Gr in $e){var Dr=$e[Gr];switch(Gr){case"POSITION":var ar=$t.array.length;if(z(Gn,Ke[Dr],Ki.offset,$t.array),$t.stride=Ke[Dr].stride,Ke.skinWeights&&Ke.skinIndices&&(z(Gn,Ke.skinIndices,Ki.offset,di.array),z(Gn,Ke.skinWeights,Ki.offset,fi.array)),Gn.hasUV===!1&&We.uvsNeedsFix===!0)for(var bi=($t.array.length-ar)/$t.stride,zr=0;zr<bi;zr++)jt.array.push(0,0);break;case"NORMAL":z(Gn,Ke[Dr],Ki.offset,Xt.array),Xt.stride=Ke[Dr].stride;break;case"COLOR":z(Gn,Ke[Dr],Ki.offset,In.array),In.stride=Ke[Dr].stride;break;case"TEXCOORD":z(Gn,Ke[Dr],Ki.offset,jt.array),jt.stride=Ke[Dr].stride;break;case"TEXCOORD1":z(Gn,Ke[Dr],Ki.offset,on.array),jt.stride=Ke[Dr].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',Gr)}}break;case"NORMAL":z(Gn,Ke[Ki.id],Ki.offset,Xt.array),Xt.stride=Ke[Ki.id].stride;break;case"COLOR":z(Gn,Ke[Ki.id],Ki.offset,In.array),In.stride=Ke[Ki.id].stride;break;case"TEXCOORD":z(Gn,Ke[Ki.id],Ki.offset,jt.array),jt.stride=Ke[Ki.id].stride;break;case"TEXCOORD1":z(Gn,Ke[Ki.id],Ki.offset,on.array),on.stride=Ke[Ki.id].stride}}}return $t.array.length>0&&Nn.addAttribute("position",new THREE.Float32BufferAttribute($t.array,$t.stride)),Xt.array.length>0&&Nn.addAttribute("normal",new THREE.Float32BufferAttribute(Xt.array,Xt.stride)),In.array.length>0&&Nn.addAttribute("color",new THREE.Float32BufferAttribute(In.array,In.stride)),jt.array.length>0&&Nn.addAttribute("uv",new THREE.Float32BufferAttribute(jt.array,jt.stride)),on.array.length>0&&Nn.addAttribute("uv2",new THREE.Float32BufferAttribute(on.array,on.stride)),di.array.length>0&&Nn.addAttribute("skinIndex",new THREE.Float32BufferAttribute(di.array,di.stride)),fi.array.length>0&&Nn.addAttribute("skinWeight",new THREE.Float32BufferAttribute(fi.array,fi.stride)),Vt.data=Nn,Vt.type=We[0].type,Vt.materialKeys=vn,Vt}(Ie,Oe,Ze)}return Te}function z(Me,Te,Oe,Ze){function ae(vn){for(var Ft=ee[vn+Oe]*Ke,yn=Ft+Ke;Ft<yn;Ft++)Ze.push(We[Ft])}var ee=Me.p,se=Me.stride,Ie=Me.vcount,We=Te.array,Ke=Te.stride;if(Me.vcount!==void 0)for(var $e=0,Vt=0,$t=Ie.length;Vt<$t;Vt++){var Xt=Ie[Vt];if(Xt===4){var jt=$e+1*se,on=$e+2*se,In=$e+3*se;ae(Nn=$e+0*se),ae(jt),ae(In),ae(jt),ae(on),ae(In)}else if(Xt===3){var jt=$e+1*se,on=$e+2*se;ae(Nn=$e+0*se),ae(jt),ae(on)}else if(Xt>4)for(var di=1,fi=Xt-2;di<=fi;di++){var Nn=$e+0*se,jt=$e+se*di,on=$e+se*(di+1);ae(Nn),ae(jt),ae(on)}$e+=se*Xt}else for(var Vt=0,$t=ee.length;Vt<$t;Vt+=se)ae(Vt)}function X(Me){return b(He.geometries[Me],F)}function fe(Me){return Me.build!==void 0?Me.build:Me}function Ae(Me){for(var Te={sid:Me.getAttribute("sid"),name:Me.getAttribute("name")||"",attachments:[],transforms:[]},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"attachment_full":Te.attachments.push(function(ae){for(var ee={joint:ae.getAttribute("joint").split("/").pop(),transforms:[],links:[]},se=0;se<ae.childNodes.length;se++){var Ie=ae.childNodes[se];if(Ie.nodeType===1)switch(Ie.nodeName){case"link":ee.links.push(Ae(Ie));break;case"matrix":case"translate":case"rotate":ee.transforms.push(Se(Ie))}}return ee}(Ze));break;case"matrix":case"translate":case"rotate":Te.transforms.push(Se(Ze))}}return Te}function Se(Me){var Te={type:Me.nodeName},Oe=I(Me.textContent);switch(Te.type){case"matrix":Te.obj=new THREE.Matrix4,Te.obj.fromArray(Oe).transpose();break;case"translate":Te.obj=new THREE.Vector3,Te.obj.fromArray(Oe);break;case"rotate":Te.obj=new THREE.Vector3,Te.obj.fromArray(Oe),Te.angle=THREE.MathUtils.degToRad(Oe[3])}return Te}function Be(Me){return Me.build!==void 0?Me.build:Me}function Ge(Me){for(var Te={name:Me.getAttribute("name")||"",type:Me.getAttribute("type"),id:Me.getAttribute("id"),sid:Me.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"node":Te.nodes.push(Ze.getAttribute("id")),Ge(Ze);break;case"instance_camera":Te.instanceCameras.push(g(Ze.getAttribute("url")));break;case"instance_controller":Te.instanceControllers.push(ht(Ze));break;case"instance_light":Te.instanceLights.push(g(Ze.getAttribute("url")));break;case"instance_geometry":Te.instanceGeometries.push(ht(Ze));break;case"instance_node":Te.instanceNodes.push(g(Ze.getAttribute("url")));break;case"matrix":ae=I(Ze.textContent),Te.matrix.multiply(un.fromArray(ae).transpose()),Te.transforms[Ze.getAttribute("sid")]=Ze.nodeName;break;case"translate":ae=I(Ze.textContent),dn.fromArray(ae),Te.matrix.multiply(un.makeTranslation(dn.x,dn.y,dn.z)),Te.transforms[Ze.getAttribute("sid")]=Ze.nodeName;break;case"rotate":var ae=I(Ze.textContent),ee=THREE.MathUtils.degToRad(ae[3]);Te.matrix.multiply(un.makeRotationAxis(dn.fromArray(ae),ee)),Te.transforms[Ze.getAttribute("sid")]=Ze.nodeName;break;case"scale":ae=I(Ze.textContent),Te.matrix.scale(dn.fromArray(ae)),Te.transforms[Ze.getAttribute("sid")]=Ze.nodeName;break;case"extra":break;default:console.log(Ze)}}return Mn(Te.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",Te.id):He.nodes[Te.id]=Te,Te}function ht(Me){for(var Te={id:g(Me.getAttribute("url")),materials:{},skeletons:[]},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];switch(Ze.nodeName){case"bind_material":for(var ae=Ze.getElementsByTagName("instance_material"),ee=0;ee<ae.length;ee++){var se=ae[ee],Ie=se.getAttribute("symbol"),We=se.getAttribute("target");Te.materials[Ie]=g(We)}break;case"skeleton":Te.skeletons.push(g(Ze.textContent))}}return Te}function xt(Me,Te){var Oe,Ze,ae=[],ee=[];for(Oe=0;Oe<Me.length;Oe++){var se=Me[Oe];if(Mn(se))at(je(se),Te,ae);else if(function($t){return He.visualScenes[$t]!==void 0}(se))for(var Ie=He.visualScenes[se].children,We=0;We<Ie.length;We++){var Ke=Ie[We];Ke.type==="JOINT"&&at(je(Ke.id),Te,ae)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",se)}for(Oe=0;Oe<Te.length;Oe++)for(We=0;We<ae.length;We++)if((Ze=ae[We]).bone.name===Te[Oe].name){ee[Oe]=Ze,Ze.processed=!0;break}for(Oe=0;Oe<ae.length;Oe++)(Ze=ae[Oe]).processed===!1&&(ee.push(Ze),Ze.processed=!0);var $e=[],Vt=[];for(Oe=0;Oe<ee.length;Oe++)Ze=ee[Oe],$e.push(Ze.bone),Vt.push(Ze.boneInverse);return new THREE.Skeleton($e,Vt)}function at(Me,Te,Oe){Me.traverse(function(Ze){if(Ze.isBone===!0){for(var ae,ee=0;ee<Te.length;ee++){var se=Te[ee];if(se.name===Ze.name){ae=se.boneInverse;break}}ae===void 0&&(ae=new THREE.Matrix4),Oe.push({bone:Ze,boneInverse:ae,processed:!1})}})}function Gt(Me){for(var Te=[],Oe=Me.matrix,Ze=Me.nodes,ae=Me.type,ee=Me.instanceCameras,se=Me.instanceControllers,Ie=Me.instanceLights,We=Me.instanceGeometries,Ke=Me.instanceNodes,$e=0,Vt=Ze.length;$e<Vt;$e++)Te.push(je(Ze[$e]));for(var $e=0,Vt=ee.length;$e<Vt;$e++){var $t=xe(ee[$e]);$t!==null&&Te.push($t.clone())}for(var $e=0,Vt=se.length;$e<Vt;$e++)for(var Xt=L((Nn=se[$e]).id),jt=Yt(vn=X(Xt.id),Nn.materials),on=xt(Nn.skeletons,Xt.skin.joints),In=0,di=jt.length;In<di;In++)(Ft=jt[In]).isSkinnedMesh&&(Ft.bind(on,Xt.skin.bindMatrix),Ft.normalizeSkinWeights()),Te.push(Ft);for(var $e=0,Vt=Ie.length;$e<Vt;$e++){var fi=V(Ie[$e]);fi!==null&&Te.push(fi.clone())}for(var $e=0,Vt=We.length;$e<Vt;$e++)for(var Nn=We[$e],vn=X(Nn.id),In=0,di=(jt=Yt(vn,Nn.materials)).length;In<di;In++)Te.push(jt[In]);for(var $e=0,Vt=Ke.length;$e<Vt;$e++)Te.push(je(Ke[$e]).clone());var Ft;if(Ze.length===0&&Te.length===1)Ft=Te[0];else for(Ft=ae==="JOINT"?new THREE.Bone:new THREE.Group,$e=0;$e<Te.length;$e++)Ft.add(Te[$e]);return Ft.name===""&&(Ft.name=ae==="JOINT"?Me.sid:Me.name),Ft.matrix.copy(Oe),Ft.matrix.decompose(Ft.position,Ft.quaternion,Ft.scale),Ft}function wt(Me,Te){for(var Oe=[],Ze=0,ae=Me.length;Ze<ae;Ze++){var ee=Te[Me[Ze]];ee===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",Me[Ze]),Oe.push(bn)):Oe.push(te(ee))}return Oe}function Yt(Me,Te){var Oe=[];for(var Ze in Me){var ae=Me[Ze],ee=wt(ae.materialKeys,Te);ee.length===0&&(Ze==="lines"||Ze==="linestrips"?ee.push(new THREE.LineBasicMaterial):ee.push(new THREE.MeshPhongMaterial));var se=ae.data.attributes.skinIndex!==void 0;if(se)for(var Ie=0,We=ee.length;Ie<We;Ie++)ee[Ie].skinning=!0;var Ke,$e=ee.length===1?ee[0]:ee;switch(Ze){case"lines":Ke=new THREE.LineSegments(ae.data,$e);break;case"linestrips":Ke=new THREE.Line(ae.data,$e);break;case"triangles":case"polylist":Ke=se?new THREE.SkinnedMesh(ae.data,$e):new THREE.Mesh(ae.data,$e)}Oe.push(Ke)}return Oe}function Mn(Me){return He.nodes[Me]!==void 0}function je(Me){return b(He.nodes[Me],Gt)}function rt(Me){var Te=new THREE.Group;Te.name=Me.name;for(var Oe=Me.children,Ze=0;Ze<Oe.length;Ze++){var ae=Oe[Ze];Te.add(je(ae.id))}return Te}function At(Me){return b(He.visualScenes[Me],rt)}var Bt=new THREE.Vector3,Pt=new THREE.Vector3,qt=new THREE.Quaternion,un=new THREE.Matrix4,dn=new THREE.Vector3,bn=new THREE.MeshBasicMaterial({color:16711935});if(d.length===0)return{scene:new THREE.Scene};var tn=K(new DOMParser().parseFromString(d,"application/xml"),"COLLADA")[0],ri=tn.getAttribute("version");console.log("THREE.ColladaLoader: File version",ri);var ni=function(Me){return{unit:function(Te){return Te!==void 0&&Te.hasAttribute("meter")===!0?parseFloat(Te.getAttribute("meter")):1}(K(Me,"unit")[0]),upAxis:function(Te){return Te!==void 0?Te.textContent:"Y_UP"}(K(Me,"up_axis")[0])}}(K(tn,"asset")[0]),zt=new THREE.TextureLoader(this.manager);zt.setPath(this.resourcePath||U).setCrossOrigin(this.crossOrigin);var Ue;THREE.TGALoader&&(Ue=new THREE.TGALoader(this.manager)).setPath(this.resourcePath||U);var Pe=[],Ye={},ze=0,He={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};y(tn,"library_animations","animation",function(Me){for(var Te={sources:{},samplers:{},channels:{}},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1){var ee;switch(ae.nodeName){case"source":ee=ae.getAttribute("id"),Te.sources[ee]=q(ae);break;case"sampler":ee=ae.getAttribute("id"),Te.samplers[ee]=function(se){for(var Ie={inputs:{}},We=0,Ke=se.childNodes.length;We<Ke;We++){var $e=se.childNodes[We];if($e.nodeType===1)switch($e.nodeName){case"input":var Vt=g($e.getAttribute("source")),$t=$e.getAttribute("semantic");Ie.inputs[$t]=Vt}}return Ie}(ae);break;case"channel":ee=ae.getAttribute("target"),Te.channels[ee]=function(se){var Ie={},We=se.getAttribute("target").split("/"),Ke=We.shift(),$e=We.shift(),Vt=$e.indexOf("(")!==-1,$t=$e.indexOf(".")!==-1;if($t)We=$e.split("."),$e=We.shift(),Ie.member=We.shift();else if(Vt){var Xt=$e.split("(");$e=Xt.shift();for(var jt=0;jt<Xt.length;jt++)Xt[jt]=parseInt(Xt[jt].replace(/\)/,""));Ie.indices=Xt}return Ie.id=Ke,Ie.sid=$e,Ie.arraySyntax=Vt,Ie.memberSyntax=$t,Ie.sampler=g(se.getAttribute("source")),Ie}(ae);break;default:console.log(ae)}}}He.animations[Me.getAttribute("id")]=Te}),y(tn,"library_animation_clips","animation_clip",function(Me){for(var Te={name:Me.getAttribute("id")||"default",start:parseFloat(Me.getAttribute("start")||0),end:parseFloat(Me.getAttribute("end")||0),animations:[]},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"instance_animation":Te.animations.push(g(ae.getAttribute("url")))}}He.clips[Me.getAttribute("id")]=Te}),y(tn,"library_controllers","controller",function(Me){for(var Te={},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"skin":Te.id=g(ae.getAttribute("source")),Te.skin=function(ee){for(var se={sources:{}},Ie=0,We=ee.childNodes.length;Ie<We;Ie++){var Ke=ee.childNodes[Ie];if(Ke.nodeType===1)switch(Ke.nodeName){case"bind_shape_matrix":se.bindShapeMatrix=I(Ke.textContent);break;case"source":var $e=Ke.getAttribute("id");se.sources[$e]=q(Ke);break;case"joints":se.joints=function(Vt){for(var $t={inputs:{}},Xt=0,jt=Vt.childNodes.length;Xt<jt;Xt++){var on=Vt.childNodes[Xt];if(on.nodeType===1)switch(on.nodeName){case"input":var In=on.getAttribute("semantic"),di=g(on.getAttribute("source"));$t.inputs[In]=di}}return $t}(Ke);break;case"vertex_weights":se.vertexWeights=function(Vt){for(var $t={inputs:{}},Xt=0,jt=Vt.childNodes.length;Xt<jt;Xt++){var on=Vt.childNodes[Xt];if(on.nodeType===1)switch(on.nodeName){case"input":var In=on.getAttribute("semantic"),di=g(on.getAttribute("source")),fi=parseInt(on.getAttribute("offset"));$t.inputs[In]={id:di,offset:fi};break;case"vcount":$t.vcount=u(on.textContent);break;case"v":$t.v=u(on.textContent)}}return $t}(Ke)}}return se}(ae);break;case"morph":Te.id=g(ae.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}He.controllers[Me.getAttribute("id")]=Te}),y(tn,"library_images","image",function(Me){var Te={init_from:K(Me,"init_from")[0].textContent};He.images[Me.getAttribute("id")]=Te}),y(tn,"library_effects","effect",function(Me){for(var Te={},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"profile_COMMON":Te.profile=function(ee){for(var se={surfaces:{},samplers:{}},Ie=0,We=ee.childNodes.length;Ie<We;Ie++){var Ke=ee.childNodes[Ie];if(Ke.nodeType===1)switch(Ke.nodeName){case"newparam":(function($e,Vt){for(var $t=$e.getAttribute("sid"),Xt=0,jt=$e.childNodes.length;Xt<jt;Xt++){var on=$e.childNodes[Xt];if(on.nodeType===1)switch(on.nodeName){case"surface":Vt.surfaces[$t]=function(In){for(var di={},fi=0,Nn=In.childNodes.length;fi<Nn;fi++){var vn=In.childNodes[fi];if(vn.nodeType===1)switch(vn.nodeName){case"init_from":di.init_from=vn.textContent}}return di}(on);break;case"sampler2D":Vt.samplers[$t]=function(In){for(var di={},fi=0,Nn=In.childNodes.length;fi<Nn;fi++){var vn=In.childNodes[fi];if(vn.nodeType===1)switch(vn.nodeName){case"source":di.source=vn.textContent}}return di}(on)}}})(Ke,se);break;case"technique":se.technique=function($e){for(var Vt={},$t=0,Xt=$e.childNodes.length;$t<Xt;$t++){var jt=$e.childNodes[$t];if(jt.nodeType===1)switch(jt.nodeName){case"constant":case"lambert":case"blinn":case"phong":Vt.type=jt.nodeName,Vt.parameters=function(on){for(var In={},di=0,fi=on.childNodes.length;di<fi;di++){var Nn=on.childNodes[di];if(Nn.nodeType===1)switch(Nn.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":In[Nn.nodeName]=J(Nn);break;case"transparent":In[Nn.nodeName]={opaque:Nn.getAttribute("opaque"),data:J(Nn)}}}return In}(jt)}}return Vt}(Ke);break;case"extra":se.extra=function($e){for(var Vt={},$t=0,Xt=$e.childNodes.length;$t<Xt;$t++){var jt=$e.childNodes[$t];if(jt.nodeType===1)switch(jt.nodeName){case"technique":Vt.technique=function(on){for(var In={},di=0,fi=on.childNodes.length;di<fi;di++){var Nn=on.childNodes[di];if(Nn.nodeType===1)switch(Nn.nodeName){case"double_sided":In[Nn.nodeName]=parseInt(Nn.textContent)}}return In}(jt)}}return Vt}(Ke)}}return se}(ae)}}He.effects[Me.getAttribute("id")]=Te}),y(tn,"library_materials","material",function(Me){for(var Te={name:Me.getAttribute("name")},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"instance_effect":Te.url=g(ae.getAttribute("url"))}}He.materials[Me.getAttribute("id")]=Te}),y(tn,"library_cameras","camera",function(Me){for(var Te={name:Me.getAttribute("name")},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"optics":Te.optics=function(ee){for(var se=0;se<ee.childNodes.length;se++){var Ie=ee.childNodes[se];switch(Ie.nodeName){case"technique_common":return function(We){for(var Ke={},$e=0;$e<We.childNodes.length;$e++){var Vt=We.childNodes[$e];switch(Vt.nodeName){case"perspective":case"orthographic":Ke.technique=Vt.nodeName,Ke.parameters=function($t){for(var Xt={},jt=0;jt<$t.childNodes.length;jt++){var on=$t.childNodes[jt];switch(on.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":Xt[on.nodeName]=parseFloat(on.textContent)}}return Xt}(Vt)}}return Ke}(Ie)}}return{}}(ae)}}He.cameras[Me.getAttribute("id")]=Te}),y(tn,"library_lights","light",function(Me){for(var Te={},Oe=0,Ze=Me.childNodes.length;Oe<Ze;Oe++){var ae=Me.childNodes[Oe];if(ae.nodeType===1)switch(ae.nodeName){case"technique_common":Te=function(ee){for(var se={},Ie=0,We=ee.childNodes.length;Ie<We;Ie++){var Ke=ee.childNodes[Ie];if(Ke.nodeType===1)switch(Ke.nodeName){case"directional":case"point":case"spot":case"ambient":se.technique=Ke.nodeName,se.parameters=function($e){for(var Vt={},$t=0,Xt=$e.childNodes.length;$t<Xt;$t++){var jt=$e.childNodes[$t];if(jt.nodeType===1)switch(jt.nodeName){case"color":var on=I(jt.textContent);Vt.color=new THREE.Color().fromArray(on);break;case"falloff_angle":Vt.falloffAngle=parseFloat(jt.textContent);break;case"quadratic_attenuation":var In=parseFloat(jt.textContent);Vt.distance=In?Math.sqrt(1/In):0}}return Vt}(Ke)}}return se}(ae)}}He.lights[Me.getAttribute("id")]=Te}),y(tn,"library_geometries","geometry",function(Me){var Te={name:Me.getAttribute("name"),sources:{},vertices:{},primitives:[]},Oe=K(Me,"mesh")[0];if(Oe!==void 0){for(var Ze=0;Ze<Oe.childNodes.length;Ze++){var ae=Oe.childNodes[Ze];if(ae.nodeType===1){var ee=ae.getAttribute("id");switch(ae.nodeName){case"source":Te.sources[ee]=q(ae);break;case"vertices":Te.vertices=function(se){for(var Ie={},We=0;We<se.childNodes.length;We++){var Ke=se.childNodes[We];Ke.nodeType===1&&(Ie[Ke.getAttribute("semantic")]=g(Ke.getAttribute("source")))}return Ie}(ae);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",ae.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":Te.primitives.push(function(se){for(var Ie={type:se.nodeName,material:se.getAttribute("material"),count:parseInt(se.getAttribute("count")),inputs:{},stride:0,hasUV:!1},We=0,Ke=se.childNodes.length;We<Ke;We++){var $e=se.childNodes[We];if($e.nodeType===1)switch($e.nodeName){case"input":var Vt=g($e.getAttribute("source")),$t=$e.getAttribute("semantic"),Xt=parseInt($e.getAttribute("offset")),jt=parseInt($e.getAttribute("set")),on=jt>0?$t+jt:$t;Ie.inputs[on]={id:Vt,offset:Xt},Ie.stride=Math.max(Ie.stride,Xt+1),$t==="TEXCOORD"&&(Ie.hasUV=!0);break;case"vcount":Ie.vcount=u($e.textContent);break;case"p":Ie.p=u($e.textContent)}}return Ie}(ae));break;default:console.log(ae)}}}He.geometries[Me.getAttribute("id")]=Te}}),y(tn,"library_nodes","node",Ge),y(tn,"library_visual_scenes","visual_scene",function(Me){var Te={name:Me.getAttribute("name"),children:[]};(function(ae){for(var ee=ae.getElementsByTagName("node"),se=0;se<ee.length;se++){var Ie=ee[se];Ie.hasAttribute("id")===!1&&Ie.setAttribute("id",C())}})(Me);for(var Oe=K(Me,"node"),Ze=0;Ze<Oe.length;Ze++)Te.children.push(Ge(Oe[Ze]));He.visualScenes[Me.getAttribute("id")]=Te}),y(tn,"library_kinematics_models","kinematics_model",function(Me){for(var Te={name:Me.getAttribute("name")||"",joints:{},links:[]},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"technique_common":(function(ae,ee){for(var se=0;se<ae.childNodes.length;se++){var Ie=ae.childNodes[se];if(Ie.nodeType===1)switch(Ie.nodeName){case"joint":ee.joints[Ie.getAttribute("sid")]=function(We){for(var Ke,$e=0;$e<We.childNodes.length;$e++){var Vt=We.childNodes[$e];if(Vt.nodeType===1)switch(Vt.nodeName){case"prismatic":case"revolute":Ke=function($t,Xt){for(var Xt={sid:$t.getAttribute("sid"),name:$t.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:$t.nodeName,static:!1,zeroPosition:0,middlePosition:0},jt=0;jt<$t.childNodes.length;jt++){var on=$t.childNodes[jt];if(on.nodeType===1)switch(on.nodeName){case"axis":var In=I(on.textContent);Xt.axis.fromArray(In);break;case"limits":var di=on.getElementsByTagName("max")[0],fi=on.getElementsByTagName("min")[0];Xt.limits.max=parseFloat(di.textContent),Xt.limits.min=parseFloat(fi.textContent)}}return Xt.limits.min>=Xt.limits.max&&(Xt.static=!0),Xt.middlePosition=(Xt.limits.min+Xt.limits.max)/2,Xt}(Vt)}}return Ke}(Ie);break;case"link":ee.links.push(Ae(Ie))}}})(Ze,Te)}}He.kinematicsModels[Me.getAttribute("id")]=Te}),y(tn,"library_physics_models","physics_model",function(Me){for(var Te={name:Me.getAttribute("name")||"",rigidBodies:{}},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"rigid_body":Te.rigidBodies[Ze.getAttribute("name")]={},function(ae,ee){for(var se=0;se<ae.childNodes.length;se++){var Ie=ae.childNodes[se];if(Ie.nodeType===1)switch(Ie.nodeName){case"technique_common":(function(We,Ke){for(var $e=0;$e<We.childNodes.length;$e++){var Vt=We.childNodes[$e];if(Vt.nodeType===1)switch(Vt.nodeName){case"inertia":Ke.inertia=I(Vt.textContent);break;case"mass":Ke.mass=I(Vt.textContent)[0]}}})(Ie,ee)}}}(Ze,Te.rigidBodies[Ze.getAttribute("name")])}}He.physicsModels[Me.getAttribute("id")]=Te}),y(tn,"scene","instance_kinematics_scene",function(Me){for(var Te={bindJointAxis:[]},Oe=0;Oe<Me.childNodes.length;Oe++){var Ze=Me.childNodes[Oe];if(Ze.nodeType===1)switch(Ze.nodeName){case"bind_joint_axis":Te.bindJointAxis.push(function(ae){for(var ee={target:ae.getAttribute("target").split("/").pop()},se=0;se<ae.childNodes.length;se++){var Ie=ae.childNodes[se];if(Ie.nodeType===1)switch(Ie.nodeName){case"axis":var We=Ie.getElementsByTagName("param")[0];ee.axis=We.textContent;var Ke=ee.axis.split("inst_").pop().split("axis")[0];ee.jointIndex=Ke.substr(0,Ke.length-1)}}return ee}(Ze))}}He.kinematicsScenes[g(Me.getAttribute("url"))]=Te}),E(He.animations,m),E(He.clips,_),E(He.controllers,R),E(He.images,P),E(He.effects,j),E(He.materials,k),E(He.cameras,ue),E(He.lights,Ee),E(He.geometries,F),E(He.visualScenes,rt),function(){var Me=He.clips;if(v(Me)===!0){if(v(He.animations)===!1){var Te=[];for(var Oe in He.animations)for(var Ze=w(Oe),ae=0,ee=Ze.length;ae<ee;ae++)Te.push(Ze[ae]);Pe.push(new THREE.AnimationClip("default",-1,Te))}}else for(var Oe in Me)Pe.push(O(Oe))}(),function(){function Me(on,In){var di=In.getAttribute("name"),fi=ae.joints[on];se.traverse(function(Nn){Nn.name===di&&(We[on]={object:Nn,transforms:function(vn){for(var Ft=[],yn=tn.querySelector('[id="'+vn.id+'"]'),Gn=0;Gn<yn.childNodes.length;Gn++){var Dn=yn.childNodes[Gn];if(Dn.nodeType===1)switch(Dn.nodeName){case"matrix":var Pi=I(Dn.textContent),bi=new THREE.Matrix4().fromArray(Pi).transpose();Ft.push({sid:Dn.getAttribute("sid"),type:Dn.nodeName,obj:bi});break;case"translate":case"scale":var Pi=I(Dn.textContent),Zi=new THREE.Vector3().fromArray(Pi);Ft.push({sid:Dn.getAttribute("sid"),type:Dn.nodeName,obj:Zi});break;case"rotate":var Pi=I(Dn.textContent),Zi=new THREE.Vector3().fromArray(Pi),Lr=THREE.MathUtils.degToRad(Pi[3]);Ft.push({sid:Dn.getAttribute("sid"),type:Dn.nodeName,obj:Zi,angle:Lr})}}return Ft}(In),joint:fi,position:fi.zeroPosition})})}var Te=Object.keys(He.kinematicsModels)[0],Oe=Object.keys(He.kinematicsScenes)[0],Ze=Object.keys(He.visualScenes)[0];if(Te!==void 0&&Oe!==void 0){for(var ae=function(on){return b(He.kinematicsModels[on],fe)}(Te),ee=function(on){return b(He.kinematicsScenes[on],Be)}(Oe),se=At(Ze),Ie=ee.bindJointAxis,We={},Ke=0,$e=Ie.length;Ke<$e;Ke++){var Vt=Ie[Ke],$t=tn.querySelector('[sid="'+Vt.target+'"]');if($t){var Xt=$t.parentElement;Me(Vt.jointIndex,Xt)}}var jt=new THREE.Matrix4;Ye={joints:ae&&ae.joints,getJointValue:function(on){var In=We[on];if(In)return In.position;console.warn("THREE.ColladaLoader: Joint "+on+" doesn't exist.")},setJointValue:function(on,In){var di=We[on];if(di){var fi=di.joint;if(In>fi.limits.max||In<fi.limits.min)console.warn("THREE.ColladaLoader: Joint "+on+" value "+In+" outside of limits (min: "+fi.limits.min+", max: "+fi.limits.max+").");else if(fi.static)console.warn("THREE.ColladaLoader: Joint "+on+" is static.");else{var Nn=di.object,vn=fi.axis,Ft=di.transforms;un.identity();for(var yn=0;yn<Ft.length;yn++){var Gn=Ft[yn];if(Gn.sid&&Gn.sid.indexOf(on)!==-1)switch(fi.type){case"revolute":un.multiply(jt.makeRotationAxis(vn,THREE.MathUtils.degToRad(In)));break;case"prismatic":un.multiply(jt.makeTranslation(vn.x*In,vn.y*In,vn.z*In));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+fi.type)}else switch(Gn.type){case"matrix":un.multiply(Gn.obj);break;case"translate":un.multiply(jt.makeTranslation(Gn.obj.x,Gn.obj.y,Gn.obj.z));break;case"scale":un.scale(Gn.obj);break;case"rotate":un.multiply(jt.makeRotationAxis(Gn.obj,Gn.angle))}}Nn.matrix.copy(un),Nn.matrix.decompose(Nn.position,Nn.quaternion,Nn.scale),We[on].position=In}}else console.log("THREE.ColladaLoader: "+on+" does not exist.")}}}}();var et=function(Me){return At(g(K(Me,"instance_visual_scene")[0].getAttribute("url")))}(K(tn,"scene")[0]);return ni.upAxis==="Z_UP"&&et.quaternion.setFromEuler(new THREE.Euler(-Math.PI/2,0,0)),et.scale.multiplyScalar(ni.unit),{animations:Pe,kinematics:Ye,library:He,scene:et}}}},{}],4:[function(h,S,W){var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},U=typeof Symbol=="function"&&d(Symbol.iterator)==="symbol"?function(K){return K===void 0?"undefined":d(K)}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":K===void 0?"undefined":d(K)};S.exports=THREE.FBXLoader=function(){function K(V){this.manager=V!==void 0?V:THREE.DefaultLoadingManager}function T(V){this.textureLoader=V}function I(){}function u(){}function g(){}function C(){}function v(V,q){this.dv=new DataView(V),this.offset=0,this.littleEndian=q===void 0||q}function y(){}function E(V){var q=V.match(/FBXVersion: (\d+)/);if(q)return parseInt(q[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function b(V){return V/46186158e3}function m(V,q,Q,F){var z;switch(F.mappingType){case"ByPolygonVertex":z=V;break;case"ByPolygon":z=q;break;case"ByVertice":z=Q;break;case"AllSame":z=F.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+F.mappingType)}F.referenceType==="IndexToDirect"&&(z=F.indices[z]);var X=z*F.dataSize,fe=X+F.dataSize;return function(Ae,Se,Be,Ge){for(var ht=Be,xt=0;ht<Ge;ht++,xt++)Ae[xt]=Se[ht];return Ae}(j,F.buffer,X,fe)}function w(V){var q=new THREE.Matrix4;xe.set(0,0,0),Ee.identity();var Q=_(V.eulerOrder?V.eulerOrder:0);if(V.translation&&xe.fromArray(V.translation),V.rotationOffset&&xe.add(ue.fromArray(V.rotationOffset)),V.rotation&&((F=V.rotation.map(THREE.MathUtils.degToRad)).push(Q),Ee.makeRotationFromEuler(te.fromArray(F))),V.preRotation&&((F=V.preRotation.map(THREE.MathUtils.degToRad)).push(Q),k.makeRotationFromEuler(te.fromArray(F)),Ee.premultiply(k)),V.postRotation){var F=V.postRotation.map(THREE.MathUtils.degToRad);F.push(Q),k.makeRotationFromEuler(te.fromArray(F)),k.getInverse(k),Ee.multiply(k)}return V.scale&&q.scale(ue.fromArray(V.scale)),q.setPosition(xe),q.multiply(Ee),q}function _(V){var q=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return V===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),q[0]):q[V]}function O(V){return V.split(",").map(function(q){return parseFloat(q)})}function R(V,q,Q){return q===void 0&&(q=0),Q===void 0&&(Q=V.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(V,q,Q))}function L(V,q,Q){return V.slice(0,q).concat(Q).concat(V.slice(q))}var P,Y,J;K.prototype={constructor:K,crossOrigin:"anonymous",load:function(V,q,Q,F){var z=this,X=THREE.LoaderUtils.extractUrlBase(V),fe=new THREE.FileLoader(this.manager);fe.setResponseType("arraybuffer"),fe.load(V,function(Ae){try{var Se=z.parse(Ae,X);q(Se)}catch(Be){setTimeout(function(){F&&F(Be),z.manager.itemError(V)},0)}},Q,F)},setCrossOrigin:function(V){return this.crossOrigin=V,this},parse:function(V,q){if(function(F){var z="Kaydara FBX Binary  \0";return F.byteLength>=z.length&&z===R(F,0,z.length)}(V))P=new C().parse(V);else{var Q=R(V);if(!function(F){function z(Se){var Be=F[Se-1];return F=F.slice(fe+Se),fe++,Be}for(var X=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],fe=0,Ae=0;Ae<X.length;++Ae)if(z(1)===X[Ae])return!1;return!0}(Q))throw new Error("THREE.FBXLoader: Unknown format.");if(E(Q)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+E(Q));P=new g().parse(Q)}return new T(new THREE.TextureLoader(this.manager).setPath(q).setCrossOrigin(this.crossOrigin)).parse(P)}},T.prototype={constructor:T,parse:function(){Y=this.parseConnections();var V=this.parseImages(),q=this.parseTextures(V),Q=this.parseMaterials(q),F=this.parseDeformers(),z=new I().parse(F);return this.parseScene(F,z,Q),J},parseConnections:function(){var V=new Map;return"Connections"in P&&P.Connections.connections.forEach(function(q){var Q=q[0],F=q[1],z=q[2];V.has(Q)||V.set(Q,{parents:[],children:[]});var X={ID:F,relationship:z};V.get(Q).parents.push(X),V.has(F)||V.set(F,{parents:[],children:[]});var fe={ID:Q,relationship:z};V.get(F).children.push(fe)}),V},parseImages:function(){var V={},q={};if("Video"in P.Objects){var Q=P.Objects.Video;for(var F in Q){var z=Q[F];if(V[Se=parseInt(F)]=z.RelativeFilename||z.Filename,"Content"in z){var X=z.Content instanceof ArrayBuffer&&z.Content.byteLength>0,fe=typeof z.Content=="string"&&z.Content!=="";if(X||fe){var Ae=this.parseImage(Q[F]);q[z.RelativeFilename||z.Filename]=Ae}}}}for(var Se in V){var Be=V[Se];q[Be]!==void 0?V[Se]=q[Be]:V[Se]=V[Se].split("\\").pop()}return V},parseImage:function(V){var q,Q=V.Content,F=V.RelativeFilename||V.Filename,z=F.slice(F.lastIndexOf(".")+1).toLowerCase();switch(z){case"bmp":q="image/bmp";break;case"jpg":case"jpeg":q="image/jpeg";break;case"png":q="image/png";break;case"tif":q="image/tiff";break;case"tga":if(typeof THREE.TGALoader!="function")return void console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");THREE.Loader.Handlers.get(".tga")===null&&THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),q="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+z+'" is not supported.')}if(typeof Q=="string")return"data:"+q+";base64,"+Q;var X=new Uint8Array(Q);return window.URL.createObjectURL(new Blob([X],{type:q}))},parseTextures:function(V){var q=new Map;if("Texture"in P.Objects){var Q=P.Objects.Texture;for(var F in Q){var z=this.parseTexture(Q[F],V);q.set(parseInt(F),z)}}return q},parseTexture:function(V,q){var Q=this.loadTexture(V,q);Q.ID=V.id,Q.name=V.attrName;var F=V.WrapModeU,z=V.WrapModeV,X=F!==void 0?F.value:0,fe=z!==void 0?z.value:0;if(Q.wrapS=X===0?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,Q.wrapT=fe===0?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in V){var Ae=V.Scaling.value;Q.repeat.x=Ae[0],Q.repeat.y=Ae[1]}return Q},loadTexture:function(V,q){var Q,F=this.textureLoader.path,z=Y.get(V.id).children;z!==void 0&&z.length>0&&q[z[0].ID]!==void 0&&((Q=q[z[0].ID]).indexOf("blob:")!==0&&Q.indexOf("data:")!==0||this.textureLoader.setPath(void 0));var X,fe=V.FileName.slice(-3).toLowerCase();if(fe==="tga"){var Ae=THREE.Loader.Handlers.get(".tga");Ae===null?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",Q),X=new THREE.Texture):X=Ae.load(Q)}else fe==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",Q),X=new THREE.Texture):X=this.textureLoader.load(Q);return this.textureLoader.setPath(F),X},parseMaterials:function(V){var q=new Map;if("Material"in P.Objects){var Q=P.Objects.Material;for(var F in Q){var z=this.parseMaterial(Q[F],V);z!==null&&q.set(parseInt(F),z)}}return q},parseMaterial:function(V,q){var Q=V.id,F=V.attrName,z=V.ShadingModel;if((z===void 0?"undefined":U(z))==="object"&&(z=z.value),!Y.has(Q))return null;var X,fe=this.parseParameters(V,q,Q);switch(z.toLowerCase()){case"phong":X=new THREE.MeshPhongMaterial;break;case"lambert":X=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',z),X=new THREE.MeshPhongMaterial({color:3342591})}return X.setValues(fe),X.name=F,X},parseParameters:function(V,q,Q){var F={};V.BumpFactor&&(F.bumpScale=V.BumpFactor.value),V.Diffuse?F.color=new THREE.Color().fromArray(V.Diffuse.value):V.DiffuseColor&&V.DiffuseColor.type==="Color"&&(F.color=new THREE.Color().fromArray(V.DiffuseColor.value)),V.DisplacementFactor&&(F.displacementScale=V.DisplacementFactor.value),V.Emissive?F.emissive=new THREE.Color().fromArray(V.Emissive.value):V.EmissiveColor&&V.EmissiveColor.type==="Color"&&(F.emissive=new THREE.Color().fromArray(V.EmissiveColor.value)),V.EmissiveFactor&&(F.emissiveIntensity=parseFloat(V.EmissiveFactor.value)),V.Opacity&&(F.opacity=parseFloat(V.Opacity.value)),F.opacity<1&&(F.transparent=!0),V.ReflectionFactor&&(F.reflectivity=V.ReflectionFactor.value),V.Shininess&&(F.shininess=V.Shininess.value),V.Specular?F.specular=new THREE.Color().fromArray(V.Specular.value):V.SpecularColor&&V.SpecularColor.type==="Color"&&(F.specular=new THREE.Color().fromArray(V.SpecularColor.value));var z=this;return Y.get(Q).children.forEach(function(X){var fe=X.relationship;switch(fe){case"Bump":F.bumpMap=z.getTexture(q,X.ID);break;case"DiffuseColor":F.map=z.getTexture(q,X.ID);break;case"DisplacementColor":F.displacementMap=z.getTexture(q,X.ID);break;case"EmissiveColor":F.emissiveMap=z.getTexture(q,X.ID);break;case"NormalMap":F.normalMap=z.getTexture(q,X.ID);break;case"ReflectionColor":F.envMap=z.getTexture(q,X.ID),F.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":F.specularMap=z.getTexture(q,X.ID);break;case"TransparentColor":F.alphaMap=z.getTexture(q,X.ID),F.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",fe)}}),F},getTexture:function(V,q){return"LayeredTexture"in P.Objects&&q in P.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),q=Y.get(q).children[0].ID),V.get(q)},parseDeformers:function(){var V={},q={};if("Deformer"in P.Objects){var Q=P.Objects.Deformer;for(var F in Q){var z=Q[F],X=Y.get(parseInt(F));if(z.attrType==="Skin"){var fe=this.parseSkeleton(X,Q);fe.ID=F,X.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),fe.geometryID=X.parents[0].ID,V[F]=fe}else if(z.attrType==="BlendShape"){var Ae={id:F};Ae.rawTargets=this.parseMorphTargets(X,Q),Ae.id=F,X.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),q[F]=Ae}}}return{skeletons:V,morphTargets:q}},parseSkeleton:function(V,q){var Q=[];return V.children.forEach(function(F){var z=q[F.ID];if(z.attrType==="Cluster"){var X={ID:F.ID,indices:[],weights:[],transform:new THREE.Matrix4().fromArray(z.Transform.a),transformLink:new THREE.Matrix4().fromArray(z.TransformLink.a),linkMode:z.Mode};"Indexes"in z&&(X.indices=z.Indexes.a,X.weights=z.Weights.a),Q.push(X)}}),{rawBones:Q,bones:[]}},parseMorphTargets:function(V,q){for(var Q=[],F=0;F<V.children.length;F++){if(F===8){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var z=V.children[F],X=q[z.ID],fe={name:X.attrName,initialWeight:X.DeformPercent,id:X.id,fullWeights:X.FullWeights.a};if(X.attrType!=="BlendShapeChannel")return;Y.get(parseInt(z.ID)).children.forEach(function(Ae){Ae.relationship===void 0&&(fe.geoID=Ae.ID)}),Q.push(fe)}return Q},parseScene:function(V,q,Q){J=new THREE.Group;var F=this.parseModels(V.skeletons,q,Q),z=P.Objects.Model,X=this;F.forEach(function(Ae){var Se=z[Ae.ID];X.setLookAtProperties(Ae,Se),Y.get(Ae.ID).parents.forEach(function(Be){var Ge=F.get(Be.ID);Ge!==void 0&&Ge.add(Ae)}),Ae.parent===null&&J.add(Ae)}),this.bindSkeleton(V.skeletons,q,F),this.createAmbientLight(),this.setupMorphMaterials();var fe=new u().parse();J.children.length===1&&J.children[0].isGroup&&(J.children[0].animations=fe,J=J.children[0]),J.animations=fe},parseModels:function(V,q,Q){var F=new Map,z=P.Objects.Model;for(var X in z){var fe=parseInt(X),Ae=z[X],Se=Y.get(fe),Be=this.buildSkeleton(Se,V,fe,Ae.attrName);if(!Be){switch(Ae.attrType){case"Camera":Be=this.createCamera(Se);break;case"Light":Be=this.createLight(Se);break;case"Mesh":Be=this.createMesh(Se,q,Q);break;case"NurbsCurve":Be=this.createCurve(Se,q);break;case"LimbNode":case"Null":default:Be=new THREE.Group}Be.name=THREE.PropertyBinding.sanitizeNodeName(Ae.attrName),Be.ID=fe}this.setModelTransforms(Be,Ae),F.set(fe,Be)}return F},buildSkeleton:function(V,q,Q,F){var z=null;return V.parents.forEach(function(X){for(var fe in q){var Ae=q[fe];Ae.rawBones.forEach(function(Se,Be){if(Se.ID===X.ID){var Ge=z;(z=new THREE.Bone).matrixWorld.copy(Se.transformLink),z.name=THREE.PropertyBinding.sanitizeNodeName(F),z.ID=Q,Ae.bones[Be]=z,Ge!==null&&z.add(Ge)}})}}),z},createCamera:function(V){var q,Q;if(V.children.forEach(function(ht){var xt=P.Objects.NodeAttribute[ht.ID];xt!==void 0&&(Q=xt)}),Q===void 0)q=new THREE.Object3D;else{var F=0;Q.CameraProjectionType!==void 0&&Q.CameraProjectionType.value===1&&(F=1);var z=1;Q.NearPlane!==void 0&&(z=Q.NearPlane.value/1e3);var X=1e3;Q.FarPlane!==void 0&&(X=Q.FarPlane.value/1e3);var fe=window.innerWidth,Ae=window.innerHeight;Q.AspectWidth!==void 0&&Q.AspectHeight!==void 0&&(fe=Q.AspectWidth.value,Ae=Q.AspectHeight.value);var Se=fe/Ae,Be=45;Q.FieldOfView!==void 0&&(Be=Q.FieldOfView.value);var Ge=Q.FocalLength?Q.FocalLength.value:null;switch(F){case 0:q=new THREE.PerspectiveCamera(Be,Se,z,X),Ge!==null&&q.setFocalLength(Ge);break;case 1:q=new THREE.OrthographicCamera(-fe/2,fe/2,Ae/2,-Ae/2,z,X);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+F+"."),q=new THREE.Object3D}}return q},createLight:function(V){var q,Q;if(V.children.forEach(function(Be){var Ge=P.Objects.NodeAttribute[Be.ID];Ge!==void 0&&(Q=Ge)}),Q===void 0)q=new THREE.Object3D;else{var F;F=Q.LightType===void 0?0:Q.LightType.value;var z=16777215;Q.Color!==void 0&&(z=new THREE.Color().fromArray(Q.Color.value));var X=Q.Intensity===void 0?1:Q.Intensity.value/100;Q.CastLightOnObject!==void 0&&Q.CastLightOnObject.value===0&&(X=0);var fe=0;switch(Q.FarAttenuationEnd!==void 0&&(fe=Q.EnableFarAttenuation!==void 0&&Q.EnableFarAttenuation.value===0?0:Q.FarAttenuationEnd.value),F){case 0:q=new THREE.PointLight(z,X,fe,1);break;case 1:q=new THREE.DirectionalLight(z,X);break;case 2:var Ae=Math.PI/3;Q.InnerAngle!==void 0&&(Ae=THREE.MathUtils.degToRad(Q.InnerAngle.value));var Se=0;Q.OuterAngle!==void 0&&(Se=THREE.MathUtils.degToRad(Q.OuterAngle.value),Se=Math.max(Se,1)),q=new THREE.SpotLight(z,X,fe,Ae,Se,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+Q.LightType.value+", defaulting to a THREE.PointLight."),q=new THREE.PointLight(z,X)}Q.CastShadows!==void 0&&Q.CastShadows.value===1&&(q.castShadow=!0)}return q},createMesh:function(V,q,Q){var F,z=null,X=null,fe=[];return V.children.forEach(function(Ae){q.has(Ae.ID)&&(z=q.get(Ae.ID)),Q.has(Ae.ID)&&fe.push(Q.get(Ae.ID))}),fe.length>1?X=fe:fe.length>0?X=fe[0]:(X=new THREE.MeshPhongMaterial({color:13421772}),fe.push(X)),"color"in z.attributes&&fe.forEach(function(Ae){Ae.vertexColors=THREE.VertexColors}),z.FBX_Deformer?(fe.forEach(function(Ae){Ae.skinning=!0}),F=new THREE.SkinnedMesh(z,X)):F=new THREE.Mesh(z,X),F},createCurve:function(V,q){var Q=V.children.reduce(function(z,X){return q.has(X.ID)&&(z=q.get(X.ID)),z},null),F=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(Q,F)},setModelTransforms:function(V,q){var Q={};"RotationOrder"in q&&(Q.eulerOrder=parseInt(q.RotationOrder.value)),"Lcl_Translation"in q&&(Q.translation=q.Lcl_Translation.value),"RotationOffset"in q&&(Q.rotationOffset=q.RotationOffset.value),"Lcl_Rotation"in q&&(Q.rotation=q.Lcl_Rotation.value),"PreRotation"in q&&(Q.preRotation=q.PreRotation.value),"PostRotation"in q&&(Q.postRotation=q.PostRotation.value),"Lcl_Scaling"in q&&(Q.scale=q.Lcl_Scaling.value);var F=w(Q);V.applyMatrix(F)},setLookAtProperties:function(V,q){"LookAtProperty"in q&&Y.get(V.ID).children.forEach(function(Q){if(Q.relationship==="LookAtProperty"){var F=P.Objects.Model[Q.ID];if("Lcl_Translation"in F){var z=F.Lcl_Translation.value;V.target!==void 0?(V.target.position.fromArray(z),J.add(V.target)):V.lookAt(new THREE.Vector3().fromArray(z))}}})},bindSkeleton:function(V,q,Q){var F=this.parsePoseNodes();for(var z in V){var X=V[z];Y.get(parseInt(X.ID)).parents.forEach(function(fe){if(q.has(fe.ID)){var Ae=fe.ID;Y.get(Ae).parents.forEach(function(Se){Q.has(Se.ID)&&Q.get(Se.ID).bind(new THREE.Skeleton(X.bones),F[Se.ID])})}})}},parsePoseNodes:function(){var V={};if("Pose"in P.Objects){var q=P.Objects.Pose;for(var Q in q)if(q[Q].attrType==="BindPose"){var F=q[Q].PoseNode;Array.isArray(F)?F.forEach(function(z){V[z.Node]=new THREE.Matrix4().fromArray(z.Matrix.a)}):V[F.Node]=new THREE.Matrix4().fromArray(F.Matrix.a)}}return V},createAmbientLight:function(){if("GlobalSettings"in P&&"AmbientColor"in P.GlobalSettings){var V=P.GlobalSettings.AmbientColor.value,q=V[0],Q=V[1],F=V[2];if(q!==0||Q!==0||F!==0){var z=new THREE.Color(q,Q,F);J.add(new THREE.AmbientLight(z,1))}}},setupMorphMaterials:function(){J.traverse(function(V){if(V.isMesh&&(V.geometry.morphAttributes.position||V.geometry.morphAttributes.normal)){var q=V.uuid,Q=V.material.uuid,F=!1;J.traverse(function(z){z.isMesh&&z.material.uuid===Q&&z.uuid!==q&&(F=!0)}),F===!0&&(V.material=V.material.clone()),V.material.morphTargets=!0}})}},I.prototype={constructor:I,parse:function(V){var q=new Map;if("Geometry"in P.Objects){var Q=P.Objects.Geometry;for(var F in Q){var z=Y.get(parseInt(F)),X=this.parseGeometry(z,Q[F],V);q.set(parseInt(F),X)}}return q},parseGeometry:function(V,q,Q){switch(q.attrType){case"Mesh":return this.parseMeshGeometry(V,q,Q);case"NurbsCurve":return this.parseNurbsGeometry(q)}},parseMeshGeometry:function(V,q,Q){var F=Q.skeletons,z=Q.morphTargets,X=V.parents.map(function(ht){return P.Objects.Model[ht.ID]});if(X.length!==0){var fe=V.children.reduce(function(ht,xt){return F[xt.ID]!==void 0&&(ht=F[xt.ID]),ht},null),Ae=V.children.reduce(function(ht,xt){return z[xt.ID]!==void 0&&(ht=z[xt.ID]),ht},null),Se=X[0],Be={};"RotationOrder"in Se&&(Be.eulerOrder=Se.RotationOrder.value),"GeometricTranslation"in Se&&(Be.translation=Se.GeometricTranslation.value),"GeometricRotation"in Se&&(Be.rotation=Se.GeometricRotation.value),"GeometricScaling"in Se&&(Be.scale=Se.GeometricScaling.value);var Ge=w(Be);return this.genGeometry(q,fe,Ae,Ge)}},genGeometry:function(V,q,Q,F){var z=new THREE.BufferGeometry;V.attrName&&(z.name=V.attrName);var X=this.parseGeoNode(V,q),fe=this.genBuffers(X),Ae=new THREE.Float32BufferAttribute(fe.vertex,3);if(F.applyToBufferAttribute(Ae),z.addAttribute("position",Ae),fe.colors.length>0&&z.addAttribute("color",new THREE.Float32BufferAttribute(fe.colors,3)),q&&(z.addAttribute("skinIndex",new THREE.Uint16BufferAttribute(fe.weightsIndices,4)),z.addAttribute("skinWeight",new THREE.Float32BufferAttribute(fe.vertexWeights,4)),z.FBX_Deformer=q),fe.normal.length>0){var Se=new THREE.Float32BufferAttribute(fe.normal,3);new THREE.Matrix3().getNormalMatrix(F).applyToBufferAttribute(Se),z.addAttribute("normal",Se)}if(fe.uvs.forEach(function(at,Gt){var wt="uv"+(Gt+1).toString();Gt===0&&(wt="uv"),z.addAttribute(wt,new THREE.Float32BufferAttribute(fe.uvs[Gt],2))}),X.material&&X.material.mappingType!=="AllSame"){var Be=fe.materialIndex[0],Ge=0;if(fe.materialIndex.forEach(function(at,Gt){at!==Be&&(z.addGroup(Ge,Gt-Ge,Be),Be=at,Ge=Gt)}),z.groups.length>0){var ht=z.groups[z.groups.length-1],xt=ht.start+ht.count;xt!==fe.materialIndex.length&&z.addGroup(xt,fe.materialIndex.length-xt,Be)}z.groups.length===0&&z.addGroup(0,fe.materialIndex.length,fe.materialIndex[0])}return this.addMorphTargets(z,V,Q,F),z},parseGeoNode:function(V,q){var Q={};if(Q.vertexPositions=V.Vertices!==void 0?V.Vertices.a:[],Q.vertexIndices=V.PolygonVertexIndex!==void 0?V.PolygonVertexIndex.a:[],V.LayerElementColor&&(Q.color=this.parseVertexColors(V.LayerElementColor[0])),V.LayerElementMaterial&&(Q.material=this.parseMaterialIndices(V.LayerElementMaterial[0])),V.LayerElementNormal&&(Q.normal=this.parseNormals(V.LayerElementNormal[0])),V.LayerElementUV){Q.uv=[];for(var F=0;V.LayerElementUV[F];)Q.uv.push(this.parseUVs(V.LayerElementUV[F])),F++}return Q.weightTable={},q!==null&&(Q.skeleton=q,q.rawBones.forEach(function(z,X){z.indices.forEach(function(fe,Ae){Q.weightTable[fe]===void 0&&(Q.weightTable[fe]=[]),Q.weightTable[fe].push({id:X,weight:z.weights[Ae]})})})),Q},genBuffers:function(V){var q={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},Q=0,F=0,z=!1,X=[],fe=[],Ae=[],Se=[],Be=[],Ge=[],ht=this;return V.vertexIndices.forEach(function(xt,at){var Gt=!1;xt<0&&(xt^=-1,Gt=!0);var wt=[],Yt=[];if(X.push(3*xt,3*xt+1,3*xt+2),V.color&&(At=m(at,Q,xt,V.color),Ae.push(At[0],At[1],At[2])),V.skeleton){if(V.weightTable[xt]!==void 0&&V.weightTable[xt].forEach(function(Pt){Yt.push(Pt.weight),wt.push(Pt.id)}),Yt.length>4){z||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),z=!0);var Mn=[0,0,0,0],je=[0,0,0,0];Yt.forEach(function(Pt,qt){var un=Pt,dn=wt[qt];je.forEach(function(bn,tn,ri){if(un>bn){ri[tn]=un,un=bn;var ni=Mn[tn];Mn[tn]=dn,dn=ni}})}),wt=Mn,Yt=je}for(;Yt.length<4;)Yt.push(0),wt.push(0);for(var rt=0;rt<4;++rt)Be.push(Yt[rt]),Ge.push(wt[rt])}if(V.normal){var At=m(at,Q,xt,V.normal);fe.push(At[0],At[1],At[2])}if(V.material&&V.material.mappingType!=="AllSame")var Bt=m(at,Q,xt,V.material)[0];V.uv&&V.uv.forEach(function(Pt,qt){var un=m(at,Q,xt,Pt);Se[qt]===void 0&&(Se[qt]=[]),Se[qt].push(un[0]),Se[qt].push(un[1])}),F++,Gt&&(ht.genFace(q,V,X,Bt,fe,Ae,Se,Be,Ge,F),Q++,F=0,X=[],fe=[],Ae=[],Se=[],Be=[],Ge=[])}),q},genFace:function(V,q,Q,F,z,X,fe,Ae,Se,Be){for(var Ge=2;Ge<Be;Ge++)V.vertex.push(q.vertexPositions[Q[0]]),V.vertex.push(q.vertexPositions[Q[1]]),V.vertex.push(q.vertexPositions[Q[2]]),V.vertex.push(q.vertexPositions[Q[3*(Ge-1)]]),V.vertex.push(q.vertexPositions[Q[3*(Ge-1)+1]]),V.vertex.push(q.vertexPositions[Q[3*(Ge-1)+2]]),V.vertex.push(q.vertexPositions[Q[3*Ge]]),V.vertex.push(q.vertexPositions[Q[3*Ge+1]]),V.vertex.push(q.vertexPositions[Q[3*Ge+2]]),q.skeleton&&(V.vertexWeights.push(Ae[0]),V.vertexWeights.push(Ae[1]),V.vertexWeights.push(Ae[2]),V.vertexWeights.push(Ae[3]),V.vertexWeights.push(Ae[4*(Ge-1)]),V.vertexWeights.push(Ae[4*(Ge-1)+1]),V.vertexWeights.push(Ae[4*(Ge-1)+2]),V.vertexWeights.push(Ae[4*(Ge-1)+3]),V.vertexWeights.push(Ae[4*Ge]),V.vertexWeights.push(Ae[4*Ge+1]),V.vertexWeights.push(Ae[4*Ge+2]),V.vertexWeights.push(Ae[4*Ge+3]),V.weightsIndices.push(Se[0]),V.weightsIndices.push(Se[1]),V.weightsIndices.push(Se[2]),V.weightsIndices.push(Se[3]),V.weightsIndices.push(Se[4*(Ge-1)]),V.weightsIndices.push(Se[4*(Ge-1)+1]),V.weightsIndices.push(Se[4*(Ge-1)+2]),V.weightsIndices.push(Se[4*(Ge-1)+3]),V.weightsIndices.push(Se[4*Ge]),V.weightsIndices.push(Se[4*Ge+1]),V.weightsIndices.push(Se[4*Ge+2]),V.weightsIndices.push(Se[4*Ge+3])),q.color&&(V.colors.push(X[0]),V.colors.push(X[1]),V.colors.push(X[2]),V.colors.push(X[3*(Ge-1)]),V.colors.push(X[3*(Ge-1)+1]),V.colors.push(X[3*(Ge-1)+2]),V.colors.push(X[3*Ge]),V.colors.push(X[3*Ge+1]),V.colors.push(X[3*Ge+2])),q.material&&q.material.mappingType!=="AllSame"&&(V.materialIndex.push(F),V.materialIndex.push(F),V.materialIndex.push(F)),q.normal&&(V.normal.push(z[0]),V.normal.push(z[1]),V.normal.push(z[2]),V.normal.push(z[3*(Ge-1)]),V.normal.push(z[3*(Ge-1)+1]),V.normal.push(z[3*(Ge-1)+2]),V.normal.push(z[3*Ge]),V.normal.push(z[3*Ge+1]),V.normal.push(z[3*Ge+2])),q.uv&&q.uv.forEach(function(ht,xt){V.uvs[xt]===void 0&&(V.uvs[xt]=[]),V.uvs[xt].push(fe[xt][0]),V.uvs[xt].push(fe[xt][1]),V.uvs[xt].push(fe[xt][2*(Ge-1)]),V.uvs[xt].push(fe[xt][2*(Ge-1)+1]),V.uvs[xt].push(fe[xt][2*Ge]),V.uvs[xt].push(fe[xt][2*Ge+1])})},addMorphTargets:function(V,q,Q,F){if(Q!==null){V.morphAttributes.position=[],V.morphAttributes.normal=[];var z=this;Q.rawTargets.forEach(function(X){var fe=P.Objects.Geometry[X.geoID];fe!==void 0&&z.genMorphGeometry(V,q,fe,F)})}},genMorphGeometry:function(V,q,Q,F){var z=new THREE.BufferGeometry;Q.attrName&&(z.name=Q.attrName);for(var X=q.PolygonVertexIndex!==void 0?q.PolygonVertexIndex.a:[],fe=q.Vertices!==void 0?q.Vertices.a.slice():[],Ae=Q.Vertices!==void 0?Q.Vertices.a:[],Se=Q.Indexes!==void 0?Q.Indexes.a:[],Be=0;Be<Se.length;Be++){var Ge=3*Se[Be];fe[Ge]+=Ae[3*Be],fe[Ge+1]+=Ae[3*Be+1],fe[Ge+2]+=Ae[3*Be+2]}var ht={vertexIndices:X,vertexPositions:fe},xt=this.genBuffers(ht),at=new THREE.Float32BufferAttribute(xt.vertex,3);at.name=Q.attrName,F.applyToBufferAttribute(at),V.morphAttributes.position.push(at)},parseNormals:function(V){var q=V.MappingInformationType,Q=V.ReferenceInformationType,F=V.Normals.a,z=[];return Q==="IndexToDirect"&&("NormalIndex"in V?z=V.NormalIndex.a:"NormalsIndex"in V&&(z=V.NormalsIndex.a)),{dataSize:3,buffer:F,indices:z,mappingType:q,referenceType:Q}},parseUVs:function(V){var q=V.MappingInformationType,Q=V.ReferenceInformationType,F=V.UV.a,z=[];return Q==="IndexToDirect"&&(z=V.UVIndex.a),{dataSize:2,buffer:F,indices:z,mappingType:q,referenceType:Q}},parseVertexColors:function(V){var q=V.MappingInformationType,Q=V.ReferenceInformationType,F=V.Colors.a,z=[];return Q==="IndexToDirect"&&(z=V.ColorIndex.a),{dataSize:4,buffer:F,indices:z,mappingType:q,referenceType:Q}},parseMaterialIndices:function(V){var q=V.MappingInformationType,Q=V.ReferenceInformationType;if(q==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:Q};for(var F=V.Materials.a,z=[],X=0;X<F.length;++X)z.push(X);return{dataSize:1,buffer:F,indices:z,mappingType:q,referenceType:Q}},parseNurbsGeometry:function(V){if(THREE.NURBSCurve===void 0)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var q=parseInt(V.Order);if(isNaN(q))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",V.Order,V.id),new THREE.BufferGeometry;for(var Q=q-1,F=V.KnotVector.a,z=[],X=V.Points.a,fe=0,Ae=X.length;fe<Ae;fe+=4)z.push(new THREE.Vector4().fromArray(X,fe));var Se,Be;if(V.Form==="Closed")z.push(z[0]);else if(V.Form==="Periodic")for(Se=Q,Be=F.length-1-Se,fe=0;fe<Q;++fe)z.push(z[fe]);var Ge=new THREE.NURBSCurve(Q,F,z,Se,Be).getPoints(7*z.length),ht=new Float32Array(3*Ge.length);Ge.forEach(function(at,Gt){at.toArray(ht,3*Gt)});var xt=new THREE.BufferGeometry;return xt.addAttribute("position",new THREE.BufferAttribute(ht,3)),xt}},u.prototype={constructor:u,parse:function(){var V=[],q=this.parseClips();if(q===void 0)return V;for(var Q in q){var F=q[Q],z=this.addClip(F);V.push(z)}return V},parseClips:function(){if(P.Objects.AnimationCurve!==void 0){var V=this.parseAnimationCurveNodes();this.parseAnimationCurves(V);var q=this.parseAnimationLayers(V);return this.parseAnimStacks(q)}},parseAnimationCurveNodes:function(){var V=P.Objects.AnimationCurveNode,q=new Map;for(var Q in V){var F=V[Q];if(F.attrName.match(/S|R|T|DeformPercent/)!==null){var z={id:F.id,attr:F.attrName,curves:{}};q.set(z.id,z)}}return q},parseAnimationCurves:function(V){var q=P.Objects.AnimationCurve;for(var Q in q){var F={id:q[Q].id,times:q[Q].KeyTime.a.map(b),values:q[Q].KeyValueFloat.a},z=Y.get(F.id);if(z!==void 0){var X=z.parents[0].ID,fe=z.parents[0].relationship;fe.match(/X/)?V.get(X).curves.x=F:fe.match(/Y/)?V.get(X).curves.y=F:fe.match(/Z/)?V.get(X).curves.z=F:fe.match(/d|DeformPercent/)&&V.has(X)&&(V.get(X).curves.morph=F)}}},parseAnimationLayers:function(V){var q=P.Objects.AnimationLayer,Q=new Map;for(var F in q){var z=[],X=Y.get(parseInt(F));if(X!==void 0){var fe=this;X.children.forEach(function(Ae,Se){if(V.has(Ae.ID)){var Be=V.get(Ae.ID);if(Be.curves.x!==void 0||Be.curves.y!==void 0||Be.curves.z!==void 0){if(z[Se]===void 0){Y.get(Ae.ID).parents.forEach(function(Yt){Yt.relationship!==void 0&&(wt=Yt.ID)});var Ge=P.Objects.Model[wt.toString()],ht={modelName:THREE.PropertyBinding.sanitizeNodeName(Ge.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1],transform:fe.getModelAnimTransform(Ge)};"PreRotation"in Ge&&(ht.preRotations=Ge.PreRotation.value),"PostRotation"in Ge&&(ht.postRotations=Ge.PostRotation.value),z[Se]=ht}z[Se][Be.attr]=Be}else if(Be.curves.morph!==void 0){if(z[Se]===void 0){var xt;Y.get(Ae.ID).parents.forEach(function(je){je.relationship!==void 0&&(xt=je.ID)});var at=Y.get(xt).parents[0].ID,Gt=Y.get(at).parents[0].ID,wt=Y.get(Gt).parents[0].ID,Ge=P.Objects.Model[wt],ht={modelName:THREE.PropertyBinding.sanitizeNodeName(Ge.attrName),morphName:P.Objects.Deformer[xt].attrName};z[Se]=ht}z[Se][Be.attr]=Be}}}),Q.set(parseInt(F),z)}}return Q},getModelAnimTransform:function(V){var q={};return"RotationOrder"in V&&(q.eulerOrder=parseInt(V.RotationOrder.value)),"Lcl_Translation"in V&&(q.translation=V.Lcl_Translation.value),"RotationOffset"in V&&(q.rotationOffset=V.RotationOffset.value),"Lcl_Rotation"in V&&(q.rotation=V.Lcl_Rotation.value),"PreRotation"in V&&(q.preRotation=V.PreRotation.value),"PostRotation"in V&&(q.postRotation=V.PostRotation.value),"Lcl_Scaling"in V&&(q.scale=V.Lcl_Scaling.value),w(q)},parseAnimStacks:function(V){var q=P.Objects.AnimationStack,Q={};for(var F in q){var z=Y.get(parseInt(F)).children;z.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var X=V.get(z[0].ID);Q[F]={name:q[F].attrName,layer:X}}return Q},addClip:function(V){var q=[],Q=this;return V.layer.forEach(function(F){q=q.concat(Q.generateTracks(F))}),new THREE.AnimationClip(V.name,-1,q)},generateTracks:function(V){var q=[],Q=new THREE.Vector3,F=new THREE.Quaternion,z=new THREE.Vector3;if(V.transform&&V.transform.decompose(Q,F,z),Q=Q.toArray(),F=new THREE.Euler().setFromQuaternion(F).toArray(),z=z.toArray(),V.T!==void 0&&Object.keys(V.T.curves).length>0){var X=this.generateVectorTrack(V.modelName,V.T.curves,Q,"position");X!==void 0&&q.push(X)}if(V.R!==void 0&&Object.keys(V.R.curves).length>0){var fe=this.generateRotationTrack(V.modelName,V.R.curves,F,V.preRotations,V.postRotations);fe!==void 0&&q.push(fe)}if(V.S!==void 0&&Object.keys(V.S.curves).length>0){var Ae=this.generateVectorTrack(V.modelName,V.S.curves,z,"scale");Ae!==void 0&&q.push(Ae)}if(V.DeformPercent!==void 0){var Se=this.generateMorphTrack(V);Se!==void 0&&q.push(Se)}return q},generateVectorTrack:function(V,q,Q,F){var z=this.getTimesForAllAxes(q),X=this.getKeyframeTrackValues(z,q,Q);return new THREE.VectorKeyframeTrack(V+"."+F,z,X)},generateRotationTrack:function(V,q,Q,F,z){q.x!==void 0&&(this.interpolateRotations(q.x),q.x.values=q.x.values.map(THREE.MathUtils.degToRad)),q.y!==void 0&&(this.interpolateRotations(q.y),q.y.values=q.y.values.map(THREE.MathUtils.degToRad)),q.z!==void 0&&(this.interpolateRotations(q.z),q.z.values=q.z.values.map(THREE.MathUtils.degToRad));var X=this.getTimesForAllAxes(q),fe=this.getKeyframeTrackValues(X,q,Q);F!==void 0&&((F=F.map(THREE.MathUtils.degToRad)).push("ZYX"),F=new THREE.Euler().fromArray(F),F=new THREE.Quaternion().setFromEuler(F)),z!==void 0&&((z=z.map(THREE.MathUtils.degToRad)).push("ZYX"),z=new THREE.Euler().fromArray(z),z=new THREE.Quaternion().setFromEuler(z).inverse());for(var Ae=new THREE.Quaternion,Se=new THREE.Euler,Be=[],Ge=0;Ge<fe.length;Ge+=3)Se.set(fe[Ge],fe[Ge+1],fe[Ge+2],"ZYX"),Ae.setFromEuler(Se),F!==void 0&&Ae.premultiply(F),z!==void 0&&Ae.multiply(z),Ae.toArray(Be,Ge/3*4);return new THREE.QuaternionKeyframeTrack(V+".quaternion",X,Be)},generateMorphTrack:function(V){var q=V.DeformPercent.curves.morph,Q=q.values.map(function(z){return z/100}),F=J.getObjectByName(V.modelName).morphTargetDictionary[V.morphName];return new THREE.NumberKeyframeTrack(V.modelName+".morphTargetInfluences["+F+"]",q.times,Q)},getTimesForAllAxes:function(V){var q=[];return V.x!==void 0&&(q=q.concat(V.x.times)),V.y!==void 0&&(q=q.concat(V.y.times)),V.z!==void 0&&(q=q.concat(V.z.times)),q=q.sort(function(Q,F){return Q-F}).filter(function(Q,F,z){return z.indexOf(Q)==F})},getKeyframeTrackValues:function(V,q,Q){var F=Q,z=[],X=-1,fe=-1,Ae=-1;return V.forEach(function(Se){if(q.x&&(X=q.x.times.indexOf(Se)),q.y&&(fe=q.y.times.indexOf(Se)),q.z&&(Ae=q.z.times.indexOf(Se)),X!==-1){var Be=q.x.values[X];z.push(Be),F[0]=Be}else z.push(F[0]);if(fe!==-1){var Ge=q.y.values[fe];z.push(Ge),F[1]=Ge}else z.push(F[1]);if(Ae!==-1){var ht=q.z.values[Ae];z.push(ht),F[2]=ht}else z.push(F[2])}),z},interpolateRotations:function(V){for(var q=1;q<V.values.length;q++){var Q=V.values[q-1],F=V.values[q]-Q,z=Math.abs(F);if(z>=180){for(var X=z/180,fe=F/X,Ae=Q+fe,Se=V.times[q-1],Be=(V.times[q]-Se)/X,Ge=Se+Be,ht=[],xt=[];Ge<V.times[q];)ht.push(Ge),Ge+=Be,xt.push(Ae),Ae+=fe;V.times=L(V.times,q,ht),V.values=L(V.values,q,xt)}}}},g.prototype={constructor:g,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(V){this.nodeStack.push(V),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(V,q){this.currentProp=V,this.currentPropName=q},parse:function(V){this.currentIndent=0,console.log("FBXTree: ",y),this.allNodes=new y,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var q=this,Q=V.split(/[\r\n]+/);return Q.forEach(function(F,z){var X=F.match(/^[\s\t]*;/),fe=F.match(/^[\s\t]*$/);if(!X&&!fe){var Ae=F.match("^\\t{"+q.currentIndent+"}(\\w+):(.*){",""),Se=F.match("^\\t{"+q.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),Be=F.match("^\\t{"+(q.currentIndent-1)+"}}");Ae?q.parseNodeBegin(F,Ae):Se?q.parseNodeProperty(F,Se,Q[++z]):Be?q.popStack():F.match(/^[^\s\t}]/)&&q.parseNodePropertyContinued(F)}}),this.allNodes},parseNodeBegin:function(V,q){var Q=q[1].trim().replace(/^"/,"").replace(/"$/,""),F=q[2].split(",").map(function(Ae){return Ae.trim().replace(/^"/,"").replace(/"$/,"")}),z={name:Q},X=this.parseNodeAttr(F),fe=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(Q,z):Q in fe?(Q==="PoseNode"?fe.PoseNode.push(z):fe[Q].id!==void 0&&(fe[Q]={},fe[Q][fe[Q].id]=fe[Q]),X.id!==""&&(fe[Q][X.id]=z)):typeof X.id=="number"?(fe[Q]={},fe[Q][X.id]=z):Q!=="Properties70"&&(fe[Q]=Q==="PoseNode"?[z]:z),typeof X.id=="number"&&(z.id=X.id),X.name!==""&&(z.attrName=X.name),X.type!==""&&(z.attrType=X.type),this.pushStack(z)},parseNodeAttr:function(V){var q=V[0];V[0]!==""&&(q=parseInt(V[0]),isNaN(q)&&(q=V[0]));var Q="",F="";return V.length>1&&(Q=V[1].replace(/^(\w+)::/,""),F=V[2]),{id:q,name:Q,type:F}},parseNodeProperty:function(V,q,Q){var F=q[1].replace(/^"/,"").replace(/"$/,"").trim(),z=q[2].replace(/^"/,"").replace(/"$/,"").trim();F==="Content"&&z===","&&(z=Q.replace(/"/g,"").replace(/,$/,"").trim());var X=this.getCurrentNode();if(X.name!=="Properties70"){if(F==="C"){var fe=z.split(",").slice(1),Ae=parseInt(fe[0]),Se=parseInt(fe[1]),Be=z.split(",").slice(3);F="connections",function(Ge,ht){for(var xt=0,at=Ge.length,Gt=ht.length;xt<Gt;xt++,at++)Ge[at]=ht[xt]}(z=[Ae,Se],Be=Be.map(function(Ge){return Ge.trim().replace(/^"/,"")})),X[F]===void 0&&(X[F]=[])}F==="Node"&&(X.id=z),F in X&&Array.isArray(X[F])?X[F].push(z):F!=="a"?X[F]=z:X.a=z,this.setCurrentProp(X,F),F==="a"&&z.slice(-1)!==","&&(X.a=O(z))}else this.parseNodeSpecialProperty(V,F,z)},parseNodePropertyContinued:function(V){var q=this.getCurrentNode();q.a+=V,V.slice(-1)!==","&&(q.a=O(q.a))},parseNodeSpecialProperty:function(V,q,Q){var F=Q.split('",').map(function(Be){return Be.trim().replace(/^\"/,"").replace(/\s/,"_")}),z=F[0],X=F[1],fe=F[2],Ae=F[3],Se=F[4];switch(X){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":Se=parseFloat(Se);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":Se=O(Se)}this.getPrevNode()[z]={type:X,type2:fe,flag:Ae,value:Se},this.setCurrentProp(this.getPrevNode(),z)}},C.prototype={constructor:C,parse:function(V){var q=new v(V);q.skip(23);var Q=q.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+Q);for(var F=new y;!this.endOfContent(q);){var z=this.parseNode(q,Q);z!==null&&F.add(z.name,z)}return F},endOfContent:function(V){return V.size()%16==0?(V.getOffset()+160+16&-16)>=V.size():V.getOffset()+160+16>=V.size()},parseNode:function(V,q){var Q={},F=q>=7500?V.getUint64():V.getUint32(),z=q>=7500?V.getUint64():V.getUint32(),X=(q>=7500?V.getUint64():V.getUint32(),V.getUint8()),fe=V.getString(X);if(F===0)return null;for(var Ae=[],Se=0;Se<z;Se++)Ae.push(this.parseProperty(V));var Be=Ae.length>0?Ae[0]:"",Ge=Ae.length>1?Ae[1]:"",ht=Ae.length>2?Ae[2]:"";for(Q.singleProperty=z===1&&V.getOffset()===F;F>V.getOffset();){var xt=this.parseNode(V,q);xt!==null&&this.parseSubNode(fe,Q,xt)}return Q.propertyList=Ae,typeof Be=="number"&&(Q.id=Be),Ge!==""&&(Q.attrName=Ge),ht!==""&&(Q.attrType=ht),fe!==""&&(Q.name=fe),Q},parseSubNode:function(V,q,Q){if(Q.singleProperty===!0){var F=Q.propertyList[0];Array.isArray(F)?(q[Q.name]=Q,Q.a=F):q[Q.name]=F}else if(V==="Connections"&&Q.name==="C"){var z=[];Q.propertyList.forEach(function(Ge,ht){ht!==0&&z.push(Ge)}),q.connections===void 0&&(q.connections=[]),q.connections.push(z)}else if(Q.name==="Properties70")Object.keys(Q).forEach(function(Ge){q[Ge]=Q[Ge]});else if(V==="Properties70"&&Q.name==="P"){var X,fe=Q.propertyList[0],Ae=Q.propertyList[1],Se=Q.propertyList[2],Be=Q.propertyList[3];fe.indexOf("Lcl ")===0&&(fe=fe.replace("Lcl ","Lcl_")),Ae.indexOf("Lcl ")===0&&(Ae=Ae.replace("Lcl ","Lcl_")),X=Ae==="Color"||Ae==="ColorRGB"||Ae==="Vector"||Ae==="Vector3D"||Ae.indexOf("Lcl_")===0?[Q.propertyList[4],Q.propertyList[5],Q.propertyList[6]]:Q.propertyList[4],q[fe]={type:Ae,type2:Se,flag:Be,value:X}}else q[Q.name]===void 0?typeof Q.id=="number"?(q[Q.name]={},q[Q.name][Q.id]=Q):q[Q.name]=Q:Q.name==="PoseNode"?(Array.isArray(q[Q.name])||(q[Q.name]=[q[Q.name]]),q[Q.name].push(Q)):q[Q.name][Q.id]===void 0&&(q[Q.name][Q.id]=Q)},parseProperty:function(V){var q=V.getString(1);switch(q){case"C":return V.getBoolean();case"D":return V.getFloat64();case"F":return V.getFloat32();case"I":return V.getInt32();case"L":return V.getInt64();case"R":return Q=V.getUint32(),V.getArrayBuffer(Q);case"S":var Q=V.getUint32();return V.getString(Q);case"Y":return V.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var F=V.getUint32(),z=V.getUint32(),X=V.getUint32();if(z===0)switch(q){case"b":case"c":return V.getBooleanArray(F);case"d":return V.getFloat64Array(F);case"f":return V.getFloat32Array(F);case"i":return V.getInt32Array(F);case"l":return V.getInt64Array(F)}typeof Zlib>"u"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var fe=new v(new Zlib.Inflate(new Uint8Array(V.getArrayBuffer(X))).decompress().buffer);switch(q){case"b":case"c":return fe.getBooleanArray(F);case"d":return fe.getFloat64Array(F);case"f":return fe.getFloat32Array(F);case"i":return fe.getInt32Array(F);case"l":return fe.getInt64Array(F)}default:throw new Error("THREE.FBXLoader: Unknown property type "+q)}}},v.prototype={constructor:v,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(V){this.offset+=V},getBoolean:function(){return(1&this.getUint8())==1},getBooleanArray:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getBoolean());return q},getUint8:function(){var V=this.dv.getUint8(this.offset);return this.offset+=1,V},getInt16:function(){var V=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,V},getInt32:function(){var V=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,V},getInt32Array:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getInt32());return q},getUint32:function(){var V=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,V},getInt64:function(){var V,q;return this.littleEndian?(V=this.getUint32(),q=this.getUint32()):(q=this.getUint32(),V=this.getUint32()),2147483648&q?(q=4294967295&~q,(V=4294967295&~V)===4294967295&&(q=q+1&4294967295),V=V+1&4294967295,-(4294967296*q+V)):4294967296*q+V},getInt64Array:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getInt64());return q},getUint64:function(){var V,q;return this.littleEndian?(V=this.getUint32(),q=this.getUint32()):(q=this.getUint32(),V=this.getUint32()),4294967296*q+V},getFloat32:function(){var V=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,V},getFloat32Array:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getFloat32());return q},getFloat64:function(){var V=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,V},getFloat64Array:function(V){for(var q=[],Q=0;Q<V;Q++)q.push(this.getFloat64());return q},getArrayBuffer:function(V){var q=this.dv.buffer.slice(this.offset,this.offset+V);return this.offset+=V,q},getString:function(V){for(var q=[],Q=0;Q<V;Q++)q[Q]=this.getUint8();var F=q.indexOf(0);return F>=0&&(q=q.slice(0,F)),THREE.LoaderUtils.decodeText(new Uint8Array(q))}},y.prototype={constructor:y,add:function(V,q){this[V]=q}};var j=[],k=new THREE.Matrix4,te=new THREE.Euler,ue=new THREE.Vector3,xe=new THREE.Vector3,Ee=new THREE.Matrix4;return K}()},{}],5:[function(h,S,W){S.exports=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})},{}],6:[function(h,S,W){S.exports=function(d,U,K){this.type=d,this.index=U,this.pressed=K.pressed,this.value=K.value}},{}],7:[function(h,S,W){function d(K){var T=document.getElementById(K),I=T.parentNode;try{I&&I.removeChild(T)}catch{}}function U(K,T,I){return new I(function(u,g){var C=T.timeout||5e3,v="script_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),y=function(m,w){var _=document.createElement("script");return _.type="text/javascript",_.async=!0,_.id=w,_.src=m,_}(K,v),E=setTimeout(function(){g(new Error("Script request to "+K+" timed out")),d(v)},C),b=function(m){clearTimeout(m)};y.addEventListener("load",function(m){u({ok:!0}),b(E),d(v)}),y.addEventListener("error",function(m){g(new Error("Script request to "+K+" failed "+m)),b(E),d(v)}),function(m){var w=document.getElementsByTagName("script")[0];w.parentNode.insertBefore(m,w)}(y)})}S.exports=function(K){return K=K||{},function(T,I){return I=I||{},U(T,I,K.Promise||Promise)}}},{}],8:[function(h,S,W){(function(d){function U(Y,J){return String(Y).indexOf(J)!==-1}function K(Y,J,j){b!==J&&E!==J&&y!==J||Object.keys(j).forEach(function(k){Y[k]=j[k]})}function T(Y){var J="keyCode"in Y?Y.keyCode:"which"in Y?Y.which:0,j=function(){if(P||"keyLocation"in Y){var te=P?Y.location:Y.keyLocation;if(te&&J in _[te])return _[te][J]}return"keyIdentifier"in Y&&Y.keyIdentifier in w?w[Y.keyIdentifier]:J in m?m[J]:null}();if(!j)return null;var k=function(){var te=O[j.code];return te?Y.shiftKey&&"shiftKey"in te?te.shiftKey:te.key:j.code}();return{code:j.code,key:k,location:j.location,keyCap:j.keyCap}}var I="KeyboardEvent"in d;I||(d.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),"DOM_KEY_LOCATION_STANDARD"in d.KeyboardEvent||(d.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0),"DOM_KEY_LOCATION_LEFT"in d.KeyboardEvent||(d.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1),"DOM_KEY_LOCATION_RIGHT"in d.KeyboardEvent||(d.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2),"DOM_KEY_LOCATION_NUMPAD"in d.KeyboardEvent||(d.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3);var u=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,g=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,C=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,v=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD,y=U(navigator.platform,"Win")?"win":U(navigator.platform,"Mac")?"mac":U(navigator.platform,"CrOS")?"cros":U(navigator.platform,"Linux")?"linux":U(navigator.userAgent,"iPad")||U(navigator.platform,"iPod")||U(navigator.platform,"iPhone")?"ios":"",E=U(navigator.userAgent,"Chrome/")?"chrome":U(navigator.vendor,"Apple")?"safari":U(navigator.userAgent,"MSIE")?"ie":U(navigator.userAgent,"Gecko/")?"moz":U(navigator.userAgent,"Opera/")?"opera":"",b=E+"-"+y,m={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:g},92:{code:"OSRight",location:C},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:v},97:{code:"Numpad1",keyCap:"1",location:v},98:{code:"Numpad2",keyCap:"2",location:v},99:{code:"Numpad3",keyCap:"3",location:v},100:{code:"Numpad4",keyCap:"4",location:v},101:{code:"Numpad5",keyCap:"5",location:v},102:{code:"Numpad6",keyCap:"6",location:v},103:{code:"Numpad7",keyCap:"7",location:v},104:{code:"Numpad8",keyCap:"8",location:v},105:{code:"Numpad9",keyCap:"9",location:v},106:{code:"NumpadMultiply",keyCap:"*",location:v},107:{code:"NumpadAdd",keyCap:"+",location:v},108:{code:"NumpadComma",keyCap:",",location:v},109:{code:"NumpadSubtract",keyCap:"-",location:v},110:{code:"NumpadDecimal",keyCap:".",location:v},111:{code:"NumpadDivide",keyCap:"/",location:v},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:v},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:g},161:{code:"ShiftRight",location:C},162:{code:"ControlLeft",location:g},163:{code:"ControlRight",location:C},164:{code:"AltLeft",location:g},165:{code:"AltRight",location:C},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};K(m,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:v},189:{code:"NumpadSubtract",keyCap:"-",location:v}}),K(m,"moz-mac",{12:{code:"NumLock",location:v},173:{code:"Minus",keyCap:"-"}}),K(m,"moz-win",{173:{code:"Minus",keyCap:"-"}}),K(m,"chrome-mac",{93:{code:"OSRight",location:C}}),K(m,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),K(m,"ios",{10:{code:"Enter",location:u}}),K(m,"safari-mac",{91:{code:"OSLeft",location:g},93:{code:"OSRight",location:C},229:{code:"KeyQ",keyCap:"Q"}});var w={};y==="cros"&&(w["U+00A0"]={code:"ShiftLeft",location:g},w["U+00A1"]={code:"ShiftRight",location:C},w["U+00A2"]={code:"ControlLeft",location:g},w["U+00A3"]={code:"ControlRight",location:C},w["U+00A4"]={code:"AltLeft",location:g},w["U+00A5"]={code:"AltRight",location:C}),b==="chrome-mac"&&(w["U+0010"]={code:"ContextMenu"}),b==="safari-mac"&&(w["U+0010"]={code:"ContextMenu"}),y==="ios"&&(w["U+0010"]={code:"Function"},w["U+001C"]={code:"ArrowLeft"},w["U+001D"]={code:"ArrowRight"},w["U+001E"]={code:"ArrowUp"},w["U+001F"]={code:"ArrowDown"},w["U+0001"]={code:"Home"},w["U+0004"]={code:"End"},w["U+000B"]={code:"PageUp"},w["U+000C"]={code:"PageDown"});var _=[];_[g]={16:{code:"ShiftLeft",location:g},17:{code:"ControlLeft",location:g},18:{code:"AltLeft",location:g}},_[C]={16:{code:"ShiftRight",location:C},17:{code:"ControlRight",location:C},18:{code:"AltRight",location:C}},_[v]={13:{code:"NumpadEnter",location:v}},K(_[v],"moz",{109:{code:"NumpadSubtract",location:v},107:{code:"NumpadAdd",location:v}}),K(_[g],"moz-mac",{224:{code:"OSLeft",location:g}}),K(_[C],"moz-mac",{224:{code:"OSRight",location:C}}),K(_[C],"moz-win",{91:{code:"OSRight",location:C}}),K(_[C],"mac",{93:{code:"OSRight",location:C}}),K(_[v],"chrome-mac",{12:{code:"NumLock",location:v}}),K(_[v],"safari-mac",{12:{code:"NumLock",location:v},187:{code:"NumpadAdd",location:v},189:{code:"NumpadSubtract",location:v},190:{code:"NumpadDecimal",location:v},191:{code:"NumpadDivide",location:v}});var O={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};K(O,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var R={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},L=function(Y,J){var j={};return Object.keys(Y).forEach(function(k){var te=Y[k];J in te&&(j[te[J]]=te)}),j}(m,"code");try{var P=I&&"location"in new KeyboardEvent("")}catch{}"KeyboardEvent"in d&&"defineProperty"in Object&&function(){function Y(j,k,te){k in j||Object.defineProperty(j,k,te)}if(Y(KeyboardEvent.prototype,"code",{get:function(){var j=T(this);return j?j.code:""}}),"key"in KeyboardEvent.prototype){var J=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var j=J.get.call(this);return R.hasOwnProperty(j)?R[j]:j}})}Y(KeyboardEvent.prototype,"key",{get:function(){var j=T(this);return j&&"key"in j?j.key:"Unidentified"}}),Y(KeyboardEvent.prototype,"location",{get:function(){var j=T(this);return j&&"location"in j?j.location:u}}),Y(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in d.KeyboardEvent||(d.KeyboardEvent.queryKeyCap=function(Y,J){if(Y=String(Y),!L.hasOwnProperty(Y))return"Undefined";if(J&&String(J).toLowerCase()!=="en-us")throw Error("Unsupported locale");var j=L[Y];return j.keyCap||j.code||"Undefined"}),d.identifyKey=function(Y){if(!("code"in Y)){var J=T(Y);Y.code=J?J.code:"",Y.key=J&&"key"in J?J.key:"Unidentified",Y.location="location"in Y?Y.location:"keyLocation"in Y?Y.keyLocation:J&&"location"in J?J.location:u,Y.locale=""}}})(window)},{}],9:[function(h,S,W){(function(d,U){typeof W=="object"&&typeof S=="object"?S.exports=U():typeof W=="object"?W.nipplejs=U():d.nipplejs=U()})(window,function(){return function(d){function U(T){if(K[T])return K[T].exports;var I=K[T]={i:T,l:!1,exports:{}};return d[T].call(I.exports,I,I.exports,U),I.l=!0,I.exports}var K={};return U.m=d,U.c=K,U.d=function(T,I,u){U.o(T,I)||Object.defineProperty(T,I,{enumerable:!0,get:u})},U.r=function(T){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})},U.t=function(T,I){if(1&I&&(T=U(T)),8&I||4&I&&typeof T=="object"&&T&&T.__esModule)return T;var u=Object.create(null);if(U.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:T}),2&I&&typeof T!="string")for(var g in T)U.d(u,g,function(C){return T[C]}.bind(null,g));return u},U.n=function(T){var I=T&&T.__esModule?function(){return T.default}:function(){return T};return U.d(I,"a",I),I},U.o=function(T,I){return Object.prototype.hasOwnProperty.call(T,I)},U.p="",U(U.s=0)}([function(d,U,K){function T(){}function I(F,z){return this.identifier=z.identifier,this.position=z.position,this.frontPosition=z.frontPosition,this.collection=F,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(z),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=I.id,I.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function u(F,z){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=F,this.id=u.id,u.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},this.config(z),this.options.mode!=="static"&&this.options.mode!=="semi"||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);var X=getComputedStyle(this.options.zone.parentElement);return X&&X.display==="flex"&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function g(F){var z=this;z.ids={},z.index=0,z.collections=[],z.scroll=O(),z.config(F),z.prepareCollections();var X=function(){var Ae;z.collections.forEach(function(Se){Se.forEach(function(Be){Ae=Be.el.getBoundingClientRect(),Be.position={x:z.scroll.x+Ae.left,y:z.scroll.y+Ae.top}})})};m(window,"resize",function(){b(X)});var fe=function(){z.scroll=O()};return m(window,"scroll",function(){b(fe)}),z.collections}K.r(U);var C,v=function(F,z){var X=z.x-F.x,fe=z.y-F.y;return Math.sqrt(X*X+fe*fe)},y=function(F){return F*(Math.PI/180)},E=new Map,b=function(F){E.has(F)&&clearTimeout(E.get(F)),E.set(F,setTimeout(F,100))},m=function(F,z,X){for(var fe,Ae=z.split(/[ ,]+/g),Se=0;Se<Ae.length;Se+=1)fe=Ae[Se],F.addEventListener?F.addEventListener(fe,X,!1):F.attachEvent&&F.attachEvent(fe,X)},w=function(F,z,X){for(var fe,Ae=z.split(/[ ,]+/g),Se=0;Se<Ae.length;Se+=1)fe=Ae[Se],F.removeEventListener?F.removeEventListener(fe,X):F.detachEvent&&F.detachEvent(fe,X)},_=function(F){return F.preventDefault(),F.type.match(/^touch/)?F.changedTouches:F},O=function(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},R=function(F,z){z.top||z.right||z.bottom||z.left?(F.style.top=z.top,F.style.right=z.right,F.style.bottom=z.bottom,F.style.left=z.left):(F.style.left=z.x+"px",F.style.top=z.y+"px")},L=function(F,z,X){var fe=P(F);for(var Ae in fe)if(fe.hasOwnProperty(Ae))if(typeof z=="string")fe[Ae]=z+" "+X;else{for(var Se="",Be=0,Ge=z.length;Be<Ge;Be+=1)Se+=z[Be]+" "+X+", ";fe[Ae]=Se.slice(0,-2)}return fe},P=function(F){var z={};return z[F]="",["webkit","Moz","o"].forEach(function(X){z[X+F.charAt(0).toUpperCase()+F.slice(1)]=""}),z},Y=function(F,z){for(var X in z)z.hasOwnProperty(X)&&(F[X]=z[X]);return F},J=function(F,z){if(F.length)for(var X=0,fe=F.length;X<fe;X+=1)z(F[X]);else z(F)},j="ontouchstart"in window,k=!!window.PointerEvent,te=!!window.MSPointerEvent,ue={start:"mousedown",move:"mousemove",end:"mouseup"},xe={};k?C={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:te?C={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:j?(C={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},xe=ue):C=ue,T.prototype.on=function(F,z){var X,fe=F.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var Ae=0;Ae<fe.length;Ae+=1)X=fe[Ae],this._handlers_[X]=this._handlers_[X]||[],this._handlers_[X].push(z);return this},T.prototype.off=function(F,z){return this._handlers_=this._handlers_||{},F===void 0?this._handlers_={}:z===void 0?this._handlers_[F]=null:this._handlers_[F]&&this._handlers_[F].indexOf(z)>=0&&this._handlers_[F].splice(this._handlers_[F].indexOf(z),1),this},T.prototype.trigger=function(F,z){var X,fe=this,Ae=F.split(/[ ,]+/g);fe._handlers_=fe._handlers_||{};for(var Se=0;Se<Ae.length;Se+=1)X=Ae[Se],fe._handlers_[X]&&fe._handlers_[X].length&&fe._handlers_[X].forEach(function(Be){Be.call(fe,{type:X,target:fe},z)})},T.prototype.config=function(F){this.options=this.defaults||{},F&&(this.options=function(z,X){var fe={};for(var Ae in z)z.hasOwnProperty(Ae)&&X.hasOwnProperty(Ae)?fe[Ae]=X[Ae]:z.hasOwnProperty(Ae)&&(fe[Ae]=z[Ae]);return fe}(this.options,F))},T.prototype.bindEvt=function(F,z){var X=this;return X._domHandlers_=X._domHandlers_||{},X._domHandlers_[z]=function(){typeof X["on"+z]=="function"?X["on"+z].apply(X,arguments):console.warn('[WARNING] : Missing "on'+z+'" handler.')},m(F,C[z],X._domHandlers_[z]),xe[z]&&m(F,xe[z],X._domHandlers_[z]),X},T.prototype.unbindEvt=function(F,z){return this._domHandlers_=this._domHandlers_||{},w(F,C[z],this._domHandlers_[z]),xe[z]&&w(F,xe[z],this._domHandlers_[z]),delete this._domHandlers_[z],this};var Ee=T;I.prototype=new Ee,I.constructor=I,I.id=0,I.prototype.buildEl=function(F){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},I.prototype.stylize=function(){if(this.options.dataOnly)return this;var F=this.options.fadeTime+"ms",z=function(Ae,Se){var Be=P("borderRadius");for(var Ge in Be)Be.hasOwnProperty(Ge)&&(Be[Ge]="50%");return Be}(),X=L("transition","opacity",F),fe={};return fe.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},fe.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},fe.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},Y(fe.el,X),this.options.shape==="circle"&&Y(fe.back,z),Y(fe.front,z),this.applyStyles(fe),this},I.prototype.applyStyles=function(F){for(var z in this.ui)if(this.ui.hasOwnProperty(z))for(var X in F[z])this.ui[z].style[X]=F[z][X];return this},I.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},I.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},I.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},I.prototype.show=function(F){var z=this;return z.options.dataOnly||(clearTimeout(z.removeTimeout),clearTimeout(z.showTimeout),clearTimeout(z.restTimeout),z.addToDom(),z.restCallback(),setTimeout(function(){z.ui.el.style.opacity=1},0),z.showTimeout=setTimeout(function(){z.trigger("shown",z.instance),typeof F=="function"&&F.call(this)},z.options.fadeTime)),z},I.prototype.hide=function(F){var z=this;if(z.options.dataOnly)return z;if(z.ui.el.style.opacity=z.options.restOpacity,clearTimeout(z.removeTimeout),clearTimeout(z.showTimeout),clearTimeout(z.restTimeout),z.removeTimeout=setTimeout(function(){var Ae=z.options.mode==="dynamic"?"none":"block";z.ui.el.style.display=Ae,typeof F=="function"&&F.call(z),z.trigger("hidden",z.instance)},z.options.fadeTime),z.options.restJoystick){var X=z.options.restJoystick,fe={};fe.x=X===!0||X.x!==!1?0:z.instance.frontPosition.x,fe.y=X===!0||X.y!==!1?0:z.instance.frontPosition.y,z.setPosition(F,fe)}return z},I.prototype.setPosition=function(F,z){var X=this;X.frontPosition={x:z.x,y:z.y};var fe=X.options.fadeTime+"ms",Ae={};Ae.front=L("transition",["transform"],fe);var Se={front:{}};Se.front={transform:"translate("+X.frontPosition.x+"px,"+X.frontPosition.y+"px)"},X.applyStyles(Ae),X.applyStyles(Se),X.restTimeout=setTimeout(function(){typeof F=="function"&&F.call(X),X.restCallback()},X.options.fadeTime)},I.prototype.restCallback=function(){var F={};F.front=L("transition","none",""),this.applyStyles(F),this.trigger("rested",this.instance)},I.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},I.prototype.computeDirection=function(F){var z,X,fe,Ae=F.angle.radian,Se=Math.PI/4,Be=Math.PI/2;if(Ae>Se&&Ae<3*Se&&!F.lockX?z="up":Ae>-Se&&Ae<=Se&&!F.lockY?z="left":Ae>3*-Se&&Ae<=-Se&&!F.lockX?z="down":F.lockY||(z="right"),F.lockY||(X=Ae>-Be&&Ae<Be?"left":"right"),F.lockX||(fe=Ae>0?"up":"down"),F.force>this.options.threshold){var Ge,ht={};for(Ge in this.direction)this.direction.hasOwnProperty(Ge)&&(ht[Ge]=this.direction[Ge]);var xt={};for(Ge in this.direction={x:X,y:fe,angle:z},F.direction=this.direction,ht)ht[Ge]===this.direction[Ge]&&(xt[Ge]=!0);if(xt.x&&xt.y&&xt.angle)return F;xt.x&&xt.y||this.trigger("plain",F),xt.x||this.trigger("plain:"+X,F),xt.y||this.trigger("plain:"+fe,F),xt.angle||this.trigger("dir dir:"+z,F)}else this.resetDirection();return F};var V=I;u.prototype=new Ee,u.constructor=u,u.id=0,u.prototype.prepareNipples=function(){var F=this.nipples;F.on=this.on.bind(this),F.off=this.off.bind(this),F.options=this.options,F.destroy=this.destroy.bind(this),F.ids=this.ids,F.id=this.id,F.processOnMove=this.processOnMove.bind(this),F.processOnEnd=this.processOnEnd.bind(this),F.get=function(z){if(z===void 0)return F[0];for(var X=0,fe=F.length;X<fe;X+=1)if(F[X].identifier===z)return F[X];return!1}},u.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},u.prototype.begin=function(){var F=this.options;if(F.mode==="static"){var z=this.createNipple(F.position,this.manager.getIdentifier());z.add(),this.idles.push(z)}},u.prototype.createNipple=function(F,z){var X=this.manager.scroll,fe={},Ae=this.options,Se=this.parentIsFlex?X.x:X.x+this.box.left,Be=this.parentIsFlex?X.y:X.y+this.box.top;if(F.x&&F.y)fe={x:F.x-Se,y:F.y-Be};else if(F.top||F.right||F.bottom||F.left){var Ge=document.createElement("DIV");Ge.style.display="hidden",Ge.style.top=F.top,Ge.style.right=F.right,Ge.style.bottom=F.bottom,Ge.style.left=F.left,Ge.style.position="absolute",Ae.zone.appendChild(Ge);var ht=Ge.getBoundingClientRect();Ae.zone.removeChild(Ge),fe=F,F={x:ht.left+X.x,y:ht.top+X.y}}var xt=new V(this,{color:Ae.color,size:Ae.size,threshold:Ae.threshold,fadeTime:Ae.fadeTime,dataOnly:Ae.dataOnly,restJoystick:Ae.restJoystick,restOpacity:Ae.restOpacity,mode:Ae.mode,identifier:z,position:F,zone:Ae.zone,frontPosition:{x:0,y:0},shape:Ae.shape});return Ae.dataOnly||(R(xt.ui.el,fe),R(xt.ui.front,xt.frontPosition)),this.nipples.push(xt),this.trigger("added "+xt.identifier+":added",xt),this.manager.trigger("added "+xt.identifier+":added",xt),this.bindNipple(xt),xt},u.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},u.prototype.bindNipple=function(F){var z,X=this,fe=function(Ae,Se){z=Ae.type+" "+Se.id+":"+Ae.type,X.trigger(z,Se)};F.on("destroyed",X.onDestroyed.bind(X)),F.on("shown hidden rested dir plain",fe),F.on("dir:up dir:right dir:down dir:left",fe),F.on("plain:up plain:right plain:down plain:left",fe)},u.prototype.pressureFn=function(F,z,X){var fe=this,Ae=0;clearInterval(fe.pressureIntervals[X]),fe.pressureIntervals[X]=setInterval(function(){var Se=F.force||F.pressure||F.webkitForce||0;Se!==Ae&&(z.trigger("pressure",Se),fe.trigger("pressure "+z.identifier+":pressure",Se),Ae=Se)}.bind(fe),100)},u.prototype.onstart=function(F){var z=this,X=z.options,fe=F;return F=_(F),z.updateBox(),J(F,function(Ae){z.actives.length<X.maxNumberOfNipples?z.processOnStart(Ae):fe.type.match(/^touch/)&&(Object.keys(z.manager.ids).forEach(function(Se){if(Object.values(fe.touches).findIndex(function(Ge){return Ge.identifier===Se})<0){var Be=[F[0]];Be.identifier=Se,z.processOnEnd(Be)}}),z.actives.length<X.maxNumberOfNipples&&z.processOnStart(Ae))}),z.manager.bindDocument(),!1},u.prototype.processOnStart=function(F){var z,X=this,fe=X.options,Ae=X.manager.getIdentifier(F),Se=F.force||F.pressure||F.webkitForce||0,Be={x:F.pageX,y:F.pageY},Ge=X.getOrCreate(Ae,Be);Ge.identifier!==Ae&&X.manager.removeIdentifier(Ge.identifier),Ge.identifier=Ae;var ht=function(xt){xt.trigger("start",xt),X.trigger("start "+xt.id+":start",xt),xt.show(),Se>0&&X.pressureFn(F,xt,xt.identifier),X.processOnMove(F)};if((z=X.idles.indexOf(Ge))>=0&&X.idles.splice(z,1),X.actives.push(Ge),X.ids.push(Ge.identifier),fe.mode!=="semi")ht(Ge);else{if(!(v(Be,Ge.position)<=fe.catchDistance))return Ge.destroy(),void X.processOnStart(F);ht(Ge)}return Ge},u.prototype.getOrCreate=function(F,z){var X,fe=this.options;return/(semi|static)/.test(fe.mode)?(X=this.idles[0])?(this.idles.splice(0,1),X):fe.mode==="semi"?this.createNipple(z,F):(console.warn("Coudln't find the needed nipple."),!1):X=this.createNipple(z,F)},u.prototype.processOnMove=function(F){var z=this.options,X=this.manager.getIdentifier(F),fe=this.nipples.get(X),Ae=this.manager.scroll;if(function(Ue){return isNaN(Ue.buttons)?Ue.pressure!==0:Ue.buttons!==0}(F)){if(!fe)return console.error("Found zombie joystick with ID "+X),void this.manager.removeIdentifier(X);if(z.dynamicPage){var Se=fe.el.getBoundingClientRect();fe.position={x:Ae.x+Se.left,y:Ae.y+Se.top}}fe.identifier=X;var Be=fe.options.size/2,Ge={x:F.pageX,y:F.pageY};z.lockX&&(Ge.y=fe.position.y),z.lockY&&(Ge.x=fe.position.x);var ht,xt,at,Gt,wt,Yt,Mn,je,rt,At,Bt=v(Ge,fe.position),Pt=(ht=Ge,xt=fe.position,at=xt.x-ht.x,Gt=xt.y-ht.y,function(Ue){return Ue*(180/Math.PI)}(Math.atan2(Gt,at))),qt=y(Pt),un=Bt/Be,dn={distance:Bt,position:Ge};if(fe.options.shape==="circle"?(wt=Math.min(Bt,Be),Mn=fe.position,je=wt,At={x:0,y:0},rt=y(rt=Pt),At.x=Mn.x-je*Math.cos(rt),At.y=Mn.y-je*Math.sin(rt),Yt=At):(Yt=function(Ue,Pe,Ye){return{x:Math.min(Math.max(Ue.x,Pe.x-Ye),Pe.x+Ye),y:Math.min(Math.max(Ue.y,Pe.y-Ye),Pe.y+Ye)}}(Ge,fe.position,Be),wt=v(Yt,fe.position)),z.follow){if(Bt>Be){var bn=Ge.x-Yt.x,tn=Ge.y-Yt.y;fe.position.x+=bn,fe.position.y+=tn,fe.el.style.top=fe.position.y-(this.box.top+Ae.y)+"px",fe.el.style.left=fe.position.x-(this.box.left+Ae.x)+"px",Bt=v(Ge,fe.position)}}else Ge=Yt,Bt=wt;var ri=Ge.x-fe.position.x,ni=Ge.y-fe.position.y;fe.frontPosition={x:ri,y:ni},z.dataOnly||(fe.ui.front.style.transform="translate("+ri+"px,"+ni+"px)");var zt={identifier:fe.identifier,position:Ge,force:un,pressure:F.force||F.pressure||F.webkitForce||0,distance:Bt,angle:{radian:qt,degree:Pt},vector:{x:ri/Be,y:-ni/Be},raw:dn,instance:fe,lockX:z.lockX,lockY:z.lockY};(zt=fe.computeDirection(zt)).angle={radian:y(180-Pt),degree:180-Pt},fe.trigger("move",zt),this.trigger("move "+fe.id+":move",zt)}else this.processOnEnd(F)},u.prototype.processOnEnd=function(F){var z=this,X=z.options,fe=z.manager.getIdentifier(F),Ae=z.nipples.get(fe),Se=z.manager.removeIdentifier(Ae.identifier);Ae&&(X.dataOnly||Ae.hide(function(){X.mode==="dynamic"&&(Ae.trigger("removed",Ae),z.trigger("removed "+Ae.id+":removed",Ae),z.manager.trigger("removed "+Ae.id+":removed",Ae),Ae.destroy())}),clearInterval(z.pressureIntervals[Ae.identifier]),Ae.resetDirection(),Ae.trigger("end",Ae),z.trigger("end "+Ae.id+":end",Ae),z.ids.indexOf(Ae.identifier)>=0&&z.ids.splice(z.ids.indexOf(Ae.identifier),1),z.actives.indexOf(Ae)>=0&&z.actives.splice(z.actives.indexOf(Ae),1),/(semi|static)/.test(X.mode)?z.idles.push(Ae):z.nipples.indexOf(Ae)>=0&&z.nipples.splice(z.nipples.indexOf(Ae),1),z.manager.unbindDocument(),/(semi|static)/.test(X.mode)&&(z.manager.ids[Se.id]=Se.identifier))},u.prototype.onDestroyed=function(F,z){this.nipples.indexOf(z)>=0&&this.nipples.splice(this.nipples.indexOf(z),1),this.actives.indexOf(z)>=0&&this.actives.splice(this.actives.indexOf(z),1),this.idles.indexOf(z)>=0&&this.idles.splice(this.idles.indexOf(z),1),this.ids.indexOf(z.identifier)>=0&&this.ids.splice(this.ids.indexOf(z.identifier),1),this.manager.removeIdentifier(z.identifier),this.manager.unbindDocument()},u.prototype.destroy=function(){for(var F in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(z){z.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(F)&&clearInterval(this.pressureIntervals[F]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var q=u;g.prototype=new Ee,g.constructor=g,g.prototype.prepareCollections=function(){var F=this;F.collections.create=F.create.bind(F),F.collections.on=F.on.bind(F),F.collections.off=F.off.bind(F),F.collections.destroy=F.destroy.bind(F),F.collections.get=function(z){var X;return F.collections.every(function(fe){return!(X=fe.get(z))}),X}},g.prototype.create=function(F){return this.createCollection(F)},g.prototype.createCollection=function(F){var z=new q(this,F);return this.bindCollection(z),this.collections.push(z),z},g.prototype.bindCollection=function(F){var z,X=this,fe=function(Ae,Se){z=Ae.type+" "+Se.id+":"+Ae.type,X.trigger(z,Se)};F.on("destroyed",X.onDestroyed.bind(X)),F.on("shown hidden rested dir plain",fe),F.on("dir:up dir:right dir:down dir:left",fe),F.on("plain:up plain:right plain:down plain:left",fe)},g.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},g.prototype.unbindDocument=function(F){Object.keys(this.ids).length&&F!==!0||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},g.prototype.getIdentifier=function(F){var z;return F?(z=F.identifier===void 0?F.pointerId:F.identifier)===void 0&&(z=this.latest||0):z=this.index,this.ids[z]===void 0&&(this.ids[z]=this.index,this.index+=1),this.latest=z,this.ids[z]},g.prototype.removeIdentifier=function(F){var z={};for(var X in this.ids)if(this.ids[X]===F){z.id=X,z.identifier=this.ids[X],delete this.ids[X];break}return z},g.prototype.onmove=function(F){return this.onAny("move",F),!1},g.prototype.onend=function(F){return this.onAny("end",F),!1},g.prototype.oncancel=function(F){return this.onAny("end",F),!1},g.prototype.onAny=function(F,z){var X,fe=this,Ae="processOn"+F.charAt(0).toUpperCase()+F.slice(1);return z=_(z),J(z,function(Se){X=fe.getIdentifier(Se),J(fe.collections,function(Be,Ge,ht){ht.ids.indexOf(Ge)>=0&&(ht[Ae](Be),Be._found_=!0)}.bind(null,Se,X)),Se._found_||fe.removeIdentifier(X)}),!1},g.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(F){F.destroy()}),this.off()},g.prototype.onDestroyed=function(F,z){if(this.collections.indexOf(z)<0)return!1;this.collections.splice(this.collections.indexOf(z),1)};var Q=new g;U.default={create:function(F){return Q.create(F)},factory:Q}}]).default})},{}],10:[function(h,S,W){var d=h("three");class U{static roundNumber(C,v){const y=Math.pow(10,v);return Math.round(C*y)/y}static sample(C){return C[Math.floor(Math.random()*C.length)]}static distanceToSquared(C,v){var y=C.x-v.x,E=C.y-v.y,b=C.z-v.z;return y*y+E*E+b*b}static isPointInPoly(C,v){for(var y=!1,E=-1,b=C.length,m=b-1;++E<b;m=E)(C[E].z<=v.z&&v.z<C[m].z||C[m].z<=v.z&&v.z<C[E].z)&&v.x<(C[m].x-C[E].x)*(v.z-C[E].z)/(C[m].z-C[E].z)+C[E].x&&(y=!y);return y}static isVectorInPolygon(C,v,y){var E=1e5,b=-1e5,m=[];return v.vertexIds.forEach(w=>{E=Math.min(y[w].y,E),b=Math.max(y[w].y,b),m.push(y[w])}),!!(C.y<b+.5&&C.y>E-.5&&this.isPointInPoly(m,C))}static triarea2(C,v,y){return(y.x-C.x)*(v.z-C.z)-(v.x-C.x)*(y.z-C.z)}static vequal(C,v){return this.distanceToSquared(C,v)<1e-5}static mergeVertices(C,v=1e-4){v=Math.max(v,Number.EPSILON);for(var y={},E=C.getIndex(),b=C.getAttribute("position"),m=E?E.count:b.count,w=0,_=[],O=[],R=Math.log10(1/v),L=Math.pow(10,R),P=0;P<m;P++){var Y=E?E.getX(P):P,J="";J+=~~(b.getX(Y)*L)+",",J+=~~(b.getY(Y)*L)+",",(J+=~~(b.getZ(Y)*L)+",")in y?_.push(y[J]):(O.push(b.getX(Y)),O.push(b.getY(Y)),O.push(b.getZ(Y)),y[J]=w,_.push(w),w++)}const j=new d.BufferAttribute(new Float32Array(O),b.itemSize,b.normalized),k=new d.BufferGeometry;return k.setAttribute("position",j),k.setIndex(_),k}}class K{constructor(C){this.content=[],this.scoreFunction=C}push(C){this.content.push(C),this.sinkDown(this.content.length-1)}pop(){const C=this.content[0],v=this.content.pop();return this.content.length>0&&(this.content[0]=v,this.bubbleUp(0)),C}remove(C){const v=this.content.indexOf(C),y=this.content.pop();v!==this.content.length-1&&(this.content[v]=y,this.scoreFunction(y)<this.scoreFunction(C)?this.sinkDown(v):this.bubbleUp(v))}size(){return this.content.length}rescoreElement(C){this.sinkDown(this.content.indexOf(C))}sinkDown(C){const v=this.content[C];for(;C>0;){const y=(C+1>>1)-1,E=this.content[y];if(!(this.scoreFunction(v)<this.scoreFunction(E)))break;this.content[y]=v,this.content[C]=E,C=y}}bubbleUp(C){const v=this.content.length,y=this.content[C],E=this.scoreFunction(y);for(;;){const b=C+1<<1,m=b-1;let w,_=null;if(m<v&&(w=this.scoreFunction(this.content[m]))<E&&(_=m),b<v&&this.scoreFunction(this.content[b])<(_===null?E:w)&&(_=b),_===null)break;this.content[C]=this.content[_],this.content[_]=y,C=_}}}class T{constructor(){this.portals=[]}push(C,v){v===void 0&&(v=C),this.portals.push({left:C,right:v})}stringPull(){const C=this.portals,v=[];let y,E,b,m=0,w=0,_=0;y=C[0].left,E=C[0].left,b=C[0].right,v.push(y);for(let O=1;O<C.length;O++){const R=C[O].left,L=C[O].right;if(U.triarea2(y,b,L)<=0){if(!(U.vequal(y,b)||U.triarea2(y,E,L)>0)){v.push(E),E=y=E,b=y,w=m=w,_=m,O=m;continue}b=L,_=O}if(U.triarea2(y,E,R)>=0){if(!(U.vequal(y,E)||U.triarea2(y,b,R)<0)){v.push(b),E=y=b,b=y,w=m=_,_=m,O=m;continue}E=R,w=O}}return v.length!==0&&U.vequal(v[v.length-1],C[C.length-1].left)||v.push(C[C.length-1].left),this.path=v,v}}class I{constructor(){this.zones={}}static createZone(C,v=1e-4){return class{static buildZone(y,E){const b=this._buildNavigationMesh(y,E),m={};b.vertices.forEach(_=>{_.x=U.roundNumber(_.x,2),_.y=U.roundNumber(_.y,2),_.z=U.roundNumber(_.z,2)}),m.vertices=b.vertices;const w=this._buildPolygonGroups(b);return m.groups=new Array(w.length),w.forEach((_,O)=>{const R=new Map;_.forEach((P,Y)=>{R.set(P,Y)});const L=new Array(_.length);_.forEach((P,Y)=>{const J=[];P.neighbours.forEach(te=>J.push(R.get(te)));const j=[];P.neighbours.forEach(te=>j.push(this._getSharedVerticesInOrder(P,te)));const k=new d.Vector3(0,0,0);k.add(m.vertices[P.vertexIds[0]]),k.add(m.vertices[P.vertexIds[1]]),k.add(m.vertices[P.vertexIds[2]]),k.divideScalar(3),k.x=U.roundNumber(k.x,2),k.y=U.roundNumber(k.y,2),k.z=U.roundNumber(k.z,2),L[Y]={id:Y,neighbours:J,vertexIds:P.vertexIds,centroid:k,portals:j}}),m.groups[O]=L}),m}static _buildNavigationMesh(y,E){return y=U.mergeVertices(y,E),this._buildPolygonsFromGeometry(y)}static _spreadGroupId(y){let E=new Set([y]);for(;E.size>0;){const b=E;E=new Set,b.forEach(m=>{m.group=y.group,m.neighbours.forEach(w=>{w.group===void 0&&E.add(w)})})}}static _buildPolygonGroups(y){const E=[];return y.polygons.forEach(b=>{b.group!==void 0?E[b.group].push(b):(b.group=E.length,this._spreadGroupId(b),E.push([b]))}),E}static _buildPolygonNeighbours(y,E){const b=new Set,m=E[y.vertexIds[1]],w=E[y.vertexIds[2]];return E[y.vertexIds[0]].forEach(_=>{_!==y&&(m.includes(_)||w.includes(_))&&b.add(_)}),m.forEach(_=>{_!==y&&w.includes(_)&&b.add(_)}),b}static _buildPolygonsFromGeometry(y){const E=[],b=[],m=y.attributes.position,w=y.index,_=[];for(let O=0;O<m.count;O++)b.push(new d.Vector3().fromBufferAttribute(m,O)),_[O]=[];for(let O=0;O<y.index.count;O+=3){const R=w.getX(O),L=w.getX(O+1),P=w.getX(O+2),Y={vertexIds:[R,L,P],neighbours:null};E.push(Y),_[R].push(Y),_[L].push(Y),_[P].push(Y)}return E.forEach(O=>{O.neighbours=this._buildPolygonNeighbours(O,_)}),{polygons:E,vertices:b}}static _getSharedVerticesInOrder(y,E){const b=y.vertexIds,m=b[0],w=b[1],_=b[2],O=E.vertexIds,R=O.includes(m),L=O.includes(w),P=O.includes(_);return R&&L&&P?Array.from(b):R&&L?[m,w]:L&&P?[w,_]:R&&P?[_,m]:(console.warn("Error processing navigation mesh neighbors; neighbors with <2 shared vertices found."),[])}}.buildZone(C,v)}setZoneData(C,v){this.zones[C]=v}getRandomNode(C,v,y,E){if(!this.zones[C])return new d.Vector3;y=y||null,E=E||0;const b=[];return this.zones[C].groups[v].forEach(m=>{y&&E?U.distanceToSquared(y,m.centroid)<E*E&&b.push(m.centroid):b.push(m.centroid)}),U.sample(b)||new d.Vector3}getClosestNode(C,v,y,E=!1){const b=this.zones[v].vertices;let m=null,w=1/0;return this.zones[v].groups[y].forEach(_=>{const O=U.distanceToSquared(_.centroid,C);O<w&&(!E||U.isVectorInPolygon(C,_,b))&&(m=_,w=O)}),m}findPath(C,v,y,E){const b=this.zones[y].groups[E],m=this.zones[y].vertices,w=this.getClosestNode(C,y,E,!0),_=this.getClosestNode(v,y,E,!0);if(!w||!_)return null;const O=class{static init(Y){for(let J=0;J<Y.length;J++){const j=Y[J];j.f=0,j.g=0,j.h=0,j.cost=1,j.visited=!1,j.closed=!1,j.parent=null}}static cleanUp(Y){for(let J=0;J<Y.length;J++){const j=Y[J];delete j.f,delete j.g,delete j.h,delete j.cost,delete j.visited,delete j.closed,delete j.parent}}static heap(){return new K(function(Y){return Y.f})}static search(Y,J,j){this.init(Y);const k=this.heap();for(k.push(J);k.size()>0;){const te=k.pop();if(te===j){let xe=te;const Ee=[];for(;xe.parent;)Ee.push(xe),xe=xe.parent;return this.cleanUp(Ee),Ee.reverse()}te.closed=!0;const ue=this.neighbours(Y,te);for(let xe=0,Ee=ue.length;xe<Ee;xe++){const V=ue[xe];if(V.closed)continue;const q=te.g+V.cost,Q=V.visited;if(!Q||q<V.g){if(V.visited=!0,V.parent=te,!V.centroid||!j.centroid)throw new Error("Unexpected state");V.h=V.h||this.heuristic(V.centroid,j.centroid),V.g=q,V.f=V.g+V.h,Q?k.rescoreElement(V):k.push(V)}}}return[]}static heuristic(Y,J){return U.distanceToSquared(Y,J)}static neighbours(Y,J){const j=[];for(let k=0;k<J.neighbours.length;k++)j.push(Y[J.neighbours[k]]);return j}}.search(b,w,_),R=function(Y,J){for(var j=0;j<Y.neighbours.length;j++)if(Y.neighbours[j]===J.id)return Y.portals[j]},L=new T;L.push(C);for(let Y=0;Y<O.length;Y++){const J=O[Y],j=O[Y+1];if(j){const k=R(J,j);L.push(m[k[0]],m[k[1]])}}L.push(v),L.stringPull();const P=L.path.map(Y=>new d.Vector3(Y.x,Y.y,Y.z));return P.shift(),P}}I.prototype.getGroup=function(){const g=new d.Plane;return function(C,v,y=!1){if(!this.zones[C])return null;let E=null,b=Math.pow(50,2);const m=this.zones[C];for(let w=0;w<m.groups.length;w++){const _=m.groups[w];for(const O of _){if(y&&(g.setFromCoplanarPoints(m.vertices[O.vertexIds[0]],m.vertices[O.vertexIds[1]],m.vertices[O.vertexIds[2]]),Math.abs(g.distanceToPoint(v))<.01)&&U.isPointInPoly([m.vertices[O.vertexIds[0]],m.vertices[O.vertexIds[1]],m.vertices[O.vertexIds[2]]],v))return w;const R=U.distanceToSquared(O.centroid,v);R<b&&(E=w,b=R)}}return E}}(),I.prototype.clampStep=function(){const g=new d.Vector3,C=new d.Plane,v=new d.Triangle,y=new d.Vector3;let E,b,m=new d.Vector3;return function(w,_,O,R,L,P){const Y=this.zones[R].vertices,J=this.zones[R].groups[L],j=[O],k={};k[O.id]=0,E=void 0,m.set(0,0,0),b=1/0,C.setFromCoplanarPoints(Y[O.vertexIds[0]],Y[O.vertexIds[1]],Y[O.vertexIds[2]]),C.projectPoint(_,g),y.copy(g);for(let te=j.pop();te;te=j.pop()){v.set(Y[te.vertexIds[0]],Y[te.vertexIds[1]],Y[te.vertexIds[2]]),v.closestPointToPoint(y,g),g.distanceToSquared(y)<b&&(E=te,m.copy(g),b=g.distanceToSquared(y));const ue=k[te.id];if(!(ue>2))for(let xe=0;xe<te.neighbours.length;xe++){const Ee=J[te.neighbours[xe]];Ee.id in k||(j.push(Ee),k[Ee.id]=ue+1)}}return P.copy(m),E}}();const u={PLAYER:new d.Color(15631215).convertSRGBToLinear().getHex(),TARGET:new d.Color(14469912).convertSRGBToLinear().getHex(),PATH:new d.Color(41903).convertSRGBToLinear().getHex(),WAYPOINT:new d.Color(41903).convertSRGBToLinear().getHex(),CLAMPED_STEP:new d.Color(14472114).convertSRGBToLinear().getHex(),CLOSEST_NODE:new d.Color(4417387).convertSRGBToLinear().getHex()};W.Pathfinding=I,W.PathfindingHelper=class extends d.Object3D{constructor(){super(),this._playerMarker=new d.Mesh(new d.SphereBufferGeometry(.25,32,32),new d.MeshBasicMaterial({color:u.PLAYER})),this._targetMarker=new d.Mesh(new d.BoxBufferGeometry(.3,.3,.3),new d.MeshBasicMaterial({color:u.TARGET})),this._nodeMarker=new d.Mesh(new d.BoxBufferGeometry(.1,.8,.1),new d.MeshBasicMaterial({color:u.CLOSEST_NODE})),this._stepMarker=new d.Mesh(new d.BoxBufferGeometry(.1,1,.1),new d.MeshBasicMaterial({color:u.CLAMPED_STEP})),this._pathMarker=new d.Object3D,this._pathLineMaterial=new d.LineBasicMaterial({color:u.PATH,linewidth:2}),this._pathPointMaterial=new d.MeshBasicMaterial({color:u.WAYPOINT}),this._pathPointGeometry=new d.SphereBufferGeometry(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(g=>{g.visible=!1,this.add(g)})}setPath(g){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);g=[this._playerMarker.position].concat(g);const C=new d.BufferGeometry;C.setAttribute("position",new d.BufferAttribute(new Float32Array(3*g.length),3));for(let v=0;v<g.length;v++)C.attributes.position.setXYZ(v,g[v].x,g[v].y+.2,g[v].z);this._pathMarker.add(new d.Line(C,this._pathLineMaterial));for(let v=0;v<g.length-1;v++){const y=new d.Mesh(this._pathPointGeometry,this._pathPointMaterial);y.position.copy(g[v]),y.position.y+=.2,this._pathMarker.add(y)}return this._pathMarker.visible=!0,this}setPlayerPosition(g){return this._playerMarker.position.copy(g),this._playerMarker.visible=!0,this}setTargetPosition(g){return this._targetMarker.position.copy(g),this._targetMarker.visible=!0,this}setNodePosition(g){return this._nodeMarker.position.copy(g),this._nodeMarker.visible=!0,this}setStepPosition(g){return this._stepMarker.position.copy(g),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(g=>{g.visible=!1}),this}}},{three:11}],11:[function(h,S,W){(function(d,U){typeof W=="object"&&S!==void 0?U(W):(d=typeof globalThis<"u"?globalThis:d||self,U(d.THREE={}))})(this,function(d){function U(){}function K(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?kc.getDataURL(s):s.data?{data:Array.prototype.slice.call(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}function T(s,t,i,o,l){for(let f=0,B=s.length-3;f<=B;f+=3){bu.fromArray(s,f);const M=l.x*Math.abs(bu.x)+l.y*Math.abs(bu.y)+l.z*Math.abs(bu.z),D=t.dot(bu),G=i.dot(bu),$=o.dot(bu);if(Math.max(-Math.max(D,G,$),Math.min(D,G,$))>M)return!1}return!0}function I(){Object.defineProperty(this,"id",{value:tv++}),this.uuid=qi.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=I.DefaultUp.clone();const s=new Je,t=new wu,i=new Mo,o=new Je(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:s},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ir},normalMatrix:{value:new ls}}),this.matrix=new ir,this.matrixWorld=new ir,this.matrixAutoUpdate=I.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Sm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}function u(){Object.defineProperty(this,"id",{value:av++}),this.uuid=qi.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=ja,this.side=Os,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=fd,this.blendDst=La,this.blendEquation=tc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Pl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Yi,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Yf,this.stencilZFail=Yf,this.stencilZPass=Yf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function g(s,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?s+6*(t-s)*i:i<.5?t:i<2/3?s+6*(t-s)*(2/3-i):s}function C(s){return s<.04045?.0773993808*s:Math.pow(.9478672986*s+.0521327014,2.4)}function v(s){return s<.0031308?12.92*s:1.055*Math.pow(s,.41666)-.055}function y(s,t,i){if(Array.isArray(s))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=s,this.itemSize=t,this.count=s!==void 0?s.length/t:0,this.normalized=i===!0,this.usage=yh,this.updateRange={offset:0,count:-1},this.version=0}function E(s,t,i){y.call(this,new Int8Array(s),t,i)}function b(s,t,i){y.call(this,new Uint8Array(s),t,i)}function m(s,t,i){y.call(this,new Uint8ClampedArray(s),t,i)}function w(s,t,i){y.call(this,new Int16Array(s),t,i)}function _(s,t,i){y.call(this,new Uint16Array(s),t,i)}function O(s,t,i){y.call(this,new Int32Array(s),t,i)}function R(s,t,i){y.call(this,new Uint32Array(s),t,i)}function L(s,t,i){y.call(this,new Uint16Array(s),t,i)}function P(s,t,i){y.call(this,new Float32Array(s),t,i)}function Y(s,t,i){y.call(this,new Float64Array(s),t,i)}function J(s){if(s.length===0)return-1/0;let t=s[0];for(let i=1,o=s.length;i<o;++i)s[i]>t&&(t=s[i]);return t}function j(s,t){return new lv[s](t)}function k(){Object.defineProperty(this,"id",{value:cv++}),this.uuid=qi.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function te(s=new k,t=new yc){I.call(this),this.type="Mesh",this.geometry=s,this.material=t,this.updateMorphTargets()}function ue(s,t,i,o,l,f,B,M,D,G,$,ie){Vc.fromBufferAttribute(l,G),Qc.fromBufferAttribute(l,$),jc.fromBufferAttribute(l,ie);const oe=s.morphTargetInfluences;if(t.morphTargets&&f&&oe){np.set(0,0,0),ip.set(0,0,0),rp.set(0,0,0);for(let ye=0,we=f.length;ye<we;ye++){const be=oe[ye],ke=f[ye];be!==0&&(Fm.fromBufferAttribute(ke,G),Nm.fromBufferAttribute(ke,$),km.fromBufferAttribute(ke,ie),B?(np.addScaledVector(Fm,be),ip.addScaledVector(Nm,be),rp.addScaledVector(km,be)):(np.addScaledVector(Fm.sub(Vc),be),ip.addScaledVector(Nm.sub(Qc),be),rp.addScaledVector(km.sub(jc),be)))}Vc.add(np),Qc.add(ip),jc.add(rp)}s.isSkinnedMesh&&t.skinning&&(s.boneTransform(G,Vc),s.boneTransform($,Qc),s.boneTransform(ie,jc));const he=function(ye,we,be,ke,Xe,it,lt,pt){if((we.side===Js?ke.intersectTriangle(lt,it,Xe,!0,pt):ke.intersectTriangle(Xe,it,lt,we.side!==fu,pt))===null)return null;lp.copy(pt),lp.applyMatrix4(ye.matrixWorld);const mt=be.ray.origin.distanceTo(lp);return mt<be.near||mt>be.far?null:{distance:mt,point:lp.clone(),object:ye}}(s,t,i,o,Vc,Qc,jc,Um);if(he){M&&(sp.fromBufferAttribute(M,G),op.fromBufferAttribute(M,$),ap.fromBufferAttribute(M,ie),he.uv=vo.getUV(Um,Vc,Qc,jc,sp,op,ap,new Qn)),D&&(sp.fromBufferAttribute(D,G),op.fromBufferAttribute(D,$),ap.fromBufferAttribute(D,ie),he.uv2=vo.getUV(Um,Vc,Qc,jc,sp,op,ap,new Qn));const ye={a:G,b:$,c:ie,normal:new Je,materialIndex:0};vo.getNormal(Vc,Qc,jc,ye.normal),he.face=ye}return he}function xe(s){const t={};for(const i in s){t[i]={};for(const o in s[i]){const l=s[i][o];l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?t[i][o]=l.clone():Array.isArray(l)?t[i][o]=l.slice():t[i][o]=l}}return t}function Ee(s){const t={};for(let i=0;i<s.length;i++){const o=xe(s[i]);for(const l in o)t[l]=o[l]}return t}function V(s){u.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=uv,this.fragmentShader=hv,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,s!==void 0&&(s.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(s))}function q(){I.call(this),this.type="Camera",this.matrixWorldInverse=new ir,this.projectionMatrix=new ir,this.projectionMatrixInverse=new ir}function Q(s=50,t=1,i=.1,o=2e3){q.call(this),this.type="PerspectiveCamera",this.fov=s,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function F(){function s(f,B){o(f,B),l=t.requestAnimationFrame(s)}let t=null,i=!1,o=null,l=null;return{start:function(){i!==!0&&o!==null&&(l=t.requestAnimationFrame(s),i=!0)},stop:function(){t.cancelAnimationFrame(l),i=!1},setAnimationLoop:function(f){o=f},setContext:function(f){t=f}}}function z(s,t){const i=t.isWebGL2,o=new WeakMap;return{get:function(l){return l.isInterleavedBufferAttribute&&(l=l.data),o.get(l)},remove:function(l){l.isInterleavedBufferAttribute&&(l=l.data);const f=o.get(l);f&&(s.deleteBuffer(f.buffer),o.delete(l))},update:function(l,f){if(l.isGLBufferAttribute){const M=o.get(l);return void((!M||M.version<l.version)&&o.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const B=o.get(l);B===void 0?o.set(l,function(M,D){const G=M.array,$=M.usage,ie=s.createBuffer();s.bindBuffer(D,ie),s.bufferData(D,G,$),M.onUploadCallback();let oe=s.FLOAT;return G instanceof Float32Array?oe=s.FLOAT:G instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):G instanceof Uint16Array?M.isFloat16BufferAttribute?i?oe=s.HALF_FLOAT:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):oe=s.UNSIGNED_SHORT:G instanceof Int16Array?oe=s.SHORT:G instanceof Uint32Array?oe=s.UNSIGNED_INT:G instanceof Int32Array?oe=s.INT:G instanceof Int8Array?oe=s.BYTE:G instanceof Uint8Array&&(oe=s.UNSIGNED_BYTE),{buffer:ie,type:oe,bytesPerElement:G.BYTES_PER_ELEMENT,version:M.version}}(l,f)):B.version<l.version&&(function(M,D,G){const $=D.array,ie=D.updateRange;s.bindBuffer(G,M),ie.count===-1?s.bufferSubData(G,0,$):(i?s.bufferSubData(G,ie.offset*$.BYTES_PER_ELEMENT,$,ie.offset,ie.count):s.bufferSubData(G,ie.offset*$.BYTES_PER_ELEMENT,$.subarray(ie.offset,ie.offset+ie.count)),ie.count=-1)}(B.buffer,l,f),B.version=l.version)}}}function X(s,t,i,o){function l(lt){return o.isWebGL2?s.bindVertexArray(lt):we.bindVertexArrayOES(lt)}function f(lt){return o.isWebGL2?s.deleteVertexArray(lt):we.deleteVertexArrayOES(lt)}function B(lt){const pt=[],mt=[],ot=[];for(let kt=0;kt<ye;kt++)pt[kt]=0,mt[kt]=0,ot[kt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:pt,enabledAttributes:mt,attributeDivisors:ot,object:lt,attributes:{},index:null}}function M(){const lt=it.newAttributes;for(let pt=0,mt=lt.length;pt<mt;pt++)lt[pt]=0}function D(lt){G(lt,0)}function G(lt,pt){const mt=it.newAttributes,ot=it.enabledAttributes,kt=it.attributeDivisors;mt[lt]=1,ot[lt]===0&&(s.enableVertexAttribArray(lt),ot[lt]=1),kt[lt]!==pt&&((o.isWebGL2?s:t.get("ANGLE_instanced_arrays"))[o.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](lt,pt),kt[lt]=pt)}function $(){const lt=it.newAttributes,pt=it.enabledAttributes;for(let mt=0,ot=pt.length;mt<ot;mt++)pt[mt]!==lt[mt]&&(s.disableVertexAttribArray(mt),pt[mt]=0)}function ie(lt,pt,mt,ot,kt,gt){o.isWebGL2!==!0||mt!==s.INT&&mt!==s.UNSIGNED_INT?s.vertexAttribPointer(lt,pt,mt,ot,kt,gt):s.vertexAttribIPointer(lt,pt,mt,kt,gt)}function oe(){he(),it!==Xe&&l((it=Xe).object)}function he(){Xe.geometry=null,Xe.program=null,Xe.wireframe=!1}const ye=s.getParameter(s.MAX_VERTEX_ATTRIBS),we=o.isWebGL2?null:t.get("OES_vertex_array_object"),be=o.isWebGL2||we!==null,ke={},Xe=B(null);let it=Xe;return{setup:function(lt,pt,mt,ot,kt){let gt=!1;if(be){const Ht=function(Zt,Qt,en){const Wn=en.wireframe===!0;let ii=ke[Zt.id];ii===void 0&&(ii={},ke[Zt.id]=ii);let lr=ii[Qt.id];lr===void 0&&(lr={},ii[Qt.id]=lr);let oi=lr[Wn];return oi===void 0&&(oi=B(o.isWebGL2?s.createVertexArray():we.createVertexArrayOES()),lr[Wn]=oi),oi}(ot,mt,pt);it!==Ht&&l((it=Ht).object),(gt=function(Zt,Qt){const en=it.attributes,Wn=Zt.attributes;let ii=0;for(const lr in Wn){const oi=en[lr],qn=Wn[lr];if(oi===void 0||oi.attribute!==qn||oi.data!==qn.data)return!0;ii++}return it.attributesNum!==ii||it.index!==Qt}(ot,kt))&&function(Zt,Qt){const en={},Wn=Zt.attributes;let ii=0;for(const lr in Wn){const oi=Wn[lr],qn={};qn.attribute=oi,oi.data&&(qn.data=oi.data),en[lr]=qn,ii++}it.attributes=en,it.attributesNum=ii,it.index=Qt}(ot,kt)}else{const Ht=pt.wireframe===!0;it.geometry===ot.id&&it.program===mt.id&&it.wireframe===Ht||(it.geometry=ot.id,it.program=mt.id,it.wireframe=Ht,gt=!0)}lt.isInstancedMesh===!0&&(gt=!0),kt!==null&&i.update(kt,s.ELEMENT_ARRAY_BUFFER),gt&&(function(Ht,Zt,Qt,en){if(o.isWebGL2===!1&&(Ht.isInstancedMesh||en.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;M();const Wn=en.attributes,ii=Qt.getAttributes(),lr=Zt.defaultAttributeValues;for(const oi in ii){const qn=ii[oi];if(qn>=0){const $i=Wn[oi];if($i!==void 0){const Ji=$i.normalized,Xr=$i.itemSize,Tt=i.get($i);if(Tt===void 0)continue;const Mt=Tt.buffer,Yn=Tt.type,Cn=Tt.bytesPerElement;if($i.isInterleavedBufferAttribute){const zn=$i.data,hr=zn.stride,Fn=$i.offset;zn&&zn.isInstancedInterleavedBuffer?(G(qn,zn.meshPerAttribute),en._maxInstanceCount===void 0&&(en._maxInstanceCount=zn.meshPerAttribute*zn.count)):D(qn),s.bindBuffer(s.ARRAY_BUFFER,Mt),ie(qn,Xr,Yn,Ji,hr*Cn,Fn*Cn)}else $i.isInstancedBufferAttribute?(G(qn,$i.meshPerAttribute),en._maxInstanceCount===void 0&&(en._maxInstanceCount=$i.meshPerAttribute*$i.count)):D(qn),s.bindBuffer(s.ARRAY_BUFFER,Mt),ie(qn,Xr,Yn,Ji,0,0)}else if(oi==="instanceMatrix"){const Ji=i.get(Ht.instanceMatrix);if(Ji===void 0)continue;const Xr=Ji.buffer,Tt=Ji.type;G(qn+0,1),G(qn+1,1),G(qn+2,1),G(qn+3,1),s.bindBuffer(s.ARRAY_BUFFER,Xr),s.vertexAttribPointer(qn+0,4,Tt,!1,64,0),s.vertexAttribPointer(qn+1,4,Tt,!1,64,16),s.vertexAttribPointer(qn+2,4,Tt,!1,64,32),s.vertexAttribPointer(qn+3,4,Tt,!1,64,48)}else if(oi==="instanceColor"){const Ji=i.get(Ht.instanceColor);if(Ji===void 0)continue;const Xr=Ji.buffer,Tt=Ji.type;G(qn,1),s.bindBuffer(s.ARRAY_BUFFER,Xr),s.vertexAttribPointer(qn,3,Tt,!1,12,0)}else if(lr!==void 0){const Ji=lr[oi];if(Ji!==void 0)switch(Ji.length){case 2:s.vertexAttrib2fv(qn,Ji);break;case 3:s.vertexAttrib3fv(qn,Ji);break;case 4:s.vertexAttrib4fv(qn,Ji);break;default:s.vertexAttrib1fv(qn,Ji)}}}}$()}(lt,pt,mt,ot),kt!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,i.get(kt).buffer))},reset:oe,resetDefaultState:he,dispose:function(){oe();for(const lt in ke){const pt=ke[lt];for(const mt in pt){const ot=pt[mt];for(const kt in ot)f(ot[kt].object),delete ot[kt];delete pt[mt]}delete ke[lt]}},releaseStatesOfGeometry:function(lt){if(ke[lt.id]===void 0)return;const pt=ke[lt.id];for(const mt in pt){const ot=pt[mt];for(const kt in ot)f(ot[kt].object),delete ot[kt];delete pt[mt]}delete ke[lt.id]},releaseStatesOfProgram:function(lt){for(const pt in ke){const mt=ke[pt];if(mt[lt.id]===void 0)continue;const ot=mt[lt.id];for(const kt in ot)f(ot[kt].object),delete ot[kt];delete mt[lt.id]}},initAttributes:M,enableAttribute:D,disableUnusedAttributes:$}}function fe(s,t){return s[0]-t[0]}function Ae(s,t){return Math.abs(t[1])-Math.abs(s[1])}function Se(s,t,i){const o=s[0];if(o<=0||o>0)return s;const l=t*i;let f=w0[l];if(f===void 0&&(f=new Float32Array(l),w0[l]=f),t!==0){o.toArray(f,0);for(let B=1,M=0;B!==t;++B)M+=i,s[B].toArray(f,M)}return f}function Be(s,t){if(s.length!==t.length)return!1;for(let i=0,o=s.length;i<o;i++)if(s[i]!==t[i])return!1;return!0}function Ge(s,t){for(let i=0,o=t.length;i<o;i++)s[i]=t[i]}function ht(s,t){let i=C0[t];i===void 0&&(i=new Int32Array(t),C0[t]=i);for(let o=0;o!==t;++o)i[o]=s.allocateTextureUnit();return i}function xt(s,t){const i=this.cache;i[0]!==t&&(s.uniform1f(this.addr,t),i[0]=t)}function at(s,t){const i=this.cache;if(t.x!==void 0)i[0]===t.x&&i[1]===t.y||(s.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Be(i,t))return;s.uniform2fv(this.addr,t),Ge(i,t)}}function Gt(s,t){const i=this.cache;if(t.x!==void 0)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(s.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(s.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Be(i,t))return;s.uniform3fv(this.addr,t),Ge(i,t)}}function wt(s,t){const i=this.cache;if(t.x!==void 0)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(s.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Be(i,t))return;s.uniform4fv(this.addr,t),Ge(i,t)}}function Yt(s,t){const i=this.cache,o=t.elements;if(o===void 0){if(Be(i,t))return;s.uniformMatrix2fv(this.addr,!1,t),Ge(i,t)}else{if(Be(i,o))return;S0.set(o),s.uniformMatrix2fv(this.addr,!1,S0),Ge(i,o)}}function Mn(s,t){const i=this.cache,o=t.elements;if(o===void 0){if(Be(i,t))return;s.uniformMatrix3fv(this.addr,!1,t),Ge(i,t)}else{if(Be(i,o))return;T0.set(o),s.uniformMatrix3fv(this.addr,!1,T0),Ge(i,o)}}function je(s,t){const i=this.cache,o=t.elements;if(o===void 0){if(Be(i,t))return;s.uniformMatrix4fv(this.addr,!1,t),Ge(i,t)}else{if(Be(i,o))return;M0.set(o),s.uniformMatrix4fv(this.addr,!1,M0),Ge(i,o)}}function rt(s,t){const i=this.cache;i[0]!==t&&(s.uniform1i(this.addr,t),i[0]=t)}function At(s,t){const i=this.cache;Be(i,t)||(s.uniform2iv(this.addr,t),Ge(i,t))}function Bt(s,t){const i=this.cache;Be(i,t)||(s.uniform3iv(this.addr,t),Ge(i,t))}function Pt(s,t){const i=this.cache;Be(i,t)||(s.uniform4iv(this.addr,t),Ge(i,t))}function qt(s,t){const i=this.cache;i[0]!==t&&(s.uniform1ui(this.addr,t),i[0]=t)}function un(s,t){const i=this.cache;Be(i,t)||(s.uniform2uiv(this.addr,t),Ge(i,t))}function dn(s,t){const i=this.cache;Be(i,t)||(s.uniform3uiv(this.addr,t),Ge(i,t))}function bn(s,t){const i=this.cache;Be(i,t)||(s.uniform4uiv(this.addr,t),Ge(i,t))}function tn(s,t,i){const o=this.cache,l=i.allocateTextureUnit();o[0]!==l&&(s.uniform1i(this.addr,l),o[0]=l),i.safeSetTexture2D(t||b0,l)}function ri(s,t,i){const o=this.cache,l=i.allocateTextureUnit();o[0]!==l&&(s.uniform1i(this.addr,l),o[0]=l),i.setTexture3D(t||fv,l)}function ni(s,t,i){const o=this.cache,l=i.allocateTextureUnit();o[0]!==l&&(s.uniform1i(this.addr,l),o[0]=l),i.safeSetTextureCube(t||_0,l)}function zt(s,t,i){const o=this.cache,l=i.allocateTextureUnit();o[0]!==l&&(s.uniform1i(this.addr,l),o[0]=l),i.setTexture2DArray(t||dv,l)}function Ue(s,t){s.uniform1fv(this.addr,t)}function Pe(s,t){const i=Se(t,this.size,2);s.uniform2fv(this.addr,i)}function Ye(s,t){const i=Se(t,this.size,3);s.uniform3fv(this.addr,i)}function ze(s,t){const i=Se(t,this.size,4);s.uniform4fv(this.addr,i)}function He(s,t){const i=Se(t,this.size,4);s.uniformMatrix2fv(this.addr,!1,i)}function et(s,t){const i=Se(t,this.size,9);s.uniformMatrix3fv(this.addr,!1,i)}function Me(s,t){const i=Se(t,this.size,16);s.uniformMatrix4fv(this.addr,!1,i)}function Te(s,t){s.uniform1iv(this.addr,t)}function Oe(s,t){s.uniform2iv(this.addr,t)}function Ze(s,t){s.uniform3iv(this.addr,t)}function ae(s,t){s.uniform4iv(this.addr,t)}function ee(s,t){s.uniform1uiv(this.addr,t)}function se(s,t){s.uniform2uiv(this.addr,t)}function Ie(s,t){s.uniform3uiv(this.addr,t)}function We(s,t){s.uniform4uiv(this.addr,t)}function Ke(s,t,i){const o=t.length,l=ht(i,o);s.uniform1iv(this.addr,l);for(let f=0;f!==o;++f)i.safeSetTexture2D(t[f]||b0,l[f])}function $e(s,t,i){const o=t.length,l=ht(i,o);s.uniform1iv(this.addr,l);for(let f=0;f!==o;++f)i.safeSetTextureCube(t[f]||_0,l[f])}function Vt(s,t,i){this.id=s,this.addr=i,this.cache=[],this.setValue=function(o){switch(o){case 5126:return xt;case 35664:return at;case 35665:return Gt;case 35666:return wt;case 35674:return Yt;case 35675:return Mn;case 35676:return je;case 5124:case 35670:return rt;case 35667:case 35671:return At;case 35668:case 35672:return Bt;case 35669:case 35673:return Pt;case 5125:return qt;case 36294:return un;case 36295:return dn;case 36296:return bn;case 35678:case 36198:case 36298:case 36306:case 35682:return tn;case 35679:case 36299:case 36307:return ri;case 35680:case 36300:case 36308:case 36293:return ni;case 36289:case 36303:case 36311:case 36292:return zt}}(t.type)}function $t(s,t,i){this.id=s,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(o){switch(o){case 5126:return Ue;case 35664:return Pe;case 35665:return Ye;case 35666:return ze;case 35674:return He;case 35675:return et;case 35676:return Me;case 5124:case 35670:return Te;case 35667:case 35671:return Oe;case 35668:case 35672:return Ze;case 35669:case 35673:return ae;case 5125:return ee;case 36294:return se;case 36295:return Ie;case 36296:return We;case 35678:case 36198:case 36298:case 36306:case 35682:return Ke;case 35680:case 36300:case 36308:case 36293:return $e}}(t.type)}function Xt(s){this.id=s,this.seq=[],this.map={}}function jt(s,t){s.seq.push(t),s.map[t.id]=t}function on(s,t,i){const o=s.name,l=o.length;for(zm.lastIndex=0;;){const f=zm.exec(o),B=zm.lastIndex;let M=f[1];const D=f[2]==="]",G=f[3];if(D&&(M|=0),G===void 0||G==="["&&B+2===l){jt(i,G===void 0?new Vt(M,s,t):new $t(M,s,t));break}{let $=i.map[M];$===void 0&&jt(i,$=new Xt(M)),i=$}}}function In(s,t){this.seq=[],this.map={};const i=s.getProgramParameter(t,s.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const l=s.getActiveUniform(t,o);on(l,s.getUniformLocation(t,l.name),this)}}function di(s,t,i){const o=s.createShader(t);return s.shaderSource(o,i),s.compileShader(o),o}function fi(s){switch(s){case lo:return["Linear","( value )"];case Zs:return["sRGB","( value )"];case Is:return["RGBE","( value )"];case bm:return["RGBM","( value, 7.0 )"];case _m:return["RGBM","( value, 16.0 )"];case wm:return["RGBD","( value, 256.0 )"];case yu:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case u0:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",s),["Linear","( value )"]}}function Nn(s,t,i){const o=s.getShaderParameter(t,s.COMPILE_STATUS),l=s.getShaderInfoLog(t).trim();return o&&l===""?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+i+`
`+l+function(f){const B=f.split(`
`);for(let M=0;M<B.length;M++)B[M]=M+1+": "+B[M];return B.join(`
`)}(s.getShaderSource(t))}function vn(s,t){const i=fi(t);return"vec4 "+s+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Ft(s){return s!==""}function yn(s,t){return s.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Gn(s,t){return s.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Dn(s){return s.replace(mv,bi)}function bi(s,t){const i=es[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return Dn(i)}function Pi(s){return s.replace(Av,Lr).replace(gv,Zi)}function Zi(s,t,i,o){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Lr(s,t,i,o)}function Lr(s,t,i,o){let l="";for(let f=parseInt(t);f<parseInt(i);f++)l+=o.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return l}function Ki(s){let t="precision "+s.precision+` float;
precision `+s.precision+" int;";return s.precision==="highp"?t+=`
#define HIGH_PRECISION`:s.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Gr(s,t,i,o){const l=s.getContext(),f=i.defines;let B=i.vertexShader,M=i.fragmentShader;const D=function(gt){let Ht="SHADOWMAP_TYPE_BASIC";return gt.shadowMapType===sl?Ht="SHADOWMAP_TYPE_PCF":gt.shadowMapType===Dc?Ht="SHADOWMAP_TYPE_PCF_SOFT":gt.shadowMapType===wo&&(Ht="SHADOWMAP_TYPE_VSM"),Ht}(i),G=function(gt){let Ht="ENVMAP_TYPE_CUBE";if(gt.envMap)switch(gt.envMapMode){case Da:case rc:Ht="ENVMAP_TYPE_CUBE";break;case Zr:case No:Ht="ENVMAP_TYPE_CUBE_UV"}return Ht}(i),$=function(gt){let Ht="ENVMAP_MODE_REFLECTION";if(gt.envMap)switch(gt.envMapMode){case rc:case No:Ht="ENVMAP_MODE_REFRACTION"}return Ht}(i),ie=function(gt){let Ht="ENVMAP_BLENDING_NONE";if(gt.envMap)switch(gt.combine){case Pc:Ht="ENVMAP_BLENDING_MULTIPLY";break;case so:Ht="ENVMAP_BLENDING_MIX";break;case ya:Ht="ENVMAP_BLENDING_ADD"}return Ht}(i),oe=s.gammaFactor>0?s.gammaFactor:1,he=i.isWebGL2?"":function(gt){return[gt.extensionDerivatives||gt.envMapCubeUV||gt.bumpMap||gt.tangentSpaceNormalMap||gt.clearcoatNormalMap||gt.flatShading||gt.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(gt.extensionFragDepth||gt.logarithmicDepthBuffer)&&gt.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",gt.extensionDrawBuffers&&gt.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(gt.extensionShaderTextureLOD||gt.envMap)&&gt.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ft).join(`
`)}(i),ye=function(gt){const Ht=[];for(const Zt in gt){const Qt=gt[Zt];Qt!==!1&&Ht.push("#define "+Zt+" "+Qt)}return Ht.join(`
`)}(f),we=l.createProgram();let be,ke,Xe=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?((be=[ye].filter(Ft).join(`
`)).length>0&&(be+=`
`),(ke=[he,ye].filter(Ft).join(`
`)).length>0&&(ke+=`
`)):(be=[Ki(i),"#define SHADER_NAME "+i.shaderName,ye,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+oe,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+$:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+D:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ft).join(`
`),ke=[he,Ki(i),"#define SHADER_NAME "+i.shaderName,ye,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+oe,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+G:"",i.envMap?"#define "+$:"",i.envMap?"#define "+ie:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+D:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Wa?"#define TONE_MAPPING":"",i.toneMapping!==Wa?es.tonemapping_pars_fragment:"",i.toneMapping!==Wa?function(gt,Ht){let Zt;switch(Ht){case hh:Zt="Linear";break;case gu:Zt="Reinhard";break;case Si:Zt="OptimizedCineon";break;case ic:Zt="ACESFilmic";break;case dh:Zt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",Ht),Zt="Linear"}return"vec3 "+gt+"( vec3 color ) { return "+Zt+"ToneMapping( color ); }"}("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",es.encodings_pars_fragment,i.map?vn("mapTexelToLinear",i.mapEncoding):"",i.matcap?vn("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?vn("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?vn("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?vn("lightMapTexelToLinear",i.lightMapEncoding):"",function(gt,Ht){const Zt=fi(Ht);return"vec4 "+gt+"( vec4 value ) { return LinearTo"+Zt[0]+Zt[1]+"; }"}("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(Ft).join(`
`)),B=Gn(B=yn(B=Dn(B),i),i),M=Gn(M=yn(M=Dn(M),i),i),B=Pi(B),M=Pi(M),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(Xe=`#version 300 es
`,be=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+be,ke=["#define varying in",i.glslVersion===wa?"":"out highp vec4 pc_fragColor;",i.glslVersion===wa?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ke);const it=Xe+be+B,lt=Xe+ke+M,pt=di(l,l.VERTEX_SHADER,it),mt=di(l,l.FRAGMENT_SHADER,lt);if(l.attachShader(we,pt),l.attachShader(we,mt),i.index0AttributeName!==void 0?l.bindAttribLocation(we,0,i.index0AttributeName):i.morphTargets===!0&&l.bindAttribLocation(we,0,"position"),l.linkProgram(we),s.debug.checkShaderErrors){const gt=l.getProgramInfoLog(we).trim(),Ht=l.getShaderInfoLog(pt).trim(),Zt=l.getShaderInfoLog(mt).trim();let Qt=!0,en=!0;if(l.getProgramParameter(we,l.LINK_STATUS)===!1){Qt=!1;const Wn=Nn(l,pt,"vertex"),ii=Nn(l,mt,"fragment");console.error("THREE.WebGLProgram: shader error: ",l.getError(),"gl.VALIDATE_STATUS",l.getProgramParameter(we,l.VALIDATE_STATUS),"gl.getProgramInfoLog",gt,Wn,ii)}else gt!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",gt):Ht!==""&&Zt!==""||(en=!1);en&&(this.diagnostics={runnable:Qt,programLog:gt,vertexShader:{log:Ht,prefix:be},fragmentShader:{log:Zt,prefix:ke}})}l.deleteShader(pt),l.deleteShader(mt);let ot;this.getUniforms=function(){return ot===void 0&&(ot=new In(l,we)),ot};let kt;return this.getAttributes=function(){return kt===void 0&&(kt=function(gt,Ht){const Zt={},Qt=gt.getProgramParameter(Ht,gt.ACTIVE_ATTRIBUTES);for(let en=0;en<Qt;en++){const Wn=gt.getActiveAttrib(Ht,en).name;Zt[Wn]=gt.getAttribLocation(Ht,Wn)}return Zt}(l,we)),kt},this.destroy=function(){o.releaseStatesOfProgram(this),l.deleteProgram(we),this.program=void 0},this.name=i.shaderName,this.id=pv++,this.cacheKey=t,this.usedTimes=1,this.program=we,this.vertexShader=pt,this.fragmentShader=mt,this}function Dr(s,t,i,o,l,f){function B(be){let ke;return be&&be.isTexture?ke=be.encoding:be&&be.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ke=be.texture.encoding):ke=lo,ke}const M=[],D=o.isWebGL2,G=o.logarithmicDepthBuffer,$=o.floatVertexTextures,ie=o.maxVertexUniforms,oe=o.vertexTextures;let he=o.precision;const ye={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},we=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];return{getParameters:function(be,ke,Xe,it,lt){const pt=it.fog,mt=be.isMeshStandardMaterial?it.environment:null,ot=t.get(be.envMap||mt),kt=ye[be.type],gt=lt.isSkinnedMesh?function(en){const Wn=en.skeleton.bones;if($)return 1024;{const ii=ie,lr=Math.floor((ii-20)/4),oi=Math.min(lr,Wn.length);return oi<Wn.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Wn.length+" bones. This GPU supports "+oi+"."),0):oi}}(lt):0;be.precision!==null&&(he=o.getMaxPrecision(be.precision))!==be.precision&&console.warn("THREE.WebGLProgram.getParameters:",be.precision,"not supported, using",he,"instead.");let Ht,Zt;if(kt){const en=pl[kt];Ht=en.vertexShader,Zt=en.fragmentShader}else Ht=be.vertexShader,Zt=be.fragmentShader;const Qt=s.getRenderTarget();return{isWebGL2:D,shaderID:kt,shaderName:be.type,vertexShader:Ht,fragmentShader:Zt,defines:be.defines,isRawShaderMaterial:be.isRawShaderMaterial===!0,glslVersion:be.glslVersion,precision:he,instancing:lt.isInstancedMesh===!0,instancingColor:lt.isInstancedMesh===!0&&lt.instanceColor!==null,supportsVertexTextures:oe,outputEncoding:Qt!==null?B(Qt.texture):s.outputEncoding,map:!!be.map,mapEncoding:B(be.map),matcap:!!be.matcap,matcapEncoding:B(be.matcap),envMap:!!ot,envMapMode:ot&&ot.mapping,envMapEncoding:B(ot),envMapCubeUV:!!ot&&(ot.mapping===Zr||ot.mapping===No),lightMap:!!be.lightMap,lightMapEncoding:B(be.lightMap),aoMap:!!be.aoMap,emissiveMap:!!be.emissiveMap,emissiveMapEncoding:B(be.emissiveMap),bumpMap:!!be.bumpMap,normalMap:!!be.normalMap,objectSpaceNormalMap:be.normalMapType===Xf,tangentSpaceNormalMap:be.normalMapType===xu,clearcoatMap:!!be.clearcoatMap,clearcoatRoughnessMap:!!be.clearcoatRoughnessMap,clearcoatNormalMap:!!be.clearcoatNormalMap,displacementMap:!!be.displacementMap,roughnessMap:!!be.roughnessMap,metalnessMap:!!be.metalnessMap,specularMap:!!be.specularMap,alphaMap:!!be.alphaMap,gradientMap:!!be.gradientMap,sheen:!!be.sheen,transmissionMap:!!be.transmissionMap,combine:be.combine,vertexTangents:be.normalMap&&be.vertexTangents,vertexColors:be.vertexColors,vertexAlphas:be.vertexColors===!0&&lt.geometry.attributes.color&&lt.geometry.attributes.color.itemSize===4,vertexUvs:!!(be.map||be.bumpMap||be.normalMap||be.specularMap||be.alphaMap||be.emissiveMap||be.roughnessMap||be.metalnessMap||be.clearcoatMap||be.clearcoatRoughnessMap||be.clearcoatNormalMap||be.displacementMap||be.transmissionMap),uvsVertexOnly:!(be.map||be.bumpMap||be.normalMap||be.specularMap||be.alphaMap||be.emissiveMap||be.roughnessMap||be.metalnessMap||be.clearcoatNormalMap||be.transmissionMap||!be.displacementMap),fog:!!pt,useFog:be.fog,fogExp2:pt&&pt.isFogExp2,flatShading:!!be.flatShading,sizeAttenuation:be.sizeAttenuation,logarithmicDepthBuffer:G,skinning:be.skinning&&gt>0,maxBones:gt,useVertexTexture:$,morphTargets:be.morphTargets,morphNormals:be.morphNormals,numDirLights:ke.directional.length,numPointLights:ke.point.length,numSpotLights:ke.spot.length,numRectAreaLights:ke.rectArea.length,numHemiLights:ke.hemi.length,numDirLightShadows:ke.directionalShadowMap.length,numPointLightShadows:ke.pointShadowMap.length,numSpotLightShadows:ke.spotShadowMap.length,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:be.dithering,shadowMapEnabled:s.shadowMap.enabled&&Xe.length>0,shadowMapType:s.shadowMap.type,toneMapping:be.toneMapped?s.toneMapping:Wa,physicallyCorrectLights:s.physicallyCorrectLights,premultipliedAlpha:be.premultipliedAlpha,alphaTest:be.alphaTest,doubleSided:be.side===fu,flipSided:be.side===Js,depthPacking:be.depthPacking!==void 0&&be.depthPacking,index0AttributeName:be.index0AttributeName,extensionDerivatives:be.extensions&&be.extensions.derivatives,extensionFragDepth:be.extensions&&be.extensions.fragDepth,extensionDrawBuffers:be.extensions&&be.extensions.drawBuffers,extensionShaderTextureLOD:be.extensions&&be.extensions.shaderTextureLOD,rendererExtensionFragDepth:D||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:D||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:D||i.has("EXT_shader_texture_lod"),customProgramCacheKey:be.customProgramCacheKey()}},getProgramCacheKey:function(be){const ke=[];if(be.shaderID?ke.push(be.shaderID):(ke.push(be.fragmentShader),ke.push(be.vertexShader)),be.defines!==void 0)for(const Xe in be.defines)ke.push(Xe),ke.push(be.defines[Xe]);if(be.isRawShaderMaterial===!1){for(let Xe=0;Xe<we.length;Xe++)ke.push(be[we[Xe]]);ke.push(s.outputEncoding),ke.push(s.gammaFactor)}return ke.push(be.customProgramCacheKey),ke.join()},getUniforms:function(be){const ke=ye[be.type];let Xe;if(ke){const it=pl[ke];Xe=E0.clone(it.uniforms)}else Xe=be.uniforms;return Xe},acquireProgram:function(be,ke){let Xe;for(let it=0,lt=M.length;it<lt;it++){const pt=M[it];if(pt.cacheKey===ke){++(Xe=pt).usedTimes;break}}return Xe===void 0&&(Xe=new Gr(s,ke,be,l),M.push(Xe)),Xe},releaseProgram:function(be){if(--be.usedTimes==0){const ke=M.indexOf(be);M[ke]=M[M.length-1],M.pop(),be.destroy()}},programs:M}}function ar(s){function t(M,D,G,$,ie,oe){let he=i[o];const ye=s.get(G);return he===void 0?(he={id:M.id,object:M,geometry:D,material:G,program:ye.program||B,groupOrder:$,renderOrder:M.renderOrder,z:ie,group:oe},i[o]=he):(he.id=M.id,he.object=M,he.geometry=D,he.material=G,he.program=ye.program||B,he.groupOrder=$,he.renderOrder=M.renderOrder,he.z=ie,he.group=oe),o++,he}const i=[];let o=0;const l=[],f=[],B={id:-1};return{opaque:l,transparent:f,init:function(){o=0,l.length=0,f.length=0},push:function(M,D,G,$,ie,oe){const he=t(M,D,G,$,ie,oe);(G.transparent===!0?f:l).push(he)},unshift:function(M,D,G,$,ie,oe){const he=t(M,D,G,$,ie,oe);(G.transparent===!0?f:l).unshift(he)},finish:function(){for(let M=o,D=i.length;M<D;M++){const G=i[M];if(G.id===null)break;G.id=null,G.object=null,G.geometry=null,G.material=null,G.program=null,G.group=null}},sort:function(M,D){l.length>1&&l.sort(M||function(G,$){return G.groupOrder!==$.groupOrder?G.groupOrder-$.groupOrder:G.renderOrder!==$.renderOrder?G.renderOrder-$.renderOrder:G.program!==$.program?G.program.id-$.program.id:G.material.id!==$.material.id?G.material.id-$.material.id:G.z!==$.z?G.z-$.z:G.id-$.id}),f.length>1&&f.sort(D||function(G,$){return G.groupOrder!==$.groupOrder?G.groupOrder-$.groupOrder:G.renderOrder!==$.renderOrder?G.renderOrder-$.renderOrder:G.z!==$.z?$.z-G.z:G.id-$.id})}}}function zr(s,t){return(t.castShadow?1:0)-(s.castShadow?1:0)}function ys(s,t){const i=new function(){const D={};return{get:function(G){if(D[G.id]!==void 0)return D[G.id];let $;switch(G.type){case"DirectionalLight":$={direction:new Je,color:new Fi};break;case"SpotLight":$={position:new Je,direction:new Je,color:new Fi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":$={position:new Je,color:new Fi,distance:0,decay:0};break;case"HemisphereLight":$={direction:new Je,skyColor:new Fi,groundColor:new Fi};break;case"RectAreaLight":$={color:new Fi,position:new Je,halfWidth:new Je,halfHeight:new Je}}return D[G.id]=$,$}}},o=function(){const D={};return{get:function(G){if(D[G.id]!==void 0)return D[G.id];let $;switch(G.type){case"DirectionalLight":case"SpotLight":$={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn};break;case"PointLight":$={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Qn,shadowCameraNear:1,shadowCameraFar:1e3}}return D[G.id]=$,$}}}(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let D=0;D<9;D++)l.probe.push(new Je);const f=new Je,B=new ir,M=new ir;return{setup:function(D){let G=0,$=0,ie=0;for(let pt=0;pt<9;pt++)l.probe[pt].set(0,0,0);let oe=0,he=0,ye=0,we=0,be=0,ke=0,Xe=0,it=0;D.sort(zr);for(let pt=0,mt=D.length;pt<mt;pt++){const ot=D[pt],kt=ot.color,gt=ot.intensity,Ht=ot.distance,Zt=ot.shadow&&ot.shadow.map?ot.shadow.map.texture:null;if(ot.isAmbientLight)G+=kt.r*gt,$+=kt.g*gt,ie+=kt.b*gt;else if(ot.isLightProbe)for(let Qt=0;Qt<9;Qt++)l.probe[Qt].addScaledVector(ot.sh.coefficients[Qt],gt);else if(ot.isDirectionalLight){const Qt=i.get(ot);if(Qt.color.copy(ot.color).multiplyScalar(ot.intensity),ot.castShadow){const en=ot.shadow,Wn=o.get(ot);Wn.shadowBias=en.bias,Wn.shadowNormalBias=en.normalBias,Wn.shadowRadius=en.radius,Wn.shadowMapSize=en.mapSize,l.directionalShadow[oe]=Wn,l.directionalShadowMap[oe]=Zt,l.directionalShadowMatrix[oe]=ot.shadow.matrix,ke++}l.directional[oe]=Qt,oe++}else if(ot.isSpotLight){const Qt=i.get(ot);if(Qt.position.setFromMatrixPosition(ot.matrixWorld),Qt.color.copy(kt).multiplyScalar(gt),Qt.distance=Ht,Qt.coneCos=Math.cos(ot.angle),Qt.penumbraCos=Math.cos(ot.angle*(1-ot.penumbra)),Qt.decay=ot.decay,ot.castShadow){const en=ot.shadow,Wn=o.get(ot);Wn.shadowBias=en.bias,Wn.shadowNormalBias=en.normalBias,Wn.shadowRadius=en.radius,Wn.shadowMapSize=en.mapSize,l.spotShadow[ye]=Wn,l.spotShadowMap[ye]=Zt,l.spotShadowMatrix[ye]=ot.shadow.matrix,it++}l.spot[ye]=Qt,ye++}else if(ot.isRectAreaLight){const Qt=i.get(ot);Qt.color.copy(kt).multiplyScalar(gt),Qt.halfWidth.set(.5*ot.width,0,0),Qt.halfHeight.set(0,.5*ot.height,0),l.rectArea[we]=Qt,we++}else if(ot.isPointLight){const Qt=i.get(ot);if(Qt.color.copy(ot.color).multiplyScalar(ot.intensity),Qt.distance=ot.distance,Qt.decay=ot.decay,ot.castShadow){const en=ot.shadow,Wn=o.get(ot);Wn.shadowBias=en.bias,Wn.shadowNormalBias=en.normalBias,Wn.shadowRadius=en.radius,Wn.shadowMapSize=en.mapSize,Wn.shadowCameraNear=en.camera.near,Wn.shadowCameraFar=en.camera.far,l.pointShadow[he]=Wn,l.pointShadowMap[he]=Zt,l.pointShadowMatrix[he]=ot.shadow.matrix,Xe++}l.point[he]=Qt,he++}else if(ot.isHemisphereLight){const Qt=i.get(ot);Qt.skyColor.copy(ot.color).multiplyScalar(gt),Qt.groundColor.copy(ot.groundColor).multiplyScalar(gt),l.hemi[be]=Qt,be++}}we>0&&(t.isWebGL2||s.has("OES_texture_float_linear")===!0?(l.rectAreaLTC1=Ei.LTC_FLOAT_1,l.rectAreaLTC2=Ei.LTC_FLOAT_2):s.has("OES_texture_half_float_linear")===!0?(l.rectAreaLTC1=Ei.LTC_HALF_1,l.rectAreaLTC2=Ei.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=G,l.ambient[1]=$,l.ambient[2]=ie;const lt=l.hash;lt.directionalLength===oe&&lt.pointLength===he&&lt.spotLength===ye&&lt.rectAreaLength===we&&lt.hemiLength===be&&lt.numDirectionalShadows===ke&&lt.numPointShadows===Xe&&lt.numSpotShadows===it||(l.directional.length=oe,l.spot.length=ye,l.rectArea.length=we,l.point.length=he,l.hemi.length=be,l.directionalShadow.length=ke,l.directionalShadowMap.length=ke,l.pointShadow.length=Xe,l.pointShadowMap.length=Xe,l.spotShadow.length=it,l.spotShadowMap.length=it,l.directionalShadowMatrix.length=ke,l.pointShadowMatrix.length=Xe,l.spotShadowMatrix.length=it,lt.directionalLength=oe,lt.pointLength=he,lt.spotLength=ye,lt.rectAreaLength=we,lt.hemiLength=be,lt.numDirectionalShadows=ke,lt.numPointShadows=Xe,lt.numSpotShadows=it,l.version=vv++)},setupView:function(D,G){let $=0,ie=0,oe=0,he=0,ye=0;const we=G.matrixWorldInverse;for(let be=0,ke=D.length;be<ke;be++){const Xe=D[be];if(Xe.isDirectionalLight){const it=l.directional[$];it.direction.setFromMatrixPosition(Xe.matrixWorld),f.setFromMatrixPosition(Xe.target.matrixWorld),it.direction.sub(f),it.direction.transformDirection(we),$++}else if(Xe.isSpotLight){const it=l.spot[oe];it.position.setFromMatrixPosition(Xe.matrixWorld),it.position.applyMatrix4(we),it.direction.setFromMatrixPosition(Xe.matrixWorld),f.setFromMatrixPosition(Xe.target.matrixWorld),it.direction.sub(f),it.direction.transformDirection(we),oe++}else if(Xe.isRectAreaLight){const it=l.rectArea[he];it.position.setFromMatrixPosition(Xe.matrixWorld),it.position.applyMatrix4(we),M.identity(),B.copy(Xe.matrixWorld),B.premultiply(we),M.extractRotation(B),it.halfWidth.set(.5*Xe.width,0,0),it.halfHeight.set(0,.5*Xe.height,0),it.halfWidth.applyMatrix4(M),it.halfHeight.applyMatrix4(M),he++}else if(Xe.isPointLight){const it=l.point[ie];it.position.setFromMatrixPosition(Xe.matrixWorld),it.position.applyMatrix4(we),ie++}else if(Xe.isHemisphereLight){const it=l.hemi[ye];it.direction.setFromMatrixPosition(Xe.matrixWorld),it.direction.transformDirection(we),it.direction.normalize(),ye++}}},state:l}}function Qe(s,t){const i=new ys(s,t),o=[],l=[];return{init:function(){o.length=0,l.length=0},state:{lightsArray:o,shadowsArray:l,lights:i},setupLights:function(){i.setup(o)},setupLightsView:function(f){i.setupView(o,f)},pushLight:function(f){o.push(f)},pushShadow:function(f){l.push(f)}}}function ut(s,t,i){function o(pt,mt,ot){const kt=pt<<0|mt<<1|ot<<2;let gt=ie[kt];return gt===void 0&&(gt=new dp({depthPacking:Kf,morphTargets:pt,skinning:mt}),ie[kt]=gt),gt}function l(pt,mt,ot){const kt=pt<<0|mt<<1|ot<<2;let gt=oe[kt];return gt===void 0&&(gt=new fp({morphTargets:pt,skinning:mt}),oe[kt]=gt),gt}function f(pt,mt,ot,kt,gt,Ht,Zt){let Qt=null,en=o,Wn=pt.customDepthMaterial;if(kt.isPointLight===!0&&(en=l,Wn=pt.customDistanceMaterial),Wn===void 0){let ii=!1;ot.morphTargets===!0&&(ii=mt.morphAttributes&&mt.morphAttributes.position&&mt.morphAttributes.position.length>0);let lr=!1;pt.isSkinnedMesh===!0&&(ot.skinning===!0?lr=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",pt)),Qt=en(ii,lr,pt.isInstancedMesh===!0)}else Qt=Wn;if(s.localClippingEnabled&&ot.clipShadows===!0&&ot.clippingPlanes.length!==0){const ii=Qt.uuid,lr=ot.uuid;let oi=he[ii];oi===void 0&&(oi={},he[ii]=oi);let qn=oi[lr];qn===void 0&&(qn=Qt.clone(),oi[lr]=qn),Qt=qn}return Qt.visible=ot.visible,Qt.wireframe=ot.wireframe,Qt.side=Zt===wo?ot.shadowSide!==null?ot.shadowSide:ot.side:ot.shadowSide!==null?ot.shadowSide:we[ot.side],Qt.clipShadows=ot.clipShadows,Qt.clippingPlanes=ot.clippingPlanes,Qt.clipIntersection=ot.clipIntersection,Qt.wireframeLinewidth=ot.wireframeLinewidth,Qt.linewidth=ot.linewidth,kt.isPointLight===!0&&Qt.isMeshDistanceMaterial===!0&&(Qt.referencePosition.setFromMatrixPosition(kt.matrixWorld),Qt.nearDistance=gt,Qt.farDistance=Ht),Qt}function B(pt,mt,ot,kt,gt){if(pt.visible===!1)return;if(pt.layers.test(mt.layers)&&(pt.isMesh||pt.isLine||pt.isPoints)&&(pt.castShadow||pt.receiveShadow&&gt===wo)&&(!pt.frustumCulled||M.intersectsObject(pt))){pt.modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,pt.matrixWorld);const Zt=t.update(pt),Qt=pt.material;if(Array.isArray(Qt)){const en=Zt.groups;for(let Wn=0,ii=en.length;Wn<ii;Wn++){const lr=en[Wn],oi=Qt[lr.materialIndex];if(oi&&oi.visible){const qn=f(pt,Zt,oi,kt,ot.near,ot.far,gt);s.renderBufferDirect(ot,null,Zt,qn,pt,lr)}}}else if(Qt.visible){const en=f(pt,Zt,Qt,kt,ot.near,ot.far,gt);s.renderBufferDirect(ot,null,Zt,en,pt,null)}}const Ht=pt.children;for(let Zt=0,Qt=Ht.length;Zt<Qt;Zt++)B(Ht[Zt],mt,ot,kt,gt)}let M=new wd;const D=new Qn,G=new Qn,$=new rs,ie=[],oe=[],he={},ye=i.maxTextureSize,we={0:Js,1:Os,2:fu},be=new V({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Qn},radius:{value:4}},vertexShader:xv,fragmentShader:yv}),ke=be.clone();ke.defines.HORIZONTAL_PASS=1;const Xe=new k;Xe.setAttribute("position",new y(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const it=new te(Xe,be),lt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sl,this.render=function(pt,mt,ot){if(lt.enabled===!1||lt.autoUpdate===!1&&lt.needsUpdate===!1||pt.length===0)return;const kt=s.getRenderTarget(),gt=s.getActiveCubeFace(),Ht=s.getActiveMipmapLevel(),Zt=s.state;Zt.setBlending(ol),Zt.buffers.color.setClear(1,1,1,1),Zt.buffers.depth.setTest(!0),Zt.setScissorTest(!1);for(let Qt=0,en=pt.length;Qt<en;Qt++){const Wn=pt[Qt],ii=Wn.shadow;if(ii===void 0){console.warn("THREE.WebGLShadowMap:",Wn,"has no shadow.");continue}if(ii.autoUpdate===!1&&ii.needsUpdate===!1)continue;D.copy(ii.mapSize);const lr=ii.getFrameExtents();if(D.multiply(lr),G.copy(ii.mapSize),(D.x>ye||D.y>ye)&&(D.x>ye&&(G.x=Math.floor(ye/lr.x),D.x=G.x*lr.x,ii.mapSize.x=G.x),D.y>ye&&(G.y=Math.floor(ye/lr.y),D.y=G.y*lr.y,ii.mapSize.y=G.y)),ii.map===null&&!ii.isPointLightShadow&&this.type===wo){const qn={minFilter:nt,magFilter:nt,format:ko};ii.map=new aa(D.x,D.y,qn),ii.map.texture.name=Wn.name+".shadowMap",ii.mapPass=new aa(D.x,D.y,qn),ii.camera.updateProjectionMatrix()}if(ii.map===null){const qn={minFilter:mo,magFilter:mo,format:ko};ii.map=new aa(D.x,D.y,qn),ii.map.texture.name=Wn.name+".shadowMap",ii.camera.updateProjectionMatrix()}s.setRenderTarget(ii.map),s.clear();const oi=ii.getViewportCount();for(let qn=0;qn<oi;qn++){const $i=ii.getViewport(qn);$.set(G.x*$i.x,G.y*$i.y,G.x*$i.z,G.y*$i.w),Zt.viewport($),ii.updateMatrices(Wn,qn),M=ii.getFrustum(),B(mt,ot,ii.camera,Wn,this.type)}ii.isPointLightShadow||this.type!==wo||function(qn,$i){const Ji=t.update(it);be.uniforms.shadow_pass.value=qn.map.texture,be.uniforms.resolution.value=qn.mapSize,be.uniforms.radius.value=qn.radius,s.setRenderTarget(qn.mapPass),s.clear(),s.renderBufferDirect($i,null,Ji,be,it,null),ke.uniforms.shadow_pass.value=qn.mapPass.texture,ke.uniforms.resolution.value=qn.mapSize,ke.uniforms.radius.value=qn.radius,s.setRenderTarget(qn.map),s.clear(),s.renderBufferDirect($i,null,Ji,ke,it,null)}(ii,ot),ii.needsUpdate=!1}lt.needsUpdate=!1,s.setRenderTarget(kt,gt,Ht)}}function _t(s,t,i,o,l,f,B){function M(Tt,Mt){return lr?new OffscreenCanvas(Tt,Mt):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function D(Tt,Mt,Yn,Cn){let zn=1;if((Tt.width>Cn||Tt.height>Cn)&&(zn=Cn/Math.max(Tt.width,Tt.height)),zn<1||Mt===!0){if(typeof HTMLImageElement<"u"&&Tt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Tt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Tt instanceof ImageBitmap){const hr=Mt?qi.floorPowerOfTwo:Math.floor,Fn=hr(zn*Tt.width),jn=hr(zn*Tt.height);ii===void 0&&(ii=M(Fn,jn));const Sn=Yn?M(Fn,jn):ii;return Sn.width=Fn,Sn.height=jn,Sn.getContext("2d").drawImage(Tt,0,0,Fn,jn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Tt.width+"x"+Tt.height+") to ("+Fn+"x"+jn+")."),Sn}return"data"in Tt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Tt.width+"x"+Tt.height+")."),Tt}return Tt}function G(Tt){return qi.isPowerOfTwo(Tt.width)&&qi.isPowerOfTwo(Tt.height)}function $(Tt,Mt){return Tt.generateMipmaps&&Mt&&Tt.minFilter!==mo&&Tt.minFilter!==nt}function ie(Tt,Mt,Yn,Cn){s.generateMipmap(Tt),o.get(Mt).__maxMipLevel=Math.log2(Math.max(Yn,Cn))}function oe(Tt,Mt,Yn){if(gt===!1)return Mt;if(Tt!==null){if(s[Tt]!==void 0)return s[Tt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Tt+"'")}let Cn=Mt;return Mt===s.RED&&(Yn===s.FLOAT&&(Cn=s.R32F),Yn===s.HALF_FLOAT&&(Cn=s.R16F),Yn===s.UNSIGNED_BYTE&&(Cn=s.R8)),Mt===s.RGB&&(Yn===s.FLOAT&&(Cn=s.RGB32F),Yn===s.HALF_FLOAT&&(Cn=s.RGB16F),Yn===s.UNSIGNED_BYTE&&(Cn=s.RGB8)),Mt===s.RGBA&&(Yn===s.FLOAT&&(Cn=s.RGBA32F),Yn===s.HALF_FLOAT&&(Cn=s.RGBA16F),Yn===s.UNSIGNED_BYTE&&(Cn=s.RGBA8)),Cn!==s.R16F&&Cn!==s.R32F&&Cn!==s.RGBA16F&&Cn!==s.RGBA32F||t.get("EXT_color_buffer_float"),Cn}function he(Tt){return Tt===mo||Tt===ph||Tt===Co?s.NEAREST:s.LINEAR}function ye(Tt){const Mt=Tt.target;Mt.removeEventListener("dispose",ye),function(Yn){const Cn=o.get(Yn);Cn.__webglInit!==void 0&&(s.deleteTexture(Cn.__webglTexture),o.remove(Yn))}(Mt),Mt.isVideoTexture&&Wn.delete(Mt),B.memory.textures--}function we(Tt){const Mt=Tt.target;Mt.removeEventListener("dispose",we),function(Yn){const Cn=Yn.texture,zn=o.get(Yn),hr=o.get(Cn);if(!!Yn){if(hr.__webglTexture!==void 0&&s.deleteTexture(hr.__webglTexture),Yn.depthTexture&&Yn.depthTexture.dispose(),Yn.isWebGLCubeRenderTarget)for(let Fn=0;Fn<6;Fn++)s.deleteFramebuffer(zn.__webglFramebuffer[Fn]),zn.__webglDepthbuffer&&s.deleteRenderbuffer(zn.__webglDepthbuffer[Fn]);else s.deleteFramebuffer(zn.__webglFramebuffer),zn.__webglDepthbuffer&&s.deleteRenderbuffer(zn.__webglDepthbuffer),zn.__webglMultisampledFramebuffer&&s.deleteFramebuffer(zn.__webglMultisampledFramebuffer),zn.__webglColorRenderbuffer&&s.deleteRenderbuffer(zn.__webglColorRenderbuffer),zn.__webglDepthRenderbuffer&&s.deleteRenderbuffer(zn.__webglDepthRenderbuffer);o.remove(Cn),o.remove(Yn)}}(Mt),B.memory.textures--}function be(Tt,Mt){const Yn=o.get(Tt);if(Tt.isVideoTexture&&function(Cn){const zn=B.render.frame;Wn.get(Cn)!==zn&&(Wn.set(Cn,zn),Cn.update())}(Tt),Tt.version>0&&Yn.__version!==Tt.version){const Cn=Tt.image;if(Cn===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(Cn.complete!==!1)return void lt(Yn,Tt,Mt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(s.TEXTURE0+Mt),i.bindTexture(s.TEXTURE_2D,Yn.__webglTexture)}function ke(Tt,Mt){const Yn=o.get(Tt);Tt.version>0&&Yn.__version!==Tt.version?function(Cn,zn,hr){if(zn.image.length!==6)return;it(Cn,zn),i.activeTexture(s.TEXTURE0+hr),i.bindTexture(s.TEXTURE_CUBE_MAP,Cn.__webglTexture),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,zn.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,zn.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,zn.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const Fn=zn&&(zn.isCompressedTexture||zn.image[0].isCompressedTexture),jn=zn.image[0]&&zn.image[0].isDataTexture,Sn=[];for(let Ct=0;Ct<6;Ct++)Sn[Ct]=Fn||jn?jn?zn.image[Ct].image:zn.image[Ct]:D(zn.image[Ct],!1,!0,Zt);const Ii=Sn[0],vi=G(Ii)||gt,pr=f.convert(zn.format),Ri=f.convert(zn.type),br=oe(zn.internalFormat,pr,Ri);Xe(s.TEXTURE_CUBE_MAP,zn,vi);let gs;if(Fn){for(let Ct=0;Ct<6;Ct++){gs=Sn[Ct].mipmaps;for(let Cr=0;Cr<gs.length;Cr++){const ts=gs[Cr];zn.format!==ko&&zn.format!==xs?pr!==null?i.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Cr,br,ts.width,ts.height,0,ts.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Cr,br,ts.width,ts.height,0,pr,Ri,ts.data)}}Cn.__maxMipLevel=gs.length-1}else{gs=zn.mipmaps;for(let Ct=0;Ct<6;Ct++)if(jn){i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,br,Sn[Ct].width,Sn[Ct].height,0,pr,Ri,Sn[Ct].data);for(let Cr=0;Cr<gs.length;Cr++){const ts=gs[Cr].image[Ct].image;i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Cr+1,br,ts.width,ts.height,0,pr,Ri,ts.data)}}else{i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0,br,pr,Ri,Sn[Ct]);for(let Cr=0;Cr<gs.length;Cr++){const ts=gs[Cr];i.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Cr+1,br,pr,Ri,ts.image[Ct])}}Cn.__maxMipLevel=gs.length}$(zn,vi)&&ie(s.TEXTURE_CUBE_MAP,zn,Ii.width,Ii.height),Cn.__version=zn.version,zn.onUpdate&&zn.onUpdate(zn)}(Yn,Tt,Mt):(i.activeTexture(s.TEXTURE0+Mt),i.bindTexture(s.TEXTURE_CUBE_MAP,Yn.__webglTexture))}function Xe(Tt,Mt,Yn){if(Yn?(s.texParameteri(Tt,s.TEXTURE_WRAP_S,qn[Mt.wrapS]),s.texParameteri(Tt,s.TEXTURE_WRAP_T,qn[Mt.wrapT]),Tt!==s.TEXTURE_3D&&Tt!==s.TEXTURE_2D_ARRAY||s.texParameteri(Tt,s.TEXTURE_WRAP_R,qn[Mt.wrapR]),s.texParameteri(Tt,s.TEXTURE_MAG_FILTER,$i[Mt.magFilter]),s.texParameteri(Tt,s.TEXTURE_MIN_FILTER,$i[Mt.minFilter])):(s.texParameteri(Tt,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(Tt,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),Tt!==s.TEXTURE_3D&&Tt!==s.TEXTURE_2D_ARRAY||s.texParameteri(Tt,s.TEXTURE_WRAP_R,s.CLAMP_TO_EDGE),Mt.wrapS===Yo&&Mt.wrapT===Yo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(Tt,s.TEXTURE_MAG_FILTER,he(Mt.magFilter)),s.texParameteri(Tt,s.TEXTURE_MIN_FILTER,he(Mt.minFilter)),Mt.minFilter!==mo&&Mt.minFilter!==nt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const Cn=t.get("EXT_texture_filter_anisotropic");if(Mt.type===ra&&t.has("OES_texture_float_linear")===!1||gt===!1&&Mt.type===Ea&&t.has("OES_texture_half_float_linear")===!1)return;(Mt.anisotropy>1||o.get(Mt).__currentAnisotropy)&&(s.texParameterf(Tt,Cn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Mt.anisotropy,l.getMaxAnisotropy())),o.get(Mt).__currentAnisotropy=Mt.anisotropy)}}function it(Tt,Mt){Tt.__webglInit===void 0&&(Tt.__webglInit=!0,Mt.addEventListener("dispose",ye),Tt.__webglTexture=s.createTexture(),B.memory.textures++)}function lt(Tt,Mt,Yn){let Cn=s.TEXTURE_2D;Mt.isDataTexture2DArray&&(Cn=s.TEXTURE_2D_ARRAY),Mt.isDataTexture3D&&(Cn=s.TEXTURE_3D),it(Tt,Mt),i.activeTexture(s.TEXTURE0+Yn),i.bindTexture(Cn,Tt.__webglTexture),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Mt.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Mt.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Mt.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const zn=function(Ri){return!gt&&(Ri.wrapS!==Yo||Ri.wrapT!==Yo||Ri.minFilter!==mo&&Ri.minFilter!==nt)}(Mt)&&G(Mt.image)===!1,hr=D(Mt.image,zn,!1,Qt),Fn=G(hr)||gt,jn=f.convert(Mt.format);let Sn=f.convert(Mt.type),Ii=oe(Mt.internalFormat,jn,Sn);Xe(Cn,Mt,Fn);let vi;const pr=Mt.mipmaps;if(Mt.isDepthTexture)Ii=s.DEPTH_COMPONENT,gt?Ii=Mt.type===ra?s.DEPTH_COMPONENT32F:Mt.type===Xa?s.DEPTH_COMPONENT24:Mt.type===ma?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT16:Mt.type===ra&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Mt.format===qo&&Ii===s.DEPTH_COMPONENT&&Mt.type!==oc&&Mt.type!==Xa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Mt.type=oc,Sn=f.convert(Mt.type)),Mt.format===sa&&Ii===s.DEPTH_COMPONENT&&(Ii=s.DEPTH_STENCIL,Mt.type!==ma&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Mt.type=ma,Sn=f.convert(Mt.type))),i.texImage2D(s.TEXTURE_2D,0,Ii,hr.width,hr.height,0,jn,Sn,null);else if(Mt.isDataTexture)if(pr.length>0&&Fn){for(let Ri=0,br=pr.length;Ri<br;Ri++)vi=pr[Ri],i.texImage2D(s.TEXTURE_2D,Ri,Ii,vi.width,vi.height,0,jn,Sn,vi.data);Mt.generateMipmaps=!1,Tt.__maxMipLevel=pr.length-1}else i.texImage2D(s.TEXTURE_2D,0,Ii,hr.width,hr.height,0,jn,Sn,hr.data),Tt.__maxMipLevel=0;else if(Mt.isCompressedTexture){for(let Ri=0,br=pr.length;Ri<br;Ri++)vi=pr[Ri],Mt.format!==ko&&Mt.format!==xs?jn!==null?i.compressedTexImage2D(s.TEXTURE_2D,Ri,Ii,vi.width,vi.height,0,vi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(s.TEXTURE_2D,Ri,Ii,vi.width,vi.height,0,jn,Sn,vi.data);Tt.__maxMipLevel=pr.length-1}else if(Mt.isDataTexture2DArray)i.texImage3D(s.TEXTURE_2D_ARRAY,0,Ii,hr.width,hr.height,hr.depth,0,jn,Sn,hr.data),Tt.__maxMipLevel=0;else if(Mt.isDataTexture3D)i.texImage3D(s.TEXTURE_3D,0,Ii,hr.width,hr.height,hr.depth,0,jn,Sn,hr.data),Tt.__maxMipLevel=0;else if(pr.length>0&&Fn){for(let Ri=0,br=pr.length;Ri<br;Ri++)vi=pr[Ri],i.texImage2D(s.TEXTURE_2D,Ri,Ii,jn,Sn,vi);Mt.generateMipmaps=!1,Tt.__maxMipLevel=pr.length-1}else i.texImage2D(s.TEXTURE_2D,0,Ii,jn,Sn,hr),Tt.__maxMipLevel=0;$(Mt,Fn)&&ie(Cn,Mt,hr.width,hr.height),Tt.__version=Mt.version,Mt.onUpdate&&Mt.onUpdate(Mt)}function pt(Tt,Mt,Yn,Cn){const zn=Mt.texture,hr=f.convert(zn.format),Fn=f.convert(zn.type),jn=oe(zn.internalFormat,hr,Fn);Cn===s.TEXTURE_3D||Cn===s.TEXTURE_2D_ARRAY?i.texImage3D(Cn,0,jn,Mt.width,Mt.height,Mt.depth,0,hr,Fn,null):i.texImage2D(Cn,0,jn,Mt.width,Mt.height,0,hr,Fn,null),i.bindFramebuffer(s.FRAMEBUFFER,Tt),s.framebufferTexture2D(s.FRAMEBUFFER,Yn,Cn,o.get(zn).__webglTexture,0),i.bindFramebuffer(s.FRAMEBUFFER,null)}function mt(Tt,Mt,Yn){if(s.bindRenderbuffer(s.RENDERBUFFER,Tt),Mt.depthBuffer&&!Mt.stencilBuffer){let Cn=s.DEPTH_COMPONENT16;if(Yn){const zn=Mt.depthTexture;zn&&zn.isDepthTexture&&(zn.type===ra?Cn=s.DEPTH_COMPONENT32F:zn.type===Xa&&(Cn=s.DEPTH_COMPONENT24));const hr=kt(Mt);s.renderbufferStorageMultisample(s.RENDERBUFFER,hr,Cn,Mt.width,Mt.height)}else s.renderbufferStorage(s.RENDERBUFFER,Cn,Mt.width,Mt.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,Tt)}else if(Mt.depthBuffer&&Mt.stencilBuffer){if(Yn){const Cn=kt(Mt);s.renderbufferStorageMultisample(s.RENDERBUFFER,Cn,s.DEPTH24_STENCIL8,Mt.width,Mt.height)}else s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,Mt.width,Mt.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,Tt)}else{const Cn=Mt.texture,zn=f.convert(Cn.format),hr=f.convert(Cn.type),Fn=oe(Cn.internalFormat,zn,hr);if(Yn){const jn=kt(Mt);s.renderbufferStorageMultisample(s.RENDERBUFFER,jn,Fn,Mt.width,Mt.height)}else s.renderbufferStorage(s.RENDERBUFFER,Fn,Mt.width,Mt.height)}s.bindRenderbuffer(s.RENDERBUFFER,null)}function ot(Tt){const Mt=o.get(Tt),Yn=Tt.isWebGLCubeRenderTarget===!0;if(Tt.depthTexture){if(Yn)throw new Error("target.depthTexture not supported in Cube render targets");(function(Cn,zn){if(zn&&zn.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(s.FRAMEBUFFER,Cn),!zn.depthTexture||!zn.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");o.get(zn.depthTexture).__webglTexture&&zn.depthTexture.image.width===zn.width&&zn.depthTexture.image.height===zn.height||(zn.depthTexture.image.width=zn.width,zn.depthTexture.image.height=zn.height,zn.depthTexture.needsUpdate=!0),be(zn.depthTexture,0);const hr=o.get(zn.depthTexture).__webglTexture;if(zn.depthTexture.format===qo)s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,hr,0);else{if(zn.depthTexture.format!==sa)throw new Error("Unknown depthTexture format");s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,hr,0)}})(Mt.__webglFramebuffer,Tt)}else if(Yn){Mt.__webglDepthbuffer=[];for(let Cn=0;Cn<6;Cn++)i.bindFramebuffer(s.FRAMEBUFFER,Mt.__webglFramebuffer[Cn]),Mt.__webglDepthbuffer[Cn]=s.createRenderbuffer(),mt(Mt.__webglDepthbuffer[Cn],Tt,!1)}else i.bindFramebuffer(s.FRAMEBUFFER,Mt.__webglFramebuffer),Mt.__webglDepthbuffer=s.createRenderbuffer(),mt(Mt.__webglDepthbuffer,Tt,!1);i.bindFramebuffer(s.FRAMEBUFFER,null)}function kt(Tt){return gt&&Tt.isWebGLMultisampleRenderTarget?Math.min(en,Tt.samples):0}const gt=l.isWebGL2,Ht=l.maxTextures,Zt=l.maxCubemapSize,Qt=l.maxTextureSize,en=l.maxSamples,Wn=new WeakMap;let ii,lr=!1;try{lr=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}let oi=0;const qn={[al]:s.REPEAT,[Yo]:s.CLAMP_TO_EDGE,[Fl]:s.MIRRORED_REPEAT},$i={[mo]:s.NEAREST,[ph]:s.NEAREST_MIPMAP_NEAREST,[Co]:s.NEAREST_MIPMAP_LINEAR,[nt]:s.LINEAR,[Au]:s.LINEAR_MIPMAP_NEAREST,[sc]:s.LINEAR_MIPMAP_LINEAR};let Ji=!1,Xr=!1;this.allocateTextureUnit=function(){const Tt=oi;return Tt>=Ht&&console.warn("THREE.WebGLTextures: Trying to use "+Tt+" texture units while this GPU supports only "+Ht),oi+=1,Tt},this.resetTextureUnits=function(){oi=0},this.setTexture2D=be,this.setTexture2DArray=function(Tt,Mt){const Yn=o.get(Tt);Tt.version>0&&Yn.__version!==Tt.version?lt(Yn,Tt,Mt):(i.activeTexture(s.TEXTURE0+Mt),i.bindTexture(s.TEXTURE_2D_ARRAY,Yn.__webglTexture))},this.setTexture3D=function(Tt,Mt){const Yn=o.get(Tt);Tt.version>0&&Yn.__version!==Tt.version?lt(Yn,Tt,Mt):(i.activeTexture(s.TEXTURE0+Mt),i.bindTexture(s.TEXTURE_3D,Yn.__webglTexture))},this.setTextureCube=ke,this.setupRenderTarget=function(Tt){const Mt=Tt.texture,Yn=o.get(Tt),Cn=o.get(Mt);Tt.addEventListener("dispose",we),Cn.__webglTexture=s.createTexture(),Cn.__version=Mt.version,B.memory.textures++;const zn=Tt.isWebGLCubeRenderTarget===!0,hr=Tt.isWebGLMultisampleRenderTarget===!0,Fn=Mt.isDataTexture3D||Mt.isDataTexture2DArray,jn=G(Tt)||gt;if(!gt||Mt.format!==xs||Mt.type!==ra&&Mt.type!==Ea||(Mt.format=ko,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),zn){Yn.__webglFramebuffer=[];for(let Sn=0;Sn<6;Sn++)Yn.__webglFramebuffer[Sn]=s.createFramebuffer()}else if(Yn.__webglFramebuffer=s.createFramebuffer(),hr)if(gt){Yn.__webglMultisampledFramebuffer=s.createFramebuffer(),Yn.__webglColorRenderbuffer=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,Yn.__webglColorRenderbuffer);const Sn=f.convert(Mt.format),Ii=f.convert(Mt.type),vi=oe(Mt.internalFormat,Sn,Ii),pr=kt(Tt);s.renderbufferStorageMultisample(s.RENDERBUFFER,pr,vi,Tt.width,Tt.height),i.bindFramebuffer(s.FRAMEBUFFER,Yn.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,Yn.__webglColorRenderbuffer),s.bindRenderbuffer(s.RENDERBUFFER,null),Tt.depthBuffer&&(Yn.__webglDepthRenderbuffer=s.createRenderbuffer(),mt(Yn.__webglDepthRenderbuffer,Tt,!0)),i.bindFramebuffer(s.FRAMEBUFFER,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(zn){i.bindTexture(s.TEXTURE_CUBE_MAP,Cn.__webglTexture),Xe(s.TEXTURE_CUBE_MAP,Mt,jn);for(let Sn=0;Sn<6;Sn++)pt(Yn.__webglFramebuffer[Sn],Tt,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Sn);$(Mt,jn)&&ie(s.TEXTURE_CUBE_MAP,Mt,Tt.width,Tt.height),i.bindTexture(s.TEXTURE_CUBE_MAP,null)}else{let Sn=s.TEXTURE_2D;Fn&&(gt?Sn=Mt.isDataTexture3D?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),i.bindTexture(Sn,Cn.__webglTexture),Xe(Sn,Mt,jn),pt(Yn.__webglFramebuffer,Tt,s.COLOR_ATTACHMENT0,Sn),$(Mt,jn)&&ie(s.TEXTURE_2D,Mt,Tt.width,Tt.height),i.bindTexture(s.TEXTURE_2D,null)}Tt.depthBuffer&&ot(Tt)},this.updateRenderTargetMipmap=function(Tt){const Mt=Tt.texture;if($(Mt,G(Tt)||gt)){const Yn=Tt.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:s.TEXTURE_2D,Cn=o.get(Mt).__webglTexture;i.bindTexture(Yn,Cn),ie(Yn,Mt,Tt.width,Tt.height),i.bindTexture(Yn,null)}},this.updateMultisampleRenderTarget=function(Tt){if(Tt.isWebGLMultisampleRenderTarget)if(gt){const Mt=o.get(Tt);i.bindFramebuffer(s.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),i.bindFramebuffer(s.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);const Yn=Tt.width,Cn=Tt.height;let zn=s.COLOR_BUFFER_BIT;Tt.depthBuffer&&(zn|=s.DEPTH_BUFFER_BIT),Tt.stencilBuffer&&(zn|=s.STENCIL_BUFFER_BIT),s.blitFramebuffer(0,0,Yn,Cn,0,0,Yn,Cn,zn,s.NEAREST),i.bindFramebuffer(s.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(Tt,Mt){Tt&&Tt.isWebGLRenderTarget&&(Ji===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ji=!0),Tt=Tt.texture),be(Tt,Mt)},this.safeSetTextureCube=function(Tt,Mt){Tt&&Tt.isWebGLCubeRenderTarget&&(Xr===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Xr=!0),Tt=Tt.texture),ke(Tt,Mt)}}function nn(s,t,i){const o=i.isWebGL2;return{convert:function(l){let f;if(l===xa)return s.UNSIGNED_BYTE;if(l===ll)return s.UNSIGNED_SHORT_4_4_4_4;if(l===kl)return s.UNSIGNED_SHORT_5_5_5_1;if(l===lc)return s.UNSIGNED_SHORT_5_6_5;if(l===Ka)return s.BYTE;if(l===Nl)return s.SHORT;if(l===oc)return s.UNSIGNED_SHORT;if(l===ac)return s.INT;if(l===Xa)return s.UNSIGNED_INT;if(l===ra)return s.FLOAT;if(l===Ea)return o?s.HALF_FLOAT:(f=t.get("OES_texture_half_float"))!==null?f.HALF_FLOAT_OES:null;if(l===Oc)return s.ALPHA;if(l===xs)return s.RGB;if(l===ko)return s.RGBA;if(l===md)return s.LUMINANCE;if(l===cl)return s.LUMINANCE_ALPHA;if(l===qo)return s.DEPTH_COMPONENT;if(l===sa)return s.DEPTH_STENCIL;if(l===gh)return s.RED;if(l===Ci)return s.RED_INTEGER;if(l===mr)return s.RG;if(l===$r)return s.RG_INTEGER;if(l===oo)return s.RGB_INTEGER;if(l===as)return s.RGBA_INTEGER;if(l===Jo||l===Gi||l===oa||l===Vr){if((f=t.get("WEBGL_compressed_texture_s3tc"))===null)return null;if(l===Jo)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===Gi)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===oa)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===Vr)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(l===Fc||l===cc||l===Uo||l===Go){if((f=t.get("WEBGL_compressed_texture_pvrtc"))===null)return null;if(l===Fc)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===cc)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===Uo)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===Go)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(l===Er)return(f=t.get("WEBGL_compressed_texture_etc1"))!==null?f.COMPRESSED_RGB_ETC1_WEBGL:null;if((l===Pa||l===uc)&&(f=t.get("WEBGL_compressed_texture_etc"))!==null){if(l===Pa)return f.COMPRESSED_RGB8_ETC2;if(l===uc)return f.COMPRESSED_RGBA8_ETC2_EAC}return l===Ho||l===ps||l===ks||l===Kr||l===ms||l===ao||l===Ya||l===Ul||l===gd||l===Ad||l===Ah||l===vh||l===vd||l===Vf||l===hs||l===ba||l===io||l===_a||l===Oa||l===Gl||l===vu||l===Em||l===Qf||l===jf||l===Wf||l===Fa||l===c0||l===Zo?(f=t.get("WEBGL_compressed_texture_astc"))!==null?l:null:l===yd?(f=t.get("EXT_texture_compression_bptc"))!==null?l:null:l===ma?o?s.UNSIGNED_INT_24_8:(f=t.get("WEBGL_depth_texture"))!==null?f.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Wt(){this._targetRay=null,this._grip=null,this._hand=null}function mn(s,t){function i(gt){const Ht=ye.get(gt.inputSource);Ht&&Ht.dispatchEvent({type:gt.type,data:gt.inputSource})}function o(){ye.forEach(function(gt,Ht){gt.disconnect(Ht)}),ye.clear(),it=null,lt=null,M.bindXRFramebuffer(null),s.setRenderTarget(s.getRenderTarget()),kt.stop(),B.isPresenting=!1,B.dispatchEvent({type:"sessionend"})}function l(gt){const Ht=D.inputSources;for(let Zt=0;Zt<he.length;Zt++)ye.set(Ht[Zt],he[Zt]);for(let Zt=0;Zt<gt.removed.length;Zt++){const Qt=gt.removed[Zt],en=ye.get(Qt);en&&(en.dispatchEvent({type:"disconnected",data:Qt}),ye.delete(Qt))}for(let Zt=0;Zt<gt.added.length;Zt++){const Qt=gt.added[Zt],en=ye.get(Qt);en&&en.dispatchEvent({type:"connected",data:Qt})}}function f(gt,Ht){Ht===null?gt.matrixWorld.copy(gt.matrix):gt.matrixWorld.multiplyMatrices(Ht.matrixWorld,gt.matrix),gt.matrixWorldInverse.copy(gt.matrixWorld).invert()}const B=this,M=s.state;let D=null,G=1,$=null,ie="local-floor",oe=null;const he=[],ye=new Map,we=new Q;we.layers.enable(1),we.viewport=new rs;const be=new Q;be.layers.enable(2),be.viewport=new rs;const ke=[we,be],Xe=new Vm;Xe.layers.enable(1),Xe.layers.enable(2);let it=null,lt=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(gt){let Ht=he[gt];return Ht===void 0&&(Ht=new Wt,he[gt]=Ht),Ht.getTargetRaySpace()},this.getControllerGrip=function(gt){let Ht=he[gt];return Ht===void 0&&(Ht=new Wt,he[gt]=Ht),Ht.getGripSpace()},this.getHand=function(gt){let Ht=he[gt];return Ht===void 0&&(Ht=new Wt,he[gt]=Ht),Ht.getHandSpace()},this.setFramebufferScaleFactor=function(gt){G=gt,B.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(gt){ie=gt,B.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return $},this.getSession=function(){return D},this.setSession=async function(gt){if((D=gt)!==null){D.addEventListener("select",i),D.addEventListener("selectstart",i),D.addEventListener("selectend",i),D.addEventListener("squeeze",i),D.addEventListener("squeezestart",i),D.addEventListener("squeezeend",i),D.addEventListener("end",o),D.addEventListener("inputsourceschange",l);const Ht=t.getContextAttributes();Ht.xrCompatible!==!0&&await t.makeXRCompatible();const Zt={antialias:Ht.antialias,alpha:Ht.alpha,depth:Ht.depth,stencil:Ht.stencil,framebufferScaleFactor:G},Qt=new XRWebGLLayer(D,t,Zt);D.updateRenderState({baseLayer:Qt}),$=await D.requestReferenceSpace(ie),kt.setContext(D),kt.start(),B.isPresenting=!0,B.dispatchEvent({type:"sessionstart"})}};const pt=new Je,mt=new Je;this.getCamera=function(gt){Xe.near=be.near=we.near=gt.near,Xe.far=be.far=we.far=gt.far,it===Xe.near&&lt===Xe.far||(D.updateRenderState({depthNear:Xe.near,depthFar:Xe.far}),it=Xe.near,lt=Xe.far);const Ht=gt.parent,Zt=Xe.cameras;f(Xe,Ht);for(let en=0;en<Zt.length;en++)f(Zt[en],Ht);gt.matrixWorld.copy(Xe.matrixWorld),gt.matrix.copy(Xe.matrix),gt.matrix.decompose(gt.position,gt.quaternion,gt.scale);const Qt=gt.children;for(let en=0,Wn=Qt.length;en<Wn;en++)Qt[en].updateMatrixWorld(!0);return Zt.length===2?function(en,Wn,ii){pt.setFromMatrixPosition(Wn.matrixWorld),mt.setFromMatrixPosition(ii.matrixWorld);const lr=pt.distanceTo(mt),oi=Wn.projectionMatrix.elements,qn=ii.projectionMatrix.elements,$i=oi[14]/(oi[10]-1),Ji=oi[14]/(oi[10]+1),Xr=(oi[9]+1)/oi[5],Tt=(oi[9]-1)/oi[5],Mt=(oi[8]-1)/oi[0],Yn=(qn[8]+1)/qn[0],Cn=$i*Mt,zn=$i*Yn,hr=lr/(-Mt+Yn),Fn=hr*-Mt;Wn.matrixWorld.decompose(en.position,en.quaternion,en.scale),en.translateX(Fn),en.translateZ(hr),en.matrixWorld.compose(en.position,en.quaternion,en.scale),en.matrixWorldInverse.copy(en.matrixWorld).invert();const jn=$i+hr,Sn=Ji+hr,Ii=Cn-Fn,vi=zn+(lr-Fn),pr=Xr*Ji/Sn*jn,Ri=Tt*Ji/Sn*jn;en.projectionMatrix.makePerspective(Ii,vi,pr,Ri,jn,Sn)}(Xe,we,be):Xe.projectionMatrix.copy(we.projectionMatrix),Xe};let ot=null;const kt=new F;kt.setAnimationLoop(function(gt,Ht){if((oe=Ht.getViewerPose($))!==null){const Qt=oe.views,en=D.renderState.baseLayer;M.bindXRFramebuffer(en.framebuffer);let Wn=!1;Qt.length!==Xe.cameras.length&&(Xe.cameras.length=0,Wn=!0);for(let ii=0;ii<Qt.length;ii++){const lr=Qt[ii],oi=en.getViewport(lr),qn=ke[ii];qn.matrix.fromArray(lr.transform.matrix),qn.projectionMatrix.fromArray(lr.projectionMatrix),qn.viewport.set(oi.x,oi.y,oi.width,oi.height),ii===0&&Xe.matrix.copy(qn.matrix),Wn===!0&&Xe.cameras.push(qn)}}const Zt=D.inputSources;for(let Qt=0;Qt<he.length;Qt++){const en=he[Qt],Wn=Zt[Qt];en.update(Wn,Ht,$)}ot&&ot(gt,Ht)}),this.setAnimationLoop=function(gt){ot=gt},this.dispose=function(){}}function Un(s){function t(o,l){o.opacity.value=l.opacity,l.color&&o.diffuse.value.copy(l.color),l.emissive&&o.emissive.value.copy(l.emissive).multiplyScalar(l.emissiveIntensity),l.map&&(o.map.value=l.map),l.alphaMap&&(o.alphaMap.value=l.alphaMap),l.specularMap&&(o.specularMap.value=l.specularMap);const f=s.get(l).envMap;if(f){o.envMap.value=f,o.flipEnvMap.value=f.isCubeTexture&&f._needsFlipEnvMap?-1:1,o.reflectivity.value=l.reflectivity,o.refractionRatio.value=l.refractionRatio;const D=s.get(f).__maxMipLevel;D!==void 0&&(o.maxMipLevel.value=D)}l.lightMap&&(o.lightMap.value=l.lightMap,o.lightMapIntensity.value=l.lightMapIntensity),l.aoMap&&(o.aoMap.value=l.aoMap,o.aoMapIntensity.value=l.aoMapIntensity);let B;l.map?B=l.map:l.specularMap?B=l.specularMap:l.displacementMap?B=l.displacementMap:l.normalMap?B=l.normalMap:l.bumpMap?B=l.bumpMap:l.roughnessMap?B=l.roughnessMap:l.metalnessMap?B=l.metalnessMap:l.alphaMap?B=l.alphaMap:l.emissiveMap?B=l.emissiveMap:l.clearcoatMap?B=l.clearcoatMap:l.clearcoatNormalMap?B=l.clearcoatNormalMap:l.clearcoatRoughnessMap&&(B=l.clearcoatRoughnessMap),B!==void 0&&(B.isWebGLRenderTarget&&(B=B.texture),B.matrixAutoUpdate===!0&&B.updateMatrix(),o.uvTransform.value.copy(B.matrix));let M;l.aoMap?M=l.aoMap:l.lightMap&&(M=l.lightMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),o.uv2Transform.value.copy(M.matrix))}function i(o,l){o.roughness.value=l.roughness,o.metalness.value=l.metalness,l.roughnessMap&&(o.roughnessMap.value=l.roughnessMap),l.metalnessMap&&(o.metalnessMap.value=l.metalnessMap),l.emissiveMap&&(o.emissiveMap.value=l.emissiveMap),l.bumpMap&&(o.bumpMap.value=l.bumpMap,o.bumpScale.value=l.bumpScale,l.side===Js&&(o.bumpScale.value*=-1)),l.normalMap&&(o.normalMap.value=l.normalMap,o.normalScale.value.copy(l.normalScale),l.side===Js&&o.normalScale.value.negate()),l.displacementMap&&(o.displacementMap.value=l.displacementMap,o.displacementScale.value=l.displacementScale,o.displacementBias.value=l.displacementBias),s.get(l).envMap&&(o.envMapIntensity.value=l.envMapIntensity)}return{refreshFogUniforms:function(o,l){o.fogColor.value.copy(l.color),l.isFog?(o.fogNear.value=l.near,o.fogFar.value=l.far):l.isFogExp2&&(o.fogDensity.value=l.density)},refreshMaterialUniforms:function(o,l,f,B){l.isMeshBasicMaterial?t(o,l):l.isMeshLambertMaterial?(t(o,l),function(M,D){D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap)}(o,l)):l.isMeshToonMaterial?(t(o,l),function(M,D){D.gradientMap&&(M.gradientMap.value=D.gradientMap),D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,D.side===Js&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),D.side===Js&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isMeshPhongMaterial?(t(o,l),function(M,D){M.specular.value.copy(D.specular),M.shininess.value=Math.max(D.shininess,1e-4),D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,D.side===Js&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),D.side===Js&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isMeshStandardMaterial?(t(o,l),l.isMeshPhysicalMaterial?function(M,D){i(M,D),M.reflectivity.value=D.reflectivity,M.clearcoat.value=D.clearcoat,M.clearcoatRoughness.value=D.clearcoatRoughness,D.sheen&&M.sheen.value.copy(D.sheen),D.clearcoatMap&&(M.clearcoatMap.value=D.clearcoatMap),D.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=D.clearcoatRoughnessMap),D.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(D.clearcoatNormalScale),M.clearcoatNormalMap.value=D.clearcoatNormalMap,D.side===Js&&M.clearcoatNormalScale.value.negate()),M.transmission.value=D.transmission,D.transmissionMap&&(M.transmissionMap.value=D.transmissionMap)}(o,l):i(o,l)):l.isMeshMatcapMaterial?(t(o,l),function(M,D){D.matcap&&(M.matcap.value=D.matcap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,D.side===Js&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),D.side===Js&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isMeshDepthMaterial?(t(o,l),function(M,D){D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isMeshDistanceMaterial?(t(o,l),function(M,D){D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias),M.referencePosition.value.copy(D.referencePosition),M.nearDistance.value=D.nearDistance,M.farDistance.value=D.farDistance}(o,l)):l.isMeshNormalMaterial?(t(o,l),function(M,D){D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,D.side===Js&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),D.side===Js&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(o,l)):l.isLineBasicMaterial?(function(M,D){M.diffuse.value.copy(D.color),M.opacity.value=D.opacity}(o,l),l.isLineDashedMaterial&&function(M,D){M.dashSize.value=D.dashSize,M.totalSize.value=D.dashSize+D.gapSize,M.scale.value=D.scale}(o,l)):l.isPointsMaterial?function(M,D,G,$){M.diffuse.value.copy(D.color),M.opacity.value=D.opacity,M.size.value=D.size*G,M.scale.value=.5*$,D.map&&(M.map.value=D.map),D.alphaMap&&(M.alphaMap.value=D.alphaMap);let ie;D.map?ie=D.map:D.alphaMap&&(ie=D.alphaMap),ie!==void 0&&(ie.matrixAutoUpdate===!0&&ie.updateMatrix(),M.uvTransform.value.copy(ie.matrix))}(o,l,f,B):l.isSpriteMaterial?function(M,D){M.diffuse.value.copy(D.color),M.opacity.value=D.opacity,M.rotation.value=D.rotation,D.map&&(M.map.value=D.map),D.alphaMap&&(M.alphaMap.value=D.alphaMap);let G;D.map?G=D.map:D.alphaMap&&(G=D.alphaMap),G!==void 0&&(G.matrixAutoUpdate===!0&&G.updateMatrix(),M.uvTransform.value.copy(G.matrix))}(o,l):l.isShadowMaterial?(o.color.value.copy(l.color),o.opacity.value=l.opacity):l.isShaderMaterial&&(l.uniformsNeedUpdate=!1)}}}function Xn(s){function t(){return oi===null?Cn:1}function i(ve,Rt){for(let Et=0;Et<ve.length;Et++){const Ot=ve[Et],It=we.getContext(Ot,Rt);if(It!==null)return It}return null}function o(){Cr=new function(ve){function Rt(Ot){if(Et[Ot]!==void 0)return Et[Ot];let It;switch(Ot){case"WEBGL_depth_texture":It=ve.getExtension("WEBGL_depth_texture")||ve.getExtension("MOZ_WEBGL_depth_texture")||ve.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":It=ve.getExtension("EXT_texture_filter_anisotropic")||ve.getExtension("MOZ_EXT_texture_filter_anisotropic")||ve.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":It=ve.getExtension("WEBGL_compressed_texture_s3tc")||ve.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||ve.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":It=ve.getExtension("WEBGL_compressed_texture_pvrtc")||ve.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:It=ve.getExtension(Ot)}return Et[Ot]=It,It}const Et={};return{has:function(Ot){return Rt(Ot)!==null},init:function(Ot){Ot.isWebGL2?Rt("EXT_color_buffer_float"):(Rt("WEBGL_depth_texture"),Rt("OES_texture_float"),Rt("OES_texture_half_float"),Rt("OES_texture_half_float_linear"),Rt("OES_standard_derivatives"),Rt("OES_element_index_uint"),Rt("OES_vertex_array_object"),Rt("ANGLE_instanced_arrays")),Rt("OES_texture_float_linear"),Rt("EXT_color_buffer_half_float")},get:function(Ot){const It=Rt(Ot);return It===null&&console.warn("THREE.WebGLRenderer: "+Ot+" extension not supported."),It}}}(Ct),ts=new function(ve,Rt,Et){function Ot(kr){if(kr==="highp"){if(ve.getShaderPrecisionFormat(ve.VERTEX_SHADER,ve.HIGH_FLOAT).precision>0&&ve.getShaderPrecisionFormat(ve.FRAGMENT_SHADER,ve.HIGH_FLOAT).precision>0)return"highp";kr="mediump"}return kr==="mediump"&&ve.getShaderPrecisionFormat(ve.VERTEX_SHADER,ve.MEDIUM_FLOAT).precision>0&&ve.getShaderPrecisionFormat(ve.FRAGMENT_SHADER,ve.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let It;const En=typeof WebGL2RenderingContext<"u"&&ve instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&ve instanceof WebGL2ComputeRenderingContext;let Kn=Et.precision!==void 0?Et.precision:"highp";const ti=Ot(Kn);ti!==Kn&&(console.warn("THREE.WebGLRenderer:",Kn,"not supported, using",ti,"instead."),Kn=ti);const Jn=Et.logarithmicDepthBuffer===!0,Vn=ve.getParameter(ve.MAX_TEXTURE_IMAGE_UNITS),ai=ve.getParameter(ve.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ci=ve.getParameter(ve.MAX_TEXTURE_SIZE),tr=ve.getParameter(ve.MAX_CUBE_MAP_TEXTURE_SIZE),_r=ve.getParameter(ve.MAX_VERTEX_ATTRIBS),rr=ve.getParameter(ve.MAX_VERTEX_UNIFORM_VECTORS),Ni=ve.getParameter(ve.MAX_VARYING_VECTORS),nr=ve.getParameter(ve.MAX_FRAGMENT_UNIFORM_VECTORS),Bi=ai>0,sr=En||Rt.has("OES_texture_float");return{isWebGL2:En,getMaxAnisotropy:function(){if(It!==void 0)return It;if(Rt.has("EXT_texture_filter_anisotropic")===!0){const kr=Rt.get("EXT_texture_filter_anisotropic");It=ve.getParameter(kr.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else It=0;return It},getMaxPrecision:Ot,precision:Kn,logarithmicDepthBuffer:Jn,maxTextures:Vn,maxVertexTextures:ai,maxTextureSize:ci,maxCubemapSize:tr,maxAttributes:_r,maxVertexUniforms:rr,maxVaryings:Ni,maxFragmentUniforms:nr,vertexTextures:Bi,floatFragmentTextures:sr,floatVertexTextures:Bi&&sr,maxSamples:En?ve.getParameter(ve.MAX_SAMPLES):0}}(Ct,Cr,s),Cr.init(ts),wl=new nn(Ct,Cr,ts),Mr=new function(ve,Rt,Et){function Ot(cn,ds,Rr){const Gs=new Uint8Array(4),Or=ve.createTexture();ve.bindTexture(cn,Or),ve.texParameteri(cn,ve.TEXTURE_MIN_FILTER,ve.NEAREST),ve.texParameteri(cn,ve.TEXTURE_MAG_FILTER,ve.NEAREST);for(let jo=0;jo<Rr;jo++)ve.texImage2D(ds+jo,0,ve.RGBA,1,1,0,ve.RGBA,ve.UNSIGNED_BYTE,Gs);return Or}function It(cn){Ni[cn]!==!0&&(ve.enable(cn),Ni[cn]=!0)}function En(cn){Ni[cn]!==!1&&(ve.disable(cn),Ni[cn]=!1)}function Kn(cn,ds,Rr,Gs,Or,jo,Aa,va){if(cn!==ol){if(kr===!1&&(It(ve.BLEND),kr=!0),cn===Nf)Or=Or||ds,jo=jo||Rr,Aa=Aa||Gs,ds===Eo&&Or===Yl||(ve.blendEquationSeparate(Ku[ds],Ku[Or]),Eo=ds,Yl=Or),Rr===eu&&Gs===tu&&jo===nu&&Aa===iu||(ve.blendFuncSeparate(cf[Rr],cf[Gs],cf[jo],cf[Aa]),eu=Rr,tu=Gs,nu=jo,iu=Aa),Jr=cn,Zp=null;else if(cn!==Jr||va!==Zp){if(Eo===tc&&Yl===tc||(ve.blendEquation(ve.FUNC_ADD),Eo=tc,Yl=tc),va)switch(cn){case ja:ve.blendFuncSeparate(ve.ONE,ve.ONE_MINUS_SRC_ALPHA,ve.ONE,ve.ONE_MINUS_SRC_ALPHA);break;case ad:ve.blendFunc(ve.ONE,ve.ONE);break;case ld:ve.blendFuncSeparate(ve.ZERO,ve.ZERO,ve.ONE_MINUS_SRC_COLOR,ve.ONE_MINUS_SRC_ALPHA);break;case cd:ve.blendFuncSeparate(ve.ZERO,ve.SRC_COLOR,ve.ZERO,ve.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",cn)}else switch(cn){case ja:ve.blendFuncSeparate(ve.SRC_ALPHA,ve.ONE_MINUS_SRC_ALPHA,ve.ONE,ve.ONE_MINUS_SRC_ALPHA);break;case ad:ve.blendFunc(ve.SRC_ALPHA,ve.ONE);break;case ld:ve.blendFunc(ve.ZERO,ve.ONE_MINUS_SRC_COLOR);break;case cd:ve.blendFunc(ve.ZERO,ve.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",cn)}eu=null,tu=null,nu=null,iu=null,Jr=cn,Zp=va}}else kr===!0&&(En(ve.BLEND),kr=!1)}function ti(cn){ru!==cn&&(cn?ve.frontFace(ve.CW):ve.frontFace(ve.CCW),ru=cn)}function Jn(cn){cn!==ia?(It(ve.CULL_FACE),cn!==Vu&&(cn===_o?ve.cullFace(ve.BACK):cn===od?ve.cullFace(ve.FRONT):ve.cullFace(ve.FRONT_AND_BACK))):En(ve.CULL_FACE),Vu=cn}function Vn(cn,ds,Rr){cn?(It(ve.POLYGON_OFFSET_FILL),ju===ds&&Wu===Rr||(ve.polygonOffset(ds,Rr),ju=ds,Wu=Rr)):En(ve.POLYGON_OFFSET_FILL)}function ai(cn){cn===void 0&&(cn=ve.TEXTURE0+mA-1),su!==cn&&(ve.activeTexture(cn),su=cn)}const ci=Et.isWebGL2,tr=new function(){let cn=!1;const ds=new rs;let Rr=null;const Gs=new rs(0,0,0,0);return{setMask:function(Or){Rr===Or||cn||(ve.colorMask(Or,Or,Or,Or),Rr=Or)},setLocked:function(Or){cn=Or},setClear:function(Or,jo,Aa,va,uf){uf===!0&&(Or*=va,jo*=va,Aa*=va),ds.set(Or,jo,Aa,va),Gs.equals(ds)===!1&&(ve.clearColor(Or,jo,Aa,va),Gs.copy(ds))},reset:function(){cn=!1,Rr=null,Gs.set(-1,0,0,0)}}},_r=new function(){let cn=!1,ds=null,Rr=null,Gs=null;return{setTest:function(Or){Or?It(ve.DEPTH_TEST):En(ve.DEPTH_TEST)},setMask:function(Or){ds===Or||cn||(ve.depthMask(Or),ds=Or)},setFunc:function(Or){if(Rr!==Or){if(Or)switch(Or){case pd:ve.depthFunc(ve.NEVER);break;case zf:ve.depthFunc(ve.ALWAYS);break;case nc:ve.depthFunc(ve.LESS);break;case Pl:ve.depthFunc(ve.LEQUAL);break;case Ol:ve.depthFunc(ve.EQUAL);break;case mu:ve.depthFunc(ve.GEQUAL);break;case uh:ve.depthFunc(ve.GREATER);break;case Io:ve.depthFunc(ve.NOTEQUAL);break;default:ve.depthFunc(ve.LEQUAL)}else ve.depthFunc(ve.LEQUAL);Rr=Or}},setLocked:function(Or){cn=Or},setClear:function(Or){Gs!==Or&&(ve.clearDepth(Or),Gs=Or)},reset:function(){cn=!1,ds=null,Rr=null,Gs=null}}},rr=new function(){let cn=!1,ds=null,Rr=null,Gs=null,Or=null,jo=null,Aa=null,va=null,uf=null;return{setTest:function(Lo){cn||(Lo?It(ve.STENCIL_TEST):En(ve.STENCIL_TEST))},setMask:function(Lo){ds===Lo||cn||(ve.stencilMask(Lo),ds=Lo)},setFunc:function(Lo,Xu,Ml){Rr===Lo&&Gs===Xu&&Or===Ml||(ve.stencilFunc(Lo,Xu,Ml),Rr=Lo,Gs=Xu,Or=Ml)},setOp:function(Lo,Xu,Ml){jo===Lo&&Aa===Xu&&va===Ml||(ve.stencilOp(Lo,Xu,Ml),jo=Lo,Aa=Xu,va=Ml)},setLocked:function(Lo){cn=Lo},setClear:function(Lo){uf!==Lo&&(ve.clearStencil(Lo),uf=Lo)},reset:function(){cn=!1,ds=null,Rr=null,Gs=null,Or=null,jo=null,Aa=null,va=null,uf=null}}};let Ni={},nr=null,Bi={},sr=null,kr=!1,Jr=null,Eo=null,eu=null,tu=null,Yl=null,nu=null,iu=null,Zp=!1,ru=null,Vu=null,Qu=null,ju=null,Wu=null;const mA=ve.getParameter(ve.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $p=!1,af=0;const lf=ve.getParameter(ve.VERSION);lf.indexOf("WebGL")!==-1?(af=parseFloat(/^WebGL (\d)/.exec(lf)[1]),$p=af>=1):lf.indexOf("OpenGL ES")!==-1&&(af=parseFloat(/^OpenGL ES (\d)/.exec(lf)[1]),$p=af>=2);let su=null,Qh={};const em=new rs(0,0,ve.canvas.width,ve.canvas.height),tm=new rs(0,0,ve.canvas.width,ve.canvas.height),nm={};nm[ve.TEXTURE_2D]=Ot(ve.TEXTURE_2D,ve.TEXTURE_2D,1),nm[ve.TEXTURE_CUBE_MAP]=Ot(ve.TEXTURE_CUBE_MAP,ve.TEXTURE_CUBE_MAP_POSITIVE_X,6),tr.setClear(0,0,0,1),_r.setClear(1),rr.setClear(0),It(ve.DEPTH_TEST),_r.setFunc(Pl),ti(!1),Jn(_o),It(ve.CULL_FACE),Kn(ol);const Ku={[tc]:ve.FUNC_ADD,[kf]:ve.FUNC_SUBTRACT,[Uf]:ve.FUNC_REVERSE_SUBTRACT};if(ci)Ku[ud]=ve.MIN,Ku[hd]=ve.MAX;else{const cn=Rt.get("EXT_blend_minmax");cn!==null&&(Ku[ud]=cn.MIN_EXT,Ku[hd]=cn.MAX_EXT)}const cf={[Gf]:ve.ZERO,[lh]:ve.ONE,[dd]:ve.SRC_COLOR,[fd]:ve.SRC_ALPHA,[ch]:ve.SRC_ALPHA_SATURATE,[On]:ve.DST_COLOR,[Ss]:ve.DST_ALPHA,[pu]:ve.ONE_MINUS_SRC_COLOR,[La]:ve.ONE_MINUS_SRC_ALPHA,[Fo]:ve.ONE_MINUS_DST_COLOR,[Hf]:ve.ONE_MINUS_DST_ALPHA};return{buffers:{color:tr,depth:_r,stencil:rr},enable:It,disable:En,bindFramebuffer:function(cn,ds){ds===null&&nr!==null&&(ds=nr),Bi[cn]!==ds&&(ve.bindFramebuffer(cn,ds),Bi[cn]=ds)},bindXRFramebuffer:function(cn){cn!==nr&&(ve.bindFramebuffer(ve.FRAMEBUFFER,cn),nr=cn)},useProgram:function(cn){return sr!==cn&&(ve.useProgram(cn),sr=cn,!0)},setBlending:Kn,setMaterial:function(cn,ds){cn.side===fu?En(ve.CULL_FACE):It(ve.CULL_FACE);let Rr=cn.side===Js;ds&&(Rr=!Rr),ti(Rr),cn.blending===ja&&cn.transparent===!1?Kn(ol):Kn(cn.blending,cn.blendEquation,cn.blendSrc,cn.blendDst,cn.blendEquationAlpha,cn.blendSrcAlpha,cn.blendDstAlpha,cn.premultipliedAlpha),_r.setFunc(cn.depthFunc),_r.setTest(cn.depthTest),_r.setMask(cn.depthWrite),tr.setMask(cn.colorWrite);const Gs=cn.stencilWrite;rr.setTest(Gs),Gs&&(rr.setMask(cn.stencilWriteMask),rr.setFunc(cn.stencilFunc,cn.stencilRef,cn.stencilFuncMask),rr.setOp(cn.stencilFail,cn.stencilZFail,cn.stencilZPass)),Vn(cn.polygonOffset,cn.polygonOffsetFactor,cn.polygonOffsetUnits),cn.alphaToCoverage===!0?It(ve.SAMPLE_ALPHA_TO_COVERAGE):En(ve.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ti,setCullFace:Jn,setLineWidth:function(cn){cn!==Qu&&($p&&ve.lineWidth(cn),Qu=cn)},setPolygonOffset:Vn,setScissorTest:function(cn){cn?It(ve.SCISSOR_TEST):En(ve.SCISSOR_TEST)},activeTexture:ai,bindTexture:function(cn,ds){su===null&&ai();let Rr=Qh[su];Rr===void 0&&(Rr={type:void 0,texture:void 0},Qh[su]=Rr),Rr.type===cn&&Rr.texture===ds||(ve.bindTexture(cn,ds||nm[cn]),Rr.type=cn,Rr.texture=ds)},unbindTexture:function(){const cn=Qh[su];cn!==void 0&&cn.type!==void 0&&(ve.bindTexture(cn.type,null),cn.type=void 0,cn.texture=void 0)},compressedTexImage2D:function(){try{ve.compressedTexImage2D.apply(ve,arguments)}catch(cn){console.error("THREE.WebGLState:",cn)}},texImage2D:function(){try{ve.texImage2D.apply(ve,arguments)}catch(cn){console.error("THREE.WebGLState:",cn)}},texImage3D:function(){try{ve.texImage3D.apply(ve,arguments)}catch(cn){console.error("THREE.WebGLState:",cn)}},scissor:function(cn){em.equals(cn)===!1&&(ve.scissor(cn.x,cn.y,cn.z,cn.w),em.copy(cn))},viewport:function(cn){tm.equals(cn)===!1&&(ve.viewport(cn.x,cn.y,cn.z,cn.w),tm.copy(cn))},reset:function(){ve.disable(ve.BLEND),ve.disable(ve.CULL_FACE),ve.disable(ve.DEPTH_TEST),ve.disable(ve.POLYGON_OFFSET_FILL),ve.disable(ve.SCISSOR_TEST),ve.disable(ve.STENCIL_TEST),ve.disable(ve.SAMPLE_ALPHA_TO_COVERAGE),ve.blendEquation(ve.FUNC_ADD),ve.blendFunc(ve.ONE,ve.ZERO),ve.blendFuncSeparate(ve.ONE,ve.ZERO,ve.ONE,ve.ZERO),ve.colorMask(!0,!0,!0,!0),ve.clearColor(0,0,0,0),ve.depthMask(!0),ve.depthFunc(ve.LESS),ve.clearDepth(1),ve.stencilMask(4294967295),ve.stencilFunc(ve.ALWAYS,0,4294967295),ve.stencilOp(ve.KEEP,ve.KEEP,ve.KEEP),ve.clearStencil(0),ve.cullFace(ve.BACK),ve.frontFace(ve.CCW),ve.polygonOffset(0,0),ve.activeTexture(ve.TEXTURE0),ve.bindFramebuffer(ve.FRAMEBUFFER,null),ci===!0&&(ve.bindFramebuffer(ve.DRAW_FRAMEBUFFER,null),ve.bindFramebuffer(ve.READ_FRAMEBUFFER,null)),ve.useProgram(null),ve.lineWidth(1),ve.scissor(0,0,ve.canvas.width,ve.canvas.height),ve.viewport(0,0,ve.canvas.width,ve.canvas.height),Ni={},su=null,Qh={},nr=null,Bi={},sr=null,kr=!1,Jr=null,Eo=null,eu=null,tu=null,Yl=null,nu=null,iu=null,Zp=!1,ru=null,Vu=null,Qu=null,ju=null,Wu=null,em.set(0,0,ve.canvas.width,ve.canvas.height),tm.set(0,0,ve.canvas.width,ve.canvas.height),tr.reset(),_r.reset(),rr.reset()}}}(Ct,Cr,ts),eo=new function(ve){const Rt={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:Rt,programs:null,autoReset:!0,reset:function(){Rt.frame++,Rt.calls=0,Rt.triangles=0,Rt.points=0,Rt.lines=0},update:function(Et,Ot,It){switch(Rt.calls++,Ot){case ve.TRIANGLES:Rt.triangles+=It*(Et/3);break;case ve.LINES:Rt.lines+=It*(Et/2);break;case ve.LINE_STRIP:Rt.lines+=It*(Et-1);break;case ve.LINE_LOOP:Rt.lines+=It*Et;break;case ve.POINTS:Rt.points+=It*Et;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",Ot)}}}}(Ct),vs=new function(){let ve=new WeakMap;return{get:function(Rt){let Et=ve.get(Rt);return Et===void 0&&(Et={},ve.set(Rt,Et)),Et},remove:function(Rt){ve.delete(Rt)},update:function(Rt,Et,Ot){ve.get(Rt)[Et]=Ot},dispose:function(){ve=new WeakMap}}},Bo=new _t(Ct,Cr,Mr,vs,ts,wl,eo),El=new function(ve){function Rt(It,En){return En===fh?It.mapping=Da:En===js&&(It.mapping=rc),It}function Et(It){const En=It.target;En.removeEventListener("dispose",Et);const Kn=Ot.get(En);Kn!==void 0&&(Ot.delete(En),Kn.dispose())}let Ot=new WeakMap;return{get:function(It){if(It&&It.isTexture){const En=It.mapping;if(En===fh||En===js){if(Ot.has(It))return Rt(Ot.get(It).texture,It.mapping);{const Kn=It.image;if(Kn&&Kn.height>0){const ti=ve.getRenderTarget(),Jn=new up(Kn.height/2);return Jn.fromEquirectangularTexture(ve,It),Ot.set(It,Jn),ve.setRenderTarget(ti),It.addEventListener("dispose",Et),Rt(Jn.texture,It.mapping)}return null}}}return It},dispose:function(){Ot=new WeakMap}}}(en),bl=new z(Ct,ts),Ma=new X(Ct,Cr,bl,ts),qp=new function(ve,Rt,Et,Ot){function It(Jn){const Vn=Jn.target;Vn.index!==null&&Rt.remove(Vn.index);for(const ci in Vn.attributes)Rt.remove(Vn.attributes[ci]);Vn.removeEventListener("dispose",It),delete Kn[Vn.id];const ai=ti.get(Vn);ai&&(Rt.remove(ai),ti.delete(Vn)),Ot.releaseStatesOfGeometry(Vn),Vn.isInstancedBufferGeometry===!0&&delete Vn._maxInstanceCount,Et.memory.geometries--}function En(Jn){const Vn=[],ai=Jn.index,ci=Jn.attributes.position;let tr=0;if(ai!==null){const Ni=ai.array;tr=ai.version;for(let nr=0,Bi=Ni.length;nr<Bi;nr+=3){const sr=Ni[nr+0],kr=Ni[nr+1],Jr=Ni[nr+2];Vn.push(sr,kr,kr,Jr,Jr,sr)}}else{const Ni=ci.array;tr=ci.version;for(let nr=0,Bi=Ni.length/3-1;nr<Bi;nr+=3){const sr=nr+0,kr=nr+1,Jr=nr+2;Vn.push(sr,kr,kr,Jr,Jr,sr)}}const _r=new(J(Vn)>65535?R:_)(Vn,1);_r.version=tr;const rr=ti.get(Jn);rr&&Rt.remove(rr),ti.set(Jn,_r)}const Kn={},ti=new WeakMap;return{get:function(Jn,Vn){return Kn[Vn.id]===!0||(Vn.addEventListener("dispose",It),Kn[Vn.id]=!0,Et.memory.geometries++),Vn},update:function(Jn){const Vn=Jn.attributes;for(const ci in Vn)Rt.update(Vn[ci],ve.ARRAY_BUFFER);const ai=Jn.morphAttributes;for(const ci in ai){const tr=ai[ci];for(let _r=0,rr=tr.length;_r<rr;_r++)Rt.update(tr[_r],ve.ARRAY_BUFFER)}},getWireframeAttribute:function(Jn){const Vn=ti.get(Jn);if(Vn){const ai=Jn.index;ai!==null&&Vn.version<ai.version&&En(Jn)}else En(Jn);return ti.get(Jn)}}}(Ct,bl,eo,Ma),$a=new function(ve,Rt,Et,Ot){function It(Kn){const ti=Kn.target;ti.removeEventListener("dispose",It),Et.remove(ti.instanceMatrix),ti.instanceColor!==null&&Et.remove(ti.instanceColor)}let En=new WeakMap;return{update:function(Kn){const ti=Ot.render.frame,Jn=Kn.geometry,Vn=Rt.get(Kn,Jn);return En.get(Vn)!==ti&&(Rt.update(Vn),En.set(Vn,ti)),Kn.isInstancedMesh&&(Kn.hasEventListener("dispose",It)===!1&&Kn.addEventListener("dispose",It),Et.update(Kn.instanceMatrix,ve.ARRAY_BUFFER),Kn.instanceColor!==null&&Et.update(Kn.instanceColor,ve.ARRAY_BUFFER)),Vn},dispose:function(){En=new WeakMap}}}(Ct,qp,bl,eo),dA=new function(ve){const Rt={},Et=new Float32Array(8),Ot=[];for(let It=0;It<8;It++)Ot[It]=[It,0];return{update:function(It,En,Kn,ti){const Jn=It.morphTargetInfluences,Vn=Jn===void 0?0:Jn.length;let ai=Rt[En.id];if(ai===void 0){ai=[];for(let Ni=0;Ni<Vn;Ni++)ai[Ni]=[Ni,0];Rt[En.id]=ai}for(let Ni=0;Ni<Vn;Ni++){const nr=ai[Ni];nr[0]=Ni,nr[1]=Jn[Ni]}ai.sort(Ae);for(let Ni=0;Ni<8;Ni++)Ni<Vn&&ai[Ni][1]?(Ot[Ni][0]=ai[Ni][0],Ot[Ni][1]=ai[Ni][1]):(Ot[Ni][0]=Number.MAX_SAFE_INTEGER,Ot[Ni][1]=0);Ot.sort(fe);const ci=Kn.morphTargets&&En.morphAttributes.position,tr=Kn.morphNormals&&En.morphAttributes.normal;let _r=0;for(let Ni=0;Ni<8;Ni++){const nr=Ot[Ni],Bi=nr[0],sr=nr[1];Bi!==Number.MAX_SAFE_INTEGER&&sr?(ci&&En.getAttribute("morphTarget"+Ni)!==ci[Bi]&&En.setAttribute("morphTarget"+Ni,ci[Bi]),tr&&En.getAttribute("morphNormal"+Ni)!==tr[Bi]&&En.setAttribute("morphNormal"+Ni,tr[Bi]),Et[Ni]=sr,_r+=sr):(ci&&En.hasAttribute("morphTarget"+Ni)===!0&&En.deleteAttribute("morphTarget"+Ni),tr&&En.hasAttribute("morphNormal"+Ni)===!0&&En.deleteAttribute("morphNormal"+Ni),Et[Ni]=0)}const rr=En.morphTargetsRelative?1:1-_r;ti.getUniforms().setValue(ve,"morphTargetBaseInfluence",rr),ti.getUniforms().setValue(ve,"morphTargetInfluences",Et)}}}(Ct),Cc=new function(ve){function Rt(){ai.value!==It&&(ai.value=It,ai.needsUpdate=En>0),Ot.numPlanes=En,Ot.numIntersection=0}function Et(ci,tr,_r,rr){const Ni=ci!==null?ci.length:0;let nr=null;if(Ni!==0){if(nr=ai.value,rr!==!0||nr===null){const Bi=_r+4*Ni,sr=tr.matrixWorldInverse;Vn.getNormalMatrix(sr),(nr===null||nr.length<Bi)&&(nr=new Float32Array(Bi));for(let kr=0,Jr=_r;kr!==Ni;++kr,Jr+=4)Jn.copy(ci[kr]).applyMatrix4(sr,Vn),Jn.normal.toArray(nr,Jr),nr[Jr+3]=Jn.constant}ai.value=nr,ai.needsUpdate=!0}return Ot.numPlanes=Ni,Ot.numIntersection=0,nr}const Ot=this;let It=null,En=0,Kn=!1,ti=!1;const Jn=new hl,Vn=new ls,ai={value:null,needsUpdate:!1};this.uniform=ai,this.numPlanes=0,this.numIntersection=0,this.init=function(ci,tr,_r){const rr=ci.length!==0||tr||En!==0||Kn;return Kn=tr,It=Et(ci,_r,0),En=ci.length,rr},this.beginShadows=function(){ti=!0,Et(null)},this.endShadows=function(){ti=!1,Rt()},this.setState=function(ci,tr,_r){const rr=ci.clippingPlanes,Ni=ci.clipIntersection,nr=ci.clipShadows,Bi=ve.get(ci);if(!Kn||rr===null||rr.length===0||ti&&!nr)ti?Et(null):Rt();else{const sr=ti?0:En,kr=4*sr;let Jr=Bi.clippingState||null;ai.value=Jr,Jr=Et(rr,tr,kr,_r);for(let Eo=0;Eo!==kr;++Eo)Jr[Eo]=It[Eo];Bi.clippingState=Jr,this.numIntersection=Ni?this.numPlanes:0,this.numPlanes+=sr}}}(vs),Hu=new Dr(en,El,Cr,ts,Ma,Cc),Jp=new Un(vs),Xl=new function(ve){let Rt=new WeakMap;return{get:function(Et,Ot){let It;return Rt.has(Et)===!1?(It=new ar(ve),Rt.set(Et,[It])):Ot>=Rt.get(Et).length?(It=new ar(ve),Rt.get(Et).push(It)):It=Rt.get(Et)[Ot],It},dispose:function(){Rt=new WeakMap}}}(vs),Zc=new function(ve,Rt){let Et=new WeakMap;return{get:function(Ot,It=0){let En;return Et.has(Ot)===!1?(En=new Qe(ve,Rt),Et.set(Ot,[En])):It>=Et.get(Ot).length?(En=new Qe(ve,Rt),Et.get(Ot).push(En)):En=Et.get(Ot)[It],En},dispose:function(){Et=new WeakMap}}}(Cr,ts),$c=new function(ve,Rt,Et,Ot,It){function En(_r,rr){Et.buffers.color.setClear(_r.r,_r.g,_r.b,rr,It)}const Kn=new Fi(0);let ti,Jn,Vn=0,ai=null,ci=0,tr=null;return{getClearColor:function(){return Kn},setClearColor:function(_r,rr=1){Kn.set(_r),En(Kn,Vn=rr)},getClearAlpha:function(){return Vn},setClearAlpha:function(_r){En(Kn,Vn=_r)},render:function(_r,rr,Ni,nr){let Bi=rr.isScene===!0?rr.background:null;Bi&&Bi.isTexture&&(Bi=Rt.get(Bi));const sr=ve.xr,kr=sr.getSession&&sr.getSession();kr&&kr.environmentBlendMode==="additive"&&(Bi=null),Bi===null?En(Kn,Vn):Bi&&Bi.isColor&&(En(Bi,1),nr=!0),(ve.autoClear||nr)&&ve.clear(ve.autoClearColor,ve.autoClearDepth,ve.autoClearStencil),Bi&&(Bi.isCubeTexture||Bi.mapping===Zr)?(Jn===void 0&&((Jn=new te(new Cu(1,1,1),new V({name:"BackgroundCubeMaterial",uniforms:xe(pl.cube.uniforms),vertexShader:pl.cube.vertexShader,fragmentShader:pl.cube.fragmentShader,side:Js,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Jn.geometry.deleteAttribute("uv"),Jn.onBeforeRender=function(Jr,Eo,eu){this.matrixWorld.copyPosition(eu.matrixWorld)},Object.defineProperty(Jn.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),Ot.update(Jn)),Jn.material.uniforms.envMap.value=Bi,Jn.material.uniforms.flipEnvMap.value=Bi.isCubeTexture&&Bi._needsFlipEnvMap?-1:1,ai===Bi&&ci===Bi.version&&tr===ve.toneMapping||(Jn.material.needsUpdate=!0,ai=Bi,ci=Bi.version,tr=ve.toneMapping),_r.unshift(Jn,Jn.geometry,Jn.material,0,0,null)):Bi&&Bi.isTexture&&(ti===void 0&&((ti=new te(new Cd(2,2),new V({name:"BackgroundMaterial",uniforms:xe(pl.background.uniforms),vertexShader:pl.background.vertexShader,fragmentShader:pl.background.fragmentShader,side:Os,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(ti.material,"map",{get:function(){return this.uniforms.t2D.value}}),Ot.update(ti)),ti.material.uniforms.t2D.value=Bi,Bi.matrixAutoUpdate===!0&&Bi.updateMatrix(),ti.material.uniforms.uvTransform.value.copy(Bi.matrix),ai===Bi&&ci===Bi.version&&tr===ve.toneMapping||(ti.material.needsUpdate=!0,ai=Bi,ci=Bi.version,tr=ve.toneMapping),_r.unshift(ti,ti.geometry,ti.material,0,0,null))}}}(en,El,Mr,$a,pt),_l=new ut(en,$a,ts),fA=new function(ve,Rt,Et,Ot){const It=Ot.isWebGL2;let En;this.setMode=function(Kn){En=Kn},this.render=function(Kn,ti){ve.drawArrays(En,Kn,ti),Et.update(ti,En,1)},this.renderInstances=function(Kn,ti,Jn){if(Jn===0)return;let Vn,ai;if(It)Vn=ve,ai="drawArraysInstanced";else if(Vn=Rt.get("ANGLE_instanced_arrays"),ai="drawArraysInstancedANGLE",Vn===null)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Vn[ai](En,Kn,ti,Jn),Et.update(ti,En,Jn)}}(Ct,Cr,eo,ts),pA=new function(ve,Rt,Et,Ot){const It=Ot.isWebGL2;let En,Kn,ti;this.setMode=function(Jn){En=Jn},this.setIndex=function(Jn){Kn=Jn.type,ti=Jn.bytesPerElement},this.render=function(Jn,Vn){ve.drawElements(En,Vn,Kn,Jn*ti),Et.update(Vn,En,1)},this.renderInstances=function(Jn,Vn,ai){if(ai===0)return;let ci,tr;if(It)ci=ve,tr="drawElementsInstanced";else if(ci=Rt.get("ANGLE_instanced_arrays"),tr="drawElementsInstancedANGLE",ci===null)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");ci[tr](En,Vn,Kn,Jn*ti,ai),Et.update(Vn,En,ai)}}(Ct,Cr,eo,ts),eo.programs=Hu.programs,en.capabilities=ts,en.extensions=Cr,en.properties=vs,en.renderLists=Xl,en.shadowMap=_l,en.state=Mr,en.info=eo}function l(ve){ve.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Wn=!0}function f(){console.log("THREE.WebGLRenderer: Context Restored."),Wn=!1;const ve=eo.autoReset,Rt=_l.enabled,Et=_l.autoUpdate,Ot=_l.needsUpdate,It=_l.type;o(),eo.autoReset=ve,_l.enabled=Rt,_l.autoUpdate=Et,_l.needsUpdate=Ot,_l.type=It}function B(ve){const Rt=ve.target;Rt.removeEventListener("dispose",B),function(Et){(function(Ot){const It=vs.get(Ot).programs;It!==void 0&&It.forEach(function(En){Hu.releaseProgram(En)})})(Et),vs.remove(Et)}(Rt)}function M(){zu.stop()}function D(){zu.start()}function G(ve,Rt,Et,Ot){if(ve.visible===!1)return;if(ve.layers.test(Rt.layers)){if(ve.isGroup)Et=ve.renderOrder;else if(ve.isLOD)ve.autoUpdate===!0&&ve.update(Rt);else if(ve.isLight)Ht.pushLight(ve),ve.castShadow&&Ht.pushShadow(ve);else if(ve.isSprite){if(!ve.frustumCulled||Ii.intersectsSprite(ve)){Ot&&br.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(Ri);const En=$a.update(ve),Kn=ve.material;Kn.visible&&gt.push(ve,En,Kn,Et,br.z,null)}}else if(ve.isImmediateRenderObject)Ot&&br.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(Ri),gt.push(ve,null,ve.material,Et,br.z,null);else if((ve.isMesh||ve.isLine||ve.isPoints)&&(ve.isSkinnedMesh&&ve.skeleton.frame!==eo.render.frame&&(ve.skeleton.update(),ve.skeleton.frame=eo.render.frame),!ve.frustumCulled||Ii.intersectsObject(ve))){Ot&&br.setFromMatrixPosition(ve.matrixWorld).applyMatrix4(Ri);const En=$a.update(ve),Kn=ve.material;if(Array.isArray(Kn)){const ti=En.groups;for(let Jn=0,Vn=ti.length;Jn<Vn;Jn++){const ai=ti[Jn],ci=Kn[ai.materialIndex];ci&&ci.visible&&gt.push(ve,En,ci,Et,br.z,ai)}}else Kn.visible&&gt.push(ve,En,Kn,Et,br.z,null)}}const It=ve.children;for(let En=0,Kn=It.length;En<Kn;En++)G(It[En],Rt,Et,Ot)}function $(ve,Rt,Et){const Ot=Rt.isScene===!0?Rt.overrideMaterial:null;for(let It=0,En=ve.length;It<En;It++){const Kn=ve[It],ti=Kn.object,Jn=Kn.geometry,Vn=Ot===null?Kn.material:Ot,ai=Kn.group;if(Et.isArrayCamera){const ci=Et.cameras;for(let tr=0,_r=ci.length;tr<_r;tr++){const rr=ci[tr];ti.layers.test(rr.layers)&&(Mr.viewport(Ji.copy(rr.viewport)),Ht.setupLightsView(rr),ie(ti,Rt,rr,Jn,Vn,ai))}}else ie(ti,Rt,Et,Jn,Vn,ai)}}function ie(ve,Rt,Et,Ot,It,En){if(ve.onBeforeRender(en,Rt,Et,Ot,It,En),ve.modelViewMatrix.multiplyMatrices(Et.matrixWorldInverse,ve.matrixWorld),ve.normalMatrix.getNormalMatrix(ve.modelViewMatrix),ve.isImmediateRenderObject){const Kn=ye(Et,Rt,It,ve);Mr.setMaterial(It),Ma.reset(),function(ti,Jn){ti.render(function(Vn){en.renderBufferImmediate(Vn,Jn)})}(ve,Kn)}else en.renderBufferDirect(Et,Rt,Ot,It,ve,En);ve.onAfterRender(en,Rt,Et,Ot,It,En)}function oe(ve,Rt,Et){Rt.isScene!==!0&&(Rt=gs);const Ot=vs.get(ve),It=Ht.state.lights,En=Ht.state.shadowsArray,Kn=It.state.version,ti=Hu.getParameters(ve,It.state,En,Rt,Et),Jn=Hu.getProgramCacheKey(ti);let Vn=Ot.programs;Ot.environment=ve.isMeshStandardMaterial?Rt.environment:null,Ot.fog=Rt.fog,Ot.envMap=El.get(ve.envMap||Ot.environment),Vn===void 0&&(ve.addEventListener("dispose",B),Vn=new Map,Ot.programs=Vn);let ai=Vn.get(Jn);if(ai!==void 0){if(Ot.currentProgram===ai&&Ot.lightsStateVersion===Kn)return he(ve,ti),ai}else ti.uniforms=Hu.getUniforms(ve),ve.onBeforeCompile(ti,en),ai=Hu.acquireProgram(ti,Jn),Vn.set(Jn,ai),Ot.uniforms=ti.uniforms;const ci=Ot.uniforms;(ve.isShaderMaterial||ve.isRawShaderMaterial)&&ve.clipping!==!0||(ci.clippingPlanes=Cc.uniform),he(ve,ti),Ot.needsLights=function(rr){return rr.isMeshLambertMaterial||rr.isMeshToonMaterial||rr.isMeshPhongMaterial||rr.isMeshStandardMaterial||rr.isShadowMaterial||rr.isShaderMaterial&&rr.lights===!0}(ve),Ot.lightsStateVersion=Kn,Ot.needsLights&&(ci.ambientLightColor.value=It.state.ambient,ci.lightProbe.value=It.state.probe,ci.directionalLights.value=It.state.directional,ci.directionalLightShadows.value=It.state.directionalShadow,ci.spotLights.value=It.state.spot,ci.spotLightShadows.value=It.state.spotShadow,ci.rectAreaLights.value=It.state.rectArea,ci.ltc_1.value=It.state.rectAreaLTC1,ci.ltc_2.value=It.state.rectAreaLTC2,ci.pointLights.value=It.state.point,ci.pointLightShadows.value=It.state.pointShadow,ci.hemisphereLights.value=It.state.hemi,ci.directionalShadowMap.value=It.state.directionalShadowMap,ci.directionalShadowMatrix.value=It.state.directionalShadowMatrix,ci.spotShadowMap.value=It.state.spotShadowMap,ci.spotShadowMatrix.value=It.state.spotShadowMatrix,ci.pointShadowMap.value=It.state.pointShadowMap,ci.pointShadowMatrix.value=It.state.pointShadowMatrix);const tr=ai.getUniforms(),_r=In.seqWithValue(tr.seq,ci);return Ot.currentProgram=ai,Ot.uniformsList=_r,ai}function he(ve,Rt){const Et=vs.get(ve);Et.outputEncoding=Rt.outputEncoding,Et.instancing=Rt.instancing,Et.numClippingPlanes=Rt.numClippingPlanes,Et.numIntersection=Rt.numClipIntersection,Et.vertexAlphas=Rt.vertexAlphas}function ye(ve,Rt,Et,Ot){Rt.isScene!==!0&&(Rt=gs),Bo.resetTextureUnits();const It=Rt.fog,En=Et.isMeshStandardMaterial?Rt.environment:null,Kn=oi===null?en.outputEncoding:oi.texture.encoding,ti=El.get(Et.envMap||En),Jn=Et.vertexColors===!0&&Ot.geometry.attributes.color&&Ot.geometry.attributes.color.itemSize===4,Vn=vs.get(Et),ai=Ht.state.lights;if(vi===!0&&(pr===!0||ve!==$i)){const sr=ve===$i&&Et.id===qn;Cc.setState(Et,ve,sr)}let ci=!1;Et.version===Vn.__version?Vn.needsLights&&Vn.lightsStateVersion!==ai.state.version||Vn.outputEncoding!==Kn||Ot.isInstancedMesh&&Vn.instancing===!1?ci=!0:Ot.isInstancedMesh||Vn.instancing!==!0?Vn.envMap!==ti||Et.fog&&Vn.fog!==It?ci=!0:Vn.numClippingPlanes===void 0||Vn.numClippingPlanes===Cc.numPlanes&&Vn.numIntersection===Cc.numIntersection?Vn.vertexAlphas!==Jn&&(ci=!0):ci=!0:ci=!0:(ci=!0,Vn.__version=Et.version);let tr=Vn.currentProgram;ci===!0&&(tr=oe(Et,Rt,Ot));let _r=!1,rr=!1,Ni=!1;const nr=tr.getUniforms(),Bi=Vn.uniforms;if(Mr.useProgram(tr.program)&&(_r=!0,rr=!0,Ni=!0),Et.id!==qn&&(qn=Et.id,rr=!0),_r||$i!==ve){if(nr.setValue(Ct,"projectionMatrix",ve.projectionMatrix),ts.logarithmicDepthBuffer&&nr.setValue(Ct,"logDepthBufFC",2/(Math.log(ve.far+1)/Math.LN2)),$i!==ve&&($i=ve,rr=!0,Ni=!0),Et.isShaderMaterial||Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshStandardMaterial||Et.envMap){const sr=nr.map.cameraPosition;sr!==void 0&&sr.setValue(Ct,br.setFromMatrixPosition(ve.matrixWorld))}(Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshLambertMaterial||Et.isMeshBasicMaterial||Et.isMeshStandardMaterial||Et.isShaderMaterial)&&nr.setValue(Ct,"isOrthographic",ve.isOrthographicCamera===!0),(Et.isMeshPhongMaterial||Et.isMeshToonMaterial||Et.isMeshLambertMaterial||Et.isMeshBasicMaterial||Et.isMeshStandardMaterial||Et.isShaderMaterial||Et.isShadowMaterial||Et.skinning)&&nr.setValue(Ct,"viewMatrix",ve.matrixWorldInverse)}if(Et.skinning){nr.setOptional(Ct,Ot,"bindMatrix"),nr.setOptional(Ct,Ot,"bindMatrixInverse");const sr=Ot.skeleton;if(sr){const kr=sr.bones;if(ts.floatVertexTextures){if(sr.boneTexture===null){let Jr=Math.sqrt(4*kr.length);Jr=qi.ceilPowerOfTwo(Jr),Jr=Math.max(Jr,4);const Eo=new Float32Array(Jr*Jr*4);Eo.set(sr.boneMatrices);const eu=new Bh(Eo,Jr,Jr,ko,ra);sr.boneMatrices=Eo,sr.boneTexture=eu,sr.boneTextureSize=Jr}nr.setValue(Ct,"boneTexture",sr.boneTexture,Bo),nr.setValue(Ct,"boneTextureSize",sr.boneTextureSize)}else nr.setOptional(Ct,sr,"boneMatrices")}}return(rr||Vn.receiveShadow!==Ot.receiveShadow)&&(Vn.receiveShadow=Ot.receiveShadow,nr.setValue(Ct,"receiveShadow",Ot.receiveShadow)),rr&&(nr.setValue(Ct,"toneMappingExposure",en.toneMappingExposure),Vn.needsLights&&function(sr,kr){sr.ambientLightColor.needsUpdate=kr,sr.lightProbe.needsUpdate=kr,sr.directionalLights.needsUpdate=kr,sr.directionalLightShadows.needsUpdate=kr,sr.pointLights.needsUpdate=kr,sr.pointLightShadows.needsUpdate=kr,sr.spotLights.needsUpdate=kr,sr.spotLightShadows.needsUpdate=kr,sr.rectAreaLights.needsUpdate=kr,sr.hemisphereLights.needsUpdate=kr}(Bi,Ni),It&&Et.fog&&Jp.refreshFogUniforms(Bi,It),Jp.refreshMaterialUniforms(Bi,Et,Cn,Yn),In.upload(Ct,Vn.uniformsList,Bi,Bo)),Et.isShaderMaterial&&Et.uniformsNeedUpdate===!0&&(In.upload(Ct,Vn.uniformsList,Bi,Bo),Et.uniformsNeedUpdate=!1),Et.isSpriteMaterial&&nr.setValue(Ct,"center",Ot.center),nr.setValue(Ct,"modelViewMatrix",Ot.modelViewMatrix),nr.setValue(Ct,"normalMatrix",Ot.normalMatrix),nr.setValue(Ct,"modelMatrix",Ot.matrixWorld),tr}const we=(s=s||{}).canvas!==void 0?s.canvas:function(){const ve=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return ve.style.display="block",ve}(),be=s.context!==void 0?s.context:null,ke=s.alpha!==void 0&&s.alpha,Xe=s.depth===void 0||s.depth,it=s.stencil===void 0||s.stencil,lt=s.antialias!==void 0&&s.antialias,pt=s.premultipliedAlpha===void 0||s.premultipliedAlpha,mt=s.preserveDrawingBuffer!==void 0&&s.preserveDrawingBuffer,ot=s.powerPreference!==void 0?s.powerPreference:"default",kt=s.failIfMajorPerformanceCaveat!==void 0&&s.failIfMajorPerformanceCaveat;let gt=null,Ht=null;const Zt=[],Qt=[];this.domElement=we,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=lo,this.physicallyCorrectLights=!1,this.toneMapping=Wa,this.toneMappingExposure=1;const en=this;let Wn=!1,ii=0,lr=0,oi=null,qn=-1,$i=null;const Ji=new rs,Xr=new rs;let Tt=null,Mt=we.width,Yn=we.height,Cn=1,zn=null,hr=null;const Fn=new rs(0,0,Mt,Yn),jn=new rs(0,0,Mt,Yn);let Sn=!1;const Ii=new wd;let vi=!1,pr=!1;const Ri=new ir,br=new Je,gs={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ct=be;try{const ve={alpha:ke,depth:Xe,stencil:it,antialias:lt,premultipliedAlpha:pt,preserveDrawingBuffer:mt,powerPreference:ot,failIfMajorPerformanceCaveat:kt};if(we.addEventListener("webglcontextlost",l,!1),we.addEventListener("webglcontextrestored",f,!1),Ct===null){const Rt=["webgl2","webgl","experimental-webgl"];if(en.isWebGL1Renderer===!0&&Rt.shift(),(Ct=i(Rt,ve))===null)throw i(Rt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Ct.getShaderPrecisionFormat===void 0&&(Ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ve){throw console.error("THREE.WebGLRenderer: "+ve.message),ve}let Cr,ts,Mr,eo,vs,Bo,El,bl,qp,$a,Hu,Jp,Xl,Zc,Cc,_l,$c,dA,fA,pA,wl,Ma;o();const Cl=new mn(en,Ct);this.xr=Cl,this.getContext=function(){return Ct},this.getContextAttributes=function(){return Ct.getContextAttributes()},this.forceContextLoss=function(){const ve=Cr.get("WEBGL_lose_context");ve&&ve.loseContext()},this.forceContextRestore=function(){const ve=Cr.get("WEBGL_lose_context");ve&&ve.restoreContext()},this.getPixelRatio=function(){return Cn},this.setPixelRatio=function(ve){ve!==void 0&&(Cn=ve,this.setSize(Mt,Yn,!1))},this.getSize=function(ve){return ve===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),ve=new Qn),ve.set(Mt,Yn)},this.setSize=function(ve,Rt,Et){Cl.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Mt=ve,Yn=Rt,we.width=Math.floor(ve*Cn),we.height=Math.floor(Rt*Cn),Et!==!1&&(we.style.width=ve+"px",we.style.height=Rt+"px"),this.setViewport(0,0,ve,Rt))},this.getDrawingBufferSize=function(ve){return ve===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),ve=new Qn),ve.set(Mt*Cn,Yn*Cn).floor()},this.setDrawingBufferSize=function(ve,Rt,Et){Mt=ve,Yn=Rt,Cn=Et,we.width=Math.floor(ve*Et),we.height=Math.floor(Rt*Et),this.setViewport(0,0,ve,Rt)},this.getCurrentViewport=function(ve){return ve===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),ve=new rs),ve.copy(Ji)},this.getViewport=function(ve){return ve.copy(Fn)},this.setViewport=function(ve,Rt,Et,Ot){ve.isVector4?Fn.set(ve.x,ve.y,ve.z,ve.w):Fn.set(ve,Rt,Et,Ot),Mr.viewport(Ji.copy(Fn).multiplyScalar(Cn).floor())},this.getScissor=function(ve){return ve.copy(jn)},this.setScissor=function(ve,Rt,Et,Ot){ve.isVector4?jn.set(ve.x,ve.y,ve.z,ve.w):jn.set(ve,Rt,Et,Ot),Mr.scissor(Xr.copy(jn).multiplyScalar(Cn).floor())},this.getScissorTest=function(){return Sn},this.setScissorTest=function(ve){Mr.setScissorTest(Sn=ve)},this.setOpaqueSort=function(ve){zn=ve},this.setTransparentSort=function(ve){hr=ve},this.getClearColor=function(ve){return ve===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),ve=new Fi),ve.copy($c.getClearColor())},this.setClearColor=function(){$c.setClearColor.apply($c,arguments)},this.getClearAlpha=function(){return $c.getClearAlpha()},this.setClearAlpha=function(){$c.setClearAlpha.apply($c,arguments)},this.clear=function(ve,Rt,Et){let Ot=0;(ve===void 0||ve)&&(Ot|=Ct.COLOR_BUFFER_BIT),(Rt===void 0||Rt)&&(Ot|=Ct.DEPTH_BUFFER_BIT),(Et===void 0||Et)&&(Ot|=Ct.STENCIL_BUFFER_BIT),Ct.clear(Ot)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){we.removeEventListener("webglcontextlost",l,!1),we.removeEventListener("webglcontextrestored",f,!1),Xl.dispose(),Zc.dispose(),vs.dispose(),El.dispose(),$a.dispose(),Ma.dispose(),Cl.dispose(),Cl.removeEventListener("sessionstart",M),Cl.removeEventListener("sessionend",D),zu.stop()},this.renderBufferImmediate=function(ve,Rt){Ma.initAttributes();const Et=vs.get(ve);ve.hasPositions&&!Et.position&&(Et.position=Ct.createBuffer()),ve.hasNormals&&!Et.normal&&(Et.normal=Ct.createBuffer()),ve.hasUvs&&!Et.uv&&(Et.uv=Ct.createBuffer()),ve.hasColors&&!Et.color&&(Et.color=Ct.createBuffer());const Ot=Rt.getAttributes();ve.hasPositions&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,Et.position),Ct.bufferData(Ct.ARRAY_BUFFER,ve.positionArray,Ct.DYNAMIC_DRAW),Ma.enableAttribute(Ot.position),Ct.vertexAttribPointer(Ot.position,3,Ct.FLOAT,!1,0,0)),ve.hasNormals&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,Et.normal),Ct.bufferData(Ct.ARRAY_BUFFER,ve.normalArray,Ct.DYNAMIC_DRAW),Ma.enableAttribute(Ot.normal),Ct.vertexAttribPointer(Ot.normal,3,Ct.FLOAT,!1,0,0)),ve.hasUvs&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,Et.uv),Ct.bufferData(Ct.ARRAY_BUFFER,ve.uvArray,Ct.DYNAMIC_DRAW),Ma.enableAttribute(Ot.uv),Ct.vertexAttribPointer(Ot.uv,2,Ct.FLOAT,!1,0,0)),ve.hasColors&&(Ct.bindBuffer(Ct.ARRAY_BUFFER,Et.color),Ct.bufferData(Ct.ARRAY_BUFFER,ve.colorArray,Ct.DYNAMIC_DRAW),Ma.enableAttribute(Ot.color),Ct.vertexAttribPointer(Ot.color,3,Ct.FLOAT,!1,0,0)),Ma.disableUnusedAttributes(),Ct.drawArrays(Ct.TRIANGLES,0,ve.count),ve.count=0},this.renderBufferDirect=function(ve,Rt,Et,Ot,It,En){Rt===null&&(Rt=gs);const Kn=It.isMesh&&It.matrixWorld.determinant()<0,ti=ye(ve,Rt,Ot,It);Mr.setMaterial(Ot,Kn);let Jn=Et.index;const Vn=Et.attributes.position;if(Jn===null){if(Vn===void 0||Vn.count===0)return}else if(Jn.count===0)return;let ai=1;Ot.wireframe===!0&&(Jn=qp.getWireframeAttribute(Et),ai=2),(Ot.morphTargets||Ot.morphNormals)&&dA.update(It,Et,Ot,ti),Ma.setup(It,Ot,ti,Et,Jn);let ci,tr=fA;Jn!==null&&(ci=bl.get(Jn),(tr=pA).setIndex(ci));const _r=Jn!==null?Jn.count:Vn.count,rr=Et.drawRange.start*ai,Ni=Et.drawRange.count*ai,nr=En!==null?En.start*ai:0,Bi=En!==null?En.count*ai:1/0,sr=Math.max(rr,nr),kr=Math.min(_r,rr+Ni,nr+Bi)-1,Jr=Math.max(0,kr-sr+1);if(Jr!==0){if(It.isMesh)Ot.wireframe===!0?(Mr.setLineWidth(Ot.wireframeLinewidth*t()),tr.setMode(Ct.LINES)):tr.setMode(Ct.TRIANGLES);else if(It.isLine){let Eo=Ot.linewidth;Eo===void 0&&(Eo=1),Mr.setLineWidth(Eo*t()),It.isLineSegments?tr.setMode(Ct.LINES):It.isLineLoop?tr.setMode(Ct.LINE_LOOP):tr.setMode(Ct.LINE_STRIP)}else It.isPoints?tr.setMode(Ct.POINTS):It.isSprite&&tr.setMode(Ct.TRIANGLES);if(It.isInstancedMesh)tr.renderInstances(sr,Jr,It.count);else if(Et.isInstancedBufferGeometry){const Eo=Math.min(Et.instanceCount,Et._maxInstanceCount);tr.renderInstances(sr,Jr,Eo)}else tr.render(sr,Jr)}},this.compile=function(ve,Rt){(Ht=Zc.get(ve)).init(),ve.traverseVisible(function(Et){Et.isLight&&Et.layers.test(Rt.layers)&&(Ht.pushLight(Et),Et.castShadow&&Ht.pushShadow(Et))}),Ht.setupLights(),ve.traverse(function(Et){const Ot=Et.material;if(Ot)if(Array.isArray(Ot))for(let It=0;It<Ot.length;It++)oe(Ot[It],ve,Et);else oe(Ot,ve,Et)})};let Fg=null;const zu=new F;zu.setAnimationLoop(function(ve){Fg&&Fg(ve)}),typeof window<"u"&&zu.setContext(window),this.setAnimationLoop=function(ve){Fg=ve,Cl.setAnimationLoop(ve),ve===null?zu.stop():zu.start()},Cl.addEventListener("sessionstart",M),Cl.addEventListener("sessionend",D),this.render=function(ve,Rt){let Et,Ot;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Et=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Ot=arguments[3]),Rt!==void 0&&Rt.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(Wn===!0)return;ve.autoUpdate===!0&&ve.updateMatrixWorld(),Rt.parent===null&&Rt.updateMatrixWorld(),Cl.enabled===!0&&Cl.isPresenting===!0&&(Rt=Cl.getCamera(Rt)),ve.isScene===!0&&ve.onBeforeRender(en,ve,Rt,Et||oi),(Ht=Zc.get(ve,Qt.length)).init(),Qt.push(Ht),Ri.multiplyMatrices(Rt.projectionMatrix,Rt.matrixWorldInverse),Ii.setFromProjectionMatrix(Ri),pr=this.localClippingEnabled,vi=Cc.init(this.clippingPlanes,pr,Rt),(gt=Xl.get(ve,Zt.length)).init(),Zt.push(gt),G(ve,Rt,0,en.sortObjects),gt.finish(),en.sortObjects===!0&&gt.sort(zn,hr),vi===!0&&Cc.beginShadows();const It=Ht.state.shadowsArray;_l.render(It,ve,Rt),Ht.setupLights(),Ht.setupLightsView(Rt),vi===!0&&Cc.endShadows(),this.info.autoReset===!0&&this.info.reset(),Et!==void 0&&this.setRenderTarget(Et),$c.render(gt,ve,Rt,Ot);const En=gt.opaque,Kn=gt.transparent;En.length>0&&$(En,ve,Rt),Kn.length>0&&$(Kn,ve,Rt),oi!==null&&(Bo.updateRenderTargetMipmap(oi),Bo.updateMultisampleRenderTarget(oi)),ve.isScene===!0&&ve.onAfterRender(en,ve,Rt),Mr.buffers.depth.setTest(!0),Mr.buffers.depth.setMask(!0),Mr.buffers.color.setMask(!0),Mr.setPolygonOffset(!1),Ma.resetDefaultState(),qn=-1,$i=null,Qt.pop(),Ht=Qt.length>0?Qt[Qt.length-1]:null,Zt.pop(),gt=Zt.length>0?Zt[Zt.length-1]:null},this.getActiveCubeFace=function(){return ii},this.getActiveMipmapLevel=function(){return lr},this.getRenderTarget=function(){return oi},this.setRenderTarget=function(ve,Rt=0,Et=0){oi=ve,ii=Rt,lr=Et,ve&&vs.get(ve).__webglFramebuffer===void 0&&Bo.setupRenderTarget(ve);let Ot=null,It=!1,En=!1;if(ve){const Kn=ve.texture;(Kn.isDataTexture3D||Kn.isDataTexture2DArray)&&(En=!0);const ti=vs.get(ve).__webglFramebuffer;ve.isWebGLCubeRenderTarget?(Ot=ti[Rt],It=!0):Ot=ve.isWebGLMultisampleRenderTarget?vs.get(ve).__webglMultisampledFramebuffer:ti,Ji.copy(ve.viewport),Xr.copy(ve.scissor),Tt=ve.scissorTest}else Ji.copy(Fn).multiplyScalar(Cn).floor(),Xr.copy(jn).multiplyScalar(Cn).floor(),Tt=Sn;if(Mr.bindFramebuffer(Ct.FRAMEBUFFER,Ot),Mr.viewport(Ji),Mr.scissor(Xr),Mr.setScissorTest(Tt),It){const Kn=vs.get(ve.texture);Ct.framebufferTexture2D(Ct.FRAMEBUFFER,Ct.COLOR_ATTACHMENT0,Ct.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Kn.__webglTexture,Et)}else if(En){const Kn=vs.get(ve.texture),ti=Rt||0;Ct.framebufferTextureLayer(Ct.FRAMEBUFFER,Ct.COLOR_ATTACHMENT0,Kn.__webglTexture,Et||0,ti)}},this.readRenderTargetPixels=function(ve,Rt,Et,Ot,It,En,Kn){if(!ve||!ve.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ti=vs.get(ve).__webglFramebuffer;if(ve.isWebGLCubeRenderTarget&&Kn!==void 0&&(ti=ti[Kn]),ti){Mr.bindFramebuffer(Ct.FRAMEBUFFER,ti);try{const Jn=ve.texture,Vn=Jn.format,ai=Jn.type;if(Vn!==ko&&wl.convert(Vn)!==Ct.getParameter(Ct.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ci=ai===Ea&&(Cr.has("EXT_color_buffer_half_float")||ts.isWebGL2&&Cr.has("EXT_color_buffer_float"));if(!(ai===xa||wl.convert(ai)===Ct.getParameter(Ct.IMPLEMENTATION_COLOR_READ_TYPE)||ai===ra&&(ts.isWebGL2||Cr.has("OES_texture_float")||Cr.has("WEBGL_color_buffer_float"))||ci))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ct.checkFramebufferStatus(Ct.FRAMEBUFFER)===Ct.FRAMEBUFFER_COMPLETE?Rt>=0&&Rt<=ve.width-Ot&&Et>=0&&Et<=ve.height-It&&Ct.readPixels(Rt,Et,Ot,It,wl.convert(Vn),wl.convert(ai),En):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Jn=oi!==null?vs.get(oi).__webglFramebuffer:null;Mr.bindFramebuffer(Ct.FRAMEBUFFER,Jn)}}},this.copyFramebufferToTexture=function(ve,Rt,Et=0){const Ot=Math.pow(2,-Et),It=Math.floor(Rt.image.width*Ot),En=Math.floor(Rt.image.height*Ot),Kn=wl.convert(Rt.format);Bo.setTexture2D(Rt,0),Ct.copyTexImage2D(Ct.TEXTURE_2D,Et,Kn,ve.x,ve.y,It,En,0),Mr.unbindTexture()},this.copyTextureToTexture=function(ve,Rt,Et,Ot=0){const It=Rt.image.width,En=Rt.image.height,Kn=wl.convert(Et.format),ti=wl.convert(Et.type);Bo.setTexture2D(Et,0),Ct.pixelStorei(Ct.UNPACK_FLIP_Y_WEBGL,Et.flipY),Ct.pixelStorei(Ct.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Et.premultiplyAlpha),Ct.pixelStorei(Ct.UNPACK_ALIGNMENT,Et.unpackAlignment),Rt.isDataTexture?Ct.texSubImage2D(Ct.TEXTURE_2D,Ot,ve.x,ve.y,It,En,Kn,ti,Rt.image.data):Rt.isCompressedTexture?Ct.compressedTexSubImage2D(Ct.TEXTURE_2D,Ot,ve.x,ve.y,Rt.mipmaps[0].width,Rt.mipmaps[0].height,Kn,Rt.mipmaps[0].data):Ct.texSubImage2D(Ct.TEXTURE_2D,Ot,ve.x,ve.y,Kn,ti,Rt.image),Ot===0&&Et.generateMipmaps&&Ct.generateMipmap(Ct.TEXTURE_2D),Mr.unbindTexture()},this.copyTextureToTexture3D=function(ve,Rt,Et,Ot,It=0){if(en.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:En,height:Kn,data:ti}=Et.image,Jn=wl.convert(Ot.format),Vn=wl.convert(Ot.type);let ai;if(Ot.isDataTexture3D)Bo.setTexture3D(Ot,0),ai=Ct.TEXTURE_3D;else{if(!Ot.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Bo.setTexture2DArray(Ot,0),ai=Ct.TEXTURE_2D_ARRAY}Ct.pixelStorei(Ct.UNPACK_FLIP_Y_WEBGL,Ot.flipY),Ct.pixelStorei(Ct.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ot.premultiplyAlpha),Ct.pixelStorei(Ct.UNPACK_ALIGNMENT,Ot.unpackAlignment);const ci=Ct.getParameter(Ct.UNPACK_ROW_LENGTH),tr=Ct.getParameter(Ct.UNPACK_IMAGE_HEIGHT),_r=Ct.getParameter(Ct.UNPACK_SKIP_PIXELS),rr=Ct.getParameter(Ct.UNPACK_SKIP_ROWS),Ni=Ct.getParameter(Ct.UNPACK_SKIP_IMAGES);Ct.pixelStorei(Ct.UNPACK_ROW_LENGTH,En),Ct.pixelStorei(Ct.UNPACK_IMAGE_HEIGHT,Kn),Ct.pixelStorei(Ct.UNPACK_SKIP_PIXELS,ve.min.x),Ct.pixelStorei(Ct.UNPACK_SKIP_ROWS,ve.min.y),Ct.pixelStorei(Ct.UNPACK_SKIP_IMAGES,ve.min.z),Ct.texSubImage3D(ai,It,Rt.x,Rt.y,Rt.z,ve.max.x-ve.min.x+1,ve.max.y-ve.min.y+1,ve.max.z-ve.min.z+1,Jn,Vn,ti),Ct.pixelStorei(Ct.UNPACK_ROW_LENGTH,ci),Ct.pixelStorei(Ct.UNPACK_IMAGE_HEIGHT,tr),Ct.pixelStorei(Ct.UNPACK_SKIP_PIXELS,_r),Ct.pixelStorei(Ct.UNPACK_SKIP_ROWS,rr),Ct.pixelStorei(Ct.UNPACK_SKIP_IMAGES,Ni),It===0&&Ot.generateMipmaps&&Ct.generateMipmap(ai),Mr.unbindTexture()},this.initTexture=function(ve){Bo.setTexture2D(ve,0),Mr.unbindTexture()},this.resetState=function(){ii=0,lr=0,oi=null,Mr.reset(),Ma.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ei(s,t){this.array=s,this.stride=t,this.count=s!==void 0?s.length/t:0,this.usage=yh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=qi.generateUUID()}function pn(s,t,i,o){this.name="",this.data=s,this.itemSize=t,this.offset=i,this.normalized=o===!0}function Oi(s,t,i,o,l,f){Bd.subVectors(s,i).addScalar(.5).multiply(o),l!==void 0?(gp.x=f*Bd.x-l*Bd.y,gp.y=l*Bd.x+f*Bd.y):gp.copy(Bd),s.copy(t),s.x+=gp.x,s.y+=gp.y,s.applyMatrix4(Ev)}function Mi(s,t){te.call(this,s,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ir,this.bindMatrixInverse=new ir}function Ti(){I.call(this),this.type="Bone"}function Wr(s,t,i){te.call(this,s,t),this.instanceMatrix=new y(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}function zi(s=new k,t=new ta){I.call(this),this.type="Line",this.geometry=s,this.material=t,this.updateMorphTargets()}function er(s,t){zi.call(this,s,t),this.type="LineSegments"}function Nr(s=new k,t=new Tu){I.call(this),this.type="Points",this.geometry=s,this.material=t,this.updateMorphTargets()}function Ds(s,t,i,o,l,f,B){const M=Zm.distanceSqToPoint(s);if(M<i){const D=new Je;Zm.closestPointToPoint(s,D),D.applyMatrix4(o);const G=l.ray.origin.distanceTo(D);if(G<l.near||G>l.far)return;f.push({distance:G,distanceToRay:Math.sqrt(M),point:D,index:t,face:null,object:B})}}function ro(s,t,i,o,l){let f,B;if(l===function(M,D,G,$){let ie=0;for(let oe=D,he=G-$;oe<G;oe+=$)ie+=(M[he]-M[oe])*(M[oe+1]+M[he+1]),he=oe;return ie}(s,t,i,o)>0)for(f=t;f<i;f+=o)B=Nt(f,s[f],s[f+1],B);else for(f=i-o;f>=t;f-=o)B=Nt(f,s[f],s[f+1],B);return B&&Le(B,B.next)&&(an(B),B=B.next),B}function pi(s,t){if(!s)return s;t||(t=s);let i,o=s;do if(i=!1,o.steiner||!Le(o,o.next)&&_e(o.prev,o,o.next)!==0)o=o.next;else{if(an(o),(o=t=o.prev)===o.next)break;i=!0}while(i||o!==t);return t}function Ir(s,t,i,o,l,f,B){if(!s)return;!B&&f&&function($,ie,oe,he){let ye=$;do ye.z===null&&(ye.z=ce(ye.x,ye.y,ie,oe,he)),ye.prevZ=ye.prev,ye.nextZ=ye.next,ye=ye.next;while(ye!==$);ye.prevZ.nextZ=null,ye.prevZ=null,function(we){let be,ke,Xe,it,lt,pt,mt,ot,kt=1;do{for(ke=we,we=null,lt=null,pt=0;ke;){for(pt++,Xe=ke,mt=0,be=0;be<kt&&(mt++,Xe=Xe.nextZ);be++);for(ot=kt;mt>0||ot>0&&Xe;)mt!==0&&(ot===0||!Xe||ke.z<=Xe.z)?(it=ke,ke=ke.nextZ,mt--):(it=Xe,Xe=Xe.nextZ,ot--),lt?lt.nextZ=it:we=it,it.prevZ=lt,lt=it;ke=Xe}lt.nextZ=null,kt*=2}while(pt>1)}(ye)}(s,o,l,f);let M,D,G=s;for(;s.prev!==s.next;)if(M=s.prev,D=s.next,f?function($,ie,oe,he){const ye=$.prev,we=$,be=$.next;if(_e(ye,we,be)>=0)return!1;const ke=ye.x<we.x?ye.x<be.x?ye.x:be.x:we.x<be.x?we.x:be.x,Xe=ye.y<we.y?ye.y<be.y?ye.y:be.y:we.y<be.y?we.y:be.y,it=ye.x>we.x?ye.x>be.x?ye.x:be.x:we.x>be.x?we.x:be.x,lt=ye.y>we.y?ye.y>be.y?ye.y:be.y:we.y>be.y?we.y:be.y,pt=ce(ke,Xe,ie,oe,he),mt=ce(it,lt,ie,oe,he);let ot=$.prevZ,kt=$.nextZ;for(;ot&&ot.z>=pt&&kt&&kt.z<=mt;){if(ot!==$.prev&&ot!==$.next&&ge(ye.x,ye.y,we.x,we.y,be.x,be.y,ot.x,ot.y)&&_e(ot.prev,ot,ot.next)>=0||(ot=ot.prevZ,kt!==$.prev&&kt!==$.next&&ge(ye.x,ye.y,we.x,we.y,be.x,be.y,kt.x,kt.y)&&_e(kt.prev,kt,kt.next)>=0))return!1;kt=kt.nextZ}for(;ot&&ot.z>=pt;){if(ot!==$.prev&&ot!==$.next&&ge(ye.x,ye.y,we.x,we.y,be.x,be.y,ot.x,ot.y)&&_e(ot.prev,ot,ot.next)>=0)return!1;ot=ot.prevZ}for(;kt&&kt.z<=mt;){if(kt!==$.prev&&kt!==$.next&&ge(ye.x,ye.y,we.x,we.y,be.x,be.y,kt.x,kt.y)&&_e(kt.prev,kt,kt.next)>=0)return!1;kt=kt.nextZ}return!0}(s,o,l,f):function($){const ie=$.prev,oe=$,he=$.next;if(_e(ie,oe,he)>=0)return!1;let ye=$.next.next;for(;ye!==$.prev;){if(ge(ie.x,ie.y,oe.x,oe.y,he.x,he.y,ye.x,ye.y)&&_e(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}(s))t.push(M.i/i),t.push(s.i/i),t.push(D.i/i),an(s),s=D.next,G=D.next;else if((s=D)===G){B?B===1?Ir(s=function($,ie,oe){let he=$;do{const ye=he.prev,we=he.next.next;!Le(ye,we)&&qe(ye,he,he.next,we)&&wn(ye,we)&&wn(we,ye)&&(ie.push(ye.i/oe),ie.push(he.i/oe),ie.push(we.i/oe),an(he),an(he.next),he=$=we),he=he.next}while(he!==$);return pi(he)}(pi(s),t,i),t,i,o,l,f,2):B===2&&function($,ie,oe,he,ye,we){let be=$;do{let ke=be.next.next;for(;ke!==be.prev;){if(be.i!==ke.i&&function(Xe,it){return Xe.next.i!==it.i&&Xe.prev.i!==it.i&&!function(lt,pt){let mt=lt;do{if(mt.i!==lt.i&&mt.next.i!==lt.i&&mt.i!==pt.i&&mt.next.i!==pt.i&&qe(mt,mt.next,lt,pt))return!0;mt=mt.next}while(mt!==lt);return!1}(Xe,it)&&(wn(Xe,it)&&wn(it,Xe)&&function(lt,pt){let mt=lt,ot=!1;const kt=(lt.x+pt.x)/2,gt=(lt.y+pt.y)/2;do mt.y>gt!=mt.next.y>gt&&mt.next.y!==mt.y&&kt<(mt.next.x-mt.x)*(gt-mt.y)/(mt.next.y-mt.y)+mt.x&&(ot=!ot),mt=mt.next;while(mt!==lt);return ot}(Xe,it)&&(_e(Xe.prev,Xe,it.prev)||_e(Xe,it.prev,it))||Le(Xe,it)&&_e(Xe.prev,Xe,Xe.next)>0&&_e(it.prev,it,it.next)>0)}(be,ke)){let Xe=xn(be,ke);return be=pi(be,be.next),Xe=pi(Xe,Xe.next),Ir(be,ie,oe,he,ye,we),void Ir(Xe,ie,oe,he,ye,we)}ke=ke.next}be=be.next}while(be!==$)}(s,t,i,o,l,f):Ir(pi(s),t,i,o,l,f,1);break}}function to(s,t,i,o){const l=[];let f,B,M;for(f=0,B=t.length;f<B;f++)(M=ro(s,t[f]*o,f<B-1?t[f+1]*o:s.length,o,!1))===M.next&&(M.steiner=!0),l.push(function(D){let G=D,$=D;do(G.x<$.x||G.x===$.x&&G.y<$.y)&&($=G),G=G.next;while(G!==D);return $}(M));for(l.sort(os),f=0;f<l.length;f++)(function(D,G){if(G=function($,ie){let oe=ie;const he=$.x,ye=$.y;let we,be=-1/0;do{if(ye<=oe.y&&ye>=oe.next.y&&oe.next.y!==oe.y){const mt=oe.x+(ye-oe.y)*(oe.next.x-oe.x)/(oe.next.y-oe.y);if(mt<=he&&mt>be){if(be=mt,mt===he){if(ye===oe.y)return oe;if(ye===oe.next.y)return oe.next}we=oe.x<oe.next.x?oe:oe.next}}oe=oe.next}while(oe!==ie);if(!we)return null;if(he===be)return we;const ke=we,Xe=we.x,it=we.y;let lt,pt=1/0;oe=we;do he>=oe.x&&oe.x>=Xe&&he!==oe.x&&ge(ye<it?he:be,ye,Xe,it,ye<it?be:he,ye,oe.x,oe.y)&&(lt=Math.abs(ye-oe.y)/(he-oe.x),wn(oe,$)&&(lt<pt||lt===pt&&(oe.x>we.x||oe.x===we.x&&function(mt,ot){return _e(mt.prev,mt,ot.prev)<0&&_e(ot.next,mt,mt.next)<0}(we,oe)))&&(we=oe,pt=lt)),oe=oe.next;while(oe!==ke);return we}(D,G)){const $=xn(G,D);pi(G,G.next),pi($,$.next)}})(l[f],i),i=pi(i,i.next);return i}function os(s,t){return s.x-t.x}function ce(s,t,i,o,l){return s=32767*(s-i)*l,t=32767*(t-o)*l,s=16711935&(s|s<<8),s=252645135&(s|s<<4),s=858993459&(s|s<<2),s=1431655765&(s|s<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),s|t<<1}function ge(s,t,i,o,l,f,B,M){return(l-B)*(t-M)-(s-B)*(f-M)>=0&&(s-B)*(o-M)-(i-B)*(t-M)>=0&&(i-B)*(f-M)-(l-B)*(o-M)>=0}function _e(s,t,i){return(t.y-s.y)*(i.x-t.x)-(t.x-s.x)*(i.y-t.y)}function Le(s,t){return s.x===t.x&&s.y===t.y}function qe(s,t,i,o){const l=St(_e(s,t,i)),f=St(_e(s,t,o)),B=St(_e(i,o,s)),M=St(_e(i,o,t));return l!==f&&B!==M||!(l!==0||!yt(s,i,t))||!(f!==0||!yt(s,o,t))||!(B!==0||!yt(i,s,o))||!(M!==0||!yt(i,t,o))}function yt(s,t,i){return t.x<=Math.max(s.x,i.x)&&t.x>=Math.min(s.x,i.x)&&t.y<=Math.max(s.y,i.y)&&t.y>=Math.min(s.y,i.y)}function St(s){return s>0?1:s<0?-1:0}function wn(s,t){return _e(s.prev,s,s.next)<0?_e(s,t,s.next)>=0&&_e(s,s.prev,t)>=0:_e(s,t,s.prev)<0||_e(s,s.next,t)<0}function xn(s,t){const i=new Pn(s.i,s.x,s.y),o=new Pn(t.i,t.x,t.y),l=s.next,f=t.prev;return s.next=t,t.prev=s,i.next=l,l.prev=i,o.next=i,i.prev=o,f.next=o,o.prev=f,o}function Nt(s,t,i,o){const l=new Pn(s,t,i);return o?(l.next=o.next,l.prev=o,o.next.prev=l,o.next=l):(l.prev=l,l.next=l),l}function an(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Pn(s,t,i){this.i=s,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xi(s){const t=s.length;t>2&&s[t-1].equals(s[0])&&s.pop()}function Ui(s,t){for(let i=0;i<t.length;i++)s.push(t[i].x),s.push(t[i].y)}function Xi(s,t,i){k.call(this),this.type="ParametricGeometry",this.parameters={func:s,slices:t,stacks:i};const o=[],l=[],f=[],B=[],M=new Je,D=new Je,G=new Je,$=new Je,ie=new Je;s.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const oe=t+1;for(let he=0;he<=i;he++){const ye=he/i;for(let we=0;we<=t;we++){const be=we/t;s(be,ye,D),l.push(D.x,D.y,D.z),be-1e-5>=0?(s(be-1e-5,ye,G),$.subVectors(D,G)):(s(be+1e-5,ye,G),$.subVectors(G,D)),ye-1e-5>=0?(s(be,ye-1e-5,G),ie.subVectors(D,G)):(s(be,ye+1e-5,G),ie.subVectors(G,D)),M.crossVectors($,ie).normalize(),f.push(M.x,M.y,M.z),B.push(be,ye)}}for(let he=0;he<i;he++)for(let ye=0;ye<t;ye++){const we=he*oe+ye,be=he*oe+ye+1,ke=(he+1)*oe+ye+1,Xe=(he+1)*oe+ye;o.push(we,be,Xe),o.push(be,ke,Xe)}this.setIndex(o),this.setAttribute("position",new P(l,3)),this.setAttribute("normal",new P(f,3)),this.setAttribute("uv",new P(B,2))}function fr(s){u.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(s)}function ur(s){fr.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Qn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=qi.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(s)}function Vi(s,t,i,o){this.parameterPositions=s,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function us(s,t,i,o){Vi.call(this,s,t,i,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Yr(s,t,i,o){Vi.call(this,s,t,i,o)}function Ar(s,t,i,o){Vi.call(this,s,t,i,o)}function Ts(s,t,i,o){Vi.call(this,s,t,i,o)}function po(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hd;case"vector":case"vector2":case"vector3":case"vector4":return zd;case"color":return eg;case"quaternion":return Oh;case"bool":case"boolean":return Lu;case"string":return Du}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(s.type);if(s.times===void 0){const i=[],o=[];Ks.flattenJSON(s.keys,i,o,"value"),s.times=i,s.values=o}return t.parse!==void 0?t.parse(s):new t(s.name,s.times,s.values,s.interpolation)}function Vs(s,t,i){const o=this;let l=!1,f=0,B=0,M;const D=[];this.onStart=void 0,this.onLoad=s,this.onProgress=t,this.onError=i,this.itemStart=function(G){B++,l===!1&&o.onStart!==void 0&&o.onStart(G,f,B),l=!0},this.itemEnd=function(G){f++,o.onProgress!==void 0&&o.onProgress(G,f,B),f===B&&(l=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(G){o.onError!==void 0&&o.onError(G)},this.resolveURL=function(G){return M?M(G):G},this.setURLModifier=function(G){return M=G,this},this.addHandler=function(G,$){return D.push(G,$),this},this.removeHandler=function(G){const $=D.indexOf(G);return $!==-1&&D.splice($,2),this},this.getHandler=function(G){for(let $=0,ie=D.length;$<ie;$+=2){const oe=D[$],he=D[$+1];if(oe.global&&(oe.lastIndex=0),oe.test(G))return he}return null}}function qr(s){this.manager=s!==void 0?s:P0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}function Ps(s){qr.call(this,s)}function Ls(s){qr.call(this,s)}function bo(s){qr.call(this,s)}function Va(s){qr.call(this,s)}function Qs(){this.type="Curve",this.arcLengthDivisions=200}function il(){function s(f,B,M,D){t=f,i=M,o=-3*f+3*B-2*M-D,l=2*f-2*B+M+D}let t=0,i=0,o=0,l=0;return{initCatmullRom:function(f,B,M,D,G){s(B,M,G*(M-f),G*(D-B))},initNonuniformCatmullRom:function(f,B,M,D,G,$,ie){let oe=(B-f)/G-(M-f)/(G+$)+(M-B)/$,he=(M-B)/$-(D-B)/($+ie)+(D-M)/ie;s(B,M,oe*=$,he*=$)},calc:function(f){const B=f*f;return t+i*f+o*B+l*(B*f)}}}function Ll(s,t,i,o,l){const f=.5*(o-t),B=.5*(l-i),M=s*s;return(2*i-2*o+f+B)*(s*M)+(-3*i+3*o-2*f-B)*M+f*s+i}function Ia(s,t,i,o){return function(l,f){const B=1-l;return B*B*f}(s,t)+function(l,f){return 2*(1-l)*l*f}(s,i)+function(l,f){return l*l*f}(s,o)}function Ra(s,t,i,o,l){return function(f,B){const M=1-f;return M*M*M*B}(s,t)+function(f,B){const M=1-f;return 3*M*M*f*B}(s,i)+function(f,B){return 3*(1-f)*f*f*B}(s,o)+function(f,B){return f*f*f*B}(s,l)}function Ba(){k.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Qa(s,t,i,o){typeof i=="number"&&(o=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),y.call(this,s,t,i),this.meshPerAttribute=o||1}function rl(s){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),qr.call(this,s),this.options={premultiplyAlpha:"none"}}function ec(s,t,i){const o=Array.from(s),l=t/i.resolution,f=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*l,B=[];let M=0,D=0;for(let G=0;G<o.length;G++){const $=o[G];if($===`
`)M=0,D-=f;else{const ie=function(oe,he,ye,we,be){const ke=be.glyphs[oe]||be.glyphs["?"];if(!ke)return void console.error('THREE.Font: character "'+oe+'" does not exists in font family '+be.familyName+".");const Xe=new Gp;let it,lt,pt,mt,ot,kt,gt,Ht;if(ke.o){const Zt=ke._cachedOutline||(ke._cachedOutline=ke.o.split(" "));for(let Qt=0,en=Zt.length;Qt<en;)switch(Zt[Qt++]){case"m":it=Zt[Qt++]*he+ye,lt=Zt[Qt++]*he+we,Xe.moveTo(it,lt);break;case"l":it=Zt[Qt++]*he+ye,lt=Zt[Qt++]*he+we,Xe.lineTo(it,lt);break;case"q":pt=Zt[Qt++]*he+ye,mt=Zt[Qt++]*he+we,ot=Zt[Qt++]*he+ye,kt=Zt[Qt++]*he+we,Xe.quadraticCurveTo(ot,kt,pt,mt);break;case"b":pt=Zt[Qt++]*he+ye,mt=Zt[Qt++]*he+we,ot=Zt[Qt++]*he+ye,kt=Zt[Qt++]*he+we,gt=Zt[Qt++]*he+ye,Ht=Zt[Qt++]*he+we,Xe.bezierCurveTo(ot,kt,gt,Ht,pt,mt)}}return{offsetX:ke.ha*he,path:Xe}}($,l,M,D,i);M+=ie.offsetX,B.push(ie.path)}}return B}function Dl(){return(typeof performance>"u"?Date:performance).now()}function qs(s,t,i){const o=i||Oo.parseTrackName(t);this._targetGroup=s,this._bindings=s.subscribe_(t,o)}function Oo(s,t,i){this.path=t,this.parsedPath=i||Oo.parseTrackName(t),this.node=Oo.findNode(s,this.parsedPath.nodeName)||s,this.rootNode=s}function id(s,t,i){ei.call(this,s,t),this.meshPerAttribute=i||1}function rd(s,t,i,o,l){this.buffer=s,this.type=t,this.itemSize=i,this.elementSize=o,this.count=l,this.version=0}function rh(s,t,i=0,o=1/0){this.ray=new zl(s,t),this.near=i,this.far=o,this.camera=null,this.layers=new Sm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Lc(s,t){return s.distance-t.distance}function sd(s,t,i,o){if(s.layers.test(t.layers)&&s.raycast(t,i),o===!0){const l=s.children;for(let f=0,B=l.length;f<B;f++)sd(l[f],t,i,!0)}}function sh(s){I.call(this),this.material=s,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}function Lf(s){const t=[];s&&s.isBone&&t.push(s);for(let i=0;i<s.children.length;i++)t.push.apply(t,Lf(s.children[i]));return t}function no(s,t,i,o,l,f,B){Ec.set(l,f,B).unproject(o);const M=t[s];if(M!==void 0){const D=i.getAttribute("position");for(let G=0,$=M.length;G<$;G++)D.setXYZ(M[G],Ec.x,Ec.y,Ec.z)}}function Df(s){const t=Math.max(s.r,s.g,s.b),i=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return s.multiplyScalar(Math.pow(2,-i)),(i+128)/255}function Pf(s){const t=new aa(3*yl,3*yl,s);return t.texture.mapping=Zr,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function oh(s,t,i,o,l){s.viewport.set(t,i,o,l),s.scissor.set(t,i,o,l)}function Of(){const s=new Qn(1,1);return new Bu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:s},inputEncoding:{value:xl[lo]},outputEncoding:{value:xl[lo]}},vertexShader:ah(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${du()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ol,depthTest:!1,depthWrite:!1})}function Ff(){return new Bu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:xl[lo]},outputEncoding:{value:xl[lo]}},vertexShader:ah(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${du()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ol,depthTest:!1,depthWrite:!1})}function ah(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function du(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}const ia=0,_o=1,od=2,sl=1,Dc=2,wo=3,Os=0,Js=1,fu=2,ol=0,ja=1,ad=2,ld=3,cd=4,Nf=5,tc=100,kf=101,Uf=102,ud=103,hd=104,Gf=200,lh=201,dd=202,pu=203,fd=204,La=205,Ss=206,Hf=207,On=208,Fo=209,ch=210,pd=0,zf=1,nc=2,Pl=3,Ol=4,mu=5,uh=6,Io=7,Pc=0,so=1,ya=2,Wa=0,hh=1,gu=2,Si=3,ic=4,dh=5,Da=301,rc=302,fh=303,js=304,Zr=306,No=307,al=1e3,Yo=1001,Fl=1002,mo=1003,ph=1004,Co=1005,nt=1006,Au=1007,sc=1008,xa=1009,Ka=1010,Nl=1011,oc=1012,ac=1013,Xa=1014,ra=1015,Ea=1016,ll=1017,kl=1018,lc=1019,ma=1020,Oc=1021,xs=1022,ko=1023,md=1024,cl=1025,mh=ko,qo=1026,sa=1027,gh=1028,Ci=1029,mr=1030,$r=1031,oo=1032,as=1033,Jo=33776,Gi=33777,oa=33778,Vr=33779,Fc=35840,cc=35841,Uo=35842,Go=35843,Er=36196,Pa=37492,uc=37496,Ho=37808,ps=37809,ks=37810,Kr=37811,ms=37812,ao=37813,Ya=37814,Ul=37815,gd=37816,Ad=37817,Ah=37818,vh=37819,vd=37820,Vf=37821,yd=36492,hs=37840,ba=37841,io=37842,_a=37843,Oa=37844,Gl=37845,vu=37846,Em=37847,Qf=37848,jf=37849,Wf=37850,Fa=37851,c0=37852,Zo=37853,lo=3e3,Zs=3001,yu=3007,Is=3002,u0=3003,bm=3004,_m=3005,wm=3006,Kf=3201,xu=0,Xf=1,Yf=7680,Yi=519,yh=35044,Eu=35048,wa="300 es";Object.assign(U.prototype,{addEventListener:function(s,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[s]===void 0&&(i[s]=[]),i[s].indexOf(t)===-1&&i[s].push(t)},hasEventListener:function(s,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[s]!==void 0&&i[s].indexOf(t)!==-1},removeEventListener:function(s,t){if(this._listeners===void 0)return;const i=this._listeners[s];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}},dispatchEvent:function(s){if(this._listeners===void 0)return;const t=this._listeners[s.type];if(t!==void 0){s.target=this;const i=t.slice(0);for(let o=0,l=i.length;o<l;o++)i[o].call(this,s);s.target=null}}});const Ro=[];for(let s=0;s<256;s++)Ro[s]=(s<16?"0":"")+s.toString(16);let Nc=1234567;const qi={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const s=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return(Ro[255&s]+Ro[s>>8&255]+Ro[s>>16&255]+Ro[s>>24&255]+"-"+Ro[255&t]+Ro[t>>8&255]+"-"+Ro[t>>16&15|64]+Ro[t>>24&255]+"-"+Ro[63&i|128]+Ro[i>>8&255]+"-"+Ro[i>>16&255]+Ro[i>>24&255]+Ro[255&o]+Ro[o>>8&255]+Ro[o>>16&255]+Ro[o>>24&255]).toUpperCase()},clamp:function(s,t,i){return Math.max(t,Math.min(i,s))},euclideanModulo:function(s,t){return(s%t+t)%t},mapLinear:function(s,t,i,o,l){return o+(s-t)*(l-o)/(i-t)},inverseLerp:function(s,t,i){return s!==t?(i-s)/(t-s):0},lerp:function(s,t,i){return(1-i)*s+i*t},damp:function(s,t,i,o){return qi.lerp(s,t,1-Math.exp(-i*o))},pingpong:function(s,t=1){return t-Math.abs(qi.euclideanModulo(s,2*t)-t)},smoothstep:function(s,t,i){return s<=t?0:s>=i?1:(s=(s-t)/(i-t))*s*(3-2*s)},smootherstep:function(s,t,i){return s<=t?0:s>=i?1:(s=(s-t)/(i-t))*s*s*(s*(6*s-15)+10)},randInt:function(s,t){return s+Math.floor(Math.random()*(t-s+1))},randFloat:function(s,t){return s+Math.random()*(t-s)},randFloatSpread:function(s){return s*(.5-Math.random())},seededRandom:function(s){return s!==void 0&&(Nc=s%2147483647),((Nc=16807*Nc%2147483647)-1)/2147483646},degToRad:function(s){return s*qi.DEG2RAD},radToDeg:function(s){return s*qi.RAD2DEG},isPowerOfTwo:function(s){return(s&s-1)==0&&s!==0},ceilPowerOfTwo:function(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},floorPowerOfTwo:function(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},setQuaternionFromProperEuler:function(s,t,i,o,l){const f=Math.cos,B=Math.sin,M=f(i/2),D=B(i/2),G=f((t+o)/2),$=B((t+o)/2),ie=f((t-o)/2),oe=B((t-o)/2),he=f((o-t)/2),ye=B((o-t)/2);switch(l){case"XYX":s.set(M*$,D*ie,D*oe,M*G);break;case"YZY":s.set(D*oe,M*$,D*ie,M*G);break;case"ZXZ":s.set(D*ie,D*oe,M*$,M*G);break;case"XZX":s.set(M*$,D*ye,D*he,M*G);break;case"YXY":s.set(D*he,M*$,D*ye,M*G);break;case"ZYZ":s.set(D*ye,D*he,M*$,M*G);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+l)}}};class Qn{constructor(t=0,i=0){this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,o=this.y,l=t.elements;return this.x=l[0]*i+l[3]*o+l[6],this.y=l[1]*i+l[4]*o+l[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}clampLength(t,i){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(i,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,o=this.y-t.y;return i*i+o*o}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,o){return this.x=t.x+(i.x-t.x)*o,this.y=t.y+(i.y-t.y)*o,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i,o){return o!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const o=Math.cos(i),l=Math.sin(i),f=this.x-t.x,B=this.y-t.y;return this.x=f*o-B*l+t.x,this.y=f*l+B*o+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Qn.prototype.isVector2=!0;class ls{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,i,o,l,f,B,M,D,G){const $=this.elements;return $[0]=t,$[1]=l,$[2]=M,$[3]=i,$[4]=f,$[5]=D,$[6]=o,$[7]=B,$[8]=G,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,o=t.elements;return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],this}extractBasis(t,i,o){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const o=t.elements,l=i.elements,f=this.elements,B=o[0],M=o[3],D=o[6],G=o[1],$=o[4],ie=o[7],oe=o[2],he=o[5],ye=o[8],we=l[0],be=l[3],ke=l[6],Xe=l[1],it=l[4],lt=l[7],pt=l[2],mt=l[5],ot=l[8];return f[0]=B*we+M*Xe+D*pt,f[3]=B*be+M*it+D*mt,f[6]=B*ke+M*lt+D*ot,f[1]=G*we+$*Xe+ie*pt,f[4]=G*be+$*it+ie*mt,f[7]=G*ke+$*lt+ie*ot,f[2]=oe*we+he*Xe+ye*pt,f[5]=oe*be+he*it+ye*mt,f[8]=oe*ke+he*lt+ye*ot,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],o=t[1],l=t[2],f=t[3],B=t[4],M=t[5],D=t[6],G=t[7],$=t[8];return i*B*$-i*M*G-o*f*$+o*M*D+l*f*G-l*B*D}invert(){const t=this.elements,i=t[0],o=t[1],l=t[2],f=t[3],B=t[4],M=t[5],D=t[6],G=t[7],$=t[8],ie=$*B-M*G,oe=M*D-$*f,he=G*f-B*D,ye=i*ie+o*oe+l*he;if(ye===0)return this.set(0,0,0,0,0,0,0,0,0);const we=1/ye;return t[0]=ie*we,t[1]=(l*G-$*o)*we,t[2]=(M*o-l*B)*we,t[3]=oe*we,t[4]=($*i-l*D)*we,t[5]=(l*f-M*i)*we,t[6]=he*we,t[7]=(o*D-G*i)*we,t[8]=(B*i-o*f)*we,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,o,l,f,B,M){const D=Math.cos(f),G=Math.sin(f);return this.set(o*D,o*G,-o*(D*B+G*M)+B+t,-l*G,l*D,-l*(-G*B+D*M)+M+i,0,0,1),this}scale(t,i){const o=this.elements;return o[0]*=t,o[3]*=t,o[6]*=t,o[1]*=i,o[4]*=i,o[7]*=i,this}rotate(t){const i=Math.cos(t),o=Math.sin(t),l=this.elements,f=l[0],B=l[3],M=l[6],D=l[1],G=l[4],$=l[7];return l[0]=i*f+o*D,l[3]=i*B+o*G,l[6]=i*M+o*$,l[1]=-o*f+i*D,l[4]=-o*B+i*G,l[7]=-o*M+i*$,this}translate(t,i){const o=this.elements;return o[0]+=t*o[2],o[3]+=t*o[5],o[6]+=t*o[8],o[1]+=i*o[2],o[4]+=i*o[5],o[7]+=i*o[8],this}equals(t){const i=this.elements,o=t.elements;for(let l=0;l<9;l++)if(i[l]!==o[l])return!1;return!0}fromArray(t,i=0){for(let o=0;o<9;o++)this.elements[o]=t[o+i];return this}toArray(t=[],i=0){const o=this.elements;return t[i]=o[0],t[i+1]=o[1],t[i+2]=o[2],t[i+3]=o[3],t[i+4]=o[4],t[i+5]=o[5],t[i+6]=o[6],t[i+7]=o[7],t[i+8]=o[8],t}clone(){return new this.constructor().fromArray(this.elements)}}ls.prototype.isMatrix3=!0;let Pr;const kc={getDataURL:function(s){if(/^data:/i.test(s.src)||typeof HTMLCanvasElement>"u")return s.src;let t;if(s instanceof HTMLCanvasElement)t=s;else{Pr===void 0&&(Pr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Pr.width=s.width,Pr.height=s.height;const i=Pr.getContext("2d");s instanceof ImageData?i.putImageData(s,0,0):i.drawImage(s,0,0,s.width,s.height),t=Pr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",s),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}};let xh=0;class go extends U{constructor(t=go.DEFAULT_IMAGE,i=go.DEFAULT_MAPPING,o=Yo,l=Yo,f=nt,B=sc,M=ko,D=xa,G=1,$=lo){super(),Object.defineProperty(this,"id",{value:xh++}),this.uuid=qi.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=i,this.wrapS=o,this.wrapT=l,this.magFilter=f,this.minFilter=B,this.anisotropy=G,this.format=M,this.internalFormat=null,this.type=D,this.offset=new Qn(0,0),this.repeat=new Qn(1,1),this.center=new Qn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ls,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=$,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const o={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const l=this.image;if(l.uuid===void 0&&(l.uuid=qi.generateUUID()),!i&&t.images[l.uuid]===void 0){let f;if(Array.isArray(l)){f=[];for(let B=0,M=l.length;B<M;B++)l[B].isDataTexture?f.push(K(l[B].image)):f.push(K(l[B]))}else f=K(l);t.images[l.uuid]={uuid:l.uuid,url:f}}o.image=l.uuid}return i||(t.textures[this.uuid]=o),o}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==300)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case al:t.x=t.x-Math.floor(t.x);break;case Yo:t.x=t.x<0?0:1;break;case Fl:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case al:t.y=t.y-Math.floor(t.y);break;case Yo:t.y=t.y<0?0:1;break;case Fl:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&this.version++}}go.DEFAULT_IMAGE=void 0,go.DEFAULT_MAPPING=300,go.prototype.isTexture=!0;class rs{constructor(t=0,i=0,o=0,l=1){this.x=t,this.y=i,this.z=o,this.w=l}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,o,l){return this.x=t,this.y=i,this.z=o,this.w=l,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,o=this.y,l=this.z,f=this.w,B=t.elements;return this.x=B[0]*i+B[4]*o+B[8]*l+B[12]*f,this.y=B[1]*i+B[5]*o+B[9]*l+B[13]*f,this.z=B[2]*i+B[6]*o+B[10]*l+B[14]*f,this.w=B[3]*i+B[7]*o+B[11]*l+B[15]*f,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,o,l,f;const B=t.elements,M=B[0],D=B[4],G=B[8],$=B[1],ie=B[5],oe=B[9],he=B[2],ye=B[6],we=B[10];if(Math.abs(D-$)<.01&&Math.abs(G-he)<.01&&Math.abs(oe-ye)<.01){if(Math.abs(D+$)<.1&&Math.abs(G+he)<.1&&Math.abs(oe+ye)<.1&&Math.abs(M+ie+we-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const ke=(M+1)/2,Xe=(ie+1)/2,it=(we+1)/2,lt=(D+$)/4,pt=(G+he)/4,mt=(oe+ye)/4;return ke>Xe&&ke>it?ke<.01?(o=0,l=.707106781,f=.707106781):(l=lt/(o=Math.sqrt(ke)),f=pt/o):Xe>it?Xe<.01?(o=.707106781,l=0,f=.707106781):(o=lt/(l=Math.sqrt(Xe)),f=mt/l):it<.01?(o=.707106781,l=.707106781,f=0):(o=pt/(f=Math.sqrt(it)),l=mt/f),this.set(o,l,f,i),this}let be=Math.sqrt((ye-oe)*(ye-oe)+(G-he)*(G-he)+($-D)*($-D));return Math.abs(be)<.001&&(be=1),this.x=(ye-oe)/be,this.y=(G-he)/be,this.z=($-D)/be,this.w=Math.acos((M+ie+we-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(i,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,o){return this.x=t.x+(i.x-t.x)*o,this.y=t.y+(i.y-t.y)*o,this.z=t.z+(i.z-t.z)*o,this.w=t.w+(i.w-t.w)*o,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i,o){return o!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}rs.prototype.isVector4=!0;class aa extends U{constructor(t,i,o){super(),this.width=t,this.height=i,this.depth=1,this.scissor=new rs(0,0,t,i),this.scissorTest=!1,this.viewport=new rs(0,0,t,i),o=o||{},this.texture=new go(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=1,this.texture.generateMipmaps=o.generateMipmaps!==void 0&&o.generateMipmaps,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:nt,this.depthBuffer=o.depthBuffer===void 0||o.depthBuffer,this.stencilBuffer=o.stencilBuffer!==void 0&&o.stencilBuffer,this.depthTexture=o.depthTexture!==void 0?o.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,i,o=1){this.width===t&&this.height===i&&this.depth===o||(this.width=t,this.height=i,this.depth=o,this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=o,this.dispose()),this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}aa.prototype.isWebGLRenderTarget=!0;class hc extends aa{constructor(t,i,o){super(t,i,o),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}hc.prototype.isWebGLMultisampleRenderTarget=!0;class Mo{constructor(t=0,i=0,o=0,l=1){this._x=t,this._y=i,this._z=o,this._w=l}static slerp(t,i,o,l){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),o.slerpQuaternions(t,i,l)}static slerpFlat(t,i,o,l,f,B,M){let D=o[l+0],G=o[l+1],$=o[l+2],ie=o[l+3];const oe=f[B+0],he=f[B+1],ye=f[B+2],we=f[B+3];if(M===0)return t[i+0]=D,t[i+1]=G,t[i+2]=$,void(t[i+3]=ie);if(M===1)return t[i+0]=oe,t[i+1]=he,t[i+2]=ye,void(t[i+3]=we);if(ie!==we||D!==oe||G!==he||$!==ye){let be=1-M;const ke=D*oe+G*he+$*ye+ie*we,Xe=ke>=0?1:-1,it=1-ke*ke;if(it>Number.EPSILON){const pt=Math.sqrt(it),mt=Math.atan2(pt,ke*Xe);be=Math.sin(be*mt)/pt,M=Math.sin(M*mt)/pt}const lt=M*Xe;if(D=D*be+oe*lt,G=G*be+he*lt,$=$*be+ye*lt,ie=ie*be+we*lt,be===1-M){const pt=1/Math.sqrt(D*D+G*G+$*$+ie*ie);D*=pt,G*=pt,$*=pt,ie*=pt}}t[i]=D,t[i+1]=G,t[i+2]=$,t[i+3]=ie}static multiplyQuaternionsFlat(t,i,o,l,f,B){const M=o[l],D=o[l+1],G=o[l+2],$=o[l+3],ie=f[B],oe=f[B+1],he=f[B+2],ye=f[B+3];return t[i]=M*ye+$*ie+D*he-G*oe,t[i+1]=D*ye+$*oe+G*ie-M*he,t[i+2]=G*ye+$*he+M*oe-D*ie,t[i+3]=$*ye-M*ie-D*oe-G*he,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,o,l){return this._x=t,this._y=i,this._z=o,this._w=l,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const o=t._x,l=t._y,f=t._z,B=t._order,M=Math.cos,D=Math.sin,G=M(o/2),$=M(l/2),ie=M(f/2),oe=D(o/2),he=D(l/2),ye=D(f/2);switch(B){case"XYZ":this._x=oe*$*ie+G*he*ye,this._y=G*he*ie-oe*$*ye,this._z=G*$*ye+oe*he*ie,this._w=G*$*ie-oe*he*ye;break;case"YXZ":this._x=oe*$*ie+G*he*ye,this._y=G*he*ie-oe*$*ye,this._z=G*$*ye-oe*he*ie,this._w=G*$*ie+oe*he*ye;break;case"ZXY":this._x=oe*$*ie-G*he*ye,this._y=G*he*ie+oe*$*ye,this._z=G*$*ye+oe*he*ie,this._w=G*$*ie-oe*he*ye;break;case"ZYX":this._x=oe*$*ie-G*he*ye,this._y=G*he*ie+oe*$*ye,this._z=G*$*ye-oe*he*ie,this._w=G*$*ie+oe*he*ye;break;case"YZX":this._x=oe*$*ie+G*he*ye,this._y=G*he*ie+oe*$*ye,this._z=G*$*ye-oe*he*ie,this._w=G*$*ie-oe*he*ye;break;case"XZY":this._x=oe*$*ie-G*he*ye,this._y=G*he*ie-oe*$*ye,this._z=G*$*ye+oe*he*ie,this._w=G*$*ie+oe*he*ye;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+B)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const o=i/2,l=Math.sin(o);return this._x=t.x*l,this._y=t.y*l,this._z=t.z*l,this._w=Math.cos(o),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,o=i[0],l=i[4],f=i[8],B=i[1],M=i[5],D=i[9],G=i[2],$=i[6],ie=i[10],oe=o+M+ie;if(oe>0){const he=.5/Math.sqrt(oe+1);this._w=.25/he,this._x=($-D)*he,this._y=(f-G)*he,this._z=(B-l)*he}else if(o>M&&o>ie){const he=2*Math.sqrt(1+o-M-ie);this._w=($-D)/he,this._x=.25*he,this._y=(l+B)/he,this._z=(f+G)/he}else if(M>ie){const he=2*Math.sqrt(1+M-o-ie);this._w=(f-G)/he,this._x=(l+B)/he,this._y=.25*he,this._z=(D+$)/he}else{const he=2*Math.sqrt(1+ie-o-M);this._w=(B-l)/he,this._x=(f+G)/he,this._y=(D+$)/he,this._z=.25*he}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let o=t.dot(i)+1;return o<Number.EPSILON?(o=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=o):(this._x=0,this._y=-t.z,this._z=t.y,this._w=o)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=o),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(qi.clamp(this.dot(t),-1,1)))}rotateTowards(t,i){const o=this.angleTo(t);if(o===0)return this;const l=Math.min(1,i/o);return this.slerp(t,l),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,i){return i!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const o=t._x,l=t._y,f=t._z,B=t._w,M=i._x,D=i._y,G=i._z,$=i._w;return this._x=o*$+B*M+l*G-f*D,this._y=l*$+B*D+f*M-o*G,this._z=f*$+B*G+o*D-l*M,this._w=B*$-o*M-l*D-f*G,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const o=this._x,l=this._y,f=this._z,B=this._w;let M=B*t._w+o*t._x+l*t._y+f*t._z;if(M<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,M=-M):this.copy(t),M>=1)return this._w=B,this._x=o,this._y=l,this._z=f,this;const D=1-M*M;if(D<=Number.EPSILON){const he=1-i;return this._w=he*B+i*this._w,this._x=he*o+i*this._x,this._y=he*l+i*this._y,this._z=he*f+i*this._z,this.normalize(),this._onChangeCallback(),this}const G=Math.sqrt(D),$=Math.atan2(G,M),ie=Math.sin((1-i)*$)/G,oe=Math.sin(i*$)/G;return this._w=B*ie+this._w*oe,this._x=o*ie+this._x*oe,this._y=l*ie+this._y*oe,this._z=f*ie+this._z*oe,this._onChangeCallback(),this}slerpQuaternions(t,i,o){this.copy(t).slerp(i,o)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Mo.prototype.isQuaternion=!0;class Je{constructor(t=0,i=0,o=0){this.x=t,this.y=i,this.z=o}set(t,i,o){return o===void 0&&(o=this.z),this.x=t,this.y=i,this.z=o,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t,i){return i!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ed.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(Ed.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,o=this.y,l=this.z,f=t.elements;return this.x=f[0]*i+f[3]*o+f[6]*l,this.y=f[1]*i+f[4]*o+f[7]*l,this.z=f[2]*i+f[5]*o+f[8]*l,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,o=this.y,l=this.z,f=t.elements,B=1/(f[3]*i+f[7]*o+f[11]*l+f[15]);return this.x=(f[0]*i+f[4]*o+f[8]*l+f[12])*B,this.y=(f[1]*i+f[5]*o+f[9]*l+f[13])*B,this.z=(f[2]*i+f[6]*o+f[10]*l+f[14])*B,this}applyQuaternion(t){const i=this.x,o=this.y,l=this.z,f=t.x,B=t.y,M=t.z,D=t.w,G=D*i+B*l-M*o,$=D*o+M*i-f*l,ie=D*l+f*o-B*i,oe=-f*i-B*o-M*l;return this.x=G*D+oe*-f+$*-M-ie*-B,this.y=$*D+oe*-B+ie*-f-G*-M,this.z=ie*D+oe*-M+G*-B-$*-f,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,o=this.y,l=this.z,f=t.elements;return this.x=f[0]*i+f[4]*o+f[8]*l,this.y=f[1]*i+f[5]*o+f[9]*l,this.z=f[2]*i+f[6]*o+f[10]*l,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(t,Math.min(i,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,o){return this.x=t.x+(i.x-t.x)*o,this.y=t.y+(i.y-t.y)*o,this.z=t.z+(i.z-t.z)*o,this}cross(t,i){return i!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)}crossVectors(t,i){const o=t.x,l=t.y,f=t.z,B=i.x,M=i.y,D=i.z;return this.x=l*D-f*M,this.y=f*B-o*D,this.z=o*M-l*B,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const o=t.dot(this)/i;return this.copy(t).multiplyScalar(o)}projectOnPlane(t){return xd.copy(this).projectOnVector(t),this.sub(xd)}reflect(t){return this.sub(xd.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const o=this.dot(t)/i;return Math.acos(qi.clamp(o,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,o=this.y-t.y,l=this.z-t.z;return i*i+o*o+l*l}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,o){const l=Math.sin(i)*t;return this.x=l*Math.sin(o),this.y=Math.cos(i)*t,this.z=l*Math.cos(o),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,o){return this.x=t*Math.sin(i),this.y=o,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),o=this.setFromMatrixColumn(t,1).length(),l=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=o,this.z=l,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,4*i)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,3*i)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i,o){return o!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Je.prototype.isVector3=!0;const xd=new Je,Ed=new Mo;class $o{constructor(t=new Je(1/0,1/0,1/0),i=new Je(-1/0,-1/0,-1/0)){this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){let i=1/0,o=1/0,l=1/0,f=-1/0,B=-1/0,M=-1/0;for(let D=0,G=t.length;D<G;D+=3){const $=t[D],ie=t[D+1],oe=t[D+2];$<i&&(i=$),ie<o&&(o=ie),oe<l&&(l=oe),$>f&&(f=$),ie>B&&(B=ie),oe>M&&(M=oe)}return this.min.set(i,o,l),this.max.set(f,B,M),this}setFromBufferAttribute(t){let i=1/0,o=1/0,l=1/0,f=-1/0,B=-1/0,M=-1/0;for(let D=0,G=t.count;D<G;D++){const $=t.getX(D),ie=t.getY(D),oe=t.getZ(D);$<i&&(i=$),ie<o&&(o=ie),oe<l&&(l=oe),$>f&&(f=$),ie>B&&(B=ie),oe>M&&(M=oe)}return this.min.set(i,o,l),this.max.set(f,B,M),this}setFromPoints(t){this.makeEmpty();for(let i=0,o=t.length;i<o;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const o=Uc.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return t===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Je),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Je),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const i=t.geometry;i!==void 0&&(i.boundingBox===null&&i.computeBoundingBox(),Eh.copy(i.boundingBox),Eh.applyMatrix4(t.matrixWorld),this.union(Eh));const o=t.children;for(let l=0,f=o.length;l<f;l++)this.expandByObject(o[l]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),i=new Je),i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Uc),Uc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,o;return t.normal.x>0?(i=t.normal.x*this.min.x,o=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,o=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,o+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,o+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,o+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,o+=t.normal.z*this.min.z),i<=-t.constant&&o>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ja),pc.subVectors(this.max,Ja),dc.subVectors(t.a,Ja),Gc.subVectors(t.b,Ja),fc.subVectors(t.c,Ja),$s.subVectors(Gc,dc),Hc.subVectors(fc,Gc),Hl.subVectors(dc,fc);let i=[0,-$s.z,$s.y,0,-Hc.z,Hc.y,0,-Hl.z,Hl.y,$s.z,0,-$s.x,Hc.z,0,-Hc.x,Hl.z,0,-Hl.x,-$s.y,$s.x,0,-Hc.y,Hc.x,0,-Hl.y,Hl.x,0];return!!T(i,dc,Gc,fc,pc)&&(i=[1,0,0,0,1,0,0,0,1],!!T(i,dc,Gc,fc,pc)&&(zo.crossVectors($s,Hc),i=[zo.x,zo.y,zo.z],T(i,dc,Gc,fc,pc)))}clampPoint(t,i){return i===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),i=new Je),i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Uc.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Uc).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(qa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),qa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),qa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),qa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),qa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),qa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),qa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),qa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(qa),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}$o.prototype.isBox3=!0;const qa=[new Je,new Je,new Je,new Je,new Je,new Je,new Je,new Je],Uc=new Je,Eh=new $o,dc=new Je,Gc=new Je,fc=new Je,$s=new Je,Hc=new Je,Hl=new Je,Ja=new Je,pc=new Je,zo=new Je,bu=new Je,h0=new $o,Cm=new Je,Mm=new Je,Tm=new Je;class ea{constructor(t=new Je,i=-1){this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const o=this.center;i!==void 0?o.copy(i):h0.setFromPoints(t).getCenter(o);let l=0;for(let f=0,B=t.length;f<B;f++)l=Math.max(l,o.distanceToSquared(t[f]));return this.radius=Math.sqrt(l),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const o=this.center.distanceToSquared(t);return i===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),i=new Je),i.copy(t),o>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return t===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new $o),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Tm.subVectors(t,this.center);const i=Tm.lengthSq();if(i>this.radius*this.radius){const o=Math.sqrt(i),l=.5*(o-this.radius);this.center.add(Tm.multiplyScalar(l/o)),this.radius+=l}return this}union(t){return Mm.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(Cm.copy(t.center).add(Mm)),this.expandByPoint(Cm.copy(t.center).sub(Mm)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Za=new Je,Ao=new Je,mc=new Je,Na=new Je,qf=new Je,zc=new Je,Jf=new Je;class zl{constructor(t=new Je,i=new Je(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i===void 0&&(console.warn("THREE.Ray: .at() target is now required"),i=new Je),i.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Za)),this}closestPointToPoint(t,i){i===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),i=new Je),i.subVectors(t,this.origin);const o=i.dot(this.direction);return o<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(o).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=Za.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(Za.copy(this.direction).multiplyScalar(i).add(this.origin),Za.distanceToSquared(t))}distanceSqToSegment(t,i,o,l){Ao.copy(t).add(i).multiplyScalar(.5),mc.copy(i).sub(t).normalize(),Na.copy(this.origin).sub(Ao);const f=.5*t.distanceTo(i),B=-this.direction.dot(mc),M=Na.dot(this.direction),D=-Na.dot(mc),G=Na.lengthSq(),$=Math.abs(1-B*B);let ie,oe,he,ye;if($>0)if(ie=B*D-M,oe=B*M-D,ye=f*$,ie>=0)if(oe>=-ye)if(oe<=ye){const we=1/$;he=(ie*=we)*(ie+B*(oe*=we)+2*M)+oe*(B*ie+oe+2*D)+G}else oe=f,he=-(ie=Math.max(0,-(B*oe+M)))*ie+oe*(oe+2*D)+G;else oe=-f,he=-(ie=Math.max(0,-(B*oe+M)))*ie+oe*(oe+2*D)+G;else oe<=-ye?he=-(ie=Math.max(0,-(-B*f+M)))*ie+(oe=ie>0?-f:Math.min(Math.max(-f,-D),f))*(oe+2*D)+G:oe<=ye?(ie=0,he=(oe=Math.min(Math.max(-f,-D),f))*(oe+2*D)+G):he=-(ie=Math.max(0,-(B*f+M)))*ie+(oe=ie>0?f:Math.min(Math.max(-f,-D),f))*(oe+2*D)+G;else oe=B>0?-f:f,he=-(ie=Math.max(0,-(B*oe+M)))*ie+oe*(oe+2*D)+G;return o&&o.copy(this.direction).multiplyScalar(ie).add(this.origin),l&&l.copy(mc).multiplyScalar(oe).add(Ao),he}intersectSphere(t,i){Za.subVectors(t.center,this.origin);const o=Za.dot(this.direction),l=Za.dot(Za)-o*o,f=t.radius*t.radius;if(l>f)return null;const B=Math.sqrt(f-l),M=o-B,D=o+B;return M<0&&D<0?null:M<0?this.at(D,i):this.at(M,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const o=-(this.origin.dot(t.normal)+t.constant)/i;return o>=0?o:null}intersectPlane(t,i){const o=this.distanceToPlane(t);return o===null?null:this.at(o,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0?!0:t.normal.dot(this.direction)*i<0}intersectBox(t,i){let o,l,f,B,M,D;const G=1/this.direction.x,$=1/this.direction.y,ie=1/this.direction.z,oe=this.origin;return G>=0?(o=(t.min.x-oe.x)*G,l=(t.max.x-oe.x)*G):(o=(t.max.x-oe.x)*G,l=(t.min.x-oe.x)*G),$>=0?(f=(t.min.y-oe.y)*$,B=(t.max.y-oe.y)*$):(f=(t.max.y-oe.y)*$,B=(t.min.y-oe.y)*$),o>B||f>l?null:((f>o||o!=o)&&(o=f),(B<l||l!=l)&&(l=B),ie>=0?(M=(t.min.z-oe.z)*ie,D=(t.max.z-oe.z)*ie):(M=(t.max.z-oe.z)*ie,D=(t.min.z-oe.z)*ie),o>D||M>l?null:((M>o||o!=o)&&(o=M),(D<l||l!=l)&&(l=D),l<0?null:this.at(o>=0?o:l,i)))}intersectsBox(t){return this.intersectBox(t,Za)!==null}intersectTriangle(t,i,o,l,f){qf.subVectors(i,t),zc.subVectors(o,t),Jf.crossVectors(qf,zc);let B,M=this.direction.dot(Jf);if(M>0){if(l)return null;B=1}else{if(!(M<0))return null;B=-1,M=-M}Na.subVectors(this.origin,t);const D=B*this.direction.dot(zc.crossVectors(Na,zc));if(D<0)return null;const G=B*this.direction.dot(qf.cross(Na));if(G<0||D+G>M)return null;const $=-B*Na.dot(Jf);return $<0?null:this.at($/M,f)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ir{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,i,o,l,f,B,M,D,G,$,ie,oe,he,ye,we,be){const ke=this.elements;return ke[0]=t,ke[4]=i,ke[8]=o,ke[12]=l,ke[1]=f,ke[5]=B,ke[9]=M,ke[13]=D,ke[2]=G,ke[6]=$,ke[10]=ie,ke[14]=oe,ke[3]=he,ke[7]=ye,ke[11]=we,ke[15]=be,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ir().fromArray(this.elements)}copy(t){const i=this.elements,o=t.elements;return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],this}copyPosition(t){const i=this.elements,o=t.elements;return i[12]=o[12],i[13]=o[13],i[14]=o[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,o){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}makeBasis(t,i,o){return this.set(t.x,i.x,o.x,0,t.y,i.y,o.y,0,t.z,i.z,o.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,o=t.elements,l=1/bh.setFromMatrixColumn(t,0).length(),f=1/bh.setFromMatrixColumn(t,1).length(),B=1/bh.setFromMatrixColumn(t,2).length();return i[0]=o[0]*l,i[1]=o[1]*l,i[2]=o[2]*l,i[3]=0,i[4]=o[4]*f,i[5]=o[5]*f,i[6]=o[6]*f,i[7]=0,i[8]=o[8]*B,i[9]=o[9]*B,i[10]=o[10]*B,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const i=this.elements,o=t.x,l=t.y,f=t.z,B=Math.cos(o),M=Math.sin(o),D=Math.cos(l),G=Math.sin(l),$=Math.cos(f),ie=Math.sin(f);if(t.order==="XYZ"){const oe=B*$,he=B*ie,ye=M*$,we=M*ie;i[0]=D*$,i[4]=-D*ie,i[8]=G,i[1]=he+ye*G,i[5]=oe-we*G,i[9]=-M*D,i[2]=we-oe*G,i[6]=ye+he*G,i[10]=B*D}else if(t.order==="YXZ"){const oe=D*$,he=D*ie,ye=G*$,we=G*ie;i[0]=oe+we*M,i[4]=ye*M-he,i[8]=B*G,i[1]=B*ie,i[5]=B*$,i[9]=-M,i[2]=he*M-ye,i[6]=we+oe*M,i[10]=B*D}else if(t.order==="ZXY"){const oe=D*$,he=D*ie,ye=G*$,we=G*ie;i[0]=oe-we*M,i[4]=-B*ie,i[8]=ye+he*M,i[1]=he+ye*M,i[5]=B*$,i[9]=we-oe*M,i[2]=-B*G,i[6]=M,i[10]=B*D}else if(t.order==="ZYX"){const oe=B*$,he=B*ie,ye=M*$,we=M*ie;i[0]=D*$,i[4]=ye*G-he,i[8]=oe*G+we,i[1]=D*ie,i[5]=we*G+oe,i[9]=he*G-ye,i[2]=-G,i[6]=M*D,i[10]=B*D}else if(t.order==="YZX"){const oe=B*D,he=B*G,ye=M*D,we=M*G;i[0]=D*$,i[4]=we-oe*ie,i[8]=ye*ie+he,i[1]=ie,i[5]=B*$,i[9]=-M*$,i[2]=-G*$,i[6]=he*ie+ye,i[10]=oe-we*ie}else if(t.order==="XZY"){const oe=B*D,he=B*G,ye=M*D,we=M*G;i[0]=D*$,i[4]=-ie,i[8]=G*$,i[1]=oe*ie+we,i[5]=B*$,i[9]=he*ie-ye,i[2]=ye*ie-he,i[6]=M*$,i[10]=we*ie+oe}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(_h,t,Zf)}lookAt(t,i,o){const l=this.elements;return ka.subVectors(t,i),ka.lengthSq()===0&&(ka.z=1),ka.normalize(),ul.crossVectors(o,ka),ul.lengthSq()===0&&(Math.abs(o.z)===1?ka.x+=1e-4:ka.z+=1e-4,ka.normalize(),ul.crossVectors(o,ka)),ul.normalize(),wh.crossVectors(ka,ul),l[0]=ul.x,l[4]=wh.x,l[8]=ka.x,l[1]=ul.y,l[5]=wh.y,l[9]=ka.y,l[2]=ul.z,l[6]=wh.z,l[10]=ka.z,this}multiply(t,i){return i!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const o=t.elements,l=i.elements,f=this.elements,B=o[0],M=o[4],D=o[8],G=o[12],$=o[1],ie=o[5],oe=o[9],he=o[13],ye=o[2],we=o[6],be=o[10],ke=o[14],Xe=o[3],it=o[7],lt=o[11],pt=o[15],mt=l[0],ot=l[4],kt=l[8],gt=l[12],Ht=l[1],Zt=l[5],Qt=l[9],en=l[13],Wn=l[2],ii=l[6],lr=l[10],oi=l[14],qn=l[3],$i=l[7],Ji=l[11],Xr=l[15];return f[0]=B*mt+M*Ht+D*Wn+G*qn,f[4]=B*ot+M*Zt+D*ii+G*$i,f[8]=B*kt+M*Qt+D*lr+G*Ji,f[12]=B*gt+M*en+D*oi+G*Xr,f[1]=$*mt+ie*Ht+oe*Wn+he*qn,f[5]=$*ot+ie*Zt+oe*ii+he*$i,f[9]=$*kt+ie*Qt+oe*lr+he*Ji,f[13]=$*gt+ie*en+oe*oi+he*Xr,f[2]=ye*mt+we*Ht+be*Wn+ke*qn,f[6]=ye*ot+we*Zt+be*ii+ke*$i,f[10]=ye*kt+we*Qt+be*lr+ke*Ji,f[14]=ye*gt+we*en+be*oi+ke*Xr,f[3]=Xe*mt+it*Ht+lt*Wn+pt*qn,f[7]=Xe*ot+it*Zt+lt*ii+pt*$i,f[11]=Xe*kt+it*Qt+lt*lr+pt*Ji,f[15]=Xe*gt+it*en+lt*oi+pt*Xr,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],o=t[4],l=t[8],f=t[12],B=t[1],M=t[5],D=t[9],G=t[13],$=t[2],ie=t[6],oe=t[10],he=t[14];return t[3]*(+f*D*ie-l*G*ie-f*M*oe+o*G*oe+l*M*he-o*D*he)+t[7]*(+i*D*he-i*G*oe+f*B*oe-l*B*he+l*G*$-f*D*$)+t[11]*(+i*G*ie-i*M*he-f*B*ie+o*B*he+f*M*$-o*G*$)+t[15]*(-l*M*$-i*D*ie+i*M*oe+l*B*ie-o*B*oe+o*D*$)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,o){const l=this.elements;return t.isVector3?(l[12]=t.x,l[13]=t.y,l[14]=t.z):(l[12]=t,l[13]=i,l[14]=o),this}invert(){const t=this.elements,i=t[0],o=t[1],l=t[2],f=t[3],B=t[4],M=t[5],D=t[6],G=t[7],$=t[8],ie=t[9],oe=t[10],he=t[11],ye=t[12],we=t[13],be=t[14],ke=t[15],Xe=ie*be*G-we*oe*G+we*D*he-M*be*he-ie*D*ke+M*oe*ke,it=ye*oe*G-$*be*G-ye*D*he+B*be*he+$*D*ke-B*oe*ke,lt=$*we*G-ye*ie*G+ye*M*he-B*we*he-$*M*ke+B*ie*ke,pt=ye*ie*D-$*we*D-ye*M*oe+B*we*oe+$*M*be-B*ie*be,mt=i*Xe+o*it+l*lt+f*pt;if(mt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ot=1/mt;return t[0]=Xe*ot,t[1]=(we*oe*f-ie*be*f-we*l*he+o*be*he+ie*l*ke-o*oe*ke)*ot,t[2]=(M*be*f-we*D*f+we*l*G-o*be*G-M*l*ke+o*D*ke)*ot,t[3]=(ie*D*f-M*oe*f-ie*l*G+o*oe*G+M*l*he-o*D*he)*ot,t[4]=it*ot,t[5]=($*be*f-ye*oe*f+ye*l*he-i*be*he-$*l*ke+i*oe*ke)*ot,t[6]=(ye*D*f-B*be*f-ye*l*G+i*be*G+B*l*ke-i*D*ke)*ot,t[7]=(B*oe*f-$*D*f+$*l*G-i*oe*G-B*l*he+i*D*he)*ot,t[8]=lt*ot,t[9]=(ye*ie*f-$*we*f-ye*o*he+i*we*he+$*o*ke-i*ie*ke)*ot,t[10]=(B*we*f-ye*M*f+ye*o*G-i*we*G-B*o*ke+i*M*ke)*ot,t[11]=($*M*f-B*ie*f-$*o*G+i*ie*G+B*o*he-i*M*he)*ot,t[12]=pt*ot,t[13]=($*we*l-ye*ie*l+ye*o*oe-i*we*oe-$*o*be+i*ie*be)*ot,t[14]=(ye*M*l-B*we*l-ye*o*D+i*we*D+B*o*be-i*M*be)*ot,t[15]=(B*ie*l-$*M*l+$*o*D-i*ie*D-B*o*oe+i*M*oe)*ot,this}scale(t){const i=this.elements,o=t.x,l=t.y,f=t.z;return i[0]*=o,i[4]*=l,i[8]*=f,i[1]*=o,i[5]*=l,i[9]*=f,i[2]*=o,i[6]*=l,i[10]*=f,i[3]*=o,i[7]*=l,i[11]*=f,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],l=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,o,l))}makeTranslation(t,i,o){return this.set(1,0,0,t,0,1,0,i,0,0,1,o,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),o=Math.sin(t);return this.set(1,0,0,0,0,i,-o,0,0,o,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),o=Math.sin(t);return this.set(i,0,o,0,0,1,0,0,-o,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),o=Math.sin(t);return this.set(i,-o,0,0,o,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const o=Math.cos(i),l=Math.sin(i),f=1-o,B=t.x,M=t.y,D=t.z,G=f*B,$=f*M;return this.set(G*B+o,G*M-l*D,G*D+l*M,0,G*M+l*D,$*M+o,$*D-l*B,0,G*D-l*M,$*D+l*B,f*D*D+o,0,0,0,0,1),this}makeScale(t,i,o){return this.set(t,0,0,0,0,i,0,0,0,0,o,0,0,0,0,1),this}makeShear(t,i,o){return this.set(1,i,o,0,t,1,o,0,t,i,1,0,0,0,0,1),this}compose(t,i,o){const l=this.elements,f=i._x,B=i._y,M=i._z,D=i._w,G=f+f,$=B+B,ie=M+M,oe=f*G,he=f*$,ye=f*ie,we=B*$,be=B*ie,ke=M*ie,Xe=D*G,it=D*$,lt=D*ie,pt=o.x,mt=o.y,ot=o.z;return l[0]=(1-(we+ke))*pt,l[1]=(he+lt)*pt,l[2]=(ye-it)*pt,l[3]=0,l[4]=(he-lt)*mt,l[5]=(1-(oe+ke))*mt,l[6]=(be+Xe)*mt,l[7]=0,l[8]=(ye+it)*ot,l[9]=(be-Xe)*ot,l[10]=(1-(oe+we))*ot,l[11]=0,l[12]=t.x,l[13]=t.y,l[14]=t.z,l[15]=1,this}decompose(t,i,o){const l=this.elements;let f=bh.set(l[0],l[1],l[2]).length();const B=bh.set(l[4],l[5],l[6]).length(),M=bh.set(l[8],l[9],l[10]).length();this.determinant()<0&&(f=-f),t.x=l[12],t.y=l[13],t.z=l[14],Vo.copy(this);const D=1/f,G=1/B,$=1/M;return Vo.elements[0]*=D,Vo.elements[1]*=D,Vo.elements[2]*=D,Vo.elements[4]*=G,Vo.elements[5]*=G,Vo.elements[6]*=G,Vo.elements[8]*=$,Vo.elements[9]*=$,Vo.elements[10]*=$,i.setFromRotationMatrix(Vo),o.x=f,o.y=B,o.z=M,this}makePerspective(t,i,o,l,f,B){B===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const M=this.elements,D=2*f/(i-t),G=2*f/(o-l),$=(i+t)/(i-t),ie=(o+l)/(o-l),oe=-(B+f)/(B-f),he=-2*B*f/(B-f);return M[0]=D,M[4]=0,M[8]=$,M[12]=0,M[1]=0,M[5]=G,M[9]=ie,M[13]=0,M[2]=0,M[6]=0,M[10]=oe,M[14]=he,M[3]=0,M[7]=0,M[11]=-1,M[15]=0,this}makeOrthographic(t,i,o,l,f,B){const M=this.elements,D=1/(i-t),G=1/(o-l),$=1/(B-f),ie=(i+t)*D,oe=(o+l)*G,he=(B+f)*$;return M[0]=2*D,M[4]=0,M[8]=0,M[12]=-ie,M[1]=0,M[5]=2*G,M[9]=0,M[13]=-oe,M[2]=0,M[6]=0,M[10]=-2*$,M[14]=-he,M[3]=0,M[7]=0,M[11]=0,M[15]=1,this}equals(t){const i=this.elements,o=t.elements;for(let l=0;l<16;l++)if(i[l]!==o[l])return!1;return!0}fromArray(t,i=0){for(let o=0;o<16;o++)this.elements[o]=t[o+i];return this}toArray(t=[],i=0){const o=this.elements;return t[i]=o[0],t[i+1]=o[1],t[i+2]=o[2],t[i+3]=o[3],t[i+4]=o[4],t[i+5]=o[5],t[i+6]=o[6],t[i+7]=o[7],t[i+8]=o[8],t[i+9]=o[9],t[i+10]=o[10],t[i+11]=o[11],t[i+12]=o[12],t[i+13]=o[13],t[i+14]=o[14],t[i+15]=o[15],t}}ir.prototype.isMatrix4=!0;const bh=new Je,Vo=new ir,_h=new Je(0,0,0),Zf=new Je(1,1,1),ul=new Je,wh=new Je,ka=new Je,_u=new ir,d0=new Mo;class wu{constructor(t=0,i=0,o=0,l=wu.DefaultOrder){this._x=t,this._y=i,this._z=o,this._order=l}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,o,l){return this._x=t,this._y=i,this._z=o,this._order=l||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i,o){const l=qi.clamp,f=t.elements,B=f[0],M=f[4],D=f[8],G=f[1],$=f[5],ie=f[9],oe=f[2],he=f[6],ye=f[10];switch(i=i||this._order){case"XYZ":this._y=Math.asin(l(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(-ie,ye),this._z=Math.atan2(-M,B)):(this._x=Math.atan2(he,$),this._z=0);break;case"YXZ":this._x=Math.asin(-l(ie,-1,1)),Math.abs(ie)<.9999999?(this._y=Math.atan2(D,ye),this._z=Math.atan2(G,$)):(this._y=Math.atan2(-oe,B),this._z=0);break;case"ZXY":this._x=Math.asin(l(he,-1,1)),Math.abs(he)<.9999999?(this._y=Math.atan2(-oe,ye),this._z=Math.atan2(-M,$)):(this._y=0,this._z=Math.atan2(G,B));break;case"ZYX":this._y=Math.asin(-l(oe,-1,1)),Math.abs(oe)<.9999999?(this._x=Math.atan2(he,ye),this._z=Math.atan2(G,B)):(this._x=0,this._z=Math.atan2(-M,$));break;case"YZX":this._z=Math.asin(l(G,-1,1)),Math.abs(G)<.9999999?(this._x=Math.atan2(-ie,$),this._y=Math.atan2(-oe,B)):(this._x=0,this._y=Math.atan2(D,ye));break;case"XZY":this._z=Math.asin(-l(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(he,$),this._y=Math.atan2(D,B)):(this._x=Math.atan2(-ie,ye),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,o!==!1&&this._onChangeCallback(),this}setFromQuaternion(t,i,o){return _u.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_u,i,o)}setFromVector3(t,i){return this.set(t.x,t.y,t.z,i||this._order)}reorder(t){return d0.setFromEuler(this),this.setFromQuaternion(d0,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Je(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}wu.prototype.isEuler=!0,wu.DefaultOrder="XYZ",wu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Sm{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!=0}}let tv=0;const f0=new Je,Ch=new Mo,gc=new ir,$f=new Je,bd=new Je,nv=new Je,iv=new Mo,p0=new Je(1,0,0),m0=new Je(0,1,0),g0=new Je(0,0,1),rv={type:"added"},A0={type:"removed"};I.DefaultUp=new Je(0,1,0),I.DefaultMatrixAutoUpdate=!0,I.prototype=Object.assign(Object.create(U.prototype),{constructor:I,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(s){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(s),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(s){return this.quaternion.premultiply(s),this},setRotationFromAxisAngle:function(s,t){this.quaternion.setFromAxisAngle(s,t)},setRotationFromEuler:function(s){this.quaternion.setFromEuler(s,!0)},setRotationFromMatrix:function(s){this.quaternion.setFromRotationMatrix(s)},setRotationFromQuaternion:function(s){this.quaternion.copy(s)},rotateOnAxis:function(s,t){return Ch.setFromAxisAngle(s,t),this.quaternion.multiply(Ch),this},rotateOnWorldAxis:function(s,t){return Ch.setFromAxisAngle(s,t),this.quaternion.premultiply(Ch),this},rotateX:function(s){return this.rotateOnAxis(p0,s)},rotateY:function(s){return this.rotateOnAxis(m0,s)},rotateZ:function(s){return this.rotateOnAxis(g0,s)},translateOnAxis:function(s,t){return f0.copy(s).applyQuaternion(this.quaternion),this.position.add(f0.multiplyScalar(t)),this},translateX:function(s){return this.translateOnAxis(p0,s)},translateY:function(s){return this.translateOnAxis(m0,s)},translateZ:function(s){return this.translateOnAxis(g0,s)},localToWorld:function(s){return s.applyMatrix4(this.matrixWorld)},worldToLocal:function(s){return s.applyMatrix4(gc.copy(this.matrixWorld).invert())},lookAt:function(s,t,i){s.isVector3?$f.copy(s):$f.set(s,t,i);const o=this.parent;this.updateWorldMatrix(!0,!1),bd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gc.lookAt(bd,$f,this.up):gc.lookAt($f,bd,this.up),this.quaternion.setFromRotationMatrix(gc),o&&(gc.extractRotation(o.matrixWorld),Ch.setFromRotationMatrix(gc),this.quaternion.premultiply(Ch.invert()))},add:function(s){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return s===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",s),this):(s&&s.isObject3D?(s.parent!==null&&s.parent.remove(s),s.parent=this,this.children.push(s),s.dispatchEvent(rv)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",s),this)},remove:function(s){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(s);return t!==-1&&(s.parent=null,this.children.splice(t,1),s.dispatchEvent(A0)),this},clear:function(){for(let s=0;s<this.children.length;s++){const t=this.children[s];t.parent=null,t.dispatchEvent(A0)}return this.children.length=0,this},attach:function(s){return this.updateWorldMatrix(!0,!1),gc.copy(this.matrixWorld).invert(),s.parent!==null&&(s.parent.updateWorldMatrix(!0,!1),gc.multiply(s.parent.matrixWorld)),s.applyMatrix4(gc),this.add(s),s.updateWorldMatrix(!1,!0),this},getObjectById:function(s){return this.getObjectByProperty("id",s)},getObjectByName:function(s){return this.getObjectByProperty("name",s)},getObjectByProperty:function(s,t){if(this[s]===t)return this;for(let i=0,o=this.children.length;i<o;i++){const l=this.children[i].getObjectByProperty(s,t);if(l!==void 0)return l}},getWorldPosition:function(s){return s===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),s=new Je),this.updateWorldMatrix(!0,!1),s.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(s){return s===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),s=new Mo),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bd,s,nv),s},getWorldScale:function(s){return s===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),s=new Je),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bd,iv,s),s},getWorldDirection:function(s){s===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),s=new Je),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return s.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(s){s(this);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverse(s)},traverseVisible:function(s){if(this.visible===!1)return;s(this);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverseVisible(s)},traverseAncestors:function(s){const t=this.parent;t!==null&&(s(t),t.traverseAncestors(s))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(s){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||s)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,s=!0);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].updateMatrixWorld(s)},updateWorldMatrix:function(s,t){const i=this.parent;if(s===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const o=this.children;for(let l=0,f=o.length;l<f;l++)o[l].updateWorldMatrix(!1,!0)}},toJSON:function(s){function t(B,M){return B[M.uuid]===void 0&&(B[M.uuid]=M.toJSON(s)),M.uuid}function i(B){const M=[];for(const D in B){const G=B[D];delete G.metadata,M.push(G)}return M}const o=s===void 0||typeof s=="string",l={};o&&(s={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},l.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const f={};if(f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.castShadow===!0&&(f.castShadow=!0),this.receiveShadow===!0&&(f.receiveShadow=!0),this.visible===!1&&(f.visible=!1),this.frustumCulled===!1&&(f.frustumCulled=!1),this.renderOrder!==0&&(f.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(f.userData=this.userData),f.layers=this.layers.mask,f.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(f.matrixAutoUpdate=!1),this.isInstancedMesh&&(f.type="InstancedMesh",f.count=this.count,f.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(f.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){f.geometry=t(s.geometries,this.geometry);const B=this.geometry.parameters;if(B!==void 0&&B.shapes!==void 0){const M=B.shapes;if(Array.isArray(M))for(let D=0,G=M.length;D<G;D++){const $=M[D];t(s.shapes,$)}else t(s.shapes,M)}}if(this.isSkinnedMesh&&(f.bindMode=this.bindMode,f.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(t(s.skeletons,this.skeleton),f.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const B=[];for(let M=0,D=this.material.length;M<D;M++)B.push(t(s.materials,this.material[M]));f.material=B}else f.material=t(s.materials,this.material);if(this.children.length>0){f.children=[];for(let B=0;B<this.children.length;B++)f.children.push(this.children[B].toJSON(s).object)}if(this.animations.length>0){f.animations=[];for(let B=0;B<this.animations.length;B++){const M=this.animations[B];f.animations.push(t(s.animations,M))}}if(o){const B=i(s.geometries),M=i(s.materials),D=i(s.textures),G=i(s.images),$=i(s.shapes),ie=i(s.skeletons),oe=i(s.animations);B.length>0&&(l.geometries=B),M.length>0&&(l.materials=M),D.length>0&&(l.textures=D),G.length>0&&(l.images=G),$.length>0&&(l.shapes=$),ie.length>0&&(l.skeletons=ie),oe.length>0&&(l.animations=oe)}return l.object=f,l},clone:function(s){return new this.constructor().copy(this,s)},copy:function(s,t=!0){if(this.name=s.name,this.up.copy(s.up),this.position.copy(s.position),this.rotation.order=s.rotation.order,this.quaternion.copy(s.quaternion),this.scale.copy(s.scale),this.matrix.copy(s.matrix),this.matrixWorld.copy(s.matrixWorld),this.matrixAutoUpdate=s.matrixAutoUpdate,this.matrixWorldNeedsUpdate=s.matrixWorldNeedsUpdate,this.layers.mask=s.layers.mask,this.visible=s.visible,this.castShadow=s.castShadow,this.receiveShadow=s.receiveShadow,this.frustumCulled=s.frustumCulled,this.renderOrder=s.renderOrder,this.userData=JSON.parse(JSON.stringify(s.userData)),t===!0)for(let i=0;i<s.children.length;i++){const o=s.children[i];this.add(o.clone())}return this}});const Im=new Je,sv=new Je,ov=new ls;class hl{constructor(t=new Je(1,0,0),i=0){this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,o,l){return this.normal.set(t,i,o),this.constant=l,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,o){const l=Im.subVectors(o,i).cross(sv.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(l,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),i=new Je),i.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,i){i===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new Je);const o=t.delta(Im),l=this.normal.dot(o);if(l===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;const f=-(t.start.dot(this.normal)+this.constant)/l;return f<0||f>1?null:i.copy(o).multiplyScalar(f).add(t.start)}intersectsLine(t){const i=this.distanceToPoint(t.start),o=this.distanceToPoint(t.end);return i<0&&o>0||o<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Je),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const o=i||ov.getNormalMatrix(t),l=this.coplanarPoint(Im).applyMatrix4(t),f=this.normal.applyMatrix3(o).normalize();return this.constant=-l.dot(f),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}hl.prototype.isPlane=!0;const dl=new Je,Ac=new Je,Rm=new Je,vc=new Je,Mh=new Je,Th=new Je,v0=new Je,Bm=new Je,Lm=new Je,Dm=new Je;class vo{constructor(t=new Je,i=new Je,o=new Je){this.a=t,this.b=i,this.c=o}static getNormal(t,i,o,l){l===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),l=new Je),l.subVectors(o,i),dl.subVectors(t,i),l.cross(dl);const f=l.lengthSq();return f>0?l.multiplyScalar(1/Math.sqrt(f)):l.set(0,0,0)}static getBarycoord(t,i,o,l,f){dl.subVectors(l,i),Ac.subVectors(o,i),Rm.subVectors(t,i);const B=dl.dot(dl),M=dl.dot(Ac),D=dl.dot(Rm),G=Ac.dot(Ac),$=Ac.dot(Rm),ie=B*G-M*M;if(f===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),f=new Je),ie===0)return f.set(-2,-1,-1);const oe=1/ie,he=(G*D-M*$)*oe,ye=(B*$-M*D)*oe;return f.set(1-he-ye,ye,he)}static containsPoint(t,i,o,l){return this.getBarycoord(t,i,o,l,vc),vc.x>=0&&vc.y>=0&&vc.x+vc.y<=1}static getUV(t,i,o,l,f,B,M,D){return this.getBarycoord(t,i,o,l,vc),D.set(0,0),D.addScaledVector(f,vc.x),D.addScaledVector(B,vc.y),D.addScaledVector(M,vc.z),D}static isFrontFacing(t,i,o,l){return dl.subVectors(o,i),Ac.subVectors(t,i),dl.cross(Ac).dot(l)<0}set(t,i,o){return this.a.copy(t),this.b.copy(i),this.c.copy(o),this}setFromPointsAndIndices(t,i,o,l){return this.a.copy(t[i]),this.b.copy(t[o]),this.c.copy(t[l]),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return dl.subVectors(this.c,this.b),Ac.subVectors(this.a,this.b),.5*dl.cross(Ac).length()}getMidpoint(t){return t===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Je),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return vo.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new hl),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return vo.getBarycoord(t,this.a,this.b,this.c,i)}getUV(t,i,o,l,f){return vo.getUV(t,this.a,this.b,this.c,i,o,l,f)}containsPoint(t){return vo.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return vo.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){i===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),i=new Je);const o=this.a,l=this.b,f=this.c;let B,M;Mh.subVectors(l,o),Th.subVectors(f,o),Bm.subVectors(t,o);const D=Mh.dot(Bm),G=Th.dot(Bm);if(D<=0&&G<=0)return i.copy(o);Lm.subVectors(t,l);const $=Mh.dot(Lm),ie=Th.dot(Lm);if($>=0&&ie<=$)return i.copy(l);const oe=D*ie-$*G;if(oe<=0&&D>=0&&$<=0)return B=D/(D-$),i.copy(o).addScaledVector(Mh,B);Dm.subVectors(t,f);const he=Mh.dot(Dm),ye=Th.dot(Dm);if(ye>=0&&he<=ye)return i.copy(f);const we=he*G-D*ye;if(we<=0&&G>=0&&ye<=0)return M=G/(G-ye),i.copy(o).addScaledVector(Th,M);const be=$*ye-he*ie;if(be<=0&&ie-$>=0&&he-ye>=0)return v0.subVectors(f,l),M=(ie-$)/(ie-$+(he-ye)),i.copy(l).addScaledVector(v0,M);const ke=1/(be+we+oe);return B=we*ke,M=oe*ke,i.copy(o).addScaledVector(Mh,B).addScaledVector(Th,M)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let av=0;u.prototype=Object.assign(Object.create(U.prototype),{constructor:u,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(s){if(s!==void 0)for(const t in s){const i=s[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===1;continue}const o=this[t];o!==void 0?o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(s){function t(l){const f=[];for(const B in l){const M=l[B];delete M.metadata,f.push(M)}return f}const i=s===void 0||typeof s=="string";i&&(s={textures:{},images:{}});const o={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.color&&this.color.isColor&&(o.color=this.color.getHex()),this.roughness!==void 0&&(o.roughness=this.roughness),this.metalness!==void 0&&(o.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(o.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(o.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(o.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(o.specular=this.specular.getHex()),this.shininess!==void 0&&(o.shininess=this.shininess),this.clearcoat!==void 0&&(o.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(o.clearcoatMap=this.clearcoatMap.toJSON(s).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(o.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(s).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(o.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(s).uuid,o.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(o.map=this.map.toJSON(s).uuid),this.matcap&&this.matcap.isTexture&&(o.matcap=this.matcap.toJSON(s).uuid),this.alphaMap&&this.alphaMap.isTexture&&(o.alphaMap=this.alphaMap.toJSON(s).uuid),this.lightMap&&this.lightMap.isTexture&&(o.lightMap=this.lightMap.toJSON(s).uuid,o.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(o.aoMap=this.aoMap.toJSON(s).uuid,o.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(o.bumpMap=this.bumpMap.toJSON(s).uuid,o.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(o.normalMap=this.normalMap.toJSON(s).uuid,o.normalMapType=this.normalMapType,o.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(o.displacementMap=this.displacementMap.toJSON(s).uuid,o.displacementScale=this.displacementScale,o.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(o.roughnessMap=this.roughnessMap.toJSON(s).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(o.metalnessMap=this.metalnessMap.toJSON(s).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(o.emissiveMap=this.emissiveMap.toJSON(s).uuid),this.specularMap&&this.specularMap.isTexture&&(o.specularMap=this.specularMap.toJSON(s).uuid),this.envMap&&this.envMap.isTexture&&(o.envMap=this.envMap.toJSON(s).uuid,o.reflectivity=this.reflectivity,o.refractionRatio=this.refractionRatio,this.combine!==void 0&&(o.combine=this.combine),this.envMapIntensity!==void 0&&(o.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(o.gradientMap=this.gradientMap.toJSON(s).uuid),this.size!==void 0&&(o.size=this.size),this.shadowSide!==null&&(o.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(o.sizeAttenuation=this.sizeAttenuation),this.blending!==ja&&(o.blending=this.blending),this.side!==Os&&(o.side=this.side),this.vertexColors&&(o.vertexColors=!0),this.opacity<1&&(o.opacity=this.opacity),this.transparent===!0&&(o.transparent=this.transparent),o.depthFunc=this.depthFunc,o.depthTest=this.depthTest,o.depthWrite=this.depthWrite,o.colorWrite=this.colorWrite,o.stencilWrite=this.stencilWrite,o.stencilWriteMask=this.stencilWriteMask,o.stencilFunc=this.stencilFunc,o.stencilRef=this.stencilRef,o.stencilFuncMask=this.stencilFuncMask,o.stencilFail=this.stencilFail,o.stencilZFail=this.stencilZFail,o.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(o.rotation=this.rotation),this.polygonOffset===!0&&(o.polygonOffset=!0),this.polygonOffsetFactor!==0&&(o.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(o.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(o.linewidth=this.linewidth),this.dashSize!==void 0&&(o.dashSize=this.dashSize),this.gapSize!==void 0&&(o.gapSize=this.gapSize),this.scale!==void 0&&(o.scale=this.scale),this.dithering===!0&&(o.dithering=!0),this.alphaTest>0&&(o.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(o.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(o.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(o.wireframe=this.wireframe),this.wireframeLinewidth>1&&(o.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(o.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(o.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(o.morphTargets=!0),this.morphNormals===!0&&(o.morphNormals=!0),this.skinning===!0&&(o.skinning=!0),this.flatShading===!0&&(o.flatShading=this.flatShading),this.visible===!1&&(o.visible=!1),this.toneMapped===!1&&(o.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(o.userData=this.userData),i){const l=t(s.textures),f=t(s.images);l.length>0&&(o.textures=l),f.length>0&&(o.images=f)}return o},clone:function(){return new this.constructor().copy(this)},copy:function(s){this.name=s.name,this.fog=s.fog,this.blending=s.blending,this.side=s.side,this.vertexColors=s.vertexColors,this.opacity=s.opacity,this.transparent=s.transparent,this.blendSrc=s.blendSrc,this.blendDst=s.blendDst,this.blendEquation=s.blendEquation,this.blendSrcAlpha=s.blendSrcAlpha,this.blendDstAlpha=s.blendDstAlpha,this.blendEquationAlpha=s.blendEquationAlpha,this.depthFunc=s.depthFunc,this.depthTest=s.depthTest,this.depthWrite=s.depthWrite,this.stencilWriteMask=s.stencilWriteMask,this.stencilFunc=s.stencilFunc,this.stencilRef=s.stencilRef,this.stencilFuncMask=s.stencilFuncMask,this.stencilFail=s.stencilFail,this.stencilZFail=s.stencilZFail,this.stencilZPass=s.stencilZPass,this.stencilWrite=s.stencilWrite;const t=s.clippingPlanes;let i=null;if(t!==null){const o=t.length;i=new Array(o);for(let l=0;l!==o;++l)i[l]=t[l].clone()}return this.clippingPlanes=i,this.clipIntersection=s.clipIntersection,this.clipShadows=s.clipShadows,this.shadowSide=s.shadowSide,this.colorWrite=s.colorWrite,this.precision=s.precision,this.polygonOffset=s.polygonOffset,this.polygonOffsetFactor=s.polygonOffsetFactor,this.polygonOffsetUnits=s.polygonOffsetUnits,this.dithering=s.dithering,this.alphaTest=s.alphaTest,this.alphaToCoverage=s.alphaToCoverage,this.premultipliedAlpha=s.premultipliedAlpha,this.visible=s.visible,this.toneMapped=s.toneMapped,this.userData=JSON.parse(JSON.stringify(s.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(u.prototype,"needsUpdate",{set:function(s){s===!0&&this.version++}});const y0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fl={h:0,s:0,l:0},ep={h:0,s:0,l:0};class Fi{constructor(t,i,o){return i===void 0&&o===void 0?this.set(t):this.setRGB(t,i,o)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,i,o){return this.r=t,this.g=i,this.b=o,this}setHSL(t,i,o){if(t=qi.euclideanModulo(t,1),i=qi.clamp(i,0,1),o=qi.clamp(o,0,1),i===0)this.r=this.g=this.b=o;else{const l=o<=.5?o*(1+i):o+i-o*i,f=2*o-l;this.r=g(f,l,t+1/3),this.g=g(f,l,t),this.b=g(f,l,t-1/3)}return this}setStyle(t){function i(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let l;const f=o[1],B=o[2];switch(f){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(B))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,i(l[4]),this;if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(B))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,i(l[4]),this;break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(B)){const M=parseFloat(l[1])/360,D=parseInt(l[2],10)/100,G=parseInt(l[3],10)/100;return i(l[4]),this.setHSL(M,D,G)}}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const l=o[1],f=l.length;if(f===3)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(f===6)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const i=y0[t];return i!==void 0?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,i=2){return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}copyLinearToGamma(t,i=2){const o=i>0?1/i:1;return this.r=Math.pow(t.r,o),this.g=Math.pow(t.g,o),this.b=Math.pow(t.b,o),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=C(t.r),this.g=C(t.g),this.b=C(t.b),this}copyLinearToSRGB(t){return this.r=v(t.r),this.g=v(t.g),this.b=v(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const i=this.r,o=this.g,l=this.b,f=Math.max(i,o,l),B=Math.min(i,o,l);let M,D;const G=(B+f)/2;if(B===f)M=0,D=0;else{const $=f-B;switch(D=G<=.5?$/(f+B):$/(2-f-B),f){case i:M=(o-l)/$+(o<l?6:0);break;case o:M=(l-i)/$+2;break;case l:M=(i-o)/$+4}M/=6}return t.h=M,t.s=D,t.l=G,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,i,o){return this.getHSL(fl),fl.h+=t,fl.s+=i,fl.l+=o,this.setHSL(fl.h,fl.s,fl.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,o){return this.r=t.r+(i.r-t.r)*o,this.g=t.g+(i.g-t.g)*o,this.b=t.b+(i.b-t.b)*o,this}lerpHSL(t,i){this.getHSL(fl),t.getHSL(ep);const o=qi.lerp(fl.h,ep.h,i),l=qi.lerp(fl.s,ep.s,i),f=qi.lerp(fl.l,ep.l,i);return this.setHSL(o,l,f),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Fi.NAMES=y0,Fi.prototype.isColor=!0,Fi.prototype.r=1,Fi.prototype.g=1,Fi.prototype.b=1;class yc extends u{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new Fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this}}yc.prototype.isMeshBasicMaterial=!0;const Ws=new Je,tp=new Qn;Object.defineProperty(y.prototype,"needsUpdate",{set:function(s){s===!0&&this.version++}}),Object.assign(y.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(s){return this.usage=s,this},copy:function(s){return this.name=s.name,this.array=new s.array.constructor(s.array),this.itemSize=s.itemSize,this.count=s.count,this.normalized=s.normalized,this.usage=s.usage,this},copyAt:function(s,t,i){s*=this.itemSize,i*=t.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[s+o]=t.array[i+o];return this},copyArray:function(s){return this.array.set(s),this},copyColorsArray:function(s){const t=this.array;let i=0;for(let o=0,l=s.length;o<l;o++){let f=s[o];f===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),f=new Fi),t[i++]=f.r,t[i++]=f.g,t[i++]=f.b}return this},copyVector2sArray:function(s){const t=this.array;let i=0;for(let o=0,l=s.length;o<l;o++){let f=s[o];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),f=new Qn),t[i++]=f.x,t[i++]=f.y}return this},copyVector3sArray:function(s){const t=this.array;let i=0;for(let o=0,l=s.length;o<l;o++){let f=s[o];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),f=new Je),t[i++]=f.x,t[i++]=f.y,t[i++]=f.z}return this},copyVector4sArray:function(s){const t=this.array;let i=0;for(let o=0,l=s.length;o<l;o++){let f=s[o];f===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),f=new rs),t[i++]=f.x,t[i++]=f.y,t[i++]=f.z,t[i++]=f.w}return this},applyMatrix3:function(s){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)tp.fromBufferAttribute(this,t),tp.applyMatrix3(s),this.setXY(t,tp.x,tp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ws.fromBufferAttribute(this,t),Ws.applyMatrix3(s),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this},applyMatrix4:function(s){for(let t=0,i=this.count;t<i;t++)Ws.x=this.getX(t),Ws.y=this.getY(t),Ws.z=this.getZ(t),Ws.applyMatrix4(s),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this},applyNormalMatrix:function(s){for(let t=0,i=this.count;t<i;t++)Ws.x=this.getX(t),Ws.y=this.getY(t),Ws.z=this.getZ(t),Ws.applyNormalMatrix(s),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this},transformDirection:function(s){for(let t=0,i=this.count;t<i;t++)Ws.x=this.getX(t),Ws.y=this.getY(t),Ws.z=this.getZ(t),Ws.transformDirection(s),this.setXYZ(t,Ws.x,Ws.y,Ws.z);return this},set:function(s,t=0){return this.array.set(s,t),this},getX:function(s){return this.array[s*this.itemSize]},setX:function(s,t){return this.array[s*this.itemSize]=t,this},getY:function(s){return this.array[s*this.itemSize+1]},setY:function(s,t){return this.array[s*this.itemSize+1]=t,this},getZ:function(s){return this.array[s*this.itemSize+2]},setZ:function(s,t){return this.array[s*this.itemSize+2]=t,this},getW:function(s){return this.array[s*this.itemSize+3]},setW:function(s,t){return this.array[s*this.itemSize+3]=t,this},setXY:function(s,t,i){return s*=this.itemSize,this.array[s+0]=t,this.array[s+1]=i,this},setXYZ:function(s,t,i,o){return s*=this.itemSize,this.array[s+0]=t,this.array[s+1]=i,this.array[s+2]=o,this},setXYZW:function(s,t,i,o,l){return s*=this.itemSize,this.array[s+0]=t,this.array[s+1]=i,this.array[s+2]=o,this.array[s+3]=l,this},onUpload:function(s){return this.onUploadCallback=s,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){const s={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(s.name=this.name),this.usage!==yh&&(s.usage=this.usage),this.updateRange.offset===0&&this.updateRange.count===-1||(s.updateRange=this.updateRange),s}}),(E.prototype=Object.create(y.prototype)).constructor=E,(b.prototype=Object.create(y.prototype)).constructor=b,(m.prototype=Object.create(y.prototype)).constructor=m,(w.prototype=Object.create(y.prototype)).constructor=w,(_.prototype=Object.create(y.prototype)).constructor=_,(O.prototype=Object.create(y.prototype)).constructor=O,(R.prototype=Object.create(y.prototype)).constructor=R,(L.prototype=Object.create(y.prototype)).constructor=L,L.prototype.isFloat16BufferAttribute=!0,(P.prototype=Object.create(y.prototype)).constructor=P,(Y.prototype=Object.create(y.prototype)).constructor=Y;const lv={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};let cv=0;const Vl=new ir,Pm=new I,Sh=new Je,Ua=new $o,_d=new $o,Qo=new Je;k.prototype=Object.assign(Object.create(U.prototype),{constructor:k,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(s){return Array.isArray(s)?this.index=new(J(s)>65535?R:_)(s,1):this.index=s,this},getAttribute:function(s){return this.attributes[s]},setAttribute:function(s,t){return this.attributes[s]=t,this},deleteAttribute:function(s){return delete this.attributes[s],this},hasAttribute:function(s){return this.attributes[s]!==void 0},addGroup:function(s,t,i=0){this.groups.push({start:s,count:t,materialIndex:i})},clearGroups:function(){this.groups=[]},setDrawRange:function(s,t){this.drawRange.start=s,this.drawRange.count=t},applyMatrix4:function(s){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(s),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const l=new ls().getNormalMatrix(s);i.applyNormalMatrix(l),i.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(s),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(s){return Vl.makeRotationX(s),this.applyMatrix4(Vl),this},rotateY:function(s){return Vl.makeRotationY(s),this.applyMatrix4(Vl),this},rotateZ:function(s){return Vl.makeRotationZ(s),this.applyMatrix4(Vl),this},translate:function(s,t,i){return Vl.makeTranslation(s,t,i),this.applyMatrix4(Vl),this},scale:function(s,t,i){return Vl.makeScale(s,t,i),this.applyMatrix4(Vl),this},lookAt:function(s){return Pm.lookAt(s),Pm.updateMatrix(),this.applyMatrix4(Pm.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sh).negate(),this.translate(Sh.x,Sh.y,Sh.z),this},setFromPoints:function(s){const t=[];for(let i=0,o=s.length;i<o;i++){const l=s[i];t.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new P(t,3)),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new $o);const s=this.attributes.position,t=this.morphAttributes.position;if(s&&s.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Je(-1/0,-1/0,-1/0),new Je(1/0,1/0,1/0));if(s!==void 0){if(this.boundingBox.setFromBufferAttribute(s),t)for(let i=0,o=t.length;i<o;i++){const l=t[i];Ua.setFromBufferAttribute(l),this.morphTargetsRelative?(Qo.addVectors(this.boundingBox.min,Ua.min),this.boundingBox.expandByPoint(Qo),Qo.addVectors(this.boundingBox.max,Ua.max),this.boundingBox.expandByPoint(Qo)):(this.boundingBox.expandByPoint(Ua.min),this.boundingBox.expandByPoint(Ua.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new ea);const s=this.attributes.position,t=this.morphAttributes.position;if(s&&s.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Je,1/0);if(s){const i=this.boundingSphere.center;if(Ua.setFromBufferAttribute(s),t)for(let l=0,f=t.length;l<f;l++){const B=t[l];_d.setFromBufferAttribute(B),this.morphTargetsRelative?(Qo.addVectors(Ua.min,_d.min),Ua.expandByPoint(Qo),Qo.addVectors(Ua.max,_d.max),Ua.expandByPoint(Qo)):(Ua.expandByPoint(_d.min),Ua.expandByPoint(_d.max))}Ua.getCenter(i);let o=0;for(let l=0,f=s.count;l<f;l++)Qo.fromBufferAttribute(s,l),o=Math.max(o,i.distanceToSquared(Qo));if(t)for(let l=0,f=t.length;l<f;l++){const B=t[l],M=this.morphTargetsRelative;for(let D=0,G=B.count;D<G;D++)Qo.fromBufferAttribute(B,D),M&&(Sh.fromBufferAttribute(s,D),Qo.add(Sh)),o=Math.max(o,i.distanceToSquared(Qo))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){function s(gt,Ht,Zt){oe.fromArray(f,3*gt),he.fromArray(f,3*Ht),ye.fromArray(f,3*Zt),we.fromArray(M,2*gt),be.fromArray(M,2*Ht),ke.fromArray(M,2*Zt),he.sub(oe),ye.sub(oe),be.sub(we),ke.sub(we);const Qt=1/(be.x*ke.y-ke.x*be.y);isFinite(Qt)&&(Xe.copy(he).multiplyScalar(ke.y).addScaledVector(ye,-be.y).multiplyScalar(Qt),it.copy(ye).multiplyScalar(be.x).addScaledVector(he,-ke.x).multiplyScalar(Qt),$[gt].add(Xe),$[Ht].add(Xe),$[Zt].add(Xe),ie[gt].add(it),ie[Ht].add(it),ie[Zt].add(it))}function t(gt){ot.fromArray(B,3*gt),kt.copy(ot);const Ht=$[gt];pt.copy(Ht),pt.sub(ot.multiplyScalar(ot.dot(Ht))).normalize(),mt.crossVectors(kt,Ht);const Zt=mt.dot(ie[gt])<0?-1:1;G[4*gt]=pt.x,G[4*gt+1]=pt.y,G[4*gt+2]=pt.z,G[4*gt+3]=Zt}const i=this.index,o=this.attributes;if(i===null||o.position===void 0||o.normal===void 0||o.uv===void 0)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const l=i.array,f=o.position.array,B=o.normal.array,M=o.uv.array,D=f.length/3;o.tangent===void 0&&this.setAttribute("tangent",new y(new Float32Array(4*D),4));const G=o.tangent.array,$=[],ie=[];for(let gt=0;gt<D;gt++)$[gt]=new Je,ie[gt]=new Je;const oe=new Je,he=new Je,ye=new Je,we=new Qn,be=new Qn,ke=new Qn,Xe=new Je,it=new Je;let lt=this.groups;lt.length===0&&(lt=[{start:0,count:l.length}]);for(let gt=0,Ht=lt.length;gt<Ht;++gt){const Zt=lt[gt],Qt=Zt.start;for(let en=Qt,Wn=Qt+Zt.count;en<Wn;en+=3)s(l[en+0],l[en+1],l[en+2])}const pt=new Je,mt=new Je,ot=new Je,kt=new Je;for(let gt=0,Ht=lt.length;gt<Ht;++gt){const Zt=lt[gt],Qt=Zt.start;for(let en=Qt,Wn=Qt+Zt.count;en<Wn;en+=3)t(l[en+0]),t(l[en+1]),t(l[en+2])}},computeVertexNormals:function(){const s=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new y(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let ie=0,oe=i.count;ie<oe;ie++)i.setXYZ(ie,0,0,0);const o=new Je,l=new Je,f=new Je,B=new Je,M=new Je,D=new Je,G=new Je,$=new Je;if(s)for(let ie=0,oe=s.count;ie<oe;ie+=3){const he=s.getX(ie+0),ye=s.getX(ie+1),we=s.getX(ie+2);o.fromBufferAttribute(t,he),l.fromBufferAttribute(t,ye),f.fromBufferAttribute(t,we),G.subVectors(f,l),$.subVectors(o,l),G.cross($),B.fromBufferAttribute(i,he),M.fromBufferAttribute(i,ye),D.fromBufferAttribute(i,we),B.add(G),M.add(G),D.add(G),i.setXYZ(he,B.x,B.y,B.z),i.setXYZ(ye,M.x,M.y,M.z),i.setXYZ(we,D.x,D.y,D.z)}else for(let ie=0,oe=t.count;ie<oe;ie+=3)o.fromBufferAttribute(t,ie+0),l.fromBufferAttribute(t,ie+1),f.fromBufferAttribute(t,ie+2),G.subVectors(f,l),$.subVectors(o,l),G.cross($),i.setXYZ(ie+0,G.x,G.y,G.z),i.setXYZ(ie+1,G.x,G.y,G.z),i.setXYZ(ie+2,G.x,G.y,G.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(s,t){if(!s||!s.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",s);t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const o in i){if(s.attributes[o]===void 0)continue;const l=i[o].array,f=s.attributes[o],B=f.array,M=f.itemSize*t,D=Math.min(B.length,l.length-M);for(let G=0,$=M;G<D;G++,$++)l[$]=B[G]}return this},normalizeNormals:function(){const s=this.attributes.normal;for(let t=0,i=s.count;t<i;t++)Qo.fromBufferAttribute(s,t),Qo.normalize(),s.setXYZ(t,Qo.x,Qo.y,Qo.z)},toNonIndexed:function(){function s(B,M){const D=B.array,G=B.itemSize,$=B.normalized,ie=new D.constructor(M.length*G);let oe=0,he=0;for(let ye=0,we=M.length;ye<we;ye++){oe=M[ye]*G;for(let be=0;be<G;be++)ie[he++]=D[oe++]}return new y(ie,G,$)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new k,i=this.index.array,o=this.attributes;for(const B in o){const M=s(o[B],i);t.setAttribute(B,M)}const l=this.morphAttributes;for(const B in l){const M=[],D=l[B];for(let G=0,$=D.length;G<$;G++){const ie=s(D[G],i);M.push(ie)}t.morphAttributes[B]=M}t.morphTargetsRelative=this.morphTargetsRelative;const f=this.groups;for(let B=0,M=f.length;B<M;B++){const D=f[B];t.addGroup(D.start,D.count,D.materialIndex)}return t},toJSON:function(){const s={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),Object.keys(this.userData).length>0&&(s.userData=this.userData),this.parameters!==void 0){const M=this.parameters;for(const D in M)M[D]!==void 0&&(s[D]=M[D]);return s}s.data={attributes:{}};const t=this.index;t!==null&&(s.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const M in i){const D=i[M];s.data.attributes[M]=D.toJSON(s.data)}const o={};let l=!1;for(const M in this.morphAttributes){const D=this.morphAttributes[M],G=[];for(let $=0,ie=D.length;$<ie;$++){const oe=D[$];G.push(oe.toJSON(s.data))}G.length>0&&(o[M]=G,l=!0)}l&&(s.data.morphAttributes=o,s.data.morphTargetsRelative=this.morphTargetsRelative);const f=this.groups;f.length>0&&(s.data.groups=JSON.parse(JSON.stringify(f)));const B=this.boundingSphere;return B!==null&&(s.data.boundingSphere={center:B.center.toArray(),radius:B.radius}),s},clone:function(){return new k().copy(this)},copy:function(s){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=s.name;const i=s.index;i!==null&&this.setIndex(i.clone(t));const o=s.attributes;for(const D in o){const G=o[D];this.setAttribute(D,G.clone(t))}const l=s.morphAttributes;for(const D in l){const G=[],$=l[D];for(let ie=0,oe=$.length;ie<oe;ie++)G.push($[ie].clone(t));this.morphAttributes[D]=G}this.morphTargetsRelative=s.morphTargetsRelative;const f=s.groups;for(let D=0,G=f.length;D<G;D++){const $=f[D];this.addGroup($.start,$.count,$.materialIndex)}const B=s.boundingBox;B!==null&&(this.boundingBox=B.clone());const M=s.boundingSphere;return M!==null&&(this.boundingSphere=M.clone()),this.drawRange.start=s.drawRange.start,this.drawRange.count=s.drawRange.count,this.userData=s.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const x0=new ir,Ih=new zl,Om=new ea,Vc=new Je,Qc=new Je,jc=new Je,Fm=new Je,Nm=new Je,km=new Je,np=new Je,ip=new Je,rp=new Je,sp=new Qn,op=new Qn,ap=new Qn,Um=new Je,lp=new Je;te.prototype=Object.assign(Object.create(I.prototype),{constructor:te,isMesh:!0,copy:function(s){return I.prototype.copy.call(this,s),s.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=s.morphTargetInfluences.slice()),s.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},s.morphTargetDictionary)),this.material=s.material,this.geometry=s.geometry,this},updateMorphTargets:function(){const s=this.geometry;if(s.isBufferGeometry){const t=s.morphAttributes,i=Object.keys(t);if(i.length>0){const o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,f=o.length;l<f;l++){const B=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=l}}}}else{const t=s.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(s,t){const i=this.geometry,o=this.material,l=this.matrixWorld;if(o===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Om.copy(i.boundingSphere),Om.applyMatrix4(l),s.ray.intersectsSphere(Om)===!1)||(x0.copy(l).invert(),Ih.copy(s.ray).applyMatrix4(x0),i.boundingBox!==null&&Ih.intersectsBox(i.boundingBox)===!1))return;let f;if(i.isBufferGeometry){const B=i.index,M=i.attributes.position,D=i.morphAttributes.position,G=i.morphTargetsRelative,$=i.attributes.uv,ie=i.attributes.uv2,oe=i.groups,he=i.drawRange;if(B!==null)if(Array.isArray(o))for(let ye=0,we=oe.length;ye<we;ye++){const be=oe[ye],ke=o[be.materialIndex];for(let Xe=Math.max(be.start,he.start),it=Math.min(be.start+be.count,he.start+he.count);Xe<it;Xe+=3){const lt=B.getX(Xe),pt=B.getX(Xe+1),mt=B.getX(Xe+2);(f=ue(this,ke,s,Ih,M,D,G,$,ie,lt,pt,mt))&&(f.faceIndex=Math.floor(Xe/3),f.face.materialIndex=be.materialIndex,t.push(f))}}else for(let ye=Math.max(0,he.start),we=Math.min(B.count,he.start+he.count);ye<we;ye+=3){const be=B.getX(ye),ke=B.getX(ye+1),Xe=B.getX(ye+2);(f=ue(this,o,s,Ih,M,D,G,$,ie,be,ke,Xe))&&(f.faceIndex=Math.floor(ye/3),t.push(f))}else if(M!==void 0)if(Array.isArray(o))for(let ye=0,we=oe.length;ye<we;ye++){const be=oe[ye],ke=o[be.materialIndex];for(let Xe=Math.max(be.start,he.start),it=Math.min(be.start+be.count,he.start+he.count);Xe<it;Xe+=3)(f=ue(this,ke,s,Ih,M,D,G,$,ie,Xe,Xe+1,Xe+2))&&(f.faceIndex=Math.floor(Xe/3),f.face.materialIndex=be.materialIndex,t.push(f))}else for(let ye=Math.max(0,he.start),we=Math.min(M.count,he.start+he.count);ye<we;ye+=3)(f=ue(this,o,s,Ih,M,D,G,$,ie,ye,ye+1,ye+2))&&(f.faceIndex=Math.floor(ye/3),t.push(f))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class Cu extends k{constructor(t=1,i=1,o=1,l=1,f=1,B=1){function M(we,be,ke,Xe,it,lt,pt,mt,ot,kt,gt){const Ht=lt/ot,Zt=pt/kt,Qt=lt/2,en=pt/2,Wn=mt/2,ii=ot+1,lr=kt+1;let oi=0,qn=0;const $i=new Je;for(let Ji=0;Ji<lr;Ji++){const Xr=Ji*Zt-en;for(let Tt=0;Tt<ii;Tt++){const Mt=Tt*Ht-Qt;$i[we]=Mt*Xe,$i[be]=Xr*it,$i[ke]=Wn,$.push($i.x,$i.y,$i.z),$i[we]=0,$i[be]=0,$i[ke]=mt>0?1:-1,ie.push($i.x,$i.y,$i.z),oe.push(Tt/ot),oe.push(1-Ji/kt),oi+=1}}for(let Ji=0;Ji<kt;Ji++)for(let Xr=0;Xr<ot;Xr++){const Tt=he+Xr+ii*Ji,Mt=he+Xr+ii*(Ji+1),Yn=he+(Xr+1)+ii*(Ji+1),Cn=he+(Xr+1)+ii*Ji;G.push(Tt,Mt,Cn),G.push(Mt,Yn,Cn),qn+=6}D.addGroup(ye,qn,gt),ye+=qn,he+=oi}super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:o,widthSegments:l,heightSegments:f,depthSegments:B};const D=this;l=Math.floor(l),f=Math.floor(f);const G=[],$=[],ie=[],oe=[];let he=0,ye=0;M("z","y","x",-1,-1,o,i,t,B=Math.floor(B),f,0),M("z","y","x",1,-1,o,i,-t,B,f,1),M("x","z","y",1,1,t,o,i,l,B,2),M("x","z","y",1,-1,t,o,-i,l,B,3),M("x","y","z",1,-1,t,i,o,l,f,4),M("x","y","z",-1,-1,t,i,-o,l,f,5),this.setIndex(G),this.setAttribute("position",new P($,3)),this.setAttribute("normal",new P(ie,3)),this.setAttribute("uv",new P(oe,2))}}const E0={clone:xe,merge:Ee};var uv=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,hv=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;(V.prototype=Object.create(u.prototype)).constructor=V,V.prototype.isShaderMaterial=!0,V.prototype.copy=function(s){return u.prototype.copy.call(this,s),this.fragmentShader=s.fragmentShader,this.vertexShader=s.vertexShader,this.uniforms=xe(s.uniforms),this.defines=Object.assign({},s.defines),this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.lights=s.lights,this.clipping=s.clipping,this.skinning=s.skinning,this.morphTargets=s.morphTargets,this.morphNormals=s.morphNormals,this.extensions=Object.assign({},s.extensions),this.glslVersion=s.glslVersion,this},V.prototype.toJSON=function(s){const t=u.prototype.toJSON.call(this,s);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const l=this.uniforms[o].value;l&&l.isTexture?t.uniforms[o]={type:"t",value:l.toJSON(s).uuid}:l&&l.isColor?t.uniforms[o]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[o]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[o]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[o]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[o]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[o]={type:"m4",value:l.toArray()}:t.uniforms[o]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},q.prototype=Object.assign(Object.create(I.prototype),{constructor:q,isCamera:!0,copy:function(s,t){return I.prototype.copy.call(this,s,t),this.matrixWorldInverse.copy(s.matrixWorldInverse),this.projectionMatrix.copy(s.projectionMatrix),this.projectionMatrixInverse.copy(s.projectionMatrixInverse),this},getWorldDirection:function(s){s===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),s=new Je),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return s.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(s){I.prototype.updateMatrixWorld.call(this,s),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(s,t){I.prototype.updateWorldMatrix.call(this,s,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}}),Q.prototype=Object.assign(Object.create(q.prototype),{constructor:Q,isPerspectiveCamera:!0,copy:function(s,t){return q.prototype.copy.call(this,s,t),this.fov=s.fov,this.zoom=s.zoom,this.near=s.near,this.far=s.far,this.focus=s.focus,this.aspect=s.aspect,this.view=s.view===null?null:Object.assign({},s.view),this.filmGauge=s.filmGauge,this.filmOffset=s.filmOffset,this},setFocalLength:function(s){const t=.5*this.getFilmHeight()/s;this.fov=2*qi.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const s=Math.tan(.5*qi.DEG2RAD*this.fov);return .5*this.getFilmHeight()/s},getEffectiveFOV:function(){return 2*qi.RAD2DEG*Math.atan(Math.tan(.5*qi.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(s,t,i,o,l,f){this.aspect=s/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=s,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=o,this.view.width=l,this.view.height=f,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const s=this.near;let t=s*Math.tan(.5*qi.DEG2RAD*this.fov)/this.zoom,i=2*t,o=this.aspect*i,l=-.5*o;const f=this.view;if(this.view!==null&&this.view.enabled){const M=f.fullWidth,D=f.fullHeight;l+=f.offsetX*o/M,t-=f.offsetY*i/D,o*=f.width/M,i*=f.height/D}const B=this.filmOffset;B!==0&&(l+=s*B/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,t,t-i,s,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(s){const t=I.prototype.toJSON.call(this,s);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});class cp extends I{constructor(t,i,o){if(super(),this.type="CubeCamera",o.isWebGLCubeRenderTarget!==!0)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=o;const l=new Q(90,1,t,i);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Je(1,0,0)),this.add(l);const f=new Q(90,1,t,i);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new Je(-1,0,0)),this.add(f);const B=new Q(90,1,t,i);B.layers=this.layers,B.up.set(0,0,1),B.lookAt(new Je(0,1,0)),this.add(B);const M=new Q(90,1,t,i);M.layers=this.layers,M.up.set(0,0,-1),M.lookAt(new Je(0,-1,0)),this.add(M);const D=new Q(90,1,t,i);D.layers=this.layers,D.up.set(0,-1,0),D.lookAt(new Je(0,0,1)),this.add(D);const G=new Q(90,1,t,i);G.layers=this.layers,G.up.set(0,-1,0),G.lookAt(new Je(0,0,-1)),this.add(G)}update(t,i){this.parent===null&&this.updateMatrixWorld();const o=this.renderTarget,[l,f,B,M,D,G]=this.children,$=t.xr.enabled,ie=t.getRenderTarget();t.xr.enabled=!1;const oe=o.texture.generateMipmaps;o.texture.generateMipmaps=!1,t.setRenderTarget(o,0),t.render(i,l),t.setRenderTarget(o,1),t.render(i,f),t.setRenderTarget(o,2),t.render(i,B),t.setRenderTarget(o,3),t.render(i,M),t.setRenderTarget(o,4),t.render(i,D),o.texture.generateMipmaps=oe,t.setRenderTarget(o,5),t.render(i,G),t.setRenderTarget(ie),t.xr.enabled=$}}class Rh extends go{constructor(t,i,o,l,f,B,M,D,G,$){super(t=t!==void 0?t:[],i=i!==void 0?i:Da,o,l,f,B,M=M!==void 0?M:xs,D,G,$),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}Rh.prototype.isCubeTexture=!0;class up extends aa{constructor(t,i,o){Number.isInteger(i)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),i=o),super(t,t,i),i=i||{},this.texture=new Rh(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=i.generateMipmaps!==void 0&&i.generateMipmaps,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:nt,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.format=ko,this.texture.encoding=i.encoding,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const o={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},l=new Cu(5,5,5),f=new V({name:"CubemapFromEquirect",uniforms:xe(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,side:Js,blending:ol});f.uniforms.tEquirect.value=i;const B=new te(l,f),M=i.minFilter;return i.minFilter===sc&&(i.minFilter=nt),new cp(1,10,this).update(t,B),i.minFilter=M,B.geometry.dispose(),B.material.dispose(),this}clear(t,i,o,l){const f=t.getRenderTarget();for(let B=0;B<6;B++)t.setRenderTarget(this,B),t.clear(i,o,l);t.setRenderTarget(f)}}up.prototype.isWebGLCubeRenderTarget=!0;class Bh extends go{constructor(t,i,o,l,f,B,M,D,G,$,ie,oe){super(null,B,M,D,G,$,l,f,ie,oe),this.image={data:t||null,width:i||1,height:o||1},this.magFilter=G!==void 0?G:mo,this.minFilter=$!==void 0?$:mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Bh.prototype.isDataTexture=!0;const Lh=new ea,hp=new Je;class wd{constructor(t=new hl,i=new hl,o=new hl,l=new hl,f=new hl,B=new hl){this.planes=[t,i,o,l,f,B]}set(t,i,o,l,f,B){const M=this.planes;return M[0].copy(t),M[1].copy(i),M[2].copy(o),M[3].copy(l),M[4].copy(f),M[5].copy(B),this}copy(t){const i=this.planes;for(let o=0;o<6;o++)i[o].copy(t.planes[o]);return this}setFromProjectionMatrix(t){const i=this.planes,o=t.elements,l=o[0],f=o[1],B=o[2],M=o[3],D=o[4],G=o[5],$=o[6],ie=o[7],oe=o[8],he=o[9],ye=o[10],we=o[11],be=o[12],ke=o[13],Xe=o[14],it=o[15];return i[0].setComponents(M-l,ie-D,we-oe,it-be).normalize(),i[1].setComponents(M+l,ie+D,we+oe,it+be).normalize(),i[2].setComponents(M+f,ie+G,we+he,it+ke).normalize(),i[3].setComponents(M-f,ie-G,we-he,it-ke).normalize(),i[4].setComponents(M-B,ie-$,we-ye,it-Xe).normalize(),i[5].setComponents(M+B,ie+$,we+ye,it+Xe).normalize(),this}intersectsObject(t){const i=t.geometry;return i.boundingSphere===null&&i.computeBoundingSphere(),Lh.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Lh)}intersectsSprite(t){return Lh.center.set(0,0,0),Lh.radius=.7071067811865476,Lh.applyMatrix4(t.matrixWorld),this.intersectsSphere(Lh)}intersectsSphere(t){const i=this.planes,o=t.center,l=-t.radius;for(let f=0;f<6;f++)if(i[f].distanceToPoint(o)<l)return!1;return!0}intersectsBox(t){const i=this.planes;for(let o=0;o<6;o++){const l=i[o];if(hp.x=l.normal.x>0?t.max.x:t.min.x,hp.y=l.normal.y>0?t.max.y:t.min.y,hp.z=l.normal.z>0?t.max.z:t.min.z,l.distanceToPoint(hp)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let o=0;o<6;o++)if(i[o].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Cd extends k{constructor(t=1,i=1,o=1,l=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:o,heightSegments:l};const f=t/2,B=i/2,M=Math.floor(o),D=Math.floor(l),G=M+1,$=D+1,ie=t/M,oe=i/D,he=[],ye=[],we=[],be=[];for(let ke=0;ke<$;ke++){const Xe=ke*oe-B;for(let it=0;it<G;it++){const lt=it*ie-f;ye.push(lt,-Xe,0),we.push(0,0,1),be.push(it/M),be.push(1-ke/D)}}for(let ke=0;ke<D;ke++)for(let Xe=0;Xe<M;Xe++){const it=Xe+G*ke,lt=Xe+G*(ke+1),pt=Xe+1+G*(ke+1),mt=Xe+1+G*ke;he.push(it,lt,mt),he.push(lt,pt,mt)}this.setIndex(he),this.setAttribute("position",new P(ye,3)),this.setAttribute("normal",new P(we,3)),this.setAttribute("uv",new P(be,2))}}const es={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment:`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex:`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex:`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common:`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,lights_pars_begin:`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_toon_fragment:`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(		0, 1,		0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment:`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment:`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
							f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
							f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(	1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,	1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,	1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmissionmap_fragment:`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,transmissionmap_pars_fragment:`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,uv_pars_fragment:`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},Ei={common:{diffuse:{value:new Fi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ls},uv2Transform:{value:new ls},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ls}},sprite:{diffuse:{value:new Fi(15658734)},opacity:{value:1},center:{value:new Qn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ls}}},pl={basic:{uniforms:Ee([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.fog]),vertexShader:es.meshbasic_vert,fragmentShader:es.meshbasic_frag},lambert:{uniforms:Ee([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.fog,Ei.lights,{emissive:{value:new Fi(0)}}]),vertexShader:es.meshlambert_vert,fragmentShader:es.meshlambert_frag},phong:{uniforms:Ee([Ei.common,Ei.specularmap,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.fog,Ei.lights,{emissive:{value:new Fi(0)},specular:{value:new Fi(1118481)},shininess:{value:30}}]),vertexShader:es.meshphong_vert,fragmentShader:es.meshphong_frag},standard:{uniforms:Ee([Ei.common,Ei.envmap,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.roughnessmap,Ei.metalnessmap,Ei.fog,Ei.lights,{emissive:{value:new Fi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:es.meshphysical_vert,fragmentShader:es.meshphysical_frag},toon:{uniforms:Ee([Ei.common,Ei.aomap,Ei.lightmap,Ei.emissivemap,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.gradientmap,Ei.fog,Ei.lights,{emissive:{value:new Fi(0)}}]),vertexShader:es.meshtoon_vert,fragmentShader:es.meshtoon_frag},matcap:{uniforms:Ee([Ei.common,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,Ei.fog,{matcap:{value:null}}]),vertexShader:es.meshmatcap_vert,fragmentShader:es.meshmatcap_frag},points:{uniforms:Ee([Ei.points,Ei.fog]),vertexShader:es.points_vert,fragmentShader:es.points_frag},dashed:{uniforms:Ee([Ei.common,Ei.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:es.linedashed_vert,fragmentShader:es.linedashed_frag},depth:{uniforms:Ee([Ei.common,Ei.displacementmap]),vertexShader:es.depth_vert,fragmentShader:es.depth_frag},normal:{uniforms:Ee([Ei.common,Ei.bumpmap,Ei.normalmap,Ei.displacementmap,{opacity:{value:1}}]),vertexShader:es.normal_vert,fragmentShader:es.normal_frag},sprite:{uniforms:Ee([Ei.sprite,Ei.fog]),vertexShader:es.sprite_vert,fragmentShader:es.sprite_frag},background:{uniforms:{uvTransform:{value:new ls},t2D:{value:null}},vertexShader:es.background_vert,fragmentShader:es.background_frag},cube:{uniforms:Ee([Ei.envmap,{opacity:{value:1}}]),vertexShader:es.cube_vert,fragmentShader:es.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:es.equirect_vert,fragmentShader:es.equirect_frag},distanceRGBA:{uniforms:Ee([Ei.common,Ei.displacementmap,{referencePosition:{value:new Je},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:es.distanceRGBA_vert,fragmentShader:es.distanceRGBA_frag},shadow:{uniforms:Ee([Ei.lights,Ei.fog,{color:{value:new Fi(0)},opacity:{value:1}}]),vertexShader:es.shadow_vert,fragmentShader:es.shadow_frag}};pl.physical={uniforms:Ee([pl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Qn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Fi(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:es.meshphysical_vert,fragmentShader:es.meshphysical_frag};class Gm extends go{constructor(t=null,i=1,o=1,l=1){super(null),this.image={data:t,width:i,height:o,depth:l},this.magFilter=mo,this.minFilter=mo,this.wrapR=Yo,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Gm.prototype.isDataTexture2DArray=!0;class Hm extends go{constructor(t=null,i=1,o=1,l=1){super(null),this.image={data:t,width:i,height:o,depth:l},this.magFilter=mo,this.minFilter=mo,this.wrapR=Yo,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Hm.prototype.isDataTexture3D=!0;const b0=new go,dv=new Gm,fv=new Hm,_0=new Rh,w0=[],C0=[],M0=new Float32Array(16),T0=new Float32Array(9),S0=new Float32Array(4);$t.prototype.updateCache=function(s){const t=this.cache;s instanceof Float32Array&&t.length!==s.length&&(this.cache=new Float32Array(s.length)),Ge(t,s)},Xt.prototype.setValue=function(s,t,i){const o=this.seq;for(let l=0,f=o.length;l!==f;++l){const B=o[l];B.setValue(s,t[B.id],i)}};const zm=/(\w+)(\])?(\[|\.)?/g;In.prototype.setValue=function(s,t,i,o){const l=this.map[t];l!==void 0&&l.setValue(s,i,o)},In.prototype.setOptional=function(s,t,i){const o=t[i];o!==void 0&&this.setValue(s,i,o)},In.upload=function(s,t,i,o){for(let l=0,f=t.length;l!==f;++l){const B=t[l],M=i[B.id];M.needsUpdate!==!1&&B.setValue(s,M.value,o)}},In.seqWithValue=function(s,t){const i=[];for(let o=0,l=s.length;o!==l;++o){const f=s[o];f.id in t&&i.push(f)}return i};let pv=0;const mv=/^[ \t]*#include +<([\w\d./]+)>/gm,gv=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Av=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;let vv=0;class dp extends u{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}dp.prototype.isMeshDepthMaterial=!0;class fp extends u{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Je,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}fp.prototype.isMeshDistanceMaterial=!0;var yv=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,xv=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;class Vm extends Q{constructor(t=[]){super(),this.cameras=t}}Vm.prototype.isArrayCamera=!0;class Mu extends I{constructor(){super(),this.type="Group"}}Mu.prototype.isGroup=!0,Object.assign(Wt.prototype,{constructor:Wt,getHandSpace:function(){return this._hand===null&&(this._hand=new Mu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Mu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Mu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(s){return this._targetRay!==null&&this._targetRay.dispatchEvent(s),this._grip!==null&&this._grip.dispatchEvent(s),this._hand!==null&&this._hand.dispatchEvent(s),this},disconnect:function(s){return this.dispatchEvent({type:"disconnected",data:s}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(s,t,i){let o=null,l=null,f=null;const B=this._targetRay,M=this._grip,D=this._hand;if(s&&t.session.visibilityState!=="visible-blurred")if(B!==null&&(o=t.getPose(s.targetRaySpace,i))!==null&&(B.matrix.fromArray(o.transform.matrix),B.matrix.decompose(B.position,B.rotation,B.scale)),D&&s.hand){f=!0;for(const oe of s.hand.values()){const he=t.getJointPose(oe,i);if(D.joints[oe.jointName]===void 0){const we=new Mu;we.matrixAutoUpdate=!1,we.visible=!1,D.joints[oe.jointName]=we,D.add(we)}const ye=D.joints[oe.jointName];he!==null&&(ye.matrix.fromArray(he.transform.matrix),ye.matrix.decompose(ye.position,ye.rotation,ye.scale),ye.jointRadius=he.radius),ye.visible=he!==null}const G=D.joints["index-finger-tip"],$=D.joints["thumb-tip"],ie=G.position.distanceTo($.position);D.inputState.pinching&&ie>.025?(D.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:s.handedness,target:this})):!D.inputState.pinching&&ie<=.015&&(D.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:s.handedness,target:this}))}else M!==null&&s.gripSpace&&(l=t.getPose(s.gripSpace,i))!==null&&(M.matrix.fromArray(l.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale));return B!==null&&(B.visible=o!==null),M!==null&&(M.visible=l!==null),D!==null&&(D.visible=f!==null),this}}),Object.assign(mn.prototype,U.prototype);class I0 extends Xn{}I0.prototype.isWebGL1Renderer=!0;class Md{constructor(t,i=25e-5){this.name="",this.color=new Fi(t),this.density=i}clone(){return new Md(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Md.prototype.isFogExp2=!0;class Td{constructor(t,i=1,o=1e3){this.name="",this.color=new Fi(t),this.near=i,this.far=o}clone(){return new Td(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Td.prototype.isFog=!0;class pp extends I{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.background!==null&&(i.object.background=this.background.toJSON(t)),this.environment!==null&&(i.object.environment=this.environment.toJSON(t)),this.fog!==null&&(i.object.fog=this.fog.toJSON()),i}}pp.prototype.isScene=!0,Object.defineProperty(ei.prototype,"needsUpdate",{set:function(s){s===!0&&this.version++}}),Object.assign(ei.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(s){return this.usage=s,this},copy:function(s){return this.array=new s.array.constructor(s.array),this.count=s.count,this.stride=s.stride,this.usage=s.usage,this},copyAt:function(s,t,i){s*=this.stride,i*=t.stride;for(let o=0,l=this.stride;o<l;o++)this.array[s+o]=t.array[i+o];return this},set:function(s,t=0){return this.array.set(s,t),this},clone:function(s){s.arrayBuffers===void 0&&(s.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qi.generateUUID()),s.arrayBuffers[this.array.buffer._uuid]===void 0&&(s.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new ei(new this.array.constructor(s.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(s){return this.onUploadCallback=s,this},toJSON:function(s){return s.arrayBuffers===void 0&&(s.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qi.generateUUID()),s.arrayBuffers[this.array.buffer._uuid]===void 0&&(s.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const To=new Je;Object.defineProperties(pn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(s){this.data.needsUpdate=s}}}),Object.assign(pn.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(s){for(let t=0,i=this.data.count;t<i;t++)To.x=this.getX(t),To.y=this.getY(t),To.z=this.getZ(t),To.applyMatrix4(s),this.setXYZ(t,To.x,To.y,To.z);return this},applyNormalMatrix:function(s){for(let t=0,i=this.count;t<i;t++)To.x=this.getX(t),To.y=this.getY(t),To.z=this.getZ(t),To.applyNormalMatrix(s),this.setXYZ(t,To.x,To.y,To.z);return this},transformDirection:function(s){for(let t=0,i=this.count;t<i;t++)To.x=this.getX(t),To.y=this.getY(t),To.z=this.getZ(t),To.transformDirection(s),this.setXYZ(t,To.x,To.y,To.z);return this},setX:function(s,t){return this.data.array[s*this.data.stride+this.offset]=t,this},setY:function(s,t){return this.data.array[s*this.data.stride+this.offset+1]=t,this},setZ:function(s,t){return this.data.array[s*this.data.stride+this.offset+2]=t,this},setW:function(s,t){return this.data.array[s*this.data.stride+this.offset+3]=t,this},getX:function(s){return this.data.array[s*this.data.stride+this.offset]},getY:function(s){return this.data.array[s*this.data.stride+this.offset+1]},getZ:function(s){return this.data.array[s*this.data.stride+this.offset+2]},getW:function(s){return this.data.array[s*this.data.stride+this.offset+3]},setXY:function(s,t,i){return s=s*this.data.stride+this.offset,this.data.array[s+0]=t,this.data.array[s+1]=i,this},setXYZ:function(s,t,i,o){return s=s*this.data.stride+this.offset,this.data.array[s+0]=t,this.data.array[s+1]=i,this.data.array[s+2]=o,this},setXYZW:function(s,t,i,o,l){return s=s*this.data.stride+this.offset,this.data.array[s+0]=t,this.data.array[s+1]=i,this.data.array[s+2]=o,this.data.array[s+3]=l,this},clone:function(s){if(s===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return new y(new this.array.constructor(t),this.itemSize,this.normalized)}return s.interleavedBuffers===void 0&&(s.interleavedBuffers={}),s.interleavedBuffers[this.data.uuid]===void 0&&(s.interleavedBuffers[this.data.uuid]=this.data.clone(s)),new pn(s.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(s){if(s===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)t.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return s.interleavedBuffers===void 0&&(s.interleavedBuffers={}),s.interleavedBuffers[this.data.uuid]===void 0&&(s.interleavedBuffers[this.data.uuid]=this.data.toJSON(s)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class Qm extends u{constructor(t){super(),this.type="SpriteMaterial",this.color=new Fi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}Qm.prototype.isSpriteMaterial=!0;let Sd;const mp=new Je,Id=new Je,Rd=new Je,Bd=new Qn,gp=new Qn,Ev=new ir,jm=new Je,Ap=new Je,Wm=new Je,bv=new Qn,R0=new Qn,_v=new Qn;class Km extends I{constructor(t){if(super(),this.type="Sprite",Sd===void 0){Sd=new k;const i=new ei(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Sd.setIndex([0,1,2,0,2,3]),Sd.setAttribute("position",new pn(i,3,0,!1)),Sd.setAttribute("uv",new pn(i,2,3,!1))}this.geometry=Sd,this.material=t!==void 0?t:new Qm,this.center=new Qn(.5,.5)}raycast(t,i){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Id.setFromMatrixScale(this.matrixWorld),Ev.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Rd.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Id.multiplyScalar(-Rd.z);const o=this.material.rotation;let l,f;o!==0&&(f=Math.cos(o),l=Math.sin(o));const B=this.center;Oi(jm.set(-.5,-.5,0),Rd,B,Id,l,f),Oi(Ap.set(.5,-.5,0),Rd,B,Id,l,f),Oi(Wm.set(.5,.5,0),Rd,B,Id,l,f),bv.set(0,0),R0.set(1,0),_v.set(1,1);let M=t.ray.intersectTriangle(jm,Ap,Wm,!1,mp);if(M===null&&(Oi(Ap.set(-.5,.5,0),Rd,B,Id,l,f),R0.set(0,1),(M=t.ray.intersectTriangle(jm,Wm,Ap,!1,mp))===null))return;const D=t.ray.origin.distanceTo(mp);D<t.near||D>t.far||i.push({distance:D,point:mp.clone(),uv:vo.getUV(mp,jm,Ap,Wm,bv,R0,_v,new Qn),face:null,object:this})}copy(t){return super.copy(t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}Km.prototype.isSprite=!0;const Xm=new Je,wv=new Je;class Cv extends I{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const i=t.levels;for(let o=0,l=i.length;o<l;o++){const f=i[o];this.addLevel(f.object.clone(),f.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,i=0){i=Math.abs(i);const o=this.levels;let l;for(l=0;l<o.length&&!(i<o[l].distance);l++);return o.splice(l,0,{distance:i,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const i=this.levels;if(i.length>0){let o,l;for(o=1,l=i.length;o<l&&!(t<i[o].distance);o++);return i[o-1].object}return null}raycast(t,i){if(this.levels.length>0){Xm.setFromMatrixPosition(this.matrixWorld);const o=t.ray.origin.distanceTo(Xm);this.getObjectForDistance(o).raycast(t,i)}}update(t){const i=this.levels;if(i.length>1){Xm.setFromMatrixPosition(t.matrixWorld),wv.setFromMatrixPosition(this.matrixWorld);const o=Xm.distanceTo(wv)/t.zoom;i[0].object.visible=!0;let l,f;for(l=1,f=i.length;l<f&&o>=i[l].distance;l++)i[l-1].object.visible=!1,i[l].object.visible=!0;for(this._currentLevel=l-1;l<f;l++)i[l].object.visible=!1}}toJSON(t){const i=super.toJSON(t);this.autoUpdate===!1&&(i.object.autoUpdate=!1),i.object.levels=[];const o=this.levels;for(let l=0,f=o.length;l<f;l++){const B=o[l];i.object.levels.push({object:B.object.uuid,distance:B.distance})}return i}}const Mv=new Je,Tv=new rs,Sv=new rs,my=new Je,Iv=new ir;Mi.prototype=Object.assign(Object.create(te.prototype),{constructor:Mi,isSkinnedMesh:!0,copy:function(s){return te.prototype.copy.call(this,s),this.bindMode=s.bindMode,this.bindMatrix.copy(s.bindMatrix),this.bindMatrixInverse.copy(s.bindMatrixInverse),this.skeleton=s.skeleton,this},bind:function(s,t){this.skeleton=s,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const s=new rs,t=this.geometry.attributes.skinWeight;for(let i=0,o=t.count;i<o;i++){s.x=t.getX(i),s.y=t.getY(i),s.z=t.getZ(i),s.w=t.getW(i);const l=1/s.manhattanLength();l!==1/0?s.multiplyScalar(l):s.set(1,0,0,0),t.setXYZW(i,s.x,s.y,s.z,s.w)}},updateMatrixWorld:function(s){te.prototype.updateMatrixWorld.call(this,s),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(s,t){const i=this.skeleton,o=this.geometry;Tv.fromBufferAttribute(o.attributes.skinIndex,s),Sv.fromBufferAttribute(o.attributes.skinWeight,s),Mv.fromBufferAttribute(o.attributes.position,s).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let l=0;l<4;l++){const f=Sv.getComponent(l);if(f!==0){const B=Tv.getComponent(l);Iv.multiplyMatrices(i.bones[B].matrixWorld,i.boneInverses[B]),t.addScaledVector(my.copy(Mv).applyMatrix4(Iv),f)}}return t.applyMatrix4(this.bindMatrixInverse)}}),Ti.prototype=Object.assign(Object.create(I.prototype),{constructor:Ti,isBone:!0});const Rv=new ir,gy=new ir;class Ym{constructor(t=[],i=[]){this.uuid=qi.generateUUID(),this.bones=t.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),i.length===0)this.calculateInverses();else if(t.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let o=0,l=this.bones.length;o<l;o++)this.boneInverses.push(new ir)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,i=this.bones.length;t<i;t++){const o=new ir;this.bones[t]&&o.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(o)}}pose(){for(let t=0,i=this.bones.length;t<i;t++){const o=this.bones[t];o&&o.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,i=this.bones.length;t<i;t++){const o=this.bones[t];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}}update(){const t=this.bones,i=this.boneInverses,o=this.boneMatrices,l=this.boneTexture;for(let f=0,B=t.length;f<B;f++){const M=t[f]?t[f].matrixWorld:gy;Rv.multiplyMatrices(M,i[f]),Rv.toArray(o,16*f)}l!==null&&(l.needsUpdate=!0)}clone(){return new Ym(this.bones,this.boneInverses)}getBoneByName(t){for(let i=0,o=this.bones.length;i<o;i++){const l=this.bones[i];if(l.name===t)return l}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,i){this.uuid=t.uuid;for(let o=0,l=t.bones.length;o<l;o++){const f=t.bones[o];let B=i[f];B===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),B=new Ti),this.bones.push(B),this.boneInverses.push(new ir().fromArray(t.boneInverses[o]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const i=this.bones,o=this.boneInverses;for(let l=0,f=i.length;l<f;l++){const B=i[l];t.bones.push(B.uuid);const M=o[l];t.boneInverses.push(M.toArray())}return t}}const Bv=new ir,Lv=new ir,qm=[],vp=new te;Wr.prototype=Object.assign(Object.create(te.prototype),{constructor:Wr,isInstancedMesh:!0,copy:function(s){return te.prototype.copy.call(this,s),this.instanceMatrix.copy(s.instanceMatrix),s.instanceColor!==null&&(this.instanceColor=s.instanceColor.clone()),this.count=s.count,this},getColorAt:function(s,t){t.fromArray(this.instanceColor.array,3*s)},getMatrixAt:function(s,t){t.fromArray(this.instanceMatrix.array,16*s)},raycast:function(s,t){const i=this.matrixWorld,o=this.count;if(vp.geometry=this.geometry,vp.material=this.material,vp.material!==void 0)for(let l=0;l<o;l++){this.getMatrixAt(l,Bv),Lv.multiplyMatrices(i,Bv),vp.matrixWorld=Lv,vp.raycast(s,qm);for(let f=0,B=qm.length;f<B;f++){const M=qm[f];M.instanceId=l,M.object=this,t.push(M)}qm.length=0}},setColorAt:function(s,t){this.instanceColor===null&&(this.instanceColor=new y(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*s)},setMatrixAt:function(s,t){t.toArray(this.instanceMatrix.array,16*s)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class ta extends u{constructor(t){super(),this.type="LineBasicMaterial",this.color=new Fi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this}}ta.prototype.isLineBasicMaterial=!0;const Dv=new Je,Pv=new Je,Qr=new ir,gi=new zl,Ca=new ea;zi.prototype=Object.assign(Object.create(I.prototype),{constructor:zi,isLine:!0,copy:function(s){return I.prototype.copy.call(this,s),this.material=s.material,this.geometry=s.geometry,this},computeLineDistances:function(){const s=this.geometry;if(s.isBufferGeometry)if(s.index===null){const t=s.attributes.position,i=[0];for(let o=1,l=t.count;o<l;o++)Dv.fromBufferAttribute(t,o-1),Pv.fromBufferAttribute(t,o),i[o]=i[o-1],i[o]+=Dv.distanceTo(Pv);s.setAttribute("lineDistance",new P(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else s.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(s,t){const i=this.geometry,o=this.matrixWorld,l=s.params.Line.threshold,f=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ca.copy(i.boundingSphere),Ca.applyMatrix4(o),Ca.radius+=l,s.ray.intersectsSphere(Ca)===!1)return;Qr.copy(o).invert(),gi.copy(s.ray).applyMatrix4(Qr);const B=l/((this.scale.x+this.scale.y+this.scale.z)/3),M=B*B,D=new Je,G=new Je,$=new Je,ie=new Je,oe=this.isLineSegments?2:1;if(i.isBufferGeometry){const he=i.index,ye=i.attributes.position;if(he!==null)for(let we=Math.max(0,f.start),be=Math.min(he.count,f.start+f.count)-1;we<be;we+=oe){const ke=he.getX(we),Xe=he.getX(we+1);if(D.fromBufferAttribute(ye,ke),G.fromBufferAttribute(ye,Xe),gi.distanceSqToSegment(D,G,ie,$)>M)continue;ie.applyMatrix4(this.matrixWorld);const it=s.ray.origin.distanceTo(ie);it<s.near||it>s.far||t.push({distance:it,point:$.clone().applyMatrix4(this.matrixWorld),index:we,face:null,faceIndex:null,object:this})}else for(let we=Math.max(0,f.start),be=Math.min(ye.count,f.start+f.count)-1;we<be;we+=oe){if(D.fromBufferAttribute(ye,we),G.fromBufferAttribute(ye,we+1),gi.distanceSqToSegment(D,G,ie,$)>M)continue;ie.applyMatrix4(this.matrixWorld);const ke=s.ray.origin.distanceTo(ie);ke<s.near||ke>s.far||t.push({distance:ke,point:$.clone().applyMatrix4(this.matrixWorld),index:we,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const s=this.geometry;if(s.isBufferGeometry){const t=s.morphAttributes,i=Object.keys(t);if(i.length>0){const o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,f=o.length;l<f;l++){const B=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=l}}}}else{const t=s.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Ld=new Je,B0=new Je;er.prototype=Object.assign(Object.create(zi.prototype),{constructor:er,isLineSegments:!0,computeLineDistances:function(){const s=this.geometry;if(s.isBufferGeometry)if(s.index===null){const t=s.attributes.position,i=[];for(let o=0,l=t.count;o<l;o+=2)Ld.fromBufferAttribute(t,o),B0.fromBufferAttribute(t,o+1),i[o]=o===0?0:i[o-1],i[o+1]=i[o]+Ld.distanceTo(B0);s.setAttribute("lineDistance",new P(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else s.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});class Jm extends zi{constructor(t,i){super(t,i),this.type="LineLoop"}}Jm.prototype.isLineLoop=!0;class Tu extends u{constructor(t){super(),this.type="PointsMaterial",this.color=new Fi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this}}Tu.prototype.isPointsMaterial=!0;const L0=new ir,Zm=new zl,yp=new ea,Su=new Je;Nr.prototype=Object.assign(Object.create(I.prototype),{constructor:Nr,isPoints:!0,copy:function(s){return I.prototype.copy.call(this,s),this.material=s.material,this.geometry=s.geometry,this},raycast:function(s,t){const i=this.geometry,o=this.matrixWorld,l=s.params.Points.threshold,f=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),yp.copy(i.boundingSphere),yp.applyMatrix4(o),yp.radius+=l,s.ray.intersectsSphere(yp)===!1)return;L0.copy(o).invert(),Zm.copy(s.ray).applyMatrix4(L0);const B=l/((this.scale.x+this.scale.y+this.scale.z)/3),M=B*B;if(i.isBufferGeometry){const D=i.index,G=i.attributes.position;if(D!==null)for(let $=Math.max(0,f.start),ie=Math.min(D.count,f.start+f.count);$<ie;$++){const oe=D.getX($);Su.fromBufferAttribute(G,oe),Ds(Su,oe,M,o,s,t,this)}else for(let $=Math.max(0,f.start),ie=Math.min(G.count,f.start+f.count);$<ie;$++)Su.fromBufferAttribute(G,$),Ds(Su,$,M,o,s,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const s=this.geometry;if(s.isBufferGeometry){const t=s.morphAttributes,i=Object.keys(t);if(i.length>0){const o=t[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,f=o.length;l<f;l++){const B=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=l}}}}else{const t=s.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});class Iu extends go{constructor(t,i,o,l,f,B,M,D,G){function $(){ie.needsUpdate=!0,t.requestVideoFrameCallback($)}super(t,i,o,l,f,B,M,D,G),this.format=M!==void 0?M:xs,this.minFilter=B!==void 0?B:nt,this.magFilter=f!==void 0?f:nt,this.generateMipmaps=!1;const ie=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback($)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!("requestVideoFrameCallback"in t)&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Iu.prototype.isVideoTexture=!0;class xp extends go{constructor(t,i,o,l,f,B,M,D,G,$,ie,oe){super(null,B,M,D,G,$,l,f,ie,oe),this.image={width:i,height:o},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}xp.prototype.isCompressedTexture=!0;class Wc extends go{constructor(t,i,o,l,f,B,M,D,G){super(t,i,o,l,f,B,M,D,G),this.needsUpdate=!0}}Wc.prototype.isCanvasTexture=!0;class Ep extends go{constructor(t,i,o,l,f,B,M,D,G,$){if(($=$!==void 0?$:qo)!==qo&&$!==sa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");o===void 0&&$===qo&&(o=oc),o===void 0&&$===sa&&(o=ma),super(null,l,f,B,M,D,$,o,G),this.image={width:t,height:i},this.magFilter=M!==void 0?M:mo,this.minFilter=D!==void 0?D:mo,this.flipY=!1,this.generateMipmaps=!1}}Ep.prototype.isDepthTexture=!0;class Dd extends k{constructor(t=1,i=8,o=0,l=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:i,thetaStart:o,thetaLength:l},i=Math.max(3,i);const f=[],B=[],M=[],D=[],G=new Je,$=new Qn;B.push(0,0,0),M.push(0,0,1),D.push(.5,.5);for(let ie=0,oe=3;ie<=i;ie++,oe+=3){const he=o+ie/i*l;G.x=t*Math.cos(he),G.y=t*Math.sin(he),B.push(G.x,G.y,G.z),M.push(0,0,1),$.x=(B[oe]/t+1)/2,$.y=(B[oe+1]/t+1)/2,D.push($.x,$.y)}for(let ie=1;ie<=i;ie++)f.push(ie,ie+1,0);this.setIndex(f),this.setAttribute("position",new P(B,3)),this.setAttribute("normal",new P(M,3)),this.setAttribute("uv",new P(D,2))}}class Kc extends k{constructor(t=1,i=1,o=1,l=8,f=1,B=!1,M=0,D=2*Math.PI){function G(it){const lt=we,pt=new Qn,mt=new Je;let ot=0;const kt=it===!0?t:i,gt=it===!0?1:-1;for(let Zt=1;Zt<=l;Zt++)oe.push(0,ke*gt,0),he.push(0,gt,0),ye.push(.5,.5),we++;const Ht=we;for(let Zt=0;Zt<=l;Zt++){const Qt=Zt/l*D+M,en=Math.cos(Qt),Wn=Math.sin(Qt);mt.x=kt*Wn,mt.y=ke*gt,mt.z=kt*en,oe.push(mt.x,mt.y,mt.z),he.push(0,gt,0),pt.x=.5*en+.5,pt.y=.5*Wn*gt+.5,ye.push(pt.x,pt.y),we++}for(let Zt=0;Zt<l;Zt++){const Qt=lt+Zt,en=Ht+Zt;it===!0?ie.push(en,en+1,Qt):ie.push(en+1,en,Qt),ot+=3}$.addGroup(Xe,ot,it===!0?1:2),Xe+=ot}super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:i,height:o,radialSegments:l,heightSegments:f,openEnded:B,thetaStart:M,thetaLength:D};const $=this;l=Math.floor(l),f=Math.floor(f);const ie=[],oe=[],he=[],ye=[];let we=0;const be=[],ke=o/2;let Xe=0;(function(){const it=new Je,lt=new Je;let pt=0;const mt=(i-t)/o;for(let ot=0;ot<=f;ot++){const kt=[],gt=ot/f,Ht=gt*(i-t)+t;for(let Zt=0;Zt<=l;Zt++){const Qt=Zt/l,en=Qt*D+M,Wn=Math.sin(en),ii=Math.cos(en);lt.x=Ht*Wn,lt.y=-gt*o+ke,lt.z=Ht*ii,oe.push(lt.x,lt.y,lt.z),it.set(Wn,mt,ii).normalize(),he.push(it.x,it.y,it.z),ye.push(Qt,1-gt),kt.push(we++)}be.push(kt)}for(let ot=0;ot<l;ot++)for(let kt=0;kt<f;kt++){const gt=be[kt][ot],Ht=be[kt+1][ot],Zt=be[kt+1][ot+1],Qt=be[kt][ot+1];ie.push(gt,Ht,Qt),ie.push(Ht,Zt,Qt),pt+=6}$.addGroup(Xe,pt,0),Xe+=pt})(),B===!1&&(t>0&&G(!0),i>0&&G(!1)),this.setIndex(ie),this.setAttribute("position",new P(oe,3)),this.setAttribute("normal",new P(he,3)),this.setAttribute("uv",new P(ye,2))}}class Ql extends Kc{constructor(t=1,i=1,o=8,l=1,f=!1,B=0,M=2*Math.PI){super(0,t,i,o,l,f,B,M),this.type="ConeGeometry",this.parameters={radius:t,height:i,radialSegments:o,heightSegments:l,openEnded:f,thetaStart:B,thetaLength:M}}}class Ga extends k{constructor(t,i,o=1,l=0){function f(ie){G.push(ie.x,ie.y,ie.z)}function B(ie,oe){const he=3*ie;oe.x=t[he+0],oe.y=t[he+1],oe.z=t[he+2]}function M(ie,oe,he,ye){ye<0&&ie.x===1&&($[oe]=ie.x-1),he.x===0&&he.z===0&&($[oe]=ye/2/Math.PI+.5)}function D(ie){return Math.atan2(ie.z,-ie.x)}super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:i,radius:o,detail:l};const G=[],$=[];(function(ie){const oe=new Je,he=new Je,ye=new Je;for(let we=0;we<i.length;we+=3)B(i[we+0],oe),B(i[we+1],he),B(i[we+2],ye),function(be,ke,Xe,it){const lt=it+1,pt=[];for(let mt=0;mt<=lt;mt++){pt[mt]=[];const ot=be.clone().lerp(Xe,mt/lt),kt=ke.clone().lerp(Xe,mt/lt),gt=lt-mt;for(let Ht=0;Ht<=gt;Ht++)pt[mt][Ht]=Ht===0&&mt===lt?ot:ot.clone().lerp(kt,Ht/gt)}for(let mt=0;mt<lt;mt++)for(let ot=0;ot<2*(lt-mt)-1;ot++){const kt=Math.floor(ot/2);ot%2==0?(f(pt[mt][kt+1]),f(pt[mt+1][kt]),f(pt[mt][kt])):(f(pt[mt][kt+1]),f(pt[mt+1][kt+1]),f(pt[mt+1][kt]))}}(oe,he,ye,ie)})(l),function(ie){const oe=new Je;for(let he=0;he<G.length;he+=3)oe.x=G[he+0],oe.y=G[he+1],oe.z=G[he+2],oe.normalize().multiplyScalar(ie),G[he+0]=oe.x,G[he+1]=oe.y,G[he+2]=oe.z}(o),function(){const ie=new Je;for(let oe=0;oe<G.length;oe+=3){ie.x=G[oe+0],ie.y=G[oe+1],ie.z=G[oe+2];const he=D(ie)/2/Math.PI+.5,ye=function(we){return Math.atan2(-we.y,Math.sqrt(we.x*we.x+we.z*we.z))}(ie)/Math.PI+.5;$.push(he,1-ye)}(function(){const oe=new Je,he=new Je,ye=new Je,we=new Je,be=new Qn,ke=new Qn,Xe=new Qn;for(let it=0,lt=0;it<G.length;it+=9,lt+=6){oe.set(G[it+0],G[it+1],G[it+2]),he.set(G[it+3],G[it+4],G[it+5]),ye.set(G[it+6],G[it+7],G[it+8]),be.set($[lt+0],$[lt+1]),ke.set($[lt+2],$[lt+3]),Xe.set($[lt+4],$[lt+5]),we.copy(oe).add(he).add(ye).divideScalar(3);const pt=D(we);M(be,lt+0,oe,pt),M(ke,lt+2,he,pt),M(Xe,lt+4,ye,pt)}})(),function(){for(let oe=0;oe<$.length;oe+=6){const he=$[oe+0],ye=$[oe+2],we=$[oe+4],be=Math.max(he,ye,we),ke=Math.min(he,ye,we);be>.9&&ke<.1&&(he<.2&&($[oe+0]+=1),ye<.2&&($[oe+2]+=1),we<.2&&($[oe+4]+=1))}}()}(),this.setAttribute("position",new P(G,3)),this.setAttribute("normal",new P(G.slice(),3)),this.setAttribute("uv",new P($,2)),l===0?this.computeVertexNormals():this.normalizeNormals()}}class Pd extends Ga{constructor(t=1,i=0){const o=(1+Math.sqrt(5))/2,l=1/o;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-l,-o,0,-l,o,0,l,-o,0,l,o,-l,-o,0,-l,o,0,l,-o,0,l,o,0,-o,0,-l,o,0,-l,-o,0,l,o,0,l],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,i),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:i}}}const Dh=new Je,bp=new Je,_p=new Je,Ru=new vo;class $m extends k{constructor(t,i){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:i},i=i!==void 0?i:1,t.isGeometry===!0)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const o=Math.pow(10,4),l=Math.cos(qi.DEG2RAD*i),f=t.getIndex(),B=t.getAttribute("position"),M=f?f.count:B.count,D=[0,0,0],G=["a","b","c"],$=new Array(3),ie={},oe=[];for(let he=0;he<M;he+=3){f?(D[0]=f.getX(he),D[1]=f.getX(he+1),D[2]=f.getX(he+2)):(D[0]=he,D[1]=he+1,D[2]=he+2);const{a:ye,b:we,c:be}=Ru;if(ye.fromBufferAttribute(B,D[0]),we.fromBufferAttribute(B,D[1]),be.fromBufferAttribute(B,D[2]),Ru.getNormal(_p),$[0]=`${Math.round(ye.x*o)},${Math.round(ye.y*o)},${Math.round(ye.z*o)}`,$[1]=`${Math.round(we.x*o)},${Math.round(we.y*o)},${Math.round(we.z*o)}`,$[2]=`${Math.round(be.x*o)},${Math.round(be.y*o)},${Math.round(be.z*o)}`,$[0]!==$[1]&&$[1]!==$[2]&&$[2]!==$[0])for(let ke=0;ke<3;ke++){const Xe=(ke+1)%3,it=$[ke],lt=$[Xe],pt=Ru[G[ke]],mt=Ru[G[Xe]],ot=`${it}_${lt}`,kt=`${lt}_${it}`;kt in ie&&ie[kt]?(_p.dot(ie[kt].normal)<=l&&(oe.push(pt.x,pt.y,pt.z),oe.push(mt.x,mt.y,mt.z)),ie[kt]=null):ot in ie||(ie[ot]={index0:D[ke],index1:D[Xe],normal:_p.clone()})}}for(const he in ie)if(ie[he]){const{index0:ye,index1:we}=ie[he];Dh.fromBufferAttribute(B,ye),bp.fromBufferAttribute(B,we),oe.push(Dh.x,Dh.y,Dh.z),oe.push(bp.x,bp.y,bp.z)}this.setAttribute("position",new P(oe,3))}}const D0={triangulate:function(s,t,i){i=i||2;const o=t&&t.length,l=o?t[0]*i:s.length;let f=ro(s,0,l,i,!0);const B=[];if(!f||f.next===f.prev)return B;let M,D,G,$,ie,oe,he;if(o&&(f=to(s,t,f,i)),s.length>80*i){M=G=s[0],D=$=s[1];for(let ye=i;ye<l;ye+=i)ie=s[ye],oe=s[ye+1],ie<M&&(M=ie),oe<D&&(D=oe),ie>G&&(G=ie),oe>$&&($=oe);he=(he=Math.max(G-M,$-D))!==0?1/he:0}return Ir(f,B,i,M,D,he),B}},jl={area:function(s){const t=s.length;let i=0;for(let o=t-1,l=0;l<t;o=l++)i+=s[o].x*s[l].y-s[l].x*s[o].y;return .5*i},isClockWise:function(s){return jl.area(s)<0},triangulateShape:function(s,t){const i=[],o=[],l=[];xi(s),Ui(i,s);let f=s.length;t.forEach(xi);for(let M=0;M<t.length;M++)o.push(f),f+=t[M].length,Ui(i,t[M]);const B=D0.triangulate(i,o);for(let M=0;M<B.length;M+=3)l.push(B.slice(M,M+3));return l}};class ml extends k{constructor(t,i){function o(M){function D(Fn,jn,Sn){return jn||console.error("THREE.ExtrudeGeometry: vec does not exist"),jn.clone().multiplyScalar(Sn).add(Fn)}function G(Fn,jn,Sn){let Ii,vi,pr;const Ri=Fn.x-jn.x,br=Fn.y-jn.y,gs=Sn.x-Fn.x,Ct=Sn.y-Fn.y,Cr=Ri*Ri+br*br,ts=Ri*Ct-br*gs;if(Math.abs(ts)>Number.EPSILON){const Mr=Math.sqrt(Cr),eo=Math.sqrt(gs*gs+Ct*Ct),vs=jn.x-br/Mr,Bo=jn.y+Ri/Mr,El=((Sn.x-Ct/eo-vs)*Ct-(Sn.y+gs/eo-Bo)*gs)/(Ri*Ct-br*gs),bl=(Ii=vs+Ri*El-Fn.x)*Ii+(vi=Bo+br*El-Fn.y)*vi;if(bl<=2)return new Qn(Ii,vi);pr=Math.sqrt(bl/2)}else{let Mr=!1;Ri>Number.EPSILON?gs>Number.EPSILON&&(Mr=!0):Ri<-Number.EPSILON?gs<-Number.EPSILON&&(Mr=!0):Math.sign(br)===Math.sign(Ct)&&(Mr=!0),Mr?(Ii=-br,vi=Ri,pr=Math.sqrt(Cr)):(Ii=Ri,vi=br,pr=Math.sqrt(Cr/2))}return new Qn(Ii/pr,vi/pr)}function $(Fn,jn){let Sn=Fn.length;for(;--Sn>=0;){const Ii=Sn;let vi=Sn-1;vi<0&&(vi=Fn.length-1);for(let pr=0,Ri=ke+2*ot;pr<Ri;pr++){const br=Xr*pr,gs=Xr*(pr+1);(function(Ct,Cr,ts,Mr){he(Ct),he(Cr),he(Mr),he(Cr),he(ts),he(Mr);const eo=f.length/3,vs=gt.generateSideWallUV(l,f,eo-6,eo-3,eo-2,eo-1);ye(vs[0]),ye(vs[1]),ye(vs[3]),ye(vs[1]),ye(vs[2]),ye(vs[3])})(jn+Ii+br,jn+vi+br,jn+vi+gs,jn+Ii+gs)}}}function ie(Fn,jn,Sn){we.push(Fn),we.push(jn),we.push(Sn)}function oe(Fn,jn,Sn){he(Fn),he(jn),he(Sn);const Ii=f.length/3,vi=gt.generateTopUV(l,f,Ii-3,Ii-2,Ii-1);ye(vi[0]),ye(vi[1]),ye(vi[2])}function he(Fn){f.push(we[3*Fn+0]),f.push(we[3*Fn+1]),f.push(we[3*Fn+2])}function ye(Fn){B.push(Fn.x),B.push(Fn.y)}const we=[],be=i.curveSegments!==void 0?i.curveSegments:12,ke=i.steps!==void 0?i.steps:1;let Xe=i.depth!==void 0?i.depth:100,it=i.bevelEnabled===void 0||i.bevelEnabled,lt=i.bevelThickness!==void 0?i.bevelThickness:6,pt=i.bevelSize!==void 0?i.bevelSize:lt-2,mt=i.bevelOffset!==void 0?i.bevelOffset:0,ot=i.bevelSegments!==void 0?i.bevelSegments:3;const kt=i.extrudePath,gt=i.UVGenerator!==void 0?i.UVGenerator:Ov;i.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),Xe=i.amount);let Ht,Zt,Qt,en,Wn,ii=!1;kt&&(Ht=kt.getSpacedPoints(ke),ii=!0,it=!1,Zt=kt.computeFrenetFrames(ke,!1),Qt=new Je,en=new Je,Wn=new Je),it||(ot=0,lt=0,pt=0,mt=0);const lr=M.extractPoints(be);let oi=lr.shape;const qn=lr.holes;if(!jl.isClockWise(oi)){oi=oi.reverse();for(let Fn=0,jn=qn.length;Fn<jn;Fn++){const Sn=qn[Fn];jl.isClockWise(Sn)&&(qn[Fn]=Sn.reverse())}}const $i=jl.triangulateShape(oi,qn),Ji=oi;for(let Fn=0,jn=qn.length;Fn<jn;Fn++){const Sn=qn[Fn];oi=oi.concat(Sn)}const Xr=oi.length,Tt=$i.length,Mt=[];for(let Fn=0,jn=Ji.length,Sn=jn-1,Ii=Fn+1;Fn<jn;Fn++,Sn++,Ii++)Sn===jn&&(Sn=0),Ii===jn&&(Ii=0),Mt[Fn]=G(Ji[Fn],Ji[Sn],Ji[Ii]);const Yn=[];let Cn,zn=Mt.concat();for(let Fn=0,jn=qn.length;Fn<jn;Fn++){const Sn=qn[Fn];Cn=[];for(let Ii=0,vi=Sn.length,pr=vi-1,Ri=Ii+1;Ii<vi;Ii++,pr++,Ri++)pr===vi&&(pr=0),Ri===vi&&(Ri=0),Cn[Ii]=G(Sn[Ii],Sn[pr],Sn[Ri]);Yn.push(Cn),zn=zn.concat(Cn)}for(let Fn=0;Fn<ot;Fn++){const jn=Fn/ot,Sn=lt*Math.cos(jn*Math.PI/2),Ii=pt*Math.sin(jn*Math.PI/2)+mt;for(let vi=0,pr=Ji.length;vi<pr;vi++){const Ri=D(Ji[vi],Mt[vi],Ii);ie(Ri.x,Ri.y,-Sn)}for(let vi=0,pr=qn.length;vi<pr;vi++){const Ri=qn[vi];Cn=Yn[vi];for(let br=0,gs=Ri.length;br<gs;br++){const Ct=D(Ri[br],Cn[br],Ii);ie(Ct.x,Ct.y,-Sn)}}}const hr=pt+mt;for(let Fn=0;Fn<Xr;Fn++){const jn=it?D(oi[Fn],zn[Fn],hr):oi[Fn];ii?(en.copy(Zt.normals[0]).multiplyScalar(jn.x),Qt.copy(Zt.binormals[0]).multiplyScalar(jn.y),Wn.copy(Ht[0]).add(en).add(Qt),ie(Wn.x,Wn.y,Wn.z)):ie(jn.x,jn.y,0)}for(let Fn=1;Fn<=ke;Fn++)for(let jn=0;jn<Xr;jn++){const Sn=it?D(oi[jn],zn[jn],hr):oi[jn];ii?(en.copy(Zt.normals[Fn]).multiplyScalar(Sn.x),Qt.copy(Zt.binormals[Fn]).multiplyScalar(Sn.y),Wn.copy(Ht[Fn]).add(en).add(Qt),ie(Wn.x,Wn.y,Wn.z)):ie(Sn.x,Sn.y,Xe/ke*Fn)}for(let Fn=ot-1;Fn>=0;Fn--){const jn=Fn/ot,Sn=lt*Math.cos(jn*Math.PI/2),Ii=pt*Math.sin(jn*Math.PI/2)+mt;for(let vi=0,pr=Ji.length;vi<pr;vi++){const Ri=D(Ji[vi],Mt[vi],Ii);ie(Ri.x,Ri.y,Xe+Sn)}for(let vi=0,pr=qn.length;vi<pr;vi++){const Ri=qn[vi];Cn=Yn[vi];for(let br=0,gs=Ri.length;br<gs;br++){const Ct=D(Ri[br],Cn[br],Ii);ii?ie(Ct.x,Ct.y+Ht[ke-1].y,Ht[ke-1].x+Sn):ie(Ct.x,Ct.y,Xe+Sn)}}}(function(){const Fn=f.length/3;if(it){let jn=0,Sn=Xr*jn;for(let Ii=0;Ii<Tt;Ii++){const vi=$i[Ii];oe(vi[2]+Sn,vi[1]+Sn,vi[0]+Sn)}Sn=Xr*(jn=ke+2*ot);for(let Ii=0;Ii<Tt;Ii++){const vi=$i[Ii];oe(vi[0]+Sn,vi[1]+Sn,vi[2]+Sn)}}else{for(let jn=0;jn<Tt;jn++){const Sn=$i[jn];oe(Sn[2],Sn[1],Sn[0])}for(let jn=0;jn<Tt;jn++){const Sn=$i[jn];oe(Sn[0]+Xr*ke,Sn[1]+Xr*ke,Sn[2]+Xr*ke)}}l.addGroup(Fn,f.length/3-Fn,0)})(),function(){const Fn=f.length/3;let jn=0;$(Ji,jn),jn+=Ji.length;for(let Sn=0,Ii=qn.length;Sn<Ii;Sn++){const vi=qn[Sn];$(vi,jn),jn+=vi.length}l.addGroup(Fn,f.length/3-Fn,1)}()}super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:i};const l=this,f=[],B=[];for(let M=0,D=(t=Array.isArray(t)?t:[t]).length;M<D;M++)o(t[M]);this.setAttribute("position",new P(f,3)),this.setAttribute("uv",new P(B,2)),this.computeVertexNormals()}toJSON(){const t=k.prototype.toJSON.call(this);return function(i,o,l){if(l.shapes=[],Array.isArray(i))for(let f=0,B=i.length;f<B;f++){const M=i[f];l.shapes.push(M.uuid)}else l.shapes.push(i.uuid);return o.extrudePath!==void 0&&(l.options.extrudePath=o.extrudePath.toJSON()),l}(this.parameters.shapes,this.parameters.options,t)}}const Ov={generateTopUV:function(s,t,i,o,l){const f=t[3*i],B=t[3*i+1],M=t[3*o],D=t[3*o+1],G=t[3*l],$=t[3*l+1];return[new Qn(f,B),new Qn(M,D),new Qn(G,$)]},generateSideWallUV:function(s,t,i,o,l,f){const B=t[3*i],M=t[3*i+1],D=t[3*i+2],G=t[3*o],$=t[3*o+1],ie=t[3*o+2],oe=t[3*l],he=t[3*l+1],ye=t[3*l+2],we=t[3*f],be=t[3*f+1],ke=t[3*f+2];return Math.abs(M-$)<.01?[new Qn(B,1-D),new Qn(G,1-ie),new Qn(oe,1-ye),new Qn(we,1-ke)]:[new Qn(M,1-D),new Qn($,1-ie),new Qn(he,1-ye),new Qn(be,1-ke)]}};class wp extends Ga{constructor(t=1,i=0){const o=(1+Math.sqrt(5))/2;super([-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,i),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:i}}}class Cp extends k{constructor(t,i=12,o=0,l=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:i,phiStart:o,phiLength:l},i=Math.floor(i),l=qi.clamp(l,0,2*Math.PI);const f=[],B=[],M=[],D=1/i,G=new Je,$=new Qn;for(let ie=0;ie<=i;ie++){const oe=o+ie*D*l,he=Math.sin(oe),ye=Math.cos(oe);for(let we=0;we<=t.length-1;we++)G.x=t[we].x*he,G.y=t[we].y,G.z=t[we].x*ye,B.push(G.x,G.y,G.z),$.x=ie/i,$.y=we/(t.length-1),M.push($.x,$.y)}for(let ie=0;ie<i;ie++)for(let oe=0;oe<t.length-1;oe++){const he=oe+ie*t.length,ye=he,we=he+t.length,be=he+t.length+1,ke=he+1;f.push(ye,we,ke),f.push(we,be,ke)}if(this.setIndex(f),this.setAttribute("position",new P(B,3)),this.setAttribute("uv",new P(M,2)),this.computeVertexNormals(),l===2*Math.PI){const ie=this.attributes.normal.array,oe=new Je,he=new Je,ye=new Je,we=i*t.length*3;for(let be=0,ke=0;be<t.length;be++,ke+=3)oe.x=ie[ke+0],oe.y=ie[ke+1],oe.z=ie[ke+2],he.x=ie[we+ke+0],he.y=ie[we+ke+1],he.z=ie[we+ke+2],ye.addVectors(oe,he).normalize(),ie[ke+0]=ie[we+ke+0]=ye.x,ie[ke+1]=ie[we+ke+1]=ye.y,ie[ke+2]=ie[we+ke+2]=ye.z}}}class Od extends Ga{constructor(t=1,i=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,i),this.type="OctahedronGeometry",this.parameters={radius:t,detail:i}}}(Xi.prototype=Object.create(k.prototype)).constructor=Xi;class Mp extends k{constructor(t=.5,i=1,o=8,l=1,f=0,B=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:i,thetaSegments:o,phiSegments:l,thetaStart:f,thetaLength:B},o=Math.max(3,o);const M=[],D=[],G=[],$=[];let ie=t;const oe=(i-t)/(l=Math.max(1,l)),he=new Je,ye=new Qn;for(let we=0;we<=l;we++){for(let be=0;be<=o;be++){const ke=f+be/o*B;he.x=ie*Math.cos(ke),he.y=ie*Math.sin(ke),D.push(he.x,he.y,he.z),G.push(0,0,1),ye.x=(he.x/i+1)/2,ye.y=(he.y/i+1)/2,$.push(ye.x,ye.y)}ie+=oe}for(let we=0;we<l;we++){const be=we*(o+1);for(let ke=0;ke<o;ke++){const Xe=ke+be,it=Xe,lt=Xe+o+1,pt=Xe+o+2,mt=Xe+1;M.push(it,lt,mt),M.push(lt,pt,mt)}}this.setIndex(M),this.setAttribute("position",new P(D,3)),this.setAttribute("normal",new P(G,3)),this.setAttribute("uv",new P($,2))}}class Fd extends k{constructor(t,i=12){function o($){const ie=f.length/3,oe=$.extractPoints(i);let he=oe.shape;const ye=oe.holes;jl.isClockWise(he)===!1&&(he=he.reverse());for(let be=0,ke=ye.length;be<ke;be++){const Xe=ye[be];jl.isClockWise(Xe)===!0&&(ye[be]=Xe.reverse())}const we=jl.triangulateShape(he,ye);for(let be=0,ke=ye.length;be<ke;be++){const Xe=ye[be];he=he.concat(Xe)}for(let be=0,ke=he.length;be<ke;be++){const Xe=he[be];f.push(Xe.x,Xe.y,0),B.push(0,0,1),M.push(Xe.x,Xe.y)}for(let be=0,ke=we.length;be<ke;be++){const Xe=we[be],it=Xe[0]+ie,lt=Xe[1]+ie,pt=Xe[2]+ie;l.push(it,lt,pt),G+=3}}super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:i};const l=[],f=[],B=[],M=[];let D=0,G=0;if(Array.isArray(t)===!1)o(t);else for(let $=0;$<t.length;$++)o(t[$]),this.addGroup(D,G,$),D+=G,G=0;this.setIndex(l),this.setAttribute("position",new P(f,3)),this.setAttribute("normal",new P(B,3)),this.setAttribute("uv",new P(M,2))}toJSON(){const t=k.prototype.toJSON.call(this);return function(i,o){if(o.shapes=[],Array.isArray(i))for(let l=0,f=i.length;l<f;l++){const B=i[l];o.shapes.push(B.uuid)}else o.shapes.push(i.uuid);return o}(this.parameters.shapes,t)}}class Nd extends k{constructor(t=1,i=8,o=6,l=0,f=2*Math.PI,B=0,M=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:i,heightSegments:o,phiStart:l,phiLength:f,thetaStart:B,thetaLength:M},i=Math.max(3,Math.floor(i)),o=Math.max(2,Math.floor(o));const D=Math.min(B+M,Math.PI);let G=0;const $=[],ie=new Je,oe=new Je,he=[],ye=[],we=[],be=[];for(let ke=0;ke<=o;ke++){const Xe=[],it=ke/o;let lt=0;ke==0&&B==0?lt=.5/i:ke==o&&D==Math.PI&&(lt=-.5/i);for(let pt=0;pt<=i;pt++){const mt=pt/i;ie.x=-t*Math.cos(l+mt*f)*Math.sin(B+it*M),ie.y=t*Math.cos(B+it*M),ie.z=t*Math.sin(l+mt*f)*Math.sin(B+it*M),ye.push(ie.x,ie.y,ie.z),oe.copy(ie).normalize(),we.push(oe.x,oe.y,oe.z),be.push(mt+lt,1-it),Xe.push(G++)}$.push(Xe)}for(let ke=0;ke<o;ke++)for(let Xe=0;Xe<i;Xe++){const it=$[ke][Xe+1],lt=$[ke][Xe],pt=$[ke+1][Xe],mt=$[ke+1][Xe+1];(ke!==0||B>0)&&he.push(it,lt,mt),(ke!==o-1||D<Math.PI)&&he.push(lt,pt,mt)}this.setIndex(he),this.setAttribute("position",new P(ye,3)),this.setAttribute("normal",new P(we,3)),this.setAttribute("uv",new P(be,2))}}class Tp extends Ga{constructor(t=1,i=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,i),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:i}}}class Sp extends ml{constructor(t,i={}){const o=i.font;if(!o||!o.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new k;const l=o.generateShapes(t,i.size);i.depth=i.height!==void 0?i.height:50,i.bevelThickness===void 0&&(i.bevelThickness=10),i.bevelSize===void 0&&(i.bevelSize=8),i.bevelEnabled===void 0&&(i.bevelEnabled=!1),super(l,i),this.type="TextGeometry"}}class kd extends k{constructor(t=1,i=.4,o=8,l=6,f=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:i,radialSegments:o,tubularSegments:l,arc:f},o=Math.floor(o),l=Math.floor(l);const B=[],M=[],D=[],G=[],$=new Je,ie=new Je,oe=new Je;for(let he=0;he<=o;he++)for(let ye=0;ye<=l;ye++){const we=ye/l*f,be=he/o*Math.PI*2;ie.x=(t+i*Math.cos(be))*Math.cos(we),ie.y=(t+i*Math.cos(be))*Math.sin(we),ie.z=i*Math.sin(be),M.push(ie.x,ie.y,ie.z),$.x=t*Math.cos(we),$.y=t*Math.sin(we),oe.subVectors(ie,$).normalize(),D.push(oe.x,oe.y,oe.z),G.push(ye/l),G.push(he/o)}for(let he=1;he<=o;he++)for(let ye=1;ye<=l;ye++){const we=(l+1)*he+ye-1,be=(l+1)*(he-1)+ye-1,ke=(l+1)*(he-1)+ye,Xe=(l+1)*he+ye;B.push(we,be,Xe),B.push(be,ke,Xe)}this.setIndex(B),this.setAttribute("position",new P(M,3)),this.setAttribute("normal",new P(D,3)),this.setAttribute("uv",new P(G,2))}}class Ud extends k{constructor(t=1,i=.4,o=64,l=8,f=2,B=3){function M(it,lt,pt,mt,ot){const kt=Math.cos(it),gt=Math.sin(it),Ht=pt/lt*it,Zt=Math.cos(Ht);ot.x=mt*(2+Zt)*.5*kt,ot.y=mt*(2+Zt)*gt*.5,ot.z=mt*Math.sin(Ht)*.5}super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:i,tubularSegments:o,radialSegments:l,p:f,q:B},o=Math.floor(o),l=Math.floor(l);const D=[],G=[],$=[],ie=[],oe=new Je,he=new Je,ye=new Je,we=new Je,be=new Je,ke=new Je,Xe=new Je;for(let it=0;it<=o;++it){const lt=it/o*f*Math.PI*2;M(lt,f,B,t,ye),M(lt+.01,f,B,t,we),ke.subVectors(we,ye),Xe.addVectors(we,ye),be.crossVectors(ke,Xe),Xe.crossVectors(be,ke),be.normalize(),Xe.normalize();for(let pt=0;pt<=l;++pt){const mt=pt/l*Math.PI*2,ot=-i*Math.cos(mt),kt=i*Math.sin(mt);oe.x=ye.x+(ot*Xe.x+kt*be.x),oe.y=ye.y+(ot*Xe.y+kt*be.y),oe.z=ye.z+(ot*Xe.z+kt*be.z),G.push(oe.x,oe.y,oe.z),he.subVectors(oe,ye).normalize(),$.push(he.x,he.y,he.z),ie.push(it/o),ie.push(pt/l)}}for(let it=1;it<=o;it++)for(let lt=1;lt<=l;lt++){const pt=(l+1)*(it-1)+(lt-1),mt=(l+1)*it+(lt-1),ot=(l+1)*it+lt,kt=(l+1)*(it-1)+lt;D.push(pt,mt,kt),D.push(mt,ot,kt)}this.setIndex(D),this.setAttribute("position",new P(G,3)),this.setAttribute("normal",new P($,3)),this.setAttribute("uv",new P(ie,2))}}class Gd extends k{constructor(t,i=64,o=1,l=8,f=!1){function B(be){ie=t.getPointAt(be/i,ie);const ke=M.normals[be],Xe=M.binormals[be];for(let it=0;it<=l;it++){const lt=it/l*Math.PI*2,pt=Math.sin(lt),mt=-Math.cos(lt);G.x=mt*ke.x+pt*Xe.x,G.y=mt*ke.y+pt*Xe.y,G.z=mt*ke.z+pt*Xe.z,G.normalize(),he.push(G.x,G.y,G.z),D.x=ie.x+o*G.x,D.y=ie.y+o*G.y,D.z=ie.z+o*G.z,oe.push(D.x,D.y,D.z)}}super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:i,radius:o,radialSegments:l,closed:f};const M=t.computeFrenetFrames(i,f);this.tangents=M.tangents,this.normals=M.normals,this.binormals=M.binormals;const D=new Je,G=new Je,$=new Qn;let ie=new Je;const oe=[],he=[],ye=[],we=[];(function(){for(let be=0;be<i;be++)B(be);B(f===!1?i:0),function(){for(let be=0;be<=i;be++)for(let ke=0;ke<=l;ke++)$.x=be/i,$.y=ke/l,ye.push($.x,$.y)}(),function(){for(let be=1;be<=i;be++)for(let ke=1;ke<=l;ke++){const Xe=(l+1)*(be-1)+(ke-1),it=(l+1)*be+(ke-1),lt=(l+1)*be+ke,pt=(l+1)*(be-1)+ke;we.push(Xe,it,pt),we.push(it,lt,pt)}}()})(),this.setIndex(we),this.setAttribute("position",new P(oe,3)),this.setAttribute("normal",new P(he,3)),this.setAttribute("uv",new P(ye,2))}toJSON(){const t=k.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class Ip extends k{constructor(t){if(super(),this.type="WireframeGeometry",t.isGeometry===!0)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const i=[],o=[0,0],l={},f=new Je;if(t.index!==null){const B=t.attributes.position,M=t.index;let D=t.groups;D.length===0&&(D=[{start:0,count:M.count,materialIndex:0}]);for(let G=0,$=D.length;G<$;++G){const ie=D[G],oe=ie.start;for(let he=oe,ye=oe+ie.count;he<ye;he+=3)for(let we=0;we<3;we++){const be=M.getX(he+we),ke=M.getX(he+(we+1)%3);o[0]=Math.min(be,ke),o[1]=Math.max(be,ke);const Xe=o[0]+","+o[1];l[Xe]===void 0&&(l[Xe]={index1:o[0],index2:o[1]})}}for(const G in l){const $=l[G];f.fromBufferAttribute(B,$.index1),i.push(f.x,f.y,f.z),f.fromBufferAttribute(B,$.index2),i.push(f.x,f.y,f.z)}}else{const B=t.attributes.position;for(let M=0,D=B.count/3;M<D;M++)for(let G=0;G<3;G++){const $=3*M+G;f.fromBufferAttribute(B,$),i.push(f.x,f.y,f.z);const ie=3*M+(G+1)%3;f.fromBufferAttribute(B,ie),i.push(f.x,f.y,f.z)}}this.setAttribute("position",new P(i,3))}}var la=Object.freeze({__proto__:null,BoxGeometry:Cu,BoxBufferGeometry:Cu,CircleGeometry:Dd,CircleBufferGeometry:Dd,ConeGeometry:Ql,ConeBufferGeometry:Ql,CylinderGeometry:Kc,CylinderBufferGeometry:Kc,DodecahedronGeometry:Pd,DodecahedronBufferGeometry:Pd,EdgesGeometry:$m,ExtrudeGeometry:ml,ExtrudeBufferGeometry:ml,IcosahedronGeometry:wp,IcosahedronBufferGeometry:wp,LatheGeometry:Cp,LatheBufferGeometry:Cp,OctahedronGeometry:Od,OctahedronBufferGeometry:Od,ParametricGeometry:Xi,ParametricBufferGeometry:Xi,PlaneGeometry:Cd,PlaneBufferGeometry:Cd,PolyhedronGeometry:Ga,PolyhedronBufferGeometry:Ga,RingGeometry:Mp,RingBufferGeometry:Mp,ShapeGeometry:Fd,ShapeBufferGeometry:Fd,SphereGeometry:Nd,SphereBufferGeometry:Nd,TetrahedronGeometry:Tp,TetrahedronBufferGeometry:Tp,TextGeometry:Sp,TextBufferGeometry:Sp,TorusGeometry:kd,TorusBufferGeometry:kd,TorusKnotGeometry:Ud,TorusKnotBufferGeometry:Ud,TubeGeometry:Gd,TubeBufferGeometry:Gd,WireframeGeometry:Ip});class Rp extends u{constructor(t){super(),this.type="ShadowMaterial",this.color=new Fi(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}Rp.prototype.isShadowMaterial=!0;class Bu extends V{constructor(t){super(t),this.type="RawShaderMaterial"}}Bu.prototype.isRawShaderMaterial=!0,(fr.prototype=Object.create(u.prototype)).constructor=fr,fr.prototype.isMeshStandardMaterial=!0,fr.prototype.copy=function(s){return u.prototype.copy.call(this,s),this.defines={STANDARD:""},this.color.copy(s.color),this.roughness=s.roughness,this.metalness=s.metalness,this.map=s.map,this.lightMap=s.lightMap,this.lightMapIntensity=s.lightMapIntensity,this.aoMap=s.aoMap,this.aoMapIntensity=s.aoMapIntensity,this.emissive.copy(s.emissive),this.emissiveMap=s.emissiveMap,this.emissiveIntensity=s.emissiveIntensity,this.bumpMap=s.bumpMap,this.bumpScale=s.bumpScale,this.normalMap=s.normalMap,this.normalMapType=s.normalMapType,this.normalScale.copy(s.normalScale),this.displacementMap=s.displacementMap,this.displacementScale=s.displacementScale,this.displacementBias=s.displacementBias,this.roughnessMap=s.roughnessMap,this.metalnessMap=s.metalnessMap,this.alphaMap=s.alphaMap,this.envMap=s.envMap,this.envMapIntensity=s.envMapIntensity,this.refractionRatio=s.refractionRatio,this.wireframe=s.wireframe,this.wireframeLinewidth=s.wireframeLinewidth,this.wireframeLinecap=s.wireframeLinecap,this.wireframeLinejoin=s.wireframeLinejoin,this.skinning=s.skinning,this.morphTargets=s.morphTargets,this.morphNormals=s.morphNormals,this.flatShading=s.flatShading,this.vertexTangents=s.vertexTangents,this},(ur.prototype=Object.create(fr.prototype)).constructor=ur,ur.prototype.isMeshPhysicalMaterial=!0,ur.prototype.copy=function(s){return fr.prototype.copy.call(this,s),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=s.clearcoat,this.clearcoatMap=s.clearcoatMap,this.clearcoatRoughness=s.clearcoatRoughness,this.clearcoatRoughnessMap=s.clearcoatRoughnessMap,this.clearcoatNormalMap=s.clearcoatNormalMap,this.clearcoatNormalScale.copy(s.clearcoatNormalScale),this.reflectivity=s.reflectivity,s.sheen?this.sheen=(this.sheen||new Fi).copy(s.sheen):this.sheen=null,this.transmission=s.transmission,this.transmissionMap=s.transmissionMap,this};class Bp extends u{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new Fi(16777215),this.specular=new Fi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}Bp.prototype.isMeshPhongMaterial=!0;class Lp extends u{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}Lp.prototype.isMeshToonMaterial=!0;class Xc extends u{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}Xc.prototype.isMeshNormalMaterial=!0;class yo extends u{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new Fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}yo.prototype.isMeshLambertMaterial=!0;class xo extends u{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xu,this.normalScale=new Qn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}xo.prototype.isMeshMatcapMaterial=!0;class Ph extends ta{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}Ph.prototype.isLineDashedMaterial=!0;var Fv=Object.freeze({__proto__:null,ShadowMaterial:Rp,SpriteMaterial:Qm,RawShaderMaterial:Bu,ShaderMaterial:V,PointsMaterial:Tu,MeshPhysicalMaterial:ur,MeshStandardMaterial:fr,MeshPhongMaterial:Bp,MeshToonMaterial:Lp,MeshNormalMaterial:Xc,MeshLambertMaterial:yo,MeshDepthMaterial:dp,MeshDistanceMaterial:fp,MeshBasicMaterial:yc,MeshMatcapMaterial:xo,LineDashedMaterial:Ph,LineBasicMaterial:ta,Material:u});const Ks={arraySlice:function(s,t,i){return Ks.isTypedArray(s)?new s.constructor(s.subarray(t,i!==void 0?i:s.length)):s.slice(t,i)},convertArray:function(s,t,i){return!s||!i&&s.constructor===t?s:typeof t.BYTES_PER_ELEMENT=="number"?new t(s):Array.prototype.slice.call(s)},isTypedArray:function(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)},getKeyframeOrder:function(s){const t=s.length,i=new Array(t);for(let o=0;o!==t;++o)i[o]=o;return i.sort(function(o,l){return s[o]-s[l]}),i},sortedArray:function(s,t,i){const o=s.length,l=new s.constructor(o);for(let f=0,B=0;B!==o;++f){const M=i[f]*t;for(let D=0;D!==t;++D)l[B++]=s[M+D]}return l},flattenJSON:function(s,t,i,o){let l=1,f=s[0];for(;f!==void 0&&f[o]===void 0;)f=s[l++];if(f===void 0)return;let B=f[o];if(B!==void 0)if(Array.isArray(B))do(B=f[o])!==void 0&&(t.push(f.time),i.push.apply(i,B)),f=s[l++];while(f!==void 0);else if(B.toArray!==void 0)do(B=f[o])!==void 0&&(t.push(f.time),B.toArray(i,i.length)),f=s[l++];while(f!==void 0);else do(B=f[o])!==void 0&&(t.push(f.time),i.push(B)),f=s[l++];while(f!==void 0)},subclip:function(s,t,i,o,l=30){const f=s.clone();f.name=t;const B=[];for(let D=0;D<f.tracks.length;++D){const G=f.tracks[D],$=G.getValueSize(),ie=[],oe=[];for(let he=0;he<G.times.length;++he){const ye=G.times[he]*l;if(!(ye<i||ye>=o)){ie.push(G.times[he]);for(let we=0;we<$;++we)oe.push(G.values[he*$+we])}}ie.length!==0&&(G.times=Ks.convertArray(ie,G.times.constructor),G.values=Ks.convertArray(oe,G.values.constructor),B.push(G))}f.tracks=B;let M=1/0;for(let D=0;D<f.tracks.length;++D)M>f.tracks[D].times[0]&&(M=f.tracks[D].times[0]);for(let D=0;D<f.tracks.length;++D)f.tracks[D].shift(-1*M);return f.resetDuration(),f},makeClipAdditive:function(s,t=0,i=s,o=30){o<=0&&(o=30);const l=i.tracks.length,f=t/o;for(let B=0;B<l;++B){const M=i.tracks[B],D=M.ValueTypeName;if(D==="bool"||D==="string")continue;const G=s.tracks.find(function(ke){return ke.name===M.name&&ke.ValueTypeName===D});if(G===void 0)continue;let $=0;const ie=M.getValueSize();M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&($=ie/3);let oe=0;const he=G.getValueSize();G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(oe=he/3);const ye=M.times.length-1;let we;if(f<=M.times[0]){const ke=$,Xe=ie-$;we=Ks.arraySlice(M.values,ke,Xe)}else if(f>=M.times[ye]){const ke=ye*ie+$,Xe=ke+ie-$;we=Ks.arraySlice(M.values,ke,Xe)}else{const ke=M.createInterpolant(),Xe=$,it=ie-$;ke.evaluate(f),we=Ks.arraySlice(ke.resultBuffer,Xe,it)}D==="quaternion"&&new Mo().fromArray(we).normalize().conjugate().toArray(we);const be=G.times.length;for(let ke=0;ke<be;++ke){const Xe=ke*he+oe;if(D==="quaternion")Mo.multiplyQuaternionsFlat(G.values,Xe,we,0,G.values,Xe);else{const it=he-2*oe;for(let lt=0;lt<it;++lt)G.values[Xe+lt]-=we[lt]}}}return s.blendMode=2501,s}};Object.assign(Vi.prototype,{evaluate:function(s){const t=this.parameterPositions;let i=this._cachedIndex,o=t[i],l=t[i-1];e:{t:{let f;n:{i:if(!(s<o)){for(let B=i+2;;){if(o===void 0){if(s<l)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,l)}if(i===B)break;if(l=o,o=t[++i],s<o)break t}f=t.length;break n}if(s>=l)break e;{const B=t[1];s<B&&(i=2,l=B);for(let M=i-2;;){if(l===void 0)return this._cachedIndex=0,this.beforeStart_(0,s,o);if(i===M)break;if(o=l,l=t[--i-1],s>=l)break t}f=i,i=0}}for(;i<f;){const B=i+f>>>1;s<t[B]?f=B:i=B+1}if(o=t[i],(l=t[i-1])===void 0)return this._cachedIndex=0,this.beforeStart_(0,s,o);if(o===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,l,s)}this._cachedIndex=i,this.intervalChanged_(i,l,o)}return this.interpolate_(i,l,s,o)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(s){const t=this.resultBuffer,i=this.sampleValues,o=this.valueSize,l=s*o;for(let f=0;f!==o;++f)t[f]=i[l+f];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Vi.prototype,{beforeStart_:Vi.prototype.copySampleValue_,afterEnd_:Vi.prototype.copySampleValue_}),us.prototype=Object.assign(Object.create(Vi.prototype),{constructor:us,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(s,t,i){const o=this.parameterPositions;let l=s-2,f=s+1,B=o[l],M=o[f];if(B===void 0)switch(this.getSettings_().endingStart){case 2401:l=s,B=2*t-i;break;case 2402:B=t+o[l=o.length-2]-o[l+1];break;default:l=s,B=i}if(M===void 0)switch(this.getSettings_().endingEnd){case 2401:f=s,M=2*i-t;break;case 2402:f=1,M=i+o[1]-o[0];break;default:f=s-1,M=t}const D=.5*(i-t),G=this.valueSize;this._weightPrev=D/(t-B),this._weightNext=D/(M-i),this._offsetPrev=l*G,this._offsetNext=f*G},interpolate_:function(s,t,i,o){const l=this.resultBuffer,f=this.sampleValues,B=this.valueSize,M=s*B,D=M-B,G=this._offsetPrev,$=this._offsetNext,ie=this._weightPrev,oe=this._weightNext,he=(i-t)/(o-t),ye=he*he,we=ye*he,be=-ie*we+2*ie*ye-ie*he,ke=(1+ie)*we+(-1.5-2*ie)*ye+(-.5+ie)*he+1,Xe=(-1-oe)*we+(1.5+oe)*ye+.5*he,it=oe*we-oe*ye;for(let lt=0;lt!==B;++lt)l[lt]=be*f[G+lt]+ke*f[D+lt]+Xe*f[M+lt]+it*f[$+lt];return l}}),Yr.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Yr,interpolate_:function(s,t,i,o){const l=this.resultBuffer,f=this.sampleValues,B=this.valueSize,M=s*B,D=M-B,G=(i-t)/(o-t),$=1-G;for(let ie=0;ie!==B;++ie)l[ie]=f[D+ie]*$+f[M+ie]*G;return l}}),Ar.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Ar,interpolate_:function(s){return this.copySampleValue_(s-1)}});class gl{constructor(t,i,o,l){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ks.convertArray(i,this.TimeBufferType),this.values=Ks.convertArray(o,this.ValueBufferType),this.setInterpolation(l||this.DefaultInterpolation)}static toJSON(t){const i=t.constructor;let o;if(i.toJSON!==this.toJSON)o=i.toJSON(t);else{o={name:t.name,times:Ks.convertArray(t.times,Array),values:Ks.convertArray(t.values,Array)};const l=t.getInterpolation();l!==t.DefaultInterpolation&&(o.interpolation=l)}return o.type=t.ValueTypeName,o}InterpolantFactoryMethodDiscrete(t){return new Ar(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Yr(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new us(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let i;switch(t){case 2300:i=this.InterpolantFactoryMethodDiscrete;break;case 2301:i=this.InterpolantFactoryMethodLinear;break;case 2302:i=this.InterpolantFactoryMethodSmooth}if(i===void 0){const o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0){if(t===this.DefaultInterpolation)throw new Error(o);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const i=this.times;for(let o=0,l=i.length;o!==l;++o)i[o]+=t}return this}scale(t){if(t!==1){const i=this.times;for(let o=0,l=i.length;o!==l;++o)i[o]*=t}return this}trim(t,i){const o=this.times,l=o.length;let f=0,B=l-1;for(;f!==l&&o[f]<t;)++f;for(;B!==-1&&o[B]>i;)--B;if(++B,f!==0||B!==l){f>=B&&(f=(B=Math.max(B,1))-1);const M=this.getValueSize();this.times=Ks.arraySlice(o,f,B),this.values=Ks.arraySlice(this.values,f*M,B*M)}return this}validate(){let t=!0;const i=this.getValueSize();i-Math.floor(i)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const o=this.times,l=this.values,f=o.length;f===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let B=null;for(let M=0;M!==f;M++){const D=o[M];if(typeof D=="number"&&isNaN(D)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,M,D),t=!1;break}if(B!==null&&B>D){console.error("THREE.KeyframeTrack: Out of order keys.",this,M,D,B),t=!1;break}B=D}if(l!==void 0&&Ks.isTypedArray(l))for(let M=0,D=l.length;M!==D;++M){const G=l[M];if(isNaN(G)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,M,G),t=!1;break}}return t}optimize(){const t=Ks.arraySlice(this.times),i=Ks.arraySlice(this.values),o=this.getValueSize(),l=this.getInterpolation()===2302,f=t.length-1;let B=1;for(let M=1;M<f;++M){let D=!1;const G=t[M];if(G!==t[M+1]&&(M!==1||G!==t[0]))if(l)D=!0;else{const $=M*o,ie=$-o,oe=$+o;for(let he=0;he!==o;++he){const ye=i[$+he];if(ye!==i[ie+he]||ye!==i[oe+he]){D=!0;break}}}if(D){if(M!==B){t[B]=t[M];const $=M*o,ie=B*o;for(let oe=0;oe!==o;++oe)i[ie+oe]=i[$+oe]}++B}}if(f>0){t[B]=t[f];for(let M=f*o,D=B*o,G=0;G!==o;++G)i[D+G]=i[M+G];++B}return B!==t.length?(this.times=Ks.arraySlice(t,0,B),this.values=Ks.arraySlice(i,0,B*o)):(this.times=t,this.values=i),this}clone(){const t=Ks.arraySlice(this.times,0),i=Ks.arraySlice(this.values,0),o=new this.constructor(this.name,t,i);return o.createInterpolant=this.createInterpolant,o}}gl.prototype.TimeBufferType=Float32Array,gl.prototype.ValueBufferType=Float32Array,gl.prototype.DefaultInterpolation=2301;class Lu extends gl{}Lu.prototype.ValueTypeName="bool",Lu.prototype.ValueBufferType=Array,Lu.prototype.DefaultInterpolation=2300,Lu.prototype.InterpolantFactoryMethodLinear=void 0,Lu.prototype.InterpolantFactoryMethodSmooth=void 0;class eg extends gl{}eg.prototype.ValueTypeName="color";class Hd extends gl{}Hd.prototype.ValueTypeName="number",Ts.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Ts,interpolate_:function(s,t,i,o){const l=this.resultBuffer,f=this.sampleValues,B=this.valueSize,M=(i-t)/(o-t);let D=s*B;for(let G=D+B;D!==G;D+=4)Mo.slerpFlat(l,0,f,D-B,f,D,M);return l}});class Oh extends gl{InterpolantFactoryMethodLinear(t){return new Ts(this.times,this.values,this.getValueSize(),t)}}Oh.prototype.ValueTypeName="quaternion",Oh.prototype.DefaultInterpolation=2301,Oh.prototype.InterpolantFactoryMethodSmooth=void 0;class Du extends gl{}Du.prototype.ValueTypeName="string",Du.prototype.ValueBufferType=Array,Du.prototype.DefaultInterpolation=2300,Du.prototype.InterpolantFactoryMethodLinear=void 0,Du.prototype.InterpolantFactoryMethodSmooth=void 0;class zd extends gl{}zd.prototype.ValueTypeName="vector";class Vd{constructor(t,i=-1,o,l=2500){this.name=t,this.tracks=o,this.duration=i,this.blendMode=l,this.uuid=qi.generateUUID(),this.duration<0&&this.resetDuration()}static parse(t){const i=[],o=t.tracks,l=1/(t.fps||1);for(let B=0,M=o.length;B!==M;++B)i.push(po(o[B]).scale(l));const f=new this(t.name,t.duration,i,t.blendMode);return f.uuid=t.uuid,f}static toJSON(t){const i=[],o=t.tracks,l={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode};for(let f=0,B=o.length;f!==B;++f)i.push(gl.toJSON(o[f]));return l}static CreateFromMorphTargetSequence(t,i,o,l){const f=i.length,B=[];for(let M=0;M<f;M++){let D=[],G=[];D.push((M+f-1)%f,M,(M+1)%f),G.push(0,1,0);const $=Ks.getKeyframeOrder(D);D=Ks.sortedArray(D,1,$),G=Ks.sortedArray(G,1,$),l||D[0]!==0||(D.push(f),G.push(G[0])),B.push(new Hd(".morphTargetInfluences["+i[M].name+"]",D,G).scale(1/o))}return new this(t,-1,B)}static findByName(t,i){let o=t;if(!Array.isArray(t)){const l=t;o=l.geometry&&l.geometry.animations||l.animations}for(let l=0;l<o.length;l++)if(o[l].name===i)return o[l];return null}static CreateClipsFromMorphTargetSequences(t,i,o){const l={},f=/^([\w-]*?)([\d]+)$/;for(let M=0,D=t.length;M<D;M++){const G=t[M],$=G.name.match(f);if($&&$.length>1){const ie=$[1];let oe=l[ie];oe||(l[ie]=oe=[]),oe.push(G)}}const B=[];for(const M in l)B.push(this.CreateFromMorphTargetSequence(M,l[M],i,o));return B}static parseAnimation(t,i){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const o=function($,ie,oe,he,ye){if(oe.length!==0){const we=[],be=[];Ks.flattenJSON(oe,we,be,he),we.length!==0&&ye.push(new $(ie,we,be))}},l=[],f=t.name||"default",B=t.fps||30,M=t.blendMode;let D=t.length||-1;const G=t.hierarchy||[];for(let $=0;$<G.length;$++){const ie=G[$].keys;if(ie&&ie.length!==0)if(ie[0].morphTargets){const oe={};let he;for(he=0;he<ie.length;he++)if(ie[he].morphTargets)for(let ye=0;ye<ie[he].morphTargets.length;ye++)oe[ie[he].morphTargets[ye]]=-1;for(const ye in oe){const we=[],be=[];for(let ke=0;ke!==ie[he].morphTargets.length;++ke){const Xe=ie[he];we.push(Xe.time),be.push(Xe.morphTarget===ye?1:0)}l.push(new Hd(".morphTargetInfluence["+ye+"]",we,be))}D=oe.length*(B||1)}else{const oe=".bones["+i[$].name+"]";o(zd,oe+".position",ie,"pos",l),o(Oh,oe+".quaternion",ie,"rot",l),o(zd,oe+".scale",ie,"scl",l)}}return l.length===0?null:new this(f,D,l,M)}resetDuration(){let t=0;for(let i=0,o=this.tracks.length;i!==o;++i){const l=this.tracks[i];t=Math.max(t,l.times[l.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}const Pu={enabled:!1,files:{},add:function(s,t){this.enabled!==!1&&(this.files[s]=t)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}},P0=new Vs;Object.assign(qr.prototype,{load:function(){},loadAsync:function(s,t){const i=this;return new Promise(function(o,l){i.load(s,o,t,l)})},parse:function(){},setCrossOrigin:function(s){return this.crossOrigin=s,this},setWithCredentials:function(s){return this.withCredentials=s,this},setPath:function(s){return this.path=s,this},setResourcePath:function(s){return this.resourcePath=s,this},setRequestHeader:function(s){return this.requestHeader=s,this}});const Al={};Ps.prototype=Object.assign(Object.create(qr.prototype),{constructor:Ps,load:function(s,t,i,o){s===void 0&&(s=""),this.path!==void 0&&(s=this.path+s),s=this.manager.resolveURL(s);const l=this,f=Pu.get(s);if(f!==void 0)return l.manager.itemStart(s),setTimeout(function(){t&&t(f),l.manager.itemEnd(s)},0),f;if(Al[s]!==void 0)return void Al[s].push({onLoad:t,onProgress:i,onError:o});const B=s.match(/^data:(.*?)(;base64)?,(.*)$/);let M;if(B){const D=B[1],G=!!B[2];let $=B[3];$=decodeURIComponent($),G&&($=atob($));try{let ie;const oe=(this.responseType||"").toLowerCase();switch(oe){case"arraybuffer":case"blob":const he=new Uint8Array($.length);for(let we=0;we<$.length;we++)he[we]=$.charCodeAt(we);ie=oe==="blob"?new Blob([he.buffer],{type:D}):he.buffer;break;case"document":ie=new DOMParser().parseFromString($,D);break;case"json":ie=JSON.parse($);break;default:ie=$}setTimeout(function(){t&&t(ie),l.manager.itemEnd(s)},0)}catch(ie){setTimeout(function(){o&&o(ie),l.manager.itemError(s),l.manager.itemEnd(s)},0)}}else{Al[s]=[],Al[s].push({onLoad:t,onProgress:i,onError:o}),(M=new XMLHttpRequest).open("GET",s,!0),M.addEventListener("load",function(D){const G=this.response,$=Al[s];if(delete Al[s],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Pu.add(s,G);for(let ie=0,oe=$.length;ie<oe;ie++){const he=$[ie];he.onLoad&&he.onLoad(G)}l.manager.itemEnd(s)}else{for(let ie=0,oe=$.length;ie<oe;ie++){const he=$[ie];he.onError&&he.onError(D)}l.manager.itemError(s),l.manager.itemEnd(s)}},!1),M.addEventListener("progress",function(D){const G=Al[s];for(let $=0,ie=G.length;$<ie;$++){const oe=G[$];oe.onProgress&&oe.onProgress(D)}},!1),M.addEventListener("error",function(D){const G=Al[s];delete Al[s];for(let $=0,ie=G.length;$<ie;$++){const oe=G[$];oe.onError&&oe.onError(D)}l.manager.itemError(s),l.manager.itemEnd(s)},!1),M.addEventListener("abort",function(D){const G=Al[s];delete Al[s];for(let $=0,ie=G.length;$<ie;$++){const oe=G[$];oe.onError&&oe.onError(D)}l.manager.itemError(s),l.manager.itemEnd(s)},!1),this.responseType!==void 0&&(M.responseType=this.responseType),this.withCredentials!==void 0&&(M.withCredentials=this.withCredentials),M.overrideMimeType&&M.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const D in this.requestHeader)M.setRequestHeader(D,this.requestHeader[D]);M.send(null)}return l.manager.itemStart(s),M},setResponseType:function(s){return this.responseType=s,this},setMimeType:function(s){return this.mimeType=s,this}});class Nv extends qr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=new Ps(this.manager);B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(t,function(M){try{i(f.parse(JSON.parse(M)))}catch(D){l?l(D):console.error(D),f.manager.itemError(t)}},o,l)}parse(t){const i=[];for(let o=0;o<t.length;o++){const l=Vd.parse(t[o]);i.push(l)}return i}}Ls.prototype=Object.assign(Object.create(qr.prototype),{constructor:Ls,load:function(s,t,i,o){function l($){D.load(s[$],function(ie){const oe=f.parse(ie,!0);B[$]={width:oe.width,height:oe.height,format:oe.format,mipmaps:oe.mipmaps},(G+=1)===6&&(oe.mipmapCount===1&&(M.minFilter=nt),M.image=B,M.format=oe.format,M.needsUpdate=!0,t&&t(M))},i,o)}const f=this,B=[],M=new xp,D=new Ps(this.manager);D.setPath(this.path),D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setWithCredentials(f.withCredentials);let G=0;if(Array.isArray(s))for(let $=0,ie=s.length;$<ie;++$)l($);else D.load(s,function($){const ie=f.parse($,!0);if(ie.isCubemap){const oe=ie.mipmaps.length/ie.mipmapCount;for(let he=0;he<oe;he++){B[he]={mipmaps:[]};for(let ye=0;ye<ie.mipmapCount;ye++)B[he].mipmaps.push(ie.mipmaps[he*ie.mipmapCount+ye]),B[he].format=ie.format,B[he].width=ie.width,B[he].height=ie.height}M.image=B}else M.image.width=ie.width,M.image.height=ie.height,M.mipmaps=ie.mipmaps;ie.mipmapCount===1&&(M.minFilter=nt),M.format=ie.format,M.needsUpdate=!0,t&&t(M)},i,o);return M}});class Dp extends qr{constructor(t){super(t)}load(t,i,o,l){function f(){G.removeEventListener("load",f,!1),G.removeEventListener("error",B,!1),Pu.add(t,this),i&&i(this),M.manager.itemEnd(t)}function B($){G.removeEventListener("load",f,!1),G.removeEventListener("error",B,!1),l&&l($),M.manager.itemError(t),M.manager.itemEnd(t)}this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const M=this,D=Pu.get(t);if(D!==void 0)return M.manager.itemStart(t),setTimeout(function(){i&&i(D),M.manager.itemEnd(t)},0),D;const G=document.createElementNS("http://www.w3.org/1999/xhtml","img");return G.addEventListener("load",f,!1),G.addEventListener("error",B,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(G.crossOrigin=this.crossOrigin),M.manager.itemStart(t),G.src=t,G}}class O0 extends qr{constructor(t){super(t)}load(t,i,o,l){function f(G){M.load(t[G],function($){B.images[G]=$,++D===6&&(B.needsUpdate=!0,i&&i(B))},void 0,l)}const B=new Rh,M=new Dp(this.manager);M.setCrossOrigin(this.crossOrigin),M.setPath(this.path);let D=0;for(let G=0;G<t.length;++G)f(G);return B}}bo.prototype=Object.assign(Object.create(qr.prototype),{constructor:bo,load:function(s,t,i,o){const l=this,f=new Bh,B=new Ps(this.manager);return B.setResponseType("arraybuffer"),B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(l.withCredentials),B.load(s,function(M){const D=l.parse(M);D&&(D.image!==void 0?f.image=D.image:D.data!==void 0&&(f.image.width=D.width,f.image.height=D.height,f.image.data=D.data),f.wrapS=D.wrapS!==void 0?D.wrapS:Yo,f.wrapT=D.wrapT!==void 0?D.wrapT:Yo,f.magFilter=D.magFilter!==void 0?D.magFilter:nt,f.minFilter=D.minFilter!==void 0?D.minFilter:nt,f.anisotropy=D.anisotropy!==void 0?D.anisotropy:1,D.encoding!==void 0&&(f.encoding=D.encoding),D.flipY!==void 0&&(f.flipY=D.flipY),D.format!==void 0&&(f.format=D.format),D.type!==void 0&&(f.type=D.type),D.mipmaps!==void 0&&(f.mipmaps=D.mipmaps,f.minFilter=sc),D.mipmapCount===1&&(f.minFilter=nt),D.generateMipmaps!==void 0&&(f.generateMipmaps=D.generateMipmaps),f.needsUpdate=!0,t&&t(f,D))},i,o),f}}),Va.prototype=Object.assign(Object.create(qr.prototype),{constructor:Va,load:function(s,t,i,o){const l=new go,f=new Dp(this.manager);return f.setCrossOrigin(this.crossOrigin),f.setPath(this.path),f.load(s,function(B){l.image=B;const M=s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0;l.format=M?xs:ko,l.needsUpdate=!0,t!==void 0&&t(l)},i,o),l}}),Object.assign(Qs.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(s,t){const i=this.getUtoTmapping(s);return this.getPoint(i,t)},getPoints:function(s=5){const t=[];for(let i=0;i<=s;i++)t.push(this.getPoint(i/s));return t},getSpacedPoints:function(s=5){const t=[];for(let i=0;i<=s;i++)t.push(this.getPointAt(i/s));return t},getLength:function(){const s=this.getLengths();return s[s.length-1]},getLengths:function(s){if(s===void 0&&(s=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,o=this.getPoint(0),l=0;t.push(0);for(let f=1;f<=s;f++)l+=(i=this.getPoint(f/s)).distanceTo(o),t.push(l),o=i;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(s,t){const i=this.getLengths();let o=0;const l=i.length;let f;f=t||s*i[l-1];let B,M=0,D=l-1;for(;M<=D;)if(o=Math.floor(M+(D-M)/2),(B=i[o]-f)<0)M=o+1;else{if(!(B>0)){D=o;break}D=o-1}if(o=D,i[o]===f)return o/(l-1);const G=i[o];return(o+(f-G)/(i[o+1]-G))/(l-1)},getTangent:function(s,t){let i=s-1e-4,o=s+1e-4;i<0&&(i=0),o>1&&(o=1);const l=this.getPoint(i),f=this.getPoint(o),B=t||(l.isVector2?new Qn:new Je);return B.copy(f).sub(l).normalize(),B},getTangentAt:function(s,t){const i=this.getUtoTmapping(s);return this.getTangent(i,t)},computeFrenetFrames:function(s,t){const i=new Je,o=[],l=[],f=[],B=new Je,M=new ir;for(let oe=0;oe<=s;oe++){const he=oe/s;o[oe]=this.getTangentAt(he,new Je),o[oe].normalize()}l[0]=new Je,f[0]=new Je;let D=Number.MAX_VALUE;const G=Math.abs(o[0].x),$=Math.abs(o[0].y),ie=Math.abs(o[0].z);G<=D&&(D=G,i.set(1,0,0)),$<=D&&(D=$,i.set(0,1,0)),ie<=D&&i.set(0,0,1),B.crossVectors(o[0],i).normalize(),l[0].crossVectors(o[0],B),f[0].crossVectors(o[0],l[0]);for(let oe=1;oe<=s;oe++){if(l[oe]=l[oe-1].clone(),f[oe]=f[oe-1].clone(),B.crossVectors(o[oe-1],o[oe]),B.length()>Number.EPSILON){B.normalize();const he=Math.acos(qi.clamp(o[oe-1].dot(o[oe]),-1,1));l[oe].applyMatrix4(M.makeRotationAxis(B,he))}f[oe].crossVectors(o[oe],l[oe])}if(t===!0){let oe=Math.acos(qi.clamp(l[0].dot(l[s]),-1,1));oe/=s,o[0].dot(B.crossVectors(l[0],l[s]))>0&&(oe=-oe);for(let he=1;he<=s;he++)l[he].applyMatrix4(M.makeRotationAxis(o[he],oe*he)),f[he].crossVectors(o[he],l[he])}return{tangents:o,normals:l,binormals:f}},clone:function(){return new this.constructor().copy(this)},copy:function(s){return this.arcLengthDivisions=s.arcLengthDivisions,this},toJSON:function(){const s={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return s.arcLengthDivisions=this.arcLengthDivisions,s.type=this.type,s},fromJSON:function(s){return this.arcLengthDivisions=s.arcLengthDivisions,this}});class Qd extends Qs{constructor(t=0,i=0,o=1,l=1,f=0,B=2*Math.PI,M=!1,D=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=i,this.xRadius=o,this.yRadius=l,this.aStartAngle=f,this.aEndAngle=B,this.aClockwise=M,this.aRotation=D}getPoint(t,i){const o=i||new Qn,l=2*Math.PI;let f=this.aEndAngle-this.aStartAngle;const B=Math.abs(f)<Number.EPSILON;for(;f<0;)f+=l;for(;f>l;)f-=l;f<Number.EPSILON&&(f=B?0:l),this.aClockwise!==!0||B||(f===l?f=-l:f-=l);const M=this.aStartAngle+t*f;let D=this.aX+this.xRadius*Math.cos(M),G=this.aY+this.yRadius*Math.sin(M);if(this.aRotation!==0){const $=Math.cos(this.aRotation),ie=Math.sin(this.aRotation),oe=D-this.aX,he=G-this.aY;D=oe*$-he*ie+this.aX,G=oe*ie+he*$+this.aY}return o.set(D,G)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Qd.prototype.isEllipseCurve=!0;class tg extends Qd{constructor(t,i,o,l,f,B){super(t,i,o,o,l,f,B),this.type="ArcCurve"}}tg.prototype.isArcCurve=!0;const Pp=new Je,ng=new il,ig=new il,rg=new il;class sg extends Qs{constructor(t=[],i=!1,o="centripetal",l=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=i,this.curveType=o,this.tension=l}getPoint(t,i=new Je){const o=i,l=this.points,f=l.length,B=(f-(this.closed?0:1))*t;let M=Math.floor(B),D=B-M;this.closed?M+=M>0?0:(Math.floor(Math.abs(M)/f)+1)*f:D===0&&M===f-1&&(M=f-2,D=1);let G,$;this.closed||M>0?G=l[(M-1)%f]:(Pp.subVectors(l[0],l[1]).add(l[0]),G=Pp);const ie=l[M%f],oe=l[(M+1)%f];if(this.closed||M+2<f?$=l[(M+2)%f]:(Pp.subVectors(l[f-1],l[f-2]).add(l[f-1]),$=Pp),this.curveType==="centripetal"||this.curveType==="chordal"){const he=this.curveType==="chordal"?.5:.25;let ye=Math.pow(G.distanceToSquared(ie),he),we=Math.pow(ie.distanceToSquared(oe),he),be=Math.pow(oe.distanceToSquared($),he);we<1e-4&&(we=1),ye<1e-4&&(ye=we),be<1e-4&&(be=we),ng.initNonuniformCatmullRom(G.x,ie.x,oe.x,$.x,ye,we,be),ig.initNonuniformCatmullRom(G.y,ie.y,oe.y,$.y,ye,we,be),rg.initNonuniformCatmullRom(G.z,ie.z,oe.z,$.z,ye,we,be)}else this.curveType==="catmullrom"&&(ng.initCatmullRom(G.x,ie.x,oe.x,$.x,this.tension),ig.initCatmullRom(G.y,ie.y,oe.y,$.y,this.tension),rg.initCatmullRom(G.z,ie.z,oe.z,$.z,this.tension));return o.set(ng.calc(D),ig.calc(D),rg.calc(D)),o}copy(t){super.copy(t),this.points=[];for(let i=0,o=t.points.length;i<o;i++){const l=t.points[i];this.points.push(l.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let i=0,o=this.points.length;i<o;i++){const l=this.points[i];t.points.push(l.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,o=t.points.length;i<o;i++){const l=t.points[i];this.points.push(new Je().fromArray(l))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}sg.prototype.isCatmullRomCurve3=!0;class Op extends Qs{constructor(t=new Qn,i=new Qn,o=new Qn,l=new Qn){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=i,this.v2=o,this.v3=l}getPoint(t,i=new Qn){const o=i,l=this.v0,f=this.v1,B=this.v2,M=this.v3;return o.set(Ra(t,l.x,f.x,B.x,M.x),Ra(t,l.y,f.y,B.y,M.y)),o}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Op.prototype.isCubicBezierCurve=!0;class og extends Qs{constructor(t=new Je,i=new Je,o=new Je,l=new Je){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=i,this.v2=o,this.v3=l}getPoint(t,i=new Je){const o=i,l=this.v0,f=this.v1,B=this.v2,M=this.v3;return o.set(Ra(t,l.x,f.x,B.x,M.x),Ra(t,l.y,f.y,B.y,M.y),Ra(t,l.z,f.z,B.z,M.z)),o}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}og.prototype.isCubicBezierCurve3=!0;class jd extends Qs{constructor(t=new Qn,i=new Qn){super(),this.type="LineCurve",this.v1=t,this.v2=i}getPoint(t,i=new Qn){const o=i;return t===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(t).add(this.v1)),o}getPointAt(t,i){return this.getPoint(t,i)}getTangent(t,i){const o=i||new Qn;return o.copy(this.v2).sub(this.v1).normalize(),o}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}jd.prototype.isLineCurve=!0;class F0 extends Qs{constructor(t=new Je,i=new Je){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=i}getPoint(t,i=new Je){const o=i;return t===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(t).add(this.v1)),o}getPointAt(t,i){return this.getPoint(t,i)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Fp extends Qs{constructor(t=new Qn,i=new Qn,o=new Qn){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=i,this.v2=o}getPoint(t,i=new Qn){const o=i,l=this.v0,f=this.v1,B=this.v2;return o.set(Ia(t,l.x,f.x,B.x),Ia(t,l.y,f.y,B.y)),o}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Fp.prototype.isQuadraticBezierCurve=!0;class ag extends Qs{constructor(t=new Je,i=new Je,o=new Je){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=i,this.v2=o}getPoint(t,i=new Je){const o=i,l=this.v0,f=this.v1,B=this.v2;return o.set(Ia(t,l.x,f.x,B.x),Ia(t,l.y,f.y,B.y),Ia(t,l.z,f.z,B.z)),o}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}ag.prototype.isQuadraticBezierCurve3=!0;class Np extends Qs{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,i=new Qn){const o=i,l=this.points,f=(l.length-1)*t,B=Math.floor(f),M=f-B,D=l[B===0?B:B-1],G=l[B],$=l[B>l.length-2?l.length-1:B+1],ie=l[B>l.length-3?l.length-1:B+2];return o.set(Ll(M,D.x,G.x,$.x,ie.x),Ll(M,D.y,G.y,$.y,ie.y)),o}copy(t){super.copy(t),this.points=[];for(let i=0,o=t.points.length;i<o;i++){const l=t.points[i];this.points.push(l.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let i=0,o=this.points.length;i<o;i++){const l=this.points[i];t.points.push(l.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,o=t.points.length;i<o;i++){const l=t.points[i];this.points.push(new Qn().fromArray(l))}return this}}Np.prototype.isSplineCurve=!0;var lg=Object.freeze({__proto__:null,ArcCurve:tg,CatmullRomCurve3:sg,CubicBezierCurve:Op,CubicBezierCurve3:og,EllipseCurve:Qd,LineCurve:jd,LineCurve3:F0,QuadraticBezierCurve:Fp,QuadraticBezierCurve3:ag,SplineCurve:Np});class N0 extends Qs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);t.equals(i)||this.curves.push(new jd(i,t))}getPoint(t){const i=t*this.getLength(),o=this.getCurveLengths();let l=0;for(;l<o.length;){if(o[l]>=i){const f=o[l]-i,B=this.curves[l],M=B.getLength(),D=M===0?0:1-f/M;return B.getPointAt(D)}l++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let i=0;for(let o=0,l=this.curves.length;o<l;o++)i+=this.curves[o].getLength(),t.push(i);return this.cacheLengths=t,t}getSpacedPoints(t=40){const i=[];for(let o=0;o<=t;o++)i.push(this.getPoint(o/t));return this.autoClose&&i.push(i[0]),i}getPoints(t=12){const i=[];let o;for(let l=0,f=this.curves;l<f.length;l++){const B=f[l],M=B&&B.isEllipseCurve?2*t:B&&(B.isLineCurve||B.isLineCurve3)?1:B&&B.isSplineCurve?t*B.points.length:t,D=B.getPoints(M);for(let G=0;G<D.length;G++){const $=D[G];o&&o.equals($)||(i.push($),o=$)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(t){super.copy(t),this.curves=[];for(let i=0,o=t.curves.length;i<o;i++){const l=t.curves[i];this.curves.push(l.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let i=0,o=this.curves.length;i<o;i++){const l=this.curves[i];t.curves.push(l.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let i=0,o=t.curves.length;i<o;i++){const l=t.curves[i];this.curves.push(new lg[l.type]().fromJSON(l))}return this}}class Wd extends N0{constructor(t){super(),this.type="Path",this.currentPoint=new Qn,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let i=1,o=t.length;i<o;i++)this.lineTo(t[i].x,t[i].y);return this}moveTo(t,i){return this.currentPoint.set(t,i),this}lineTo(t,i){const o=new jd(this.currentPoint.clone(),new Qn(t,i));return this.curves.push(o),this.currentPoint.set(t,i),this}quadraticCurveTo(t,i,o,l){const f=new Fp(this.currentPoint.clone(),new Qn(t,i),new Qn(o,l));return this.curves.push(f),this.currentPoint.set(o,l),this}bezierCurveTo(t,i,o,l,f,B){const M=new Op(this.currentPoint.clone(),new Qn(t,i),new Qn(o,l),new Qn(f,B));return this.curves.push(M),this.currentPoint.set(f,B),this}splineThru(t){const i=[this.currentPoint.clone()].concat(t),o=new Np(i);return this.curves.push(o),this.currentPoint.copy(t[t.length-1]),this}arc(t,i,o,l,f,B){const M=this.currentPoint.x,D=this.currentPoint.y;return this.absarc(t+M,i+D,o,l,f,B),this}absarc(t,i,o,l,f,B){return this.absellipse(t,i,o,o,l,f,B),this}ellipse(t,i,o,l,f,B,M,D){const G=this.currentPoint.x,$=this.currentPoint.y;return this.absellipse(t+G,i+$,o,l,f,B,M,D),this}absellipse(t,i,o,l,f,B,M,D){const G=new Qd(t,i,o,l,f,B,M,D);if(this.curves.length>0){const ie=G.getPoint(0);ie.equals(this.currentPoint)||this.lineTo(ie.x,ie.y)}this.curves.push(G);const $=G.getPoint(1);return this.currentPoint.copy($),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Yc extends Wd{constructor(t){super(t),this.uuid=qi.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(t){const i=[];for(let o=0,l=this.holes.length;o<l;o++)i[o]=this.holes[o].getPoints(t);return i}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let i=0,o=t.holes.length;i<o;i++){const l=t.holes[i];this.holes.push(l.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let i=0,o=this.holes.length;i<o;i++){const l=this.holes[i];t.holes.push(l.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let i=0,o=t.holes.length;i<o;i++){const l=t.holes[i];this.holes.push(new Wd().fromJSON(l))}return this}}class vl extends I{constructor(t,i=1){super(),this.type="Light",this.color=new Fi(t),this.intensity=i}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}}vl.prototype.isLight=!0;class cg extends vl{constructor(t,i,o){super(t,o),this.type="HemisphereLight",this.position.copy(I.DefaultUp),this.updateMatrix(),this.groundColor=new Fi(i)}copy(t){return vl.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}cg.prototype.isHemisphereLight=!0;const k0=new ir,U0=new Je,G0=new Je;class ug{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Qn(512,512),this.map=null,this.mapPass=null,this.matrix=new ir,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wd,this._frameExtents=new Qn(1,1),this._viewportCount=1,this._viewports=[new rs(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,o=this.matrix;U0.setFromMatrixPosition(t.matrixWorld),i.position.copy(U0),G0.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(G0),i.updateMatrixWorld(),k0.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(k0),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(i.projectionMatrix),o.multiply(i.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),this.mapSize.x===512&&this.mapSize.y===512||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class H0 extends ug{constructor(){super(new Q(50,1,.5,500)),this.focus=1}updateMatrices(t){const i=this.camera,o=2*qi.RAD2DEG*t.angle*this.focus,l=this.mapSize.width/this.mapSize.height,f=t.distance||i.far;o===i.fov&&l===i.aspect&&f===i.far||(i.fov=o,i.aspect=l,i.far=f,i.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}H0.prototype.isSpotLightShadow=!0;class hg extends vl{constructor(t,i,o=0,l=Math.PI/3,f=0,B=1){super(t,i),this.type="SpotLight",this.position.copy(I.DefaultUp),this.updateMatrix(),this.target=new I,this.distance=o,this.angle=l,this.penumbra=f,this.decay=B,this.shadow=new H0}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}hg.prototype.isSpotLight=!0;const z0=new ir,Ou=new Je,kp=new Je;class V0 extends ug{constructor(){super(new Q(90,1,.5,500)),this._frameExtents=new Qn(4,2),this._viewportCount=6,this._viewports=[new rs(2,1,1,1),new rs(0,1,1,1),new rs(3,1,1,1),new rs(1,1,1,1),new rs(3,0,1,1),new rs(1,0,1,1)],this._cubeDirections=[new Je(1,0,0),new Je(-1,0,0),new Je(0,0,1),new Je(0,0,-1),new Je(0,1,0),new Je(0,-1,0)],this._cubeUps=[new Je(0,1,0),new Je(0,1,0),new Je(0,1,0),new Je(0,1,0),new Je(0,0,1),new Je(0,0,-1)]}updateMatrices(t,i=0){const o=this.camera,l=this.matrix,f=t.distance||o.far;f!==o.far&&(o.far=f,o.updateProjectionMatrix()),Ou.setFromMatrixPosition(t.matrixWorld),o.position.copy(Ou),kp.copy(o.position),kp.add(this._cubeDirections[i]),o.up.copy(this._cubeUps[i]),o.lookAt(kp),o.updateMatrixWorld(),l.makeTranslation(-Ou.x,-Ou.y,-Ou.z),z0.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(z0)}}V0.prototype.isPointLightShadow=!0;class Fh extends vl{constructor(t,i,o=0,l=1){super(t,i),this.type="PointLight",this.distance=o,this.decay=l,this.shadow=new V0}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}Fh.prototype.isPointLight=!0;class Nh extends q{constructor(t=-1,i=1,o=1,l=-1,f=.1,B=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=o,this.bottom=l,this.near=f,this.far=B,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,o,l,f,B){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=o,this.view.offsetY=l,this.view.width=f,this.view.height=B,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,l=(this.top+this.bottom)/2;let f=o-t,B=o+t,M=l+i,D=l-i;if(this.view!==null&&this.view.enabled){const G=(this.right-this.left)/this.view.fullWidth/this.zoom,$=(this.top-this.bottom)/this.view.fullHeight/this.zoom;B=(f+=G*this.view.offsetX)+G*this.view.width,D=(M-=$*this.view.offsetY)-$*this.view.height}this.projectionMatrix.makeOrthographic(f,B,M,D,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=I.prototype.toJSON.call(this,t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}Nh.prototype.isOrthographicCamera=!0;class Q0 extends ug{constructor(){super(new Nh(-5,5,5,-5,.5,500))}}Q0.prototype.isDirectionalLightShadow=!0;class dg extends vl{constructor(t,i){super(t,i),this.type="DirectionalLight",this.position.copy(I.DefaultUp),this.updateMatrix(),this.target=new I,this.shadow=new Q0}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}dg.prototype.isDirectionalLight=!0;class fg extends vl{constructor(t,i){super(t,i),this.type="AmbientLight"}}fg.prototype.isAmbientLight=!0;class Up extends vl{constructor(t,i,o=10,l=10){super(t,i),this.type="RectAreaLight",this.width=o,this.height=l}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const i=super.toJSON(t);return i.object.width=this.width,i.object.height=this.height,i}}Up.prototype.isRectAreaLight=!0;class pg{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Je)}set(t){for(let i=0;i<9;i++)this.coefficients[i].copy(t[i]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,i){const o=t.x,l=t.y,f=t.z,B=this.coefficients;return i.copy(B[0]).multiplyScalar(.282095),i.addScaledVector(B[1],.488603*l),i.addScaledVector(B[2],.488603*f),i.addScaledVector(B[3],.488603*o),i.addScaledVector(B[4],o*l*1.092548),i.addScaledVector(B[5],l*f*1.092548),i.addScaledVector(B[6],.315392*(3*f*f-1)),i.addScaledVector(B[7],o*f*1.092548),i.addScaledVector(B[8],.546274*(o*o-l*l)),i}getIrradianceAt(t,i){const o=t.x,l=t.y,f=t.z,B=this.coefficients;return i.copy(B[0]).multiplyScalar(.886227),i.addScaledVector(B[1],1.023328*l),i.addScaledVector(B[2],1.023328*f),i.addScaledVector(B[3],1.023328*o),i.addScaledVector(B[4],.858086*o*l),i.addScaledVector(B[5],.858086*l*f),i.addScaledVector(B[6],.743125*f*f-.247708),i.addScaledVector(B[7],.858086*o*f),i.addScaledVector(B[8],.429043*(o*o-l*l)),i}add(t){for(let i=0;i<9;i++)this.coefficients[i].add(t.coefficients[i]);return this}addScaledSH(t,i){for(let o=0;o<9;o++)this.coefficients[o].addScaledVector(t.coefficients[o],i);return this}scale(t){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(t);return this}lerp(t,i){for(let o=0;o<9;o++)this.coefficients[o].lerp(t.coefficients[o],i);return this}equals(t){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(t.coefficients[i]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,i=0){const o=this.coefficients;for(let l=0;l<9;l++)o[l].fromArray(t,i+3*l);return this}toArray(t=[],i=0){const o=this.coefficients;for(let l=0;l<9;l++)o[l].toArray(t,i+3*l);return t}static getBasisAt(t,i){const o=t.x,l=t.y,f=t.z;i[0]=.282095,i[1]=.488603*l,i[2]=.488603*f,i[3]=.488603*o,i[4]=1.092548*o*l,i[5]=1.092548*l*f,i[6]=.315392*(3*f*f-1),i[7]=1.092548*o*f,i[8]=.546274*(o*o-l*l)}}pg.prototype.isSphericalHarmonics3=!0;class Kd extends vl{constructor(t=new pg,i=1){super(void 0,i),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const i=super.toJSON(t);return i.object.sh=this.sh.toArray(),i}}Kd.prototype.isLightProbe=!0;class j0 extends qr{constructor(t){super(t),this.textures={}}load(t,i,o,l){const f=this,B=new Ps(f.manager);B.setPath(f.path),B.setRequestHeader(f.requestHeader),B.setWithCredentials(f.withCredentials),B.load(t,function(M){try{i(f.parse(JSON.parse(M)))}catch(D){l?l(D):console.error(D),f.manager.itemError(t)}},o,l)}parse(t){function i(f){return o[f]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",f),o[f]}const o=this.textures,l=new Fv[t.type];if(t.uuid!==void 0&&(l.uuid=t.uuid),t.name!==void 0&&(l.name=t.name),t.color!==void 0&&l.color!==void 0&&l.color.setHex(t.color),t.roughness!==void 0&&(l.roughness=t.roughness),t.metalness!==void 0&&(l.metalness=t.metalness),t.sheen!==void 0&&(l.sheen=new Fi().setHex(t.sheen)),t.emissive!==void 0&&l.emissive!==void 0&&l.emissive.setHex(t.emissive),t.specular!==void 0&&l.specular!==void 0&&l.specular.setHex(t.specular),t.shininess!==void 0&&(l.shininess=t.shininess),t.clearcoat!==void 0&&(l.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(l.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(l.fog=t.fog),t.flatShading!==void 0&&(l.flatShading=t.flatShading),t.blending!==void 0&&(l.blending=t.blending),t.combine!==void 0&&(l.combine=t.combine),t.side!==void 0&&(l.side=t.side),t.shadowSide!==void 0&&(l.shadowSide=t.shadowSide),t.opacity!==void 0&&(l.opacity=t.opacity),t.transparent!==void 0&&(l.transparent=t.transparent),t.alphaTest!==void 0&&(l.alphaTest=t.alphaTest),t.depthTest!==void 0&&(l.depthTest=t.depthTest),t.depthWrite!==void 0&&(l.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(l.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(l.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(l.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(l.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(l.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(l.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(l.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(l.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(l.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(l.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(l.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(l.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(l.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(l.rotation=t.rotation),t.linewidth!==1&&(l.linewidth=t.linewidth),t.dashSize!==void 0&&(l.dashSize=t.dashSize),t.gapSize!==void 0&&(l.gapSize=t.gapSize),t.scale!==void 0&&(l.scale=t.scale),t.polygonOffset!==void 0&&(l.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(l.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(l.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(l.skinning=t.skinning),t.morphTargets!==void 0&&(l.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(l.morphNormals=t.morphNormals),t.dithering!==void 0&&(l.dithering=t.dithering),t.alphaToCoverage!==void 0&&(l.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(l.premultipliedAlpha=t.premultipliedAlpha),t.vertexTangents!==void 0&&(l.vertexTangents=t.vertexTangents),t.visible!==void 0&&(l.visible=t.visible),t.toneMapped!==void 0&&(l.toneMapped=t.toneMapped),t.userData!==void 0&&(l.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?l.vertexColors=t.vertexColors>0:l.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const f in t.uniforms){const B=t.uniforms[f];switch(l.uniforms[f]={},B.type){case"t":l.uniforms[f].value=i(B.value);break;case"c":l.uniforms[f].value=new Fi().setHex(B.value);break;case"v2":l.uniforms[f].value=new Qn().fromArray(B.value);break;case"v3":l.uniforms[f].value=new Je().fromArray(B.value);break;case"v4":l.uniforms[f].value=new rs().fromArray(B.value);break;case"m3":l.uniforms[f].value=new ls().fromArray(B.value);break;case"m4":l.uniforms[f].value=new ir().fromArray(B.value);break;default:l.uniforms[f].value=B.value}}if(t.defines!==void 0&&(l.defines=t.defines),t.vertexShader!==void 0&&(l.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(l.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(const f in t.extensions)l.extensions[f]=t.extensions[f];if(t.shading!==void 0&&(l.flatShading=t.shading===1),t.size!==void 0&&(l.size=t.size),t.sizeAttenuation!==void 0&&(l.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(l.map=i(t.map)),t.matcap!==void 0&&(l.matcap=i(t.matcap)),t.alphaMap!==void 0&&(l.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(l.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(l.bumpScale=t.bumpScale),t.normalMap!==void 0&&(l.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(l.normalMapType=t.normalMapType),t.normalScale!==void 0){let f=t.normalScale;Array.isArray(f)===!1&&(f=[f,f]),l.normalScale=new Qn().fromArray(f)}return t.displacementMap!==void 0&&(l.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(l.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(l.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(l.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(l.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(l.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(l.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(l.specularMap=i(t.specularMap)),t.envMap!==void 0&&(l.envMap=i(t.envMap)),t.envMapIntensity!==void 0&&(l.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(l.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(l.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(l.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(l.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(l.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(l.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(l.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(l.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(l.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(l.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(l.clearcoatNormalScale=new Qn().fromArray(t.clearcoatNormalScale)),t.transmission!==void 0&&(l.transmission=t.transmission),t.transmissionMap!==void 0&&(l.transmissionMap=i(t.transmissionMap)),l}setTextures(t){return this.textures=t,this}}const mg={decodeText:function(s){if(typeof TextDecoder<"u")return new TextDecoder().decode(s);let t="";for(let i=0,o=s.length;i<o;i++)t+=String.fromCharCode(s[i]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(s){const t=s.lastIndexOf("/");return t===-1?"./":s.substr(0,t+1)}};Ba.prototype=Object.assign(Object.create(k.prototype),{constructor:Ba,isInstancedBufferGeometry:!0,copy:function(s){return k.prototype.copy.call(this,s),this.instanceCount=s.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const s=k.prototype.toJSON.call(this);return s.instanceCount=this.instanceCount,s.isInstancedBufferGeometry=!0,s}}),Qa.prototype=Object.assign(Object.create(y.prototype),{constructor:Qa,isInstancedBufferAttribute:!0,copy:function(s){return y.prototype.copy.call(this,s),this.meshPerAttribute=s.meshPerAttribute,this},toJSON:function(){const s=y.prototype.toJSON.call(this);return s.meshPerAttribute=this.meshPerAttribute,s.isInstancedBufferAttribute=!0,s}});class W0 extends qr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=new Ps(f.manager);B.setPath(f.path),B.setRequestHeader(f.requestHeader),B.setWithCredentials(f.withCredentials),B.load(t,function(M){try{i(f.parse(JSON.parse(M)))}catch(D){l?l(D):console.error(D),f.manager.itemError(t)}},o,l)}parse(t){function i(ie,oe){if(o[oe]!==void 0)return o[oe];const he=ie.interleavedBuffers[oe],ye=function(be,ke){if(l[ke]!==void 0)return l[ke];const Xe=be.arrayBuffers[ke],it=new Uint32Array(Xe).buffer;return l[ke]=it,it}(ie,he.buffer),we=new ei(j(he.type,ye),he.stride);return we.uuid=he.uuid,o[oe]=we,we}const o={},l={},f=t.isInstancedBufferGeometry?new Ba:new k,B=t.data.index;if(B!==void 0){const ie=j(B.type,B.array);f.setIndex(new y(ie,1))}const M=t.data.attributes;for(const ie in M){const oe=M[ie];let he;if(oe.isInterleavedBufferAttribute)he=new pn(i(t.data,oe.data),oe.itemSize,oe.offset,oe.normalized);else{const ye=j(oe.type,oe.array);he=new(oe.isInstancedBufferAttribute?Qa:y)(ye,oe.itemSize,oe.normalized)}oe.name!==void 0&&(he.name=oe.name),oe.usage!==void 0&&he.setUsage(oe.usage),oe.updateRange!==void 0&&(he.updateRange.offset=oe.updateRange.offset,he.updateRange.count=oe.updateRange.count),f.setAttribute(ie,he)}const D=t.data.morphAttributes;if(D)for(const ie in D){const oe=D[ie],he=[];for(let ye=0,we=oe.length;ye<we;ye++){const be=oe[ye];let ke;be.isInterleavedBufferAttribute?ke=new pn(i(t.data,be.data),be.itemSize,be.offset,be.normalized):ke=new y(j(be.type,be.array),be.itemSize,be.normalized),be.name!==void 0&&(ke.name=be.name),he.push(ke)}f.morphAttributes[ie]=he}t.data.morphTargetsRelative&&(f.morphTargetsRelative=!0);const G=t.data.groups||t.data.drawcalls||t.data.offsets;if(G!==void 0)for(let ie=0,oe=G.length;ie!==oe;++ie){const he=G[ie];f.addGroup(he.start,he.count,he.materialIndex)}const $=t.data.boundingSphere;if($!==void 0){const ie=new Je;$.center!==void 0&&ie.fromArray($.center),f.boundingSphere=new ea(ie,$.radius)}return t.name&&(f.name=t.name),t.userData&&(f.userData=t.userData),f}}class Xd extends qr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=this.path===""?mg.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||B;const M=new Ps(this.manager);M.setPath(this.path),M.setRequestHeader(this.requestHeader),M.setWithCredentials(this.withCredentials),M.load(t,function(D){let G=null;try{G=JSON.parse(D)}catch(ie){return l!==void 0&&l(ie),void console.error("THREE:ObjectLoader: Can't parse "+t+".",ie.message)}const $=G.metadata;$!==void 0&&$.type!==void 0&&$.type.toLowerCase()!=="geometry"?f.parse(G,i):console.error("THREE.ObjectLoader: Can't load "+t)},o,l)}parse(t,i){const o=this.parseAnimations(t.animations),l=this.parseShapes(t.shapes),f=this.parseGeometries(t.geometries,l),B=this.parseImages(t.images,function(){i!==void 0&&i(G)}),M=this.parseTextures(t.textures,B),D=this.parseMaterials(t.materials,M),G=this.parseObject(t.object,f,D,o),$=this.parseSkeletons(t.skeletons,G);if(this.bindSkeletons(G,$),i!==void 0){let ie=!1;for(const oe in B)if(B[oe]instanceof HTMLImageElement){ie=!0;break}ie===!1&&i(G)}return G}parseShapes(t){const i={};if(t!==void 0)for(let o=0,l=t.length;o<l;o++){const f=new Yc().fromJSON(t[o]);i[f.uuid]=f}return i}parseSkeletons(t,i){const o={},l={};if(i.traverse(function(f){f.isBone&&(l[f.uuid]=f)}),t!==void 0)for(let f=0,B=t.length;f<B;f++){const M=new Ym().fromJSON(t[f],l);o[M.uuid]=M}return o}parseGeometries(t,i){const o={};let l;if(t!==void 0){const f=new W0;for(let B=0,M=t.length;B<M;B++){let D;const G=t[B];switch(G.type){case"PlaneGeometry":case"PlaneBufferGeometry":D=new la[G.type](G.width,G.height,G.widthSegments,G.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":D=new la[G.type](G.width,G.height,G.depth,G.widthSegments,G.heightSegments,G.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":D=new la[G.type](G.radius,G.segments,G.thetaStart,G.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":D=new la[G.type](G.radiusTop,G.radiusBottom,G.height,G.radialSegments,G.heightSegments,G.openEnded,G.thetaStart,G.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":D=new la[G.type](G.radius,G.height,G.radialSegments,G.heightSegments,G.openEnded,G.thetaStart,G.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":D=new la[G.type](G.radius,G.widthSegments,G.heightSegments,G.phiStart,G.phiLength,G.thetaStart,G.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":D=new la[G.type](G.radius,G.detail);break;case"RingGeometry":case"RingBufferGeometry":D=new la[G.type](G.innerRadius,G.outerRadius,G.thetaSegments,G.phiSegments,G.thetaStart,G.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":D=new la[G.type](G.radius,G.tube,G.radialSegments,G.tubularSegments,G.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":D=new la[G.type](G.radius,G.tube,G.tubularSegments,G.radialSegments,G.p,G.q);break;case"TubeGeometry":case"TubeBufferGeometry":D=new la[G.type](new lg[G.path.type]().fromJSON(G.path),G.tubularSegments,G.radius,G.radialSegments,G.closed);break;case"LatheGeometry":case"LatheBufferGeometry":D=new la[G.type](G.points,G.segments,G.phiStart,G.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":D=new la[G.type](G.vertices,G.indices,G.radius,G.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":l=[];for(let ie=0,oe=G.shapes.length;ie<oe;ie++){const he=i[G.shapes[ie]];l.push(he)}D=new la[G.type](l,G.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":l=[];for(let ie=0,oe=G.shapes.length;ie<oe;ie++){const he=i[G.shapes[ie]];l.push(he)}const $=G.options.extrudePath;$!==void 0&&(G.options.extrudePath=new lg[$.type]().fromJSON($)),D=new la[G.type](l,G.options);break;case"BufferGeometry":case"InstancedBufferGeometry":D=f.parse(G);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+G.type+'"');continue}D.uuid=G.uuid,G.name!==void 0&&(D.name=G.name),D.isBufferGeometry===!0&&G.userData!==void 0&&(D.userData=G.userData),o[G.uuid]=D}}return o}parseMaterials(t,i){const o={},l={};if(t!==void 0){const f=new j0;f.setTextures(i);for(let B=0,M=t.length;B<M;B++){const D=t[B];if(D.type==="MultiMaterial"){const G=[];for(let $=0;$<D.materials.length;$++){const ie=D.materials[$];o[ie.uuid]===void 0&&(o[ie.uuid]=f.parse(ie)),G.push(o[ie.uuid])}l[D.uuid]=G}else o[D.uuid]===void 0&&(o[D.uuid]=f.parse(D)),l[D.uuid]=o[D.uuid]}}return l}parseAnimations(t){const i={};if(t!==void 0)for(let o=0;o<t.length;o++){const l=t[o],f=Vd.parse(l);i[f.uuid]=f}return i}parseImages(t,i){function o(M){if(typeof M=="string"){const D=M;return function(G){return l.manager.itemStart(G),B.load(G,function(){l.manager.itemEnd(G)},void 0,function(){l.manager.itemError(G),l.manager.itemEnd(G)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(D)?D:l.resourcePath+D)}return M.data?{data:j(M.type,M.data),width:M.width,height:M.height}:null}const l=this,f={};let B;if(t!==void 0&&t.length>0){const M=new Vs(i);(B=new Dp(M)).setCrossOrigin(this.crossOrigin);for(let D=0,G=t.length;D<G;D++){const $=t[D],ie=$.url;if(Array.isArray(ie)){f[$.uuid]=[];for(let oe=0,he=ie.length;oe<he;oe++){const ye=o(ie[oe]);ye!==null&&(ye instanceof HTMLImageElement?f[$.uuid].push(ye):f[$.uuid].push(new Bh(ye.data,ye.width,ye.height)))}}else{const oe=o($.url);oe!==null&&(f[$.uuid]=oe)}}}return f}parseTextures(t,i){function o(f,B){return typeof f=="number"?f:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",f),B[f])}const l={};if(t!==void 0)for(let f=0,B=t.length;f<B;f++){const M=t[f];M.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',M.uuid),i[M.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",M.image);let D;const G=i[M.image];Array.isArray(G)?(D=new Rh(G),G.length===6&&(D.needsUpdate=!0)):(D=G&&G.data?new Bh(G.data,G.width,G.height):new go(G),G&&(D.needsUpdate=!0)),D.uuid=M.uuid,M.name!==void 0&&(D.name=M.name),M.mapping!==void 0&&(D.mapping=o(M.mapping,K0)),M.offset!==void 0&&D.offset.fromArray(M.offset),M.repeat!==void 0&&D.repeat.fromArray(M.repeat),M.center!==void 0&&D.center.fromArray(M.center),M.rotation!==void 0&&(D.rotation=M.rotation),M.wrap!==void 0&&(D.wrapS=o(M.wrap[0],gg),D.wrapT=o(M.wrap[1],gg)),M.format!==void 0&&(D.format=M.format),M.type!==void 0&&(D.type=M.type),M.encoding!==void 0&&(D.encoding=M.encoding),M.minFilter!==void 0&&(D.minFilter=o(M.minFilter,X0)),M.magFilter!==void 0&&(D.magFilter=o(M.magFilter,X0)),M.anisotropy!==void 0&&(D.anisotropy=M.anisotropy),M.flipY!==void 0&&(D.flipY=M.flipY),M.premultiplyAlpha!==void 0&&(D.premultiplyAlpha=M.premultiplyAlpha),M.unpackAlignment!==void 0&&(D.unpackAlignment=M.unpackAlignment),l[M.uuid]=D}return l}parseObject(t,i,o,l){function f($){return i[$]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",$),i[$]}function B($){if($!==void 0){if(Array.isArray($)){const ie=[];for(let oe=0,he=$.length;oe<he;oe++){const ye=$[oe];o[ye]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ye),ie.push(o[ye])}return ie}return o[$]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",$),o[$]}}let M,D,G;switch(t.type){case"Scene":M=new pp,t.background!==void 0&&Number.isInteger(t.background)&&(M.background=new Fi(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?M.fog=new Td(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(M.fog=new Md(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":M=new Q(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(M.focus=t.focus),t.zoom!==void 0&&(M.zoom=t.zoom),t.filmGauge!==void 0&&(M.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(M.filmOffset=t.filmOffset),t.view!==void 0&&(M.view=Object.assign({},t.view));break;case"OrthographicCamera":M=new Nh(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(M.zoom=t.zoom),t.view!==void 0&&(M.view=Object.assign({},t.view));break;case"AmbientLight":M=new fg(t.color,t.intensity);break;case"DirectionalLight":M=new dg(t.color,t.intensity);break;case"PointLight":M=new Fh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":M=new Up(t.color,t.intensity,t.width,t.height);break;case"SpotLight":M=new hg(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":M=new cg(t.color,t.groundColor,t.intensity);break;case"LightProbe":M=new Kd().fromJSON(t);break;case"SkinnedMesh":M=new Mi(D=f(t.geometry),G=B(t.material)),t.bindMode!==void 0&&(M.bindMode=t.bindMode),t.bindMatrix!==void 0&&M.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(M.skeleton=t.skeleton);break;case"Mesh":M=new te(D=f(t.geometry),G=B(t.material));break;case"InstancedMesh":D=f(t.geometry),G=B(t.material);const $=t.count,ie=t.instanceMatrix,oe=t.instanceColor;(M=new Wr(D,G,$)).instanceMatrix=new y(new Float32Array(ie.array),16),oe!==void 0&&(M.instanceColor=new y(new Float32Array(oe.array),oe.itemSize));break;case"LOD":M=new Cv;break;case"Line":M=new zi(f(t.geometry),B(t.material));break;case"LineLoop":M=new Jm(f(t.geometry),B(t.material));break;case"LineSegments":M=new er(f(t.geometry),B(t.material));break;case"PointCloud":case"Points":M=new Nr(f(t.geometry),B(t.material));break;case"Sprite":M=new Km(B(t.material));break;case"Group":M=new Mu;break;case"Bone":M=new Ti;break;default:M=new I}if(M.uuid=t.uuid,t.name!==void 0&&(M.name=t.name),t.matrix!==void 0?(M.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(M.matrixAutoUpdate=t.matrixAutoUpdate),M.matrixAutoUpdate&&M.matrix.decompose(M.position,M.quaternion,M.scale)):(t.position!==void 0&&M.position.fromArray(t.position),t.rotation!==void 0&&M.rotation.fromArray(t.rotation),t.quaternion!==void 0&&M.quaternion.fromArray(t.quaternion),t.scale!==void 0&&M.scale.fromArray(t.scale)),t.castShadow!==void 0&&(M.castShadow=t.castShadow),t.receiveShadow!==void 0&&(M.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(M.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(M.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(M.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&M.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(M.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(M.visible=t.visible),t.frustumCulled!==void 0&&(M.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(M.renderOrder=t.renderOrder),t.userData!==void 0&&(M.userData=t.userData),t.layers!==void 0&&(M.layers.mask=t.layers),t.children!==void 0){const $=t.children;for(let ie=0;ie<$.length;ie++)M.add(this.parseObject($[ie],i,o,l))}if(t.animations!==void 0){const $=t.animations;for(let ie=0;ie<$.length;ie++){const oe=$[ie];M.animations.push(l[oe])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(M.autoUpdate=t.autoUpdate);const $=t.levels;for(let ie=0;ie<$.length;ie++){const oe=$[ie],he=M.getObjectByProperty("uuid",oe.object);he!==void 0&&M.addLevel(he,oe.distance)}}return M}bindSkeletons(t,i){Object.keys(i).length!==0&&t.traverse(function(o){if(o.isSkinnedMesh===!0&&o.skeleton!==void 0){const l=i[o.skeleton];l===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",o.skeleton):o.bind(l,o.bindMatrix)}})}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const K0={UVMapping:300,CubeReflectionMapping:Da,CubeRefractionMapping:rc,EquirectangularReflectionMapping:fh,EquirectangularRefractionMapping:js,CubeUVReflectionMapping:Zr,CubeUVRefractionMapping:No},gg={RepeatWrapping:al,ClampToEdgeWrapping:Yo,MirroredRepeatWrapping:Fl},X0={NearestFilter:mo,NearestMipmapNearestFilter:ph,NearestMipmapLinearFilter:Co,LinearFilter:nt,LinearMipmapNearestFilter:Au,LinearMipmapLinearFilter:sc};rl.prototype=Object.assign(Object.create(qr.prototype),{constructor:rl,isImageBitmapLoader:!0,setOptions:function(s){return this.options=s,this},load:function(s,t,i,o){s===void 0&&(s=""),this.path!==void 0&&(s=this.path+s),s=this.manager.resolveURL(s);const l=this,f=Pu.get(s);if(f!==void 0)return l.manager.itemStart(s),setTimeout(function(){t&&t(f),l.manager.itemEnd(s)},0),f;const B={};B.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",B.headers=this.requestHeader,fetch(s,B).then(function(M){return M.blob()}).then(function(M){return createImageBitmap(M,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(M){Pu.add(s,M),t&&t(M),l.manager.itemEnd(s)}).catch(function(M){o&&o(M),l.manager.itemError(s),l.manager.itemEnd(s)}),l.manager.itemStart(s)}});class Gp{constructor(){this.type="ShapePath",this.color=new Fi,this.subPaths=[],this.currentPath=null}moveTo(t,i){return this.currentPath=new Wd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,i),this}lineTo(t,i){return this.currentPath.lineTo(t,i),this}quadraticCurveTo(t,i,o,l){return this.currentPath.quadraticCurveTo(t,i,o,l),this}bezierCurveTo(t,i,o,l,f,B){return this.currentPath.bezierCurveTo(t,i,o,l,f,B),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,i){function o(Xe){const it=[];for(let lt=0,pt=Xe.length;lt<pt;lt++){const mt=Xe[lt],ot=new Yc;ot.curves=mt.curves,it.push(ot)}return it}function l(Xe,it){const lt=it.length;let pt=!1;for(let mt=lt-1,ot=0;ot<lt;mt=ot++){let kt=it[mt],gt=it[ot],Ht=gt.x-kt.x,Zt=gt.y-kt.y;if(Math.abs(Zt)>Number.EPSILON){if(Zt<0&&(kt=it[ot],Ht=-Ht,gt=it[mt],Zt=-Zt),Xe.y<kt.y||Xe.y>gt.y)continue;if(Xe.y===kt.y){if(Xe.x===kt.x)return!0}else{const Qt=Zt*(Xe.x-kt.x)-Ht*(Xe.y-kt.y);if(Qt===0)return!0;if(Qt<0)continue;pt=!pt}}else{if(Xe.y!==kt.y)continue;if(gt.x<=Xe.x&&Xe.x<=kt.x||kt.x<=Xe.x&&Xe.x<=gt.x)return!0}}return pt}const f=jl.isClockWise,B=this.subPaths;if(B.length===0)return[];if(i===!0)return o(B);let M,D,G;const $=[];if(B.length===1)return D=B[0],G=new Yc,G.curves=D.curves,$.push(G),$;let ie=!f(B[0].getPoints());ie=t?!ie:ie;const oe=[],he=[];let ye,we=[],be=0;he[be]=void 0,we[be]=[];for(let Xe=0,it=B.length;Xe<it;Xe++)M=f(ye=(D=B[Xe]).getPoints()),(M=t?!M:M)?(!ie&&he[be]&&be++,he[be]={s:new Yc,p:ye},he[be].s.curves=D.curves,ie&&be++,we[be]=[]):we[be].push({h:D,p:ye[0]});if(!he[0])return o(B);if(he.length>1){let Xe=!1;const it=[];for(let lt=0,pt=he.length;lt<pt;lt++)oe[lt]=[];for(let lt=0,pt=he.length;lt<pt;lt++){const mt=we[lt];for(let ot=0;ot<mt.length;ot++){const kt=mt[ot];let gt=!0;for(let Ht=0;Ht<he.length;Ht++)l(kt.p,he[Ht].p)&&(lt!==Ht&&it.push({froms:lt,tos:Ht,hole:ot}),gt?(gt=!1,oe[Ht].push(kt)):Xe=!0);gt&&oe[lt].push(kt)}}it.length>0&&(Xe||(we=oe))}let ke;for(let Xe=0,it=he.length;Xe<it;Xe++){G=he[Xe].s,$.push(G);for(let lt=0,pt=(ke=we[Xe]).length;lt<pt;lt++)G.holes.push(ke[lt].h)}return $}}class Ag{constructor(t){this.type="Font",this.data=t}generateShapes(t,i=100){const o=[],l=ec(t,i,this.data);for(let f=0,B=l.length;f<B;f++)Array.prototype.push.apply(o,l[f].toShapes());return o}}Ag.prototype.isFont=!0;class kv extends qr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=new Ps(this.manager);B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(f.withCredentials),B.load(t,function(M){let D;try{D=JSON.parse(M)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),D=JSON.parse(M.substring(65,M.length-2))}const G=f.parse(D);i&&i(G)},o,l)}parse(t){return new Ag(t)}}let Yd;const vg={getContext:function(){return Yd===void 0&&(Yd=new(window.AudioContext||window.webkitAudioContext)),Yd},setContext:function(s){Yd=s}};class yg extends qr{constructor(t){super(t)}load(t,i,o,l){const f=this,B=new Ps(this.manager);B.setResponseType("arraybuffer"),B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(t,function(M){try{const D=M.slice(0);vg.getContext().decodeAudioData(D,function(G){i(G)})}catch(D){l?l(D):console.error(D),f.manager.itemError(t)}},o,l)}}class Y0 extends Kd{constructor(t,i,o=1){super(void 0,o);const l=new Fi().set(t),f=new Fi().set(i),B=new Je(l.r,l.g,l.b),M=new Je(f.r,f.g,f.b),D=Math.sqrt(Math.PI),G=D*Math.sqrt(.75);this.sh.coefficients[0].copy(B).add(M).multiplyScalar(D),this.sh.coefficients[1].copy(B).sub(M).multiplyScalar(G)}}Y0.prototype.isHemisphereLightProbe=!0;class q0 extends Kd{constructor(t,i=1){super(void 0,i);const o=new Fi().set(t);this.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI))}}q0.prototype.isAmbientLightProbe=!0;const J0=new ir,Z0=new ir;class Uv{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Q,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Q,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const i=this._cache;if(i.focus!==t.focus||i.fov!==t.fov||i.aspect!==t.aspect*this.aspect||i.near!==t.near||i.far!==t.far||i.zoom!==t.zoom||i.eyeSep!==this.eyeSep){i.focus=t.focus,i.fov=t.fov,i.aspect=t.aspect*this.aspect,i.near=t.near,i.far=t.far,i.zoom=t.zoom,i.eyeSep=this.eyeSep;const o=t.projectionMatrix.clone(),l=i.eyeSep/2,f=l*i.near/i.focus,B=i.near*Math.tan(qi.DEG2RAD*i.fov*.5)/i.zoom;let M,D;Z0.elements[12]=-l,J0.elements[12]=l,M=-B*i.aspect+f,D=B*i.aspect+f,o.elements[0]=2*i.near/(D-M),o.elements[8]=(D+M)/(D-M),this.cameraL.projectionMatrix.copy(o),M=-B*i.aspect-f,D=B*i.aspect-f,o.elements[0]=2*i.near/(D-M),o.elements[8]=(D+M)/(D-M),this.cameraR.projectionMatrix.copy(o)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Z0),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(J0)}}class $0{constructor(t){this.autoStart=t===void 0||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Dl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const i=Dl();t=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=t}return t}}const Fu=new Je,eA=new Mo,Gv=new Je,Nu=new Je;class Hv extends I{constructor(){super(),this.type="AudioListener",this.context=vg.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new $0}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const i=this.context.listener,o=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fu,eA,Gv),Nu.set(0,0,-1).applyQuaternion(eA),i.positionX){const l=this.context.currentTime+this.timeDelta;i.positionX.linearRampToValueAtTime(Fu.x,l),i.positionY.linearRampToValueAtTime(Fu.y,l),i.positionZ.linearRampToValueAtTime(Fu.z,l),i.forwardX.linearRampToValueAtTime(Nu.x,l),i.forwardY.linearRampToValueAtTime(Nu.y,l),i.forwardZ.linearRampToValueAtTime(Nu.z,l),i.upX.linearRampToValueAtTime(o.x,l),i.upY.linearRampToValueAtTime(o.y,l),i.upZ.linearRampToValueAtTime(o.z,l)}else i.setPosition(Fu.x,Fu.y,Fu.z),i.setOrientation(Nu.x,Nu.y,Nu.z,o.x,o.y,o.z)}}class xg extends I{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl!==!1)return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(this.hasPlaybackControl!==!1)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,i=this.filters.length;t<i;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,i=this.filters.length;t<i;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl!==!1)return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl!==!1)return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const qc=new Je,Eg=new Mo,zv=new Je,ku=new Je;class Vv extends xg{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,i,o){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=o,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(qc,Eg,zv),ku.set(0,0,1).applyQuaternion(Eg);const i=this.panner;if(i.positionX){const o=this.context.currentTime+this.listener.timeDelta;i.positionX.linearRampToValueAtTime(qc.x,o),i.positionY.linearRampToValueAtTime(qc.y,o),i.positionZ.linearRampToValueAtTime(qc.z,o),i.orientationX.linearRampToValueAtTime(ku.x,o),i.orientationY.linearRampToValueAtTime(ku.y,o),i.orientationZ.linearRampToValueAtTime(ku.z,o)}else i.setPosition(qc.x,qc.y,qc.z),i.setOrientation(ku.x,ku.y,ku.z)}}class tA{constructor(t,i=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=i,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const i=this.getFrequencyData();for(let o=0;o<i.length;o++)t+=i[o];return t/i.length}}class nA{constructor(t,i,o){this.binding=t,this.valueSize=o;let l,f,B;switch(i){case"quaternion":l=this._slerp,f=this._slerpAdditive,B=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*o),this._workIndex=5;break;case"string":case"bool":l=this._select,f=this._select,B=this._setAdditiveIdentityOther,this.buffer=new Array(5*o);break;default:l=this._lerp,f=this._lerpAdditive,B=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*o)}this._mixBufferRegion=l,this._mixBufferRegionAdditive=f,this._setIdentity=B,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,i){const o=this.buffer,l=this.valueSize,f=t*l+l;let B=this.cumulativeWeight;if(B===0){for(let M=0;M!==l;++M)o[f+M]=o[M];B=i}else{const M=i/(B+=i);this._mixBufferRegion(o,f,0,M,l)}this.cumulativeWeight=B}accumulateAdditive(t){const i=this.buffer,o=this.valueSize,l=o*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,l,0,t,o),this.cumulativeWeightAdditive+=t}apply(t){const i=this.valueSize,o=this.buffer,l=t*i+i,f=this.cumulativeWeight,B=this.cumulativeWeightAdditive,M=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,f<1){const D=i*this._origIndex;this._mixBufferRegion(o,l,D,1-f,i)}B>0&&this._mixBufferRegionAdditive(o,l,this._addIndex*i,1,i);for(let D=i,G=i+i;D!==G;++D)if(o[D]!==o[D+i]){M.setValue(o,l);break}}saveOriginalState(){const t=this.binding,i=this.buffer,o=this.valueSize,l=o*this._origIndex;t.getValue(i,l);for(let f=o,B=l;f!==B;++f)i[f]=i[l+f%o];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,i=t+this.valueSize;for(let o=t;o<i;o++)this.buffer[o]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let o=0;o<this.valueSize;o++)this.buffer[i+o]=this.buffer[t+o]}_select(t,i,o,l,f){if(l>=.5)for(let B=0;B!==f;++B)t[i+B]=t[o+B]}_slerp(t,i,o,l){Mo.slerpFlat(t,i,t,i,t,o,l)}_slerpAdditive(t,i,o,l,f){const B=this._workIndex*f;Mo.multiplyQuaternionsFlat(t,B,t,i,t,o),Mo.slerpFlat(t,i,t,i,t,B,l)}_lerp(t,i,o,l,f){const B=1-l;for(let M=0;M!==f;++M){const D=i+M;t[D]=t[D]*B+t[o+M]*l}}_lerpAdditive(t,i,o,l,f){for(let B=0;B!==f;++B){const M=i+B;t[M]=t[M]+t[o+B]*l}}}const Qv=new RegExp("[\\[\\]\\.:\\/]","g"),iA="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",jv=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),bg=/(WCOD+)?/.source.replace("WCOD",iA),_g=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Wv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Kv=new RegExp("^"+jv+bg+_g+Wv+"$"),Xv=["material","materials","bones"];Object.assign(qs.prototype,{getValue:function(s,t){this.bind();const i=this._targetGroup.nCachedObjects_,o=this._bindings[i];o!==void 0&&o.getValue(s,t)},setValue:function(s,t){const i=this._bindings;for(let o=this._targetGroup.nCachedObjects_,l=i.length;o!==l;++o)i[o].setValue(s,t)},bind:function(){const s=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=s.length;t!==i;++t)s[t].bind()},unbind:function(){const s=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=s.length;t!==i;++t)s[t].unbind()}}),Object.assign(Oo,{Composite:qs,create:function(s,t,i){return s&&s.isAnimationObjectGroup?new Oo.Composite(s,t,i):new Oo(s,t,i)},sanitizeNodeName:function(s){return s.replace(/\s/g,"_").replace(Qv,"")},parseTrackName:function(s){const t=Kv.exec(s);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+s);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=i.nodeName&&i.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const l=i.nodeName.substring(o+1);Xv.indexOf(l)!==-1&&(i.nodeName=i.nodeName.substring(0,o),i.objectName=l)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+s);return i},findNode:function(s,t){if(!t||t===""||t==="."||t===-1||t===s.name||t===s.uuid)return s;if(s.skeleton){const i=s.skeleton.getBoneByName(t);if(i!==void 0)return i}if(s.children){const i=function(l){for(let f=0;f<l.length;f++){const B=l[f];if(B.name===t||B.uuid===t)return B;const M=i(B.children);if(M)return M}return null},o=i(s.children);if(o)return o}return null}}),Object.assign(Oo.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(s,t){s[t]=this.node[this.propertyName]},function(s,t){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)s[t++]=i[o]},function(s,t){s[t]=this.resolvedProperty[this.propertyIndex]},function(s,t){this.resolvedProperty.toArray(s,t)}],SetterByBindingTypeAndVersioning:[[function(s,t){this.targetObject[this.propertyName]=s[t]},function(s,t){this.targetObject[this.propertyName]=s[t],this.targetObject.needsUpdate=!0},function(s,t){this.targetObject[this.propertyName]=s[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(s,t){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=s[t++]},function(s,t){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=s[t++];this.targetObject.needsUpdate=!0},function(s,t){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=s[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(s,t){this.resolvedProperty[this.propertyIndex]=s[t]},function(s,t){this.resolvedProperty[this.propertyIndex]=s[t],this.targetObject.needsUpdate=!0},function(s,t){this.resolvedProperty[this.propertyIndex]=s[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(s,t){this.resolvedProperty.fromArray(s,t)},function(s,t){this.resolvedProperty.fromArray(s,t),this.targetObject.needsUpdate=!0},function(s,t){this.resolvedProperty.fromArray(s,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(s,t){this.bind(),this.getValue(s,t)},setValue:function(s,t){this.bind(),this.setValue(s,t)},bind:function(){let s=this.node;const t=this.parsedPath,i=t.objectName,o=t.propertyName;let l=t.propertyIndex;if(s||(s=Oo.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=s),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!s)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let D=t.objectIndex;switch(i){case"materials":if(!s.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!s.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);s=s.material.materials;break;case"bones":if(!s.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);s=s.skeleton.bones;for(let G=0;G<s.length;G++)if(s[G].name===D){D=G;break}break;default:if(s[i]===void 0)return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);s=s[i]}if(D!==void 0){if(s[D]===void 0)return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,s);s=s[D]}}const f=s[o];if(f===void 0){const D=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+D+"."+o+" but it wasn't found.",s)}let B=this.Versioning.None;this.targetObject=s,s.needsUpdate!==void 0?B=this.Versioning.NeedsUpdate:s.matrixWorldNeedsUpdate!==void 0&&(B=this.Versioning.MatrixWorldNeedsUpdate);let M=this.BindingType.Direct;if(l!==void 0){if(o==="morphTargetInfluences"){if(!s.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!s.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!s.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);s.morphTargetDictionary[l]!==void 0&&(l=s.morphTargetDictionary[l])}M=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=l}else f.fromArray!==void 0&&f.toArray!==void 0?(M=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(M=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=o;this.getValue=this.GetterByBindingType[M],this.setValue=this.SetterByBindingTypeAndVersioning[M][B]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Oo.prototype,{_getValue_unbound:Oo.prototype.getValue,_setValue_unbound:Oo.prototype.setValue});class rA{constructor(){this.uuid=qi.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let o=0,l=arguments.length;o!==l;++o)t[arguments[o].uuid]=o;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}add(){const t=this._objects,i=this._indicesByUUID,o=this._paths,l=this._parsedPaths,f=this._bindings,B=f.length;let M,D=t.length,G=this.nCachedObjects_;for(let $=0,ie=arguments.length;$!==ie;++$){const oe=arguments[$],he=oe.uuid;let ye=i[he];if(ye===void 0){ye=D++,i[he]=ye,t.push(oe);for(let we=0,be=B;we!==be;++we)f[we].push(new Oo(oe,o[we],l[we]))}else if(ye<G){M=t[ye];const we=--G,be=t[we];i[be.uuid]=ye,t[ye]=be,i[he]=we,t[we]=oe;for(let ke=0,Xe=B;ke!==Xe;++ke){const it=f[ke],lt=it[we];let pt=it[ye];it[ye]=lt,pt===void 0&&(pt=new Oo(oe,o[ke],l[ke])),it[we]=pt}}else t[ye]!==M&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=G}remove(){const t=this._objects,i=this._indicesByUUID,o=this._bindings,l=o.length;let f=this.nCachedObjects_;for(let B=0,M=arguments.length;B!==M;++B){const D=arguments[B],G=D.uuid,$=i[G];if($!==void 0&&$>=f){const ie=f++,oe=t[ie];i[oe.uuid]=$,t[$]=oe,i[G]=ie,t[ie]=D;for(let he=0,ye=l;he!==ye;++he){const we=o[he],be=we[ie],ke=we[$];we[$]=be,we[ie]=ke}}}this.nCachedObjects_=f}uncache(){const t=this._objects,i=this._indicesByUUID,o=this._bindings,l=o.length;let f=this.nCachedObjects_,B=t.length;for(let M=0,D=arguments.length;M!==D;++M){const G=arguments[M].uuid,$=i[G];if($!==void 0)if(delete i[G],$<f){const ie=--f,oe=t[ie],he=--B,ye=t[he];i[oe.uuid]=$,t[$]=oe,i[ye.uuid]=ie,t[ie]=ye,t.pop();for(let we=0,be=l;we!==be;++we){const ke=o[we],Xe=ke[ie],it=ke[he];ke[$]=Xe,ke[ie]=it,ke.pop()}}else{const ie=--B,oe=t[ie];ie>0&&(i[oe.uuid]=$),t[$]=oe,t.pop();for(let he=0,ye=l;he!==ye;++he){const we=o[he];we[$]=we[ie],we.pop()}}}this.nCachedObjects_=f}subscribe_(t,i){const o=this._bindingsIndicesByPath;let l=o[t];const f=this._bindings;if(l!==void 0)return f[l];const B=this._paths,M=this._parsedPaths,D=this._objects,G=D.length,$=this.nCachedObjects_,ie=new Array(G);l=f.length,o[t]=l,B.push(t),M.push(i),f.push(ie);for(let oe=$,he=D.length;oe!==he;++oe){const ye=D[oe];ie[oe]=new Oo(ye,t,i)}return ie}unsubscribe_(t){const i=this._bindingsIndicesByPath,o=i[t];if(o!==void 0){const l=this._paths,f=this._parsedPaths,B=this._bindings,M=B.length-1,D=B[M];i[t[M]]=o,B[o]=D,B.pop(),f[o]=f[M],f.pop(),l[o]=l[M],l.pop()}}}rA.prototype.isAnimationObjectGroup=!0;class Yv{constructor(t,i,o=null,l=i.blendMode){this._mixer=t,this._clip=i,this._localRoot=o,this.blendMode=l;const f=i.tracks,B=f.length,M=new Array(B),D={endingStart:2400,endingEnd:2400};for(let G=0;G!==B;++G){const $=f[G].createInterpolant(null);M[G]=$,$.settings=D}this._interpolantSettings=D,this._interpolants=M,this._propertyBindings=new Array(B),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,i){return this.loop=t,this.repetitions=i,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,i,o){if(t.fadeOut(i),this.fadeIn(i),o){const l=this._clip.duration,f=t._clip.duration,B=f/l,M=l/f;t.warp(1,B,i),this.warp(M,1,i)}return this}crossFadeTo(t,i,o){return t.crossFadeFrom(this,i,o)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,i,o){const l=this._mixer,f=l.time,B=this.timeScale;let M=this._timeScaleInterpolant;M===null&&(M=l._lendControlInterpolant(),this._timeScaleInterpolant=M);const D=M.parameterPositions,G=M.sampleValues;return D[0]=f,D[1]=f+o,G[0]=t/B,G[1]=i/B,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,i,o,l){if(!this.enabled)return void this._updateWeight(t);const f=this._startTime;if(f!==null){const D=(t-f)*o;if(D<0||o===0)return;this._startTime=null,i=o*D}i*=this._updateTimeScale(t);const B=this._updateTime(i),M=this._updateWeight(t);if(M>0){const D=this._interpolants,G=this._propertyBindings;switch(this.blendMode){case 2501:for(let $=0,ie=D.length;$!==ie;++$)D[$].evaluate(B),G[$].accumulateAdditive(M);break;case 2500:default:for(let $=0,ie=D.length;$!==ie;++$)D[$].evaluate(B),G[$].accumulate(l,M)}}}_updateWeight(t){let i=0;if(this.enabled){i=this.weight;const o=this._weightInterpolant;if(o!==null){const l=o.evaluate(t)[0];i*=l,t>o.parameterPositions[1]&&(this.stopFading(),l===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(t){let i=0;if(!this.paused){i=this.timeScale;const o=this._timeScaleInterpolant;o!==null&&(i*=o.evaluate(t)[0],t>o.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i))}return this._effectiveTimeScale=i,i}_updateTime(t){const i=this._clip.duration,o=this.loop;let l=this.time+t,f=this._loopCount;const B=o===2202;if(t===0)return f===-1?l:B&&(1&f)==1?i-l:l;if(o===2200){f===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(l>=i)l=i;else{if(!(l<0)){this.time=l;break e}l=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(f===-1&&(t>=0?(f=0,this._setEndings(!0,this.repetitions===0,B)):this._setEndings(this.repetitions===0,!0,B)),l>=i||l<0){const M=Math.floor(l/i);l-=i*M,f+=Math.abs(M);const D=this.repetitions-f;if(D<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,l=t>0?i:0,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(D===1){const G=t<0;this._setEndings(G,!G,B)}else this._setEndings(!1,!1,B);this._loopCount=f,this.time=l,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:M})}}else this.time=l;if(B&&(1&f)==1)return i-l}return l}_setEndings(t,i,o){const l=this._interpolantSettings;o?(l.endingStart=2401,l.endingEnd=2401):(l.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,l.endingEnd=i?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(t,i,o){const l=this._mixer,f=l.time;let B=this._weightInterpolant;B===null&&(B=l._lendControlInterpolant(),this._weightInterpolant=B);const M=B.parameterPositions,D=B.sampleValues;return M[0]=f,D[0]=i,M[1]=f+t,D[1]=o,this}}class wg extends U{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,i){const o=t._localRoot||this._root,l=t._clip.tracks,f=l.length,B=t._propertyBindings,M=t._interpolants,D=o.uuid,G=this._bindingsByRootAndName;let $=G[D];$===void 0&&($={},G[D]=$);for(let ie=0;ie!==f;++ie){const oe=l[ie],he=oe.name;let ye=$[he];if(ye!==void 0)B[ie]=ye;else{if((ye=B[ie])!==void 0){ye._cacheIndex===null&&(++ye.referenceCount,this._addInactiveBinding(ye,D,he));continue}const we=i&&i._propertyBindings[ie].binding.parsedPath;++(ye=new nA(Oo.create(o,he,we),oe.ValueTypeName,oe.getValueSize())).referenceCount,this._addInactiveBinding(ye,D,he),B[ie]=ye}M[ie].resultBuffer=ye.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const o=(t._localRoot||this._root).uuid,l=t._clip.uuid,f=this._actionsByClip[l];this._bindAction(t,f&&f.knownActions[0]),this._addInactiveAction(t,l,o)}const i=t._propertyBindings;for(let o=0,l=i.length;o!==l;++o){const f=i[o];f.useCount++==0&&(this._lendBinding(f),f.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const i=t._propertyBindings;for(let o=0,l=i.length;o!==l;++o){const f=i[o];--f.useCount==0&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const i=t._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(t,i,o){const l=this._actions,f=this._actionsByClip;let B=f[i];if(B===void 0)B={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,f[i]=B;else{const M=B.knownActions;t._byClipCacheIndex=M.length,M.push(t)}t._cacheIndex=l.length,l.push(t),B.actionByRoot[o]=t}_removeInactiveAction(t){const i=this._actions,o=i[i.length-1],l=t._cacheIndex;o._cacheIndex=l,i[l]=o,i.pop(),t._cacheIndex=null;const f=t._clip.uuid,B=this._actionsByClip,M=B[f],D=M.knownActions,G=D[D.length-1],$=t._byClipCacheIndex;G._byClipCacheIndex=$,D[$]=G,D.pop(),t._byClipCacheIndex=null,delete M.actionByRoot[(t._localRoot||this._root).uuid],D.length===0&&delete B[f],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const i=t._propertyBindings;for(let o=0,l=i.length;o!==l;++o){const f=i[o];--f.referenceCount==0&&this._removeInactiveBinding(f)}}_lendAction(t){const i=this._actions,o=t._cacheIndex,l=this._nActiveActions++,f=i[l];t._cacheIndex=l,i[l]=t,f._cacheIndex=o,i[o]=f}_takeBackAction(t){const i=this._actions,o=t._cacheIndex,l=--this._nActiveActions,f=i[l];t._cacheIndex=l,i[l]=t,f._cacheIndex=o,i[o]=f}_addInactiveBinding(t,i,o){const l=this._bindingsByRootAndName,f=this._bindings;let B=l[i];B===void 0&&(B={},l[i]=B),B[o]=t,t._cacheIndex=f.length,f.push(t)}_removeInactiveBinding(t){const i=this._bindings,o=t.binding,l=o.rootNode.uuid,f=o.path,B=this._bindingsByRootAndName,M=B[l],D=i[i.length-1],G=t._cacheIndex;D._cacheIndex=G,i[G]=D,i.pop(),delete M[f],Object.keys(M).length===0&&delete B[l]}_lendBinding(t){const i=this._bindings,o=t._cacheIndex,l=this._nActiveBindings++,f=i[l];t._cacheIndex=l,i[l]=t,f._cacheIndex=o,i[o]=f}_takeBackBinding(t){const i=this._bindings,o=t._cacheIndex,l=--this._nActiveBindings,f=i[l];t._cacheIndex=l,i[l]=t,f._cacheIndex=o,i[o]=f}_lendControlInterpolant(){const t=this._controlInterpolants,i=this._nActiveControlInterpolants++;let o=t[i];return o===void 0&&((o=new Yr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=i,t[i]=o),o}_takeBackControlInterpolant(t){const i=this._controlInterpolants,o=t.__cacheIndex,l=--this._nActiveControlInterpolants,f=i[l];t.__cacheIndex=l,i[l]=t,f.__cacheIndex=o,i[o]=f}clipAction(t,i,o){const l=i||this._root,f=l.uuid;let B=typeof t=="string"?Vd.findByName(l,t):t;const M=B!==null?B.uuid:t,D=this._actionsByClip[M];let G=null;if(o===void 0&&(o=B!==null?B.blendMode:2500),D!==void 0){const ie=D.actionByRoot[f];if(ie!==void 0&&ie.blendMode===o)return ie;G=D.knownActions[0],B===null&&(B=G._clip)}if(B===null)return null;const $=new Yv(this,B,i,o);return this._bindAction($,G),this._addInactiveAction($,M,f),$}existingAction(t,i){const o=i||this._root,l=o.uuid,f=typeof t=="string"?Vd.findByName(o,t):t,B=f?f.uuid:t,M=this._actionsByClip[B];return M!==void 0&&M.actionByRoot[l]||null}stopAllAction(){const t=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const i=this._actions,o=this._nActiveActions,l=this.time+=t,f=Math.sign(t),B=this._accuIndex^=1;for(let G=0;G!==o;++G)i[G]._update(l,t,f,B);const M=this._bindings,D=this._nActiveBindings;for(let G=0;G!==D;++G)M[G].apply(B);return this}setTime(t){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const i=this._actions,o=t.uuid,l=this._actionsByClip,f=l[o];if(f!==void 0){const B=f.knownActions;for(let M=0,D=B.length;M!==D;++M){const G=B[M];this._deactivateAction(G);const $=G._cacheIndex,ie=i[i.length-1];G._cacheIndex=null,G._byClipCacheIndex=null,ie._cacheIndex=$,i[$]=ie,i.pop(),this._removeInactiveBindingsForAction(G)}delete l[o]}}uncacheRoot(t){const i=t.uuid,o=this._actionsByClip;for(const f in o){const B=o[f].actionByRoot[i];B!==void 0&&(this._deactivateAction(B),this._removeInactiveAction(B))}const l=this._bindingsByRootAndName[i];if(l!==void 0)for(const f in l){const B=l[f];B.restoreOriginalState(),this._removeInactiveBinding(B)}}uncacheAction(t,i){const o=this.existingAction(t,i);o!==null&&(this._deactivateAction(o),this._removeInactiveAction(o))}}wg.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Wl{constructor(t){typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Wl(this.value.clone===void 0?this.value:this.value.clone())}}id.prototype=Object.assign(Object.create(ei.prototype),{constructor:id,isInstancedInterleavedBuffer:!0,copy:function(s){return ei.prototype.copy.call(this,s),this.meshPerAttribute=s.meshPerAttribute,this},clone:function(s){const t=ei.prototype.clone.call(this,s);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(s){const t=ei.prototype.toJSON.call(this,s);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(rd.prototype,"needsUpdate",{set:function(s){s===!0&&this.version++}}),Object.assign(rd.prototype,{isGLBufferAttribute:!0,setBuffer:function(s){return this.buffer=s,this},setType:function(s,t){return this.type=s,this.elementSize=t,this},setItemSize:function(s){return this.itemSize=s,this},setCount:function(s){return this.count=s,this}}),Object.assign(rh.prototype,{set:function(s,t){this.ray.set(s,t)},setFromCamera:function(s,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(s.x,s.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(s.x,s.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)},intersectObject:function(s,t=!1,i=[]){return sd(s,this,i,t),i.sort(Lc),i},intersectObjects:function(s,t=!1,i=[]){for(let o=0,l=s.length;o<l;o++)sd(s[o],this,i,t);return i.sort(Lc),i}});class Cg{constructor(t=1,i=0,o=0){return this.radius=t,this.phi=i,this.theta=o,this}set(t,i,o){return this.radius=t,this.phi=i,this.theta=o,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,i,o){return this.radius=Math.sqrt(t*t+i*i+o*o),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,o),this.phi=Math.acos(qi.clamp(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class sA{constructor(t=1,i=0,o=0){return this.radius=t,this.theta=i,this.y=o,this}set(t,i,o){return this.radius=t,this.theta=i,this.y=o,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,i,o){return this.radius=Math.sqrt(t*t+o*o),this.theta=Math.atan2(t,o),this.y=i,this}clone(){return new this.constructor().copy(this)}}const Mg=new Qn;class kh{constructor(t=new Qn(1/0,1/0),i=new Qn(-1/0,-1/0)){this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromPoints(t){this.makeEmpty();for(let i=0,o=t.length;i<o;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const o=Mg.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return t===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Qn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Qn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,i){return i===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),i=new Qn),i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,i){return i===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),i=new Qn),i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Mg.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}kh.prototype.isBox2=!0;const Tg=new Je,Hp=new Je;class zp{constructor(t=new Je,i=new Je){this.start=t,this.end=i}set(t,i){return this.start.copy(t),this.end.copy(i),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Je),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Je),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,i){return i===void 0&&(console.warn("THREE.Line3: .at() target is now required"),i=new Je),this.delta(i).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,i){Tg.subVectors(t,this.start),Hp.subVectors(this.end,this.start);const o=Hp.dot(Hp);let l=Hp.dot(Tg)/o;return i&&(l=qi.clamp(l,0,1)),l}closestPointToPoint(t,i,o){const l=this.closestPointToPointParameter(t,i);return o===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),o=new Je),this.delta(o).multiplyScalar(l).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}(sh.prototype=Object.create(I.prototype)).constructor=sh,sh.prototype.isImmediateRenderObject=!0;const Sg=new Je;class qv extends I{constructor(t,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const o=new k,l=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let B=0,M=1;B<32;B++,M++){const D=B/32*Math.PI*2,G=M/32*Math.PI*2;l.push(Math.cos(D),Math.sin(D),1,Math.cos(G),Math.sin(G),1)}o.setAttribute("position",new P(l,3));const f=new ta({fog:!1,toneMapped:!1});this.cone=new er(o,f),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,i=t*Math.tan(this.light.angle);this.cone.scale.set(i,i,t),Sg.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Sg),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Jc=new Je,Vp=new ir,Ig=new ir;class Rg extends er{constructor(t){const i=Lf(t),o=new k,l=[],f=[],B=new Fi(0,0,1),M=new Fi(0,1,0);for(let D=0;D<i.length;D++){const G=i[D];G.parent&&G.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),f.push(B.r,B.g,B.b),f.push(M.r,M.g,M.b))}o.setAttribute("position",new P(l,3)),o.setAttribute("color",new P(f,3)),super(o,new ta({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=i,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const i=this.bones,o=this.geometry,l=o.getAttribute("position");Ig.copy(this.root.matrixWorld).invert();for(let f=0,B=0;f<i.length;f++){const M=i[f];M.parent&&M.parent.isBone&&(Vp.multiplyMatrices(Ig,M.matrixWorld),Jc.setFromMatrixPosition(Vp),l.setXYZ(B,Jc.x,Jc.y,Jc.z),Vp.multiplyMatrices(Ig,M.parent.matrixWorld),Jc.setFromMatrixPosition(Vp),l.setXYZ(B+1,Jc.x,Jc.y,Jc.z),B+=2)}o.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class oA extends te{constructor(t,i,o){super(new Nd(i,4,2),new yc({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=o,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Qp=new Je,qd=new Fi,Bg=new Fi;class jp extends I{constructor(t,i,o){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=o;const l=new Od(i);l.rotateY(.5*Math.PI),this.material=new yc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const f=l.getAttribute("position"),B=new Float32Array(3*f.count);l.setAttribute("color",new y(B,3)),this.add(new te(l,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const i=t.geometry.getAttribute("color");qd.copy(this.light.color),Bg.copy(this.light.groundColor);for(let o=0,l=i.count;o<l;o++){const f=o<l/2?qd:Bg;i.setXYZ(o,f.r,f.g,f.b)}i.needsUpdate=!0}t.lookAt(Qp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ca extends er{constructor(t=10,i=10,o=4473924,l=8947848){o=new Fi(o),l=new Fi(l);const f=i/2,B=t/i,M=t/2,D=[],G=[];for(let ie=0,oe=0,he=-M;ie<=i;ie++,he+=B){D.push(-M,0,he,M,0,he),D.push(he,0,-M,he,0,M);const ye=ie===f?o:l;ye.toArray(G,oe),oe+=3,ye.toArray(G,oe),oe+=3,ye.toArray(G,oe),oe+=3,ye.toArray(G,oe),oe+=3}const $=new k;$.setAttribute("position",new P(D,3)),$.setAttribute("color",new P(G,3)),super($,new ta({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Uu extends er{constructor(t=10,i=16,o=8,l=64,f=4473924,B=8947848){f=new Fi(f),B=new Fi(B);const M=[],D=[];for(let $=0;$<=i;$++){const ie=$/i*(2*Math.PI),oe=Math.sin(ie)*t,he=Math.cos(ie)*t;M.push(0,0,0),M.push(oe,0,he);const ye=1&$?f:B;D.push(ye.r,ye.g,ye.b),D.push(ye.r,ye.g,ye.b)}for(let $=0;$<=o;$++){const ie=1&$?f:B,oe=t-t/o*$;for(let he=0;he<l;he++){let ye=he/l*(2*Math.PI),we=Math.sin(ye)*oe,be=Math.cos(ye)*oe;M.push(we,0,be),D.push(ie.r,ie.g,ie.b),ye=(he+1)/l*(2*Math.PI),we=Math.sin(ye)*oe,be=Math.cos(ye)*oe,M.push(we,0,be),D.push(ie.r,ie.g,ie.b)}}const G=new k;G.setAttribute("position",new P(M,3)),G.setAttribute("color",new P(D,3)),super(G,new ta({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Wp=new Je,xc=new Je,Uh=new Je;class Gh extends I{constructor(t,i,o){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,i===void 0&&(i=1);let l=new k;l.setAttribute("position",new P([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));const f=new ta({fog:!1,toneMapped:!1});this.lightPlane=new zi(l,f),this.add(this.lightPlane),(l=new k).setAttribute("position",new P([0,0,0,0,0,1],3)),this.targetLine=new zi(l,f),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Wp.setFromMatrixPosition(this.light.matrixWorld),xc.setFromMatrixPosition(this.light.target.matrixWorld),Uh.subVectors(xc,Wp),this.lightPlane.lookAt(xc),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xc),this.targetLine.scale.z=Uh.length()}}const Ec=new Je,Us=new q;class Jd extends er{constructor(t){function i(ye,we,be){o(ye,be),o(we,be)}function o(ye,we){B.push(0,0,0),M.push(we.r,we.g,we.b),D[ye]===void 0&&(D[ye]=[]),D[ye].push(B.length/3-1)}const l=new k,f=new ta({color:16777215,vertexColors:!0,toneMapped:!1}),B=[],M=[],D={},G=new Fi(16755200),$=new Fi(16711680),ie=new Fi(43775),oe=new Fi(16777215),he=new Fi(3355443);i("n1","n2",G),i("n2","n4",G),i("n4","n3",G),i("n3","n1",G),i("f1","f2",G),i("f2","f4",G),i("f4","f3",G),i("f3","f1",G),i("n1","f1",G),i("n2","f2",G),i("n3","f3",G),i("n4","f4",G),i("p","n1",$),i("p","n2",$),i("p","n3",$),i("p","n4",$),i("u1","u2",ie),i("u2","u3",ie),i("u3","u1",ie),i("c","t",oe),i("p","c",he),i("cn1","cn2",he),i("cn3","cn4",he),i("cf1","cf2",he),i("cf3","cf4",he),l.setAttribute("position",new P(B,3)),l.setAttribute("color",new P(M,3)),super(l,f),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=D,this.update()}update(){const t=this.geometry,i=this.pointMap;Us.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),no("c",i,t,Us,0,0,-1),no("t",i,t,Us,0,0,1),no("n1",i,t,Us,-1,-1,-1),no("n2",i,t,Us,1,-1,-1),no("n3",i,t,Us,-1,1,-1),no("n4",i,t,Us,1,1,-1),no("f1",i,t,Us,-1,-1,1),no("f2",i,t,Us,1,-1,1),no("f3",i,t,Us,-1,1,1),no("f4",i,t,Us,1,1,1),no("u1",i,t,Us,.7,1.1,-1),no("u2",i,t,Us,-.7,1.1,-1),no("u3",i,t,Us,0,2,-1),no("cf1",i,t,Us,-1,0,1),no("cf2",i,t,Us,1,0,1),no("cf3",i,t,Us,0,-1,1),no("cf4",i,t,Us,0,1,1),no("cn1",i,t,Us,-1,0,-1),no("cn2",i,t,Us,1,0,-1),no("cn3",i,t,Us,0,-1,-1),no("cn4",i,t,Us,0,1,-1),t.getAttribute("position").needsUpdate=!0}}const Zd=new $o;class $d extends er{constructor(t,i=16776960){const o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new Float32Array(24),f=new k;f.setIndex(new y(o,1)),f.setAttribute("position",new y(l,3)),super(f,new ta({color:i,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Zd.setFromObject(this.object),Zd.isEmpty())return;const i=Zd.min,o=Zd.max,l=this.geometry.attributes.position,f=l.array;f[0]=o.x,f[1]=o.y,f[2]=o.z,f[3]=i.x,f[4]=o.y,f[5]=o.z,f[6]=i.x,f[7]=i.y,f[8]=o.z,f[9]=o.x,f[10]=i.y,f[11]=o.z,f[12]=o.x,f[13]=o.y,f[14]=i.z,f[15]=i.x,f[16]=o.y,f[17]=i.z,f[18]=i.x,f[19]=i.y,f[20]=i.z,f[21]=o.x,f[22]=i.y,f[23]=i.z,l.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return er.prototype.copy.call(this,t),this.object=t.object,this}}class ef extends er{constructor(t,i=16776960){const o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new k;l.setIndex(new y(o,1)),l.setAttribute("position",new P([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(l,new ta({color:i,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class Kp extends zi{constructor(t,i=1,o=16776960){const l=o,f=new k;f.setAttribute("position",new P([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),f.computeBoundingSphere(),super(f,new ta({color:l,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=i;const B=new k;B.setAttribute("position",new P([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),B.computeBoundingSphere(),this.add(new te(B,new yc({color:l,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let i=-this.plane.constant;Math.abs(i)<1e-8&&(i=1e-8),this.scale.set(.5*this.size,.5*this.size,i),this.children[0].material.side=i<0?Js:Os,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const Lg=new Je;let tf,Dg;class aA extends I{constructor(t=new Je(0,0,1),i=new Je(0,0,0),o=1,l=16776960,f=.2*o,B=.2*f){super(),this.type="ArrowHelper",tf===void 0&&((tf=new k).setAttribute("position",new P([0,0,0,0,1,0],3)),(Dg=new Kc(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(i),this.line=new zi(tf,new ta({color:l,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new te(Dg,new yc({color:l,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(o,f,B)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Lg.set(t.z,0,-t.x).normalize();const i=Math.acos(t.y);this.quaternion.setFromAxisAngle(Lg,i)}}setLength(t,i=.2*t,o=.2*i){this.line.scale.set(1,Math.max(1e-4,t-i),1),this.line.updateMatrix(),this.cone.scale.set(o,i,o),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class nf extends er{constructor(t=1){const i=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],o=new k;o.setAttribute("position",new P(i,3)),o.setAttribute("color",new P([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(o,new ta({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const rf=new Float32Array(1),lA=new Int32Array(rf.buffer),cA={toHalfFloat:function(s){rf[0]=s;const t=lA[0];let i=t>>16&32768,o=t>>12&2047;const l=t>>23&255;return l<103?i:l>142?(i|=31744,i|=(l==255?0:1)&&8388607&t):l<113?(o|=2048,i|=(o>>114-l)+(o>>113-l&1)):(i|=l-112<<10|o>>1,i+=1&o)}},Gu=4,bc=8,yl=Math.pow(2,bc),uA=[.125,.215,.35,.446,.526,.582],Pg=bc-Gu+1+uA.length,xl={[lo]:0,[Zs]:1,[Is]:2,[bm]:3,[_m]:4,[wm]:5,[yu]:6},_c=new yc({side:Js,depthWrite:!1,depthTest:!1}),Hh=new te(new Cu,_c),Xp=new Nh,{_lodPlanes:sf,_sizeLods:of,_sigmas:wc}=function(){const s=[],t=[],i=[];let o=bc;for(let l=0;l<Pg;l++){const f=Math.pow(2,o);t.push(f);let B=1/f;l>bc-Gu?B=uA[l-bc+Gu-1]:l==0&&(B=0),i.push(B);const M=1/(f-1),D=-M/2,G=1+M/2,$=[D,D,G,D,G,G,D,D,G,G,D,G],ie=new Float32Array(108),oe=new Float32Array(72),he=new Float32Array(36);for(let we=0;we<6;we++){const be=we%3*2/3-1,ke=we>2?0:-1,Xe=[be,ke,0,be+2/3,ke,0,be+2/3,ke+1,0,be,ke,0,be+2/3,ke+1,0,be,ke+1,0];ie.set(Xe,18*we),oe.set($,12*we);const it=[we,we,we,we,we,we];he.set(it,6*we)}const ye=new k;ye.setAttribute("position",new y(ie,3)),ye.setAttribute("uv",new y(oe,2)),ye.setAttribute("faceIndex",new y(he,1)),s.push(ye),o>Gu&&o--}return{_lodPlanes:s,_sizeLods:t,_sigmas:i}}(),Og=new Fi;let Yp=null;const Kl=(1+Math.sqrt(5))/2,zh=1/Kl,Vh=[new Je(1,1,1),new Je(-1,1,1),new Je(1,1,-1),new Je(-1,1,-1),new Je(0,Kl,zh),new Je(0,Kl,-zh),new Je(zh,0,Kl),new Je(-zh,0,Kl),new Je(Kl,zh,0),new Je(-Kl,zh,0)];class hA{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(i){const o=new Float32Array(i),l=new Je(0,1,0);return new Bu({name:"SphericalGaussianBlur",defines:{n:i},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l},inputEncoding:{value:xl[lo]},outputEncoding:{value:xl[lo]}},vertexShader:`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`,fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ol,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,o=.1,l=100){Yp=this._renderer.getRenderTarget();const f=this._allocateTargets();return this._sceneToCubeUV(t,o,l,f),i>0&&this._blur(f,0,0,i),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=Ff(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=Of(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let t=0;t<sf.length;t++)sf[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Yp),t.scissorTest=!1,oh(t,0,0,t.width,t.height)}_fromTexture(t){Yp=this._renderer.getRenderTarget();const i=this._allocateTargets(t);return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(t){const i={magFilter:mo,minFilter:mo,generateMipmaps:!1,type:xa,format:mh,encoding:function(l){return l!==void 0&&l.type===xa&&(l.encoding===lo||l.encoding===Zs||l.encoding===yu)}(t)?t.encoding:Is,depthBuffer:!1},o=Pf(i);return o.depthBuffer=!t,this._pingPongRenderTarget=Pf(i),o}_compileMaterial(t){const i=new te(sf[0],t);this._renderer.compile(i,Xp)}_sceneToCubeUV(t,i,o,l){const f=new Q(90,1,i,o),B=[1,-1,1,1,1,1],M=[1,1,1,-1,-1,-1],D=this._renderer,G=D.autoClear,$=D.outputEncoding,ie=D.toneMapping;D.getClearColor(Og),D.toneMapping=Wa,D.outputEncoding=lo,D.autoClear=!1;let oe=!1;const he=t.background;if(he){if(he.isColor){_c.color.copy(he).convertSRGBToLinear(),t.background=null;const ye=Df(_c.color);_c.opacity=ye,oe=!0}}else{_c.color.copy(Og).convertSRGBToLinear();const ye=Df(_c.color);_c.opacity=ye,oe=!0}for(let ye=0;ye<6;ye++){const we=ye%3;we==0?(f.up.set(0,B[ye],0),f.lookAt(M[ye],0,0)):we==1?(f.up.set(0,0,B[ye]),f.lookAt(0,M[ye],0)):(f.up.set(0,B[ye],0),f.lookAt(0,0,M[ye])),oh(l,we*yl,ye>2?yl:0,yl,yl),D.setRenderTarget(l),oe&&D.render(Hh,f),D.render(t,f)}D.toneMapping=ie,D.outputEncoding=$,D.autoClear=G}_textureToCubeUV(t,i){const o=this._renderer;t.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=Ff()):this._equirectShader==null&&(this._equirectShader=Of());const l=t.isCubeTexture?this._cubemapShader:this._equirectShader,f=new te(sf[0],l),B=l.uniforms;B.envMap.value=t,t.isCubeTexture||B.texelSize.value.set(1/t.image.width,1/t.image.height),B.inputEncoding.value=xl[t.encoding],B.outputEncoding.value=xl[i.texture.encoding],oh(i,0,0,3*yl,2*yl),o.setRenderTarget(i),o.render(f,Xp)}_applyPMREM(t){const i=this._renderer,o=i.autoClear;i.autoClear=!1;for(let l=1;l<Pg;l++){const f=Math.sqrt(wc[l]*wc[l]-wc[l-1]*wc[l-1]),B=Vh[(l-1)%Vh.length];this._blur(t,l-1,l,f,B)}i.autoClear=o}_blur(t,i,o,l,f){const B=this._pingPongRenderTarget;this._halfBlur(t,B,i,o,l,"latitudinal",f),this._halfBlur(B,t,o,o,l,"longitudinal",f)}_halfBlur(t,i,o,l,f,B,M){const D=this._renderer,G=this._blurMaterial;B!=="latitudinal"&&B!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const $=new te(sf[l],G),ie=G.uniforms,oe=of[o]-1,he=isFinite(f)?Math.PI/(2*oe):2*Math.PI/39,ye=f/he,we=isFinite(f)?1+Math.floor(3*ye):20;we>20&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${we} samples when the maximum is set to 20`);const be=[];let ke=0;for(let it=0;it<20;++it){const lt=it/ye,pt=Math.exp(-lt*lt/2);be.push(pt),it==0?ke+=pt:it<we&&(ke+=2*pt)}for(let it=0;it<be.length;it++)be[it]=be[it]/ke;ie.envMap.value=t.texture,ie.samples.value=we,ie.weights.value=be,ie.latitudinal.value=B==="latitudinal",M&&(ie.poleAxis.value=M),ie.dTheta.value=he,ie.mipInt.value=bc-o,ie.inputEncoding.value=xl[t.texture.encoding],ie.outputEncoding.value=xl[t.texture.encoding];const Xe=of[l];oh(i,3*Math.max(0,yl-2*Xe),(l===0?0:2*yl)+2*Xe*(l>bc-Gu?l-bc+Gu:0),3*Xe,2*Xe),D.setRenderTarget(i),D.render($,Xp)}}Qs.create=function(s,t){return console.log("THREE.Curve.create() has been deprecated"),s.prototype=Object.create(Qs.prototype),s.prototype.constructor=s,s.prototype.getPoint=t,s},Wd.prototype.fromPoints=function(s){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(s)},ca.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Rg.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},qr.prototype.extractUrlBase=function(s){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),mg.extractUrlBase(s)},qr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},kh.prototype.center=function(s){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(s)},kh.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},kh.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)},kh.prototype.size=function(s){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(s)},$o.prototype.center=function(s){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(s)},$o.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},$o.prototype.isIntersectionBox=function(s){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)},$o.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)},$o.prototype.size=function(s){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(s)},ea.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},wd.prototype.setFromMatrix=function(s){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(s)},zp.prototype.center=function(s){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(s)},qi.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},qi.nearestPowerOfTwo=function(s){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),qi.floorPowerOfTwo(s)},qi.nextPowerOfTwo=function(s){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),qi.ceilPowerOfTwo(s)},ls.prototype.flattenToArrayOffset=function(s,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,t)},ls.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)},ls.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},ls.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),s.applyMatrix3(this)},ls.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},ls.prototype.getInverse=function(s){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()},ir.prototype.extractPosition=function(s){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(s)},ir.prototype.flattenToArrayOffset=function(s,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(s,t)},ir.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Je().setFromMatrixColumn(this,3)},ir.prototype.setRotationFromQuaternion=function(s){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(s)},ir.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},ir.prototype.multiplyVector3=function(s){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)},ir.prototype.multiplyVector4=function(s){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)},ir.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},ir.prototype.rotateAxis=function(s){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),s.transformDirection(this)},ir.prototype.crossVector=function(s){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)},ir.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},ir.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},ir.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},ir.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},ir.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},ir.prototype.applyToBufferAttribute=function(s){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),s.applyMatrix4(this)},ir.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},ir.prototype.makeFrustum=function(s,t,i,o,l,f){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(s,t,o,i,l,f)},ir.prototype.getInverse=function(s){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(s).invert()},hl.prototype.isIntersectionLine=function(s){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(s)},Mo.prototype.multiplyVector3=function(s){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),s.applyQuaternion(this)},Mo.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},zl.prototype.isIntersectionBox=function(s){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(s)},zl.prototype.isIntersectionPlane=function(s){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(s)},zl.prototype.isIntersectionSphere=function(s){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(s)},vo.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},vo.prototype.barycoordFromPoint=function(s,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(s,t)},vo.prototype.midpoint=function(s){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(s)},vo.prototypenormal=function(s){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(s)},vo.prototype.plane=function(s){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(s)},vo.barycoordFromPoint=function(s,t,i,o,l){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),vo.getBarycoord(s,t,i,o,l)},vo.normal=function(s,t,i,o){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),vo.getNormal(s,t,i,o)},Yc.prototype.extractAllPoints=function(s){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(s)},Yc.prototype.extrude=function(s){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ml(this,s)},Yc.prototype.makeGeometry=function(s){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Fd(this,s)},Qn.prototype.fromAttribute=function(s,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,t,i)},Qn.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)},Qn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Je.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Je.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Je.prototype.getPositionFromMatrix=function(s){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(s)},Je.prototype.getScaleFromMatrix=function(s){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(s)},Je.prototype.getColumnFromMatrix=function(s,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,s)},Je.prototype.applyProjection=function(s){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(s)},Je.prototype.fromAttribute=function(s,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,t,i)},Je.prototype.distanceToManhattan=function(s){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(s)},Je.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},rs.prototype.fromAttribute=function(s,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(s,t,i)},rs.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},I.prototype.getChildByName=function(s){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(s)},I.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},I.prototype.translate=function(s,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,s)},I.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},I.prototype.applyMatrix=function(s){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)},Object.defineProperties(I.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(s){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=s}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),te.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(te.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Mi.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Qs.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(s){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=s}}),Q.prototype.setLens=function(s,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(s)},Object.defineProperties(vl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(s){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=s}},shadowCameraLeft:{set:function(s){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=s}},shadowCameraRight:{set:function(s){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=s}},shadowCameraTop:{set:function(s){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=s}},shadowCameraBottom:{set:function(s){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=s}},shadowCameraNear:{set:function(s){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=s}},shadowCameraFar:{set:function(s){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=s}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(s){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=s}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(s){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=s}},shadowMapHeight:{set:function(s){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=s}}}),Object.defineProperties(y.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Eu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Eu)}}}),y.prototype.setDynamic=function(s){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?Eu:yh),this},y.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},y.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},k.prototype.addIndex=function(s){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(s)},k.prototype.addAttribute=function(s,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?s==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(s,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(s,new y(arguments[1],arguments[2])))},k.prototype.addDrawCall=function(s,t,i){i!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(s,t)},k.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},k.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},k.prototype.removeAttribute=function(s){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(s)},k.prototype.applyMatrix=function(s){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(s)},Object.defineProperties(k.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Ba.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(s){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=s}}}),Object.defineProperties(rh.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(s){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=s}}}),Object.defineProperties(ei.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Eu},set:function(s){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(s)}}}),ei.prototype.setDynamic=function(s){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(s===!0?Eu:yh),this},ei.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ml.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ml.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ml.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},pp.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Wl.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(u.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Fi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(s){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=s===1}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(s){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=s}}}),Object.defineProperties(ur.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(s){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=s}}}),Object.defineProperties(V.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(s){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=s}}}),Xn.prototype.clearTarget=function(s,t,i,o){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(s),this.clear(t,i,o)},Xn.prototype.animate=function(s){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(s)},Xn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Xn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Xn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Xn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Xn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Xn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Xn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Xn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Xn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Xn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Xn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Xn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Xn.prototype.enableScissorTest=function(s){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(s)},Xn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Xn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Xn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Xn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Xn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Xn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Xn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Xn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Xn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Xn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Xn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=s}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=s}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(s){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=s===!0?Zs:lo}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(ut.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(aa.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=s}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=s}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=s}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=s}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(s){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=s}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(s){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=s}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(s){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=s}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(s){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=s}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(s){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=s}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(s){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=s}}}),xg.prototype.load=function(s){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new yg().load(s,function(i){t.setBuffer(i)}),this},tA.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},cp.prototype.updateCubeMap=function(s,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(s,t)},cp.prototype.clear=function(s,t,i,o){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(s,t,i,o)},kc.crossOrigin=void 0,kc.loadTexture=function(s,t,i,o){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const l=new Va;l.setCrossOrigin(this.crossOrigin);const f=l.load(s,i,void 0,o);return t&&(f.mapping=t),f},kc.loadTextureCube=function(s,t,i,o){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const l=new O0;l.setCrossOrigin(this.crossOrigin);const f=l.load(s,i,void 0,o);return t&&(f.mapping=t),f},kc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},kc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const ga={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"127"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="127"),d.ACESFilmicToneMapping=ic,d.AddEquation=tc,d.AddOperation=ya,d.AdditiveAnimationBlendMode=2501,d.AdditiveBlending=ad,d.AlphaFormat=Oc,d.AlwaysDepth=zf,d.AlwaysStencilFunc=Yi,d.AmbientLight=fg,d.AmbientLightProbe=q0,d.AnimationClip=Vd,d.AnimationLoader=Nv,d.AnimationMixer=wg,d.AnimationObjectGroup=rA,d.AnimationUtils=Ks,d.ArcCurve=tg,d.ArrayCamera=Vm,d.ArrowHelper=aA,d.Audio=xg,d.AudioAnalyser=tA,d.AudioContext=vg,d.AudioListener=Hv,d.AudioLoader=yg,d.AxesHelper=nf,d.AxisHelper=function(s){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new nf(s)},d.BackSide=Js,d.BasicDepthPacking=3200,d.BasicShadowMap=0,d.BinaryTextureLoader=function(s){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new bo(s)},d.Bone=Ti,d.BooleanKeyframeTrack=Lu,d.BoundingBoxHelper=function(s,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new $d(s,t)},d.Box2=kh,d.Box3=$o,d.Box3Helper=ef,d.BoxBufferGeometry=Cu,d.BoxGeometry=Cu,d.BoxHelper=$d,d.BufferAttribute=y,d.BufferGeometry=k,d.BufferGeometryLoader=W0,d.ByteType=Ka,d.Cache=Pu,d.Camera=q,d.CameraHelper=Jd,d.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},d.CanvasTexture=Wc,d.CatmullRomCurve3=sg,d.CineonToneMapping=Si,d.CircleBufferGeometry=Dd,d.CircleGeometry=Dd,d.ClampToEdgeWrapping=Yo,d.Clock=$0,d.Color=Fi,d.ColorKeyframeTrack=eg,d.CompressedTexture=xp,d.CompressedTextureLoader=Ls,d.ConeBufferGeometry=Ql,d.ConeGeometry=Ql,d.CubeCamera=cp,d.CubeReflectionMapping=Da,d.CubeRefractionMapping=rc,d.CubeTexture=Rh,d.CubeTextureLoader=O0,d.CubeUVReflectionMapping=Zr,d.CubeUVRefractionMapping=No,d.CubicBezierCurve=Op,d.CubicBezierCurve3=og,d.CubicInterpolant=us,d.CullFaceBack=_o,d.CullFaceFront=od,d.CullFaceFrontBack=3,d.CullFaceNone=ia,d.Curve=Qs,d.CurvePath=N0,d.CustomBlending=Nf,d.CustomToneMapping=dh,d.CylinderBufferGeometry=Kc,d.CylinderGeometry=Kc,d.Cylindrical=sA,d.DataTexture=Bh,d.DataTexture2DArray=Gm,d.DataTexture3D=Hm,d.DataTextureLoader=bo,d.DataUtils=cA,d.DecrementStencilOp=7683,d.DecrementWrapStencilOp=34056,d.DefaultLoadingManager=P0,d.DepthFormat=qo,d.DepthStencilFormat=sa,d.DepthTexture=Ep,d.DirectionalLight=dg,d.DirectionalLightHelper=Gh,d.DiscreteInterpolant=Ar,d.DodecahedronBufferGeometry=Pd,d.DodecahedronGeometry=Pd,d.DoubleSide=fu,d.DstAlphaFactor=Ss,d.DstColorFactor=On,d.DynamicBufferAttribute=function(s,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new y(s,t).setUsage(Eu)},d.DynamicCopyUsage=35050,d.DynamicDrawUsage=Eu,d.DynamicReadUsage=35049,d.EdgesGeometry=$m,d.EdgesHelper=function(s,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new er(new $m(s.geometry),new ta({color:t!==void 0?t:16777215}))},d.EllipseCurve=Qd,d.EqualDepth=Ol,d.EqualStencilFunc=514,d.EquirectangularReflectionMapping=fh,d.EquirectangularRefractionMapping=js,d.Euler=wu,d.EventDispatcher=U,d.ExtrudeBufferGeometry=ml,d.ExtrudeGeometry=ml,d.FaceColors=1,d.FileLoader=Ps,d.FlatShading=1,d.Float16BufferAttribute=L,d.Float32Attribute=function(s,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new P(s,t)},d.Float32BufferAttribute=P,d.Float64Attribute=function(s,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Y(s,t)},d.Float64BufferAttribute=Y,d.FloatType=ra,d.Fog=Td,d.FogExp2=Md,d.Font=Ag,d.FontLoader=kv,d.FrontSide=Os,d.Frustum=wd,d.GLBufferAttribute=rd,d.GLSL1="100",d.GLSL3=wa,d.GammaEncoding=yu,d.GreaterDepth=uh,d.GreaterEqualDepth=mu,d.GreaterEqualStencilFunc=518,d.GreaterStencilFunc=516,d.GridHelper=ca,d.Group=Mu,d.HalfFloatType=Ea,d.HemisphereLight=cg,d.HemisphereLightHelper=jp,d.HemisphereLightProbe=Y0,d.IcosahedronBufferGeometry=wp,d.IcosahedronGeometry=wp,d.ImageBitmapLoader=rl,d.ImageLoader=Dp,d.ImageUtils=kc,d.ImmediateRenderObject=sh,d.IncrementStencilOp=7682,d.IncrementWrapStencilOp=34055,d.InstancedBufferAttribute=Qa,d.InstancedBufferGeometry=Ba,d.InstancedInterleavedBuffer=id,d.InstancedMesh=Wr,d.Int16Attribute=function(s,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new w(s,t)},d.Int16BufferAttribute=w,d.Int32Attribute=function(s,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new O(s,t)},d.Int32BufferAttribute=O,d.Int8Attribute=function(s,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new E(s,t)},d.Int8BufferAttribute=E,d.IntType=ac,d.InterleavedBuffer=ei,d.InterleavedBufferAttribute=pn,d.Interpolant=Vi,d.InterpolateDiscrete=2300,d.InterpolateLinear=2301,d.InterpolateSmooth=2302,d.InvertStencilOp=5386,d.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},d.KeepStencilOp=Yf,d.KeyframeTrack=gl,d.LOD=Cv,d.LatheBufferGeometry=Cp,d.LatheGeometry=Cp,d.Layers=Sm,d.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},d.LessDepth=nc,d.LessEqualDepth=Pl,d.LessEqualStencilFunc=515,d.LessStencilFunc=513,d.Light=vl,d.LightProbe=Kd,d.Line=zi,d.Line3=zp,d.LineBasicMaterial=ta,d.LineCurve=jd,d.LineCurve3=F0,d.LineDashedMaterial=Ph,d.LineLoop=Jm,d.LinePieces=1,d.LineSegments=er,d.LineStrip=0,d.LinearEncoding=lo,d.LinearFilter=nt,d.LinearInterpolant=Yr,d.LinearMipMapLinearFilter=1008,d.LinearMipMapNearestFilter=1007,d.LinearMipmapLinearFilter=sc,d.LinearMipmapNearestFilter=Au,d.LinearToneMapping=hh,d.Loader=qr,d.LoaderUtils=mg,d.LoadingManager=Vs,d.LogLuvEncoding=u0,d.LoopOnce=2200,d.LoopPingPong=2202,d.LoopRepeat=2201,d.LuminanceAlphaFormat=cl,d.LuminanceFormat=md,d.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},d.Material=u,d.MaterialLoader=j0,d.Math=qi,d.MathUtils=qi,d.Matrix3=ls,d.Matrix4=ir,d.MaxEquation=hd,d.Mesh=te,d.MeshBasicMaterial=yc,d.MeshDepthMaterial=dp,d.MeshDistanceMaterial=fp,d.MeshFaceMaterial=function(s){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),s},d.MeshLambertMaterial=yo,d.MeshMatcapMaterial=xo,d.MeshNormalMaterial=Xc,d.MeshPhongMaterial=Bp,d.MeshPhysicalMaterial=ur,d.MeshStandardMaterial=fr,d.MeshToonMaterial=Lp,d.MinEquation=ud,d.MirroredRepeatWrapping=Fl,d.MixOperation=so,d.MultiMaterial=function(s=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),s.isMultiMaterial=!0,s.materials=s,s.clone=function(){return s.slice()},s},d.MultiplyBlending=cd,d.MultiplyOperation=Pc,d.NearestFilter=mo,d.NearestMipMapLinearFilter=1005,d.NearestMipMapNearestFilter=1004,d.NearestMipmapLinearFilter=Co,d.NearestMipmapNearestFilter=ph,d.NeverDepth=pd,d.NeverStencilFunc=512,d.NoBlending=ol,d.NoColors=0,d.NoToneMapping=Wa,d.NormalAnimationBlendMode=2500,d.NormalBlending=ja,d.NotEqualDepth=Io,d.NotEqualStencilFunc=517,d.NumberKeyframeTrack=Hd,d.Object3D=I,d.ObjectLoader=Xd,d.ObjectSpaceNormalMap=Xf,d.OctahedronBufferGeometry=Od,d.OctahedronGeometry=Od,d.OneFactor=lh,d.OneMinusDstAlphaFactor=Hf,d.OneMinusDstColorFactor=Fo,d.OneMinusSrcAlphaFactor=La,d.OneMinusSrcColorFactor=pu,d.OrthographicCamera=Nh,d.PCFShadowMap=sl,d.PCFSoftShadowMap=Dc,d.PMREMGenerator=hA,d.ParametricBufferGeometry=Xi,d.ParametricGeometry=Xi,d.Particle=function(s){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Km(s)},d.ParticleBasicMaterial=function(s){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Tu(s)},d.ParticleSystem=function(s,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Nr(s,t)},d.ParticleSystemMaterial=function(s){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Tu(s)},d.Path=Wd,d.PerspectiveCamera=Q,d.Plane=hl,d.PlaneBufferGeometry=Cd,d.PlaneGeometry=Cd,d.PlaneHelper=Kp,d.PointCloud=function(s,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Nr(s,t)},d.PointCloudMaterial=function(s){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Tu(s)},d.PointLight=Fh,d.PointLightHelper=oA,d.Points=Nr,d.PointsMaterial=Tu,d.PolarGridHelper=Uu,d.PolyhedronBufferGeometry=Ga,d.PolyhedronGeometry=Ga,d.PositionalAudio=Vv,d.PropertyBinding=Oo,d.PropertyMixer=nA,d.QuadraticBezierCurve=Fp,d.QuadraticBezierCurve3=ag,d.Quaternion=Mo,d.QuaternionKeyframeTrack=Oh,d.QuaternionLinearInterpolant=Ts,d.REVISION="127",d.RGBADepthPacking=Kf,d.RGBAFormat=ko,d.RGBAIntegerFormat=as,d.RGBA_ASTC_10x10_Format=vh,d.RGBA_ASTC_10x5_Format=gd,d.RGBA_ASTC_10x6_Format=Ad,d.RGBA_ASTC_10x8_Format=Ah,d.RGBA_ASTC_12x10_Format=vd,d.RGBA_ASTC_12x12_Format=Vf,d.RGBA_ASTC_4x4_Format=Ho,d.RGBA_ASTC_5x4_Format=ps,d.RGBA_ASTC_5x5_Format=ks,d.RGBA_ASTC_6x5_Format=Kr,d.RGBA_ASTC_6x6_Format=ms,d.RGBA_ASTC_8x5_Format=ao,d.RGBA_ASTC_8x6_Format=Ya,d.RGBA_ASTC_8x8_Format=Ul,d.RGBA_BPTC_Format=yd,d.RGBA_ETC2_EAC_Format=uc,d.RGBA_PVRTC_2BPPV1_Format=Go,d.RGBA_PVRTC_4BPPV1_Format=Uo,d.RGBA_S3TC_DXT1_Format=Gi,d.RGBA_S3TC_DXT3_Format=oa,d.RGBA_S3TC_DXT5_Format=Vr,d.RGBDEncoding=wm,d.RGBEEncoding=Is,d.RGBEFormat=mh,d.RGBFormat=xs,d.RGBIntegerFormat=oo,d.RGBM16Encoding=_m,d.RGBM7Encoding=bm,d.RGB_ETC1_Format=Er,d.RGB_ETC2_Format=Pa,d.RGB_PVRTC_2BPPV1_Format=cc,d.RGB_PVRTC_4BPPV1_Format=Fc,d.RGB_S3TC_DXT1_Format=Jo,d.RGFormat=mr,d.RGIntegerFormat=$r,d.RawShaderMaterial=Bu,d.Ray=zl,d.Raycaster=rh,d.RectAreaLight=Up,d.RedFormat=gh,d.RedIntegerFormat=Ci,d.ReinhardToneMapping=gu,d.RepeatWrapping=al,d.ReplaceStencilOp=7681,d.ReverseSubtractEquation=Uf,d.RingBufferGeometry=Mp,d.RingGeometry=Mp,d.SRGB8_ALPHA8_ASTC_10x10_Format=Fa,d.SRGB8_ALPHA8_ASTC_10x5_Format=Qf,d.SRGB8_ALPHA8_ASTC_10x6_Format=jf,d.SRGB8_ALPHA8_ASTC_10x8_Format=Wf,d.SRGB8_ALPHA8_ASTC_12x10_Format=c0,d.SRGB8_ALPHA8_ASTC_12x12_Format=Zo,d.SRGB8_ALPHA8_ASTC_4x4_Format=hs,d.SRGB8_ALPHA8_ASTC_5x4_Format=ba,d.SRGB8_ALPHA8_ASTC_5x5_Format=io,d.SRGB8_ALPHA8_ASTC_6x5_Format=_a,d.SRGB8_ALPHA8_ASTC_6x6_Format=Oa,d.SRGB8_ALPHA8_ASTC_8x5_Format=Gl,d.SRGB8_ALPHA8_ASTC_8x6_Format=vu,d.SRGB8_ALPHA8_ASTC_8x8_Format=Em,d.Scene=pp,d.SceneUtils=ga,d.ShaderChunk=es,d.ShaderLib=pl,d.ShaderMaterial=V,d.ShadowMaterial=Rp,d.Shape=Yc,d.ShapeBufferGeometry=Fd,d.ShapeGeometry=Fd,d.ShapePath=Gp,d.ShapeUtils=jl,d.ShortType=Nl,d.Skeleton=Ym,d.SkeletonHelper=Rg,d.SkinnedMesh=Mi,d.SmoothShading=2,d.Sphere=ea,d.SphereBufferGeometry=Nd,d.SphereGeometry=Nd,d.Spherical=Cg,d.SphericalHarmonics3=pg,d.SplineCurve=Np,d.SpotLight=hg,d.SpotLightHelper=qv,d.Sprite=Km,d.SpriteMaterial=Qm,d.SrcAlphaFactor=fd,d.SrcAlphaSaturateFactor=ch,d.SrcColorFactor=dd,d.StaticCopyUsage=35046,d.StaticDrawUsage=yh,d.StaticReadUsage=35045,d.StereoCamera=Uv,d.StreamCopyUsage=35042,d.StreamDrawUsage=35040,d.StreamReadUsage=35041,d.StringKeyframeTrack=Du,d.SubtractEquation=kf,d.SubtractiveBlending=ld,d.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},d.TangentSpaceNormalMap=xu,d.TetrahedronBufferGeometry=Tp,d.TetrahedronGeometry=Tp,d.TextBufferGeometry=Sp,d.TextGeometry=Sp,d.Texture=go,d.TextureLoader=Va,d.TorusBufferGeometry=kd,d.TorusGeometry=kd,d.TorusKnotBufferGeometry=Ud,d.TorusKnotGeometry=Ud,d.Triangle=vo,d.TriangleFanDrawMode=2,d.TriangleStripDrawMode=1,d.TrianglesDrawMode=0,d.TubeBufferGeometry=Gd,d.TubeGeometry=Gd,d.UVMapping=300,d.Uint16Attribute=function(s,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new _(s,t)},d.Uint16BufferAttribute=_,d.Uint32Attribute=function(s,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new R(s,t)},d.Uint32BufferAttribute=R,d.Uint8Attribute=function(s,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new b(s,t)},d.Uint8BufferAttribute=b,d.Uint8ClampedAttribute=function(s,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new m(s,t)},d.Uint8ClampedBufferAttribute=m,d.Uniform=Wl,d.UniformsLib=Ei,d.UniformsUtils=E0,d.UnsignedByteType=xa,d.UnsignedInt248Type=ma,d.UnsignedIntType=Xa,d.UnsignedShort4444Type=ll,d.UnsignedShort5551Type=kl,d.UnsignedShort565Type=lc,d.UnsignedShortType=oc,d.VSMShadowMap=wo,d.Vector2=Qn,d.Vector3=Je,d.Vector4=rs,d.VectorKeyframeTrack=zd,d.Vertex=function(s,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Je(s,t,i)},d.VertexColors=2,d.VideoTexture=Iu,d.WebGL1Renderer=I0,d.WebGLCubeRenderTarget=up,d.WebGLMultisampleRenderTarget=hc,d.WebGLRenderTarget=aa,d.WebGLRenderTargetCube=function(s,t,i){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new up(s,i)},d.WebGLRenderer=Xn,d.WebGLUtils=nn,d.WireframeGeometry=Ip,d.WireframeHelper=function(s,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new er(new Ip(s.geometry),new ta({color:t!==void 0?t:16777215}))},d.WrapAroundEnding=2402,d.XHRLoader=function(s){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ps(s)},d.ZeroCurvatureEnding=2400,d.ZeroFactor=Gf,d.ZeroSlopeEnding=2401,d.ZeroStencilOp=0,d.sRGBEncoding=Zs,Object.defineProperty(d,"__esModule",{value:!0})})},{}],12:[function(h,S,W){S.exports=AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(d){var U=this.el;this.active&&this.checkpoint!==d&&(this.checkpoint&&U.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=d,this.sync(),this.position.distanceTo(this.targetPosition)<.1?this.checkpoint=null:(U.emit("navigation-start",{checkpoint:d}),this.data.mode==="teleport"&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,U.emit("navigation-end",{checkpoint:d}),U.components["movement-controls"].updateNavLocation())))},isVelocityActive:function(){return!(!this.active||!this.checkpoint)},getVelocity:function(){if(this.active){var d=this.data,U=this.offset,K=this.position,T=this.targetPosition,I=this.checkpoint;return this.sync(),K.distanceTo(T)<.1?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:I}),U.set(0,0,0)):(U.setLength(d.animateSpeed),U)}},sync:function(){var d=this.offset,U=this.position,K=this.targetPosition;U.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(K),K.add(this.checkpoint.components.checkpoint.getOffset()),d.copy(K).sub(U)}})},{}],13:[function(h,S,W){var d=h("../../lib/GamepadButton"),U=h("../../lib/GamepadButtonEvent"),K={LEFT:"left",RIGHT:"right"},T={MOVEMENT:1,ROTATION:2};S.exports=AFRAME.registerComponent("gamepad-controls",{GamepadButton:d,schema:{enabled:{default:!0},rotationSensitivity:{default:2}},init:function(){var I=this.el.sceneEl;this.system=I.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};var u=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=u.x,this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=u.y,this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,I.addBehavior(this)},update:function(){this.tick()},tick:function(I,u){this.updateButtonState(),this.updateRotation(u)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;var I=this._dpadVector,u=this._moveVector;this.getDpad(I),this.getJoystick(T.MOVEMENT,u);var g=I.x||u.x,C=I.y||u.y;return Math.abs(g)>.2||Math.abs(C)>.2},getVelocityDelta:function(){var I=this._dpadVector,u=this._moveVector;this.getDpad(I),this.getJoystick(T.MOVEMENT,u);var g=I.x||u.x,C=I.y||u.y,v=new THREE.Vector3;return Math.abs(g)>.2&&(v.x+=g),Math.abs(C)>.2&&(v.z+=C),v},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;var I=this._lookVector;return this.getJoystick(T.ROTATION,I),Math.abs(I.x)>.2||Math.abs(I.y)>.2},updateRotation:function(I){if(this.isRotationActive()){var u=this.data,g=this.yaw,C=this.pitch;g.rotation.y=this.el.object3D.rotation.y,C.rotation.x=this.el.object3D.rotation.x;var v=this._lookVector;this.getJoystick(T.ROTATION,v),Math.abs(v.x)<=.2&&(v.x=0),Math.abs(v.y)<=.2&&(v.y=0),v.multiplyScalar(u.rotationSensitivity*I/1e3),g.rotation.y-=v.x,C.rotation.x-=v.y,C.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,C.rotation.x)),this.el.object3D.rotation.set(C.rotation.x,g.rotation.y,0)}},updateButtonState:function(){var I=this.getGamepad(K.RIGHT);if(this.data.enabled&&I)for(var u=0;u<I.buttons.length;u++)I.buttons[u].pressed&&!this.buttons[u]?this.emit(new U("gamepadbuttondown",u,I.buttons[u])):!I.buttons[u].pressed&&this.buttons[u]&&this.emit(new U("gamepadbuttonup",u,I.buttons[u])),this.buttons[u]=I.buttons[u].pressed;else Object.keys(this.buttons)&&(this.buttons={})},emit:function(I){this.el.emit(I.type,I),this.el.emit(I.type+":"+I.index,new U(I.type,I.index,I))},getGamepad:function(){var I=[],u=[];return function(g){var C=this.el.sceneEl.components["proxy-controls"],v=C&&C.isConnected()&&C.getGamepad(0);if(v)return v;I.length=0;for(var y=0;y<this.system.controllers.length;y++){var E=this.system.controllers[y],b=E?E.gamepad:null;if(I.push(b),b&&E.handedness===g)return b}for(var m=navigator.getGamepads?navigator.getGamepads():u,w=0;w<m.length;w++){var _=m[w];if(_&&_.hand===g)return _}return I[0]||m[0]}}(),getButton:function(I){return this.getGamepad(K.RIGHT).buttons[I]},getAxis:function(I){return this.getGamepad(I>1?K.RIGHT:K.LEFT).axes[I]},getJoystick:function(I,u){var g=this.getGamepad(I===T.MOVEMENT?K.LEFT:K.RIGHT);if(!g)return u.set(0,0);if(g.mapping==="xr-standard")switch(I){case T.MOVEMENT:return u.set(g.axes[2],g.axes[3]);case T.ROTATION:return u.set(g.axes[2],0)}else switch(I){case T.MOVEMENT:return u.set(g.axes[0],g.axes[1]);case T.ROTATION:return u.set(g.axes[2],g.axes[3])}throw new Error('Unexpected joystick index "%d".',I)},getDpad:function(I){var u=this.getGamepad(K.LEFT);return u&&u.buttons[d.DPAD_RIGHT]?I.set((u.buttons[d.DPAD_RIGHT].pressed?1:0)+(u.buttons[d.DPAD_LEFT].pressed?-1:0),(u.buttons[d.DPAD_UP].pressed?-1:0)+(u.buttons[d.DPAD_DOWN].pressed?1:0)):I.set(0,0)},isConnected:function(){var I=this.getGamepad(K.LEFT);return!(!I||!I.connected)},getID:function(){return this.getGamepad(K.LEFT).id}})},{"../../lib/GamepadButton":5,"../../lib/GamepadButtonEvent":6}],14:[function(h,S,W){h("./checkpoint-controls"),h("./gamepad-controls"),h("./keyboard-controls"),h("./touch-controls"),h("./movement-controls"),h("./trackpad-controls"),h("./nipple-controls")},{"./checkpoint-controls":12,"./gamepad-controls":13,"./keyboard-controls":15,"./movement-controls":16,"./nipple-controls":17,"./touch-controls":18,"./trackpad-controls":19}],15:[function(h,S,W){h("../../lib/keyboard.polyfill");var d=window.KeyboardEvent;S.exports=AFRAME.registerComponent("keyboard-controls",{schema:{enabled:{default:!0},debug:{default:!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this),onContextMenu:this.onContextMenu.bind(this)}},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){var U=this.data,K=this.getKeys();return this.dVelocity.set(0,0,0),U.enabled&&((K.KeyW||K.ArrowUp)&&(this.dVelocity.z-=1),(K.KeyA||K.ArrowLeft)&&(this.dVelocity.x-=1),(K.KeyS||K.ArrowDown)&&(this.dVelocity.z+=1),(K.KeyD||K.ArrowRight)&&(this.dVelocity.x+=1)),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},attachEventListeners:function(){window.addEventListener("contextmenu",this.listeners.onContextMenu,!1),window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},onContextMenu:function(){for(var U in this.localKeys)this.localKeys.hasOwnProperty(U)&&delete this.localKeys[U]},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(U){AFRAME.utils.shouldCaptureKeyEvent(U)&&(this.localKeys[U.code]=!0,this.emit(U))},onKeyUp:function(U){AFRAME.utils.shouldCaptureKeyEvent(U)&&(delete this.localKeys[U.code],this.emit(U))},onBlur:function(){for(var U in this.localKeys)this.localKeys.hasOwnProperty(U)&&delete this.localKeys[U]},emit:function(U){"__keyboard-controls-proxy"in U&&this.el.emit(U.type,U),this.el.emit(U.type+":"+U.code,new d(U.type,U)),this.data.debug&&console.log(U.type+":"+U.code)},isPressed:function(U){return U in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){var U=this.el.sceneEl.components["proxy-controls"];return U&&U.isConnected()}})},{"../../lib/keyboard.polyfill":8}],16:[function(h,S,W){S.exports=AFRAME.registerComponent("movement-controls",{dependencies:["rotation"],schema:{enabled:{default:!0},controls:{default:["gamepad","trackpad","keyboard","touch"]},speed:{default:.3,min:0},fly:{default:!1},constrainToNavMesh:{default:!1},camera:{default:"[movement-controls] [camera]",type:"selector"}},init:function(){var d=this.el;this.data.camera||(this.data.camera=d.querySelector("[camera]")),this.velocityCtrl=null,this.velocity=new THREE.Vector3,this.heading=new THREE.Quaternion,this.navGroup=null,this.navNode=null,d.sceneEl.hasLoaded?this.injectControls():d.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(d){var U=this.el,K=this.data,T=U.sceneEl.systems.nav;if(U.sceneEl.hasLoaded&&this.injectControls(),T&&K.constrainToNavMesh!==d.constrainToNavMesh&&(K.constrainToNavMesh?T.addAgent(this):T.removeAgent(this)),K.enabled!==d.enabled)for(var I=0;I<K.controls.length;I++){var u=K.controls[I]+"-controls";this.el.setAttribute(u,{enabled:this.data.enabled})}},injectControls:function(){for(var d=this.data,U=0;U<d.controls.length;U++){var K=d.controls[U]+"-controls";this.el.setAttribute(K,{enabled:this.data.enabled})}},updateNavLocation:function(){this.navGroup=null,this.navNode=null},tick:function(){var d=new THREE.Vector3,U=new THREE.Vector3,K=new THREE.Vector3;return function(T,I){if(I){var u=this.el,g=this.data;if(g.enabled){this.updateVelocityCtrl();var C=this.velocityCtrl,v=this.velocity;if(C)if(I/1e3>.2?v.set(0,0,0):this.updateVelocity(I),g.constrainToNavMesh&&C.isNavMeshConstrained!==!1){if(v.lengthSq()<1e-5)return;d.copy(u.object3D.position),U.copy(v).multiplyScalar(I/1e3).add(d);var y=u.sceneEl.systems.nav;this.navGroup=this.navGroup===null?y.getGroup(d):this.navGroup,this.navNode=this.navNode||y.getNode(d,this.navGroup),this.navNode=y.clampStep(d,U,this.navGroup,this.navNode,K),u.object3D.position.copy(K)}else u.hasAttribute("velocity")?u.setAttribute("velocity",v):(u.object3D.position.x+=v.x*I/1e3,u.object3D.position.y+=v.y*I/1e3,u.object3D.position.z+=v.z*I/1e3)}}}}(),updateVelocityCtrl:function(){var d=this.data;if(d.enabled){for(var U=0,K=d.controls.length;U<K;U++){var T=this.el.components[d.controls[U]+"-controls"];if(T&&T.isVelocityActive())return void(this.velocityCtrl=T)}this.velocityCtrl=null}},updateVelocity:function(){var d=new THREE.Vector2,U=new THREE.Quaternion;return function(K){var T=void 0,I=this.el,u=this.velocityCtrl,g=this.velocity,C=this.data;if(u){if(!u.getVelocityDelta){if(u.getVelocity)return void g.copy(u.getVelocity());if(u.getPositionDelta)return void g.copy(u.getPositionDelta(K).multiplyScalar(1e3/K));throw new Error("Incompatible movement controls: ",u)}T=u.getVelocityDelta(K)}if(I.hasAttribute("velocity")&&!C.constrainToNavMesh&&g.copy(this.el.getAttribute("velocity")),T&&C.enabled){var v=C.camera;U.copy(v.object3D.quaternion),U.premultiply(I.object3D.quaternion),T.applyQuaternion(U);var y=T.length();C.fly?(g.copy(T),g.multiplyScalar(16.66667*this.data.speed)):(d.set(T.x,T.z),d.setLength(y*this.data.speed*16.66667),g.x=d.x,g.y=0,g.z=d.y)}}}()})},{}],17:[function(h,S,W){var d=function(U){return U&&U.__esModule?U:{default:U}}(h("nipplejs"));AFRAME.registerComponent("nipple-controls",{schema:{enabled:{default:!0},mode:{default:"dynamic",oneOf:["static","semi","dynamic"]},rotationSensitivity:{default:1},moveJoystickEnabled:{default:!0},lookJoystickEnabled:{default:!0},sideMargin:{default:"30px"},bottomMargin:{default:"70px"},moveJoystickPosition:{default:"left",oneOf:["left","right"]},lookJoystickPosition:{default:"right",oneOf:["left","right"]}},init:function(){this.dVelocity=new THREE.Vector3,this.lookVector=new THREE.Vector2;var U=this.el.querySelector("[look-controls]").components["look-controls"];this.pitchObject=U.pitchObject,this.yawObject=U.yawObject,this.rigRotation=this.el.object3D.rotation,this.moveData=void 0,this.lookData=void 0,this.moving=!1,this.rotating=!1},update:function(U){this.data.moveJoystickPosition===U.moveJoystickPosition&&this.data.sideMargin===U.sideMargin&&this.data.bottomMargin===U.bottomMargin&&this.data.mode===U.mode||this.removeMoveJoystick(),this.data.lookJoystickPosition===U.lookJoystickPosition&&this.data.sideMargin===U.sideMargin&&this.data.bottomMargin===U.bottomMargin&&this.data.mode===U.mode||this.removeLookJoystick(),this.data.enabled&&this.data.moveJoystickEnabled?this.createMoveJoystick():this.removeMoveJoystick(),this.data.enabled&&this.data.lookJoystickEnabled?this.createLookJoystick():this.removeLookJoystick()},pause:function(){this.moving=!1,this.rotating=!1},remove:function(){this.removeMoveJoystick(),this.removeLookJoystick()},isVelocityActive:function(){return this.data.enabled&&this.moving},getVelocityDelta:function(){if(this.dVelocity.set(0,0,0),this.isVelocityActive()){var U=this.moveData.force<1?this.moveData.force:1,K=this.moveData.angle.radian,T=Math.cos(K)*U,I=-Math.sin(K)*U;this.dVelocity.set(T,0,I)}return this.dVelocity},isRotationActive:function(){return this.data.enabled&&this.rotating},updateRotation:function(U){if(this.isRotationActive()){var K=this.lookData.force<1?this.lookData.force:1,T=this.lookData.angle.radian,I=this.lookVector;I.x=Math.cos(T)*K,I.y=Math.sin(T)*K,I.multiplyScalar(this.data.rotationSensitivity*U/1e3),this.yawObject.rotation.y-=I.x;var u=this.pitchObject.rotation.x+I.y;u=Math.max(-Math.PI/2,Math.min(Math.PI/2,u)),this.pitchObject.rotation.x=u}},tick:function(U,K){this.updateRotation(K)},initLeftZone:function(){var U=document.createElement("div");U.setAttribute("id","joystickLeftZone"),U.setAttribute("style","position:absolute;"+this.data.moveJoystickPosition+":"+this.data.sideMargin+";bottom:"+this.data.bottomMargin+";z-index:1"),document.body.appendChild(U),this.leftZone=U},initRightZone:function(){var U=document.createElement("div");U.setAttribute("id","joystickRightZone"),U.setAttribute("style","position:absolute;"+this.data.lookJoystickPosition+":"+this.data.sideMargin+";bottom:"+this.data.bottomMargin+";z-index:1"),document.body.appendChild(U),this.rightZone=U},createMoveJoystick:function(){var U=this;if(!this.moveJoystick){this.initLeftZone();var K={mode:this.data.mode,zone:this.leftZone,color:"white",fadeTime:0};this.leftZone.style.width="100px",this.data.mode==="static"?(this.leftZone.style.height="100px",K.position={left:"50%",bottom:"50%"}):this.leftZone.style.height="400px",this.moveJoystick=d.default.create(K),this.moveJoystick.on("move",function(T,I){U.moveData=I,U.moving=!0}),this.moveJoystick.on("end",function(T,I){U.moving=!1})}},createLookJoystick:function(){var U=this;if(!this.lookJoystick){this.initRightZone();var K={mode:this.data.mode,zone:this.rightZone,color:"white",fadeTime:0};this.rightZone.style.width="100px",this.data.mode==="static"?(this.rightZone.style.height="100px",K.position={left:"50%",bottom:"50%"}):this.rightZone.style.height="400px",this.lookJoystick=d.default.create(K),this.lookJoystick.on("move",function(T,I){U.lookData=I,U.rotating=!0}),this.lookJoystick.on("end",function(T,I){U.rotating=!1})}},removeMoveJoystick:function(){this.moveJoystick&&(this.moveJoystick.destroy(),this.moveJoystick=void 0),this.moveData=void 0,this.leftZone&&this.leftZone.parentNode&&(this.leftZone.remove(),this.leftZone=void 0)},removeLookJoystick:function(){this.lookJoystick&&(this.lookJoystick.destroy(),this.lookJoystick=void 0),this.lookData=void 0,this.rightZone&&this.rightZone.parentNode&&(this.rightZone.remove(),this.rightZone=void 0)}})},{nipplejs:9}],18:[function(h,S,W){S.exports=AFRAME.registerComponent("touch-controls",{schema:{enabled:{default:!0},reverseEnabled:{default:!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods(),this.direction=0},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){var d=this.el.sceneEl,U=d.canvas;if(U){U.addEventListener("touchstart",this.onTouchStart),U.addEventListener("touchend",this.onTouchEnd);var K=d.getAttribute("vr-mode-ui");K&&K.cardboardModeEnabled&&d.addEventListener("enter-vr",this.onEnterVR)}else d.addEventListener("render-target-loaded",this.addEventListeners.bind(this))},removeEventListeners:function(){var d=this.el.sceneEl&&this.el.sceneEl.canvas;d&&(d.removeEventListener("touchstart",this.onTouchStart),d.removeEventListener("touchend",this.onTouchEnd),this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR))},isVelocityActive:function(){return this.data.enabled&&!!this.direction},getVelocityDelta:function(){return this.dVelocity.z=this.direction,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},onTouchStart:function(d){this.direction=-1,this.data.reverseEnabled&&d.touches&&d.touches.length===2&&(this.direction=1),d.preventDefault()},onTouchEnd:function(d){this.direction=0,d.preventDefault()},onEnterVR:function(){var d=this.el.sceneEl.xrSession;d&&(d.addEventListener("selectstart",this.onTouchStart),d.addEventListener("selectend",this.onTouchEnd))}})},{}],19:[function(h,S,W){S.exports=AFRAME.registerComponent("trackpad-controls",{schema:{enabled:{default:!0},enableNegX:{default:!0},enablePosX:{default:!0},enableNegZ:{default:!0},enablePosZ:{default:!0},mode:{default:"touch",oneOf:["swipe","touch","press"]}},init:function(){this.dVelocity=new THREE.Vector3,this.zVel=0,this.xVel=0,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){var d=this.data,U=this.el.sceneEl;switch(U.addEventListener("axismove",this.onAxisMove),d.mode){case"swipe":case"touch":U.addEventListener("trackpadtouchstart",this.onTouchStart),U.addEventListener("trackpadtouchend",this.onTouchEnd);break;case"press":U.addEventListener("trackpaddown",this.onTouchStart),U.addEventListener("trackpadup",this.onTouchEnd)}},removeEventListeners:function(){var d=this.el.sceneEl;d.removeEventListener("axismove",this.onAxisMove),d.removeEventListener("trackpadtouchstart",this.onTouchStart),d.removeEventListener("trackpadtouchend",this.onTouchEnd),d.removeEventListener("trackpaddown",this.onTouchStart),d.removeEventListener("trackpadup",this.onTouchEnd)},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-this.zVel:1,this.dVelocity.x=this.isMoving?this.xVel:1,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onAxisMove=this.onAxisMove.bind(this)},onTouchStart:function(d){switch(this.data.mode){case"swipe":this.canRecordAxis=!0,this.startingAxisData=[];break;case"touch":case"press":this.isMoving=!0}d.preventDefault()},onTouchEnd:function(d){this.data.mode=="swipe"&&(this.startingAxisData=[]),this.isMoving=!1,d.preventDefault()},onAxisMove:function(d){switch(this.data.mode){case"swipe":return this.handleSwipeAxis(d);case"touch":case"press":return this.handleTouchAxis(d)}},handleSwipeAxis:function(d){var U=this.data,K=d.detail.axis;if(this.startingAxisData.length===0&&this.canRecordAxis&&(this.canRecordAxis=!1,this.startingAxisData[0]=K[0],this.startingAxisData[1]=K[1]),this.startingAxisData.length>0){var T=0,I=0;U.enableNegX&&K[0]<this.startingAxisData[0]&&(T=-1),U.enablePosX&&K[0]>this.startingAxisData[0]&&(T=1),U.enablePosZ&&K[1]>this.startingAxisData[1]&&(I=-1),U.enableNegZ&&K[1]<this.startingAxisData[1]&&(I=1);var u=Math.abs(this.startingAxisData[1]-K[1]);Math.abs(this.startingAxisData[0]-K[0])>u?(this.zVel=0,this.xVel=T,this.isMoving=!0):(this.xVel=0,this.zVel=I,this.isMoving=!0)}},handleTouchAxis:function(d){var U=this.data,K=d.detail.axis,T=0,I=0;U.enableNegX&&K[0]<0&&(T=-1),U.enablePosX&&K[0]>0&&(T=1),U.enablePosZ&&K[1]>0&&(I=-1),U.enableNegZ&&K[1]<0&&(I=1),Math.abs(K[0])>Math.abs(K[1])?(this.zVel=0,this.xVel=T):(this.xVel=0,this.zVel=I)}})},{}],20:[function(h,S,W){function d(K){return K.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}var U={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};S.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(U)},repetitions:{default:1/0,min:0},timeScale:{default:1},startAt:{default:0}},init:function(){var K=this;this.model=null,this.mixer=null,this.activeActions=[];var T=this.el.getObject3D("mesh");T?this.load(T):this.el.addEventListener("model-loaded",function(I){K.load(I.detail.model)})},load:function(K){var T=this.el;this.model=K,this.mixer=new THREE.AnimationMixer(K),this.mixer.addEventListener("loop",function(I){T.emit("animation-loop",{action:I.action,loopDelta:I.loopDelta})}),this.mixer.addEventListener("finished",function(I){T.emit("animation-finished",{action:I.action,direction:I.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(K){if(K){var T=this.data,I=AFRAME.utils.diff(T,K);if("clip"in I)return this.stopAction(),void(T.clip&&this.playAction());this.activeActions.forEach(function(u){"duration"in I&&T.duration&&u.setDuration(T.duration),"clampWhenFinished"in I&&(u.clampWhenFinished=T.clampWhenFinished),("loop"in I||"repetitions"in I)&&u.setLoop(U[T.loop],T.repetitions),"timeScale"in I&&u.setEffectiveTimeScale(T.timeScale)})}},stopAction:function(){for(var K=this.data,T=0;T<this.activeActions.length;T++)K.crossFadeDuration?this.activeActions[T].fadeOut(K.crossFadeDuration):this.activeActions[T].stop();this.activeActions.length=0},playAction:function(){if(this.mixer){var K=this.model,T=this.data,I=K.animations||(K.geometry||{}).animations||[];if(I.length){for(var u,g=function(y){return new RegExp("^"+y.split(/\*+/).map(d).join(".*")+"$")}(T.clip),C=0;u=I[C];C++)if(u.name.match(g)){var v=this.mixer.clipAction(u,K);v.enabled=!0,v.clampWhenFinished=T.clampWhenFinished,T.duration&&v.setDuration(T.duration),T.timeScale!==1&&v.setEffectiveTimeScale(T.timeScale),v.startAt(this.mixer.time-T.startAt/1e3),v.setLoop(U[T.loop],T.repetitions).fadeIn(T.crossFadeDuration).play(),this.activeActions.push(v)}}}},tick:function(K,T){this.mixer&&!isNaN(T)&&this.mixer.update(T/1e3)}})},{}],21:[function(h,S,W){THREE.ColladaLoader=h("../../lib/ColladaLoader"),S.exports.Component=AFRAME.registerComponent("collada-model-legacy",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new THREE.ColladaLoader},update:function(){var d=this,U=this.el,K=this.data,T=this.el.sceneEl.systems.renderer;K&&(this.remove(),this.loader.load(K,function(I){d.model=I.scene,d.model.traverse(function(u){if(u.isMesh){var g=u.material;g.color&&T.applyColorCorrection(g.color),g.map&&T.applyColorCorrection(g.map),g.emissive&&T.applyColorCorrection(g.emissive),g.emissiveMap&&T.applyColorCorrection(g.emissiveMap)}}),U.setObject3D("mesh",d.model),U.emit("model-loaded",{format:"collada",model:d.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../../lib/ColladaLoader":3}],22:[function(h,S,W){THREE.FBXLoader=h("../../lib/FBXLoader"),S.exports=AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){var d=this.data;if(d.src){this.remove();var U=new THREE.FBXLoader;d.crossorigin&&U.setCrossOrigin(d.crossorigin),U.load(d.src,this.load.bind(this))}},load:function(d){this.model=d,this.el.setObject3D("mesh",d),this.el.emit("model-loaded",{format:"fbx",model:d})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../../lib/FBXLoader":4}],23:[function(h,S,W){var d=h("../../lib/fetch-script")(),U=function(){var K=void 0;return function(){return K=K||d("https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js")}}();S.exports=AFRAME.registerComponent("gltf-model-legacy",{schema:{type:"model"},init:function(){var K=this;this.model=null,this.loader=null,this.loaderPromise=U().then(function(){K.loader=new THREE.GLTFLoader,K.loader.setCrossOrigin("Anonymous")})},update:function(){var K=this,T=this,I=this.el,u=this.data;u&&(this.remove(),this.loaderPromise.then(function(){K.loader.load(u,function(g){T.model=g.scene,T.model.animations=g.animations,I.setObject3D("mesh",T.model),I.emit("model-loaded",{format:"gltf",model:T.model})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../../lib/fetch-script":7}],24:[function(h,S,W){h("./animation-mixer"),h("./collada-model-legacy"),h("./fbx-model"),h("./gltf-model-legacy"),h("./object-model")},{"./animation-mixer":20,"./collada-model-legacy":21,"./fbx-model":22,"./gltf-model-legacy":23,"./object-model":25}],25:[function(h,S,W){S.exports=AFRAME.registerComponent("object-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){var d=this,U=void 0,K=this.data;K.src&&(this.remove(),U=new THREE.ObjectLoader,K.crossorigin&&U.setCrossOrigin(K.crossorigin),U.load(K.src,function(T){T.traverse(function(I){I instanceof THREE.SkinnedMesh&&I.material&&(I.material.skinning=!!(I.geometry&&I.geometry.bones||[]).length)}),d.load(T)}))},load:function(d){this.model=d,this.el.setObject3D("mesh",d),this.el.emit("model-loaded",{format:"json",model:d})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{}],26:[function(h,S,W){S.exports=AFRAME.registerComponent("checkpoint",{schema:{offset:{default:{x:0,y:0,z:0},type:"vec3"}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this),this.offset=new THREE.Vector3},update:function(){this.offset.copy(this.data.offset)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.removeEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){var d=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!d)throw new Error("No `checkpoint-controls` component found.");d.components["checkpoint-controls"].setCheckpoint(this.el)},getOffset:function(){return this.offset.copy(this.data.offset)}})},{}],27:[function(h,S,W){function d(U,K,T,I){U&&(K=K||[],U.traverse(function(u){u.isMesh&&function(g){return g?Array.isArray(g)?g:g.materials?g.materials:[g]:[]}(u.material).forEach(function(g){(!g||"envMap"in g)&&(K.length&&K.indexOf(g.name)===-1||(g.envMap=T,g.reflectivity=I,g.needsUpdate=!0))})}))}S.exports=AFRAME.registerComponent("cube-env-map",{multiple:!0,schema:{path:{default:""},extension:{default:"jpg",oneOf:["jpg","png"]},enableBackground:{default:!1},reflectivity:{default:1,min:0,max:1},materials:{default:[]}},init:function(){var U=this,K=this.data;this.texture=new THREE.CubeTextureLoader().load([K.path+"posx."+K.extension,K.path+"negx."+K.extension,K.path+"posy."+K.extension,K.path+"negy."+K.extension,K.path+"posz."+K.extension,K.path+"negz."+K.extension]),this.texture.format=THREE.RGBAFormat,this.object3dsetHandler=function(){var T=U.el.getObject3D("mesh"),I=U.data;d(T,I.materials,U.texture,I.reflectivity)},this.object3dsetHandler(),this.el.addEventListener("object3dset",this.object3dsetHandler)},update:function(U){var K=this.data,T=this.el.getObject3D("mesh"),I=[],u=[];if(K.materials.length&&(U.materials?(I=K.materials.filter(function(C){return!U.materials.includes(C)}),u=U.materials.filter(function(C){return!K.materials.includes(C)})):I=K.materials),I.length&&d(T,I,this.texture,K.reflectivity),u.length&&d(T,u,null,1),U.materials&&K.reflectivity!==U.reflectivity){var g=K.materials.filter(function(C){return U.materials.includes(C)});g.length&&d(T,g,this.texture,K.reflectivity)}this.data.enableBackground&&!U.enableBackground?this.setBackground(this.texture):!this.data.enableBackground&&U.enableBackground&&this.setBackground(null)},remove:function(){this.el.removeEventListener("object3dset",this.object3dsetHandler);var U=this.el.getObject3D("mesh"),K=this.data;d(U,K.materials,null,1),K.enableBackground&&this.setBackground(null)},setBackground:function(U){this.el.sceneEl.object3D.background=U}})},{}],28:[function(h,S,W){S.exports=AFRAME.registerComponent("grab",{init:function(){this.system=this.el.sceneEl.systems.physics,this.GRABBED_STATE="grabbed",this.grabbing=!1,this.hitEl=null,this.physics=this.el.sceneEl.systems.physics,this.constraint=null,this.onHit=this.onHit.bind(this),this.onGripOpen=this.onGripOpen.bind(this),this.onGripClose=this.onGripClose.bind(this)},play:function(){var d=this.el;d.addEventListener("hit",this.onHit),d.addEventListener("gripdown",this.onGripClose),d.addEventListener("gripup",this.onGripOpen),d.addEventListener("trackpaddown",this.onGripClose),d.addEventListener("trackpadup",this.onGripOpen),d.addEventListener("triggerdown",this.onGripClose),d.addEventListener("triggerup",this.onGripOpen)},pause:function(){var d=this.el;d.removeEventListener("hit",this.onHit),d.removeEventListener("gripdown",this.onGripClose),d.removeEventListener("gripup",this.onGripOpen),d.removeEventListener("trackpaddown",this.onGripClose),d.removeEventListener("trackpadup",this.onGripOpen),d.removeEventListener("triggerdown",this.onGripClose),d.removeEventListener("triggerup",this.onGripOpen)},onGripClose:function(){this.grabbing=!0},onGripOpen:function(){var d=this.hitEl;this.grabbing=!1,d&&(d.removeState(this.GRABBED_STATE),this.hitEl=void 0,this.system.removeConstraint(this.constraint),this.constraint=null)},onHit:function(d){var U=d.detail.el;U.is(this.GRABBED_STATE)||!this.grabbing||this.hitEl||(U.addState(this.GRABBED_STATE),this.hitEl=U,this.constraint=new CANNON.LockConstraint(this.el.body,U.body),this.system.addConstraint(this.constraint))}})},{}],29:[function(h,S,W){h("./checkpoint"),h("./cube-env-map"),h("./grab"),h("./normal-material"),h("./sphere-collider")},{"./checkpoint":26,"./cube-env-map":27,"./grab":28,"./normal-material":30,"./sphere-collider":31}],30:[function(h,S,W){S.exports=AFRAME.registerComponent("normal-material",{init:function(){this.material=new THREE.MeshNormalMaterial({flatShading:!0}),this.applyMaterial=this.applyMaterial.bind(this),this.el.addEventListener("object3dset",this.applyMaterial),this.applyMaterial()},remove:function(){this.el.removeEventListener("object3dset",this.applyMaterial)},applyMaterial:function(){var d=this;this.el.object3D.traverse(function(U){U.isMesh&&(U.material=d.material)})}})},{}],31:[function(h,S,W){S.exports=AFRAME.registerComponent("sphere-collider",{schema:{enabled:{default:!0},interval:{default:80},objects:{default:""},state:{default:"collided"},radius:{default:.05},watch:{default:!0}},init:function(){this.observer=null,this.els=[],this.collisions=[],this.prevCheckTime=void 0,this.eventDetail={},this.handleHit=this.handleHit.bind(this),this.handleHitEnd=this.handleHitEnd.bind(this)},play:function(){var d=this.el.sceneEl;this.data.watch&&(this.observer=new MutationObserver(this.update.bind(this,null)),this.observer.observe(d,{childList:!0,subtree:!0}))},pause:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},update:function(){var d=this.data,U=void 0;U=d.objects?this.el.sceneEl.querySelectorAll(d.objects):this.el.sceneEl.children,this.els=Array.prototype.slice.call(U)},tick:function(){var d=new THREE.Vector3,U=new THREE.Vector3,K=new THREE.Vector3,T=new THREE.Vector3,I=new THREE.Box3,u=[],g=new Map;return function(C){if(this.data.enabled){var v=this.prevCheckTime;if(!(v&&C-v<this.data.interval)){this.prevCheckTime=C;var y=this.el,E=this.data,b=void 0;y.getObject3D("mesh")&&(u.length=0,g.clear(),y.object3D.getWorldPosition(d),y.object3D.getWorldScale(K),b=E.radius*function(m){return Math.max(m.x,m.y,m.z)}(K),this.els.forEach(function(m){var w=void 0,_=void 0,O=void 0,R=void 0;m.isEntity&&(_=m.getObject3D("mesh"))&&(I.setFromObject(_).getSize(T),R=Math.max(T.x,T.y,T.z)/2,w=Math.sqrt(2*R*R),I.getCenter(U),w&&(O=d.distanceTo(U))<w+b&&(u.push(m),g.set(m,O)))}),u.sort(function(m,w){return g.get(m)>g.get(w)?1:-1}).forEach(this.handleHit),this.collisions.filter(function(m){return!g.has(m)}).forEach(this.handleHitEnd),function(m,w){m.length=0;for(var _=0;_<w.length;_++)m[_]=w[_]}(this.collisions,u))}}}}(),handleHit:function(d){d.emit("hit"),d.addState(this.data.state),this.eventDetail.el=d,this.el.emit("hit",this.eventDetail)},handleHitEnd:function(d){d.emit("hitend"),d.removeState(this.data.state),this.eventDetail.el=d,this.el.emit("hitend",this.eventDetail)}})},{}],32:[function(h,S,W){h("./nav-mesh"),h("./nav-agent"),h("./system")},{"./nav-agent":33,"./nav-mesh":34,"./system":35}],33:[function(h,S,W){S.exports=AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav,this.system.addAgent(this),this.group=null,this.path=[],this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=null,this.path=[]},tick:function(){var d=new THREE.Vector3,U=new THREE.Vector3,K=new THREE.Vector3;return function(T,I){var u=this.el,g=this.data,C=this.raycaster,v=g.speed*I/1e3;if(g.active){if(!this.path.length){var y=this.el.object3D.position;this.group=this.group||this.system.getGroup(y),this.path=this.system.getPath(y,d.copy(g.destination),this.group)||[],u.emit("navigation-start")}if(!this.path.length)return console.warn("[nav] Unable to find path to %o.",g.destination),this.el.setAttribute("nav-agent",{active:!1}),void u.emit("navigation-end");var E=u.object3D.position,b=this.path[0];U.subVectors(b,E);var m=void 0;if(U.length()<v){if(this.path.shift(),!this.path.length)return this.el.setAttribute("nav-agent",{active:!1}),void u.emit("navigation-end");K.copy(E),m=this.path[0]}else K.copy(U.setLength(v)).add(E),m=b;m.y=E.y,u.object3D.lookAt(m),C.ray.origin.copy(K),C.ray.origin.y+=1.5,C.ray.direction={x:0,y:-1,z:0};var w=C.intersectObject(this.system.getNavMesh());w.length?(U.subVectors(w[0].point,E),E.add(U.setLength(v))):E.copy(K)}}}()})},{}],34:[function(h,S,W){S.exports=AFRAME.registerComponent("nav-mesh",{schema:{nodeName:{type:"string"}},init:function(){this.system=this.el.sceneEl.systems.nav,this.hasLoadedNavMesh=!1,this.nodeName=this.data.nodeName,this.el.addEventListener("object3dset",this.loadNavMesh.bind(this))},play:function(){this.hasLoadedNavMesh||this.loadNavMesh()},loadNavMesh:function(){var d=this,U=this.el.getObject3D("mesh");if(this.el.sceneEl.object3D,U){var K=void 0;if(U.traverse(function(I){!I.isMesh||d.nodeName&&I.name!==d.nodeName||(K=I)}),K){var T=K.geometry.clone();K.updateWorldMatrix(!0,!1),T.applyMatrix4(K.matrixWorld),this.system.setNavMeshGeometry(T),this.hasLoadedNavMesh=!0}}}})},{}],35:[function(h,S,W){var d=h("three-pathfinding").Pathfinding,U=new d,K="level";S.exports=AFRAME.registerSystem("nav",{init:function(){this.navMesh=null,this.agents=new Set},setNavMeshGeometry:function(T){this.navMesh=new THREE.Mesh(T),U.setZoneData(K,d.createZone(T)),Array.from(this.agents).forEach(function(I){return I.updateNavLocation()})},getNavMesh:function(){return this.navMesh},addAgent:function(T){this.agents.add(T)},removeAgent:function(T){this.agents.delete(T)},getPath:function(T,I,u){return this.navMesh?U.findPath(T,I,K,u):null},getGroup:function(T){return this.navMesh?U.getGroup(K,T):null},getNode:function(T,I){return this.navMesh?U.getClosestNode(T,K,I,!0):null},clampStep:function(T,I,u,g,C){return this.navMesh?g?U.clampStep(T,I,g,K,u,C):(C.copy(I),this.getNode(I,u)):(C.copy(I),null)}})},{"three-pathfinding":10}],36:[function(h,S,W){S.exports=AFRAME.registerPrimitive("a-grid",{defaultComponents:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",height:"geometry.height",src:"material.src"}})},{}],37:[function(h,S,W){S.exports.Primitive=AFRAME.registerPrimitive("a-ocean",{defaultComponents:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",amplitude:"ocean.amplitude",amplitudeVariance:"ocean.amplitudeVariance",speed:"ocean.speed",speedVariance:"ocean.speedVariance",color:"ocean.color",opacity:"ocean.opacity"}}),S.exports.Component=AFRAME.registerComponent("ocean",{schema:{width:{default:10,min:0},depth:{default:10,min:0},density:{default:10},amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:1},speedVariance:{default:2},color:{default:"#7AD2F7",type:"color"},opacity:{default:.8}},play:function(){var d=this.el,U=this.data,K=d.components.material,T=new THREE.PlaneGeometry(U.width,U.depth,U.density,U.density);this.waves=[];for(var I=T.getAttribute("position"),u=0;u<I.count;u++)this.waves.push({z:I.getZ(u),ang:Math.random()*Math.PI*2,amp:U.amplitude+Math.random()*U.amplitudeVariance,speed:(U.speed+Math.random()*U.speedVariance)/1e3});K||((K={}).material=new THREE.MeshPhongMaterial({color:U.color,transparent:U.opacity<1,opacity:U.opacity,flatShading:!0})),this.mesh=new THREE.Mesh(T,K.material),d.setObject3D("mesh",this.mesh)},remove:function(){this.el.removeObject3D("mesh")},tick:function(d,U){if(U){for(var K=this.mesh.geometry.getAttribute("position"),T=0;T<K.count;T++){var I=this.waves[T],u=I.z+Math.sin(I.ang)*I.amp;K.setZ(T,u),I.ang+=I.speed*U}K.needsUpdate=!0}}})},{}],38:[function(h,S,W){S.exports.Primitive=AFRAME.registerPrimitive("a-tube",{defaultComponents:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius","radial-segments":"tube.radialSegments",closed:"tube.closed"}}),S.exports.Component=AFRAME.registerComponent("tube",{schema:{path:{default:[]},segments:{default:64},radius:{default:1},radialSegments:{default:8},closed:{default:!1}},init:function(){var d=this.el,U=this.data,K=d.components.material;if(U.path.length){var T=new THREE.CatmullRomCurve3(U.path.map(function(u){return u=u.split(" "),new THREE.Vector3(Number(u[0]),Number(u[1]),Number(u[2]))})),I=new THREE.TubeGeometry(T,U.segments,U.radius,U.radialSegments,U.closed);K||((K={}).material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(I,K.material),this.el.setObject3D("mesh",this.mesh)}else console.error("[a-tube] `path` property expected but not found.")},update:function(d){Object.keys(d).length&&(this.remove(),this.init())},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}})},{}],39:[function(h,S,W){h("./a-grid"),h("./a-ocean"),h("./a-tube")},{"./a-grid":36,"./a-ocean":37,"./a-tube":38}]},{},[1]);(function(h){function S(d){if(W[d])return W[d].exports;var U=W[d]={exports:{},id:d,loaded:!1};return h[d].call(U.exports,U,U.exports,S),U.loaded=!0,U.exports}var W={};return S.m=h,S.c=W,S.p="",S(0)})([function(h,S){if(typeof AFRAME>"u")throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("environment",{schema:{active:{default:!1},preset:{default:"default",oneOf:["none","default","contact","egypt","checkerboard","forest","goaland","yavapai","goldmine","arches","threetowers","poison","tron","japan","dream","volcano","starry","osiris"]},seed:{type:"int",default:1,min:0,max:1e3},skyType:{default:"color",oneOf:["none","color","gradient","atmosphere"]},skyColor:{type:"color"},horizonColor:{type:"color"},lighting:{default:"distant",oneOf:["none","distant","point"]},shadow:{default:!1},shadowSize:{default:10},lightPosition:{type:"vec3",default:{x:0,y:1,z:-.2}},fog:{type:"float",default:0,min:0,max:1},flatShading:{default:!1},playArea:{type:"float",default:1,min:.5,max:10},ground:{default:"hills",oneOf:["none","flat","hills","canyon","spikes","noise"]},groundYScale:{type:"float",default:3,min:0,max:50},groundTexture:{default:"none",oneOf:["none","checkerboard","squares","walkernoise"]},groundColor:{type:"color",default:"#553e35"},groundColor2:{type:"color",default:"#694439"},dressing:{default:"none",oneOf:["none","cubes","pyramids","cylinders","hexagons","stones","trees","mushrooms","towers","apparatus","arches","torii"]},dressingAmount:{type:"int",default:10,min:0,max:1e3},dressingColor:{type:"color",default:"#795449"},dressingScale:{type:"float",default:5,min:0,max:100},dressingVariance:{type:"vec3",default:{x:1,y:1,z:1}},dressingUniformScale:{default:!0},dressingOnPlayArea:{type:"float",default:0,min:0,max:1},grid:{default:"none",oneOf:["none","1x1","2x2","crosses","dots","xlines","ylines"]},gridColor:{type:"color",default:"#ccc"}},multiple:!1,presets:{none:{},default:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:1,z:.33},fog:.78,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"checkerboard",groundColor:"#454545",groundColor2:"#5d5d5d",dressing:"none",dressingAmount:10,dressingColor:"#795449",dressingScale:1,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#ccc",shadow:!1},contact:{active:!0,seed:14,skyType:"gradient",skyColor:"#478d54",horizonColor:"#b696cb",lighting:"distant",lightPosition:{x:0,y:2.01,z:-1},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#2e455f",groundColor2:"#694439",dressing:"apparatus",dressingAmount:7,dressingColor:"#657067",dressingScale:20,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#478d54",shadow:!1},egypt:{active:!0,seed:26,skyType:"gradient",skyColor:"#1b7660",horizonColor:"#e4b676",lighting:"distant",lightPosition:{x:0,y:1.65,z:-1},fog:.75,flatShading:!1,playArea:1,ground:"hills",groundYScale:5,groundTexture:"walkernoise",groundColor:"#664735",groundColor2:"#6c4b39",dressing:"pyramids",dressingAmount:10,dressingColor:"#7c5c45",dressingScale:5,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},checkerboard:{active:!0,seed:1,skyType:"gradient",skyColor:"#0d0d0d",horizonColor:"#404040",lighting:"distant",lightPosition:{x:0,y:1,z:-.2},fog:.81,flatShading:!0,playArea:1,ground:"hills",groundYScale:4.81,groundTexture:"checkerboard",groundColor:"#252525",groundColor2:"#111111",dressing:"cubes",dressingAmount:10,dressingColor:"#9f9f9f",dressingScale:1.51,dressingVariance:{x:5,y:20,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#ccc",shadow:!1},forest:{active:!0,seed:8,skyType:"gradient",skyColor:"#24b59f",horizonColor:"#eff9b7",lighting:"distant",lightPosition:{x:-1.2,y:.88,z:-.55},fog:.8,flatShading:!1,playArea:1,ground:"noise",groundYScale:4.18,groundTexture:"squares",groundColor:"#937a24",groundColor2:"#987d2e",dressing:"trees",dressingAmount:500,dressingColor:"#888b1d",dressingScale:1,dressingVariance:{x:10,y:10,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#c5a543",shadow:!1},goaland:{active:!0,seed:17,skyType:"gradient",skyColor:"#14645f",horizonColor:"#a3dab8",lighting:"point",lightPosition:{x:.1,y:4,z:.56},fog:.73,flatShading:!1,playArea:1,ground:"noise",groundYScale:.81,groundTexture:"none",groundColor:"#ae3241",groundColor2:"#db4453",dressing:"mushrooms",dressingAmount:150,dressingColor:"#a9313d",dressingScale:5,dressingVariance:{x:5,y:10,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#239893",shadow:!1},yavapai:{active:!0,seed:11,skyType:"gradient",skyColor:"#239849",horizonColor:"#cfe0af",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!0,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#C66344",groundColor2:"#c96b4b",dressing:"stones",dressingAmount:500,dressingColor:"#C66344",dressingScale:.06,dressingVariance:{x:.2,y:.1,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},goldmine:{active:!0,seed:53,skyType:"gradient",skyColor:"#1e1c1a",horizonColor:"#8c7964",lighting:"point",lightPosition:{x:-.09,y:3,z:.33},fog:.43,flatShading:!0,playArea:1.08,ground:"canyon",groundYScale:50,groundTexture:"none",groundColor:"#353535",groundColor2:"#454545",dressing:"hexagons",dressingAmount:300,dressingColor:"#fe921b",dressingScale:.5,dressingVariance:{x:2,y:8,z:2},dressingUniformScale:!0,dressingOnPlayArea:.03,grid:"none",gridColor:"#ccc",shadow:!1},threetowers:{active:!0,seed:5,skyType:"gradient",skyColor:"#23a06b",horizonColor:"#f5e170",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.26,groundTexture:"walkernoise",groundColor:"#273a49",groundColor2:"#2b464f",dressing:"towers",dressingAmount:3,dressingColor:"#5f6d94",dressingScale:50,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#239893",shadow:!1},poison:{active:!0,seed:92,skyType:"gradient",skyColor:"#1ea84a",horizonColor:"#177132",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"none",groundColor:"#851f31",groundColor2:"#912235",dressing:"hexagons",dressingAmount:20,dressingColor:"#c7415b",dressingScale:20,dressingVariance:{x:20,y:200,z:20},dressingUniformScale:!1,dressingOnPlayArea:0,grid:"crosses",gridColor:"#1ea84a",shadow:!1},arches:{active:!0,seed:19,skyType:"atmosphere",skyColor:"#8cbdc8",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:.16,z:.33},fog:.67,flatShading:!0,playArea:1,ground:"canyon",groundYScale:10,groundTexture:"walkernoise",groundColor:"#a87d6f",groundColor2:"#795449",dressing:"arches",dressingAmount:6,dressingColor:"#795449",dressingScale:26,dressingVariance:{x:20,y:40,z:20},dressingUniformScale:!0,dressingOnPlayArea:.04,grid:"none",gridColor:"#ccc",shadow:!1},tron:{active:!0,seed:14,skyType:"gradient",skyColor:"#091b39",horizonColor:"#284a9e",lighting:"distant",lightPosition:{x:-.72,y:.62,z:.4},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#061123",groundColor2:"#694439",dressing:"towers",dressingAmount:5,dressingColor:"#fb000e",dressingScale:15,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#fb000e",shadow:!1},japan:{active:!0,seed:14,skyType:"gradient",skyColor:"#7e5db5",horizonColor:"#b4adda",lighting:"distant",lightPosition:{x:1.33,y:1,z:.24},fog:.9,flatShading:!1,playArea:1,ground:"hills",groundYScale:25,groundTexture:"walkernoise",groundColor:"#7e5db5",groundColor2:"#cabdf5",dressing:"torii",dressingAmount:4,dressingColor:"#bc5e7c",dressingScale:15,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},dream:{active:!0,seed:17,skyType:"gradient",skyColor:"#87faf4",horizonColor:"#b34093",lighting:"distant",lightPosition:{x:-.72,y:.53,z:.97},fog:.8,flatShading:!1,playArea:1,ground:"hills",groundYScale:20,groundTexture:"checkerboard",groundColor:"#b34093",groundColor2:"#c050a2",dressing:"mushrooms",dressingAmount:300,dressingColor:"#3cf7ed",dressingScale:.2,dressingVariance:{x:.2,y:.2,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},volcano:{active:!0,seed:92,skyType:"gradient",skyColor:"#4a070f",horizonColor:"#f62300",lighting:"point",lightPosition:{x:.5,y:2.25,z:0},fog:.87,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#fb0803",groundColor2:"#510000",dressing:"arches",dressingAmount:15,dressingColor:"#fb0803",dressingScale:3,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!1,dressingOnPlayArea:.2,grid:"none",gridColor:"#fa0e00",shadow:!1},starry:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:-.01,z:-.46},fog:.7,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#553e35",groundColor2:"#694439",dressing:"none",dressingAmount:100,dressingColor:"#795449",dressingScale:5,dressingVariance:{x:1,y:1,z:1},dressingUniformScale:!0,grid:"1x1",dressingOnPlayArea:0,gridColor:"#39d2f2",shadow:!1},osiris:{active:!0,seed:46,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:.02,z:-.46},fog:0,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#9e7b47",groundColor2:"#9e7b47",dressing:"pyramids",dressingAmount:7,dressingColor:"#9e7b47",dressingScale:5,dressingVariance:{x:30,y:30,z:30},dressingUniformScale:!0,grid:"dots",dressingOnPlayArea:0,gridColor:"#daa452",shadow:!1},moon:{active:!0,seed:11,skyType:"gradient",skyColor:"#000000",horizonColor:"#000000",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!0,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#D1D1D1",groundColor2:"#494949",dressing:"stones",dressingAmount:500,dressingColor:"#494949",dressingScale:.06,dressingVariance:{x:.2,y:.1,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1}},init:function(){this.environmentData={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.STAGE_SIZE=200,this.assets={arches:[{type:"mesh",vertices:[409,268,4,351,228,36,336,236,-57,-152,391,69,-135,358,88,-119,330,43,-20,358,-35,-153,357,-47,37,413,-26,-20,411,-14,-302,148,154,-339,121,-126,-389,200,-88,-477,193,-76,-314,346,-19,-314,306,-30,-250,296,-73,-267,237,-82,-212,303,-68,-245,200,-67,-223,304,108,-329,299,107,-289,350,76,-320,342,69,119,373,-39,38,370,8,113,367,52,492,202,-31,462,83,-104,447,71,-80,426,112,25,482,189,-7,222,372,6,121,402,41,87,382,67,221,346,55,559,93,-13,528,47,39,505,21,-111,528,54,-101,616,31,-53,442,256,-15,300,338,19,257,308,-79,408,256,-74,312,352,-26,384,297,-31,437,257,-47,-29,415,53,-232,377,59,-139,335,77,-132,344,2,-18,377,-37,-171,387,-28,-254,384,18,-651,-27,27,-435,-28,179,-345,149,165,-272,-28,23,-215,146,-2,-279,-29,-59,-211,145,-55,-337,-28,-128,-413,247,0,-293,363,24,-214,254,-36,-164,290,33,-284,150,94,-218,362,105,75,369,29,518,147,-63,447,190,-70,445,56,-105,391,185,-60,431,49,-33,459,83,26,470,162,42,130,390,53,167,341,-30,125,394,-45,239,368,-17,91,414,10,450,18,2,449,-27,-9,436,-28,-58,496,-27,-110,582,-28,-140,647,-27,-56,325,325,-45,-307,297,-56,-647,-28,-45,-188,310,-54,-264,197,113,-367,175,139,8,387,82,426,45,-55,114,359,-28,500,27,44,461,-29,13,-512,-27,-151,-152,376,-38,-490,-28,148,12,370,-28,442,160,42,465,194,32,381,183,-33,649,-27,-34,444,16,29,616,-28,25,417,267,-66,-132,352,-34,-322,-27,130,-271,86,-115,-635,-28,-121,-291,203,-99,176,405,-10,561,52,-93,371,305,9,311,237,-22,377,200,-81,-129,406,46,-154,371,99,-82,361,71,-21,354,26,-91,363,-27,-165,413,-12,-414,215,110,-238,127,26,-408,-28,-128,-674,-28,-94,-446,232,-39,-311,226,-90,-255,210,-61,-235,192,-11,-217,218,58,-269,299,124,-386,276,78,-399,281,42,15,373,58,16,393,75,549,107,-46,481,188,-68,409,120,-41,541,81,12,230,368,41,194,350,-50,224,361,-50,604,-28,-10,602,-27,35,486,56,-121,502,69,-120,457,-27,-110,226,317,-40,-584,-28,-124,439,-26,-30,467,-26,39,547,-27,-146,21,368,14,466,229,-29,578,-27,44,609,-27,-96,291,356,-15,290,306,34,255,321,28,231,311,-5,-251,386,50,-183,307,87,-152,307,24,-264,373,-12,-392,-27,190,-333,-28,84,-281,-27,54,-270,-28,-23,-308,-28,-101,-687,-27,-59,39,418,39,413,163,25,404,206,-90,54,400,-31,121,352,8,-454,41,148,-426,9,182,-564,115,3,-427,27,-107,-548,118,-32,-556,122,-53,-517,91,-101,-475,54,140,-461,52,-134,-558,119,-71,-434,286,59,-687,-31,52,-595,146,22,-670,-28,164,-537,166,122,-575,-28,217,-566,159,65,-470,152,136,-712,-29,102,-639,-29,211,-532,-30,181,-442,-30,-100],faces:[76,104,162,1,176,103,103,76,1,2,119,73,73,105,2,2,118,152,45,161,46,46,109,45,3,120,49,49,68,3,3,121,139,139,48,3,4,122,94,94,121,4,6,123,124,9,175,81,10,169,111,10,67,92,88,43,146,11,131,114,11,128,183,13,130,15,90,184,174,90,182,184,130,184,63,14,130,63,15,130,14,16,131,12,15,168,53,18,91,17,131,16,17,65,133,132,65,132,91,67,134,166,166,92,67,20,135,92,20,166,4,4,121,20,22,135,68,25,102,96,25,157,102,69,138,157,69,157,25,39,150,71,71,141,39,28,150,149,149,72,28,142,176,105,36,140,27,27,143,36,32,115,81,32,144,161,161,80,32,77,35,144,34,26,77,78,179,96,145,152,78,178,79,145,80,146,79,147,140,36,143,108,36,143,37,148,74,95,154,154,83,74,72,149,151,151,95,72,38,150,156,40,147,106,70,140,40,40,116,70,42,162,0,35,163,162,43,145,146,46,117,41,47,158,27,48,139,175,122,138,94,157,138,123,52,178,102,52,102,6,52,124,7,7,100,52,53,125,8,57,93,181,56,169,181,59,127,58,60,173,61,62,128,11,11,112,62,65,91,167,65,167,66,126,93,21,22,68,49,72,95,29,142,29,74,74,82,142,75,107,97,75,97,103,76,97,37,104,143,31,78,152,164,78,164,179,79,178,8,97,155,159,107,98,155,83,98,82,154,95,84,39,116,86,86,156,39,87,160,116,24,145,96,162,104,0,105,118,2,43,177,119,44,177,43,91,51,167,44,88,109,46,161,117,3,68,121,3,48,120,4,166,50,50,122,4,5,123,122,123,138,122,110,124,51,170,10,111,110,91,7,7,124,110,8,125,9,9,81,8,186,12,188,92,135,10,11,114,112,64,63,137,13,15,89,89,53,100,64,168,14,14,168,15,89,100,16,16,12,89,100,18,16,17,91,132,112,19,61,18,7,91,19,17,132,133,127,59,133,59,61,136,21,22,134,127,133,20,92,166,121,135,20,158,31,27,21,135,22,23,137,136,24,102,178,178,145,24,25,179,69,26,94,138,27,140,70,27,70,141,150,177,71,28,177,150,29,142,73,73,119,29,142,82,30,30,176,142,107,75,82,31,143,27,33,81,175,31,41,104,115,79,8,32,33,144,80,115,32,33,175,139,35,162,42,77,139,34,163,26,179,163,179,164,78,96,145,177,29,119,108,143,148,148,37,159,97,159,37,74,83,82,38,149,150,156,150,39,40,106,87,87,116,40,140,147,40,161,144,42,42,117,161,41,0,104,41,117,0,0,117,42,164,118,163,1,163,118,118,176,1,118,105,176,152,118,164,43,152,145,43,119,2,71,109,141,47,41,158,44,71,177,45,109,88,45,88,146,46,47,109,141,47,27,167,50,166,49,120,165,139,121,94,5,122,50,123,51,124,157,6,102,157,123,6,100,8,178,5,167,51,6,124,52,100,178,52,53,168,125,125,165,120,54,125,168,9,48,175,120,9,125,93,10,135,181,101,56,57,169,10,59,172,61,67,170,171,67,171,127,58,127,171,129,186,113,60,61,172,61,173,112,62,112,173,174,189,129,165,64,23,64,137,23,165,22,49,64,54,168,17,114,131,17,112,114,66,133,65,19,132,133,19,133,61,134,133,66,166,134,66,166,66,167,93,135,21,68,135,121,23,136,22,94,34,139,25,96,179,26,138,69,69,179,26,30,103,176,116,141,70,39,141,116,73,142,105,143,76,37,26,35,77,103,97,76,77,144,33,33,139,77,38,151,149,80,161,45,80,45,146,81,115,8,107,155,97,82,98,107,95,151,84,38,156,85,86,116,160,96,102,24,72,29,28,29,95,74,75,30,82,108,147,36,88,44,43,91,110,51,170,67,10,11,183,131,64,14,63,89,15,53,100,7,18,112,17,19,127,134,67,136,126,21,158,41,31,33,32,81,115,80,79,177,28,29,43,2,152,71,44,109,47,46,41,141,109,47,167,5,50,123,5,51,100,53,8,125,54,165,9,120,48,93,57,10,59,58,172,174,185,189,165,54,64,165,23,22,94,26,34,30,75,103,143,104,76,26,163,35,38,85,151,192,182,191,183,128,201,12,13,89,181,169,57,186,153,113,188,183,99,184,182,63,185,13,189,180,181,93,186,99,153,189,186,129,185,184,130,186,13,12,187,93,126,193,199,194,194,196,193,200,187,195,187,197,195,187,126,197,197,190,194,190,136,137,190,196,194,63,182,192,63,192,196,192,198,196,191,182,55,193,196,198,194,199,197,195,197,199,136,197,126,190,137,63,190,63,196,197,136,190,192,191,198,201,99,183,90,55,182,181,180,101,185,130,13,186,188,99,186,189,13,187,180,93,200,101,187,183,188,131,184,185,174,180,187,101,16,18,17,12,131,188,35,42,144,163,1,162,76,162,1,79,146,145]}],stones:[{type:"mesh",vertices:[-376,189,42,230,223,-310,353,162,-62,414,-23,-67,256,90,-475,24,85,-526,-418,-16,57,-432,66,-40,-199,151,-376,-155,49,467,-91,289,201,293,197,91,81,-17,-480,42,108,431,-359,-17,-250,383,-19,-243,194,-15,270,-272,180,293,-86,212,262,234,54,297,395,97,-302,-123,-21,-444,-416,-19,-123,-323,-18,267,-100,-16,429,-300,96,-361,163,-19,409,118,201,-431,-241,-18,391,-130,274,-309,306,-19,-399,-221,96,404],faces:[31,18,17,0,17,18,3,20,2,18,11,10,29,27,8,27,29,1,0,18,10,10,29,0,16,19,26,11,2,1,20,30,4,20,3,15,30,12,4,4,12,5,5,27,4,4,27,20,21,25,5,7,8,25,22,7,14,7,25,14,23,28,31,0,7,17,24,26,9,31,28,9,8,27,5,2,20,1,13,19,18,10,11,1,19,13,26,3,11,19,19,16,3,11,3,2,11,18,19,20,15,30,29,10,1,25,21,14,8,5,25,5,12,21,6,7,22,7,6,23,8,0,29,8,7,0,23,31,7,13,31,9,18,31,13,9,28,24,26,13,9,27,1,20,7,31,17]},{type:"mesh",vertices:[-217,34,-153,198,90,20,212,85,169,-131,93,171,197,113,30,173,121,164,315,29,-16,219,24,189,282,50,-102,232,38,-181,-195,-9,-166,-156,30,-207,-51,-9,-231,-180,91,-173,-19,73,-204,-280,23,96,-242,100,107,3,158,-82,109,88,221,275,-10,-40,236,-10,-135,-178,49,184,-1,-10,-243,265,-11,109,-12,-9,237,-36,46,251,-233,86,-81,93,77,-171,-163,133,69,18,16,263,296,44,93,131,-12,-226,-89,-10,-201,-273,-10,-51,-240,-9,110,190,-12,192,-253,-11,-92,42,43,-258,-115,-11,238,168,99,-88,-285,-10,24,71,124,-158,298,-10,10,116,150,-24,-282,44,39],faces:[44,16,26,13,26,16,0,26,13,27,14,41,4,5,1,7,30,2,28,5,43,41,39,27,17,43,41,43,4,39,13,28,17,17,41,13,28,43,17,24,29,38,29,35,7,18,25,29,5,18,2,18,5,3,30,42,6,30,35,23,19,20,8,8,20,9,9,39,8,1,30,8,31,37,9,11,14,37,14,27,37,32,11,12,11,37,12,11,0,13,33,40,44,44,26,33,33,0,36,34,38,15,44,40,15,21,3,16,27,39,9,2,30,1,21,25,3,16,3,28,28,3,5,4,43,5,41,43,39,13,16,28,25,21,38,38,29,25,7,18,29,29,24,35,18,7,2,18,3,25,30,23,42,30,7,35,8,30,6,6,19,8,6,42,19,8,39,1,37,31,22,27,9,37,9,20,31,10,11,32,11,10,0,12,37,22,14,13,41,14,11,13,33,26,0,36,0,10,21,44,15,16,44,21,15,40,34,38,21,15,4,1,39,5,2,1]},{type:"mesh",vertices:[-101,102,57,99,35,102,40,72,80,59,14,-168,-186,22,45,-176,25,-30,66,-7,146,153,-7,53,-110,47,-96,-90,-8,-146,150,-7,-12,-200,-7,8,-173,-7,-55,55,46,-60,125,-7,110,136,30,-10,-149,58,68,-15,82,-71,98,-7,-86,-34,-6,-194,-33,-7,171,-36,65,137,38,-8,-192,-103,-9,147,-12,62,-152],faces:[2,17,0,17,8,0,17,24,8,19,24,22,5,11,4,2,13,17,17,13,24,21,23,20,1,2,21,7,15,1,7,10,15,5,9,12,15,18,13,0,5,16,0,8,5,1,15,2,10,18,15,3,13,18,24,3,22,11,23,4,4,16,5,16,4,23,24,13,3,15,13,2,6,1,21,6,21,20,6,14,1,2,0,21,1,14,7,3,18,22,8,24,19,8,19,9,12,11,5,5,8,9,16,23,21,16,21,0]},{type:"mesh",vertices:[86,55,-18,58,38,73,97,-12,79,135,7,10,-93,-11,-72,-133,5,33,13,68,-32,94,-11,-57,-90,52,53,-24,-11,-106,-13,-10,104,-75,49,-69,-12,18,114,49,-12,-96,-46,-11,-85,-119,-11,-26,48,5,-111,-58,-11,105,-117,-12,52,-5,35,-93,123,-11,7],faces:[5,8,11,2,3,1,8,1,6,11,8,6,6,19,11,10,12,17,20,7,3,3,7,16,16,0,3,16,9,19,14,4,9,15,18,5,5,11,15,18,17,5,19,0,16,1,3,0,0,6,1,19,6,0,12,8,17,2,1,12,12,10,2,1,8,12,3,2,20,16,13,9,16,7,13,19,4,11,15,11,4,17,8,5,9,4,19]}],torii:[{type:"mesh",mirror:!0,flatShading:!0,vertices:[692,966,-52,661,834,-52,692,966,52,661,834,52,0,894,-52,0,776,-52,0,894,52,0,776,52,518,935,52,345,913,52,170,899,52,162,779,52,328,790,52,494,808,52,170,899,-52,345,913,-52,518,935,-52,494,808,-52,328,790,-52,162,779,-52,0,618,16,0,697,16,0,618,-16,0,697,-16,586,618,16,586,697,16,586,618,-16,586,697,-16,331,-29,-75,331,766,-52,369,-29,-65,357,766,-45,396,-29,-37,377,766,-26,406,-29,0,384,766,0,396,-29,37,377,766,26,369,-29,65,357,766,45,331,-29,75,331,766,52,294,-29,65,305,766,45,267,-29,37,286,766,26,257,-29,0,279,766,0,267,-29,-37,286,766,-26,294,-29,-65,305,766,-45,0,777,85,0,681,33,333,762,-75,333,806,-75,371,762,-65,371,806,-65,398,762,-37,398,806,-37,408,762,0,408,806,0,398,762,37,398,806,37,371,762,65,371,806,65,333,762,75,333,806,75,296,762,65,296,806,65,268,762,37,268,806,37,258,762,0,258,806,0,268,762,-37,268,806,-37,296,762,-65,296,806,-65,0,681,-33,0,777,-85,52,681,33,52,777,85,52,681,-33,52,777,-85],faces:[4,10,14,1,13,17,11,6,7,0,3,1,16,1,17,4,19,5,14,18,19,15,17,18,3,8,13,13,9,12,12,10,11,19,7,5,19,12,11,18,13,12,16,2,0,15,8,16,14,9,15,23,26,22,27,24,26,25,20,24,26,20,22,23,25,27,29,30,28,31,32,30,33,34,32,35,36,34,37,38,36,39,40,38,41,42,40,43,44,42,45,46,44,47,48,46,49,50,48,51,28,50,55,56,54,57,58,56,59,60,58,61,62,60,63,64,62,79,81,83,65,66,64,82,53,78,67,68,66,81,53,80,69,70,68,83,80,82,71,72,70,79,82,78,73,74,72,75,63,59,75,76,74,77,54,76,60,68,76,4,6,10,1,3,13,11,10,6,0,2,3,16,0,1,4,14,19,14,15,18,15,16,17,3,2,8,13,8,9,12,9,10,19,11,7,19,18,12,18,17,13,16,8,2,15,9,8,14,10,9,23,27,26,27,25,24,25,21,20,26,24,20,23,21,25,29,31,30,31,33,32,33,35,34,35,37,36,37,39,38,39,41,40,41,43,42,43,45,44,45,47,46,47,49,48,49,51,50,51,29,28,55,57,56,57,59,58,59,61,60,61,63,62,63,65,64,79,52,81,65,67,66,82,80,53,67,69,68,81,52,53,69,71,70,83,81,80,71,73,72,79,83,82,73,75,74,59,57,55,55,77,75,75,73,71,71,69,75,67,65,63,63,61,59,59,55,75,75,69,67,67,63,75,75,77,76,77,55,54,76,54,56,56,58,76,60,62,68,64,66,68,68,70,72,72,74,68,76,58,60,62,64,68,68,74,76]}],hexagons:[{type:"extrude",vertices:[-.198,-.302,.197,-.3,.372,0,.199,.298,-.202,.298,-.368,0]}],towers:[{type:"extrude",vertices:[-.054,-.178,-.007,-.182,.069,-.027,.189,.079,.178,.124,-.007,.097,-.145,.182,-.178,.144,-.079,-.021]},{type:"lathe",segments:4,vertices:[.004,.02,.012,.092,.042,.166,.067,.55,.101,.594,.105,.838,.193,.934,.18,.994]},{type:"lathe",segments:5,vertices:[.069,.216,.067,.562,.126,.562,.128,.774,.191,.774,.193,.986]}],trees:[{type:"lathe",noise:.015,segments:6,vertices:[1e-6,.826,.054,.832,.105,.854,.136,.9,.136,.958,.118,.994]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.01,.069,.022,.13,.068,.178,.18,.189,.32,.191,.59,.193,.75,.138,.79,.018,.808,.018,.996]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.436,.126,.46,.201,.57,.219,.72,.154,.846,.028,.884,.034,.996]}],apparatus:[{type:"lathe",segments:10,vertices:[1e-6,.23,.042,.23,.069,.36,.038,.362,.038,.372,.06,.372,.073,.572,.024,.572,.024,.67,.069,.67,.075,.722,.097,.724,.105,.852,.083,.902,.065,.902,.065,.924,.128,.924,.146,.996]},{type:"lathe",segments:16,vertices:[1e-6,.232,.229,.182,.486,.07,.356,.182,.213,.242,.154,.242,.144,.262,.178,.262,.126,.314,.04,.328,.038,.374,.058,.374,.071,.408,.026,.406,.03,.42,.091,.418,.034,.496,.01,.498,.03,.506,.014,.998]}],mushrooms:[{type:"lathe",noise:.02,segments:14,vertices:[1e-6,.006,.13,.018,.341,.084,.437,.144,.492,.234,.484,.246,.276,.232,.107,.284,.046,.346,.062,.852,.097,.956,.166,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.562,.091,.572,.172,.61,.223,.666,.256,.74,.258,.806,.246,.824,.062,.826,.065,.948,.097,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.768,.099,.772,.219,.802,.306,.844,.352,.886,.352,.908,.118,.904,.107,.93,.115,.966,.14,.996]}]};for(var d in this.assets)for(var U=0;U<this.assets[d].length;U++){var K=this.assets[d][U];if(K.type=="mesh")for(var T=0,I=K.vertices.length;T<I;T++)K.vertices[T]/=1e3}this.userFog=this.el.sceneEl.getAttribute("fog"),this.sky=document.createElement("a-sky"),this.sky.setAttribute("radius",this.STAGE_SIZE),this.sky.setAttribute("theta-length",110),this.sky.classList.add("environment"),this.stars=null,this.groundMaterial=null,this.ground=document.createElement("a-entity"),this.ground.setAttribute("rotation","-90 0 0"),this.ground.classList.add("environmentGround"),this.ground.classList.add("environment"),this.groundCanvas=null,this.groundTexture=null,this.groundMaterial=null,this.groundGeometry=null,this.dressing=document.createElement("a-entity"),this.dressing.classList.add("environmentDressing"),this.dressing.classList.add("environment"),this.gridCanvas=null,this.gridTexture=null,this.hemilight=document.createElement("a-entity"),this.hemilight.classList.add("environment"),this.hemilight.setAttribute("position","0 50 0"),this.hemilight.setAttribute("light",{type:"hemisphere",color:"#CEE4F0",intensity:.4}),this.sunlight=document.createElement("a-entity"),this.sunlight.classList.add("environment"),this.sunlight.setAttribute("position",this.data.lightPosition),this.sunlight.setAttribute("light",{intensity:.6}),this.el.appendChild(this.hemilight),this.el.appendChild(this.sunlight),this.el.appendChild(this.ground),this.el.appendChild(this.dressing),this.el.appendChild(this.sky)},getFogColor:function(d,U){var K;if(d=="color"||d=="none")K=new THREE.Color().setStyle(this.environmentData.skyColor,THREE.NoColorSpace);else if(d=="gradient")K=new THREE.Color().setStyle(this.environmentData.horizonColor,THREE.NoColorSpace);else if(d=="atmosphere"){var T=[1,.5,.22,.1,.05,0],I=["#C0CDCF","#81ADC5","#525e62","#2a2d2d","#141616","#000"];if(U<=0)return"#000";U=Math.min(1,U);for(var u=0;u<T.length;u++)if(U>T[u]){var g=new THREE.Color().setStyle(I[u-1],THREE.NoColorSpace),C=new THREE.Color().setStyle(I[u],THREE.NoColorSpace),v=(U-T[u])/(T[u-1]-T[u]);C.lerp(g,v),K=C;break}}return K.multiplyScalar(.9),K.lerp(new THREE.Color().setStyle(this.data.groundColor,THREE.NoColorSpace),.3),K.setRGB(K.r,K.g,K.b,THREE.SRGBColorSpace),"#"+K.getHexString()},update:function(d){var U;this.data.preset?(U=AFRAME.utils.clone(this.environmentData),this.environmentData={},Object.assign(this.environmentData,this.data),Object.assign(this.environmentData,this.presets[this.data.preset]),Object.assign(this.environmentData,this.el.components.environment.attrValue),console.log(this.environmentData)):(U=d,this.environmentData=this.data);var K=this.environmentData.skyType,T=new THREE.Vector3(this.environmentData.lightPosition.x,this.environmentData.lightPosition.y,this.environmentData.lightPosition.z);if(T.normalize(),this.sunlight){if(this.sunlight.setAttribute("position",this.environmentData.lightPosition),K!="atmosphere"){var I=new THREE.Color().setStyle(this.environmentData.skyColor,THREE.NoColorSpace);I.setRGB((I.r+1)/2,(I.g+1)/2,(I.b+1)/2,THREE.SRGBColorSpace),this.hemilight.setAttribute("light",{color:"#"+I.getHexString(),intensity:.6}),this.sunlight.setAttribute("light",{intensity:.6})}else this.hemilight.setAttribute("light",{color:"#CEE4F0",intensity:.1+.5*T.y}),this.sunlight.setAttribute("light",{intensity:.1+.5*T.y});this.sunlight.setAttribute("light",{castShadow:this.environmentData.shadow,shadowCameraLeft:-this.environmentData.shadowSize,shadowCameraBottom:-this.environmentData.shadowSize,shadowCameraRight:this.environmentData.shadowSize,shadowCameraTop:this.environmentData.shadowSize})}if(K!==U.skyType||this.environmentData.skyColor!=U.skyColor||this.environmentData.horizonColor!=U.horizonColor){var u={};u.shader={none:"flat",color:"flat",gradient:"gradientshader",atmosphere:"skyshader"}[K],this.stars&&this.stars.setAttribute("visible",K=="atmosphere"),K=="color"?(u.color=this.environmentData.skyColor,u.fog=!1):K=="gradient"&&(u.topColor=new THREE.Color().setStyle(this.environmentData.skyColor,THREE.NoColorSpace),u.bottomColor=new THREE.Color().setStyle(this.environmentData.horizonColor,THREE.NoColorSpace)),this.sky.setAttribute("material",u)}K=="atmosphere"&&(this.sky.setAttribute("material",{sunPosition:T}),this.setStars(2e3*(1-Math.max(0,8*(T.y+.08))))),this.environmentData.fog>0?this.el.sceneEl.setAttribute("fog",{color:this.getFogColor(K,T.y),far:(1.01-this.environmentData.fog)*this.STAGE_SIZE*2}):this.el.sceneEl.removeAttribute("fog"),this.sunlight.setAttribute("light",{type:this.environmentData.lighting=="point"?"point":"directional"}),this.sunlight.setAttribute("visible",this.environmentData.lighting!=="none"),this.hemilight.setAttribute("visible",this.environmentData.lighting!=="none");var g=!this.groundGeometry||this.environmentData.seed!=U.seed||this.environmentData.ground!=U.ground||this.environmentData.playArea!=U.playArea||this.environmentData.flatShading!=U.flatShading;(g||this.environmentData.groundColor!=U.groundColor||this.environmentData.groundColor2!=U.groundColor2||this.environmentData.groundYScale!=U.groundYScale||this.environmentData.groundTexture!=U.groundTexture||this.environmentData.gridColor!=U.gridColor||this.environmentData.grid!=U.grid)&&(this.updateGround(g),this.hemilight&&this.hemilight.setAttribute("light",{groundColor:this.environmentData.groundColor})),this.environmentData.seed==U.seed&&this.environmentData.dressingOnPlayArea==U.dressingOnPlayArea&&this.environmentData.dressing==U.dressing&&this.environmentData.flatShading==U.flatShading&&this.environmentData.dressingAmount==U.dressingAmount&&this.environmentData.dressingScale==U.dressingScale&&this.environmentData.dressingColor==U.dressingColor&&this.environmentData.dressingVariance.x==U.dressingVariance.x&&this.environmentData.dressingVariance.y==U.dressingVariance.y&&this.environmentData.dressingVariance.z==U.dressingVariance.z&&this.environmentData.dressingUniformScale==U.dressingUniformScale||this.updateDressing(),this.sky.setAttribute("visible",K!=="none"),this.el.setAttribute("visible",this.environmentData.active),this.environmentData.active||(this.userFog?this.el.sceneEl.setAttribute("fog",this.userFog):this.el.sceneEl.removeAttribute("fog")),this.dumpParametersDiff()},logPreset:function(){var d="{";for(var U in this.schema)if(U!="preset"){d+=U+": ";var K=this.schema[U].type;d+=K=="vec3"?"{ x: "+this.environmentData[U].x+", y: "+this.environmentData[U].y+", z: "+this.environmentData[U].z+"}":K=="string"||K=="color"?'"'+this.environmentData[U]+'"':this.environmentData[U],d+=", "}d+="}",console.log(d)},dumpParametersDiff:function(){function d(v){return Math.floor(1e3*v)/1e3}var U=[],K=this.data.preset!="none"&&this.presets[this.data.preset];K&&U.push("preset: "+this.data.preset);for(var T in this.schema)if(!(T=="preset"||K&&K[T]===void 0)){var I=K?K[T]:this.schema[T].default,u=this.environmentData[T],g=this.schema[T].type;if(g=="vec3"){var C=I;typeof I=="string"&&(I=I.split(" "),C={x:I[0],y:I[1],z:I[2]}),d(C.x)==d(u.x)&&d(C.y)==d(u.y)&&d(C.z)==d(u.z)||U.push(T+": "+d(u.x)+" "+d(u.y)+" "+d(u.z))}else I!=u&&(this.schema[T].type=="number"&&(u=d(u)),U.push(T+": "+u))}console.log("%c"+U.join("; "),"color: #f48;font-weight:bold")},random:function(d){return parseFloat("0."+Math.sin(9999*this.environmentData.seed*d).toString().substr(7))},updateGround:function(d){var U=64;if(d){var K=this.environmentData.ground!="none";if(this.ground.setAttribute("visible",K),!K)return;this.groundGeometry||(this.groundGeometry=new THREE.PlaneGeometry(this.STAGE_SIZE+2,this.STAGE_SIZE+2,U-1,U-1));for(var T=new W(this.environmentData.seed),I=this.groundGeometry.attributes.position.array,u=I.length,g=10,C=g/U,v=0,y=0,E=2;E<u;E+=3)if(this.environmentData.ground!="flat"){var b;switch(this.environmentData.ground){case"hills":b=Math.max(0,T.noise(v,y,0));break;case"canyon":b=.2+.8*T.noise(v,y,0),b=Math.min(1,10*Math.pow(b,2));break;case"spikes":b=this.random(E)<.02?this.random(E+1):0;break;case"noise":b=this.random(E)<.35?this.random(E+1):0}b+=.1*this.random(E+2);var m=2*v/g-1,w=2*y/g-1,_=this.environmentData.playArea;m=Math.max(0,Math.min(1,(Math.abs(m)-(_-.9))*(1/_))),w=Math.max(0,Math.min(1,(Math.abs(w)-(_-.9))*(1/_))),b*=m>w?m:w,b<.01&&(b=0),I[E]=b,v+=C,v>=10&&(v=0,y+=C)}else I[E]=0;this.groundGeometry.computeVertexNormals(),this.groundGeometry.attributes.position.needsUpdate=!0,this.groundGeometry.attributes.normal.needsUpdate=!0}this.ground.setAttribute("scale",{z:this.environmentData.groundYScale});var O=2048,R=20,L=this.STAGE_SIZE/R;this.groundCanvas&&this.groundCanvas.width==O||(this.gridCanvas=document.createElement("canvas"),this.gridCanvas.width=O,this.gridCanvas.height=O,this.gridTexture=new THREE.Texture(this.gridCanvas),this.gridTexture.wrapS=THREE.RepeatWrapping,this.gridTexture.wrapT=THREE.RepeatWrapping,this.gridTexture.repeat.set(L,L),this.rendererSystem.applyColorCorrection(this.gridTexture),this.groundCanvas=document.createElement("canvas"),this.groundCanvas.width=O,this.groundCanvas.height=O,this.groundTexture=new THREE.Texture(this.groundCanvas),this.groundTexture.wrapS=THREE.RepeatWrapping,this.groundTexture.wrapT=THREE.RepeatWrapping,this.groundTexture.repeat.set(L,L),this.rendererSystem.applyColorCorrection(this.groundTexture),this.groundMaterialProps={map:this.groundTexture,emissive:new THREE.Color(16777215),emissiveMap:this.gridTexture},new THREE.Material().hasOwnProperty("shading")?this.groundMaterialProps.shading=this.environmentData.flatShading?THREE.FlatShading:THREE.SmoothShading:this.groundMaterialProps.flatShading=this.environmentData.flatShading,this.groundMaterial=new THREE.MeshLambertMaterial(this.groundMaterialProps));var P=this.groundCanvas.getContext("2d"),Y=this.gridCanvas.getContext("2d");if(this.drawTexture(P,O,R),Y.fillStyle="#000000",Y.fillRect(0,0,O,O),this.drawGrid(Y,O,R),this.groundTexture.needsUpdate=!0,this.gridTexture.needsUpdate=!0,d){var J=new THREE.Mesh(this.groundGeometry,this.groundMaterial);this.ground.setObject3D("mesh",J)}else this.ground.getObject3D("mesh").material=this.groundMaterial;this.ground.setAttribute("shadow",{cast:!1,receive:this.environmentData.shadow})},drawGrid:function(d,U,K){if(this.environmentData.grid!="none"){var T,I,u,g=Math.floor(K/2),C=U/(K/2);switch(d.fillStyle=this.environmentData.gridColor,this.environmentData.grid){case"1x1":case"2x2":for(this.environmentData.grid=="1x1"&&(g*=2,C=U/K),T=0;T<g;T++)u=Math.floor(T*C),d.fillRect(0,u,U,1),d.fillRect(u,0,1,U);break;case"crosses":var v=Math.floor(C/20);for(T=0;T<g+1;T++)for(u=Math.floor(T*C),I=0;I<g+1;I++){var y=Math.floor(-v+I*C);d.fillRect(y,u,2*v,1),d.fillRect(u,y,1,2*v)}break;case"dots":for(T=0;T<g+1;T++)for(I=0;I<g+1;I++)d.beginPath(),d.arc(Math.floor(I*C),Math.floor(T*C),4,0,2*Math.PI),d.fill();break;case"xlines":for(T=0;T<g;T++)d.fillRect(Math.floor(T*C),0,1,U);break;case"ylines":for(T=0;T<g;T++)d.fillRect(0,Math.floor(T*C),U,1)}}},drawTexture:function(d,U,K){d.fillStyle=this.environmentData.groundColor,d.fillRect(0,0,U,U);var T,I,u,g,C,v,y;if(this.environmentData.groundTexture!="none")switch(this.environmentData.groundTexture){case"checkerboard":d.fillStyle=this.environmentData.groundColor2;var E=Math.floor(K/2),b=U/(K/2);for(T=0;T<E+1;T+=2)for(var m=0;m<E+1;m++)d.fillRect(Math.floor((T+m%2)*b),Math.floor(m*b),Math.floor(b),Math.floor(b));break;case"squares":var w=16,_=U/w;for(u=new THREE.Color().setStyle(this.environmentData.groundColor,THREE.NoColorSpace),g=new THREE.Color().setStyle(this.environmentData.groundColor2,THREE.NoColorSpace),T=0;T<w*w;T++)I=this.random(T+3)>.5?u.clone():g.clone(),I.addScalar(.1*this.random(T+3)-.05),d.fillStyle="#"+I.getHexString(THREE.NoColorSpace),d.fillRect(T%w*_,Math.floor(T/w)*_,_,_);break;case"noise":v=d.getImageData(0,0,U,U),C=v.data,u=new THREE.Color().setStyle(this.environmentData.groundColor,THREE.NoColorSpace),g=new THREE.Color().setStyle(this.environmentData.groundColor2,THREE.NoColorSpace);var O=new THREE.Color(g.r-u.r,g.g-u.g,g.b-u.b),R=new W;for(T=0,m=0,y=C.length;T<y;T+=4,m++){var L=R.noise(m%U/U*3,m/U/U*3,0);C[T+0]=Math.floor(255*(u.r+O.r*L)),C[T+1]=Math.floor(255*(u.g+O.g*L)),C[T+2]=Math.floor(255*(u.b+O.b*L))}d.putImageData(v,0,0);break;case"walkernoise":var P=Math.floor(U/2),Y=document.createElement("canvas");Y.width=P,Y.height=P;var J=Y.getContext("2d");J.fillStyle=this.environmentData.groundColor,J.fillRect(0,0,P,P),v=J.getImageData(0,0,P,P),C=v.data,u=new THREE.Color().setStyle(this.environmentData.groundColor,THREE.NoColorSpace),g=new THREE.Color().setStyle(this.environmentData.groundColor2,THREE.NoColorSpace);var j=[],k=1e3;for(T=0;T<k;T++)I=u.clone().lerp(g,Math.random()),j.push({x:Math.random()*P,y:Math.random()*P,r:Math.floor(255*I.r),g:Math.floor(255*I.g),b:Math.floor(255*I.b)});for(var te=5e3,ue=0;ue<te;ue++)for(T=0;T<k;T++){var xe=j[T],Ee=4*Math.floor(xe.y*P+xe.x);C[Ee+0]=xe.r,C[Ee+1]=xe.g,C[Ee+2]=xe.b,xe.x+=Math.floor(3*Math.random())-1,xe.y+=Math.floor(3*Math.random())-1,xe.x>=P&&(xe.x=xe.x-P),xe.y>=P&&(xe.y=xe.y-P),xe.x<0&&(xe.x=P+xe.x),xe.y<0&&(xe.y=P+xe.y)}J.putImageData(v,0,0),d.drawImage(Y,0,0,U,U)}},getAssetGeometry:function(d){function U(O,R){for(var L=(new THREE.Vector3,O.attributes.position.array),P=L.length,Y=0;Y<P;Y+=3)L[Y]=(g.random(Y)-.5)*R,L[Y+1]=(g.random(Y+P)-.5)*R,L[Y+2]=(g.random(Y+2*P)-.5)*R;O.attributes.position.needsUpdate=!0}if(!d)return null;for(var K,T,I,u=[],g=this,C=0;C<d.length;C++)if(d[C].type=="lathe"){var v=-99999,y=[];for(I=d[C].vertices,K=0;K<I.length;K+=2)y.push(new THREE.Vector2(I[K],I[K+1])),I[K+1]>v&&(v=I[K+1]);T=new THREE.LatheGeometry(y,d[C].segments||8),T.applyMatrix4(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI,0,0))),T.applyMatrix4(new THREE.Matrix4().makeTranslation(0,v,0)),T=T.toNonIndexed(),u.push(T)}else if(d[C].type=="extrude"){var E=new THREE.Shape;for(I=d[C].vertices,K=0;K<I.length;K+=2)K==0?E.moveTo(I[K],I[K+1]):E.lineTo(I[K],I[K+1]);T=new THREE.ExtrudeGeometry(E,{amount:1,bevelEnabled:!1}),T.applyMatrix4(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(-Math.PI/2,0,0))),d[C].noise&&U(T,d[C].noise),u.push(T)}else if(d[C].type=="mesh"){T=new THREE.BufferGeometry,I=d[C].vertices;var b=d[C].faces,m=new Float32Array(I);if(T.setIndex(b),T.setAttribute("position",new THREE.BufferAttribute(m,3)),d[C].mirror){var w=T.clone();w.applyMatrix4(new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(0,Math.PI,0)));var _=THREE.BufferGeometryUtils.mergeGeometries||THREE.BufferGeometryUtils.mergeBufferGeometries;T=_([T,w])}d[C].noise&&U(T,d[C].noise),T=T.toNonIndexed(),T.computeVertexNormals(),u.push(T)}return u},updateDressing:function(){var d=new THREE.Object3D,U=[];if(this.dressing.setAttribute("visible",this.environmentData.dressing!="none"),this.environmentData.dressing!="none"){var K;switch(this.environmentData.dressing){case"cubes":K=[new THREE.BoxGeometry(1,1,1)],K[0].applyMatrix4(new THREE.Matrix4().makeTranslation(0,.5,0));break;case"pyramids":K=[new THREE.ConeGeometry(1,1,4,1,!0)],K[0].applyMatrix4(new THREE.Matrix4().makeTranslation(0,.5,0));break;case"cylinders":K=[new THREE.CylinderGeometry(.5,.5,1,8,1,!0)],K[0].applyMatrix4(new THREE.Matrix4().makeTranslation(0,.5,0));break;default:if(K=this.getAssetGeometry(this.assets[this.environmentData.dressing]),!K)return}for(var T=0,I=88343;T<this.environmentData.dressingAmount;T++,I++){var u,g=K[Math.floor(this.random(33+T)*K.length)].clone(),C=this.environmentData.dressingScale,v=new THREE.Vector3(this.environmentData.dressingVariance.x,this.environmentData.dressingVariance.y,this.environmentData.dressingVariance.z),y=this.random(I)<this.environmentData.dressingOnPlayArea;u=y?15*this.random(I+1):10+Math.max(v.x,v.z)+10*this.random(I+1)+this.random(I+2)*this.STAGE_SIZE/3;var E=this.random(I+3)*Math.PI*2,b=new THREE.Matrix4,m=this.random(I+4),w=this.environmentData.dressingUniformScale;b.compose(new THREE.Vector3(Math.cos(E)*u,0,Math.sin(E)*u),new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0,1,0),(this.random(I+5)-.5)*v.length()*Math.PI*2),new THREE.Vector3(C+(w?m:this.random(I+6))*v.x,C+(w?m:this.random(I+7))*v.y,C+(w?m:this.random(I+8))*v.z)),g.applyMatrix4(b),U.push(g)}var _=THREE.BufferGeometryUtils.mergeGeometries||THREE.BufferGeometryUtils.mergeBufferGeometries,O=_(U);O.attributes.position.needsUpdate=!0;var R=new THREE.MeshLambertMaterial({color:new THREE.Color(this.environmentData.dressingColor)});this.rendererSystem.applyColorCorrection(R.color);var L=new THREE.Mesh(O,R);d.add(L),this.dressing.setObject3D("mesh",d)}},createStars:function(){for(var d=2e3,U=new THREE.BufferGeometry,K=new Float32Array(3*d),T=this.STAGE_SIZE-1,I=new THREE.Vector3,u=0;u<K.length;u+=3)I.set(this.random(u+23)-.5,this.random(u+24),this.random(u+25)-.5),I.normalize(),I.multiplyScalar(T),K[u]=I.x,K[u+1]=I.y,K[u+2]=I.z;U.setAttribute("position",new THREE.BufferAttribute(K,3)),U.setDrawRange(0,0);var g=new THREE.PointsMaterial({size:.01,color:13421772,fog:!1});this.rendererSystem.applyColorCorrection(g.color),this.stars.setObject3D("mesh",new THREE.Points(U,g))},setStars:function(d){this.stars||(this.stars=document.createElement("a-entity"),this.stars.id="stars",this.createStars(),this.el.appendChild(this.stars)),d=Math.floor(Math.min(2e3,Math.max(0,d))),this.stars.getObject3D("mesh").geometry.setDrawRange(0,d)}}),AFRAME.registerShader("skyshader",{schema:{exposureBias:{type:"number",default:1,min:0,max:10,is:"uniform"},turbidity:{type:"number",default:2,min:0,max:20,is:"uniform"},reileigh:{type:"number",default:1,min:0,max:4,is:"uniform"},mieCoefficient:{type:"number",default:.005,min:0,max:.1,is:"uniform"},mieDirectionalG:{type:"number",default:.8,min:0,max:1,is:"uniform"},sunPosition:{type:"vec3",default:{x:0,y:0,z:-1},is:"uniform"},color:{type:"color",default:"#fff"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","#include <dithering_pars_fragment>","uniform sampler2D skySampler;","uniform vec3 sunPosition;","varying vec3 vWorldPosition;","vec3 cameraPos = vec3(0., 0., 0.);","uniform float exposureBias;","uniform float turbidity;","uniform float reileigh;","uniform float mieCoefficient;","uniform float mieDirectionalG;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float pn = 0.035;","const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);","const vec3 K = vec3(0.686, 0.678, 0.666);","const float v = 4.0;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3(0.0, 1.0, 0.0);","const float EE = 1000.0;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float cutoffAngle = pi/1.95;","const float steepness = 1.5;","vec3 totalRayleigh(vec3 lambda)","{","return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));","}","vec3 simplifiedRayleigh()","{","return 0.0005 / vec3(94, 40, 18);","}","float rayleighPhase(float cosTheta)","{   ","return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));","}","vec3 totalMie(vec3 lambda, vec3 K, float T)","{","float c = (0.2 * T ) * 10E-18;","return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;","}","float hgPhase(float cosTheta, float g)","{","return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));","}","float sunIntensity(float zenithAngleCos)","{","return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));","}","// Filmic ToneMapping http://filmicgames.com/archives/75","float A = 0.15;","float B = 0.50;","float C = 0.10;","float D = 0.20;","float E = 0.02;","float F = 0.30;","float W = 1000.0;","vec3 Uncharted2Tonemap(vec3 x)","{","return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;","}","void main() ","{","float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);","float reileighCoefficient = reileigh - (1.0* (1.0-sunfade));","vec3 sunDirection = normalize(sunPosition);","float sunE = sunIntensity(dot(sunDirection, up));","vec3 betaR = simplifiedRayleigh() * reileighCoefficient;","vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;","float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));","float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","vec3 Fex = exp(-(betaR * sR + betaM * sM));","float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);","float rPhase = rayleighPhase(cosTheta*0.5+0.5);","vec3 betaRTheta = betaR * rPhase;","float mPhase = hgPhase(cosTheta, mieDirectionalG);","vec3 betaMTheta = betaM * mPhase;","vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));","Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));","vec3 direction = normalize(vWorldPosition - cameraPos);","float theta = acos(direction.y); // elevation --> y-axis, [-pi/2, pi/2]","float phi = atan(direction.z, direction.x); // azimuth --> x-axis [-pi/2, pi/2]","vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);","vec3 L0 = vec3(0.1) * Fex;","float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);","L0 += (sunE * 19000.0 * Fex)*sundisk;","vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));","vec3 texColor = (Lin+L0);","texColor *= 0.04;","texColor += vec3(0.0,0.001,0.0025)*0.3;","vec3 curr = Uncharted2Tonemap(exposureBias*texColor);","vec3 color = curr*whiteScale;","vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));","gl_FragColor.rgb = retColor;","gl_FragColor.a = 1.0;","#include <dithering_fragment>","}"].join(`
`)}),AFRAME.registerShader("gradientshader",{schema:{topColor:{type:"color",default:"1 0 0",is:"uniform"},bottomColor:{type:"color",default:"0 0 1",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {"," vec4 worldPosition = modelMatrix * vec4( position, 1.0 );"," vWorldPosition = worldPosition.xyz;"," gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","#include <dithering_pars_fragment>","uniform vec3 bottomColor;","uniform vec3 topColor;","uniform float offset;","varying vec3 vWorldPosition;","void main() {"," float h = normalize( vWorldPosition ).y;"," gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max(h, 0.0 ), 0.8 ), 0.0 ) ), 1.0 );"," #include <dithering_fragment>","}"].join(`
`)});var W=function(d){var U;this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[];var K;for(K=0;K<256;K++)U=parseFloat("0."+Math.sin(9999*d*K).toString().substr(7)),this.p[K]=Math.floor(256*U);for(this.perm=[],K=0;K<512;K++)this.perm[K]=this.p[255&K]};W.prototype.dot=function(d,U,K,T){return d[0]*U+d[1]*K+d[2]*T},W.prototype.mix=function(d,U,K){return(1-K)*d+K*U},W.prototype.fade=function(d){return d*d*d*(d*(6*d-15)+10)},W.prototype.noise=function(d,U,K){var T=Math.floor(d),I=Math.floor(U),u=Math.floor(K);d-=T,U-=I,K-=u,T&=255,I&=255,u&=255;var g=this.perm[T+this.perm[I+this.perm[u]]]%12,C=this.perm[T+this.perm[I+this.perm[u+1]]]%12,v=this.perm[T+this.perm[I+1+this.perm[u]]]%12,y=this.perm[T+this.perm[I+1+this.perm[u+1]]]%12,E=this.perm[T+1+this.perm[I+this.perm[u]]]%12,b=this.perm[T+1+this.perm[I+this.perm[u+1]]]%12,m=this.perm[T+1+this.perm[I+1+this.perm[u]]]%12,w=this.perm[T+1+this.perm[I+1+this.perm[u+1]]]%12,_=this.dot(this.grad3[g],d,U,K),O=this.dot(this.grad3[E],d-1,U,K),R=this.dot(this.grad3[v],d,U-1,K),L=this.dot(this.grad3[m],d-1,U-1,K),P=this.dot(this.grad3[C],d,U,K-1),Y=this.dot(this.grad3[b],d-1,U,K-1),J=this.dot(this.grad3[y],d,U-1,K-1),j=this.dot(this.grad3[w],d-1,U-1,K-1),k=this.fade(d),te=this.fade(U),ue=this.fade(K),xe=this.mix(_,O,k),Ee=this.mix(P,Y,k),V=this.mix(R,L,k),q=this.mix(J,j,k),Q=this.mix(xe,V,te),F=this.mix(Ee,q,te),z=this.mix(Q,F,ue);return z}}]);const py=SC(q3);py.use(BC());py.use(EE);py.mount("#trollfield-app");
//# sourceMappingURL=index.js.map
